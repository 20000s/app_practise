var __wxLibrary={fileName: 'WASubContext.js', envType: 'Service', contextType: 'App:SubContext', execStart: Date.now()}
try { var __defaultStackLimit__ = Error.stackTraceLimit; Error.stackTraceLimit = 40 } catch (e) {};var __WASubContextStartTime__ = Date.now();(function(__exportGlobal__){var __clientsubcontext = true;var __safeway__;var Reporter;var BaseConsole;;var __libVersionInfo__ = {"updateTime":"2021.7.21 15:24:48","version":"2.18.0","features":{"pruneWxConfigByPage":true,"injectGameContextPlugin":true,"lazyCodeLoading2":true,"injectAppSeparatedPlugin":true,"nativeTrans":true,"gameLive":true}};;var __Function__ = __exportGlobal__.Function; var Function = __Function__;;var wxNativeConsole;;var __sclEngine__ = null;var BabelRuntimeHelpers={},regeneratorRuntime,Foundation;(()=>{var e={3473:(e,t,n)=>{"use strict";function r(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}n.r(t),n.d(t,{default:()=>r})},676:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},9968:(e,t,n)=>{"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:()=>r})},3349:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(t),n.d(t,{default:()=>r})},2137:(e,t,n)=>{"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}n.r(t),n.d(t,{default:()=>i})},6610:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,{default:()=>r})},6481:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(4665),i=n(1814);function o(e,t,n){return(o=(0,i.Z)()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&(0,r.Z)(o,n.prototype),o}).apply(null,arguments)}},5991:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,{default:()=>i})},1965:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(2961);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}},446:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(7608),i=n(1814),o=n(6070);function a(e){var t=(0,i.Z)();return function(){var n,i=(0,r.default)(e);if(t){var a=(0,r.default)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,o.default)(this,n)}}},6156:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,{default:()=>r})},6213:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(7608);function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.default)(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}},7608:(e,t,n)=>{"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,{default:()=>r})},379:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(4665);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(0,r.Z)(e,t)}},5770:(e,t,n)=>{"use strict";function r(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}n.r(t),n.d(t,{default:()=>r})},906:(e,t,n)=>{"use strict";function r(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}n.r(t),n.d(t,{default:()=>r})},1814:(e,t,n)=>{"use strict";function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:()=>r})},6410:(e,t,n)=>{"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:()=>r})},8970:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:()=>r})},8991:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(6156);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},7375:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.r(t),n.d(t,{default:()=>r})},6070:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o});var r=n(8),i=n(3349);function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?(0,i.default)(e):t}},4665:(e,t,n)=>{"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,{Z:()=>r})},8481:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(9968);var i=n(2961),o=n(8970);function a(e,t){return(0,r.Z)(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||(0,i.Z)(e,t)||(0,o.Z)()}},9809:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var r=n(9968),i=n(6410),o=n(2961),a=n(8970);function s(e){return(0,r.Z)(e)||(0,i.Z)(e)||(0,o.Z)(e)||(0,a.Z)()}},5061:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(676);var i=n(6410),o=n(2961);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},484:(e,t,n)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,{default:()=>r})},2961:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(676);function i(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},7869:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>a});var r=n(7608),i=n(4665);var o=n(6481);function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return(0,o.default)(e,arguments,(0,r.default)(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(a,e)})(e)}},8503:(e,t,n)=>{var r={"./applyDecoratedDescriptor":3473,"./assertThisInitialized":3349,"./asyncToGenerator":2137,"./classCallCheck":6610,"./construct":6481,"./createClass":5991,"./createForOfIteratorHelper":1965,"./createSuper":446,"./defineProperty":6156,"./get":6213,"./getPrototypeOf":7608,"./inherits":379,"./initializerDefineProperty":5770,"./initializerWarningHelper":906,"./objectSpread2":8991,"./objectWithoutProperties":7375,"./possibleConstructorReturn":6070,"./slicedToArray":8481,"./toArray":9809,"./toConsumableArray":5061,"./typeof":484,"./wrapNativeSuper":7869};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=8503},8:e=>{function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0},7757:(e,t,n)=>{n(5666)},2136:(e,t,n)=>{"use strict";n.r(t);n(7757);var r=n(8503);r.keys().forEach((e=>{BabelRuntimeHelpers[e.substr(2)]=r(e)}))},5269:(e,t,n)=>{"use strict";n.r(t);n(1817),n(2443),n(4944),n(6535),n(6992),n(5827),n(6644),n(5069),n(2707),n(3792),n(9244),n(8264),n(9575),n(5438),n(1874),n(9595),n(5500),n(8559),n(4869),n(3952),n(8674),n(7727),n(6528),n(3112),n(5306),n(3210),n(8702),n(5674),n(4197),n(6495),n(7145),n(5109),n(5125),n(2472),n(9743),n(8255),n(9135),n(8145),n(5206),n(8628),n(5743),n(7314),n(6290),n(3728),n(7207),n(3948);["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{var t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))},7800:(e,t,n)=>{var r=n(6656),i=n(3157),o=n(4705),a=n(5465),s=o.data,c=o.normalize,u="USE_FUNCTION_CONSTRUCTOR",l="AsyncIteratorPrototype",d=function(e,t){if(i(e))for(var n=0;n<e.length;n++)s[c(e[n])]=t};e.exports=function(e){"object"==typeof e&&(d(e.useNative,o.NATIVE),d(e.usePolyfill,o.POLYFILL),d(e.useFeatureDetection,null),r(e,u)&&(a.USE_FUNCTION_CONSTRUCTOR=!!e.USE_FUNCTION_CONSTRUCTOR),r(e,l)&&(a.USE_FUNCTION_CONSTRUCTOR=e.AsyncIteratorPrototype))}},3099:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},6077:(e,t,n)=>{var r=n(111);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},1223:(e,t,n)=>{var r=n(5112),i=n(30),o=n(3070),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},1530:(e,t,n)=>{"use strict";var r=n(8710).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},5787:e=>{e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},9670:(e,t,n)=>{var r=n(111);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},4019:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:(e,t,n)=>{"use strict";var r,i=n(4019),o=n(9781),a=n(7854),s=n(111),c=n(6656),u=n(648),l=n(8880),d=n(1320),f=n(3070).f,p=n(9518),h=n(7674),g=n(5112),v=n(9711),_=a.Int8Array,m=_&&_.prototype,y=a.Uint8ClampedArray,b=y&&y.prototype,w=_&&p(_),I=m&&p(m),S=Object.prototype,C=S.isPrototypeOf,T=g("toStringTag"),E=v("TYPED_ARRAY_TAG"),k=i&&!!h&&"Opera"!==u(a.opera),x=!1,A={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P={BigInt64Array:8,BigUint64Array:8},D=function(e){if(!s(e))return!1;var t=u(e);return c(A,t)||c(P,t)};for(r in A)a[r]||(k=!1);if((!k||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},k))for(r in A)a[r]&&h(a[r],w);if((!k||!I||I===S)&&(I=w.prototype,k))for(r in A)a[r]&&h(a[r].prototype,I);if(k&&p(b)!==I&&h(b,I),o&&!c(I,T))for(r in x=!0,f(I,T,{get:function(){return s(this)?this[E]:void 0}}),A)a[r]&&l(a[r],E,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:k,TYPED_ARRAY_TAG:x&&E,aTypedArray:function(e){if(D(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h){if(C.call(w,e))return e}else for(var t in A)if(c(A,r)){var n=a[t];if(n&&(e===n||C.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var r in A){var i=a[r];i&&c(i.prototype,e)&&delete i.prototype[e]}I[e]&&!n||d(I,e,n?t:k&&m[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(o){if(h){if(n)for(r in A)(i=a[r])&&c(i,e)&&delete i[e];if(w[e]&&!n)return;try{return d(w,e,n?t:k&&_[e]||t)}catch(e){}}for(r in A)!(i=a[r])||i[e]&&!n||d(i,e,t)}},isView:function(e){if(!s(e))return!1;var t=u(e);return"DataView"===t||c(A,t)||c(P,t)},isTypedArray:D,TypedArray:w,TypedArrayPrototype:I}},3331:(e,t,n)=>{"use strict";var r=n(7854),i=n(9781),o=n(4019),a=n(8880),s=n(2248),c=n(7293),u=n(5787),l=n(9958),d=n(7466),f=n(7067),p=n(1179),h=n(9518),g=n(7674),v=n(8006).f,_=n(3070).f,m=n(1285),y=n(8003),b=n(9909),w=b.get,I=b.set,S="ArrayBuffer",C="DataView",T="Wrong index",E=r.ArrayBuffer,k=E,x=r.DataView,A=x&&x.prototype,P=Object.prototype,D=r.RangeError,O=p.pack,N=p.unpack,R=function(e){return[255&e]},M=function(e){return[255&e,e>>8&255]},L=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},B=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},F=function(e){return O(e,23,4)},j=function(e){return O(e,52,8)},W=function(e,t){_(e.prototype,t,{get:function(){return w(this)[t]}})},U=function(e,t,n,r){var i=f(n),o=w(e);if(i+t>o.byteLength)throw D(T);var a=w(o.buffer).bytes,s=i+o.byteOffset,c=a.slice(s,s+t);return r?c:c.reverse()},V=function(e,t,n,r,i,o){var a=f(n),s=w(e);if(a+t>s.byteLength)throw D(T);for(var c=w(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),d=0;d<t;d++)c[u+d]=l[o?d:t-d-1]};if(o){if(!c((function(){E(1)}))||!c((function(){new E(-1)}))||c((function(){return new E,new E(1.5),new E(NaN),E.name!=S}))){for(var G,H=(k=function(e){return u(this,k),new E(f(e))}).prototype=E.prototype,Z=v(E),q=0;Z.length>q;)(G=Z[q++])in k||a(k,G,E[G]);H.constructor=k}g&&h(A)!==P&&g(A,P);var z=new x(new k(2)),Y=A.setInt8;z.setInt8(0,2147483648),z.setInt8(1,2147483649),!z.getInt8(0)&&z.getInt8(1)||s(A,{setInt8:function(e,t){Y.call(this,e,t<<24>>24)},setUint8:function(e,t){Y.call(this,e,t<<24>>24)}},{unsafe:!0})}else k=function(e){u(this,k,S);var t=f(e);I(this,{bytes:m.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},x=function(e,t,n){u(this,x,C),u(e,k,C);var r=w(e).byteLength,o=l(t);if(o<0||o>r)throw D("Wrong offset");if(o+(n=void 0===n?r-o:d(n))>r)throw D("Wrong length");I(this,{buffer:e,byteLength:n,byteOffset:o}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},i&&(W(k,"byteLength"),W(x,"buffer"),W(x,"byteLength"),W(x,"byteOffset")),s(x.prototype,{getInt8:function(e){return U(this,1,e)[0]<<24>>24},getUint8:function(e){return U(this,1,e)[0]},getInt16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return B(U(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return B(U(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return N(U(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return N(U(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){V(this,1,e,R,t)},setUint8:function(e,t){V(this,1,e,R,t)},setInt16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){V(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){V(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){V(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){V(this,8,e,j,t,arguments.length>2?arguments[2]:void 0)}});y(k,S),y(x,C),e.exports={ArrayBuffer:k,DataView:x}},1285:(e,t,n)=>{"use strict";var r=n(7908),i=n(1400),o=n(7466);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},1318:(e,t,n)=>{var r=n(5656),i=n(7466),o=n(1400),a=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},2092:(e,t,n)=>{var r=n(9974),i=n(8361),o=n(7908),a=n(7466),s=n(5417),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,d=6==e,f=7==e,p=5==e||d;return function(h,g,v,_){for(var m,y,b=o(h),w=i(b),I=r(g,v,3),S=a(w.length),C=0,T=_||s,E=t?T(h,S):n||f?T(h,0):void 0;S>C;C++)if((p||C in w)&&(y=I(m=w[C],C,b),e))if(t)E[C]=y;else if(y)switch(e){case 3:return!0;case 5:return m;case 6:return C;case 2:c.call(E,m)}else switch(e){case 4:return!1;case 7:c.call(E,m)}return d?-1:u||l?l:E}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},9341:(e,t,n)=>{"use strict";var r=n(7293);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},3671:(e,t,n)=>{var r=n(3099),i=n(7908),o=n(8361),a=n(7466),s=function(e){return function(t,n,s,c){r(n);var u=i(t),l=o(u),d=a(u.length),f=e?d-1:0,p=e?-1:1;if(s<2)for(;;){if(f in l){c=l[f],f+=p;break}if(f+=p,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=p)f in l&&(c=n(c,l[f],f,u));return c}};e.exports={left:s(!1),right:s(!0)}},5417:(e,t,n)=>{var r=n(111),i=n(3157),o=n(5112)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},7072:(e,t,n)=>{var r=n(5112)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},4326:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},648:(e,t,n)=>{var r=n(1694),i=n(4326),o=n(5112)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},9920:(e,t,n)=>{var r=n(6656),i=n(3887),o=n(1236),a=n(3070);e.exports=function(e,t){for(var n=i(t),s=a.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},8544:(e,t,n)=>{var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4994:(e,t,n)=>{"use strict";var r=n(3383).IteratorPrototype,i=n(30),o=n(9114),a=n(8003),s=n(7497),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,u,!1,!0),s[u]=c,e}},8880:(e,t,n)=>{var r=n(9781),i=n(3070),o=n(9114);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:(e,t,n)=>{"use strict";var r=n(7593),i=n(3070),o=n(9114);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},654:(e,t,n)=>{"use strict";var r=n(2109),i=n(4994),o=n(9518),a=n(7674),s=n(8003),c=n(8880),u=n(1320),l=n(5112),d=n(1913),f=n(7497),p=n(3383),h=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,v=l("iterator"),_="keys",m="values",y="entries",b=function(){return this};e.exports=function(e,t,n,l,p,w,I){i(n,t,l);var S,C,T,E=function(e){if(e===p&&D)return D;if(!g&&e in A)return A[e];switch(e){case _:case m:case y:return function(){return new n(this,e)}}return function(){return new n(this)}},k=t+" Iterator",x=!1,A=e.prototype,P=A[v]||A["@@iterator"]||p&&A[p],D=!g&&P||E(p),O="Array"==t&&A.entries||P;if(O&&(S=o(O.call(new e)),h!==Object.prototype&&S.next&&(d||o(S)===h||(a?a(S,h):"function"!=typeof S[v]&&c(S,v,b)),s(S,k,!0,!0),d&&(f[k]=b))),p==m&&P&&P.name!==m&&(x=!0,D=function(){return P.call(this)}),d&&!I||A[v]===D||c(A,v,D),f[t]=D,p)if(C={values:E(m),keys:w?D:E(_),entries:E(y)},I)for(T in C)(g||x||!(T in A))&&u(A,T,C[T]);else r({target:t,proto:!0,forced:g||x},C);return C}},7235:(e,t,n)=>{var r=n(857),i=n(6656),o=n(6061),a=n(3070).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},9781:(e,t,n)=>{var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(e,t,n)=>{var r=n(7854),i=n(111),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},6833:(e,t,n)=>{var r=n(8113);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},5268:(e,t,n)=>{var r=n(4326),i=n(7854);e.exports="process"==r(i.process)},1036:(e,t,n)=>{var r=n(8113);e.exports=/web0s(?!.*chrome)/i.test(r)},8113:(e,t,n)=>{var r=n(5005);e.exports=r("navigator","userAgent")||""},7392:(e,t,n)=>{var r,i,o=n(7854),a=n(8113),s=o.process,c=s&&s.versions,u=c&&c.v8;u?i=(r=u.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},748:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:(e,t,n)=>{var r=n(7854),i=n(1236).f,o=n(8880),a=n(1320),s=n(3505),c=n(9920),u=n(4705);e.exports=function(e,t){var n,l,d,f,p,h=e.target,g=e.global,v=e.stat;if(n=g?r:v?r[h]||s(h,{}):(r[h]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(p=i(n,l))&&p.value:n[l],!u(g?l:h+(v?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&o(f,"sham",!0),a(n,l,f,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:(e,t,n)=>{"use strict";n(4916);var r=n(1320),i=n(7293),o=n(5112),a=n(8880),s=o("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),l=o("replace"),d=!!/./[l]&&""===/./[l]("a","$0"),f=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,l){var p=o(e),h=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=h&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[s]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!h||!g||"replace"===e&&(!c||!u||d)||"split"===e&&!f){var v=/./[p],_=n(p,""[e],(function(e,t,n,r,i){return t.exec===RegExp.prototype.exec?h&&!i?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),m=_[0],y=_[1];r(String.prototype,e,m),r(RegExp.prototype,p,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}l&&a(RegExp.prototype[p],"sham",!0)}},6790:(e,t,n)=>{"use strict";var r=n(3157),i=n(7466),o=n(9974),a=function(e,t,n,s,c,u,l,d){for(var f,p=c,h=0,g=!!l&&o(l,d,3);h<s;){if(h in n){if(f=g?g(n[h],h,t):n[h],u>0&&r(f))p=a(e,t,f,i(f.length),p,u-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[p]=f}p++}h++}return p};e.exports=a},9974:(e,t,n)=>{var r=n(3099);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},5005:(e,t,n)=>{var r=n(857),i=n(7854),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},1246:(e,t,n)=>{var r=n(648),i=n(7497),o=n(5112)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},647:(e,t,n)=>{var r=n(7908),i=Math.floor,o="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,u,l){var d=n+e.length,f=c.length,p=s;return void 0!==u&&(u=r(u),p=a),o.call(l,p,(function(r,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":a=u[o.slice(1,-1)];break;default:var s=+o;if(0===s)return r;if(s>f){var l=i(s/10);return 0===l?r:l<=f?void 0===c[l-1]?o.charAt(1):c[l-1]+o.charAt(1):r}a=c[s-1]}return void 0===a?"":a}))}},7854:(e,t,n)=>{var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},6656:e=>{var t={}.hasOwnProperty;e.exports=function(e,n){return t.call(e,n)}},3501:e=>{e.exports={}},842:(e,t,n)=>{var r=n(7854);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},490:(e,t,n)=>{var r=n(5005);e.exports=r("document","documentElement")},4664:(e,t,n)=>{var r=n(9781),i=n(7293),o=n(317);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},1179:e=>{var t=Math.abs,n=Math.pow,r=Math.floor,i=Math.log,o=Math.LN2;e.exports={pack:function(e,a,s){var c,u,l,d=new Array(s),f=8*s-a-1,p=(1<<f)-1,h=p>>1,g=23===a?n(2,-24)-n(2,-77):0,v=e<0||0===e&&1/e<0?1:0,_=0;for((e=t(e))!=e||e===1/0?(u=e!=e?1:0,c=p):(c=r(i(e)/o),e*(l=n(2,-c))<1&&(c--,l*=2),(e+=c+h>=1?g/l:g*n(2,1-h))*l>=2&&(c++,l/=2),c+h>=p?(u=0,c=p):c+h>=1?(u=(e*l-1)*n(2,a),c+=h):(u=e*n(2,h-1)*n(2,a),c=0));a>=8;d[_++]=255&u,u/=256,a-=8);for(c=c<<a|u,f+=a;f>0;d[_++]=255&c,c/=256,f-=8);return d[--_]|=128*v,d},unpack:function(e,t){var r,i=e.length,o=8*i-t-1,a=(1<<o)-1,s=a>>1,c=o-7,u=i-1,l=e[u--],d=127&l;for(l>>=7;c>0;d=256*d+e[u],u--,c-=8);for(r=d&(1<<-c)-1,d>>=-c,c+=t;c>0;r=256*r+e[u],u--,c-=8);if(0===d)d=1-s;else{if(d===a)return r?NaN:l?-1/0:1/0;r+=n(2,t),d-=s}return(l?-1:1)*r*n(2,d-t)}}},8361:(e,t,n)=>{var r=n(7293),i=n(4326),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},9587:(e,t,n)=>{var r=n(111),i=n(7674);e.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},2788:(e,t,n)=>{var r=n(5465),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},9909:(e,t,n)=>{var r,i,o,a=n(8536),s=n(7854),c=n(111),u=n(8880),l=n(6656),d=n(5465),f=n(6200),p=n(3501),h="Object already initialized",g=s.WeakMap;if(a){var v=d.state||(d.state=new g),_=v.get,m=v.has,y=v.set;r=function(e,t){if(m.call(v,e))throw new TypeError(h);return t.facade=e,y.call(v,e,t),t},i=function(e){return _.call(v,e)||{}},o=function(e){return m.call(v,e)}}else{var b=f("state");p[b]=!0,r=function(e,t){if(l(e,b))throw new TypeError(h);return t.facade=e,u(e,b,t),t},i=function(e){return l(e,b)?e[b]:{}},o=function(e){return l(e,b)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},7659:(e,t,n)=>{var r=n(5112),i=n(7497),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},3157:(e,t,n)=>{var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},4705:(e,t,n)=>{var r=n(7293),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},111:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},1913:e=>{e.exports=!1},7850:(e,t,n)=>{var r=n(111),i=n(4326),o=n(5112)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},408:(e,t,n)=>{var r=n(9670),i=n(7659),o=n(7466),a=n(9974),s=n(1246),c=n(9212),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,d,f,p,h,g,v,_=n&&n.that,m=!(!n||!n.AS_ENTRIES),y=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),w=a(t,_,1+m+b),I=function(e){return l&&c(l),new u(!0,e)},S=function(e){return m?(r(e),b?w(e[0],e[1],I):w(e[0],e[1])):b?w(e,I):w(e)};if(y)l=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(i(d)){for(f=0,p=o(e.length);p>f;f++)if((h=S(e[f]))&&h instanceof u)return h;return new u(!1)}l=d.call(e)}for(g=l.next;!(v=g.call(l)).done;){try{h=S(v.value)}catch(e){throw c(l),e}if("object"==typeof h&&h&&h instanceof u)return h}return new u(!1)}},9212:(e,t,n)=>{var r=n(9670);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},3383:(e,t,n)=>{"use strict";var r,i,o,a=n(7293),s=n(9518),c=n(8880),u=n(6656),l=n(5112),d=n(1913),f=l("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(r=i):p=!0);var h=null==r||a((function(){var e={};return r[f].call(e)!==e}));h&&(r={}),d&&!h||u(r,f)||c(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},7497:e=>{e.exports={}},5948:(e,t,n)=>{var r,i,o,a,s,c,u,l,d=n(7854),f=n(1236).f,p=n(261).set,h=n(6833),g=n(1036),v=n(5268),_=d.MutationObserver||d.WebKitMutationObserver,m=d.document,y=d.process,b=d.Promise,w=f(d,"queueMicrotask"),I=w&&w.value;I||(r=function(){var e,t;for(v&&(e=y.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},h||v||g||!_||!m?b&&b.resolve?(u=b.resolve(void 0),l=u.then,a=function(){l.call(u,r)}):a=v?function(){y.nextTick(r)}:function(){p.call(d,r)}:(s=!0,c=m.createTextNode(""),new _(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=I||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},3366:(e,t,n)=>{var r=n(7854);e.exports=r.Promise},133:(e,t,n)=>{var r=n(5268),i=n(7392),o=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!Symbol.sham&&(r?38===i:i>37&&i<41)}))},8536:(e,t,n)=>{var r=n(7854),i=n(2788),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},8523:(e,t,n)=>{"use strict";var r=n(3099),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},2814:(e,t,n)=>{var r=n(7854),i=n(3111).trim,o=n(1361),a=r.parseFloat,s=1/a(o+"-0")!=-1/0;e.exports=s?function(e){var t=i(String(e)),n=a(t);return 0===n&&"-"==t.charAt(0)?-0:n}:a},30:(e,t,n)=>{var r,i=n(9670),o=n(6048),a=n(748),s=n(3501),c=n(490),u=n(317),l=n(6200),d=l("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"</"+"script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=i(e),n=new f,f.prototype=null,n[d]=e):n=h(),void 0===t?n:o(n,t)}},6048:(e,t,n)=>{var r=n(9781),i=n(3070),o=n(9670),a=n(1956);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,c=0;s>c;)i.f(e,n=r[c++],t[n]);return e}},3070:(e,t,n)=>{var r=n(9781),i=n(4664),o=n(9670),a=n(7593),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:(e,t,n)=>{var r=n(9781),i=n(5296),o=n(9114),a=n(5656),s=n(7593),c=n(6656),u=n(4664),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},8006:(e,t,n)=>{var r=n(6324),i=n(748).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,n)=>{var r=n(6656),i=n(7908),o=n(6200),a=n(8544),s=o("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},6324:(e,t,n)=>{var r=n(6656),i=n(5656),o=n(1318).indexOf,a=n(3501);e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},1956:(e,t,n)=>{var r=n(6324),i=n(748);e.exports=Object.keys||function(e){return r(e,i)}},5296:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!n.call({1:2},1);t.f=i?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},9026:(e,t,n)=>{"use strict";var r=n(1913),i=n(7854),o=n(7293);e.exports=r||!o((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete i[e]}))},7674:(e,t,n)=>{var r=n(9670),i=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},3887:(e,t,n)=>{var r=n(5005),i=n(8006),o=n(5181),a=n(9670);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},857:(e,t,n)=>{var r=n(7854);e.exports=r},2534:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},9478:(e,t,n)=>{var r=n(9670),i=n(111),o=n(8523);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},2248:(e,t,n)=>{var r=n(1320);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},1320:(e,t,n)=>{var r=n(7854),i=n(8880),o=n(6656),a=n(3505),s=n(2788),c=n(9909),u=c.get,l=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c,u=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),(c=l(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==r?(u?!p&&e[t]&&(f=!0):delete e[t],f?e[t]=n:i(e,t,n)):f?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},7651:(e,t,n)=>{var r=n(4326),i=n(2261);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},2261:(e,t,n)=>{"use strict";var r,i,o=n(7066),a=n(2999),s=n(2309),c=RegExp.prototype.exec,u=s("native-string-replace",String.prototype.replace),l=c,d=(r=/a/,i=/b*/g,c.call(r,"a"),c.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(d||p||f)&&(l=function(e){var t,n,r,i,a=this,s=f&&a.sticky,l=o.call(a),h=a.source,g=0,v=e;return s&&(-1===(l=l.replace("y","")).indexOf("g")&&(l+="g"),v=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(h="(?: "+h+")",v=" "+v,g++),n=new RegExp("^(?:"+h+")",l)),p&&(n=new RegExp("^"+h+"$(?!\\s)",l)),d&&(t=a.lastIndex),r=c.call(s?n:a,v),s?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:d&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),p&&r&&r.length>1&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},7066:(e,t,n)=>{"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},2999:(e,t,n)=>{"use strict";var r=n(7293);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},4488:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},3505:(e,t,n)=>{var r=n(7854),i=n(8880);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},6340:(e,t,n)=>{"use strict";var r=n(5005),i=n(3070),o=n(5112),a=n(9781),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},8003:(e,t,n)=>{var r=n(3070).f,i=n(6656),o=n(5112)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},6200:(e,t,n)=>{var r=n(2309),i=n(9711),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5465:(e,t,n)=>{var r=n(7854),i=n(3505),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},2309:(e,t,n)=>{var r=n(1913),i=n(5465);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.10.2",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},6707:(e,t,n)=>{var r=n(9670),i=n(3099),o=n(5112)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},8710:(e,t,n)=>{var r=n(9958),i=n(4488),o=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},4986:(e,t,n)=>{var r=n(8113);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},6650:(e,t,n)=>{var r=n(7466),i=n(8415),o=n(4488),a=Math.ceil,s=function(e){return function(t,n,s){var c,u,l=String(o(t)),d=l.length,f=void 0===s?" ":String(s),p=r(n);return p<=d||""==f?l:(c=p-d,(u=i.call(f,a(c/f.length))).length>c&&(u=u.slice(0,c)),e?l+u:u+l)}};e.exports={start:s(!1),end:s(!0)}},8415:(e,t,n)=>{"use strict";var r=n(9958),i=n(4488);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},6091:(e,t,n)=>{var r=n(7293),i=n(1361);e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},3111:(e,t,n)=>{var r=n(4488),i="["+n(1361)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},261:(e,t,n)=>{var r,i,o,a=n(7854),s=n(7293),c=n(9974),u=n(490),l=n(317),d=n(6833),f=n(5268),p=a.location,h=a.setImmediate,g=a.clearImmediate,v=a.process,_=a.MessageChannel,m=a.Dispatch,y=0,b={},w="onreadystatechange",I=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},S=function(e){return function(){I(e)}},C=function(e){I(e.data)},T=function(e){a.postMessage(e+"",p.protocol+"//"+p.host)};h&&g||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(y),y},g=function(e){delete b[e]},f?r=function(e){v.nextTick(S(e))}:m&&m.now?r=function(e){m.now(S(e))}:_&&!d?(o=(i=new _).port2,i.port1.onmessage=C,r=c(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!s(T)?(r=T,a.addEventListener("message",C,!1)):r=w in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),I(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:h,clear:g}},1400:(e,t,n)=>{var r=n(9958),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},7067:(e,t,n)=>{var r=n(9958),i=n(7466);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},5656:(e,t,n)=>{var r=n(8361),i=n(4488);e.exports=function(e){return r(i(e))}},9958:e=>{var t=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:t)(e)}},7466:(e,t,n)=>{var r=n(9958),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},7908:(e,t,n)=>{var r=n(4488);e.exports=function(e){return Object(r(e))}},4590:(e,t,n)=>{var r=n(3002);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},3002:(e,t,n)=>{var r=n(9958);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},7593:(e,t,n)=>{var r=n(111);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},1694:(e,t,n)=>{var r={};r[n(5112)("toStringTag")]="z",e.exports="[object z]"===String(r)},9843:(e,t,n)=>{"use strict";var r=n(2109),i=n(7854),o=n(9781),a=n(3832),s=n(260),c=n(3331),u=n(5787),l=n(9114),d=n(8880),f=n(7466),p=n(7067),h=n(4590),g=n(7593),v=n(6656),_=n(648),m=n(111),y=n(30),b=n(7674),w=n(8006).f,I=n(7321),S=n(2092).forEach,C=n(6340),T=n(3070),E=n(1236),k=n(9909),x=n(9587),A=k.get,P=k.set,D=T.f,O=E.f,N=Math.round,R=i.RangeError,M=c.ArrayBuffer,L=c.DataView,B=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,j=s.TypedArray,W=s.TypedArrayPrototype,U=s.aTypedArrayConstructor,V=s.isTypedArray,G="BYTES_PER_ELEMENT",H="Wrong length",Z=function(e,t){for(var n=0,r=t.length,i=new(U(e))(r);r>n;)i[n]=t[n++];return i},q=function(e,t){D(e,t,{get:function(){return A(this)[t]}})},z=function(e){var t;return e instanceof M||"ArrayBuffer"==(t=_(e))||"SharedArrayBuffer"==t},Y=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},K=function(e,t){return Y(e,t=g(t,!0))?l(2,e[t]):O(e,t)},J=function(e,t,n){return!(Y(e,t=g(t,!0))&&m(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?D(e,t,n):(e[t]=n.value,e)};o?(B||(E.f=K,T.f=J,q(W,"buffer"),q(W,"byteOffset"),q(W,"byteLength"),q(W,"length")),r({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:K,defineProperty:J}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,l="set"+e,g=i[s],v=g,_=v&&v.prototype,T={},E=function(e,t){D(e,t,{get:function(){return function(e,t){var n=A(e);return n.view[c](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=A(e);n&&(r=(r=N(r))<0?0:r>255?255:255&r),i.view[l](t*o+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};B?a&&(v=t((function(e,t,n,r){return u(e,v,s),x(m(t)?z(t)?void 0!==r?new g(t,h(n,o),r):void 0!==n?new g(t,h(n,o)):new g(t):V(t)?Z(v,t):I.call(v,t):new g(p(t)),e,v)})),b&&b(v,j),S(w(g),(function(e){e in v||d(v,e,g[e])})),v.prototype=_):(v=t((function(e,t,n,r){u(e,v,s);var i,a,c,l=0,d=0;if(m(t)){if(!z(t))return V(t)?Z(v,t):I.call(v,t);i=t,d=h(n,o);var g=t.byteLength;if(void 0===r){if(g%o)throw R(H);if((a=g-d)<0)throw R(H)}else if((a=f(r)*o)+d>g)throw R(H);c=a/o}else c=p(t),i=new M(a=c*o);for(P(e,{buffer:i,byteOffset:d,byteLength:a,length:c,view:new L(i)});l<c;)E(e,l++)})),b&&b(v,j),_=v.prototype=y(W)),_.constructor!==v&&d(_,"constructor",v),F&&d(_,F,s),T[s]=v,r({global:!0,forced:v!=g,sham:!B},T),G in v||d(v,G,o),G in _||d(_,G,o),C(s)}):e.exports=function(){}},3832:(e,t,n)=>{var r=n(7854),i=n(7293),o=n(7072),a=n(260).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},7321:(e,t,n)=>{var r=n(7908),i=n(7466),o=n(1246),a=n(7659),s=n(9974),c=n(260).aTypedArrayConstructor;e.exports=function(e){var t,n,u,l,d,f,p=r(e),h=arguments.length,g=h>1?arguments[1]:void 0,v=void 0!==g,_=o(p);if(null!=_&&!a(_))for(f=(d=_.call(p)).next,p=[];!(l=f.call(d)).done;)p.push(l.value);for(v&&h>2&&(g=s(g,arguments[2],2)),n=i(p.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=v?g(p[t],t):p[t];return u}},9711:e=>{var t=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+n).toString(36)}},3307:(e,t,n)=>{var r=n(133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},6061:(e,t,n)=>{var r=n(5112);t.f=r},5112:(e,t,n)=>{var r=n(7854),i=n(2309),o=n(6656),a=n(9711),s=n(133),c=n(3307),u=i("wks"),l=r.Symbol,d=c?l:l&&l.withoutSetter||a;e.exports=function(e){return o(u,e)&&(s||"string"==typeof u[e])||(s&&o(l,e)?u[e]=l[e]:u[e]=d("Symbol."+e)),u[e]}},1361:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9170:(e,t,n)=>{"use strict";var r=n(2109),i=n(9518),o=n(7674),a=n(30),s=n(8880),c=n(9114),u=n(408),l=function(e,t){var n=this;if(!(n instanceof l))return new l(e,t);o&&(n=o(new Error(void 0),i(n))),void 0!==t&&s(n,"message",String(t));var r=[];return u(e,r.push,{that:r}),s(n,"errors",r),n};l.prototype=a(Error.prototype,{constructor:c(5,l),message:c(5,""),name:c(5,"AggregateError")}),r({global:!0},{AggregateError:l})},8264:(e,t,n)=>{"use strict";var r=n(2109),i=n(7854),o=n(3331),a=n(6340),s="ArrayBuffer",c=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==c},{ArrayBuffer:c}),a(s)},9575:(e,t,n)=>{"use strict";var r=n(2109),i=n(7293),o=n(3331),a=n(9670),s=n(1400),c=n(7466),u=n(6707),l=o.ArrayBuffer,d=o.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(u(this,l))(c(i-r)),p=new d(this),h=new d(o),g=0;r<i;)h.setUint8(g++,p.getUint8(r++));return o}})},6535:(e,t,n)=>{"use strict";var r=n(2109),i=n(6790),o=n(7908),a=n(7466),s=n(3099),c=n(5417);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),r=a(n.length);return s(e),(t=c(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},4944:(e,t,n)=>{"use strict";var r=n(2109),i=n(6790),o=n(7908),a=n(7466),s=n(9958),c=n(5417);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t.length),r=c(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},6992:(e,t,n)=>{"use strict";var r=n(5656),i=n(1223),o=n(7497),a=n(9909),s=n(654),c="Array Iterator",u=a.set,l=a.getterFor(c);e.exports=s(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},6644:(e,t,n)=>{"use strict";var r=n(2109),i=n(3671).right,o=n(9341),a=n(7392),s=n(5268);r({target:"Array",proto:!0,forced:!o("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},5827:(e,t,n)=>{"use strict";var r=n(2109),i=n(3671).left,o=n(9341),a=n(7392),s=n(5268);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},5069:(e,t,n)=>{"use strict";var r=n(2109),i=n(3157),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},2707:(e,t,n)=>{"use strict";var r=n(2109),i=n(3099),o=n(7908),a=n(7293),s=n(9341),c=[],u=c.sort,l=a((function(){c.sort(void 0)})),d=a((function(){c.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:l||!d||!f},{sort:function(e){return void 0===e?u.call(o(this)):u.call(o(this),i(e))}})},9244:(e,t,n)=>{n(1223)("flatMap")},3792:(e,t,n)=>{n(1223)("flat")},5837:(e,t,n)=>{n(2109)({global:!0},{globalThis:n(7854)})},5438:(e,t,n)=>{var r=n(2109),i=Math.hypot,o=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,i=0,s=0,c=arguments.length,u=0;s<c;)u<(n=o(arguments[s++]))?(i=i*(r=u/n)*r+1,u=n):i+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*a(i)}})},1874:(e,t,n)=>{var r=n(2109),i=n(2814);r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},9595:(e,t,n)=>{"use strict";var r=n(2109),i=n(9781),o=n(9026),a=n(7908),s=n(3099),c=n(3070);i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(e,t){c.f(a(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},5500:(e,t,n)=>{"use strict";var r=n(2109),i=n(9781),o=n(9026),a=n(7908),s=n(3099),c=n(3070);i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(e,t){c.f(a(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},8559:(e,t,n)=>{var r=n(2109),i=n(408),o=n(6135);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,n){o(t,e,n)}),{AS_ENTRIES:!0}),t}})},4869:(e,t,n)=>{"use strict";var r=n(2109),i=n(9781),o=n(9026),a=n(7908),s=n(7593),c=n(9518),u=n(1236).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=u(n,r))return t.get}while(n=c(n))}})},3952:(e,t,n)=>{"use strict";var r=n(2109),i=n(9781),o=n(9026),a=n(7908),s=n(7593),c=n(9518),u=n(1236).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=u(n,r))return t.set}while(n=c(n))}})},7922:(e,t,n)=>{"use strict";var r=n(2109),i=n(3099),o=n(8523),a=n(2534),s=n(408);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=o.f(t),r=n.resolve,c=n.reject,u=a((function(){var n=i(t.resolve),o=[],a=0,c=1;s(e,(function(e){var i=a++,s=!1;o.push(void 0),c++,n.call(t,e).then((function(e){s||(s=!0,o[i]={status:"fulfilled",value:e},--c||r(o))}),(function(e){s||(s=!0,o[i]={status:"rejected",reason:e},--c||r(o))}))})),--c||r(o)}));return u.error&&c(u.value),n.promise}})},4668:(e,t,n)=>{"use strict";var r=n(2109),i=n(3099),o=n(5005),a=n(8523),s=n(2534),c=n(408),u="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=a.f(t),r=n.resolve,l=n.reject,d=s((function(){var n=i(t.resolve),a=[],s=0,d=1,f=!1;c(e,(function(e){var i=s++,c=!1;a.push(void 0),d++,n.call(t,e).then((function(e){c||f||(f=!0,r(e))}),(function(e){c||f||(c=!0,a[i]=e,--d||l(new(o("AggregateError"))(a,u)))}))})),--d||l(new(o("AggregateError"))(a,u))}));return d.error&&l(d.value),n.promise}})},7727:(e,t,n)=>{"use strict";var r=n(2109),i=n(1913),o=n(3366),a=n(7293),s=n(5005),c=n(6707),u=n(9478),l=n(1320);r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),i||"function"!=typeof o||o.prototype.finally||l(o.prototype,"finally",s("Promise").prototype.finally)},8674:(e,t,n)=>{"use strict";var r,i,o,a,s=n(2109),c=n(1913),u=n(7854),l=n(5005),d=n(3366),f=n(1320),p=n(2248),h=n(8003),g=n(6340),v=n(111),_=n(3099),m=n(5787),y=n(2788),b=n(408),w=n(7072),I=n(6707),S=n(261).set,C=n(5948),T=n(9478),E=n(842),k=n(8523),x=n(2534),A=n(9909),P=n(4705),D=n(5112),O=n(5268),N=n(7392),R=D("species"),M="Promise",L=A.get,B=A.set,F=A.getterFor(M),j=d,W=u.TypeError,U=u.document,V=u.process,G=l("fetch"),H=k.f,Z=H,q=!!(U&&U.createEvent&&u.dispatchEvent),z="function"==typeof PromiseRejectionEvent,Y="unhandledrejection",K=P(M,(function(){if(!(y(j)!==String(j))){if(66===N)return!0;if(!O&&!z)return!0}if(c&&!j.prototype.finally)return!0;if(N>=51&&/native code/.test(j))return!1;var e=j.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[R]=t,!(e.then((function(){}))instanceof t)})),J=K||!w((function(e){j.all(e).catch((function(){}))})),$=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},X=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;C((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var a,s,c,u=n[o++],l=i?u.ok:u.fail,d=u.resolve,f=u.reject,p=u.domain;try{l?(i||(2===e.rejection&&ne(e),e.rejection=1),!0===l?a=r:(p&&p.enter(),a=l(r),p&&(p.exit(),c=!0)),a===u.promise?f(W("Promise-chain cycle")):(s=$(a))?s.call(a,d,f):d(a)):f(r)}catch(e){p&&!c&&p.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},Q=function(e,t,n){var r,i;q?((r=U.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!z&&(i=u["on"+e])?i(r):e===Y&&E("Unhandled promise rejection",n)},ee=function(e){S.call(u,(function(){var t,n=e.facade,r=e.value;if(te(e)&&(t=x((function(){O?V.emit("unhandledRejection",r,n):Q(Y,n,r)})),e.rejection=O||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){S.call(u,(function(){var t=e.facade;O?V.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)}))},re=function(e,t,n){return function(r){e(t,r,n)}},ie=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,X(e,!0))},oe=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw W("Promise can't be resolved itself");var r=$(t);r?C((function(){var n={done:!1};try{r.call(t,re(oe,n,e),re(ie,n,e))}catch(t){ie(n,t,e)}})):(e.value=t,e.state=1,X(e,!1))}catch(t){ie({done:!1},t,e)}}};K&&(j=function(e){m(this,j,M),_(e),r.call(this);var t=L(this);try{e(re(oe,t),re(ie,t))}catch(e){ie(t,e)}},(r=function(e){B(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(j.prototype,{then:function(e,t){var n=F(this),r=H(I(this,j));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=O?V.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&X(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=L(e);this.promise=e,this.resolve=re(oe,t),this.reject=re(ie,t)},k.f=H=function(e){return e===j||e===o?new i(e):Z(e)},c||"function"!=typeof d||(a=d.prototype.then,f(d.prototype,"then",(function(e,t){var n=this;return new j((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return T(j,G.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:K},{Promise:j}),h(j,M,!1,!0),g(M),o=l(M),s({target:M,stat:!0,forced:K},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:c||K},{resolve:function(e){return T(c&&this===o?j:this,e)}}),s({target:M,stat:!0,forced:J},{all:function(e){var t=this,n=H(t),r=n.resolve,i=n.reject,o=x((function(){var n=_(t.resolve),o=[],a=0,s=1;b(e,(function(e){var c=a++,u=!1;o.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=H(t),r=n.reject,i=x((function(){var i=_(t.resolve);b(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},4916:(e,t,n)=>{"use strict";var r=n(2109),i=n(2261);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},6373:(e,t,n)=>{"use strict";var r=n(2109),i=n(4994),o=n(4488),a=n(7466),s=n(3099),c=n(9670),u=n(4326),l=n(7850),d=n(7066),f=n(8880),p=n(7293),h=n(5112),g=n(6707),v=n(1530),_=n(9909),m=n(1913),y=h("matchAll"),b="RegExp String",w="RegExp String Iterator",I=_.set,S=_.getterFor(w),C=RegExp.prototype,T=C.exec,E="".matchAll,k=!!E&&!p((function(){"a".matchAll(/./)})),x=i((function(e,t,n,r){I(this,{type:w,regexp:e,string:t,global:n,unicode:r,done:!1})}),b,(function(){var e=S(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=function(e,t){var n,r=e.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(e,t)))throw TypeError("Incorrect exec result");return n}return T.call(e,t)}(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=v(n,a(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),A=function(e){var t,n,r,i,o,s,u=c(this),l=String(e);return t=g(u,RegExp),void 0===(n=u.flags)&&u instanceof RegExp&&!("flags"in C)&&(n=d.call(u)),r=void 0===n?"":String(n),i=new t(t===RegExp?u.source:u,r),o=!!~r.indexOf("g"),s=!!~r.indexOf("u"),i.lastIndex=a(u.lastIndex),new x(i,l,o,s)};r({target:"String",proto:!0,forced:k},{matchAll:function(e){var t,n,r,i=o(this);if(null!=e){if(l(e)&&!~String(o("flags"in C?e.flags:d.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(k)return E.apply(i,arguments);if(void 0===(n=e[y])&&m&&"RegExp"==u(e)&&(n=A),null!=n)return s(n).call(e,i)}else if(k)return E.apply(i,arguments);return t=String(i),r=new RegExp(e,"g"),m?A.call(r,t):r[y](t)}}),m||y in C||f(C,y,A)},6528:(e,t,n)=>{"use strict";var r=n(2109),i=n(6650).end;r({target:"String",proto:!0,forced:n(4986)},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},3112:(e,t,n)=>{"use strict";var r=n(2109),i=n(6650).start;r({target:"String",proto:!0,forced:n(4986)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},8757:(e,t,n)=>{"use strict";var r=n(2109),i=n(4488),o=n(7850),a=n(7066),s=n(647),c=n(5112),u=n(1913),l=c("replace"),d=RegExp.prototype,f=Math.max,p=function(e,t,n){return n>e.length?-1:""===t?n:e.indexOf(t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,c,h,g,v,_,m,y=i(this),b=0,w=0,I="";if(null!=e){if((n=o(e))&&!~String(i("flags"in d?e.flags:a.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=e[l]))return r.call(e,y,t);if(u&&n)return String(y).replace(e,t)}for(c=String(y),h=String(e),(g="function"==typeof t)||(t=String(t)),v=h.length,_=f(1,v),b=p(c,h,0);-1!==b;)m=g?String(t(h,b,c)):s(h,c,b,[],void 0,t),I+=c.slice(w,b)+m,w=b+v,b=p(c,h,b+_);return w<c.length&&(I+=c.slice(w)),I}})},5306:(e,t,n)=>{"use strict";var r=n(7007),i=n(9670),o=n(7466),a=n(9958),s=n(4488),c=n(1530),u=n(647),l=n(7651),d=Math.max,f=Math.min;r("replace",2,(function(e,t,n,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=r.REPLACE_KEEPS_$0,g=p?"$":"$0";return[function(n,r){var i=s(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!p&&h||"string"==typeof r&&-1===r.indexOf(g)){var s=n(t,e,this,r);if(s.done)return s.value}var v=i(e),_=String(this),m="function"==typeof r;m||(r=String(r));var y=v.global;if(y){var b=v.unicode;v.lastIndex=0}for(var w=[];;){var I=l(v,_);if(null===I)break;if(w.push(I),!y)break;""===String(I[0])&&(v.lastIndex=c(_,o(v.lastIndex),b))}for(var S,C="",T=0,E=0;E<w.length;E++){I=w[E];for(var k=String(I[0]),x=d(f(a(I.index),_.length),0),A=[],P=1;P<I.length;P++)A.push(void 0===(S=I[P])?S:String(S));var D=I.groups;if(m){var O=[k].concat(A,x,_);void 0!==D&&O.push(D);var N=String(r.apply(void 0,O))}else N=u(k,_,x,A,D,r);x>=T&&(C+=_.slice(T,x)+N,T=x+k.length)}return C+_.slice(T)}]}))},8702:(e,t,n)=>{"use strict";var r=n(2109),i=n(3111).end,o=n(6091)("trimEnd"),a=o?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,forced:o},{trimEnd:a,trimRight:a})},5674:(e,t,n)=>{"use strict";var r=n(2109),i=n(3111).start,o=n(6091)("trimStart"),a=o?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,forced:o},{trimStart:a,trimLeft:a})},3210:(e,t,n)=>{"use strict";var r=n(2109),i=n(3111).trim;r({target:"String",proto:!0,forced:n(6091)("trim")},{trim:function(){return i(this)}})},2443:(e,t,n)=>{n(7235)("asyncIterator")},1817:(e,t,n)=>{"use strict";var r=n(2109),i=n(9781),o=n(7854),a=n(6656),s=n(111),c=n(3070).f,u=n(9920),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(d[t]=!0),t};u(f,l);var p=f.prototype=l.prototype;p.constructor=f;var h=p.toString,g="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=h.call(e);if(a(d,e))return"";var n=g?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},4197:(e,t,n)=>{n(9843)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},6495:(e,t,n)=>{n(9843)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},8145:(e,t,n)=>{"use strict";var r=n(3832);(0,n(260).exportTypedArrayStaticMethod)("from",n(7321),r)},5109:(e,t,n)=>{n(9843)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},5125:(e,t,n)=>{n(9843)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},7145:(e,t,n)=>{n(9843)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},5206:(e,t,n)=>{"use strict";var r=n(260),i=n(3832),o=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(o(this))(t);t>e;)n[e]=arguments[e++];return n}),i)},8255:(e,t,n)=>{n(9843)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},9135:(e,t,n)=>{n(9843)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},2472:(e,t,n)=>{n(9843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},9743:(e,t,n)=>{n(9843)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},8628:(e,t,n)=>{n(9170)},5743:(e,t,n)=>{n(5837)},7314:(e,t,n)=>{n(7922)},6290:(e,t,n)=>{n(4668)},3728:(e,t,n)=>{n(6373)},7207:(e,t,n)=>{n(8757)},3948:(e,t,n)=>{var r=n(7854),i=n(8324),o=n(6992),a=n(8880),s=n(5112),c=s("iterator"),u=s("toStringTag"),l=o.values;for(var d in i){var f=r[d],p=f&&f.prototype;if(p){if(p[c]!==l)try{a(p,c,l)}catch(e){p[c]=l}if(p[u]||a(p,u,d),i[d])for(var h in o)if(p[h]!==o[h])try{a(p,h,o[h])}catch(e){p[h]=o[h]}}}},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),a=new x(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:f,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",g={};function v(){}function _(){}function m(){}var y={};y[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(A([])));w&&w!==n&&r.call(w,o)&&(y=w);var I=m.prototype=v.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function A(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return _.prototype=I.constructor=m,m.constructor=_,_.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},e.awrap=function(e){return{__await:e}},S(C.prototype),C.prototype[a]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new C(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(I),c(I,s,"Generator"),I[o]=function(){return this},I.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=!1;if(n.g.__wxConfig&&"string"==typeof n.g.__wxConfig.platform)"ios"===n.g.__wxConfig.platform.toLowerCase()&&(e=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){var t=navigator.userAgent.toLowerCase();(t.indexOf("iphone")>=0||t.indexOf("ipad")>=0)&&(e=!0)}var r=[];e&&(n.g.Promise=void 0,r.push("Promise")),n(7800)({usePolyfill:r,useNative:["WeakMap"]}),n(5269),n(2136)})()})();var __wxTest__=!1,wxRunOnDebug=function(e){e()},__wxConfig;(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};(()=>{e.d(t,{default:()=>B});const n=BabelRuntimeHelpers.construct;var r=e.n(n);const i=BabelRuntimeHelpers.typeof;var o=e.n(i);const a=BabelRuntimeHelpers.classCallCheck;var s=e.n(a);const c=BabelRuntimeHelpers.createClass;var u=e.n(c),l=function(){function e(){s()(this,e),this.listeners={}}return u()(e,[{key:"emit",value:function(e,t){if(this.listeners[e]&&this.listeners[e].length>0){var n=!1;return this.listeners[e].forEach((function(e){0!==e.count&&e.cb(t),e.count>0&&e.count--,0===e.count&&(n=!0)})),n&&(this.listeners[e]=this.listeners[e].filter((function(e){return 0!==e.count}))),!0}return!1}},{key:"many",value:function(e,t,n){if(!t)return this;var r={count:n,cb:t};return this.listeners[e]?this.listeners[e].push(r):this.listeners[e]=[r],this}},{key:"on",value:function(e,t){this.many(e,t,-1)}},{key:"once",value:function(e,t){this.many(e,t,1)}},{key:"off",value:function(e,t){for(var n=0;n<this.listeners[e].length;n++){var r=this.listeners[e][n];if(r.cb===t)return void(r.count=0)}}}]),e}(),d=e.g.__wxLibrary,f=e.g.__wxConfig,p=d.envType,h=d.contextType,g="Service"===p,v="WebView"===p,_="Worker"===p,m="Widget"===p,y=v||g&&0===h.indexOf("App:"),b=g&&0===h.indexOf("Game:"),w=_&&"function"==typeof e.g.workerInvokeJsApi,I=!!f.isIsolateContext,S=g&&(I&&h.indexOf("Uncertain")>=0||h.indexOf("MainContext")>=0),C=g&&h.indexOf("SubContext")>=0,T=S||C,E=v||S,k="wxlib"===f.workerContentType;const x={platform:function(){var e=f.platform;if(!e&&v){var t=window.navigator.userAgent.toLowerCase();t.indexOf("devtools")>=0?e="devtools":t.indexOf("miniprogramenv/windows")>=0?e="windows":t.indexOf("miniprogramenv/mac")>=0?e="mac":t.indexOf("miniprogramenv/mina")>=0?e="mina":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?e="ios":t.indexOf("android")>=0&&(e="android")}return(e||"unknown").toLowerCase()}(),SDKVersion:"undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version,isIsolateContext:T,isGame:b,isApp:y,isMainContext:S,isSubContext:C,isSafeEnv:E,isService:g,isWebView:v,isWorker:_,isWidget:m,isSupportWorkerAPI:w,typeStr:p,isWXLibWorker:k};var A=new l,P={},D="configReady",O="libraryReady";function N(e,t){e in P?t(P[e]):L.once("lifeCycle:"+e,t)}function R(e,t){return!(e in P)&&(P[e]=t,L.emit("lifeCycle:"+e,t))}var M=e.g,L={EventEmitter:l,on:A.on.bind(A),emit:A.emit.bind(A),once:A.once.bind(A),onConfigReady:N.bind(null,D),emitConfigReady:R.bind(null,D),get isConfigReady(){return D in P},onLibraryReady:N.bind(null,O),emitLibraryReady:R.bind(null,O),get isLibraryReady(){return O in P},onBridgeReady:function(e){"undefined"!=typeof WeixinJSBridge?e():"object"===("undefined"==typeof document?"undefined":o()(document))&&document.addEventListener("WeixinJSBridgeReady",e,!1)},env:x,global:M};"undefined"!=typeof __Function__&&(Function=function(){return"return this"===arguments[arguments.length-1]?function(){return M}:r()(__Function__,Array.prototype.slice.call(arguments))},Function.prototype=__Function__.prototype),e.g.__wxLibrary.onEnd=function(){L.emitLibraryReady({})};const B=L})(),Foundation=t.default})(),function(e){"use strict";var t=JSON.parse,n=JSON.stringify,r=Object.defineProperty,i=Foundation.env.isSubContext,o=Foundation.env.isSafeEnv,a={},s=(Foundation.env.isWXLibWorker,["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"]);function c(e,t,n,i){r(e,n,{configurable:!0,enumerable:!0,get:function(){if(n in t)return t[n];try{(new Error).stack,"object"==typeof Reporter&&"function"==typeof Reporter.reportKeyValue&&Reporter.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+n,force:!0})}catch(e){}try{return"function"!=typeof i?i:i()}catch(e){return}},set:function(e){t[n]=e}})}function u(e){return t(n(e))}var l=!0===(__wxConfig=void 0!==e.__wxConfig?o?Object.assign({},e.__wxConfig):u(e.__wxConfig):{}).preload,d=!1,f=[],p=[],h=Foundation.env.typeStr;Foundation.env.isSubContext&&(h="SubContext");function g(e,t){try{Date.now();e(t);Date.now()}catch(e){e.message,e.stack,"object"==typeof Reporter&&"function"==typeof Reporter.errorReport&&Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:"at wxConfig.onReady callback"})}}var v=function(e){p.push(e)},_=function(e){d?void 0!==__wxConfig&&g(e,__wxConfig):"function"==typeof e&&f.push(e)},m=function(t){t.tabBar&&t.tabBar.list&&t.tabBar.list.forEach((function(e){delete e.iconData,delete e.selectedIconData})),delete t.permission;var n=t.subPackages||t.subpackages;return n&&n.length>0&&(n.forEach((function(e){delete e.pages})),t.subPackages=t.subpackages=n),d&&(__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(i||(__wxConfig._preloadRule=__wxConfig.preloadRule||{},__wxConfig._page=__wxConfig.page||{},delete __wxConfig.preloadRule,delete __wxConfig.page),__wxConfig.updatePage=function(e,t){__wxConfig.page=__wxConfig.page||{},__wxConfig.page[e]=__wxConfig.page[e+".html"]=t,a[e+".html"]=u(t)},__wxConfig.updatePreloadRule=function(e,t){__wxConfig.preloadRule=__wxConfig.preloadRule||{},__wxConfig.preloadRule[e]=t}),e.__wxConfig.page=e.__wxConfig.page||{},__wxConfig.page=__wxConfig.page||{}),t},y=function(e){return e.onReady=_,e.beforeReady=v,i||(e.preload=l),e.isReady=d,e.isSubContext=i,e.envTag=h,e.isSafeContext=o,e.sdkVersion=e.SDKVersion=Foundation.env.SDKVersion,e.twoPhaseInject=!0,e.platform=Foundation.env.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio),e},b=function(){void 0===e.__wxConfig||d||(d=!0,Object.assign(__wxConfig,o?e.__wxConfig:u(e.__wxConfig)),__wxConfig=y(__wxConfig),__wxConfig=m(__wxConfig),function(e){if(!p.length)return e();var t=!1;setTimeout((function(){t||(console.warn("beforeReady timeout"),t=!0,e())}),3e3),Promise.all(p).catch((function(e){console.warn("beforeReady error",e)})).then((function(){t||(t=!0,e())})),p=[]}((function(){__wxConfig.onReadyStart=Date.now(),f.forEach((function(e){g(e,__wxConfig)})),__wxConfig.onReadyEnd=Date.now(),f=[],function(){if(!o){var t=e.__wxConfig,n={},r={};a=t.page||{},__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(a={});try{c(r,n,"deprecated",!0),s.forEach((function(e){if(e in t){var i=t[e];switch(e){case"page":c(r,n,e,a);break;case"env":c(r,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:i.USER_DATA_PATH}}));break;case"accountInfo":c(r,n,e,{appId:i.appId,icon:i.icon,nickname:i.nickname});break;case"appLaunchInfo":c(r,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{}}));break;case"wxAppInfo":c(r,n,e,{maxRequestConcurrent:i.maxRequestConcurrent,maxUploadConcurrent:i.maxUploadConcurrent,maxDownloadConcurrent:i.maxDownloadConcurrent,maxWorkerConcurrent:i.maxWorkerConcurrent,maxWebsocketConnect:i.maxWebsocketConnect});break;default:c(r,n,e,i)}}})),e.__wxConfig=r}catch(n){e.__wxConfig=t}}}()})))};function w(){Foundation.emitConfigReady(__wxConfig)}__wxConfig=y(__wxConfig),__wxConfig=m(__wxConfig),Foundation.onConfigReady((function(){b()})),i?__wxConfig.__readyHandler=w:l?Foundation.onBridgeReady((function(){WeixinJSBridge.on("onWxConfigReady",w)})):Foundation.onLibraryReady(w)}(this),function(e){"use strict";function t(e){Foundation.emit("unhandledRejection",e)||console.error("Uncaught (in promise)",e.reason)}var n,r,i=(n=[],r=[],{set:function(e,t){n.push(e),r.push(t)},get:function(e){var t=n.indexOf(e);if(-1!==t)return r[t]},delete:function(e){var t=n.indexOf(e);-1!==t&&(n.splice(t,1),r.splice(t,1))}});"object"==typeof e&&"function"==typeof e.addEventListener?(e.addEventListener("unhandledrejection",(function(e){t({reason:e.reason,promise:e.promise}),e.preventDefault()})),e.addEventListener("error",(function(e){var t;t=e.error||e.message,Foundation.emit("error",t)||console.error("Uncaught",t),e.preventDefault()}))):void 0===e.onunhandledrejection&&Object.defineProperty(e,"onunhandledrejection",{value:function(e){e=e||{},Object.prototype.hasOwnProperty.call(e,"type")?function(e){var n=i.get(e.promise);if(n)n.event=e;else{var r={event:e};setTimeout((function(){0===r.event.type&&t(r.event),i.delete(r.event.promise)}),0),i.set(e.promise,r)}}({type:e.type,reason:e.reason,promise:e.promise}):t({reason:e.reason,promise:e.promise})}})}(this);var wxConsole=["log","info","warn","error","debug","time","timeEnd","group","groupEnd"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxPerfConsole=["log","info","warn","error","time","timeEnd","trace","profile","profileSync"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxNativeConsole,JSContext,Protect,__subContextEngine__,__errorTracer__,__cloudSDK__,__appServiceSDK__;(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>b});const n=BabelRuntimeHelpers.objectSpread2;var r=e.n(n);const i=BabelRuntimeHelpers.typeof;var o=e.n(i),a=Foundation,s=a.onConfigReady,c=a.env,u=["log","info","warn","error","debug","createLogger"].reduce((function(e,t){return e[t]=function(){},e}),{});function l(e,t){this.num=e,this.type=t}var d,f,p,h,g,v,_={ALL:new l(Number.MIN_VALUE,"ALL"),DEBUG:new l(5e3,"DEBUG"),LOG:new l(1e4,"LOG"),INFO:new l(2e4,"INFO"),WARN:new l(3e4,"WARN"),ERROR:new l(4e4,"ERROR"),OFF:new l(Number.MAX_VALUE,"OFF")},m=function(e,t){return{debug:e(_.DEBUG,t),log:e(_.LOG,t),info:e(_.INFO,t),warn:e(_.WARN,t),error:e(_.ERROR,t)}},y=_.INFO;if(c.isWorker||c.isWidget){u=Object.assign({createLogger:function(){return wxConsole}},wxConsole)}else c.isSubContext&&c.isIsolateContext?(d=[],f=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];d.push({level:e,logs:r,category:t})}},s((function e(){setTimeout((function(){var t=wxNativeConsole.__isFromMainContext?wxNativeConsole.__mergeSubContextLogs:null;t?(t(d),d=[]):e()}),1e3)})),u=r()(r()({},m(f)),{},{createLogger:function(e){return m(f,"string"==typeof e?e:"default")},__isFromMainContext:!1})):(p=__wxConfig.platform,h=[],g=function(e){var t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),i=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2),a=("00"+e.getMilliseconds()).slice(-3),s=e.getFullYear()+"-"+t+"-"+n,c=r+":"+i+":"+o+"."+a;return"ios"===p?s+" "+c+"000"+(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):s+" "+(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+c},v=function(e,t){var n=e.type;return function(){for(var r,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(t&&Array.prototype.unshift.call(a,"["+t+"]"),(r=wxConsole[n.toLowerCase()]).call.apply(r,[wxConsole].concat(a)),e.num>=y.num){var c=new Date,u=Array.prototype.slice.call(a).map((function(e){switch(o()(e)){case"bigint":case"boolean":case"function":case"number":return e.toString();case"string":return e;case"symbol":return e.toString();case"undefined":return"undefined";case"object":var t;try{t=JSON.stringify(e)}catch(e){t="[对象含有循环引用]"}return t;default:return}})).join(" ");h&&h.length>1024&&h.shift(),h.push({date:c,type:n,content:u})}}},s((function(){setTimeout((function e(){var t;setTimeout(e,3e3),0!==h.length&&(t=h,"ios"===p?WeixinJSBridge.invoke("systemLog",{dataArray:t.map((function(e){return{message:"\n"+g(e.date)+" ["+e.type[0].toUpperCase()+"][wxapplib]] "+e.content}}))}):"android"===p&&WeixinJSBridge.invoke("systemLog",{message:["\n"].concat(t.map((function(e){return"["+e.type[0].toUpperCase()+"]["+g(e.date)+"][wxapplib]] "+e.content}))).join("\n")}),h=[])}),3e3)})),u=r()(r()({},m(v)),{},{createLogger:function(e){return m(v,"string"==typeof e?e:"default")},__mergeSubContextLogs:function(e){Array.isArray(e)&&e.forEach((function(e){var t=e.level,n=e.logs,r=e.category;v(t,r)(n)}))},__isFromMainContext:!0}));const b=u;wxNativeConsole=t.default})(),(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>H});const n=BabelRuntimeHelpers.classCallCheck;var r=e.n(n),i=Object.prototype.toString,o=Object.getPrototypeOf,a=Object.getOwnPropertyNames,s=Object.getOwnPropertyDescriptor,c=Object.defineProperty,u=function(e){return i.call(e).split(" ")[1].split("]")[0]},l=["constructor","__proto__","__defineGetter__","__defineSetter__"],d="undefined"!=typeof WeakMap?new WeakMap:{},f="undefined"!=typeof WeakMap?new WeakMap:{},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f.get(e);return void 0!==n||(n=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0;o<r.length;o++){var a=r[o];r[o]=g(a)}var s=t?d.get(this):void 0,c=e.call.apply(e,[s].concat(r));return g(c)},f.set(e,n)),n},h=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(g(r))}return t},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=u(e);return"String"===n||"Number"===n||"Boolean"===n?e.valueOf():"Object"===n?new b(e):"Array"===n?h(e):"Function"===n?p(e,t):"Undefined"!==n&&"Null"===n?null:void 0},v=function(e){return function(){var t=d.get(this);if(void 0!==t){if(null===t)return null;var n=t[e];return g(n,!0)}}},_=function(e){return function(t){var n=d.get(this);if(void 0!==n)return null===n?null:void(n[e]=g(t))}},m=function(e){for(var t=0;t<l.length;t++){if(l[t]===e)return!0}return!1},y=function(){for(var e=function(e){for(var t=[],n=function(e){a(e).forEach((function(n){var r=s(e,n);void 0!==r&&(r.name=n,t.push(r))}))},r=e;r;r=o(r))n(r);return t}(d.get(this)),t=0;t<e.length;t++){var n=e[t],r=n.name;m(r)||(r in this||(delete n.value,delete n.writable,c(this,r,Object.assign(n,{get:v(r),set:_(r)}))))}},b=function e(t){r()(this,e),d.set(this,t),y.call(this)};const w=b;var I,S,C,T,E,k,x={},A={},P=[],D=0,O=[],N=function(e,t,n){if(void 0!==t&&void 0!==e&&e===I){var r=void 0!==n?n:++D;return A[r]=t,P.push(r),O.forEach((function(e){"function"==typeof e&&e(r)})),r}},R=function(e,t,n,r){if(void 0!==e&&e===I){var i=function(e){for(var t=P.length,n=0;n<t;n++){var r=P[n];if(A[r]===e)return r}}(t);if(void 0!==i){var o=x[n];"function"==typeof o&&o(r,i)}}},M={},L=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e&&e===I){r||(t=t.valueOf(),n=new w(n));var i=M[t];return"function"==typeof i?i(n):void 0}};const B={__init__:function(e){void 0===I&&void 0!==e&&((I=e).register=N,I.subscribeHandler=R,I.syncMethodHandler=L,S=I.alloc,C=I.create,T=I.destroy,E=I.evaluateScriptFile,k=I.loadJsFiles,delete I.alloc,delete I.create,delete I.destroy,delete I.evaluateScriptFile,delete I.loadJsFiles)},publish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=u(t);if("Object"!==r&&"Undefined"!==r)throw new Error("params should be an object.");n.forEach((function(n){var r=A[n];r&&r.subscribeHandler(I,e,t)}))},subscribe:function(e,t){x[e]=t},onRegister:function(e){O.push(e)},evaluateScriptFile:function(e,t,n){return E(e,t,n)},batchLoadJsFiles:function(e,t){if(void 0===k||"function"!=typeof k)return"failed: loadJsFiles not supported";try{return k(e,JSON.stringify(t)),"success"}catch(e){return"failed: "+e}},alloc:function(e,t){return"function"==typeof S?S.call(I,e,t):-9999},create:function(e,t){return"function"==typeof C?C.call(I,e,t):-9999},destroy:function(e,t){return"function"==typeof T?T(e,t):-9999},isAsync:function(){return I&&!0===I.async},supportAlloc:function(){return"function"==typeof S},registerSyncMethod:function(e,t){M[e]=t}};var F,j={},W={subscribeHandler:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0!==e&&e===F){t=t.valueOf();var r=j[t];"function"==typeof r&&r(n)}}};const U={__init__:function(e,t){void 0===F&&void 0!==e&&(F=e).register(e,W,t)},publish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u(t);if("Object"!==n&&"Undefined"!==n)throw new Error("params should be an object.");var r=e.valueOf(),i=t||{};F&&"function"==typeof F.subscribeHandler&&F.subscribeHandler(F,W,r,i)},subscribe:function(e,t){j[e]=t},invokeMainContextMethodSync:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=u(t);if("Object"!==r&&"Undefined"!==r)throw new Error("params should be an object.");var i,o=e.valueOf();return i=n?t||{}:void 0===t?{}:t,F.syncMethodHandler(F,o,i,n)}},V={alloc:function(){return-9999},create:function(){return-9999},destroy:function(){return-9999},publish:function(){},subscribe:function(){},supportAlloc:function(){}};var G;if(void 0===e.g)throw new Error("js-context: global is undefined");void 0!==e.g.WeixinJSContext?(G=Object.getPrototypeOf(e.g.WeixinJSContext)===Object.prototype?B:U).__init__(WeixinJSContext,e.g.WeixinJSContextId):G=V;delete G.__init__,delete e.g.WeixinJSContext,delete e.g.WeixinJSContextId;const H=G;JSContext=t.default})(),(()=>{var e={624:(e,t,n)=>{"use strict";n.r(t),n.d(t,{reportDeprecatedAPI:()=>r});var r=function(e){Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},787:(e,t,n)=>{var r=n(676).default,i=n(624).reportDeprecatedAPI;e.exports={hijack:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==n.g.Function){var i=function(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return t?o:{}}},o={};i.prototype=n.g.Function.prototype,n.g.Function.prototype.constructor=i,n.g.Function=i}var a=globalThis;if("undefined"!=typeof eval&&(eval=void 0),"undefined"!=typeof setTimeout&&e){var s=setTimeout;setTimeout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("function"!=typeof e)throw new TypeError("setTimeout expects a function as first argument but got ".concat(r(e),"."));var n=__errorTracer__.surroundThirdByTryCatch(e,"at setTimeout callback function"),i=[].slice.call(arguments,2);return s((function(){n.apply(a,i)}),t)};var c=setInterval;setInterval=function(e,t){if("function"!=typeof e)throw new TypeError("setInterval expects a function as first argument but got ".concat(r(e),"."));var n=__errorTracer__.surroundThirdByTryCatch(e,"at setInterval callback function"),i=[].slice.call(arguments,2);return c((function(){n.apply(a,i)}),t)}}},hijackWasm:function(){if("undefined"!=typeof WebAssembly){["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((function(e){if(void 0!==WebAssembly[e]){var t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:function(){return i("globalWa"),t},set:function(t){Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}))}}}},585:()=>{if("undefined"==typeof navigator){try{new Function("\n      var GeneratorFunctionProto = Object.getPrototypeOf(function* () {});\n      Object.defineProperty(GeneratorFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}try{new Function("\n      var AsyncFunctionProto = Object.getPrototypeOf(async function () {});\n      Object.defineProperty(AsyncFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}try{new Function("\n      var AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function* () {});\n      Object.defineProperty(AsyncGeneratorFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}}},676:e=>{"use strict";e.exports=BabelRuntimeHelpers.typeof}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{doNotWriteGlobalObjs:()=>l,doNotWriteObj:()=>d,globalEsObjs:()=>e,hijack:()=>f.hijack,hijackWasm:()=>f.hijackWasm,overwriteSetPrototypeOf:()=>u});var e=["Array","ArrayBuffer","AsyncFunction","Atomics","Boolean","DataView","Date","EvalError","Float32Array","Float64Array","Function","Generator","GeneratorFunction","Infinity","Int16Array","Int32Array","Int8Array","InternalError","Intl","Intl.Collator","Intl.DateTimeFormat","Intl.NumberFormat","Iterator","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","TypedArray","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"];"NodeJS"!==__wxConfig.JSEngineName&&e.push("Error");var t=globalThis,i=n(676),o=n.n(i),a=n.g.Object.setPrototypeOf,s=function e(t,n,r,i){if(t&&n&&-1===n.indexOf("constructor")){var s;try{s=t[n]}catch(e){return}if(s){var c=Object.getOwnPropertyDescriptor(t,n);if(i||c||"__proto__"===n){c=c||{enumerable:!!i,configurable:!0};var u=o()(s);if(s&&("function"===u||"object"===u)&&(c.configurable&&Object.defineProperty(t,n,{get:function(){return s},set:function(c){if("object"===o()(this)||"function"==typeof this){if(this!==t)return e(this,n,r,!0),void(this[n]=c);if(s!==c)if(i)try{s=c,"__proto__"===n&&a(this,c)}catch(e){}else console.error("[non-writable] modification of global variable '".concat(r,"' is not allowed when using plugins at app.json.")),"object"===("undefined"==typeof Reporter?"undefined":o()(Reporter))&&(Reporter.reportKeyValue({key:"GlobalReadOnly",value:r}),Reporter.reportIDKey({key:"global_objs_readonly"}))}},enumerable:c.enumerable,configurable:!!i&&c.configurable}),!i&&"__proto__"!==n)){var l=Object.getOwnPropertyNames(s);"object"===o()(s)&&e(s,"__proto__","".concat(r,".__proto__"),!1);for(var d=0;d<l.length;++d){var f=l[d],p="".concat(r,".").concat(f);e(s,f,p,!1)}}}}}},c=e.concat(["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"]),u=function(){Object.defineProperty(t.Object,"setPrototypeOf",{value:function(e,t){return e.__proto__=t,e},configurable:!0})},l=function(){try{for(var e=+new Date,n=0;n<c.length;++n){var r=c[n];if(t[r]){var i=+new Date;s(t,r,r,!1),"doNotWriteObj global[".concat(r,"] cost: ").concat(+new Date-i," ms")}}"doNotWriteObj cost: ".concat(+new Date-e," ms.")}catch(e){}},d=function(e,t,n){return s(e,t,n,!1)},f=(n(585),n(787))})(),Protect=r})(),(()=>{var e={756:(e,t,n)=>{n.d(t,{G$:()=>c});var r=n(356),i=n.n(r),o=(n(676),n(15)),a=n.n(o);globalThis;s=i()(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Reporter.reportIDKey({key:n}),e.prev=1,e.next=4,t();case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),Reporter.reportIDKey({key:"".concat(n,"_fail"),force:!0}),r=n.indexOf("initGame")>=0?"gameSDKScriptError":"appServiceSDKScriptError",Reporter.errorReport({key:r,error:e.t0,extend:""});case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));var s,c=function(){return"devtools"===__wxConfig.platform}},983:(e,t,n)=>{n.d(t,{Z:()=>i});var r={name:void 0,secure:!0,runningType:"app",init:function(e){this.name=e.contextName,this.secure=e.contextSecure,this.name.startsWith("game")?this.runningType="game":this.name.startsWith("app")&&(this.runningType="app"),this.remoteObjectProto=e.__proto__}};const i=r},296:(e,t,n)=>{var r=n(93),i=n(630);function o(e){e=(0,i.B)(e),(0,r.sK)(e,"")}function a(e){(0,r.sK)(e.reason,"",e.promise||null)}"undefined"==typeof WeixinJSBridge&&(WeixinJSBridge={},WeixinJSBridge.subscribeHandler=function(e,t){"onError"===e?o(t):"unhandledRejection"===e&&a(t)},WeixinJSBridge.invokeCallbackHandler=function(){}),Foundation.on("error",o),Foundation.on("unhandledRejection",a)},152:(e,t,n)=>{n.d(t,{Z:()=>o});var r={},i=Object.keys;r.init=function(e){for(var t=i(e),n=0;n<t.length;n++){var o=t[n];void 0===r[o]&&(r[o]=e[o])}};const o=r},50:(e,t,n)=>{n.d(t,{Z:()=>T});var r=n(676),i=n.n(r),o=n(93),a=Object.getPrototypeOf,s=Object.getOwnPropertyNames,c=Object.getOwnPropertyDescriptor,u=Object.defineProperty,l=["constructor","__proto__","__defineGetter__","__defineSetter__"],d=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,g=new WeakMap,v=new WeakMap,_=function(e){for(var t=0;t<l.length;t++){if(l[t]===e)return!0}return!1},m=function(e){if(h.has(e))return h.get(e);var t=function(){"use strict";for(var t=[],n=0;n<arguments.length;n++)t[n]=C(arguments[n]);var r=S(this)||this,i=e.apply(r,t);return C(i)};return h.set(e,t),f.set(t,e),t},y=function(e){if(v.has(e))return v.get(e);for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(C(r))}return v.set(e,t),p.set(t,e),t},b=function(e){for(var t=g.has(e)?g.get(e):{},n=function(e){for(var t=[],n=e;n;n=a(n))for(var r=s(n),i=0;i<r.length;i++){var o=r[i],u=c(n,o);void 0!==u&&(u.name=o,t.push(u))}return t}(e),r=0;r<n.length;r++){var i=n[r],o=i.name;_(o)||(o in t||(delete i.value,delete i.writable,u(t,o,Object.assign(i,{get:w(o).bind(t),set:I(o).bind(t)}))))}return g.set(e,t),d.set(t,e),t},w=function(e){return function(){var t=d.get(this);if(void 0!==t)return null===t?null:C(t[e])}},I=function(e){return function(t){var n=d.get(this);if(null!=n){if(null!=t){var r=S(t);if(r)return void(n[e]=r)}n[e]=C(t)}}},S=function(e){if(("function"==typeof e||"object"===i()(e))&&null!=e)return d.get(e)||f.get(e)||p.get(e)},C=function(e){var t=(0,o.Em)(e);return"String"===t||"Number"===t||"Boolean"===t?e.valueOf():"Array"===t?y(e):"Function"===t?m(e):"Object"===t?b(e):"ArrayBuffer"===t?(e!==ArrayBuffer.prototype&&(e.__proto__=ArrayBuffer.prototype),e):"Undefined"===t?void 0:"Null"===t?null:e};const T=C},923:(e,t,n)=>{n.d(t,{k:()=>i});var r=n(364),i=function(e){e.onReady((function(e){var t=JSON.parse(JSON.stringify(e)),n=__wxConfig.__readyHandler;r.Z.__wxConfig=t,"function"==typeof n&&n()}))}},910:(e,t,n)=>{n.d(t,{E:()=>o});var r=n(364),i=n(50),o=function(e){var t;r.Z.console=new e.BaseConsole,e.wxLibVersion!==((null===(t=__libVersionInfo__)||void 0===t?void 0:t.version)||"9.9.9")&&Reporter.reportIDKey({key:"subContextLibVersionNotMatch"}),__Function__=e.__Function__,__safeway__=e.safeway,Reporter=e.Reporter,NativeGlobal=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,wxNativeConsole=e.wxNativeConsole,Canvas=e.Canvas,Image=e.Image,ImageData=e.ImageData,Path2D=e.Path2D,SkiaCanvasExternalTexture=e.SkiaCanvasExternalTexture,skiacanvasLoadNewFont=e.skiacanvasLoadNewFont,SkiaCanvas=e.SkiaCanvas,HTMLCanvasView=e.HTMLCanvasView,HTMLCanvasElement=e.HTMLCanvasElement,SkiaImage=e.SkiaImage,SkiaImageData=e.SkiaImageData,SkiaPath2D=e.SkiaPath2D,SkiaCanvasLoadNewFont=e.SkiaCanvasLoadNewFont,SkiaCanvasRequestAnimationFrame=e.SkiaCanvasRequestAnimationFrame,SkiaCanvasCancelAnimationFrame=e.SkiaCanvasCancelAnimationFrame,BaseConsole=e.BaseConsole,performanceChannel=e.performanceChannel,__sclEngine__=e.__sclEngine__,Object.defineProperty(r.Z,"__wxSourceMap",{get:(0,i.Z)(e.getWxSourceMap)}),LanDebug=e.LanDebug,getPerfDog=e.getPerfDog,getProfiler=e.getProfiler}},353:(e,t,n)=>{n.d(t,{M:()=>o});var r=n(50),i=n(364),o=function(e){i.Z.__isAdapterInjected=!1,i.Z.console=e.console,i.Z.sharedCanvas=e.sharedCanvas;var t=["cloud","getBox2D","protobuf"];__wxConfig.onReady((function(){!0!==__wxConfig.useHighPerformanceMode?i.Z.wx=Object.keys(e.wx).reduce((function(n,i){return t.includes(i)?n[i]=e.wx[i]:n[i]=new r.Z(e.wx[i]),n}),{}):i.Z.wx=e.wx})),i.Z.requirePlugin=e.requirePlugin,i.Z.WXWebAssembly=e.WebAssembly,delete i.Z.WebAssembly,i.Z.GameGlobal=i.Z,i.Z.setGlobalAttribute=e.setGlobalAttribute,wxNativeConsole=e.wxNativeConsole,Object.defineProperty(i.Z,"__wxSourceMap",{get:(0,r.Z)(e.getWxSourceMap)})}},874:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(50),i=function(e){e.getWxSourceMap&&(e.getWxSourceMap=(0,r.Z)(e.getWxSourceMap)),__gameOpenDataSDK__.init(e)}},644:(e,t,n)=>{n.d(t,{m:()=>i});var r=n(364),i=function(e){r.Z.env=e,r.Z.console=e.console,e.pluginEnv&&(r.Z.pluginEnv=e.pluginEnv)}},364:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(){return this}()},620:(e,t,n)=>{n.d(t,{z:()=>o,W:()=>a});var r=n(983),i=n(50),o=function(e){return JSContext&&JSContext.invokeMainContextMethodSync?JSContext.invokeMainContextMethodSync("loadJsFiles",(0,i.Z)({paths:e,contextName:r.Z.name}),!0):"failed"},a=function(e,t){return JSContext&&JSContext.invokeMainContextMethodSync?JSContext.invokeMainContextMethodSync("injectEntryFile",(0,i.Z)({moduleName:e,separatedPlugins:t}),!0):"failed"}},785:(e,t,n)=>{n.d(t,{v:()=>s});var r=n(364),i=n(983),o=n(93),a=function(e,t){return function(){return"function"==typeof arguments[0]&&(arguments[0]=(0,o.M2)(arguments[0],t)),e.apply(void 0,arguments)}},s=function(e){r.Z.setTimeout=a(e.setTimeout,"at setTimeout callback function"),r.Z.clearTimeout=a(e.clearTimeout),r.Z.setInterval=a(e.setInterval,"at setInterval callback function"),r.Z.clearInterval=a(e.clearInterval),"game"===i.Z.runningType&&(r.Z.requestAnimationFrame=a(e.requestAnimationFrame,"at requestAnimationFrame callback function"),r.Z.cancelAnimationFrame=a(e.cancelAnimationFrame))}},93:(e,t,n)=>{n.d(t,{sK:()=>o,M2:()=>a,Ue:()=>c,Em:()=>u});n(676);var r=n(983),i=n(152),o=function(e,t,n){try{var o;if("game"===r.Z.name)o=i.Z.RunType.GAME;else if("gameOpenData"===r.Z.name)o=i.Z.RunType.GAME_SUBCONTEXT;else if("app"===r.Z.name)o=i.Z.RunType.APP;else{if(!r.Z.name.startsWith("gamePlugin_"))throw new Error("unknown context");o=i.Z.RunType.GAME_SUBCONTEXT}void 0!==n?i.Z.thirdErrorReport({key:o,error:e,extend:t,triggerErrorCallback:!r.Z.secure,isUnhandledRejection:!0,promise:n}):i.Z.thirdErrorReport({key:o,error:e,extend:t,triggerErrorCallback:!r.Z.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.thirdErrorReport: ",e.message)}};function a(e,t){return function(){var n;try{"function"==typeof e&&(n=e.apply(e,arguments))}catch(e){o(e,t)}return n}}function s(e,t){var n="";if("app"===r.Z.runningType?n="appSubContextSDKScriptError":"game"===r.Z.runningType&&(n="gameSubContextSDKScriptError"),"function"==typeof i.Z.thirdErrorReport)try{i.Z.errorReport({key:n,error:e,extend:t,triggerErrorCallback:!r.Z.secure})}catch(e){console.error("[ErrorHandler] error in Report.thirdErrorReport: ",e.message)}else{var o=t?"".concat(e.message,";").concat(t):e.message,a="".concat(n,"\n").concat(o,"\n").concat(e.stack);"undefined"!=typeof console&&console.error(a)}}function c(e,t){return function(){try{return e.apply(e,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;s(e,t)}return}}}function u(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}},630:(e,t,n)=>{n.d(t,{B:()=>r});var r=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}}},15:e=>{e.exports=regeneratorRuntime},356:e=>{e.exports=BabelRuntimeHelpers.asyncToGenerator},676:e=>{e.exports=BabelRuntimeHelpers.typeof}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{surroundByTryCatch:()=>f.Ue,surroundThirdByTryCatch:()=>f.M2,onInitReady:()=>m,loadJsFiles:()=>p.z,injectEntryFile:()=>p.W,initSubContext:()=>b});n(296);var e=n(364),t=n(152),i=n(983),o=n(50),a=n(785),s=n(923),c=n(353),u=n(874),l=n(910),d=n(644),f=n(93),p=n(620),h=n(756);delete e.Z.WeixinJSCore,delete e.Z.WeixinNativeBuffer,delete e.Z.WeixinWorker;var g=[],v=!1,_=function(){g.forEach((function(e){e()})),g=[]},m=function(e){v?_():g.push(e)};JSContext.subscribe("subContextEnvReady",(0,f.Ue)((function(e){if(i.Z.init(e),(0,a.v)(e),t.Z.init(e.Reporter),"game"===i.Z.name)(0,c.M)(e);else if("gameOpenData"===i.Z.name)(0,u.o)(e);else if("app"===i.Z.name)(0,l.E)(e);else{if(!i.Z.name.startsWith("gamePlugin_"))throw new Error("subContextEnvReady: missing context name.");(0,d.m)(e)}(0,s.k)(e.__wxConfig)}))),JSContext.subscribe("subContextRefreshEnv",(0,f.Ue)((function(e){if("game"===i.Z.name)(0,c.M)(e);else if("gameOpenData"===i.Z.name)(0,u.o)(e);else if("app"===i.Z.name)(0,l.E)(e);else{if(!i.Z.name.startsWith("gamePlugin_"))throw new Error("subContextRefreshEnv: missing context name.");(0,d.m)(e)}JSContext.publish("subContextRefreshEnvReady",null,!0)}))),JSContext.subscribe("subContextRefreshWxConfig",(0,f.Ue)((function(e){var t=e.key,n=e.value;"string"==typeof t&&n&&(__wxConfig[t]=n)}))),JSContext.subscribe("exportGlobalRequire",(0,f.Ue)((function(t){var n=/^[A-Za-z]+(\.[A-Za-z]+)*$/,r=function(t){var r=t.name,i=t.value,a=t.needCondom;if("string"!=typeof r||!n.test(r))throw new Error("exportGlobalRequire: illegal variable name.");r.split(".").reduce((function(e,t,n,s){if(n===s.length-1){if(t in e)throw new Error("exportGlobalRequire: Variable ".concat(r," exists."));e[t]=a?(0,o.Z)(i):i}if("Array"!==(0,f.Em)(e[t])&&"Function"!==(0,f.Em)(e[t])&&"Object"!==(0,f.Em)(e[t])){var c=s.slice(0,n+1).join(".");throw new Error("exportGlobalRequire: ".concat(c," is not an Object."))}return e[t]}),e.Z)};return"[object Array]"===Object.prototype.toString.call(t)?t.forEach(r):r(t)}))),JSContext.subscribe("subContextDestroy",(function(){})),JSContext.publish("subContextReady",{contextGlobal:{get __wxSourceMap(){return e.Z.__wxSourceMap},get __require(){return"game"===i.Z.name||i.Z.name.startsWith("gamePlugin_")?e.Z.require:(0,o.Z)(e.Z.require)},jsonParse:JSON.parse,jsonStringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype}},!0);var y=function(){Protect.overwriteSetPrototypeOf(),Protect.doNotWriteGlobalObjs()},b=function(){Protect.hijack(!1);var e=!1;i.Z.secure&&__wxConfig&&__wxConfig.isIsolateContext&&(y(),e=!0),__wxConfig.onReady((function(){e||__wxConfig.plugins&&!(0,h.G$)()&&y()})),v=!0,_()}})(),__subContextEngine__=r})(),(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{callSystemFunction:()=>c,wrapSystemFunction:()=>u,callMiniProgramOrPluginFunction:()=>l,callThirdPartyFunction:()=>d,wrapMiniProgramOrPluginFunction:()=>f,wrapThirdPartyFunction:()=>p,surroundThirdByTryCatch:()=>h});var n=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,r=[];function i(e){if(!e||e.__wxOriginalStack__)return!1;var t=e.stack;if(void 0===t)return!1;for(var n=t,i=r.length-1,a=0;a>=0&&i>=0;){var s=n.length,c=0;for(var u in o)if(o[u]){var l=n.indexOf(o[u],a);l<0||s<=l||(s=l,c=o[u].length)}if(s>=n.length)break;var d="at <".concat(r[i--].description,">");n=n.slice(0,s)+d+n.slice(s+c),a=s+d.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:n,writable:!0,enumerable:!0,configurable:!0}}),!0}var o={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function a(e){var t=((new Error).stack||"").match(/.+/gm),r="",i=0;t&&t.forEach((function(e){if(n.test(e)&&2===(i+=1)){var t=e.match(/^(\s*)at /),o=t?t[1].length:0;return r=e.slice(o),!1}return!0})),o[e]=r}function s(){for(var e="",t=r.length-1;t>=0;t--)r[t].pluginAppId&&(e=r[t].pluginAppId);return e}function c(e,t,n,c,l){var d,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];null===o.wrapSystemFunction&&(o.wrapSystemFunction="",u("","",a)("wrapSystemFunction")),r.push({description:t});try{d=n.apply(c,l)}catch(t){if(i(t)){if("AppServiceSdkKnownError"===t.type)throw r.pop(),t;if("ThirdScriptError"===t.type){var p=s();Reporter.thirdErrorReport({error:t,source:p,triggerErrorCallback:!f})}else Reporter.errorReport({key:e,error:t,triggerErrorCallback:!f})}if(f)throw r.pop(),t}return r.pop(),d}function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return c(e,t,n,this,o,r)}}function l(e,t,n,s,c){var u,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];null===o.wrapMiniProgramOrPluginFunction&&(o.wrapMiniProgramOrPluginFunction="",f("","",a)("wrapMiniProgramOrPluginFunction")),r.push({description:t,pluginAppId:e});try{u=n.apply(s,c)}catch(t){if(i(t)&&Reporter.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!l}),l)throw r.pop(),t}return r.pop(),u}function d(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return l(s(),e,t,n,r,i)}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return l(e,t,n,this,o,r)}}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return l(s(),e,t,this,i,n)}}function h(e,t){var n=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),r=n?n[1]:"",i=e||function(){};return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l(s(),r,i,i,t,!1)}}__errorTracer__=t})(),(()=>{var __webpack_modules__={154:(module,__unused_webpack_exports,__webpack_require__)=>{var _typeof2=__webpack_require__(676).default;module.exports=function(exports){var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)lookup[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){var t,n,r,i,o,a;inited||init();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new Arr(3*s/4-o),r=o>0?s-4:s;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)i=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i;return 2===o?(i=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,a[c++]=255&i):1===o&&(i=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(tripletToBase64(r));return i.join("")}function fromByteArray(e){var t;inited||init();for(var n=e.length,r=n%3,i="",o=[],a=16383,s=0,c=n-r;s<c;s+=a)o.push(encodeChunk(e,s,s+a>c?c:s+a));return 1===r?(t=e[n-1],i+=lookup[t>>2],i+=lookup[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=lookup[t>>10],i+=lookup[t>>4&63],i+=lookup[t<<2&63],i+="="),o.push(i),o.join("")}function read(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)}function write(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}var toString={}.toString,isArray=Array.isArray||function(e){return"[object Array]"==toString.call(e)},INSPECT_MAX_BYTES=50;Buffer$1.TYPED_ARRAY_SUPPORT=void 0===__webpack_require__.g.TYPED_ARRAY_SUPPORT||__webpack_require__.g.TYPED_ARRAY_SUPPORT;var _kMaxLength=kMaxLength();function kMaxLength(){return Buffer$1.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer$1.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer$1.prototype:(null===e&&(e=new Buffer$1(t)),e.length=t),e}function Buffer$1(e,t,n){if(!(Buffer$1.TYPED_ARRAY_SUPPORT||this instanceof Buffer$1))return new Buffer$1(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}function from(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,n,r):"string"==typeof t?fromString(e,t,n):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,n,r){return assertSize(t),t<=0?createBuffer(e,t):void 0!==n?"string"==typeof r?createBuffer(e,t).fill(n,r):createBuffer(e,t).fill(n):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer$1.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fromString(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Buffer$1.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|byteLength(t,n),i=(e=createBuffer(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}function fromArrayLike(e,t){var n=t.length<0?0:0|checked(t.length);e=createBuffer(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function fromArrayBuffer(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Buffer$1.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer$1.prototype:e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var n=0|checked(t.length);return 0===(e=createBuffer(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&isArray(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer$1.alloc(+e)}function internalIsBuffer(e){return!(null==e||!e._isBuffer)}function byteLength(e,t){if(internalIsBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(r)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),r=!0}}function slowToString(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function bidirectionalIndexOf(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Buffer$1.from(t,r)),internalIsBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,r,i);if("number"==typeof t)return t&=255,Buffer$1.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function hexWrite(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function utf8Write(e,t,n,r){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,r)}function asciiWrite(e,t,n,r){return blitBuffer(asciiToBytes(t),e,n,r)}function latin1Write(e,t,n,r){return asciiWrite(e,t,n,r)}function base64Write(e,t,n,r){return blitBuffer(base64ToBytes(t),e,n,r)}function ucs2Write(e,t,n,r){return blitBuffer(utf16leToBytes(t,e.length-n),e,n,r)}function base64Slice(e,t,n){return 0===t&&n===e.length?fromByteArray(e):fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return decodeCodePointsArray(r)}Buffer$1.poolSize=8192,Buffer$1._augment=function(e){return e.__proto__=Buffer$1.prototype,e},Buffer$1.from=function(e,t,n){return from(null,e,t,n)},Buffer$1.TYPED_ARRAY_SUPPORT&&(Buffer$1.prototype.__proto__=Uint8Array.prototype,Buffer$1.__proto__=Uint8Array),Buffer$1.alloc=function(e,t,n){return alloc(null,e,t,n)},Buffer$1.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer$1.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer$1.isBuffer=isBuffer,Buffer$1.compare=function(e,t){if(!internalIsBuffer(e)||!internalIsBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Buffer$1.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer$1.concat=function(e,t){if(!isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer$1.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Buffer$1.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!internalIsBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Buffer$1.byteLength=byteLength,Buffer$1.prototype._isBuffer=!0,Buffer$1.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer$1.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer$1.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer$1.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer$1.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer$1.compare(this,e)},Buffer$1.prototype.inspect=function(){var e="",t=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer$1.prototype.compare=function(e,t,n,r,i){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n),l=0;l<s;++l)if(c[l]!==u[l]){o=c[l],a=u[l];break}return o<a?-1:a<o?1:0},Buffer$1.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer$1.prototype.indexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer$1.prototype.lastIndexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer$1.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Buffer$1.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=MAX_ARGUMENTS_LENGTH));return n}function asciiSlice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function latin1Slice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function hexSlice(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=toHex(e[o]);return i}function utf16leSlice(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,r,i,o){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function objectWriteUInt32(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function checkIEEE754(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,r,i){return i||checkIEEE754(e,t,n,4,34028234663852886e22,-34028234663852886e22),write(e,t,n,r,23,4),n+4}function writeDouble(e,t,n,r,i){return i||checkIEEE754(e,t,n,8,17976931348623157e292,-17976931348623157e292),write(e,t,n,r,52,8),n+8}Buffer$1.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),Buffer$1.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Buffer$1.prototype;else{var i=t-e;n=new Buffer$1(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},Buffer$1.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Buffer$1.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Buffer$1.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer$1.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer$1.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer$1.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer$1.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer$1.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Buffer$1.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Buffer$1.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer$1.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer$1.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer$1.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer$1.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer$1.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),read(this,e,!0,23,4)},Buffer$1.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),read(this,e,!1,23,4)},Buffer$1.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),read(this,e,!0,52,8)},Buffer$1.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),read(this,e,!1,52,8)},Buffer$1.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Buffer$1.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},Buffer$1.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,255,0),Buffer$1.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer$1.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer$1.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer$1.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer$1.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer$1.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Buffer$1.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Buffer$1.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,127,-128),Buffer$1.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer$1.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer$1.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer$1.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer$1.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer$1.prototype.writeFloatLE=function(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer$1.prototype.writeFloatBE=function(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer$1.prototype.writeDoubleLE=function(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer$1.prototype.writeDoubleBE=function(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer$1.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!Buffer$1.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Buffer$1.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer$1.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=internalIsBuffer(e)?e:utf8ToBytes(new Buffer$1(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function utf16leToBytes(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function isnan(e){return e!=e}function isBuffer(e){return null!=e&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isFastBuffer(e.slice(0,0))}var bufferEs6=Object.freeze({INSPECT_MAX_BYTES:INSPECT_MAX_BYTES,kMaxLength:_kMaxLength,Buffer:Buffer$1,SlowBuffer:SlowBuffer,isBuffer:isBuffer}),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==__webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var map=Map,long_1=Long,wasm=null;function Long(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function isLong(e){return!0===(e&&e.__isLong__)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=UINT_CACHE[e])?r:(n=fromBits(e,(0|e)<0?-1:0,!0),i&&(UINT_CACHE[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=INT_CACHE[e])?r:(n=fromBits(e,e<0?-1:0,!1),i&&(INT_CACHE[e]=n),n)}function fromNumber(e,t){if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,t).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,n){return new Long(e,t,n)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString$1(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ZERO;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return fromString$1(e.substring(1),t,n).neg();for(var i=fromNumber(pow_dbl(n,8)),o=ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+s),n);if(s<8){var u=fromNumber(pow_dbl(n,s));o=o.mul(u).add(fromNumber(c))}else o=(o=o.mul(i)).add(fromNumber(c))}return o.unsigned=t,o}function fromValue(e,t){return"number"==typeof e?fromNumber(e,t):"string"==typeof e?fromString$1(e,t):fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Long.fromString=fromString$1,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var t=fromNumber(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=fromNumber(pow_dbl(e,6),this.unsigned),o=this,a="";;){var s=o.div(i),c=(o.sub(s.mul(i)).toInt()>>>0).toString(e);if((o=s).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return this.comp(e)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=0,u=0,l=0,d=0;return l+=(d+=i+(65535&e.low))>>>16,u+=(l+=r+s)>>>16,c+=(u+=n+a)>>>16,c+=t+o,fromBits((l&=65535)<<16|(d&=65535),(c&=65535)<<16|(u&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=65535&e.low,u=0,l=0,d=0,f=0;return d+=(f+=i*c)>>>16,l+=(d+=r*c)>>>16,d&=65535,l+=(d+=i*s)>>>16,u+=(l+=n*c)>>>16,l&=65535,u+=(l+=r*s)>>>16,l&=65535,u+=(l+=i*a)>>>16,u+=t*c+n*s+r*a+i*o,fromBits((d&=65535)<<16|(f&=65535),(u&=65535)<<16|(l&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");var t,n,r;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;r=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(t=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=ZERO}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:pow_dbl(2,i-48),a=fromNumber(t),s=a.mul(e);s.isNegative()||s.gt(n);)s=(a=fromNumber(t-=o,this.unsigned)).mul(e);a.isZero()&&(a=ONE),r=r.add(a),n=n.sub(s)}return r},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?fromBits(this.low>>>e|t<<32-e,t>>>e,this.unsigned):fromBits(32===e?t:t>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Long.fromBytes=function(e,t,n){return n?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)},Long.fromBytesLE=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long.fromBytesBE=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},long_1.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},long_1.fromExtendedJSON=function(e,t){var n=long_1.fromString(e.$numberLong);return t&&t.relaxed?n.toNumber():n},Object.defineProperty(long_1.prototype,"_bsontype",{value:"Long"});var long_1$1=long_1;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Double=function(){function e(t){_classCallCheck(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return _createClass(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:{$numberDouble:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),e}();Object.defineProperty(Double.prototype,"_bsontype",{value:"Double"});var double_1=Double;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Timestamp=function(e){function t(e,n){var r;return _classCallCheck$1(this,t),r=long_1$1.isLong(e)?_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e.low,e.high,!0)):_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,!0)),_possibleConstructorReturn(r)}return _inherits(t,e),_createClass$1(t,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(e){return new t(long_1$1.fromInt(e,!0))}},{key:"fromNumber",value:function(e){return new t(long_1$1.fromNumber(e,!0))}},{key:"fromBits",value:function(e,n){return new t(e,n)}},{key:"fromString",value:function(e,n){return new t(long_1$1.fromString(e,n,!0))}},{key:"fromExtendedJSON",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),t}(long_1$1);Object.defineProperty(Timestamp.prototype,"_bsontype",{value:"Timestamp"}),Timestamp.MAX_VALUE=Timestamp.MAX_UNSIGNED_VALUE;var timestamp=Timestamp,require$$0={};function normalizedFunctionString(e){return e.toString().replace("function(","function (")}function insecureRandomBytes(e){for(var t=new Uint8Array(e),n=0;n<e;++n)t[n]=Math.floor(256*Math.random());return t}var randomBytes=insecureRandomBytes;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)randomBytes=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{randomBytes=require$$0.randomBytes}catch(e){}null==randomBytes&&(randomBytes=insecureRandomBytes)}var utils={normalizedFunctionString:normalizedFunctionString,randomBytes:randomBytes};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}"function"==typeof __webpack_require__.g.setTimeout&&(cachedSetTimeout=setTimeout),"function"==typeof __webpack_require__.g.clearTimeout&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=__webpack_require__.g.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(e){var t=.001*performanceNow.call(performance),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime},inherits;inherits="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var inherits$1=inherits;function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}var formatRegExp=/%[sdj%]/g;function format(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(formatRegExp,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),a=r[n];n<i;a=r[++n])isNull(a)||!isObject(a)?o+=" "+a:o+=" "+inspect(a);return o}function deprecate(e,t){if(isUndefined(__webpack_require__.g.process))return function(){return deprecate(e,t).apply(this,arguments)};var n=!1;return function(){return n||(console.error(t),n=!0),e.apply(this,arguments)}}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){debugs[e]=function(){var t=format.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(t)?n.showHidden=t:t&&_extend(n,t),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,e,n.depth)}function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"["+inspect.colors[n][0]+"m"+e+"["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function formatValue(e,t,n){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return isString(r)||(r=formatValue(e,r,n)),r}var i=formatPrimitive(e,t);if(i)return i;var o=Object.keys(t),a=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),isError(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(t);if(0===o.length){if(isFunction(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var c,u="",l=!1,d=["{","}"];(isArray$1(t)&&(l=!0,d=["[","]"]),isFunction(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return isRegExp(t)&&(u=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(u=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(u=" "+formatError(t)),0!==o.length||l&&0!=t.length?n<0?isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=l?formatArray(e,t,n,a,o):o.map((function(r){return formatProperty(e,t,n,a,r,l)})),e.seen.pop(),reduceToSingleString(c,u,d)):d[0]+u+d[1]}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)hasOwnProperty(t,String(a))?o.push(formatProperty(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(formatProperty(e,t,n,r,i,!0))})),o}function formatProperty(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),hasOwnProperty(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=isNull(n)?formatValue(e,c.value,null):formatValue(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),isUndefined(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function reduceToSingleString(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"===_typeof$1(e)}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"===_typeof$1(e)&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===_typeof$1(e)||void 0===e}function isBuffer$1(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp$1(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],t].join(" ")}function log(){console.log("%s - %s",timestamp$1(),format.apply(null,arguments))}function _extend(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var util={inherits:inherits$1,_extend:_extend,log:log,isBuffer:isBuffer$1,isPrimitive:isPrimitive,isFunction:isFunction,isError:isError,isDate:isDate,isObject:isObject,isRegExp:isRegExp,isUndefined:isUndefined,isSymbol:isSymbol,isString:isString,isNumber:isNumber,isNullOrUndefined:isNullOrUndefined,isNull:isNull,isBoolean:isBoolean,isArray:isArray$1,inspect:inspect,deprecate:deprecate,format:format,debuglog:debuglog};function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$2(e,t,n){return t&&_defineProperties$2(e.prototype,t),n&&_defineProperties$2(e,n),e}var Buffer$2=bufferEs6.Buffer,randomBytes$1=utils.randomBytes,deprecate$1=util.deprecate,PROCESS_UNIQUE=randomBytes$1(5),checkForHexRegExp=new RegExp("^[0-9a-fA-F]{24}$"),hasBufferType=!1;try{Buffer$2&&Buffer$2.from&&(hasBufferType=!0)}catch(e){hasBufferType=!1}for(var hexTable=[],_i=0;_i<256;_i++)hexTable[_i]=(_i<=15?"0":"")+_i.toString(16);for(var decodeLookup=[],i=0;i<10;)decodeLookup[48+i]=i++;for(;i<16;)decodeLookup[55+i]=decodeLookup[87+i]=i++;var _Buffer=Buffer$2;function convertToHex(e){return e.toString("hex")}function makeObjectIdError(e,t){var n=e[t];return new TypeError('ObjectId string "'.concat(e,'" contains invalid character "').concat(n,'" with character code (').concat(e.charCodeAt(t),"). All character codes for a non-hex string must be less than 256."))}var ObjectId=function(){function e(t){if(_classCallCheck$2(this,e),t instanceof e)return t;if(null==t||"number"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var n=e.isValid(t);if(!n&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(n&&"string"==typeof t&&24===t.length&&hasBufferType)return new e(Buffer$2.from(t,"hex"));if(n&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))}return _createClass$2(e,[{key:"toHexString",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof _Buffer)return t=convertToHex(this.id),e.cacheHexString&&(this.__id=t),t;for(var n=0;n<this.id.length;n++){var r=hexTable[this.id.charCodeAt(n)];if("string"!=typeof r)throw makeObjectIdError(this.id,n);t+=r}return e.cacheHexString&&(this.__id=t),t}},{key:"toString",value:function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(t){return t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof _Buffer?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return e.index=(e.index+1)%16777215}},{key:"generate",value:function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var n=e.getInc(),r=Buffer$2.alloc(12);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,r[4]=PROCESS_UNIQUE[0],r[5]=PROCESS_UNIQUE[1],r[6]=PROCESS_UNIQUE[2],r[7]=PROCESS_UNIQUE[3],r[8]=PROCESS_UNIQUE[4],r[11]=255&n,r[10]=n>>8&255,r[9]=n>>16&255,r}},{key:"createPk",value:function(){return new e}},{key:"createFromTime",value:function(t){var n=Buffer$2.from([0,0,0,0,0,0,0,0,0,0,0,0]);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,new e(n)}},{key:"createFromHexString",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(hasBufferType)return new e(Buffer$2.from(t,"hex"));for(var n=new _Buffer(12),r=0,i=0;i<24;)n[r++]=decodeLookup[t.charCodeAt(i++)]<<4|decodeLookup[t.charCodeAt(i++)];return new e(n)}},{key:"isValid",value:function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&checkForHexRegExp.test(t):t instanceof e||(t instanceof _Buffer&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&checkForHexRegExp.test(t.id)))))}},{key:"fromExtendedJSON",value:function(t){return new e(t.$oid)}}]),e}();ObjectId.get_inc=deprecate$1((function(){return ObjectId.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.get_inc=deprecate$1((function(){return ObjectId.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.getInc=deprecate$1((function(){return ObjectId.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.generate=deprecate$1((function(e){return ObjectId.generate(e)}),"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(ObjectId.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),ObjectId.prototype[util.inspect.custom||"inspect"]=ObjectId.prototype.toString,ObjectId.index=~~(16777215*Math.random()),Object.defineProperty(ObjectId.prototype,"_bsontype",{value:"ObjectID"});var objectid=ObjectId;function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$3(e,t,n){return t&&_defineProperties$3(e.prototype,t),n&&_defineProperties$3(e,n),e}function alphabetize(e){return e.split("").sort().join("")}var BSONRegExp=function(){function e(t,n){_classCallCheck$3(this,e),this.pattern=t||"",this.options=n?alphabetize(n):"";for(var r=0;r<this.options.length;r++)if("i"!==this.options[r]&&"m"!==this.options[r]&&"x"!==this.options[r]&&"l"!==this.options[r]&&"s"!==this.options[r]&&"u"!==this.options[r])throw new Error("The regular expression option [".concat(this.options[r],"] is not supported"))}return _createClass$3(e,[{key:"toExtendedJSON",value:function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(e){return e?e.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(t){return t.$regex?"BSONRegExp"===t.$regex._bsontype?t:new e(t.$regex,e.parseOptions(t.$options)):new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options))}}]),e}();Object.defineProperty(BSONRegExp.prototype,"_bsontype",{value:"BSONRegExp"});var regexp=BSONRegExp;function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$4(e,t,n){return t&&_defineProperties$4(e.prototype,t),n&&_defineProperties$4(e,n),e}var BSONSymbol=function(){function e(t){_classCallCheck$4(this,e),this.value=t}return _createClass$4(e,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$symbol)}}]),e}();Object.defineProperty(BSONSymbol.prototype,"_bsontype",{value:"Symbol"});var symbol=BSONSymbol;function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$5(e,t,n){return t&&_defineProperties$5(e.prototype,t),n&&_defineProperties$5(e,n),e}var Int32=function(){function e(t){_classCallCheck$5(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return _createClass$5(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),e}();Object.defineProperty(Int32.prototype,"_bsontype",{value:"Int32"});var int_32=Int32;function _classCallCheck$6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$6(e,t,n){return t&&_defineProperties$6(e.prototype,t),n&&_defineProperties$6(e,n),e}var Code=function(){function e(t,n){_classCallCheck$6(this,e),this.code=t,this.scope=n}return _createClass$6(e,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$code,t.$scope)}}]),e}();Object.defineProperty(Code.prototype,"_bsontype",{value:"Code"});var code=Code,Buffer$3=bufferEs6.Buffer,PARSE_STRING_REGEXP=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,PARSE_INF_REGEXP=/^(\+|-)?(Infinity|inf)$/i,PARSE_NAN_REGEXP=/^(\+|-)?NaN$/i,EXPONENT_MAX=6111,EXPONENT_MIN=-6176,EXPONENT_BIAS=6176,MAX_DIGITS=34,NAN_BUFFER=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_NEGATIVE_BUFFER=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_POSITIVE_BUFFER=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),EXPONENT_REGEX=/^([-+])?(\d+)?$/;function isDigit(e){return!isNaN(parseInt(e,10))}function divideu128(e){var t=long_1$1.fromNumber(1e9),n=long_1$1.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:n};for(var r=0;r<=3;r++)n=(n=n.shiftLeft(32)).add(new long_1$1(e.parts[r],0)),e.parts[r]=n.div(t).low,n=n.modulo(t);return{quotient:e,rem:n}}function multiply64x2(e,t){if(!e&&!t)return{high:long_1$1.fromNumber(0),low:long_1$1.fromNumber(0)};var n=e.shiftRightUnsigned(32),r=new long_1$1(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new long_1$1(t.getLowBits(),0),a=n.multiply(i),s=n.multiply(o),c=r.multiply(i),u=r.multiply(o);return a=a.add(s.shiftRightUnsigned(32)),s=new long_1$1(s.getLowBits(),0).add(c).add(u.shiftRightUnsigned(32)),{high:a=a.add(s.shiftRightUnsigned(32)),low:u=s.shiftLeft(32).add(new long_1$1(u.getLowBits(),0))}}function lessThan(e,t){var n=e.high>>>0,r=t.high>>>0;return n<r||n===r&&e.low>>>0<t.low>>>0}function invalidErr(e,t){throw new TypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}function Decimal128(e){this.bytes=e}Decimal128.fromString=function(e){var t,n=!1,r=!1,i=!1,o=0,a=0,s=0,c=0,u=0,l=[0],d=0,f=0,p=0,h=0,g=0,v=0,_=[0,0],m=[0,0],y=0;if(e.length>=7e3)throw new TypeError(e+" not a valid Decimal128 string");var b=e.match(PARSE_STRING_REGEXP),w=e.match(PARSE_INF_REGEXP),I=e.match(PARSE_NAN_REGEXP);if(!b&&!w&&!I||0===e.length)throw new TypeError(e+" not a valid Decimal128 string");if(b){var S=b[2],C=b[4],T=b[5],E=b[6];C&&void 0===E&&invalidErr(e,"missing exponent power"),C&&void 0===S&&invalidErr(e,"missing exponent base"),void 0===C&&(T||E)&&invalidErr(e,"missing e before exponent")}if("+"!==e[y]&&"-"!==e[y]||(n="-"===e[y++]),!isDigit(e[y])&&"."!==e[y]){if("i"===e[y]||"I"===e[y])return new Decimal128(Buffer$3.from(n?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));if("N"===e[y])return new Decimal128(Buffer$3.from(NAN_BUFFER))}for(;isDigit(e[y])||"."===e[y];)"."!==e[y]?(d<34&&("0"!==e[y]||i)&&(i||(u=a),i=!0,l[f++]=parseInt(e[y],10),d+=1),i&&(s+=1),r&&(c+=1),a+=1,y+=1):(r&&invalidErr(e,"contains multiple periods"),r=!0,y+=1);if(r&&!a)throw new TypeError(e+" not a valid Decimal128 string");if("e"===e[y]||"E"===e[y]){var k=e.substr(++y).match(EXPONENT_REGEX);if(!k||!k[2])return new Decimal128(Buffer$3.from(NAN_BUFFER));g=parseInt(k[0],10),y+=k[0].length}if(e[y])return new Decimal128(Buffer$3.from(NAN_BUFFER));if(p=0,d){if(h=d-1,1!==(o=s))for(;"0"===e[u+o-1];)o-=1}else p=0,h=0,l[0]=0,s=1,d=1,o=0;for(g<=c&&c-g>16384?g=EXPONENT_MIN:g-=c;g>EXPONENT_MAX;){if((h+=1)-p>MAX_DIGITS){if(l.join("").match(/^0+$/)){g=EXPONENT_MAX;break}invalidErr(e,"overflow")}g-=1}for(;g<EXPONENT_MIN||d<s;){if(0===h&&o<d){g=EXPONENT_MIN,o=0;break}if(d<s?s-=1:h-=1,g<EXPONENT_MAX)g+=1;else{if(l.join("").match(/^0+$/)){g=EXPONENT_MAX;break}invalidErr(e,"overflow")}}if(h-p+1<o){var x=a;r&&(u+=1,x+=1),n&&(u+=1,x+=1);var A=parseInt(e[u+h+1],10),P=0;if(A>=5&&(P=1,5===A))for(P=l[h]%2==1,v=u+h+2;v<x;v++)if(parseInt(e[v],10)){P=1;break}if(P)for(var D=h;D>=0;D--)if(++l[D]>9&&(l[D]=0,0===D)){if(!(g<EXPONENT_MAX))return new Decimal128(Buffer$3.from(n?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));g+=1,l[D]=1}}if(_=long_1$1.fromNumber(0),m=long_1$1.fromNumber(0),0===o)_=long_1$1.fromNumber(0),m=long_1$1.fromNumber(0);else if(h-p<17){var O=p;for(m=long_1$1.fromNumber(l[O++]),_=new long_1$1(0,0);O<=h;O++)m=(m=m.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(l[O]))}else{var N=p;for(_=long_1$1.fromNumber(l[N++]);N<=h-17;N++)_=(_=_.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(l[N]));for(m=long_1$1.fromNumber(l[N++]);N<=h;N++)m=(m=m.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(l[N]))}var R=multiply64x2(_,long_1$1.fromString("100000000000000000"));R.low=R.low.add(m),lessThan(R.low,m)&&(R.high=R.high.add(long_1$1.fromNumber(1))),t=g+EXPONENT_BIAS;var M={low:long_1$1.fromNumber(0),high:long_1$1.fromNumber(0)};R.high.shiftRightUnsigned(49).and(long_1$1.fromNumber(1)).equals(long_1$1.fromNumber(1))?(M.high=M.high.or(long_1$1.fromNumber(3).shiftLeft(61)),M.high=M.high.or(long_1$1.fromNumber(t).and(long_1$1.fromNumber(16383).shiftLeft(47))),M.high=M.high.or(R.high.and(long_1$1.fromNumber(0x7fffffffffff)))):(M.high=M.high.or(long_1$1.fromNumber(16383&t).shiftLeft(49)),M.high=M.high.or(R.high.and(long_1$1.fromNumber(562949953421311)))),M.low=R.low,n&&(M.high=M.high.or(long_1$1.fromString("9223372036854775808")));var L=Buffer$3.alloc(16);return y=0,L[y++]=255&M.low.low,L[y++]=M.low.low>>8&255,L[y++]=M.low.low>>16&255,L[y++]=M.low.low>>24&255,L[y++]=255&M.low.high,L[y++]=M.low.high>>8&255,L[y++]=M.low.high>>16&255,L[y++]=M.low.high>>24&255,L[y++]=255&M.high.low,L[y++]=M.high.low>>8&255,L[y++]=M.high.low>>16&255,L[y++]=M.high.low>>24&255,L[y++]=255&M.high.high,L[y++]=M.high.high>>8&255,L[y++]=M.high.high>>16&255,L[y++]=M.high.high>>24&255,new Decimal128(L)};var COMBINATION_MASK=31,EXPONENT_MASK=16383,COMBINATION_INFINITY=30,COMBINATION_NAN=31;Decimal128.prototype.toString=function(){for(var e,t,n,r,i,o,a=0,s=new Array(36),c=0;c<s.length;c++)s[c]=0;var u,l,d,f,p,h=0,g=!1,v={parts:new Array(4)},_=[];h=0;var m=this.bytes;if(r=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,n=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,t=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,e=m[h++]|m[h++]<<8|m[h++]<<16|m[h++]<<24,h=0,{low:new long_1$1(r,n),high:new long_1$1(t,e)}.high.lessThan(long_1$1.ZERO)&&_.push("-"),(i=e>>26&COMBINATION_MASK)>>3==3){if(i===COMBINATION_INFINITY)return _.join("")+"Infinity";if(i===COMBINATION_NAN)return"NaN";o=e>>15&EXPONENT_MASK,d=8+(e>>14&1)}else d=e>>14&7,o=e>>17&EXPONENT_MASK;if(u=o-EXPONENT_BIAS,v.parts[0]=(16383&e)+((15&d)<<14),v.parts[1]=t,v.parts[2]=n,v.parts[3]=r,0===v.parts[0]&&0===v.parts[1]&&0===v.parts[2]&&0===v.parts[3])g=!0;else for(p=3;p>=0;p--){var y=0,b=divideu128(v);if(v=b.quotient,y=b.rem.low)for(f=8;f>=0;f--)s[9*p+f]=y%10,y=Math.floor(y/10)}if(g)a=1,s[h]=0;else for(a=36;!s[h];)a-=1,h+=1;if((l=a-1+u)>=34||l<=-7||u>0){if(a>34)return _.push(0),u>0?_.push("E+"+u):u<0&&_.push("E"+u),_.join("");_.push(s[h++]),(a-=1)&&_.push(".");for(var w=0;w<a;w++)_.push(s[h++]);_.push("E"),l>0?_.push("+"+l):_.push(l)}else if(u>=0)for(var I=0;I<a;I++)_.push(s[h++]);else{var S=a+u;if(S>0)for(var C=0;C<S;C++)_.push(s[h++]);else _.push("0");for(_.push(".");S++<0;)_.push("0");for(var T=0;T<a-Math.max(S-1,0);T++)_.push(s[h++])}return _.join("")},Decimal128.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.fromExtendedJSON=function(e){return Decimal128.fromString(e.$numberDecimal)},Object.defineProperty(Decimal128.prototype,"_bsontype",{value:"Decimal128"});var decimal128=Decimal128;function _classCallCheck$7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$7(e,t,n){return t&&_defineProperties$7(e.prototype,t),n&&_defineProperties$7(e,n),e}var MinKey=function(){function e(){_classCallCheck$7(this,e)}return _createClass$7(e,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(MinKey.prototype,"_bsontype",{value:"MinKey"});var min_key=MinKey;function _classCallCheck$8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$8(e,t,n){return t&&_defineProperties$8(e.prototype,t),n&&_defineProperties$8(e,n),e}var MaxKey=function(){function e(){_classCallCheck$8(this,e)}return _createClass$8(e,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(MaxKey.prototype,"_bsontype",{value:"MaxKey"});var max_key=MaxKey;function _classCallCheck$9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$9(e,t,n){return t&&_defineProperties$9(e.prototype,t),n&&_defineProperties$9(e,n),e}var DBRef=function(){function e(t,n,r,i){_classCallCheck$9(this,e);var o=t.split(".");2===o.length&&(r=o.shift(),t=o.shift()),this.collection=t,this.oid=n,this.db=r,this.fields=i||{}}return _createClass$9(e,[{key:"toJSON",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:"toExtendedJSON",value:function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}}],[{key:"fromExtendedJSON",value:function(t){var n=Object.assign({},t);return["$ref","$id","$db"].forEach((function(e){return delete n[e]})),new e(t.$ref,t.$id,t.$db,n)}}]),e}();Object.defineProperty(DBRef.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(DBRef.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1});var db_ref=DBRef;function _classCallCheck$a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$a(e,t,n){return t&&_defineProperties$a(e.prototype,t),n&&_defineProperties$a(e,n),e}var Buffer$4=bufferEs6.Buffer,Binary=function(){function e(t,n){if(_classCallCheck$a(this,e),!(null==t||"string"==typeof t||Buffer$4.isBuffer(t)||t instanceof Uint8Array||Array.isArray(t)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==n?BSON_BINARY_SUBTYPE_DEFAULT:n,this.position=0,null==t||t instanceof Number)void 0!==Buffer$4?this.buffer=Buffer$4.alloc(e.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if("string"==typeof t)if(void 0!==Buffer$4)this.buffer=Buffer$4.from(t);else{if("undefined"==typeof Uint8Array&&!Array.isArray(t))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=writeStringToArray(t)}else this.buffer=t;this.position=t.length}}return _createClass$a(e,[{key:"put",value:function(t){if(null!=t.length&&"number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof t&&t<0||t>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var n=null;if(n="string"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=n;else if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer)){var r=Buffer$4.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=n}else{var i=null;i=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var o=0;o<this.buffer.length;o++)i[o]=this.buffer[o];this.buffer=i,this.buffer[this.position++]=n}}},{key:"write",value:function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer))n=Buffer$4.alloc(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if(isUint8Array(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var r=0;r<this.position;r++)n[r]=this.buffer[r]}this.buffer=n}if(void 0!==Buffer$4&&Buffer$4.isBuffer(e)&&Buffer$4.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==Buffer$4&&"string"==typeof e&&Buffer$4.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if(isUint8Array(e)||Array.isArray(e)&&"string"!=typeof e){for(var i=0;i<e.length;i++)this.buffer[t++]=e[i];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var o=0;o<e.length;o++)this.buffer[t++]=e.charCodeAt(o);this.position=t>this.position?t:this.position}}},{key:"read",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var n="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),r=0;r<t;r++)n[r]=this.buffer[e++];return n}},{key:"value",value:function(e){if((e=null!=e&&e)&&void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return convertArraytoUtf8BinaryString(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""}},{key:"toExtendedJSON",value:function(e){e=e||{};var t=Buffer$4.isBuffer(this.buffer)?this.buffer.toString("base64"):Buffer$4.from(this.buffer).toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===n.length?"0"+n:n}:{$binary:{base64:t,subType:1===n.length?"0"+n:n}}}}],[{key:"fromExtendedJSON",value:function(t,n){var r,i;return(n=n||{}).legacy?(i=t.$type?parseInt(t.$type,16):0,r=Buffer$4.from(t.$binary,"base64")):(i=t.$binary.subType?parseInt(t.$binary.subType,16):0,r=Buffer$4.from(t.$binary.base64,"base64")),new e(r,i)}}]),e}(),BSON_BINARY_SUBTYPE_DEFAULT=0;function isUint8Array(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function writeStringToArray(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function convertArraytoUtf8BinaryString(e,t,n){for(var r="",i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}Binary.BUFFER_SIZE=256,Binary.SUBTYPE_DEFAULT=0,Binary.SUBTYPE_FUNCTION=1,Binary.SUBTYPE_BYTE_ARRAY=2,Binary.SUBTYPE_UUID_OLD=3,Binary.SUBTYPE_UUID=4,Binary.SUBTYPE_MD5=5,Binary.SUBTYPE_USER_DEFINED=128,Object.defineProperty(Binary.prototype,"_bsontype",{value:"Binary"});var binary=Binary,constants={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,BSON_INT64_MAX:Math.pow(2,63)-1,BSON_INT64_MIN:-Math.pow(2,63),JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992,BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_DBPOINTER:12,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128};function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}var keysToCodecs={$oid:objectid,$binary:binary,$symbol:symbol,$numberInt:int_32,$numberDecimal:decimal128,$numberDouble:double_1,$numberLong:long_1$1,$minKey:min_key,$maxKey:max_key,$regex:regexp,$regularExpression:regexp,$timestamp:timestamp};function deserializeValue(e,t,n,r){if("number"==typeof n){if(r.relaxed||r.legacy)return n;if(Math.floor(n)===n){if(n>=BSON_INT32_MIN&&n<=BSON_INT32_MAX)return new int_32(n);if(n>=BSON_INT64_MIN&&n<=BSON_INT64_MAX)return new long_1$1.fromNumber(n)}return new double_1(n)}if(null==n||"object"!==_typeof$2(n))return n;if(n.$undefined)return null;for(var i=Object.keys(n).filter((function(e){return e.startsWith("$")&&null!=n[e]})),o=0;o<i.length;o++){var a=keysToCodecs[i[o]];if(a)return a.fromExtendedJSON(n,r)}if(null!=n.$date){var s=n.$date,c=new Date;return r.legacy?"number"==typeof s?c.setTime(s):"string"==typeof s&&c.setTime(Date.parse(s)):"string"==typeof s?c.setTime(Date.parse(s)):long_1$1.isLong(s)?c.setTime(s.toNumber()):"number"==typeof s&&r.relaxed&&c.setTime(s),c}if(null!=n.$code){var u=Object.assign({},n);return n.$scope&&(u.$scope=deserializeValue(e,null,n.$scope)),code.fromExtendedJSON(n)}if(null!=n.$ref||null!=n.$dbPointer){var l=n.$ref?n:n.$dbPointer;if(l instanceof db_ref)return l;var d=Object.keys(l).filter((function(e){return e.startsWith("$")})),f=!0;if(d.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(f=!1)})),f)return db_ref.fromExtendedJSON(l)}return n}function parse(e,t){var n=this;return"boolean"==typeof(t=Object.assign({},{relaxed:!0,legacy:!1},t)).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,r){return deserializeValue(n,e,r,t)}))}var BSON_INT32_MAX=2147483647,BSON_INT32_MIN=-2147483648,BSON_INT64_MAX=0x8000000000000000,BSON_INT64_MIN=-0x8000000000000000;function stringify(e,t,n,r){null!=n&&"object"===_typeof$2(n)&&(r=n,n=0),null==t||"object"!==_typeof$2(t)||Array.isArray(t)||(r=t,t=null,n=0),r=Object.assign({},{relaxed:!0,legacy:!1},r);var i=Array.isArray(e)?serializeArray(e,r):serializeDocument(e,r);return JSON.stringify(i,t,n)}function serialize(e,t){return t=t||{},JSON.parse(stringify(e,t))}function deserialize(e,t){return t=t||{},parse(JSON.stringify(e),t)}function serializeArray(e,t){return e.map((function(e){return serializeValue(e,t)}))}function getISOString(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function serializeValue(e,t){if(Array.isArray(e))return serializeArray(e,t);if(void 0===e)return null;if(e instanceof Date){var n=e.getTime(),r=n>-1&&n<2534023188e5;return t.legacy?t.relaxed&&r?{$date:e.getTime()}:{$date:getISOString(e)}:t.relaxed&&r?{$date:getISOString(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var i=e>=BSON_INT64_MIN&&e<=BSON_INT64_MAX;if(e>=BSON_INT32_MIN&&e<=BSON_INT32_MAX)return{$numberInt:e.toString()};if(i)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var o=e.flags;return void 0===o&&(o=e.toString().match(/[gimuy]*$/)[0]),new regexp(e.source,o).toExtendedJSON(t)}return null!=e&&"object"===_typeof$2(e)?serializeDocument(e,t):e}var BSON_TYPE_MAPPINGS={Binary:function(e){return new binary(e.value(),e.subtype)},Code:function(e){return new code(e.code,e.scope)},DBRef:function(e){return new db_ref(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new decimal128(e.bytes)},Double:function(e){return new double_1(e.value)},Int32:function(e){return new int_32(e.value)},Long:function(e){return long_1$1.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new max_key},MinKey:function(){return new min_key},ObjectID:function(e){return new objectid(e)},ObjectId:function(e){return new objectid(e)},BSONRegExp:function(e){return new regexp(e.pattern,e.options)},Symbol:function(e){return new symbol(e.value)},Timestamp:function(e){return timestamp.fromBits(e.low,e.high)}};function serializeDocument(e,t){if(null==e||"object"!==_typeof$2(e))throw new Error("not an object instance");var n=e._bsontype;if(void 0===n){var r={};for(var i in e)r[i]=serializeValue(e[i],t);return r}if("string"==typeof n){var o=e;if("function"!=typeof o.toExtendedJSON){var a=BSON_TYPE_MAPPINGS[n];if(!a)throw new TypeError("Unrecognized or invalid _bsontype: "+n);o=a(o)}return"Code"===n&&o.scope?o=new code(o.code,serializeValue(o.scope,t)):"DBRef"===n&&o.oid&&(o=new db_ref(o.collection,serializeValue(o.oid,t),o.db,o.fields)),o.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+_typeof$2(n))}var extended_json={parse:parse,deserialize:deserialize,serialize:serialize,stringify:stringify},FIRST_BIT=128,FIRST_TWO_BITS=192,FIRST_THREE_BITS=224,FIRST_FOUR_BITS=240,FIRST_FIVE_BITS=248,TWO_BIT_CHAR=192,THREE_BIT_CHAR=224,FOUR_BIT_CHAR=240,CONTINUING_CHAR=128;function validateUtf8(e,t,n){for(var r=0,i=t;i<n;i+=1){var o=e[i];if(r){if((o&FIRST_TWO_BITS)!==CONTINUING_CHAR)return!1;r-=1}else if(o&FIRST_BIT)if((o&FIRST_THREE_BITS)===TWO_BIT_CHAR)r=1;else if((o&FIRST_FOUR_BITS)===THREE_BIT_CHAR)r=2;else{if((o&FIRST_FIVE_BITS)!==FOUR_BIT_CHAR)return!1;r=3}}return!r}var validateUtf8_1=validateUtf8,validate_utf8={validateUtf8:validateUtf8_1},Buffer$5=bufferEs6.Buffer,validateUtf8$1=validate_utf8.validateUtf8,JS_INT_MAX_LONG=long_1$1.fromNumber(constants.JS_INT_MAX),JS_INT_MIN_LONG=long_1$1.fromNumber(constants.JS_INT_MIN),functionCache={};function deserialize$1(e,t,n){var r=(t=null==t?{}:t)&&t.index?t.index:0,i=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;if(i<5)throw new Error("bson size must be >= 5, is ".concat(i));if(t.allowObjectSmallerThanBufferSize&&e.length<i)throw new Error("buffer length ".concat(e.length," must be >= bson size ").concat(i));if(!t.allowObjectSmallerThanBufferSize&&e.length!==i)throw new Error("buffer length ".concat(e.length," must === bson size ").concat(i));if(i+r>e.length)throw new Error("(bson size ".concat(i," + options.index ").concat(r," must be <= buffer length ").concat(Buffer$5.byteLength(e),")"));if(0!==e[r+i-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return deserializeObject(e,r,t,n)}function deserializeObject(e,t,n,r){var i=null!=n.evalFunctions&&n.evalFunctions,o=null!=n.cacheFunctions&&n.cacheFunctions,a=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32;if(!a)var s=null;var c=null==n.fieldsAsRaw?null:n.fieldsAsRaw,u=null!=n.raw&&n.raw,l="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,d=null!=n.promoteBuffers&&n.promoteBuffers,f=null==n.promoteLongs||n.promoteLongs,p=null==n.promoteValues||n.promoteValues,h=t;if(e.length<5)throw new Error("corrupt bson message < 5 bytes long");var g=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(g<5||g>e.length)throw new Error("corrupt bson message");for(var v=r?[]:{},_=0;;){var m=e[t++];if(0===m)break;for(var y=t;0!==e[y]&&y<e.length;)y++;if(y>=Buffer$5.byteLength(e))throw new Error("Bad BSON Document: illegal CString");var b=r?_++:e.toString("utf8",t,y);if(t=y+1,m===constants.BSON_DATA_STRING){var w=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(w<=0||w>e.length-t||0!==e[t+w-1])throw new Error("bad string length in bson");if(!validateUtf8$1(e,t,t+w-1))throw new Error("Invalid UTF-8 string in BSON document");var I=e.toString("utf8",t,t+w-1);v[b]=I,t+=w}else if(m===constants.BSON_DATA_OID){var S=Buffer$5.alloc(12);e.copy(S,0,t,t+12),v[b]=new objectid(S),t+=12}else if(m===constants.BSON_DATA_INT&&!1===p)v[b]=new int_32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(m===constants.BSON_DATA_INT)v[b]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(m===constants.BSON_DATA_NUMBER&&!1===p)v[b]=new double_1(e.readDoubleLE(t)),t+=8;else if(m===constants.BSON_DATA_NUMBER)v[b]=e.readDoubleLE(t),t+=8;else if(m===constants.BSON_DATA_DATE){var C=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,T=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;v[b]=new Date(new long_1$1(C,T).toNumber())}else if(m===constants.BSON_DATA_BOOLEAN){if(0!==e[t]&&1!==e[t])throw new Error("illegal boolean type value");v[b]=1===e[t++]}else if(m===constants.BSON_DATA_OBJECT){var E=t,k=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(k<=0||k>e.length-t)throw new Error("bad embedded document length in bson");v[b]=u?e.slice(t,t+k):deserializeObject(e,E,n,!1),t+=k}else if(m===constants.BSON_DATA_ARRAY){var x=t,A=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,P=n,D=t+A;if(c&&c[b]){for(var O in P={},n)P[O]=n[O];P.raw=!0}if(v[b]=deserializeObject(e,x,P,!0),0!==e[(t+=A)-1])throw new Error("invalid array terminator byte");if(t!==D)throw new Error("corrupted array bson")}else if(m===constants.BSON_DATA_UNDEFINED)v[b]=void 0;else if(m===constants.BSON_DATA_NULL)v[b]=null;else if(m===constants.BSON_DATA_LONG){var N=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,R=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,M=new long_1$1(N,R);v[b]=f&&!0===p&&M.lessThanOrEqual(JS_INT_MAX_LONG)&&M.greaterThanOrEqual(JS_INT_MIN_LONG)?M.toNumber():M}else if(m===constants.BSON_DATA_DECIMAL128){var L=Buffer$5.alloc(16);e.copy(L,0,t,t+16),t+=16;var B=new decimal128(L);v[b]=B.toObject?B.toObject():B}else if(m===constants.BSON_DATA_BINARY){var F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,j=F,W=e[t++];if(F<0)throw new Error("Negative binary type element size found");if(F>Buffer$5.byteLength(e))throw new Error("Binary type size larger than document size");if(null!=e.slice){if(W===binary.SUBTYPE_BYTE_ARRAY){if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(F>j-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(F<j-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}v[b]=d&&p?e.slice(t,t+F):new binary(e.slice(t,t+F),W)}else{var U="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(F)):new Array(F);if(W===binary.SUBTYPE_BYTE_ARRAY){if((F=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(F>j-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(F<j-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(y=0;y<F;y++)U[y]=e[t+y];v[b]=d&&p?U:new binary(U,W)}t+=F}else if(m===constants.BSON_DATA_REGEXP&&!1===l){for(y=t;0!==e[y]&&y<e.length;)y++;if(y>=e.length)throw new Error("Bad BSON Document: illegal CString");var V=e.toString("utf8",t,y);for(y=t=y+1;0!==e[y]&&y<e.length;)y++;if(y>=e.length)throw new Error("Bad BSON Document: illegal CString");var G=e.toString("utf8",t,y);t=y+1;var H=new Array(G.length);for(y=0;y<G.length;y++)switch(G[y]){case"m":H[y]="m";break;case"s":H[y]="g";break;case"i":H[y]="i"}v[b]=new RegExp(V,H.join(""))}else if(m===constants.BSON_DATA_REGEXP&&!0===l){for(y=t;0!==e[y]&&y<e.length;)y++;if(y>=e.length)throw new Error("Bad BSON Document: illegal CString");var Z=e.toString("utf8",t,y);for(y=t=y+1;0!==e[y]&&y<e.length;)y++;if(y>=e.length)throw new Error("Bad BSON Document: illegal CString");var q=e.toString("utf8",t,y);t=y+1,v[b]=new regexp(Z,q)}else if(m===constants.BSON_DATA_SYMBOL){var z=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(z<=0||z>e.length-t||0!==e[t+z-1])throw new Error("bad string length in bson");v[b]=e.toString("utf8",t,t+z-1),t+=z}else if(m===constants.BSON_DATA_TIMESTAMP){var Y=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;v[b]=new timestamp(Y,K)}else if(m===constants.BSON_DATA_MIN_KEY)v[b]=new min_key;else if(m===constants.BSON_DATA_MAX_KEY)v[b]=new max_key;else if(m===constants.BSON_DATA_CODE){var J=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(J<=0||J>e.length-t||0!==e[t+J-1])throw new Error("bad string length in bson");var $=e.toString("utf8",t,t+J-1);if(i)if(o){var X=a?s($):$;v[b]=isolateEvalWithHash(functionCache,X,$,v)}else v[b]=isolateEval($);else v[b]=new code($);t+=J}else if(m===constants.BSON_DATA_CODE_W_SCOPE){var Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Q<13)throw new Error("code_w_scope total size shorter minimum expected length");var ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ee<=0||ee>e.length-t||0!==e[t+ee-1])throw new Error("bad string length in bson");var te=e.toString("utf8",t,t+ee-1),ne=t+=ee,re=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,ie=deserializeObject(e,ne,n,!1);if(t+=re,Q<8+re+ee)throw new Error("code_w_scope total size is to short, truncating scope");if(Q>8+re+ee)throw new Error("code_w_scope total size is to long, clips outer document");if(i){if(o){var oe=a?s(te):te;v[b]=isolateEvalWithHash(functionCache,oe,te,v)}else v[b]=isolateEval(te);v[b].scope=ie}else v[b]=new code(te,ie)}else{if(m!==constants.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+m.toString(16)+' for fieldname "'+b+'", are you using the latest BSON parser?');var ae=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ae<=0||ae>e.length-t||0!==e[t+ae-1])throw new Error("bad string length in bson");if(!validateUtf8$1(e,t,t+ae-1))throw new Error("Invalid UTF-8 string in BSON document");var se=e.toString("utf8",t,t+ae-1);t+=ae;var ce=Buffer$5.alloc(12);e.copy(ce,0,t,t+12);var ue=new objectid(ce);t+=12,v[b]=new db_ref(se,ue)}}if(g!==t-h){if(r)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var le=Object.keys(v).filter((function(e){return e.startsWith("$")})),de=!0;if(le.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(de=!1)})),!de)return v;if(null!=v.$id&&null!=v.$ref){var fe=Object.assign({},v);return delete fe.$ref,delete fe.$id,delete fe.$db,new db_ref(v.$ref,v.$id,v.$db||null,fe)}return v}function isolateEvalWithHash(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval("value = "+functionString),functionCache[hash]=value),functionCache[hash].bind(object)}function isolateEval(functionString){var value=null;return eval("value = "+functionString),value}var deserializer=deserialize$1;function readIEEE754(e,t,n,r,i){var o,a,s="big"===n,c=8*i-r-1,u=(1<<c)-1,l=u>>1,d=-7,f=s?0:i-1,p=s?1:-1,h=e[t+f];for(f+=p,o=h&(1<<-d)-1,h>>=-d,d+=c;d>0;o=256*o+e[t+f],f+=p,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+f],f+=p,d-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)}function writeIEEE754(e,t,n,r,i,o){var a,s,c,u="big"===r,l=8*o-i-1,d=(1<<l)-1,f=d>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=u?o-1:0,g=u?-1:1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+f>=1?p/c:p*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=d?(s=0,a=d):a+f>=1?(s=(t*c-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0)),isNaN(t)&&(s=0);i>=8;)e[n+h]=255&s,h+=g,s/=256,i-=8;for(a=a<<i|s,isNaN(t)&&(a+=8),l+=i;l>0;)e[n+h]=255&a,h+=g,a/=256,l-=8;e[n+h-g]|=128*v}var float_parser={readIEEE754:readIEEE754,writeIEEE754:writeIEEE754};function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}var Buffer$6=bufferEs6.Buffer,writeIEEE754$1=float_parser.writeIEEE754,normalizedFunctionString$1=utils.normalizedFunctionString,regexp$1=/\x00/,ignoreKeys=new Set(["$db","$ref","$id","$clusterTime"]),isDate$1=function(e){return"object"===_typeof$3(e)&&"[object Date]"===Object.prototype.toString.call(e)},isRegExp$1=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)};function serializeString(e,t,n,r,i){e[r++]=constants.BSON_DATA_STRING;var o=i?e.write(t,r,"ascii"):e.write(t,r,"utf8");e[(r=r+o+1)-1]=0;var a=e.write(n,r+4,"utf8");return e[r+3]=a+1>>24&255,e[r+2]=a+1>>16&255,e[r+1]=a+1>>8&255,e[r]=a+1&255,r=r+4+a,e[r++]=0,r}function serializeNumber(e,t,n,r,i){if(Math.floor(n)===n&&n>=constants.JS_INT_MIN&&n<=constants.JS_INT_MAX)if(n>=constants.BSON_INT32_MIN&&n<=constants.BSON_INT32_MAX)e[r++]=constants.BSON_DATA_INT,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255;else if(n>=constants.JS_INT_MIN&&n<=constants.JS_INT_MAX){e[r++]=constants.BSON_DATA_NUMBER,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,writeIEEE754$1(e,n,r,"little",52,8),r+=8}else{e[r++]=constants.BSON_DATA_LONG,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=long_1$1.fromNumber(n),a=o.getLowBits(),s=o.getHighBits();e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255}else e[r++]=constants.BSON_DATA_NUMBER,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,writeIEEE754$1(e,n,r,"little",52,8),r+=8;return r}function serializeNull(e,t,n,r,i){return e[r++]=constants.BSON_DATA_NULL,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,r}function serializeBoolean(e,t,n,r,i){return e[r++]=constants.BSON_DATA_BOOLEAN,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=n?1:0,r}function serializeDate(e,t,n,r,i){e[r++]=constants.BSON_DATA_DATE,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=long_1$1.fromNumber(n.getTime()),a=o.getLowBits(),s=o.getHighBits();return e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,r}function serializeRegExp(e,t,n,r,i){if(e[r++]=constants.BSON_DATA_REGEXP,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,n.source&&null!=n.source.match(regexp$1))throw Error("value "+n.source+" must not contain null bytes");return r+=e.write(n.source,r,"utf8"),e[r++]=0,n.ignoreCase&&(e[r++]=105),n.global&&(e[r++]=115),n.multiline&&(e[r++]=109),e[r++]=0,r}function serializeBSONRegExp(e,t,n,r,i){if(e[r++]=constants.BSON_DATA_REGEXP,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,null!=n.pattern.match(regexp$1))throw Error("pattern "+n.pattern+" must not contain null bytes");return r+=e.write(n.pattern,r,"utf8"),e[r++]=0,r+=e.write(n.options.split("").sort().join(""),r,"utf8"),e[r++]=0,r}function serializeMinMax(e,t,n,r,i){return null===n?e[r++]=constants.BSON_DATA_NULL:"MinKey"===n._bsontype?e[r++]=constants.BSON_DATA_MIN_KEY:e[r++]=constants.BSON_DATA_MAX_KEY,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,r}function serializeObjectId(e,t,n,r,i){if(e[r++]=constants.BSON_DATA_OID,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,"string"==typeof n.id)e.write(n.id,r,"binary");else{if(!n.id||!n.id.copy)throw new TypeError("object ["+JSON.stringify(n)+"] is not a valid ObjectId");n.id.copy(e,r,0,12)}return r+12}function serializeBuffer(e,t,n,r,i){e[r++]=constants.BSON_DATA_BINARY,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=n.length;return e[r++]=255&o,e[r++]=o>>8&255,e[r++]=o>>16&255,e[r++]=o>>24&255,e[r++]=constants.BSON_BINARY_SUBTYPE_DEFAULT,n.copy(e,r,0,o),r+=o}function serializeObject(e,t,n,r,i,o,a,s,c,u){for(var l=0;l<u.length;l++)if(u[l]===n)throw new Error("cyclic dependency detected");u.push(n),e[r++]=Array.isArray(n)?constants.BSON_DATA_ARRAY:constants.BSON_DATA_OBJECT,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var d=serializeInto(e,n,i,r,o+1,a,s,u);return u.pop(),d}function serializeDecimal128(e,t,n,r,i){return e[r++]=constants.BSON_DATA_DECIMAL128,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,n.bytes.copy(e,r,0,16),r+16}function serializeLong(e,t,n,r,i){e[r++]="Long"===n._bsontype?constants.BSON_DATA_LONG:constants.BSON_DATA_TIMESTAMP,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=n.getLowBits(),a=n.getHighBits();return e[r++]=255&o,e[r++]=o>>8&255,e[r++]=o>>16&255,e[r++]=o>>24&255,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,r}function serializeInt32(e,t,n,r,i){return e[r++]=constants.BSON_DATA_INT,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255,r}function serializeDouble(e,t,n,r,i){return e[r++]=constants.BSON_DATA_NUMBER,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,writeIEEE754$1(e,n.value,r,"little",52,8),r+=8}function serializeFunction(e,t,n,r,i,o,a){e[r++]=constants.BSON_DATA_CODE,r+=a?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var s=normalizedFunctionString$1(n),c=e.write(s,r+4,"utf8")+1;return e[r]=255&c,e[r+1]=c>>8&255,e[r+2]=c>>16&255,e[r+3]=c>>24&255,r=r+4+c-1,e[r++]=0,r}function serializeCode(e,t,n,r,i,o,a,s,c){if(n.scope&&"object"===_typeof$3(n.scope)){e[r++]=constants.BSON_DATA_CODE_W_SCOPE,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var u=r,l="string"==typeof n.code?n.code:n.code.toString();r+=4;var d=e.write(l,r+4,"utf8")+1;e[r]=255&d,e[r+1]=d>>8&255,e[r+2]=d>>16&255,e[r+3]=d>>24&255,e[r+4+d-1]=0,r=r+d+4;var f=serializeInto(e,n.scope,i,r,o+1,a,s);r=f-1;var p=f-u;e[u++]=255&p,e[u++]=p>>8&255,e[u++]=p>>16&255,e[u++]=p>>24&255,e[r++]=0}else{e[r++]=constants.BSON_DATA_CODE,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var h=n.code.toString(),g=e.write(h,r+4,"utf8")+1;e[r]=255&g,e[r+1]=g>>8&255,e[r+2]=g>>16&255,e[r+3]=g>>24&255,r=r+4+g-1,e[r++]=0}return r}function serializeBinary(e,t,n,r,i){e[r++]=constants.BSON_DATA_BINARY,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=n.value(!0),a=n.position;return n.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(a+=4),e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=n.sub_type,n.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(a-=4,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255),o.copy(e,r,0,n.position),r+=n.position}function serializeSymbol(e,t,n,r,i){e[r++]=constants.BSON_DATA_SYMBOL,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=e.write(n.value,r+4,"utf8")+1;return e[r]=255&o,e[r+1]=o>>8&255,e[r+2]=o>>16&255,e[r+3]=o>>24&255,r=r+4+o-1,e[r++]=0,r}function serializeDBRef(e,t,n,r,i,o,a){e[r++]=constants.BSON_DATA_OBJECT,r+=a?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var s,c=r,u={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(u.$db=n.db);var l=(s=serializeInto(e,u=Object.assign(u,n.fields),!1,r,i+1,o))-c;return e[c++]=255&l,e[c++]=l>>8&255,e[c++]=l>>16&255,e[c++]=l>>24&255,s}function serializeInto(e,t,n,r,i,o,a,s){r=r||0,(s=s||[]).push(t);var c=r+4;if(Array.isArray(t))for(var u=0;u<t.length;u++){var l=""+u,d=t[u];if(d&&d.toBSON){if("function"!=typeof d.toBSON)throw new TypeError("toBSON is not a function");d=d.toBSON()}var f=_typeof$3(d);if("string"===f)c=serializeString(e,l,d,c,!0);else if("number"===f)c=serializeNumber(e,l,d,c,!0);else if("boolean"===f)c=serializeBoolean(e,l,d,c,!0);else if(d instanceof Date||isDate$1(d))c=serializeDate(e,l,d,c,!0);else if(void 0===d)c=serializeNull(e,l,d,c,!0);else if(null===d)c=serializeNull(e,l,d,c,!0);else if("ObjectId"===d._bsontype||"ObjectID"===d._bsontype)c=serializeObjectId(e,l,d,c,!0);else if(Buffer$6.isBuffer(d))c=serializeBuffer(e,l,d,c,!0);else if(d instanceof RegExp||isRegExp$1(d))c=serializeRegExp(e,l,d,c,!0);else if("object"===f&&null==d._bsontype)c=serializeObject(e,l,d,c,n,i,o,a,!0,s);else if("object"===f&&"Decimal128"===d._bsontype)c=serializeDecimal128(e,l,d,c,!0);else if("Long"===d._bsontype||"Timestamp"===d._bsontype)c=serializeLong(e,l,d,c,!0);else if("Double"===d._bsontype)c=serializeDouble(e,l,d,c,!0);else if("function"==typeof d&&o)c=serializeFunction(e,l,d,c,n,i,o,!0);else if("Code"===d._bsontype)c=serializeCode(e,l,d,c,n,i,o,a,!0);else if("Binary"===d._bsontype)c=serializeBinary(e,l,d,c,!0);else if("Symbol"===d._bsontype)c=serializeSymbol(e,l,d,c,!0);else if("DBRef"===d._bsontype)c=serializeDBRef(e,l,d,c,i,o,!0);else if("BSONRegExp"===d._bsontype)c=serializeBSONRegExp(e,l,d,c,!0);else if("Int32"===d._bsontype)c=serializeInt32(e,l,d,c,!0);else if("MinKey"===d._bsontype||"MaxKey"===d._bsontype)c=serializeMinMax(e,l,d,c,!0);else if(void 0!==d._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+d._bsontype)}else if(t instanceof map)for(var p=t.entries(),h=!1;!h;){var g=p.next();if(!(h=g.done)){var v=g.value[0],_=g.value[1],m=_typeof$3(_);if("string"==typeof v&&!ignoreKeys.has(v)){if(null!=v.match(regexp$1))throw Error("key "+v+" must not contain null bytes");if(n){if("$"===v[0])throw Error("key "+v+" must not start with '$'");if(~v.indexOf("."))throw Error("key "+v+" must not contain '.'")}}if("string"===m)c=serializeString(e,v,_,c);else if("number"===m)c=serializeNumber(e,v,_,c);else if("boolean"===m)c=serializeBoolean(e,v,_,c);else if(_ instanceof Date||isDate$1(_))c=serializeDate(e,v,_,c);else if(null===_||void 0===_&&!1===a)c=serializeNull(e,v,_,c);else if("ObjectId"===_._bsontype||"ObjectID"===_._bsontype)c=serializeObjectId(e,v,_,c);else if(Buffer$6.isBuffer(_))c=serializeBuffer(e,v,_,c);else if(_ instanceof RegExp||isRegExp$1(_))c=serializeRegExp(e,v,_,c);else if("object"===m&&null==_._bsontype)c=serializeObject(e,v,_,c,n,i,o,a,!1,s);else if("object"===m&&"Decimal128"===_._bsontype)c=serializeDecimal128(e,v,_,c);else if("Long"===_._bsontype||"Timestamp"===_._bsontype)c=serializeLong(e,v,_,c);else if("Double"===_._bsontype)c=serializeDouble(e,v,_,c);else if("Code"===_._bsontype)c=serializeCode(e,v,_,c,n,i,o,a);else if("function"==typeof _&&o)c=serializeFunction(e,v,_,c,n,i,o);else if("Binary"===_._bsontype)c=serializeBinary(e,v,_,c);else if("Symbol"===_._bsontype)c=serializeSymbol(e,v,_,c);else if("DBRef"===_._bsontype)c=serializeDBRef(e,v,_,c,i,o);else if("BSONRegExp"===_._bsontype)c=serializeBSONRegExp(e,v,_,c);else if("Int32"===_._bsontype)c=serializeInt32(e,v,_,c);else if("MinKey"===_._bsontype||"MaxKey"===_._bsontype)c=serializeMinMax(e,v,_,c);else if(void 0!==_._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+_._bsontype)}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new TypeError("toBSON is not a function");if(null!=(t=t.toBSON())&&"object"!==_typeof$3(t))throw new TypeError("toBSON function did not return an object")}for(var y in t){var b=t[y];if(b&&b.toBSON){if("function"!=typeof b.toBSON)throw new TypeError("toBSON is not a function");b=b.toBSON()}var w=_typeof$3(b);if("string"==typeof y&&!ignoreKeys.has(y)){if(null!=y.match(regexp$1))throw Error("key "+y+" must not contain null bytes");if(n){if("$"===y[0])throw Error("key "+y+" must not start with '$'");if(~y.indexOf("."))throw Error("key "+y+" must not contain '.'")}}if("string"===w)c=serializeString(e,y,b,c);else if("number"===w)c=serializeNumber(e,y,b,c);else if("boolean"===w)c=serializeBoolean(e,y,b,c);else if(b instanceof Date||isDate$1(b))c=serializeDate(e,y,b,c);else if(void 0===b)!1===a&&(c=serializeNull(e,y,b,c));else if(null===b)c=serializeNull(e,y,b,c);else if("ObjectId"===b._bsontype||"ObjectID"===b._bsontype)c=serializeObjectId(e,y,b,c);else if(Buffer$6.isBuffer(b))c=serializeBuffer(e,y,b,c);else if(b instanceof RegExp||isRegExp$1(b))c=serializeRegExp(e,y,b,c);else if("object"===w&&null==b._bsontype)c=serializeObject(e,y,b,c,n,i,o,a,!1,s);else if("object"===w&&"Decimal128"===b._bsontype)c=serializeDecimal128(e,y,b,c);else if("Long"===b._bsontype||"Timestamp"===b._bsontype)c=serializeLong(e,y,b,c);else if("Double"===b._bsontype)c=serializeDouble(e,y,b,c);else if("Code"===b._bsontype)c=serializeCode(e,y,b,c,n,i,o,a);else if("function"==typeof b&&o)c=serializeFunction(e,y,b,c,n,i,o);else if("Binary"===b._bsontype)c=serializeBinary(e,y,b,c);else if("Symbol"===b._bsontype)c=serializeSymbol(e,y,b,c);else if("DBRef"===b._bsontype)c=serializeDBRef(e,y,b,c,i,o);else if("BSONRegExp"===b._bsontype)c=serializeBSONRegExp(e,y,b,c);else if("Int32"===b._bsontype)c=serializeInt32(e,y,b,c);else if("MinKey"===b._bsontype||"MaxKey"===b._bsontype)c=serializeMinMax(e,y,b,c);else if(void 0!==b._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+b._bsontype)}}s.pop(),e[c++]=0;var I=c-r;return e[r++]=255&I,e[r++]=I>>8&255,e[r++]=I>>16&255,e[r++]=I>>24&255,c}var serializer=serializeInto;function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(e){return _typeof2(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof2(e)})(e)}var Buffer$7=bufferEs6.Buffer,normalizedFunctionString$2=utils.normalizedFunctionString;function isDate$2(e){return"object"===_typeof$4(e)&&"[object Date]"===Object.prototype.toString.call(e)}function calculateObjectSize(e,t,n){var r=5;if(Array.isArray(e))for(var i=0;i<e.length;i++)r+=calculateElement(i.toString(),e[i],t,!0,n);else for(var o in e.toBSON&&(e=e.toBSON()),e)r+=calculateElement(o,e[o],t,!1,n);return r}function calculateElement(e,t,n,r,i){switch(t&&t.toBSON&&(t=t.toBSON()),_typeof$4(t)){case"string":return 1+Buffer$7.byteLength(e,"utf8")+1+4+Buffer$7.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=constants.JS_INT_MIN&&t<=constants.JS_INT_MAX&&t>=constants.BSON_INT32_MIN&&t<=constants.BSON_INT32_MAX?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+5:(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+9;case"undefined":return r||!i?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+2;case"object":if(null==t||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1;if("ObjectId"===t._bsontype||"ObjectID"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||isDate$2(t))return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+9;if(void 0!==Buffer$7&&Buffer$7.isBuffer(t))return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+6+t.length;if("Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+9;if("Decimal128"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+17;if("Code"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$7.byteLength(t.code.toString(),"utf8")+1+calculateObjectSize(t.scope,n,i):(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+Buffer$7.byteLength(t.code.toString(),"utf8")+1;if("Binary"===t._bsontype)return t.sub_type===binary.SUBTYPE_BYTE_ARRAY?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if("Symbol"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+Buffer$7.byteLength(t.value,"utf8")+4+1+1;if("DBRef"===t._bsontype){var o=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(o.$db=t.db),(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+calculateObjectSize(o,n,i)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+Buffer$7.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:"BSONRegExp"===t._bsontype?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+Buffer$7.byteLength(t.pattern,"utf8")+1+Buffer$7.byteLength(t.options,"utf8")+1:(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+calculateObjectSize(t,n,i)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"===String.call(t))return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+Buffer$7.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(n&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$7.byteLength(normalizedFunctionString$2(t),"utf8")+1+calculateObjectSize(t.scope,n,i);if(n)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+Buffer$7.byteLength(normalizedFunctionString$2(t),"utf8")+1}return 0}var calculate_size=calculateObjectSize,Buffer$8=bufferEs6.Buffer,ensure_buffer=function(e){if(e instanceof Buffer$8)return e;if(e instanceof Uint8Array)return Buffer$8.from(e.buffer);throw new TypeError("Must use either Buffer or Uint8Array")},Buffer$9=bufferEs6.Buffer,MAXSIZE=17825792,buffer=Buffer$9.alloc(MAXSIZE);function setInternalBufferSize(e){buffer.length<e&&(buffer=Buffer$9.alloc(e))}function serialize$1(e,t){var n="boolean"==typeof(t=t||{}).checkKeys&&t.checkKeys,r="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,i="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,o="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:MAXSIZE;buffer.length<o&&(buffer=Buffer$9.alloc(o));var a=serializer(buffer,e,n,0,0,r,i,[]),s=Buffer$9.alloc(a);return buffer.copy(s,0,0,s.length),s}function serializeWithBufferAndIndex(e,t,n){var r="boolean"==typeof(n=n||{}).checkKeys&&n.checkKeys,i="boolean"==typeof n.serializeFunctions&&n.serializeFunctions,o="boolean"!=typeof n.ignoreUndefined||n.ignoreUndefined,a="number"==typeof n.index?n.index:0,s=serializer(buffer,e,r,0,0,i,o);return buffer.copy(t,a,0,s),a+s-1}function deserialize$2(e,t){return e=ensure_buffer(e),deserializer(e,t)}function calculateObjectSize$1(e,t){var n="boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,r="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return calculate_size(e,n,r)}function deserializeStream(e,t,n,r,i,o){o=Object.assign({allowObjectSmallerThanBufferSize:!0},o),e=ensure_buffer(e);for(var a=t,s=0;s<n;s++){var c=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;o.index=a,r[i+s]=deserializer(e,o),a+=c}return a}var bson={BSON_INT32_MAX:constants.BSON_INT32_MAX,BSON_INT32_MIN:constants.BSON_INT32_MIN,BSON_INT64_MAX:constants.BSON_INT64_MAX,BSON_INT64_MIN:constants.BSON_INT64_MIN,JS_INT_MAX:constants.JS_INT_MAX,JS_INT_MIN:constants.JS_INT_MIN,BSON_DATA_NUMBER:constants.BSON_DATA_NUMBER,BSON_DATA_STRING:constants.BSON_DATA_STRING,BSON_DATA_OBJECT:constants.BSON_DATA_OBJECT,BSON_DATA_ARRAY:constants.BSON_DATA_ARRAY,BSON_DATA_BINARY:constants.BSON_DATA_BINARY,BSON_DATA_UNDEFINED:constants.BSON_DATA_UNDEFINED,BSON_DATA_OID:constants.BSON_DATA_OID,BSON_DATA_BOOLEAN:constants.BSON_DATA_BOOLEAN,BSON_DATA_DATE:constants.BSON_DATA_DATE,BSON_DATA_NULL:constants.BSON_DATA_NULL,BSON_DATA_REGEXP:constants.BSON_DATA_REGEXP,BSON_DATA_DBPOINTER:constants.BSON_DATA_DBPOINTER,BSON_DATA_CODE:constants.BSON_DATA_CODE,BSON_DATA_SYMBOL:constants.BSON_DATA_SYMBOL,BSON_DATA_CODE_W_SCOPE:constants.BSON_DATA_CODE_W_SCOPE,BSON_DATA_INT:constants.BSON_DATA_INT,BSON_DATA_TIMESTAMP:constants.BSON_DATA_TIMESTAMP,BSON_DATA_LONG:constants.BSON_DATA_LONG,BSON_DATA_DECIMAL128:constants.BSON_DATA_DECIMAL128,BSON_DATA_MIN_KEY:constants.BSON_DATA_MIN_KEY,BSON_DATA_MAX_KEY:constants.BSON_DATA_MAX_KEY,BSON_BINARY_SUBTYPE_DEFAULT:constants.BSON_BINARY_SUBTYPE_DEFAULT,BSON_BINARY_SUBTYPE_FUNCTION:constants.BSON_BINARY_SUBTYPE_FUNCTION,BSON_BINARY_SUBTYPE_BYTE_ARRAY:constants.BSON_BINARY_SUBTYPE_BYTE_ARRAY,BSON_BINARY_SUBTYPE_UUID:constants.BSON_BINARY_SUBTYPE_UUID,BSON_BINARY_SUBTYPE_MD5:constants.BSON_BINARY_SUBTYPE_MD5,BSON_BINARY_SUBTYPE_USER_DEFINED:constants.BSON_BINARY_SUBTYPE_USER_DEFINED,Code:code,Map:map,BSONSymbol:symbol,DBRef:db_ref,Binary:binary,ObjectId:objectid,Long:long_1$1,Timestamp:timestamp,Double:double_1,Int32:int_32,MinKey:min_key,MaxKey:max_key,BSONRegExp:regexp,Decimal128:decimal128,serialize:serialize$1,serializeWithBufferAndIndex:serializeWithBufferAndIndex,deserialize:deserialize$2,calculateObjectSize:calculateObjectSize$1,deserializeStream:deserializeStream,setInternalBufferSize:setInternalBufferSize,ObjectID:objectid,EJSON:extended_json},bson_1=bson.BSON_INT32_MAX,bson_2=bson.BSON_INT32_MIN,bson_3=bson.BSON_INT64_MAX,bson_4=bson.BSON_INT64_MIN,bson_5=bson.JS_INT_MAX,bson_6=bson.JS_INT_MIN,bson_7=bson.BSON_DATA_NUMBER,bson_8=bson.BSON_DATA_STRING,bson_9=bson.BSON_DATA_OBJECT,bson_10=bson.BSON_DATA_ARRAY,bson_11=bson.BSON_DATA_BINARY,bson_12=bson.BSON_DATA_UNDEFINED,bson_13=bson.BSON_DATA_OID,bson_14=bson.BSON_DATA_BOOLEAN,bson_15=bson.BSON_DATA_DATE,bson_16=bson.BSON_DATA_NULL,bson_17=bson.BSON_DATA_REGEXP,bson_18=bson.BSON_DATA_DBPOINTER,bson_19=bson.BSON_DATA_CODE,bson_20=bson.BSON_DATA_SYMBOL,bson_21=bson.BSON_DATA_CODE_W_SCOPE,bson_22=bson.BSON_DATA_INT,bson_23=bson.BSON_DATA_TIMESTAMP,bson_24=bson.BSON_DATA_LONG,bson_25=bson.BSON_DATA_DECIMAL128,bson_26=bson.BSON_DATA_MIN_KEY,bson_27=bson.BSON_DATA_MAX_KEY,bson_28=bson.BSON_BINARY_SUBTYPE_DEFAULT,bson_29=bson.BSON_BINARY_SUBTYPE_FUNCTION,bson_30=bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY,bson_31=bson.BSON_BINARY_SUBTYPE_UUID,bson_32=bson.BSON_BINARY_SUBTYPE_MD5,bson_33=bson.BSON_BINARY_SUBTYPE_USER_DEFINED,bson_34=bson.Code,bson_35=bson.BSONSymbol,bson_36=bson.DBRef,bson_37=bson.Binary,bson_38=bson.ObjectId,bson_39=bson.Long,bson_40=bson.Timestamp,bson_41=bson.Double,bson_42=bson.Int32,bson_43=bson.MinKey,bson_44=bson.MaxKey,bson_45=bson.BSONRegExp,bson_46=bson.Decimal128,bson_47=bson.serialize,bson_48=bson.serializeWithBufferAndIndex,bson_49=bson.deserialize,bson_50=bson.calculateObjectSize,bson_51=bson.deserializeStream,bson_52=bson.setInternalBufferSize,bson_53=bson.ObjectID,bson_54=bson.EJSON;return exports.default=bson,exports.BSON_INT32_MAX=bson_1,exports.BSON_INT32_MIN=bson_2,exports.BSON_INT64_MAX=bson_3,exports.BSON_INT64_MIN=bson_4,exports.JS_INT_MAX=bson_5,exports.JS_INT_MIN=bson_6,exports.BSON_DATA_NUMBER=bson_7,exports.BSON_DATA_STRING=bson_8,exports.BSON_DATA_OBJECT=bson_9,exports.BSON_DATA_ARRAY=bson_10,exports.BSON_DATA_BINARY=bson_11,exports.BSON_DATA_UNDEFINED=bson_12,exports.BSON_DATA_OID=bson_13,exports.BSON_DATA_BOOLEAN=bson_14,exports.BSON_DATA_DATE=bson_15,exports.BSON_DATA_NULL=bson_16,exports.BSON_DATA_REGEXP=bson_17,exports.BSON_DATA_DBPOINTER=bson_18,exports.BSON_DATA_CODE=bson_19,exports.BSON_DATA_SYMBOL=bson_20,exports.BSON_DATA_CODE_W_SCOPE=bson_21,exports.BSON_DATA_INT=bson_22,exports.BSON_DATA_TIMESTAMP=bson_23,exports.BSON_DATA_LONG=bson_24,exports.BSON_DATA_DECIMAL128=bson_25,exports.BSON_DATA_MIN_KEY=bson_26,exports.BSON_DATA_MAX_KEY=bson_27,exports.BSON_BINARY_SUBTYPE_DEFAULT=bson_28,exports.BSON_BINARY_SUBTYPE_FUNCTION=bson_29,exports.BSON_BINARY_SUBTYPE_BYTE_ARRAY=bson_30,exports.BSON_BINARY_SUBTYPE_UUID=bson_31,exports.BSON_BINARY_SUBTYPE_MD5=bson_32,exports.BSON_BINARY_SUBTYPE_USER_DEFINED=bson_33,exports.Code=bson_34,exports.BSONSymbol=bson_35,exports.DBRef=bson_36,exports.Binary=bson_37,exports.ObjectId=bson_38,exports.Long=bson_39,exports.Timestamp=bson_40,exports.Double=bson_41,exports.Int32=bson_42,exports.MinKey=bson_43,exports.MaxKey=bson_44,exports.BSONRegExp=bson_45,exports.Decimal128=bson_46,exports.serialize=bson_47,exports.serializeWithBufferAndIndex=bson_48,exports.deserialize=bson_49,exports.calculateObjectSize=bson_50,exports.deserializeStream=bson_51,exports.setInternalBufferSize=bson_52,exports.ObjectID=bson_53,exports.EJSON=bson_54,exports}({})},896:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(169);e=n.hmd(e);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Z.Buffer:void 0,s=a?a.allocUnsafe:void 0;const c=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},277:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g},730:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(277);e=n.hmd(e);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.Z.process;const s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}()},169:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(277),i="object"==typeof self&&self&&self.Object===Object&&self;const o=r.Z||i||Function("return this")()},710:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(169);const i=function(){return!1};e=n.hmd(e);var o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Z.Buffer:void 0;const c=(s?s.isBuffer:void 0)||i},676:e=>{"use strict";e.exports=BabelRuntimeHelpers.typeof}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultCloud:()=>Wl,InstanceCloud:()=>Ul,getCloudAPI:()=>jl,getCloudInstance:()=>Fl,getServiceMarketAPI:()=>vd});var e={};__webpack_require__.r(e),__webpack_require__.d(e,{GeoLineString:()=>da,GeoMultiLineString:()=>pa,GeoMultiPoint:()=>ua,GeoMultiPolygon:()=>_a,GeoPoint:()=>sa,GeoPolygon:()=>ga,LineString:()=>la,MultiLineString:()=>fa,MultiPoint:()=>ca,MultiPolygon:()=>va,Point:()=>aa,Polygon:()=>ha,__safe_props__:()=>ma});var t={};__webpack_require__.r(t),__webpack_require__.d(t,{AggregateOperatorMap:()=>qu,AggregateSerializer:()=>el,Decoder:()=>fl,OperatorMap:()=>Zu,ProjectionSerializer:()=>dl,QuerySerializer:()=>nl,UpdateSerializer:()=>cl,aggregateOperatorToString:()=>Xu,decodeInternalDataType:()=>Ha,encode:()=>rl,encodeInternalDataType:()=>Ga,extractQueryOptions:()=>Za,flattenObject:()=>Wa,flattenQueryObject:()=>ja,getProjectionDefinition:()=>za,isConversionRequired:()=>Va,mergeConditionAfterEncode:()=>Ua,operatorToString:()=>$u});const n=BabelRuntimeHelpers.assertThisInitialized;var r=__webpack_require__.n(n);const i=BabelRuntimeHelpers.get;var o=__webpack_require__.n(i);const a=BabelRuntimeHelpers.getPrototypeOf;var s=__webpack_require__.n(a);const c=BabelRuntimeHelpers.inherits;var u=__webpack_require__.n(c);const l=BabelRuntimeHelpers.createSuper;var d=__webpack_require__.n(l);const f=BabelRuntimeHelpers.objectSpread2;var p=__webpack_require__.n(f);const h=BabelRuntimeHelpers.asyncToGenerator;var g=__webpack_require__.n(h);const v=BabelRuntimeHelpers.classCallCheck;var _=__webpack_require__.n(v);const m=BabelRuntimeHelpers.createClass;var y=__webpack_require__.n(m);const b=regeneratorRuntime;var w=__webpack_require__.n(b);const I=function(){this.__data__=[],this.size=0};const S=function(e,t){return e===t||e!=e&&t!=t};const C=function(e,t){for(var n=e.length;n--;)if(S(e[n][0],t))return n;return-1};var T=Array.prototype.splice;const E=function(e){var t=this.__data__,n=C(t,e);return!(n<0)&&(n==t.length-1?t.pop():T.call(t,n,1),--this.size,!0)};const k=function(e){var t=this.__data__,n=C(t,e);return n<0?void 0:t[n][1]};const x=function(e){return C(this.__data__,e)>-1};const A=function(e,t){var n=this.__data__,r=C(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function P(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}P.prototype.clear=I,P.prototype.delete=E,P.prototype.get=k,P.prototype.has=x,P.prototype.set=A;const D=P;const O=function(){this.__data__=new D,this.size=0};const N=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const R=function(e){return this.__data__.get(e)};const M=function(e){return this.__data__.has(e)};var L=__webpack_require__(169);const B=L.Z.Symbol;var F=Object.prototype,j=F.hasOwnProperty,W=F.toString,U=B?B.toStringTag:void 0;const V=function(e){var t=j.call(e,U),n=e[U];try{e[U]=void 0;var r=!0}catch(e){}var i=W.call(e);return r&&(t?e[U]=n:delete e[U]),i};var G=Object.prototype.toString;const H=function(e){return G.call(e)};var Z=B?B.toStringTag:void 0;const q=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?V(e):H(e)};const z=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const Y=function(e){if(!z(e))return!1;var t=q(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const K=L.Z["__core-js_shared__"];var J,$=(J=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||""))?"Symbol(src)_1."+J:"";const X=function(e){return!!$&&$ in e};var Q=Function.prototype.toString;const ee=function(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var te=/^\[object .+?Constructor\]$/,ne=Function.prototype,re=Object.prototype,ie=ne.toString,oe=re.hasOwnProperty,ae=RegExp("^"+ie.call(oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const se=function(e){return!(!z(e)||X(e))&&(Y(e)?ae:te).test(ee(e))};const ce=function(e,t){return null==e?void 0:e[t]};const ue=function(e,t){var n=ce(e,t);return se(n)?n:void 0};const le=ue(L.Z,"Map");const de=ue(Object,"create");const fe=function(){this.__data__=de?de(null):{},this.size=0};const pe=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var he=Object.prototype.hasOwnProperty;const ge=function(e){var t=this.__data__;if(de){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return he.call(t,e)?t[e]:void 0};var ve=Object.prototype.hasOwnProperty;const _e=function(e){var t=this.__data__;return de?void 0!==t[e]:ve.call(t,e)};const me=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=de&&void 0===t?"__lodash_hash_undefined__":t,this};function ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ye.prototype.clear=fe,ye.prototype.delete=pe,ye.prototype.get=ge,ye.prototype.has=_e,ye.prototype.set=me;const be=ye;const we=function(){this.size=0,this.__data__={hash:new be,map:new(le||D),string:new be}};const Ie=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const Se=function(e,t){var n=e.__data__;return Ie(t)?n["string"==typeof t?"string":"hash"]:n.map};const Ce=function(e){var t=Se(this,e).delete(e);return this.size-=t?1:0,t};const Te=function(e){return Se(this,e).get(e)};const Ee=function(e){return Se(this,e).has(e)};const ke=function(e,t){var n=Se(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function xe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}xe.prototype.clear=we,xe.prototype.delete=Ce,xe.prototype.get=Te,xe.prototype.has=Ee,xe.prototype.set=ke;const Ae=xe;const Pe=function(e,t){var n=this.__data__;if(n instanceof D){var r=n.__data__;if(!le||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ae(r)}return n.set(e,t),this.size=n.size,this};function De(e){var t=this.__data__=new D(e);this.size=t.size}De.prototype.clear=O,De.prototype.delete=N,De.prototype.get=R,De.prototype.has=M,De.prototype.set=Pe;const Oe=De;const Ne=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();const Re=function(e,t,n){"__proto__"==t&&Ne?Ne(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};const Me=function(e,t,n){(void 0!==n&&!S(e[t],n)||void 0===n&&!(t in e))&&Re(e,t,n)};const Le=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}();var Be=__webpack_require__(896);const Fe=L.Z.Uint8Array;const je=function(e){var t=new e.constructor(e.byteLength);return new Fe(t).set(new Fe(e)),t};const We=function(e,t){var n=t?je(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const Ue=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};var Ve=Object.create;const Ge=function(){function e(){}return function(t){if(!z(t))return{};if(Ve)return Ve(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const He=function(e,t){return function(n){return e(t(n))}};const Ze=He(Object.getPrototypeOf,Object);var qe=Object.prototype;const ze=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||qe)};const Ye=function(e){return"function"!=typeof e.constructor||ze(e)?{}:Ge(Ze(e))};const Ke=function(e){return null!=e&&"object"==typeof e};const Je=function(e){return Ke(e)&&"[object Arguments]"==q(e)};var $e=Object.prototype,Xe=$e.hasOwnProperty,Qe=$e.propertyIsEnumerable;const et=Je(function(){return arguments}())?Je:function(e){return Ke(e)&&Xe.call(e,"callee")&&!Qe.call(e,"callee")};const tt=Array.isArray;const nt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};const rt=function(e){return null!=e&&nt(e.length)&&!Y(e)};const it=function(e){return Ke(e)&&rt(e)};var ot=__webpack_require__(710),at=Function.prototype,st=Object.prototype,ct=at.toString,ut=st.hasOwnProperty,lt=ct.call(Object);const dt=function(e){if(!Ke(e)||"[object Object]"!=q(e))return!1;var t=Ze(e);if(null===t)return!0;var n=ut.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ct.call(n)==lt};var ft={};ft["[object Float32Array]"]=ft["[object Float64Array]"]=ft["[object Int8Array]"]=ft["[object Int16Array]"]=ft["[object Int32Array]"]=ft["[object Uint8Array]"]=ft["[object Uint8ClampedArray]"]=ft["[object Uint16Array]"]=ft["[object Uint32Array]"]=!0,ft["[object Arguments]"]=ft["[object Array]"]=ft["[object ArrayBuffer]"]=ft["[object Boolean]"]=ft["[object DataView]"]=ft["[object Date]"]=ft["[object Error]"]=ft["[object Function]"]=ft["[object Map]"]=ft["[object Number]"]=ft["[object Object]"]=ft["[object RegExp]"]=ft["[object Set]"]=ft["[object String]"]=ft["[object WeakMap]"]=!1;const pt=function(e){return Ke(e)&&nt(e.length)&&!!ft[q(e)]};const ht=function(e){return function(t){return e(t)}};var gt=__webpack_require__(730),vt=gt.Z&&gt.Z.isTypedArray;const _t=vt?ht(vt):pt;const mt=function(e,t){if("__proto__"!=t)return e[t]};var yt=Object.prototype.hasOwnProperty;const bt=function(e,t,n){var r=e[t];yt.call(e,t)&&S(r,n)&&(void 0!==n||t in e)||Re(e,t,n)};const wt=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),i?Re(n,s,c):bt(n,s,c)}return n};const It=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var St=/^(?:0|[1-9]\d*)$/;const Ct=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&St.test(e))&&e>-1&&e%1==0&&e<t};var Tt=Object.prototype.hasOwnProperty;const Et=function(e,t){var n=tt(e),r=!n&&et(e),i=!n&&!r&&(0,ot.Z)(e),o=!n&&!r&&!i&&_t(e),a=n||r||i||o,s=a?It(e.length,String):[],c=s.length;for(var u in e)!t&&!Tt.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Ct(u,c))||s.push(u);return s};const kt=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var xt=Object.prototype.hasOwnProperty;const At=function(e){if(!z(e))return kt(e);var t=ze(e),n=[];for(var r in e)("constructor"!=r||!t&&xt.call(e,r))&&n.push(r);return n};const Pt=function(e){return rt(e)?Et(e,!0):At(e)};const Dt=function(e){return wt(e,Pt(e))};const Ot=function(e,t,n,r,i,o,a){var s=mt(e,n),c=mt(t,n),u=a.get(c);if(u)Me(e,n,u);else{var l=o?o(s,c,n+"",e,t,a):void 0,d=void 0===l;if(d){var f=tt(c),p=!f&&(0,ot.Z)(c),h=!f&&!p&&_t(c);l=c,f||p||h?tt(s)?l=s:it(s)?l=Ue(s):p?(d=!1,l=(0,Be.Z)(c,!0)):h?(d=!1,l=We(c,!0)):l=[]:dt(c)||et(c)?(l=s,et(s)?l=Dt(s):z(s)&&!Y(s)||(l=Ye(c))):d=!1}d&&(a.set(c,l),i(l,c,r,o,a),a.delete(c)),Me(e,n,l)}};const Nt=function e(t,n,r,i,o){t!==n&&Le(n,(function(a,s){if(z(a))o||(o=new Oe),Ot(t,n,s,r,e,i,o);else{var c=i?i(mt(t,s),a,s+"",t,n,o):void 0;void 0===c&&(c=a),Me(t,s,c)}}),Pt)};const Rt=function(e){return e};const Mt=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var Lt=Math.max;const Bt=function(e,t,n){return t=Lt(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Lt(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Mt(e,this,s)}};const Ft=function(e){return function(){return e}};const jt=Ne?function(e,t){return Ne(e,"toString",{configurable:!0,enumerable:!1,value:Ft(t),writable:!0})}:Rt;var Wt=Date.now;const Ut=function(e){var t=0,n=0;return function(){var r=Wt(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(jt);const Vt=function(e,t){return Ut(Bt(e,t,Rt),e+"")};const Gt=function(e,t,n){if(!z(n))return!1;var r=typeof t;return!!("number"==r?rt(n)&&Ct(t,n.length):"string"==r&&t in n)&&S(n[t],e)};const Ht=function(e){return Vt((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Gt(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}((function(e,t,n){Nt(e,t,n)}));var Zt=__webpack_require__(676),qt=__webpack_require__.n(Zt),zt=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},Yt=function(e){return"object"===zt(e)},Kt=function(e){return"string"===zt(e)},Jt=function(e){return"number"===zt(e)},$t=function(e){return"promise"===zt(e)},Xt=function(e){return"function"==typeof e},Qt=function(e){return Array.isArray(e)},en=function(e){return"date"===zt(e)},tn=function(e){return"regexp"===zt(e)},nn=function(e){return e&&"symbol"===zt(e._internalType)},rn=function(e){if("object"!==qt()(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};const on=BabelRuntimeHelpers.wrapNativeSuper;var an=__webpack_require__.n(on),sn={"-1":"",UNKNOWN_ERROR:-1,"-401001":"api permission denied",SDK_API_PERMISSION_DENIED:-401001,"-401002":"api parameter error",SDK_API_PARAMETER_ERROR:-401002,"-401003":"api parameter type error",SDK_API_PARAMETER_TYPE_ERROR:-401003,"-402001":"circular reference detected",SDK_DATABASE_CIRCULAR_REFERENCE:-402001,"-402002":"realtime listener init watch fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:-402002,"-402003":"realtime listener reconnect ws fail",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL:-402003,"-402004":"realtime listener rebuild watch fail",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:-402004,"-402005":"realtime listener close watch fail",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:-402005,"-402006":"realtime listener receive server error msg",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:-402006,"-402007":"realtime listener receive invalid server data",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:-402007,"-402008":"realtime listener websocket connection error",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:-402008,"-402009":"realtime listener websocket connection closed",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:-402009,"-402010":"realtime listener check last fail",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:-402010,"-402011":"realtime listener unexpected fatal error",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:-402011,"-402012":"realtime listener init ws fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL:-402012,"-403001":"max upload file size exceeded",SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE:-403001,"-403002":"internal server error: empty upload url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL:-403002,"-403003":"internal server error: empty download url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL:-403003,"-404001":"empty call result",SDK_FUNCTIONS_EMPTY_CALL_RESULT:-404001,"-404002":"empty event id",SDK_FUNCTIONS_EMPTY_EVENT_ID:-404002,"-404003":"empty poll url",SDK_FUNCTIONS_EMPTY_POLL_URL:-404003,"-404004":"empty poll result json",SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON:-404004,"-404005":"exceed max poll retry",SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY:-404005,"-404006":"empty poll result base resp",SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP:-404006,"-404007":"poll result base resp ret abnormal",SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-404007,"-404008":"poll result status code error",SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR:-404008,"-404009":"poll error",SDK_FUNCTIONS_POLL_ERROR:-404009,"-404010":"result expired",SDK_FUNCTIONS_POLL_RESULT_EXPIRED:-404010,"-404011":"cloud function execution error",SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR:-404011,"-404012":"polling exceed max timeout retry",SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY:-404012,"-404013":"polling exceed max system error retry",SDK_FUNCTIONS_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-404013,"-405001":"empty call result",SDK_CONTAINER_EMPTY_CALL_RESULT:-405001,"-405002":"empty event id",SDK_CONTAINER_EMPTY_EVENT_ID:-405002,"-405003":"empty poll url",SDK_CONTAINER_EMPTY_POLL_URL:-405003,"-405004":"empty poll result json",SDK_CONTAINER_EMPTY_POLL_RESULT_JSON:-405004,"-405005":"exceed max poll retry",SDK_CONTAINER_EXCEED_MAX_POLL_RETRY:-405005,"-405006":"empty poll result base resp",SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP:-405006,"-405007":"poll result base resp ret abnormal",SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-405007,"-405008":"poll result status code error",SDK_CONTAINER_POLL_RESULT_STATUS_CODE_ERROR:-405008,"-405009":"poll error",SDK_CONTAINER_POLL_ERROR:-405009,"-405010":"result expired",SDK_CONTAINER_POLL_RESULT_EXPIRED:-405010,"-405012":"polling exceed max timeout retry",SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY:-405012,"-405013":"polling exceed max system error retry",SDK_CONTAINER_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-405013,"-405014":"cannot download result (cdn)",SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL:-405014,"-601001":"system error",WX_SYSTEM_ERROR:-601001,"-601002":"system args error",WX_SYSTEM_ARGS_ERROR:-601002,"-601003":"system network error",WX_SYSTEM_NETWORK_ERROR:-601003,"-601004":"api permission denied",WX_API_PERMISSION_DENIED:-601004,"-601005":"invalid cloudID",WX_INVALID_CLOUDID:-601005,"-601006":"cloudID expired",WX_CLOUDID_EXPIRED:-601006,"-601007":"cloudID and calling user does not match",WX_CLOUDID_USER_NOT_MATCH:-601007,"-601008":"server-side request timedout",WX_SERVER_REQUEST_TIMEOUT:-601008,"-601009":"missing mobile phone",WX_MISSING_MOBILE_PHONE:-601009,"-601010":"no write permission",WX_NO_WRITE_PERMISSION:-601010,"-601011":"no privilege permission",WX_NO_PRIVILEGE_PERMISSION:-601011,"-601012":"unauthorized env",WX_UNAUTHORIZED_ENV:-601012,"-601013":"no multiend permission",WX_NO_MULTIEND_PERMISSION:-601013,"-601015":"access denied (cloudfunction cloudbase_auth returns empty errCode)",WX_CLOUDBASE_AUTH_RETURN_EMPTY_ERRCODE:-601015,"-601016":"missing env auth info",WX_MISSING_ENV_AUTH_INFO:-601016,"-601017":"access denied (cloudbase_auth returns non-zero errCode)",WX_CLOUDBASE_AUTH_RETURN_NON_ZERO_ERRCODE:-601017,"-602018":"unauthorized API",WX_UNAUTHORIZED_API:-601018,"-602001":"database query result size exceed limit (1MB)",WX_DATABASE_QUERY_SIZE_EXCEED_LIMIT:-602001,"-604001":"cloudfunction result size exceed limit (1MB)",WX_CLOUDFUNCTION_RESULT_SIZE_EXCEED_LIMIT:-604001,"-501001":"resource system error",TCB_RESOURCE_SYSTEM_ERROR:-501001,"-501002":"resource server timeout",TCB_RESOURCE_SERVER_TIMEOUT:-501002,"-501003":"exceed request limit",TCB_EXCEED_REQUEST_LIMIT:-501003,"-501004":"exceed concurrent request limit",TCB_EXCEED_CONCURRENT_REQUEST_LIMIT:-501004,"-501005":"invalid env",TCB_INVALID_ENV:-501005,"-501006":"invalid common parameters",TCB_INVALID_COMMON_PARAM:-501006,"-501007":"invalid parameters",TCB_INVALID_PARAM:-501007,"-501008":"invalid request source",TCB_INVALID_REQUEST_SOURCE:-501008,"-501009":"resource not initialized",TCB_RESOURCE_NOT_INITIALIZED:-501009,"-501010":"tencentcloud key signature verification fail",TCB_KEY_SIGNATURE_VERIFICATION_FAIL:-501010,"-501011":"invalid env status",TCB_INVALID_ENV_STATUS:-501011,"-501012":"invalid api name",TCB_INVALID_API_NAME:-501012,"-501013":"request data size exceeds limit (5M)",TCB_REQ_DATA_EXCEED_LIMIT_5M:-501013,"-501014":"upload file size exceeds limit (5M)",TCB_UPLOAD_FILE_SIZE_EXCEED_LIMIT_5M:-501014,"-501023":"permission denied",TCB_PERMISSION_DENIED:-501023,"-502001":"database request fail",TCB_DB_REQUEST_FAIL:-502001,"-502002":"database invalid command",TCB_DB_INVALID_COMMAND:-502002,"-502003":"database permission denied",TCB_DB_PERMISSION_DENIED:-502003,"-502004":"database exceed collection limit",TCB_DB_EXCEED_COLLECTION_LIMIT:-502004,"-502005":"database collection not exists",TCB_DB_COLLECTION_NOT_EXISTS:-502005,"-503001":"storage request fail",TCB_STORAGE_REQUEST_FAIL:-503001,"-503002":"storage permission denied",TCB_STORAGE_PERMISSION_DENIED:-503002,"-503003":"storage file not exists",TCB_STORAGE_FILE_NOT_EXISTS:-503003,"-503004":"storage invalid sign parameter",TCB_STORAGE_INVALID_SIGN_PARAM:-503004,"-504001":"functions request fail",TCB_FUNCTIONS_REQUEST_FAIL:-504001,"-504002":"functions execute fail",TCB_FUNCTIONS_EXEC_FAIL:-504002},cn=function(e){u()(n,e);var t=d()(n);function n(e){var i;return _()(this,n),(i=t.call(this,e.errMsg)).errCode=-1,i.errMsg=void 0,i.requestID=void 0,Object.defineProperties(r()(i),{message:{get:function(){return"errCode: ".concat(this.errCode," ").concat(sn[this.errCode]||""," | errMsg: ")+this.errMsg},set:function(e){this.errMsg=e}}}),i.errCode=e.errCode||-1,i.errMsg=e.errMsg,i}return y()(n,[{key:"message",get:function(){return"errCode: ".concat(this.errCode," | errMsg: ")+this.errMsg},set:function(e){this.errMsg=e}}]),n}(an()(Error));function un(e){return e&&e instanceof Error&&Kt(e.errMsg)}function ln(e,t){return dn(e,t)}function dn(e,t){if(e){if(un(e))return e;var n,r="".concat(t,":fail ");if(e instanceof Error)e.message="".concat(r).concat(e.message),e.stack=e.stack?e.stack.slice(0,7)+r+e.stack.slice(7):e.stack,(n=e).errCode=-1;else if("string"==typeof e)(n=new Error("".concat(r).concat(e))).errCode=-1;else{var i=e.errMsg||"";(n=new Error("".concat(t,":fail ").concat(e.errCode," ").concat(sn[e.errCode]||"",". ").concat(i))).errCode=e.errCode||-1}return n.errMsg=n.message+"",n}var o=new Error("".concat(t,":fail"));return o.errCode=-1,o.errMsg=o.message+"",o}var fn,pn=function(e){u()(n,e);var t=d()(n);function n(e,r){var i;return _()(this,n),(i=t.call(this,e)).type="timeout",i.payload=void 0,i.generic=!0,i.payload=r,i}return n}(an()(Error)),hn=function(e){return"timeout"===e.type},gn=function(e){u()(n,e);var t=d()(n);function n(e,r){var i;return _()(this,n),(i=t.call(this,e)).type="cancelled",i.payload=void 0,i.generic=!0,i.payload=r,i}return n}(an()(Error)),vn=function(e){return"cancelled"===e.type},_n={surroundThirdByTryCatch:function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Cn((function(){try{return e.apply(e,r)}catch(n){throw console.error(JSON.stringify(n)+"; ".concat(t,"\n")+n.stack),console.error(e.toString()),n}}),t)}},reportIDKey:function(){},reportIDKeyDirectly:function(){},reportKeyValue:function(){}},mn=!1,yn=10;function bn(){try{return mn?Reporter:(yn<=0||(yn--,Reporter.surroundThirdByTryCatch,fn=Reporter,mn=!0),fn)}catch(e){return fn=_n}}const wn=function(e,t){return bn().surroundThirdByTryCatch(e,t)},In=function(e){return bn().reportIDKeyDirectly(e)},Sn=function(e){return bn().reportKeyValue(e)};function Cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{var n=e();return n}catch(e){if(un(e))return e.errMsg+=t,e;var r=(e?e.toString():"")+t;return new cn({errMsg:r})}}function Tn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Cn((function(){return e.apply(e,r)}),t)}}function En(e){var t=e.param;t&&(t.success&&Xt(t.success)&&(t.success=wn(t.success,"at api ".concat(e.apiName," success callback function"))),t.fail&&Xt(t.fail)&&(t.fail=wn(t.fail,"at api ".concat(e.apiName," fail callback function"))),t.complete&&Xt(t.complete)&&(t.complete=wn(t.complete,"at api ".concat(e.apiName," complete callback function"))))}function kn(e,t,n){t.complete&&Xt(t.complete)&&Tn(t.complete,"at api ".concat(e," complete callback function;"))(n)}function xn(e,t,n){!function(e,t,n){t.success&&Xt(t.success)&&Tn(t.success,"at api ".concat(e," success callback function;"))(n)}(e,t,n),kn(e,t,n)}function An(e,t,n){!function(e,t,n){t.fail&&Xt(t.fail)&&Tn(t.fail,"at api ".concat(e," fail callback function;"))(n)}(e,t,n),kn(e,t,n)}function Pn(e){return e&&(e.success||e.fail||e.complete)}function Dn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parameter";function r(e,t,n){var i=zt(e),o=zt(t);if("string"===o)return i!==t?"".concat(n," should be ").concat(t," instead of ").concat(i,";"):"";if(i!==o)return"".concat(n," should be ").concat(o," instead of ").concat(i,"; ");var a="";switch(i){case"object":for(var s in t)a+=r(e[s],t[s],"".concat(n,".").concat(s));break;case"array":for(var c=0;c<t.length;c++)a+=r(e[c],t[c],"".concat(n,"[").concat(c,"]"))}return a}var i=r(e,t,n);return{passed:!i,reason:i}}function On(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parameter",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cn,i=Dn(e,t,n);if(!i.passed)throw new r({errCode:sn.SDK_API_PARAMETER_TYPE_ERROR,errMsg:i.reason})}function Nn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cn;if(null==e)throw new r({errCode:sn.SDK_API_PARAMETER_ERROR,errMsg:"parameter ".concat(t," of function ").concat(n," must be provided")})}function Rn(e){var t=e.name,n=e.input,r=e.max,i=e.maxWording,o=void 0===i?"":i,a=e.ErrorClass,s=void 0===a?cn:a;if(n.length>r)throw new s({errCode:sn.SDK_API_PARAMETER_ERROR,errMsg:"".concat(t," size must be less than ").concat(o||r)})}function Mn(e){var t=e.target,n=e.name,r=e.ErrorClass,i=void 0===r?cn:r;if(0===Object.keys(t).length)throw new i({errCode:sn.SDK_API_PARAMETER_ERROR,errMsg:"".concat(n," must not be empty")})}function Ln(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)return Bn(e);if(rn(e))return p()({},e);switch(zt(e)){case"object":return e;case"array":return e.slice();default:return e}}function Bn(e){switch(zt(e)){case"object":return p()({},e);case"array":return e.slice();case"number":return e instanceof Number?new Number(e):e;case"string":return e instanceof String?new String(e):e;case"boolean":return e instanceof Boolean?new Boolean(e):e;case"date":return new e.constructor(+e);case"map":return new Map(e);case"set":return new Set(e);default:return e}}const Fn=BabelRuntimeHelpers.createForOfIteratorHelper;var jn,Wn=__webpack_require__.n(Fn),Un=new WeakMap;function Vn(){var e;return null!==(e=jn)&&void 0!==e?e:void 0!==__appServiceSDK__?__appServiceSDK__:void 0}var Gn=function(e){if(!e)return Vn();var t=Un.get(e);return t&&t||Vn()},Hn=function(e,t){Un.set(e,t)};const Zn=function(){return L.Z.Date.now()};const qn=function(e){return"symbol"==typeof e||Ke(e)&&"[object Symbol]"==q(e)};var zn=/^\s+|\s+$/g,Yn=/^[-+]0x[0-9a-f]+$/i,Kn=/^0b[01]+$/i,Jn=/^0o[0-7]+$/i,$n=parseInt;const Xn=function(e){if("number"==typeof e)return e;if(qn(e))return NaN;if(z(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=z(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(zn,"");var n=Kn.test(e);return n||Jn.test(e)?$n(e.slice(2),n?2:8):Yn.test(e)?NaN:+e};var Qn=Math.max,er=Math.min;const tr=function(e,t,n){var r,i,o,a,s,c,u=0,l=!1,d=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function h(e){return u=e,s=setTimeout(v,t),l?p(e):a}function g(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-u>=o}function v(){var e=Zn();if(g(e))return _(e);s=setTimeout(v,function(e){var n=t-(e-c);return d?er(n,o-(e-u)):n}(e))}function _(e){return s=void 0,f&&r?p(e):(r=i=void 0,a)}function m(){var e=Zn(),n=g(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return h(c);if(d)return s=setTimeout(v,t),p(c)}return void 0===s&&(s=setTimeout(v,t)),a}return t=Xn(t)||0,z(n)&&(l=!!n.leading,o=(d="maxWait"in n)?Qn(Xn(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),m.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=c=i=s=void 0},m.flush=function(){return void 0===s?a:_(Zn())},m};var nr,rr,ir,or=!1,ar=[],sr="unknown",cr=function(){var e,t=Wn()(ar);try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n()}catch(e){0}}}catch(e){t.e(e)}finally{t.f()}ar=[]},ur=function e(t){setTimeout((function(){try{if(!function(e){return!(e.tunnelStartTime&&e.tunnelEndTime&&e.tunnelEndTime<e.tunnelStartTime||!(e.apiStartTime&&e.apiEndTime&&e.apiEndTime>e.apiStartTime))}(t))return;if(!or&&ar.length<100)return void ar.push(e.bind(null,t));var n=t.apiEndTime-t.apiStartTime,r=t.tunnelEndTime?t.tunnelEndTime-t.tunnelStartTime:0,i=[0,t.apiName,n,r,(t.pollStartTime&&t.pollEndTime&&t.pollEndTime>t.pollStartTime?t.pollEndTime-t.pollStartTime:0)||0,sr,t.tunnelTimeNoCSNetCost?n-t.tunnelTimeNoCSNetCost:0,t.tunnelTimeNoCSNetCost?r-t.tunnelTimeNoCSNetCost:0,t.funcExecTime?t.funcExecTime:0];Sn({key:"CloudReport",value:i.join(","),force:!0})}catch(e){}}))},lr=function(e,t,n,r){In({id:e,key:t,force:n,immediately:r})},dr=[],fr=function(e,t,n){dr.push({log_id:e,version:t,user_log_list:n}),nr&&pr()},pr=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return z(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),tr(e,t,{leading:r,maxWait:t,trailing:i})}((function(){Gn()._requestSkipCheckDomain({url:"https://servicewechat.com/wxa-qbase/report?token=".concat(nr),method:"POST",header:{},enableHttp2:!0,data:JSON.stringify({report_info_list:dr})}),dr=[]}),3e4),hr=function(e,t){var n=Xt(e);function r(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];if(t.samplePicker&&!t.samplePicker.next())return n?e.apply(this,o):e;var s=Date.now(),c=!0;try{if(t.condition&&t.condition.emptyKey&&t.timing[t.startKey])return n?e.apply(this,o):e;var u;if(n){var l=e.apply(this,o);if(!$t(l))return c=!1,l;u=l}else u=e;return u.then((function(){return i(s)})).catch((function(){return i(s)})),u}catch(e){throw c=!1,e}finally{c||i(s)}}function i(e){t.timing[t.startKey]=e,t.timing[t.endKey]=Date.now(),t.autoReport&&ur(p()(p()({},t.timing),{},{apiName:t.autoReport}))}return n?r:r()},gr=(rr=10,ir=!0,w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(){return parseInt(Math.round(2*Math.random()*rr),10)},n=ir?0:t();case 2:if(!(n>0)){e.next=9;break}return n--,e.next=7,!1;case 7:e.next=12;break;case 9:return n=t(),e.next=12,!0;case 12:e.next=2;break;case 14:case"end":return e.stop()}}),e)})))();function vr(e){return"".concat(e,":ok")}const _r=BabelRuntimeHelpers.toConsumableArray;var mr=__webpack_require__.n(_r);function yr(e,t){return JSON.stringify(e,(function(e,n){if(t&&t.has(n))return t.get(n);switch(zt(n)){case"arraybuffer":var r=new Uint8Array(n);return{type:"Buffer",data:mr()(r)}}return n}))}function br(e){return wr(JSON.parse(e))}function wr(e){switch(zt(e)){case"object":return Ir(e);case"array":return e.map(wr);default:return e}}function Ir(e){var t=e,n=Sr(t);if(t!==n)return n;for(var r in t){var i=t[r];switch(zt(i)){case"object":var o=Sr(i);t[r]=o!==i?o:Ir(t[r]);break;case"array":var a=wr(i);a!==i&&(t[r]=a);break;default:continue}}return t}function Sr(e){for(var t in e)switch(t){case"type":switch(e.type){case"Buffer":if(Qt(e.data)&&Jt(e.data[0]))try{return new Uint8Array(e.data).buffer}catch(t){return e}}}return e}var Cr=Symbol.for("CLOUD_ID"),Tr=Symbol("CDN");function Er(e){var t=[];for(var n in e)Yt(e[n])&&e[n]._internalType===Cr&&t.push({key:n,cloudID:e[n].cloudID});return t}var kr,xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))},Ar=function(){var e,t,n=Gn().wx;if(n&&n.version){e=n.version.version,t=n.version.updateTime;var r=n.version.updateTime.match(/^(\d+)\.(\d+)\.(\d+)/);return{version:e,updateTime:t,updateDateInDashes:r?"".concat(r[1],"-").concat(r[2],"-").concat(r[3]):"unknown"}}return{version:"unknown",updateTime:"unknown",updateDateInDashes:"unknown"}},Pr=!1,Dr=[],Or=function(){return new Promise((function(e,t){if(kr)e(kr);else{0;try{Gn().wx.getNetworkType({success:function(t){kr={networkType:t.networkType,isConnected:"none"!==t.networkType},e(kr),Pr||(Gn().wx.onNetworkStatusChange((function(e){if(kr.networkType=e.networkType,kr.isConnected=e.isConnected,e.isConnected&&Dr.length)for(;Dr.length;)try{Dr.shift()()}catch(e){}})),Pr=!0)},fail:t})}catch(e){t(e)}}}))},Nr=function(){return new Promise((function(e){kr&&kr.isConnected?e():Dr.push(e)}))};var Rr,Mr=!1,Lr=new Set;function Br(e){Gn().wx.onAppShow&&(Mr||(!function(){var e=Gn().wx;e.onAppShow&&e.onAppHide&&(e.onAppShow((function(){;"visible";var e,t=Wn()(Lr);try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n("show")}catch(e){0}}}catch(e){t.e(e)}finally{t.f()}})),e.onAppHide((function(){;"hidden";var e,t=Wn()(Lr);try{for(t.s();!(e=t.n()).done;){var n=e.value;try{n("hide")}catch(e){0}}}catch(e){t.e(e)}finally{t.f()}})))}(),Mr=!0),Lr.size>50&&Lr.clear(),Lr.add(e))}function Fr(e){Lr.delete(e)}function jr(){if(Rr)return Rr;var e=Gn().wx;return Rr=e.getSystemInfoSync()}function Wr(e){try{return JSON.parse(e)}catch(t){return e}}var Ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Vr(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return function(e){for(var t,n,r=String(e),i="",o=0,a=Ur;r.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&t>>8-o%1*8)){if((n=r.charCodeAt(o+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|n}return i}(t)}function Gr(e){for(var t=function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,i,o=0,a=0;i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?n+=String.fromCharCode(255&r>>(-2*o&6)):0)i=Ur.indexOf(i);return n}(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function Hr(e){return Jr(new Uint8Array(e))}function Zr(e){var t,n=e.split(""),r=[],i=Wn()(n);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.push(o.charCodeAt(0))}}catch(e){i.e(e)}finally{i.f()}return new Uint8Array(r).buffer}var qr,zr,Yr,Kr,Jr=(qr=new Array(128),zr=String.fromCodePoint||String.fromCharCode,Yr=[],function(e){var t,n,r=e.length;Yr.length=0;for(var i=0;i<r;)(n=e[i++])<=127?t=n:n<=223?t=(31&n)<<6|63&e[i++]:n<=239?t=(15&n)<<12|(63&e[i++])<<6|63&e[i++]:String.fromCodePoint?t=(7&n)<<18|(63&e[i++])<<12|(63&e[i++])<<6|63&e[i++]:(t=63,i+=3),Yr.push(qr[t]||(qr[t]=zr(t)));return Yr.join("")});try{__wxConfig.platform,Kr=p()({},__wxConfig),__wxConfig.onReady((function(){Kr=Object.assign(Kr,__wxConfig)}))}catch(e){Kr={platform:"ios",appLaunchInfo:{mode:""},onReady:function(e){setTimeout((function(){e()}))}}}const $r=Kr;var Xr=function(){return"devtools"===Kr.platform},Qr=2e4,ei=function(e){var t=new Date;return"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds()," ").concat(e)},ti=function(e){return e.join("->")};function ni(e){return ri.apply(this,arguments)}function ri(){return(ri=g()(w().mark((function e(t){var n,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new WeakMap,r=[],!t){e.next=6;break}return JSON.stringify(t,(function(e,t){return t&&t._internalType===Tr?void r.push(new Promise((function(e,r){var i={appType:301,fileType:20303,fileKey:"file_".concat(Math.random())},o=t;switch(zt(o.target)){case"object":if(!o.target.filePath)throw new Error("filePath must be provided");i.filePath=o.target.filePath;break;default:i.fileData=o.target}e(ii(i).then((function(e){n.set(t,e.fileUrl)})))}))):t})),e.next=6,Promise.all(r);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ii(e){return new Promise((function(t,n){var r=p()(p()({},e),{},{appType:e.appType||301,fileType:e.fileType||20303,fileKey:e.fileKey||"file_".concat(Math.random())});Gn().uploadToCommonCDN(p()(p()({},r),{},{success:t,fail:n}))}))}var oi,ai,si,ci=function(e){return p()(p()({},e),{},{errMsg:void 0})},ui=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){return setTimeout(t,e)}))},li=function(e){try{Xr()&&"undefined"!=typeof __global&&__global.networkLog&&__global.networkLog(p()(p()({},e),{},{domain:"cloud",method:"POST",timestampMs:e.timestampMs||+new Date,callFramesIgnoreLength:e.hasOwnProperty("callFramesIgnoreLength")?e.callFramesIgnoreLength:1}))}catch(e){}},di=function(e,t){try{if(Xr()&&"undefined"!=typeof __global&&__global.networkLog){var n=t(),r="".concat(Math.random(),"-").concat(+new Date),i=n.console||!1,o=n.resultGetter||ci;li({reqId:r,type:"requestWillBeSent",url:n.url,headers:n.headers||{},body:n.reqBody,console:i,callFramesIgnoreLength:2,timestampMs:n.timestampMs}),e.then((a=g()(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ui();case 3:li({reqId:r,type:"loadingFinished",body:JSON.stringify(o(t),null,2),console:i,callFramesIgnoreLength:2,timestampMs:Date.now()}),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return a.apply(this,arguments)})).catch((function(e){try{li({reqId:r,type:"loadingFailed",errorCode:e&&e.errCode||-1,errorMsg:Yt(e)?e.errMsg||JSON.stringify(e):e.toString(),console:i,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}))}}catch(e){0}var a};!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(oi||(oi={})),function(e){e[e.INITIATE_CALL=1]="INITIATE_CALL",e[e.NORMAL_POLL_RETRY=2]="NORMAL_POLL_RETRY",e[e.SYSTEM_ERROR_RETRY=3]="SYSTEM_ERROR_RETRY",e[e.TIMEOUT_RETRY=4]="TIMEOUT_RETRY"}(ai||(ai={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(si||(si={}));var fi="cloud.callFunction",pi="cloud.callFunction_real_v2";function hi(e){var t,n,r;function i(){return t||(t=function(e){return t=g()(w().mark((function t(n){var r,i,o,a,s,c,u,l,d,f,h,v,_,m,y,b,I,S;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S=function(){return(S=g()(w().mark((function t(n,r,i,o){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Gn(e.identifiers)._requestSkipCheckDomain({url:n,success:function(e){try{if(200!==e.statusCode)return o(ln({errCode:sn.SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR,errMsg:"polling status code ".concat(e.statusCode)},fi));var t=e.data;if(!t)return o(ln({errCode:sn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON,errMsg:sn[sn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON]},fi));if(t.base_resp&&0===t.base_resp.ret){if(0!==t.status){if(1===t.status){if(0!==t.service_errcode){var a=ln({errCode:sn.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:"requestID ".concat(t.func_req_id,", cloud function service error code ").concat(t.service_errcode||"unknown",", error message ").concat(t.service_errmsg||"unknown")},fi);return a.requestID=t.func_req_id,o(a)}var s=t.content;try{s=br(s)}catch(e){try{s=JSON.parse(s)}catch(e){}}return i({result:s,requestID:t.func_req_id})}return o(ln({errCode:sn.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching"},fi))}if(!(r>=0))return o(ln({errCode:sn.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:sn[sn.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY]},fi));I(n,r-1,i,o)}else{if(!t.base_resp)return o(ln({errCode:sn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:sn[sn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP]},fi));if(0!==t.base_resp.ret)return o(ln({errCode:sn.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:"polling base_resp.ret ".concat(t.base_resp.ret)},fi))}}catch(e){o(ln({errCode:sn.SDK_FUNCTIONS_POLL_ERROR,errMsg:"polling catch error: ".concat(e)},fi))}},fail:function(e){o(ln(e,fi))}});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)},I=function(e,t,n,r){return S.apply(this,arguments)},b=function(){return(b=g()(w().mark((function t(n){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){I(n,e.appConfig.maxPollRetry||50,t,r)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},y=function(e){return b.apply(this,arguments)},r=p()({},n.data),(i=Er(r).map((function(e){return{key_name:e.key,cloud_id:e.cloudID}}))).length){o=Wn()(i);try{for(o.s();!(a=o.n()).done;)s=a.value,delete r[s.key_name]}catch(e){o.e(e)}finally{o.f()}}return t.next=9,n.cdnMapPromise;case 9:return c=t.sent,Rn({input:u=yr(r,c),max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:"".concat(e.appConfig.maxReqDataSize/1024," KB")}),l={function_name:n.name,data:u,cloudid_list:i},d=yr(l),n.context.tunnelStartTime=+new Date,t.next=17,e.request(p()(p()({},n.config),{},{apiName:"tcbapi_slowcallfunction",serviceName:e.name,serializedReqData:d,env:n.config&&n.config.env||e.env}));case 17:if(f=t.sent,n.context.tunnelEndTime=+new Date,h=f.data){t.next=22;break}throw ln({errCode:sn.SDK_FUNCTIONS_EMPTY_CALL_RESULT,errMsg:sn[sn.SDK_FUNCTIONS_EMPTY_CALL_RESULT]},fi);case 22:if(h.event_id,h.poll_url){t.next=25;break}throw ln({errCode:sn.SDK_FUNCTIONS_EMPTY_POLL_URL,errMsg:sn[sn.SDK_FUNCTIONS_EMPTY_POLL_URL]},fi);case 25:return h.poll_url.indexOf("?")>-1?h.poll_url+="&devtools_ignore=true&skip_domain_check=true":h.poll_url+="?devtools_ignore=true&skip_domain_check=true",n.context.pollStartTime=+new Date,t.next=29,y(h.poll_url);case 29:return v=t.sent,_=v.result,m=v.requestID,n.context.pollEndTime=+new Date,t.abrupt("return",{errMsg:vr(fi),result:_,requestID:m});case 34:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t}(e)),t}function o(){return n||(n=function(e){return t=g()(w().mark((function t(n){var r,i,o,a,s,c,u,l,d,f,h,v,_,m,y,b;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b=function(e,t,n){var r=function(t){e.push(ei("app ".concat(t)))};return Br(r),{resolve:function(e){Fr(r),t(e)},reject:function(e){Fr(r),n(e)}}},y=function(){return(y=g()(w().mark((function t(r){var o,a,s,c,u,l,d,f,h,v,_,y,b,I,S,C,T,E,k,x;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x=function(e){try{if(I)return;C(),k(e);var t=e.data;if(!t)return d.push(ei("empty resp")),_(dn({errCode:sn.SDK_FUNCTIONS_EMPTY_CALL_RESULT},fi));if(!t.baseresponse||0!==t.baseresponse.errcode)return t.baseresponse?0!==t.baseresponse.errcode?_(dn({errCode:sn.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:"polling base_resp.errcode ".concat(t.baseresponse.errcode," errmsg ").concat(t.baseresponse.errmsg," (callId: ").concat(s,")")},fi)):_(dn({errCode:sn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:"polling base_resp ".concat(JSON.stringify(t.baseresponse)," (callId: ").concat(s,")")},fi)):_(dn({errCode:sn.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP},fi));if(0!==t.status){if(1===t.status){if(0!==t.service_errcode){if(t.service_errcode===sn.TCB_FUNCTIONS_EXEC_FAIL){var n=t.service_errmsg||"";try{for(var i=n.split("\n"),o=[],a=0;a<i.length;a++)i[a].startsWith("Error: ")&&o.push([i[a],a]);if(o.length%2==1){var c=o[Math.floor(o.length/2)][1];n=i.slice(c).join("\n")}}catch(e){}var u=dn({errCode:sn.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:"云函数执行错误\n云端堆栈信息(error stack)(".concat(t.func_request_id?"requestId ".concat(t.func_request_id,", "):"","callid ").concat(s,"):\n").concat(n)},fi);return u.stack="Error: ".concat(u.message),u.requestID=t.func_request_id,_(u)}var f=dn({errCode:sn.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:"\n云函数调用失败(".concat(t.func_request_id?"requestId ".concat(t.func_request_id,", "):"","callid ").concat(s,"):\n").concat(t.service_errcode," ").concat(t.service_errmsg)},fi);return f.stack="Error: ".concat(f.message),f.requestID=t.func_request_id,_(f)}var h=t.data;try{h=br(h)}catch(e){try{h=JSON.parse(h)}catch(e){}}return v({result:h,requestID:t.func_request_id})}return d.push(ei("poll result expired")),_(dn({errCode:sn.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching, result cannot be fetched anymore (callId: ".concat(s,") (trace: ").concat(ti(d),")")},fi))}if(!(l>=0))return d.push(ei("too many polls, abort")),_(dn({errCode:sn.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:"(callId: ".concat(s,") (trace: ").concat(ti(d),")")},fi));d.push(ei("normal poll")),m(p()(p()({},r),{},{action:oi.POLL,scene:ai.NORMAL_POLL_RETRY,tryCount:l-1}))}catch(e){_(dn({errCode:sn.SDK_FUNCTIONS_POLL_ERROR,errMsg:"polling catch error: ".concat(e," (callId: ").concat(s,")")},fi))}},o=r.functionName,a=r.data,s=r.callID,c=r.action,u=r.scene,l=r.tryCount,d=r.trace,f=r.systemErrorRetry,h=r.timeoutErrorRetry,v=r.resolve,_=r.reject,y={function_name:o,data:c===oi.CALL?a:void 0,action:c,scene:u,call_id:s,cloudid_list:c===oi.CALL?i:[]},b=yr(y),I=!1,S=!1,C=function(){clearTimeout(E),S=!0},T=+new Date,E=setTimeout(g()(w().mark((function t(){var n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.appConfig.clientPollTimeout||Qr,!(+new Date-T>n)){t.next=6;break}return t.next=4,xr();case 4:if(!S){t.next=6;break}return t.abrupt("return");case 6:if(Xr()||!(+new Date-T>e.appConfig.maxStartRetryGap)){t.next=9;break}return d.push(ei("timeout, exceed max retry gap")),t.abrupt("return",_(dn({errCode:sn.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for retry, cannot retry fetching the result anymore (callId: ".concat(s,") (trace: ").concat(ti(d),")")},fi)));case 9:I=!0,r.timeoutErrorRetry>0?(d.push(ei("timeout, retry")),m(p()(p()({},r),{},{scene:ai.TIMEOUT_RETRY,tryCount:l-1,timeoutErrorRetry:h-1}))):(d.push(ei("timeout, abort")),_(dn({errCode:sn.SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:"(callId: ".concat(s,") (trace: ").concat(ti(d),")")},fi)));case 11:case"end":return t.stop()}}),t)}))),e.appConfig.clientPollTimeout||Qr),k=function(e){var t=e.data;t&&t.baseresponse&&t.baseresponse.stat&&(t.baseresponse.stat.qbase_cost_time&&(n.context.tunnelTimeNoCSNetCost+=t.baseresponse.stat.qbase_cost_time),t.baseresponse.stat.func_exec_cost_time&&(n.context.funcExecTime=t.baseresponse.stat.func_exec_cost_time))},e.request(p()(p()({},n.config),{},{apiName:"tcbapi_slowcallfunction_v2",serviceName:e.name,serializedReqData:b,env:n.config&&n.config.env||e.env})).then(x).catch((function(e){I||(C(),e&&e.operateWXDataFail&&f>0?(d.push(ei("system error (".concat(e,"), retry"))),m(p()(p()({},r),{},{scene:ai.SYSTEM_ERROR_RETRY,tryCount:l-1,systemErrorRetry:f-1}))):(d.push(ei("system error (".concat(e,"), abort"))),_(dn("".concat(e," (callId: ").concat(s,") (trace: ").concat(ti(d),")"),fi))))}));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)},m=function(e){return y.apply(this,arguments)},_=function(){return(_=g()(w().mark((function t(n,r,i,o){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){var s=[ei("start")],c=b(s,t,a),u=c.resolve,l=c.reject;m({param:n,functionName:n.name,data:r,cloudIDList:i,callID:o,action:oi.CALL,scene:ai.INITIATE_CALL,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,trace:s,resolve:u,reject:l})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)},v=function(e,t,n,r){return _.apply(this,arguments)},r=p()({},n.data),(i=Er(r).map((function(e){return{key_name:e.key,cloud_id:e.cloudID}}))).length){o=Wn()(i);try{for(o.s();!(a=o.n()).done;)s=a.value,delete r[s.key_name]}catch(e){o.e(e)}finally{o.f()}}return t.next=10,n.cdnMapPromise;case 10:return c=t.sent,Rn({input:u=yr(r,c),max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:"".concat(e.appConfig.maxReqDataSize/1024," KB")}),l="".concat(+new Date,"-").concat(Math.random()),n.context.tunnelStartTime=+new Date,t.next=17,v(n,u,i,l);case 17:return d=t.sent,f=d.result,h=d.requestID,n.context.tunnelEndTime=+new Date,t.abrupt("return",{errMsg:vr(fi),result:f,requestID:h});case 22:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t}(e)),n}function a(){return r||(r=function(e){return t=g()(w().mark((function t(n){var r,i,o,a,s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={function_name:n.name,data:yr(n.data),cloudid_list:[]},i=yr(r),t.next=4,e.request({apiName:"tcbapi_callfunction",serviceName:e.name,serializedReqData:i,env:n.config&&n.config.env||e.env});case 4:if(o=t.sent,a=o.data,s=a&&a.data)try{s=JSON.parse(s)}catch(e){}return t.abrupt("return",{errMsg:vr(fi),result:s});case 9:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t}(e)),r}return function(e){var t=+new Date;On(e,"object");var n=Ln(e);return n.data||(n.data={}),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,Pn(n)?function(e){En({apiName:fi,param:e}),c(e).then((function(t){xn(fi,e,t)})).catch((function(t){An(fi,e,t)}))}(n):c(n)};function s(e){On(e,{name:"string"}),e.data&&On(e.data,"object"),e.config&&e.config.env&&On(e.config.env,"string")}function c(e){return u.apply(this,arguments)}function u(){return(u=g()(w().mark((function t(n){var r,c,u,l,d;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d=function(){return 1===n.version},t.prev=1,s(n),n.cdnMapPromise=ni(n.data),r=d()?i()(n):o()(n),Xr()&&(c=Date.now(),n.cdnMapPromise.then((function(t){di(r,(function(){var r;return{url:"wx.cloud.callFunction.".concat(n.name),headers:{Env:e.isInstance?e.env:(null===(r=n.config)||void 0===r?void 0:r.env)||e.env},reqBody:yr(n.data,t),timestampMs:c,console:e.debug}}))})).catch((function(){di(r,(function(){var t;return{url:"wx.cloud.callFunction.".concat(n.name),headers:{Env:e.isInstance?e.env:(null===(t=n.config)||void 0===t?void 0:t.env)||e.env},reqBody:yr(n.data),timestampMs:c,console:e.debug}}))}))),t.next=9,r;case 9:return u=t.sent,t.abrupt("return",u);case 13:return t.next=15,a()(n);case 15:return l=t.sent,t.abrupt("return",l);case 17:t.next=22;break;case 19:throw t.prev=19,t.t0=t.catch(1),ln(t.t0,fi);case 22:return t.prev=22,ur(p()(p()({},n.context),{},{apiEndTime:+new Date,apiName:d()?fi:pi})),t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[1,19,22,25]])})))).apply(this,arguments)}}function gi(e){return{callFunction:hi(e)}}var vi="functions";function _i(e){e.registerService(function(e){var t={name:vi,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(vi)},appConfig:{get maxReqDataSize(){return e.appConfig.call_function_max_req_data_size},get maxPollRetry(){return e.appConfig.call_function_poll_max_retry},get maxStartRetryGap(){return e.appConfig.call_function_valid_start_retry_gap},get clientPollTimeout(){return e.appConfig.call_function_client_poll_timeout}}};return{name:vi,context:t,getAPIs:gi.bind(null,t)}}(e))}const mi=BabelRuntimeHelpers.slicedToArray;var yi,bi,wi,Ii,Si=__webpack_require__.n(mi),Ci=(new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),"cloud.callContainer");function Ti(e,t,n){var r=Date.now();return e.then((function(){return t[n]=Date.now()-r})).catch((function(){return t[n]=Date.now()-r})),e}!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(yi||(yi={})),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Timeout=2]="Timeout"}(bi||(bi={})),function(e){e[e.RAW=0]="RAW",e[e.BASE64=1]="BASE64",e[e.CDN_URL=2]="CDN_URL"}(wi||(wi={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(Ii||(Ii={}));var Ei=function(e){var t=new Date;return"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds()," ").concat(e)},ki=function(e){return e.join("->")},xi=2e4,Ai=1e5,Pi="cloud.callContainer";var Di="cloud.callContainer";function Oi(e){var t,n;function r(){return t||(t=function(e){return t=g()(w().mark((function t(r){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.all([r.cdnMapPromise,Ti(e.serviceEndpoint.getEndpoint("container"),r.stats,"getServiceEndpoint")]).then((function(e){var t=Si()(e,2),i=t[0],o=t[1];return r.shouldSerialize&&(r.data=yr(r.data,i)),n(o.url,r)})));case 1:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t;function n(e,t){return r.apply(this,arguments)}function r(){return(r=g()(w().mark((function t(n,r){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){var o,a=Gn(e.identifiers),s=p()(p()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(o=r.config)||void 0===o?void 0:o.env)||e.env,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":"".concat(Math.random(),"_").concat(Date.now())});e.appid&&(s["X-WX-RESOURCE-APPID"]=e.appid),a._requestSkipCheckDomain({url:n,method:r.method,header:s,data:r.data,dataType:r.dataType,responseType:r.responseType,timeout:r.timeout,success:function(e){t(p()(p()({},e),{},{errMsg:"".concat(Ci,":ok")}))},fail:function(e){i(p()(p()({},e),{},{errMsg:e.errMsg.replace(/^request/,Ci)}))}})})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}(e)),t}function i(){return n||(n=function(e){return t=g()(w().mark((function t(n){var r,i,o,a,s,c,u,l,d,f,h,v,_,m,y,b,I,S,C,T,E,k;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k=function(e,t,n){var r=function(t){e.push(Ei("app ".concat(t)))};return Br(r),{resolve:function(e){Fr(r),t(e)},reject:function(e){Fr(r),n(e)}}},E=function(){return(E=g()(w().mark((function t(r){var i,o,a,s,c,u,l,d,f,h,v,_,m,y,b,I,S,C,E,k,x,A,P,D;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(y in D=function(){return(D=g()(w().mark((function t(i){var o,s,c,d;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!S&&!h.reached){t.next=3;break}return t.abrupt("return");case 3:if(E(),A(i),o=i.data){t.next=9;break}return l.push(Ei("empty resp")),t.abrupt("return",_(dn({errCode:sn.SDK_CONTAINER_EMPTY_CALL_RESULT},Pi)));case 9:if(!o.baseresponse||0!==o.baseresponse.errcode){t.next=49;break}if(0!==o.status){t.next=20;break}if(!(u>=0)){t.next=16;break}l.push(Ei("normal poll")),T(p()(p()({},r),{},{action:yi.POLL,retryType:bi.None,tryCount:u-1})),t.next=18;break;case 16:return l.push(Ei("too many polls, abort")),t.abrupt("return",_(dn({errCode:sn.SDK_CONTAINER_EXCEED_MAX_POLL_RETRY,errMsg:"(callId: ".concat(a,") (trace: ").concat(ki(l),")")},Pi)));case 18:t.next=47;break;case 20:if(1!==o.status){t.next=45;break}if(o.data_type!==wi.BASE64){t.next=26;break}s=Gr(o.data),"json"===n.dataType?s=Wr(Hr(s)):"arraybuffer"!==n.responseType&&(s=Hr(s)),t.next=42;break;case 26:if(o.data_type!==wi.CDN_URL){t.next=40;break}return t.prev=27,c=Gn(e.identifiers),t.next=31,new Promise((function(e,t){c._requestSkipCheckDomain({url:o.data,dataType:n.dataType,responseType:n.responseType,success:function(n){200!==n.statusCode?t("download response status code ".concat(n.statusCode)):e(n)},fail:function(e){t(e)}})}));case 31:d=t.sent,s=d.data,t.next=38;break;case 35:return t.prev=35,t.t0=t.catch(27),t.abrupt("return",_(dn({errCode:sn.SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL,errMsg:"error: ".concat(t.t0," \n (callId: ").concat(a,") (trace: ").concat(ki(l),")")},Pi)));case 38:t.next=42;break;case 40:s=o.data,"arraybuffer"===n.responseType?s=Zr(s):"json"===n.dataType&&(s=Wr(s));case 42:return t.abrupt("return",v({result:{data:s,statusCode:o.http_code,header:o.headers.reduce((function(e,t){return e[t.k]=t.v,e}),{})}}));case 45:return l.push(Ei("poll result expired")),t.abrupt("return",_(dn({errCode:sn.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching, result cannot be fetched anymore (callId: ".concat(a,") (trace: ").concat(ki(l),")")},Pi)));case 47:t.next=58;break;case 49:if(o.baseresponse){t.next=53;break}return t.abrupt("return",_(dn({errCode:sn.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP},Pi)));case 53:if(0===o.baseresponse.errcode){t.next=57;break}return t.abrupt("return",_(dn({errCode:sn.SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:"polling base_resp.errcode ".concat(o.baseresponse.errcode," errmsg ").concat(o.baseresponse.errmsg," (callId: ").concat(a,")")},Pi)));case 57:return t.abrupt("return",_(dn({errCode:sn.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP,errMsg:"polling base_resp ".concat(JSON.stringify(o.baseresponse)," (callId: ").concat(a,")")},Pi)));case 58:t.next=63;break;case 60:t.prev=60,t.t1=t.catch(0),_(dn({errCode:sn.SDK_CONTAINER_POLL_ERROR,errMsg:"polling catch error: ".concat(t.t1," (callId: ").concat(a,")")},Pi));case 63:case"end":return t.stop()}}),t,null,[[0,60],[27,35]])})))).apply(this,arguments)},P=function(e){return D.apply(this,arguments)},i=r.data,o=r.dataType,a=r.callID,s=r.action,c=r.retryType,u=r.tryCount,l=r.trace,d=r.systemErrorRetry,f=r.timeoutErrorRetry,h=r.userTimeout,v=r.resolve,_=r.reject,m=[],n.header)m.push({k:y,v:n.header[y]});if(b=s===yi.CALL?{method:n.method||"GET",headers:m,data:s===yi.CALL?i:void 0,data_type:o,action:s,retryType:c,call_id:a}:{call_id:a,action:s,retryType:c},I=yr(b),S=!1,C=!1,E=function(){clearTimeout(x),C=!0},k=+new Date,x=setTimeout(g()(w().mark((function t(){var n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.appConfig.clientPollTimeout||xi,!(+new Date-k>n)){t.next=6;break}return t.next=4,xr();case 4:if(!C){t.next=6;break}return t.abrupt("return");case 6:if(!h.reached){t.next=8;break}return t.abrupt("return");case 8:if(Xr()||!(+new Date-k>e.appConfig.maxStartRetryGap)){t.next=11;break}return l.push(Ei("timeout, exceed max retry gap")),t.abrupt("return",_(dn({errCode:sn.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:"timeout for retry, cannot retry fetching the result anymore (callId: ".concat(a,") (trace: ").concat(ki(l),")")},Pi)));case 11:S=!0,r.timeoutErrorRetry>0?(l.push(Ei("timeout, retry")),T(p()(p()({},r),{},{retryType:bi.Timeout,tryCount:u-1,timeoutErrorRetry:f-1}))):(l.push(Ei("timeout, abort")),_(dn({errCode:sn.SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:"(callId: ".concat(a,") (trace: ").concat(ki(l),")")},Pi)));case 13:case"end":return t.stop()}}),t)}))),e.appConfig.clientPollTimeout||xi),A=function(e){var t=e.data;t&&t.baseresponse&&t.baseresponse.stat&&t.baseresponse.stat.qbase_cost_time&&(n.context.tunnelTimeNoCSNetCost+=t.baseresponse.stat.qbase_cost_time)},!h.reached){t.next=15;break}return t.abrupt("return");case 15:e.request(p()(p()({},n.config),{},{apiName:"tcbapi_call_container",serviceName:e.name,serializedReqData:I,env:n.config&&n.config.env||e.env})).then(P).catch((function(e){S||h.reached||(E(),e&&e.operateWXDataFail&&d>0?(l.push(Ei("system error (".concat(e,"), retry"))),T(p()(p()({},r),{},{retryType:bi.Error,tryCount:u-1,systemErrorRetry:d-1}))):(l.push(Ei("system error (".concat(e,"), abort"))),_(dn("".concat(e," (callId: ").concat(a,") (trace: ").concat(ki(l),")"),Pi))))}));case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)},T=function(e){return E.apply(this,arguments)},C=function(){return(C=g()(w().mark((function t(n,r,i,o){var a,s,c;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=!1,n.hasOwnProperty("timeout")&&(s=new Promise((function(e,t){setTimeout((function(){a=!0,t("timeout (options.timeout == ".concat(n.timeout,")"))}),n.timeout)}))),c=new Promise((function(t,c){var u=[Ei("start")],l=k(u,t,c),d=l.resolve,f=l.reject;T({param:n,data:r,dataType:i,callID:o,action:yi.CALL,retryType:bi.None,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,userTimeout:{get reached(){return!!s&&a}},trace:u,resolve:d,reject:f})})),t.abrupt("return",s?Promise.race([c,s]):c);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)},S=function(e,t,n,r){return C.apply(this,arguments)},!n.shouldSerialize){t.next=10;break}return t.next=8,n.cdnMapPromise;case 8:o=t.sent,n.data=yr(n.data,o);case 10:if(a=wi.RAW,s=(null===(r=n.method)||void 0===r?void 0:r.toUpperCase())||"GET",!n.data||!/^(POST|PUT|PATCH)$/.test(s)){t.next=43;break}if("object"!==(c=zt(n.data))){t.next=28;break}if(!n.isReqHeaderContentTypeJSON){t.next=19;break}n.data=JSON.stringify(n.data),t.next=26;break;case 19:if(!n.isReqHeaderContentTypeURLEncoded){t.next=25;break}for(l in u="",n.data)u+="".concat(u.length?"&":"").concat(encodeURIComponent(l),"=").concat(encodeURIComponent(n.data[l]));n.data=u,t.next=26;break;case 25:throw new Error("input data cannnot be serialized");case 26:t.next=41;break;case 28:if("arraybuffer"!==c&&"string"!==c){t.next=40;break}if(d=!1,"string"===c?d=n.data.length>Ai:n.data.byteLength>Ai||(f=Vr(n.data)).length>Ai?d=!0:(n.data=f,a=wi.BASE64),!d){t.next=38;break}throw new Error("input data size too large (> 100KB)");case 35:h=t.sent,n.data=h.fileUrl,a=wi.CDN_URL;case 38:t.next=41;break;case 40:throw new Error("input data type is not supported: ".concat(c));case 41:t.next=44;break;case 43:if("GET"===s&&n.data&&Yt(n.data)){for(v in n.data)_="&".concat(v,"=").concat(n.data[v]),n.path+="".concat(n.path.includes("?")?"&":"?").concat(_);n.data=void 0}else n.data=void 0;case 44:for(y in m="".concat(+new Date,"-").concat(Math.random()),n.header=p()(p()({},n.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(i=n.config)||void 0===i?void 0:i.env)||e.env,"X-WX-CONTAINER-PATH":n.path}),n.header)null!==n.header[y]&&void 0!==n.header[y]&&(n.header[y]+="");return n.context.tunnelStartTime=+new Date,t.next=50,S(n,n.data,a,m);case 50:return b=t.sent,I=b.result,n.context.tunnelEndTime=+new Date,t.abrupt("return",p()(p()({},I),{},{errMsg:vr(Pi),callID:m}));case 54:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)};var t}(e)),n}return function(e){var t=+new Date;On(e,"object");var n=Ln(e);return n.data||(n.data={}),n.dataType||(n.dataType="json"),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,n.stats={},Pn(n)?function(e){En({apiName:Di,param:e}),a(e).then((function(t){xn(Di,e,t)})).catch((function(t){An(Di,e,t)}))}(n):a(n)};function o(t){var n;if(On(t,{path:"string"}),e.isInstance){if(!e.env)throw new Error("envId must be provided")}else if(null!==(n=t.config)&&void 0!==n&&n.env)On(t.config.env,"string");else if(!e.env)throw new Error("envId must be provided")}function a(e){return s.apply(this,arguments)}function s(){return(s=g()(w().mark((function t(n){var a,s,u,l,d,f,h,g;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(s in t.prev=0,o(n),n.header||(n.header={}),n.dataType||(n.dataType="json"),n.responseType||(n.responseType="text"),a=!1,n.header)"content-type"===s.toLowerCase()&&(a=!0,"application/json"===n.header[s]&&(n.isReqHeaderContentTypeJSON=!0),"application/x-www-form-urlencoded"===n.header[s]&&(n.isReqHeaderContentTypeURLEncoded=!0));return a||(n.header["content-type"]="application/json",n.isReqHeaderContentTypeJSON=!0),/post|put|patch/i.test(n.method||"")&&n.data&&n.isReqHeaderContentTypeJSON&&(u=zt(n.data),n.shouldSerialize="string"!==u),n.cdnMapPromise=n.shouldSerialize?ni(n.data):Promise.resolve(new Map),l=Date.now(),d=c(n)?r()(n):i()(n),n.cdnMapPromise.then((function(t){try{di(d,(function(){var r;return{url:"wx.cloud.callContainer".concat(n.path),headers:{Env:e.isInstance?e.env:(null===(r=n.config)||void 0===r?void 0:r.env)||e.env},reqBody:yr(n.data,t),timestampMs:l,console:e.debug}}))}catch(t){di(d,(function(){var t;return{url:"wx.cloud.callContainer".concat(n.path),headers:{Env:e.isInstance?e.env:(null===(t=n.config)||void 0===t?void 0:t.env)||e.env},reqBody:yr(n.data),timestampMs:l,console:e.debug}}))}})),t.next=15,d;case 15:return f=t.sent,t.abrupt("return",f);case 19:throw t.prev=19,t.t0=t.catch(0),ln(t.t0,Di);case 22:return t.prev=22,ur(p()(p()({},n.context),{},{apiEndTime:+new Date,apiName:Di})),n.stats.hasOwnProperty("decodeBody")&&(h=Boolean(n.stats.profile),g=n.stats.profile||{},fr(22601,2,[n.stats.callid,n.context.apiStartTime,Date.now(),n.stats.serverStartTs,n.stats.serverEndTs,n.stats.requestBodyBytes,n.stats.responseBodyBytes,n.stats.getServiceEndpoint,n.stats.queryDNS,n.stats.compress,n.stats.loadAsmcrypto,n.stats.encrypt,n.stats.httpRequest,n.stats.decrypt,n.stats.uncompress,n.stats.decodePb,n.stats.decodeBody,n.stats.ip,g.redirectStart,h?g.redirectEnd-g.redirectStart:void 0,g.fetchStart,g.domainLookupStart,h?g.domainLookupEnd-g.domainLookupStart:void 0,g.connectStart,h?g.connectEnd-g.connectStart:void 0,g.SSLconnectionStart,h?g.SSLconnectionEnd-g.SSLconnectionStart:void 0,g.requestStart,h?g.requestEnd-g.requestStart:void 0,g.responseStart,h?g.responseEnd-g.responseStart:void 0,g.rtt,g.estimate_nettype,g.httpRttEstimate,g.transportRttEstimate,g.downstreamThroughputKbpsEstimate,g.throughputKbps,g.peerIP,g.port,h?g.socketReused?1:0:void 0,g.sendBytesCount,g.receivedBytedCount,g.protocol,jr().system].join(","))),t.finish(22);case 26:case"end":return t.stop()}}),t,null,[[0,19,22,26]])})))).apply(this,arguments)}function c(e){return 1===e.apiVersion}}function Ni(e){return{callContainer:Oi(e)}}var Ri="container";function Mi(e){e.registerService(function(e){var t={name:Ri,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,get debug(){return e.debug},get appid(){return e.isInstance?e.instanceOptions.resourceAppid:void 0},get env(){return e.getEnvForService(Ri)},appConfig:{get maxPollRetry(){return e.appConfig.call_container_poll_max_retry},get clientPollTimeout(){return e.appConfig.call_container_client_poll_timeout},get maxStartRetryGap(){return e.appConfig.call_container_valid_start_retry_gap}}};return{name:Ri,context:t,getAPIs:Ni.bind(null,t)}}(e))}const Li={};var Bi={env:"",platform:""},Fi=function(){return Bi};if(void 0!==__wxConfig)Bi.env="miniprogram",Bi.platform=__wxConfig.platform;else if(Bi.env="web",window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment)Bi.platform="miniprogram";else{var ji=window.navigator.userAgent.toLowerCase();/MicroMessenger/i.test(ji)&&(Bi.platform="wxweb")}var Wi="cloud.uploadFile";function Ui(e){return function(e){if(Pn(e=Ln(e)))return function(e){var n={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),i={apiStartTime:+new Date};return t(p()(p()({},e),{},{context:n,timing:i,uploadTaskAgent:r})).then((function(t){xn(Wi,e,t)})).catch((function(t){An(Wi,e,t)})),r}(e);var n={apiStartTime:+new Date};return t(p()(p()({},e),{},{timing:n}))};function t(e){return new Promise((t=g()(w().mark((function t(r,a){var s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i(e),e.filePath&&o(e.filePath),!e.context){t.next=7;break}if(e.context.abort=function(){a(ln({errMsg:"abort"},Wi))},!e.context.aborted){t.next=7;break}return t.abrupt("return",a(ln({errMsg:"abort"},Wi)));case 7:return t.next=9,n(e);case 9:s=t.sent,r(s),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),a(ln(t.t0,Wi));case 16:return t.prev=16,ur(p()(p()({},e.timing),{},{apiEndTime:+new Date,apiName:"cloud.uploadFile_v2"})),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])}))),function(e,n){return t.apply(this,arguments)}));var t}function n(e){return r.apply(this,arguments)}function r(){return(r=g()(w().mark((function t(n){var r,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Gn(e.identifiers),t.next=3,s(n);case 3:return i=t.sent,t.abrupt("return",new Promise((function(e,t){if(n.context&&n.context.aborted)return t(ln({errMsg:"abort"},Wi));var o,a;if("web"===Fi().env){var s=new FormData;s.append("key",n.cloudPath),s.append("signature",i.authorization),s.append("x-cos-security-token",i.token),s.append("x-cos-meta-fileid",i.cos_file_id),s.append("file",n.file),o={url:i.url,timeout:n.timeout,filePath:"",header:n.header,name:"",formData:s}}else o={url:i.url,timeout:n.timeout,filePath:n.filePath,header:n.header,name:"file",formData:{key:n.cloudPath,signature:i.authorization,"x-cos-security-token":i.token,"x-cos-meta-fileid":i.cos_file_id}};(a=r._uploadFileSkipCheckDomain(p()(p()({},o),{},{success:function(n){try{if(n.statusCode>=200&&n.statusCode<300)e({errMsg:vr(Wi),fileID:i.file_id,statusCode:n.statusCode});else{var r=new cn({errMsg:"status ".concat(n.statusCode,", error: ").concat(n.data,";")});t(r)}}catch(r){var o=new cn({errMsg:"Error : ".concat(n.data,";")});t(o)}},fail:function(e){t(e)}})))&&(a.onProgressUpdate((function(){n.uploadTaskAgent&&n.context&&n.context.onProgressUpdateUserHandler&&Xt(n.context.onProgressUpdateUserHandler)&&n.context.onProgressUpdateUserHandler.apply(r._uploadFileSkipCheckDomain,arguments)})),n.context&&(n.context.abort=a.abort.bind(a)))})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(e){On(e,{cloudPath:"string"}),"miniprogram"===Fi().env?On(e,{filePath:"string"}):Nn(e,"file","uploadFile")}function o(e){return a.apply(this,arguments)}function a(){return(a=g()(w().mark((function t(n){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){wx.getFileInfo?wx.getFileInfo({filePath:n,success:function(n){n.size>e.appConfig.uploadMaxFileSize?r(new cn({errCode:sn.SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE,errMsg:"exceed max upload file size: ".concat(e.appConfig.uploadMaxFileSize/1024/1024," MB")})):t()},fail:function(){t()}}):t()})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(e){return c.apply(this,arguments)}function c(){return(c=g()(w().mark((function t(n){var r,i,o,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.stringify({path:n.cloudPath}),i=+new Date,t.next=4,e.request({apiName:"tcbapi_cos_uploadfile",serviceName:e.name,serializedReqData:r,env:n.config&&n.config.env||e.env});case 4:if(o=t.sent,a=o.data,n.timing&&(n.timing.tunnelStartTime=i,n.timing.tunnelEndTime=+new Date,n.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time),!a.url){t.next=10;break}t.next=11;break;case 10:throw new cn({errCode:sn.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL,errMsg:sn[sn.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL]});case 11:return t.abrupt("return",a);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}var Vi="cloud.downloadFile";function Gi(e){return function(e){if(Pn(e=Ln(e)))return function(e){var n={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),i={apiStartTime:+new Date};return t(p()(p()({},e),{},{context:n,timing:i,downloadTaskAgent:r})).then((function(t){xn(Vi,e,t)})).catch((function(t){An(Vi,e,t)})),r}(e);var n={apiStartTime:+new Date};return t(p()(p()({},e),{},{timing:n}))};function t(e){return n.apply(this,arguments)}function n(){return(n=g()(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=g()(w().mark((function e(n,o){var a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r(t),!t.context){e.next=6;break}if(t.context.abort=function(){o(ln({errMsg:"abort"},Vi))},!t.context.aborted){e.next=6;break}return e.abrupt("return",o(ln({errMsg:"abort"},Vi)));case 6:return e.next=8,i(t);case 8:a=e.sent,n(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),o(ln(e.t0,Vi));case 15:return e.prev=15,ur(p()(p()({},t.timing),{},{apiEndTime:+new Date,apiName:Vi})),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,12,15,18]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function r(e){On(e,{fileID:"string"}),e.config&&e.config.env&&On(e.config.env,"string")}function i(e){return o.apply(this,arguments)}function o(){return(o=g()(w().mark((function t(n){var r,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Gn(e.identifiers),t.next=3,a(n);case 3:return i=t.sent,t.abrupt("return",new Promise((function(e,t){if(n.context&&n.context.aborted)return t(ln({errMsg:"abort"},Vi));var o=r._downloadFileSkipCheckDomain({url:i,success:function(t){e(t)},fail:function(e){t(e)}});o&&(o.onProgressUpdate((function(){n.downloadTaskAgent&&n.context&&n.context.onProgressUpdateUserHandler&&Xt(n.context.onProgressUpdateUserHandler)&&n.context.onProgressUpdateUserHandler.apply(r._downloadFileSkipCheckDomain,arguments)})),n.context&&(n.context.abort=o.abort.bind(o)))})));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function a(e){return s.apply(this,arguments)}function s(){return(s=g()(w().mark((function t(n){var r,i,o,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.stringify({fileid:n.fileID}),i=+new Date,t.next=4,e.request({apiName:"tcbapi_downloadfile",serviceName:e.name,serializedReqData:r,env:n.config&&n.config.env||e.env});case 4:if(o=t.sent,a=o.data,n.timing&&(n.timing.tunnelStartTime=i,n.timing.tunnelEndTime=+new Date,n.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time),!a.download_url){t.next=11;break}a.download_url.indexOf("?")>-1?a.download_url+="&skip_domain_check=true":a.download_url+="?skip_domain_check=true",t.next=12;break;case 11:throw new cn({errCode:sn.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL,errMsg:sn[sn.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL]});case 12:return t.abrupt("return",a.download_url);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}var Hi="cloud.getTempFileURL";function Zi(e){return function(e){var t=Ln(e);return t.timing={apiStartTime:+new Date},Pn(t)?function(e){n(e).then((function(t){xn(Hi,e,t)})).catch((function(t){An(Hi,e,t)}))}(t):n(t)};function t(t){if(On(t,{fileList:"array"}),t.config&&t.config.env&&On(t.config.env,"string"),e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new cn({errCode:sn.SDK_API_PARAMETER_ERROR,errMsg:"parameter.fileList exceed max length ".concat(e.appConfig.getTempFileURLMaxReq)})}function n(e){return r.apply(this,arguments)}function r(){return(r=g()(w().mark((function e(n){var r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t(n),n.fileList.length){e.next=4;break}return e.abrupt("return",{errMsg:vr(Hi),fileList:[]});case 4:return e.next=6,i(n);case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),ln(e.t0,Hi);case 13:return e.prev=13,ur(p()(p()({},n.timing),{},{apiEndTime:+new Date,apiName:Hi})),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))).apply(this,arguments)}function i(e){return o.apply(this,arguments)}function o(){return(o=g()(w().mark((function t(n){var r,i,o,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={file_list:n.fileList.map((function(e){return Kt(e)?{fileid:e}:{fileid:e.fileID,max_age:e.maxAge}}))},i=JSON.stringify(r),n.timing.tunnelStartTime=+new Date,t.next=5,e.request({apiName:"tcbapi_gettempfileurl",serviceName:e.name,serializedReqData:i,env:n.config&&n.config.env||e.env});case 5:return o=t.sent,n.timing.tunnelEndTime=+new Date,a=o.data,n.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time,t.abrupt("return",{errMsg:vr(Hi),fileList:a.download_list.map((function(e){return{fileID:e.fileid,tempFileURL:e.download_url,maxAge:e.max_age,status:e.status,errMsg:e.errmsg}}))});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}var qi="cloud.deleteFile";function zi(e){return function(e){var t=Ln(e);return t.timing={apiStartTime:+new Date},Pn(t)?function(e){n(e).then((function(t){xn(qi,e,t)})).catch((function(t){An(qi,e,t)}))}(t):n(t)};function t(t){On(t,{fileList:"array"}),t.config&&t.config.env&&On(t.config.env,"string");for(var n=0,r=t.fileList.length;n<r;n++)On(t.fileList[n],"string","parameter.fileList[".concat(n,"]"));if(e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new cn({errCode:sn.SDK_API_PARAMETER_ERROR,errMsg:"parameter.fileList exceed max length ".concat(e.appConfig.getTempFileURLMaxReq)})}function n(e){return r.apply(this,arguments)}function r(){return(r=g()(w().mark((function e(n){var r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t(n),n.fileList.length){e.next=4;break}return e.abrupt("return",{errMsg:vr(qi),fileList:[]});case 4:return e.next=6,i(n);case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),ln(e.t0,qi);case 13:return e.prev=13,ur(p()(p()({},n.timing),{},{apiEndTime:+new Date,apiName:qi})),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))).apply(this,arguments)}function i(e){return o.apply(this,arguments)}function o(){return(o=g()(w().mark((function t(n){var r,i,o,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={fileid_list:n.fileList},i=JSON.stringify(r),n.timing.tunnelStartTime=+new Date,t.next=5,e.request({apiName:"tcbapi_deletefile",serviceName:e.name,serializedReqData:i,env:n.config&&n.config.env||e.env});case 5:return o=t.sent,n.timing.tunnelEndTime=+new Date,a=o.data,n.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time,t.abrupt("return",{errMsg:vr(qi),fileList:a.delete_list.map((function(e){return{fileID:e.fileid,status:e.status,errMsg:e.errmsg}}))});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}function Yi(e){return{uploadFile:Ui(e),downloadFile:Gi(e),getTempFileURL:Zi(e),deleteFile:zi(e)}}var Ki="storage";function Ji(e){e.registerService(function(e){var t={name:Ki,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get env(){return e.getEnvForService(Ki)},get debug(){return e.debug},appConfig:{get uploadMaxFileSize(){return e.appConfig.upload_max_file_size},get getTempFileURLMaxReq(){return e.appConfig.get_temp_file_url_max_requests}}};return{name:Ki,context:t,getAPIs:Yi.bind(null,t)}}(e))}var $i,Xi=Symbol.for("UNSET_FIELD_NAME"),Qi=Symbol.for("AGGREGATE"),eo=Symbol.for("AGGREGATE_PIPELINE"),to=Symbol.for("AGGREGATE_PIPELINE_STAGE"),no=Symbol.for("UPDATE_COMMAND"),ro=Symbol.for("QUERY_COMMAND"),io=Symbol.for("LOGIC_COMMAND"),oo=Symbol.for("AGGREGATE_COMMAND"),ao=Symbol.for("PROJECT_COMMAND"),so=Symbol.for("GEO_POINT"),co=Symbol.for("GEO_LINESTRING"),uo=Symbol.for("GEO_POLYGON"),lo=Symbol.for("GEO_MULTIPOINT"),fo=Symbol.for("GEO_MULTILINESTRING"),po=Symbol.for("GEO_MULTIPOLYGON"),ho=Symbol.for("SERVER_DATE"),go=Symbol.for("REGEXP");!function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"}($i||($i={}));var vo=[$i.AND,$i.OR,$i.NOT,$i.NOR],_o=new Set(vo),mo=function(){function e(t,n,r){_()(this,e),this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=io,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=n,this.fieldName=r||Xi}return y()(e,[{key:"_setFieldName",value:function(t){var n=this.operands.map((function(e){return e===$i.AND||e===$i.OR?e._setFieldName(t):e}));return new e(this.operator,n,t)}},{key:"and",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Nn(arguments[0],"expressions","and");var i=Qt(arguments[0])?arguments[0]:Array.from(arguments);return i.unshift(this),new e($i.AND,i,this.fieldName)}},{key:"or",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Nn(arguments[0],"expressions","or");var i=Qt(arguments[0])?arguments[0]:Array.from(arguments);return i.unshift(this),new e($i.OR,i,this.fieldName)}},{key:"nor",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Nn(arguments[0],"expressions","nor");var i=Qt(arguments[0])?arguments[0]:Array.from(arguments);return i.unshift(this),new e($i.NOR,i,this.fieldName)}},{key:"not",value:function(t){return Nn(t,"expression","not"),new e($i.NOT,[t],this.fieldName)}},{key:"toJSON",value:function(){}}]),e}();function yo(e){return e&&e instanceof mo&&e._internalType===io}var bo;!function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects",e.EXISTS="exists",e.MOD="mod",e.ALL="all",e.ELEM_MATCH="elemMatch",e.SIZE="size",e.EXPR="expr"}(bo||(bo={}));var wo=[bo.EQ,bo.NEQ,bo.GT,bo.GTE,bo.LT,bo.LTE,bo.IN,bo.NIN,bo.GEO_NEAR,bo.GEO_WITHIN,bo.GEO_INTERSECTS,bo.EXISTS,bo.MOD,bo.ALL,bo.ELEM_MATCH,bo.SIZE],Io=new Set(wo),So=(new Set([].concat(mr()(Io),mr()(_o))),function(e){u()(n,e);var t=d()(n);function n(e,r,i){var o;return _()(this,n),(o=t.call(this,e,r,i)).operator=void 0,o.__safe_props__=void 0,o.operator=e,o._internalType=ro,o}return y()(n,[{key:"_setFieldName",value:function(e){return new n(this.operator,this.operands,e)}},{key:"eq",value:function(e){var t=new n(bo.EQ,[e],this.fieldName);return this.and(t)}},{key:"neq",value:function(e){var t=new n(bo.NEQ,[e],this.fieldName);return this.and(t)}},{key:"gt",value:function(e){var t=new n(bo.GT,[e],this.fieldName);return this.and(t)}},{key:"gte",value:function(e){var t=new n(bo.GTE,[e],this.fieldName);return this.and(t)}},{key:"lt",value:function(e){var t=new n(bo.LT,[e],this.fieldName);return this.and(t)}},{key:"lte",value:function(e){var t=new n(bo.LTE,[e],this.fieldName);return this.and(t)}},{key:"in",value:function(e){On(e,"array");var t=new n(bo.IN,e,this.fieldName);return this.and(t)}},{key:"nin",value:function(e){On(e,"array");var t=new n(bo.NIN,e,this.fieldName);return this.and(t)}},{key:"geoNear",value:function(e){var t=new n(bo.GEO_NEAR,[e],this.fieldName);return this.and(t)}},{key:"geoWithin",value:function(e){var t=new n(bo.GEO_WITHIN,[e],this.fieldName);return this.and(t)}},{key:"geoIntersects",value:function(e){var t=new n(bo.GEO_INTERSECTS,[e],this.fieldName);return this.and(t)}},{key:"exists",value:function(e){var t=new n(bo.EXISTS,[e],this.fieldName);return this.and(t)}},{key:"mod",value:function(e,t){var r=new n(bo.MOD,[e,t],this.fieldName);return this.and(r)}},{key:"all",value:function(e){var t=new n(bo.ALL,e,this.fieldName);return this.and(t)}},{key:"elemMatch",value:function(e){var t=new n(bo.ELEM_MATCH,[e],this.fieldName);return this.and(t)}},{key:"size",value:function(e){var t=new n(bo.SIZE,[e],this.fieldName);return this.and(t)}}]),n}(mo));function Co(e){return e&&e instanceof So&&e._internalType===ro}var To;!function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.MIN="min",e.MAX="max",e.RENAME="rename",e.BIT="bit",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.PULL="pull",e.PULL_ALL="pullAll"}(To||(To={}));new Set([To.SET,To.REMOVE,To.INC,To.MUL,To.MIN,To.MAX,To.RENAME,To.BIT,To.PUSH,To.POP,To.SHIFT,To.UNSHIFT,To.ADD_TO_SET,To.PULL,To.PULL_ALL]);var Eo=function(){function e(t,n,r){_()(this,e),this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=no,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=n,this.fieldName=r||Xi}return y()(e,[{key:"_setFieldName",value:function(t){return new e(this.operator,this.operands,t)}},{key:"toJSON",value:function(){}}]),e}();function ko(e){return e&&e instanceof Eo&&e._internalType===no}var xo;!function(e){e.ABS="abs",e.ADD="add",e.ADDTOSET="addToSet",e.ALLELEMENTSTRUE="allElementsTrue",e.AND="and",e.ANYELEMENTTRUE="anyElementTrue",e.ARRAYELEMAT="arrayElemAt",e.ARRAYTOOBJECT="arrayToObject",e.AVG="avg",e.CEIL="ceil",e.CMP="cmp",e.CONCAT="concat",e.CONCATARRAYS="concatArrays",e.COND="cond",e.CONVERT="convert",e.DATEFROMPARTS="dateFromParts",e.DATETOPARTS="dateToParts",e.DATEFROMSTRING="dateFromString",e.DATETOSTRING="dateToString",e.DAYOFMONTH="dayOfMonth",e.DAYOFWEEK="dayOfWeek",e.DAYOFYEAR="dayOfYear",e.DIVIDE="divide",e.EQ="eq",e.EXP="exp",e.FILTER="filter",e.FIRST="first",e.FLOOR="floor",e.GT="gt",e.GTE="gte",e.HOUR="hour",e.IFNULL="ifNull",e.IN="in",e.INDEXOFARRAY="indexOfArray",e.INDEXOFBYTES="indexOfBytes",e.INDEXOFCP="indexOfCP",e.ISARRAY="isArray",e.ISODAYOFWEEK="isoDayOfWeek",e.ISOWEEK="isoWeek",e.ISOWEEKYEAR="isoWeekYear",e.LAST="last",e.LET="let",e.LITERAL="literal",e.LN="ln",e.LOG="log",e.LOG10="log10",e.LT="lt",e.LTE="lte",e.LTRIM="ltrim",e.MAP="map",e.MAX="max",e.MERGEOBJECTS="mergeObjects",e.META="meta",e.MIN="min",e.MILLISECOND="millisecond",e.MINUTE="minute",e.MOD="mod",e.MONTH="month",e.MULTIPLY="multiply",e.NEQ="ne",e.NOT="not",e.OBJECTTOARRAY="objectToArray",e.OR="or",e.POW="pow",e.PUSH="push",e.RANGE="range",e.REDUCE="reduce",e.REVERSEARRAY="reverseArray",e.RTRIM="rtrim",e.SECOND="second",e.SETDIFFERENCE="setDifference",e.SETEQUALS="setEquals",e.SETINTERSECTION="setIntersection",e.SETISSUBSET="setIsSubset",e.SETUNION="setUnion",e.SIZE="size",e.SLICE="slice",e.SPLIT="split",e.SQRT="sqrt",e.STDDEVPOP="stdDevPop",e.STDDEVSAMP="stdDevSamp",e.STRCASECMP="strcasecmp",e.STRLENBYTES="strLenBytes",e.STRLENCP="strLenCP",e.SUBSTR="substr",e.SUBSTRBYTES="substrBytes",e.SUBSTRCP="substrCP",e.SUBTRACT="subtract",e.SUM="sum",e.SWITCH="switch",e.TOBOOL="toBool",e.TODATE="toDate",e.TODECIMAL="toDecimal",e.TODOUBLE="toDouble",e.TOINT="toInt",e.TOLONG="toLong",e.TOOBJECTID="toObjectId",e.TOSTRING="toString",e.TOLOWER="toLower",e.TOUPPER="toUpper",e.TRIM="trim",e.TRUNC="trunc",e.TYPE="type",e.WEEK="week",e.YEAR="year",e.ZIP="zip"}(xo||(xo={}));xo.ABS,xo.ADD,xo.ADDTOSET,xo.ALLELEMENTSTRUE,xo.AND,xo.ANYELEMENTTRUE,xo.ARRAYELEMAT,xo.ARRAYTOOBJECT,xo.AVG,xo.CEIL,xo.CMP,xo.CONCAT,xo.CONCATARRAYS,xo.COND,xo.CONVERT,xo.DATEFROMPARTS,xo.DATETOPARTS,xo.DATEFROMSTRING,xo.DATETOSTRING,xo.DAYOFMONTH,xo.DAYOFWEEK,xo.DAYOFYEAR,xo.DIVIDE,xo.EQ,xo.EXP,xo.FILTER,xo.FIRST,xo.FLOOR,xo.GT,xo.GTE,xo.HOUR,xo.IFNULL,xo.IN,xo.INDEXOFARRAY,xo.INDEXOFBYTES,xo.INDEXOFCP,xo.ISARRAY,xo.ISODAYOFWEEK,xo.ISOWEEK,xo.ISOWEEKYEAR,xo.LAST,xo.LET,xo.LITERAL,xo.LN,xo.LOG,xo.LOG10,xo.LT,xo.LTE,xo.LTRIM,xo.MAP,xo.MAX,xo.MERGEOBJECTS,xo.META,xo.MIN,xo.MILLISECOND,xo.MINUTE,xo.MOD,xo.MONTH,xo.MULTIPLY,xo.NEQ,xo.NOT,xo.OBJECTTOARRAY,xo.OR,xo.POW,xo.PUSH,xo.RANGE,xo.REDUCE,xo.REVERSEARRAY,xo.RTRIM,xo.SECOND,xo.SETDIFFERENCE,xo.SETEQUALS,xo.SETINTERSECTION,xo.SETISSUBSET,xo.SETUNION,xo.SIZE,xo.SLICE,xo.SPLIT,xo.SQRT,xo.STDDEVPOP,xo.STDDEVSAMP,xo.STRCASECMP,xo.STRLENBYTES,xo.STRLENCP,xo.SUBSTR,xo.SUBSTRBYTES,xo.SUBSTRCP,xo.SUBTRACT,xo.SUM,xo.SWITCH,xo.TOBOOL,xo.TODATE,xo.TODECIMAL,xo.TODOUBLE,xo.TOINT,xo.TOLONG,xo.TOOBJECTID,xo.TOSTRING,xo.TOLOWER,xo.TOUPPER,xo.TRIM,xo.TRUNC,xo.TYPE,xo.WEEK,xo.YEAR,xo.ZIP;var Ao=function(){function e(t,n,r){_()(this,e),this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=oo,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=t,this.operands=n,this.fieldName=r||Xi}return y()(e,[{key:"_setFieldName",value:function(t){return new e(this.operator,this.operands,t)}}]),e}();function Po(e){return e&&e instanceof Ao&&e._internalType===oo}var Do;!function(e){e.SLICE="slice"}(Do||(Do={}));new Set([Do.SLICE]);var Oo=function(){function e(t,n,r){_()(this,e),this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this.__safe_props__=void 0,this._internalType=ao,this.operator=t,this.operands=n,this.fieldName=r||Xi}return y()(e,[{key:"_setFieldName",value:function(t){return new e(this.operator,this.operands,t)}}]),e}();function No(e){return e&&e instanceof Oo&&e._internalType===ao}var Ro,Mo,Lo;function Bo(e){return Fo.apply(this,arguments)}function Fo(){return(Fo=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.env,r=t.collectionName,i=t.data,o=t.instanceContext,a=t.timing,Rn({input:s=JSON.stringify(i),max:o.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:"".concat((o.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)," KB")}),c={collection_name:r,data:s},u=JSON.stringify(c),a.tunnelStartTime=+new Date,e.next=8,o.serviceContext.request({apiName:"tcbapi_db_adddocument",serviceName:o.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:n||o.serviceContext.env});case 8:return l=e.sent,a.tunnelEndTime=+new Date,d=l.data,a.tunnelTimeNoCSNetCost=d.baseresponse.stat.qbase_cost_time,e.abrupt("return",{_id:d._id_type===Mo.NUMBER?d._id_number:d._id});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(e){return Wo.apply(this,arguments)}function Wo(){return(Wo=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.collectionName,r=t.query,i=t.options,o=t.instanceContext,a=t.timing,s=t.env,c=Xr()?t.explain:void 0,u=i&&i.multi,l=JSON.stringify({collection_name:n,query:JSON.stringify(r),multi:u,query_type:u?Ro.WHERE:Ro.DOC,explain:c}),a.tunnelStartTime=+new Date,e.next=7,o.serviceContext.request({apiName:"tcbapi_db_deletedocument",serviceName:o.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:s||o.serviceContext.env});case 7:if(d=e.sent,a.tunnelEndTime=+new Date,!c){e.next=12;break}return f=__webpack_require__(154),p=f.EJSON,e.abrupt("return",p.deserialize(d.data));case 12:return h=d.data,a.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time,e.abrupt("return",{removed:h.deleted});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(e){return Vo.apply(this,arguments)}function Vo(){return(Vo=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h,g,v,_;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.env,r=t.collectionName,i=t.query,o=t.options,a=void 0===o?{}:o,s=t.instanceContext,c=t.timing,u=t.queryType,l=Xr()?t.explain:void 0,d={collection_name:r,query:JSON.stringify(i),query_type:u,explain:l},a.offset&&(d.offset=a.offset),a.limit&&(d.limit=a.limit),a.order&&(d.order=a.order),a.projection&&(d.projection=JSON.stringify(a.projection)),f=JSON.stringify(d),c.tunnelStartTime=+new Date,e.next=11,s.serviceContext.request({apiName:"tcbapi_db_querydocument",serviceName:s.serviceContext.name,serializedReqData:f,requireDataNotEmpty:!0,env:n||s.serviceContext.env});case 11:if(p=e.sent,c.tunnelEndTime=+new Date,!l){e.next=16;break}return h=__webpack_require__(154),g=h.EJSON,e.abrupt("return",g.deserialize(p.data));case 16:return v=p.data,c.tunnelTimeNoCSNetCost=v.baseresponse.stat.qbase_cost_time,_=v.data_list?JSON.parse(v.data_list):[],_=s.engine.Decoder.decode(_),e.abrupt("return",{list:_,offset:v.offset,limit:v.limit,total:v.total});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(e){return Ho.apply(this,arguments)}function Ho(){return(Ho=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h,g,v,_,m;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.env,r=t.collectionName,i=t.query,o=t.data,a=t.options,s=void 0===a?{}:a,c=t.instanceContext,u=t.timing,l=t.queryType,d=Xr()?t.explain:void 0,Rn({input:f=JSON.stringify(o),max:c.serviceContext.appConfig.docSizeLimit,name:"update expression",maxWording:"".concat((c.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)," KB")}),(p={collection_name:r,query:JSON.stringify(i),data:f,query_type:l,explain:d}).multi=!1!==s.multi,p.merge=!1!==s.merge,s.upsert&&(p.upsert=s.upsert),h=JSON.stringify(p),u.tunnelStartTime=+new Date,e.next=12,c.serviceContext.request({apiName:"tcbapi_db_updatedocument",serviceName:c.serviceContext.name,serializedReqData:h,requireDataNotEmpty:!0,env:n||c.serviceContext.env});case 12:if(g=e.sent,u.tunnelEndTime=+new Date,!d){e.next=17;break}return v=__webpack_require__(154),_=v.EJSON,e.abrupt("return",_.deserialize(g.data));case 17:return m=g.data,u.tunnelTimeNoCSNetCost=m.baseresponse.stat.qbase_cost_time,e.abrupt("return",{updated:m.updated});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(){return(Zo=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.env,r=t.collectionName,i=t._id,o=t.data,a=t.options,void 0===a?{}:a,s=t.instanceContext,c=t.timing,Rn({input:u=JSON.stringify(o),max:s.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:"".concat((s.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)," KB")}),l=Jt(i),d={collection_name:r,_id_type:l?Mo.NUMBER:Mo.STRING,data:u},l?d._id_number=i:d._id=i,f=JSON.stringify(d),c.tunnelStartTime=+new Date,e.next=10,s.serviceContext.request({apiName:"tcbapi_db_setdocument",serviceName:s.serviceContext.name,serializedReqData:f,requireDataNotEmpty:!0,env:n||s.serviceContext.env});case 10:return p=e.sent,c.tunnelEndTime=+new Date,h=p.data,c.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time,e.abrupt("return",{_id:h._id_type===Mo.NUMBER?h._id_number:h._id,updated:h._id?0:1,created:h._id?1:0});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qo(){return(qo=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.env,r=t.collectionName,i=t.query,o=t.instanceContext,a=t.timing,s=Xr()?t.explain:void 0,c={collection_name:r,query:JSON.stringify(i),query_type:Ro.WHERE,explain:s},u=JSON.stringify(c),a.tunnelStartTime=+new Date,e.next=7,o.serviceContext.request({apiName:"tcbapi_db_countdocument",serviceName:o.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:n||o.serviceContext.env});case 7:if(l=e.sent,a.tunnelEndTime=+new Date,!s){e.next=12;break}return d=__webpack_require__(154),f=d.EJSON,e.abrupt("return",f.deserialize(l.data));case 12:return p=l.data,a.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,e.abrupt("return",{total:p.total});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zo(e){return Yo.apply(this,arguments)}function Yo(){return(Yo=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h,g;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.env,r=t.collectionName,i=t.stages,o=t.instanceContext,a=t.timing,s=Xr()?t.explain:void 0,c={collection_name:r,stages:i.map((function(e){for(var t in e)return{stage_key:t,stage_value:JSON.stringify(e[t])};throw new Error("empty encoded stage (".concat(JSON.stringify(e),")"))})),explain:s},u=JSON.stringify(c),a.tunnelStartTime=+new Date,e.next=7,o.serviceContext.request({apiName:"tcbapi_db_aggregate",serviceName:o.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:n||o.serviceContext.env});case 7:if(l=e.sent,a.tunnelEndTime=+new Date,!s){e.next=12;break}return d=__webpack_require__(154),f=d.EJSON,e.abrupt("return",f.deserialize(l.data));case 12:p=l.data,a.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,e.next=18;break;case 18:return h=__webpack_require__(154),g=h.EJSON,e.abrupt("return",{list:JSON.parse(p.list).map((function(e){return g.parse(e)}))});case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ko(e,t){return Jo.apply(this,arguments)}function Jo(){return(Jo=g()(w().mark((function e(t,n){var r,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.request({apiName:"tcbapi_db_get_realtime_connection",env:n||t.env,serviceName:t.name,serializedReqData:JSON.stringify({}),requireDataNotEmpty:!0});case 2:return r=e.sent,i=r.data,e.abrupt("return",{envId:i.env_id,secretVersion:i.secret_version,signStr:i.sign_str,wsUrl:i.ws_url});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.WHERE=0]="WHERE",e[e.DOC=1]="DOC"}(Ro||(Ro={})),function(e){e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(Mo||(Mo={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(Lo||(Lo={}));var $o=function e(t,n){_()(this,e),this.stage=void 0,this.val=void 0,this._internalType=to,this.stage=t,this.val=n},Xo=function(){function e(t){_()(this,e),this._stages=void 0,this._internalType=eo,this.__safe_props__=void 0,this._stages=t}return y()(e,[{key:"pushStage",value:function(t,n){return new e([].concat(mr()(this._stages),[new $o(t,n)]))}},{key:"addFields",value:function(e){return this.pushStage("addFields",e)}},{key:"bucket",value:function(e){return this.pushStage("bucket",e)}},{key:"bucketAuto",value:function(e){return this.pushStage("bucketAuto",e)}},{key:"collStats",value:function(e){return this.pushStage("collStats",e)}},{key:"count",value:function(e){return this.pushStage("count",e)}},{key:"facet",value:function(e){return this.pushStage("facet",e)}},{key:"geoNear",value:function(e){return this.pushStage("geoNear",e)}},{key:"graphLookup",value:function(e){return this.pushStage("graphLookup",e)}},{key:"group",value:function(e){return this.pushStage("group",e)}},{key:"indexStats",value:function(){return this.pushStage("indexStats",{})}},{key:"limit",value:function(e){return this.pushStage("limit",e)}},{key:"lookup",value:function(e){return this.pushStage("lookup",e)}},{key:"match",value:function(e){return this.pushStage("match",e)}},{key:"out",value:function(e){return this.pushStage("out",e)}},{key:"project",value:function(e){return this.pushStage("project",e)}},{key:"redact",value:function(e){return this.pushStage("redact",e)}},{key:"replaceRoot",value:function(e){return this.pushStage("replaceRoot",e)}},{key:"sample",value:function(e){return this.pushStage("sample",e)}},{key:"skip",value:function(e){return this.pushStage("skip",e)}},{key:"sort",value:function(e){return this.pushStage("sort",e)}},{key:"sortByCount",value:function(e){return this.pushStage("sortByCount",e)}},{key:"unwind",value:function(e){return this.pushStage("unwind",e)}},{key:"end",value:function(){}}]),e}(),Qo=function(e){u()(n,e);var t=d()(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _()(this,n),(r=t.call(this,e))._sealed=void 0,r._sealed=i,r}return y()(n,[{key:"pushStage",value:function(e,t){if(this._sealed)throw new Error("pushing new stage is not allowed after calling 'done()'");return new n([].concat(mr()(this._stages),[new $o(e,t)]))}},{key:"done",value:function(){return new n(this._stages,!0)}}]),n}(Xo),ea=function(e){return e&&e._internalType===eo},ta=function(e){return e&&e._internalType===to},na=new Set(["each","position","slice","sort"]),ra={eq:function(e){return new So(bo.EQ,[e])},neq:function(e){return new So(bo.NEQ,[e])},lt:function(e){return new So(bo.LT,[e])},lte:function(e){return new So(bo.LTE,[e])},gt:function(e){return new So(bo.GT,[e])},gte:function(e){return new So(bo.GTE,[e])},in:function(e){return new So(bo.IN,e)},nin:function(e){return new So(bo.NIN,e)},geoNear:function(e){return new So(bo.GEO_NEAR,[e])},geoWithin:function(e){return new So(bo.GEO_WITHIN,[e])},geoIntersects:function(e){return new So(bo.GEO_INTERSECTS,[e])},and:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Qt(arguments[0])?arguments[0]:Array.from(arguments);return new mo($i.AND,r)},or:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Qt(arguments[0])?arguments[0]:Array.from(arguments);return new mo($i.OR,r)},nor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Qt(arguments[0])?arguments[0]:Array.from(arguments);return new mo($i.NOR,r)},not:function(e){return new mo($i.NOT,[e])},exists:function(e){return new So(bo.EXISTS,[e])},mod:function(e,t){return new So(bo.MOD,[e,t])},all:function(e){return new So(bo.ALL,e)},elemMatch:function(e){return new So(bo.ELEM_MATCH,[e])},size:function(e){return new So(bo.SIZE,[e])},expr:function(e){return new So(bo.EXPR,[e])},set:function(e){return new Eo(To.SET,[e])},remove:function(){return new Eo(To.REMOVE,[])},inc:function(e){return new Eo(To.INC,[e])},mul:function(e){return new Eo(To.MUL,[e])},min:function(e){return new Eo(To.MIN,[e])},max:function(e){return new Eo(To.MAX,[e])},rename:function(e){return new Eo(To.RENAME,[e])},bit:function(e){return new Eo(To.BIT,[e])},push:function(e){var t={};if(Qt(e))t.each=e;else if(Yt(e)&&Qt(e.each)){var n=Object.keys(e);if(1===n.length)t=e;else{var r,i=!1,o=Wn()(n);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(!na.has(a)){i=!0;break}}}catch(e){o.e(e)}finally{o.f()}t=i?[e]:e}}else t.each=[e];return new Eo(To.PUSH,[t])},pop:function(){return new Eo(To.POP,[])},shift:function(){return new Eo(To.SHIFT,[])},unshift:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Qt(arguments[0])?arguments[0]:Array.from(arguments);return new Eo(To.UNSHIFT,r)},addToSet:function(e){return new Eo(To.ADD_TO_SET,[e])},pull:function(e){return new Eo(To.PULL,[e])},pullAll:function(e){return new Eo(To.PULL_ALL,[e])},project:{slice:function(e){return new Oo(Do.SLICE,[e])}},aggregate:{pipeline:function(){return new Qo([])},abs:function(e){return new Ao(xo.ABS,[e])},add:function(e){return new Ao(xo.ADD,[e])},addToSet:function(e){return new Ao(xo.ADDTOSET,[e])},allElementsTrue:function(e){return new Ao(xo.ALLELEMENTSTRUE,[e])},and:function(e){return new Ao(xo.AND,[e])},anyElementTrue:function(e){return new Ao(xo.ANYELEMENTTRUE,[e])},arrayElemAt:function(e){return new Ao(xo.ARRAYELEMAT,[e])},arrayToObject:function(e){return new Ao(xo.ARRAYTOOBJECT,[e])},avg:function(e){return new Ao(xo.AVG,[e])},ceil:function(e){return new Ao(xo.CEIL,[e])},cmp:function(e){return new Ao(xo.CMP,[e])},concat:function(e){return new Ao(xo.CONCAT,[e])},concatArrays:function(e){return new Ao(xo.CONCATARRAYS,[e])},cond:function(e){return new Ao(xo.COND,[e])},convert:function(e){return new Ao(xo.CONVERT,[e])},dateFromParts:function(e){return new Ao(xo.DATEFROMPARTS,[e])},dateToParts:function(e){return new Ao(xo.DATETOPARTS,[e])},dateFromString:function(e){return new Ao(xo.DATEFROMSTRING,[e])},dateToString:function(e){return new Ao(xo.DATETOSTRING,[e])},dayOfMonth:function(e){return new Ao(xo.DAYOFMONTH,[e])},dayOfWeek:function(e){return new Ao(xo.DAYOFWEEK,[e])},dayOfYear:function(e){return new Ao(xo.DAYOFYEAR,[e])},divide:function(e){return new Ao(xo.DIVIDE,[e])},eq:function(e){return new Ao(xo.EQ,[e])},exp:function(e){return new Ao(xo.EXP,[e])},filter:function(e){return new Ao(xo.FILTER,[e])},first:function(e){return new Ao(xo.FIRST,[e])},floor:function(e){return new Ao(xo.FLOOR,[e])},gt:function(e){return new Ao(xo.GT,[e])},gte:function(e){return new Ao(xo.GTE,[e])},hour:function(e){return new Ao(xo.HOUR,[e])},ifNull:function(e){return new Ao(xo.IFNULL,[e])},in:function(e){return new Ao(xo.IN,[e])},indexOfArray:function(e){return new Ao(xo.INDEXOFARRAY,[e])},indexOfBytes:function(e){return new Ao(xo.INDEXOFBYTES,[e])},indexOfCP:function(e){return new Ao(xo.INDEXOFCP,[e])},isArray:function(e){return new Ao(xo.ISARRAY,[e])},isoDayOfWeek:function(e){return new Ao(xo.ISODAYOFWEEK,[e])},isoWeek:function(e){return new Ao(xo.ISOWEEK,[e])},isoWeekYear:function(e){return new Ao(xo.ISOWEEKYEAR,[e])},last:function(e){return new Ao(xo.LAST,[e])},let:function(e){return new Ao(xo.LET,[e])},literal:function(e){return new Ao(xo.LITERAL,[e])},ln:function(e){return new Ao(xo.LN,[e])},log:function(e){return new Ao(xo.LOG,[e])},log10:function(e){return new Ao(xo.LOG10,[e])},lt:function(e){return new Ao(xo.LT,[e])},lte:function(e){return new Ao(xo.LTE,[e])},ltrim:function(e){return new Ao(xo.LTRIM,[e])},map:function(e){return new Ao(xo.MAP,[e])},max:function(e){return new Ao(xo.MAX,[e])},mergeObjects:function(e){return new Ao(xo.MERGEOBJECTS,[e])},meta:function(e){return new Ao(xo.META,[e])},min:function(e){return new Ao(xo.MIN,[e])},millisecond:function(e){return new Ao(xo.MILLISECOND,[e])},minute:function(e){return new Ao(xo.MINUTE,[e])},mod:function(e){return new Ao(xo.MOD,[e])},month:function(e){return new Ao(xo.MONTH,[e])},multiply:function(e){return new Ao(xo.MULTIPLY,[e])},neq:function(e){return new Ao(xo.NEQ,[e])},not:function(e){return new Ao(xo.NOT,[e])},objectToArray:function(e){return new Ao(xo.OBJECTTOARRAY,[e])},or:function(e){return new Ao(xo.OR,[e])},pow:function(e){return new Ao(xo.POW,[e])},push:function(e){return new Ao(xo.PUSH,[e])},range:function(e){return new Ao(xo.RANGE,[e])},reduce:function(e){return new Ao(xo.REDUCE,[e])},reverseArray:function(e){return new Ao(xo.REVERSEARRAY,[e])},rtrim:function(e){return new Ao(xo.RTRIM,[e])},second:function(e){return new Ao(xo.SECOND,[e])},setDifference:function(e){return new Ao(xo.SETDIFFERENCE,[e])},setEquals:function(e){return new Ao(xo.SETEQUALS,[e])},setIntersection:function(e){return new Ao(xo.SETINTERSECTION,[e])},setIsSubset:function(e){return new Ao(xo.SETISSUBSET,[e])},setUnion:function(e){return new Ao(xo.SETUNION,[e])},size:function(e){return new Ao(xo.SIZE,[e])},slice:function(e){return new Ao(xo.SLICE,[e])},split:function(e){return new Ao(xo.SPLIT,[e])},sqrt:function(e){return new Ao(xo.SQRT,[e])},stdDevPop:function(e){return new Ao(xo.STDDEVPOP,[e])},stdDevSamp:function(e){return new Ao(xo.STDDEVSAMP,[e])},strcasecmp:function(e){return new Ao(xo.STRCASECMP,[e])},strLenBytes:function(e){return new Ao(xo.STRLENBYTES,[e])},strLenCP:function(e){return new Ao(xo.STRLENCP,[e])},substr:function(e){return new Ao(xo.SUBSTR,[e])},substrBytes:function(e){return new Ao(xo.SUBSTRBYTES,[e])},substrCP:function(e){return new Ao(xo.SUBSTRCP,[e])},subtract:function(e){return new Ao(xo.SUBTRACT,[e])},sum:function(e){return new Ao(xo.SUM,[e])},switch:function(e){return new Ao(xo.SWITCH,[e])},toBool:function(e){return new Ao(xo.TOBOOL,[e])},toDate:function(e){return new Ao(xo.TODATE,[e])},toDecimal:function(e){return new Ao(xo.TODECIMAL,[e])},toDouble:function(e){return new Ao(xo.TODOUBLE,[e])},toInt:function(e){return new Ao(xo.TOINT,[e])},toLong:function(e){return new Ao(xo.TOLONG,[e])},toObjectId:function(e){return new Ao(xo.TOOBJECTID,[e])},toString:function(e){return new Ao(xo.TOSTRING,[e])},toLower:function(e){return new Ao(xo.TOLOWER,[e])},toUpper:function(e){return new Ao(xo.TOUPPER,[e])},trim:function(e){return new Ao(xo.TRIM,[e])},trunc:function(e){return new Ao(xo.TRUNC,[e])},type:function(e){return new Ao(xo.TYPE,[e])},week:function(e){return new Ao(xo.WEEK,[e])},year:function(e){return new Ao(xo.YEAR,[e])},zip:function(e){return new Ao(xo.ZIP,[e])}}};function ia(e){return new oa(e)}var oa=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{offset:0};_()(this,e),this.options=void 0,On(t,"object","serverDate.options"),this.options=t}return y()(e,[{key:"_internalType",get:function(){return ho}},{key:"toJSON",value:function(){return{$date:this.options}}}]),e}();function aa(e,t){return Ta(e)?ya(e):new sa(e,t)}var sa=function(){function e(t,n){_()(this,e),this.longitude=void 0,this.latitude=void 0,this._internalType=so,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}});var r=t,i=n;Object.defineProperties(this,{longitude:{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){if(On(e,"number","longitude"),e>180||e<-180)throw new cn({errMsg:"longitude should be a number ranges from -180 to 180"})}},latitude:{enumerable:!0,configurable:!1,get:function(){return i},set:function(e){if(On(e,"number","latitude"),e>90||e<-90)throw new cn({errMsg:"latitude should be a number ranges from -90 to 90"})}}}),this.longitude=r,this.latitude=i}return y()(e,[{key:"toJSON",value:function(){return{type:"Point",coordinates:[(e=this).longitude,e.latitude]};var e}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),e}();function ca(e){return Ea(e)?ba(e):new ua(e)}var ua=function(){function e(t){_()(this,e),this.points=void 0,this._internalType=lo,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=t}return y()(e,[{key:"toJSON",value:function(){return{type:"MultiPoint",coordinates:this.points.map((function(e){return[e.longitude,e.latitude]}))}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),e}();function la(e){return ka(e)?wa(e):new da(e)}var da=function(){function e(t){_()(this,e),this.points=void 0,this._internalType=co,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=t}return y()(e,[{key:"toJSON",value:function(){return{type:"LineString",coordinates:this.points.map((function(e){return[e.longitude,e.latitude]}))}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),e}();function fa(e){return xa(e)?Ia(e):new pa(e)}var pa=function(){function e(t){_()(this,e),this.lines=void 0,this._internalType=fo,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=t}return y()(e,[{key:"toJSON",value:function(){return{type:"MultiLineString",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),e}();function ha(e){return Aa(e)?Sa(e):new ga(e)}var ga=function(){function e(t){_()(this,e),this.lines=void 0,this._internalType=uo,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=t}return y()(e,[{key:"toJSON",value:function(){return{type:"Polygon",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),e}();function va(e){return Pa(e)?Ca(e):new _a(e)}var _a=function(){function e(t){_()(this,e),this.polygons=void 0,this._internalType=po,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.polygons=t}return y()(e,[{key:"toJSON",value:function(){return{type:"MultiPolygon",coordinates:this.polygons.map((function(e){return e.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}))}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),e}();var ma=undefined;function ya(e){return aa(e.coordinates[0],e.coordinates[1])}function ba(e){return ca(e.coordinates.map((function(e){return aa(e[0],e[1])})))}function wa(e){return la(e.coordinates.map((function(e){return aa(e[0],e[1])})))}function Ia(e){return fa(e.coordinates.map((function(e){return la(e.map((function(e){return aa(e[0],e[1])})))})))}function Sa(e){return ha(e.coordinates.map((function(e){return la(e.map((function(e){return aa(e[0],e[1])})))})))}function Ca(e){return va(e.coordinates.map((function(e){return ha(e.map((function(e){return la(e.map((function(e){return aa(e[0],e[1])})))})))})))}function Ta(e){return Yt(e)&&Da(e.coordinates)}function Ea(e){return Yt(e)&&Oa(e.coordinates)}function ka(e){return Yt(e)&&Na(e.coordinates)}function xa(e){return Yt(e)&&Ra(e.coordinates)}function Aa(e){return Yt(e)&&Ma(e.coordinates)}function Pa(e){return Yt(e)&&(t=e.coordinates,Qt(t)&&t.every(Ma));var t}function Da(e){return Qt(e)&&Jt(e[0])&&Jt(e[1])}function Oa(e){return Qt(e)&&e.every(Da)}function Na(e){return Oa(e)}function Ra(e){return Qt(e)&&e.every(Na)}function Ma(e){return Ra(e)}function La(e){return Ba(e,[e])}function Ba(e,t){if(!nn(e)){if(en(e))return{$date:+e};if(tn(e))return{$regex:e.source,$options:e.flags};if(Qt(e))return e.map((function(e){if(t.indexOf(e)>-1)throw new cn({errCode:sn.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});return Ba(e,[].concat(mr()(t),[e]))}));if(Yt(e)){var n=p()({},e);for(var r in n){if(t.indexOf(n[r])>-1)throw new cn({errCode:sn.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});n[r]=Ba(n[r],[].concat(mr()(t),[n[r]]))}return n}return e}switch(e._internalType){case so:case lo:case co:case fo:case uo:case po:return e.toJSON();case ho:return{$date:e.options};case go:return{$regex:e.regexp,$options:e.options};default:return e.toJSON?e.toJSON():e}}function Fa(e,t,n,r){var i=p()({},e);for(var o in e)if(!/^\$/.test(o)){var a=e[o];if(a&&Yt(a)&&!t(a)){if(r.indexOf(a)>-1)throw new cn({errCode:sn.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});var s=Fa(a,t,[].concat(mr()(n),[o]),[].concat(mr()(r),[a]));i[o]=s;var c=!1;for(var u in s)/^\$/.test(u)?c=!0:(i["".concat(o,".").concat(u)]=s[u],delete i[o][u]);c||delete i[o]}}return i}function ja(e){return Fa(e,Va,[],[e])}function Wa(e){return Fa(e,(function(e){return!1}),[],[e])}function Ua(e,t,n){for(var r in t[n]||delete e[n],t)e[r]?Qt(e[r])?e[r].push(t[r]):Yt(e[r])?Yt(t[r])?Object.assign(e[r],t[r]):(console.warn("unmergable condition, query is object but condition is ".concat(zt(t),", can only overwrite"),t,n),e[r]=t[r]):(console.warn("to-merge query is of type ".concat(zt(e),", can only overwrite"),e,t,n),e[r]=t[r]):e[r]=t[r]}function Va(e){return nn(e)||en(e)||tn(e)}function Ga(e){return La(e)}function Ha(e){return function(e){var t=p()({},e);for(var n in t)switch(n){case"$date":switch(zt(t[n])){case"number":return new Date(t[n]);case"object":return ia(t[n])}break;case"type":switch(t.coordinates,t.type){case"Point":if(Ta(t))return ya(t);break;case"MultiPoint":if(Ea(t))return ba(t);break;case"LineString":if(ka(t))return wa(t);break;case"MultiLineString":if(xa(t))return Ia(t);break;case"Polygon":if(Aa(t))return Sa(t);break;case"MultiPolygon":if(Pa(t))return Ca(t)}}return e}(e)}function Za(e,t){return{limit:e._query.limit,offset:e._query.offset,order:qa(e._query.order||[]),projection:t.engine.ProjectionSerializer.encode(e._field)}}function qa(e){return e.map((function(e){return{field:e.fieldPath,direction:e.order===Ou.DESC?Lo.DESC:Lo.ASC}}))}function za(e){var t=Wa(e);for(var n in t)!0===t[n]||1===t[n]?t[n]=1:!1===t[n]||0===t[n]?t[n]=0:delete t[n];return t}const Ya=BabelRuntimeHelpers.defineProperty;var Ka,Ja,$a,Xa=__webpack_require__.n(Ya);!function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(Ja||(Ja={})),function(e){e.CONNECTION_START="connectionStart",e.CONNECTION_SUCCESS="connectionSuccess",e.CONNECTION_FAIL="connectionFail",e.DISCONNECT="disconnect"}($a||($a={}));var Qa=(Ka={},Xa()(Ka,Ja.DISCONNECTED,{transitions:[{accept:$a.CONNECTION_START,to:Ja.CONNECTING}]}),Xa()(Ka,Ja.CONNECTING,{transitions:[{accept:$a.CONNECTION_SUCCESS,to:Ja.CONNECTED},{accept:$a.CONNECTION_FAIL,to:Ja.DISCONNECTED},{accept:$a.DISCONNECT,to:Ja.DISCONNECTED}]}),Xa()(Ka,Ja.CONNECTED,{transitions:[{accept:$a.DISCONNECT,to:Ja.DISCONNECTED},{accept:$a.CONNECTION_FAIL,to:Ja.DISCONNECTED}]}),Ka),es=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ts=/^\w*$/;const ns=function(e,t){if(tt(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!qn(e))||(ts.test(e)||!es.test(e)||null!=t&&e in Object(t))};function rs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(rs.Cache||Ae),n}rs.Cache=Ae;const is=rs;var os=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,as=/\\(\\)?/g;const ss=function(e){var t=is(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(os,(function(e,n,r,i){t.push(r?i.replace(as,"$1"):n||e)})),t}));const cs=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var us=B?B.prototype:void 0,ls=us?us.toString:void 0;const ds=function e(t){if("string"==typeof t)return t;if(tt(t))return cs(t,e)+"";if(qn(t))return ls?ls.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};const fs=function(e){return null==e?"":ds(e)};const ps=function(e,t){return tt(e)?e:ns(e,t)?[e]:ss(fs(e))};const hs=function(e){if("string"==typeof e||qn(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};const gs=function(e,t,n,r){if(!z(e))return e;for(var i=-1,o=(t=ps(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var c=hs(t[i]),u=n;if(i!=a){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=z(l)?l:Ct(t[i+1])?[]:{})}bt(s,c,u),s=s[c]}return e};const vs=function(e,t,n){return null==e?e:gs(e,t,n)};const _s=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};const ms=function(e,t){for(var n=0,r=(t=ps(t,e)).length;null!=e&&n<r;)e=e[hs(t[n++])];return n&&n==r?e:void 0};const ys=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};const bs=function(e,t){return t.length<2?e:ms(e,ys(t,0,-1))};const ws=function(e,t){return t=ps(t,e),null==(e=bs(e,t))||delete e[hs(_s(t))]};const Is=function(e,t){return null==e||ws(e,t)};const Ss=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};const Cs=He(Object.keys,Object);var Ts=Object.prototype.hasOwnProperty;const Es=function(e){if(!ze(e))return Cs(e);var t=[];for(var n in Object(e))Ts.call(e,n)&&"constructor"!=n&&t.push(n);return t};const ks=function(e){return rt(e)?Et(e):Es(e)};const xs=function(e,t){return e&&wt(t,ks(t),e)};const As=function(e,t){return e&&wt(t,Pt(t),e)};const Ps=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};const Ds=function(){return[]};var Os=Object.prototype.propertyIsEnumerable,Ns=Object.getOwnPropertySymbols;const Rs=Ns?function(e){return null==e?[]:(e=Object(e),Ps(Ns(e),(function(t){return Os.call(e,t)})))}:Ds;const Ms=function(e,t){return wt(e,Rs(e),t)};const Ls=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};const Bs=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ls(t,Rs(e)),e=Ze(e);return t}:Ds;const Fs=function(e,t){return wt(e,Bs(e),t)};const js=function(e,t,n){var r=t(e);return tt(e)?r:Ls(r,n(e))};const Ws=function(e){return js(e,ks,Rs)};const Us=function(e){return js(e,Pt,Bs)};const Vs=ue(L.Z,"DataView");const Gs=ue(L.Z,"Promise");const Hs=ue(L.Z,"Set");const Zs=ue(L.Z,"WeakMap");var qs="[object Map]",zs="[object Promise]",Ys="[object Set]",Ks="[object WeakMap]",Js="[object DataView]",$s=ee(Vs),Xs=ee(le),Qs=ee(Gs),ec=ee(Hs),tc=ee(Zs),nc=q;(Vs&&nc(new Vs(new ArrayBuffer(1)))!=Js||le&&nc(new le)!=qs||Gs&&nc(Gs.resolve())!=zs||Hs&&nc(new Hs)!=Ys||Zs&&nc(new Zs)!=Ks)&&(nc=function(e){var t=q(e),n="[object Object]"==t?e.constructor:void 0,r=n?ee(n):"";if(r)switch(r){case $s:return Js;case Xs:return qs;case Qs:return zs;case ec:return Ys;case tc:return Ks}return t});const rc=nc;var ic=Object.prototype.hasOwnProperty;const oc=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ic.call(e,"index")&&(n.index=e.index,n.input=e.input),n};const ac=function(e,t){var n=t?je(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var sc=/\w*$/;const cc=function(e){var t=new e.constructor(e.source,sc.exec(e));return t.lastIndex=e.lastIndex,t};var uc=B?B.prototype:void 0,lc=uc?uc.valueOf:void 0;const dc=function(e){return lc?Object(lc.call(e)):{}};const fc=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return je(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return ac(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return We(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return cc(e);case"[object Set]":return new r;case"[object Symbol]":return dc(e)}};const pc=function(e){return Ke(e)&&"[object Map]"==rc(e)};var hc=gt.Z&&gt.Z.isMap;const gc=hc?ht(hc):pc;const vc=function(e){return Ke(e)&&"[object Set]"==rc(e)};var _c=gt.Z&&gt.Z.isSet;const mc=_c?ht(_c):vc;var yc="[object Arguments]",bc="[object Function]",wc="[object Object]",Ic={};Ic[yc]=Ic["[object Array]"]=Ic["[object ArrayBuffer]"]=Ic["[object DataView]"]=Ic["[object Boolean]"]=Ic["[object Date]"]=Ic["[object Float32Array]"]=Ic["[object Float64Array]"]=Ic["[object Int8Array]"]=Ic["[object Int16Array]"]=Ic["[object Int32Array]"]=Ic["[object Map]"]=Ic["[object Number]"]=Ic["[object Object]"]=Ic["[object RegExp]"]=Ic["[object Set]"]=Ic["[object String]"]=Ic["[object Symbol]"]=Ic["[object Uint8Array]"]=Ic["[object Uint8ClampedArray]"]=Ic["[object Uint16Array]"]=Ic["[object Uint32Array]"]=!0,Ic["[object Error]"]=Ic[bc]=Ic["[object WeakMap]"]=!1;const Sc=function e(t,n,r,i,o,a){var s,c=1&n,u=2&n,l=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!z(t))return t;var d=tt(t);if(d){if(s=oc(t),!c)return Ue(t,s)}else{var f=rc(t),p=f==bc||"[object GeneratorFunction]"==f;if((0,ot.Z)(t))return(0,Be.Z)(t,c);if(f==wc||f==yc||p&&!o){if(s=u||p?{}:Ye(t),!c)return u?Fs(t,As(s,t)):Ms(t,xs(s,t))}else{if(!Ic[f])return o?t:{};s=fc(t,f,c)}}a||(a=new Oe);var h=a.get(t);if(h)return h;if(a.set(t,s),mc(t))return t.forEach((function(i){s.add(e(i,n,r,i,t,a))})),s;if(gc(t))return t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))})),s;var g=l?u?Us:Ws:u?keysIn:ks,v=d?void 0:g(t);return Ss(v||t,(function(i,o){v&&(i=t[o=i]),bt(s,o,e(i,n,r,o,t,a))})),s};const Cc=function(e){return Sc(e,5)};var Tc,Ec,kc;!function(e){e.UNINIT="UNINIT",e.CLOSED="CLOSED",e.INIT_LOGGING_IN="INIT_LOGGING_IN",e.INIT_LOGGED_IN="INIT_LOGGED_IN",e.INIT_LOGIN_FAIL="INIT_LOGIN_FAIL",e.INIT_WATCH_PENDING="INIT_WATCH_PENDING",e.INIT_WATCH_FAIL="INIT_WATCH_FAIL",e.INIT_WATCH_SUCCESS="INIT_WATCH_SUCCESS",e.PAUSED="PAUSED",e.ABNORMAL_WATCH_STATUS="ABNORMAL_WATCH_STATUS",e.REBUILD_LOGGING_IN="REBUILD_LOGGING_IN",e.REBUILD_LOGGED_IN="REBUILD_LOGGED_IN",e.REBUILD_LOGIN_FAIL="REBUILD_LOGIN_FAIL",e.REBUILD_WATCH_PENDING="REBUILD_WATCH_PENDING",e.REBUILD_WATCH_FAIL="REBUILD_WATCH_FAIL",e.REBUILD_WATCH_SUCCESS="REBUILD_WATCH_SUCCESS"}(Ec||(Ec={})),function(e){e.CLOSE="close",e.LOGIN_START="loginStart",e.LOGIN_FAIL="loginFail",e.LOGIN_SUCCESS="loginSuccess",e.INIT_WATCH_START="initWatchStart",e.INIT_WATCH_FAIL="initWatchFail",e.INIT_WATCH_SUCCESS="initWatchSuccess",e.WS_DISCONNECTED="wsDisconnected",e.WS_CONNECTED="wsConnected",e.REBUILD_WATCH_START="rebuildWatchStart",e.REBUILD_WATCH_FAIL="rebuildWatchFail",e.REBUILD_WATCH_SUCCESS="rebuildWatchSuccess",e.NEED_REBUILD_WATCH="needRebuildWatch"}(kc||(kc={}));var xc={accept:kc.CLOSE,to:Ec.CLOSED},Ac={accept:kc.WS_DISCONNECTED,to:Ec.CLOSED},Pc={accept:kc.WS_DISCONNECTED,to:Ec.PAUSED},Dc=(Tc={},Xa()(Tc,Ec.UNINIT,{transitions:[{accept:kc.LOGIN_START,to:Ec.INIT_LOGGING_IN},Ac,xc]}),Xa()(Tc,Ec.CLOSED,{transitions:[xc]}),Xa()(Tc,Ec.INIT_LOGGING_IN,{transitions:[{accept:kc.LOGIN_FAIL,to:Ec.INIT_LOGIN_FAIL},{accept:kc.LOGIN_SUCCESS,to:Ec.INIT_LOGGED_IN},Ac,xc]}),Xa()(Tc,Ec.INIT_LOGIN_FAIL,{transitions:[{accept:kc.LOGIN_START,to:Ec.INIT_LOGGING_IN},Ac,xc]}),Xa()(Tc,Ec.INIT_LOGGED_IN,{transitions:[{accept:kc.INIT_WATCH_START,to:Ec.INIT_WATCH_PENDING},Ac,xc]}),Xa()(Tc,Ec.INIT_WATCH_PENDING,{transitions:[{accept:kc.INIT_WATCH_FAIL,to:Ec.INIT_WATCH_FAIL},{accept:kc.INIT_WATCH_SUCCESS,to:Ec.INIT_WATCH_SUCCESS},Ac,xc]}),Xa()(Tc,Ec.INIT_WATCH_FAIL,{transitions:[{accept:kc.LOGIN_START,to:Ec.INIT_LOGGING_IN},Ac,xc]}),Xa()(Tc,Ec.INIT_WATCH_SUCCESS,{transitions:[{accept:kc.WS_DISCONNECTED,to:Ec.PAUSED},{accept:kc.NEED_REBUILD_WATCH,to:Ec.ABNORMAL_WATCH_STATUS},Pc,xc]}),Xa()(Tc,Ec.PAUSED,{transitions:[{accept:kc.LOGIN_START,to:Ec.REBUILD_LOGGING_IN},Pc,xc]}),Xa()(Tc,Ec.ABNORMAL_WATCH_STATUS,{transitions:[{accept:kc.LOGIN_START,to:Ec.REBUILD_LOGGING_IN},Pc,xc]}),Xa()(Tc,Ec.REBUILD_LOGGING_IN,{transitions:[{accept:kc.LOGIN_FAIL,to:Ec.REBUILD_LOGIN_FAIL},{accept:kc.LOGIN_SUCCESS,to:Ec.REBUILD_LOGGED_IN},Pc,xc]}),Xa()(Tc,Ec.REBUILD_LOGIN_FAIL,{transitions:[{accept:kc.LOGIN_START,to:Ec.REBUILD_LOGGING_IN},Pc,xc]}),Xa()(Tc,Ec.REBUILD_LOGGED_IN,{transitions:[{accept:kc.REBUILD_WATCH_START,to:Ec.REBUILD_WATCH_PENDING},Pc,xc]}),Xa()(Tc,Ec.REBUILD_WATCH_PENDING,{transitions:[{accept:kc.REBUILD_WATCH_FAIL,to:Ec.REBUILD_WATCH_FAIL},{accept:kc.REBUILD_WATCH_SUCCESS,to:Ec.REBUILD_WATCH_SUCCESS},Pc,xc]}),Xa()(Tc,Ec.REBUILD_WATCH_FAIL,{transitions:[{accept:kc.LOGIN_START,to:Ec.REBUILD_LOGGING_IN},Pc,xc]}),Xa()(Tc,Ec.REBUILD_WATCH_SUCCESS,{transitions:[{accept:kc.NEED_REBUILD_WATCH,to:Ec.ABNORMAL_WATCH_STATUS},Pc,xc]}),Tc),Oc=function(){function e(t){for(var n in _()(this,e),this.currentState=void 0,this.states=void 0,this.listeners=new Set,this.history=void 0,this.currentState=t.initialState,this.states=new Map,t.states)this.states.set(n,{name:n,transitions:new Map(t.states[n].transitions.map((function(e){return[e.accept,e.to]})))});this.history={options:{enable:!1,limit:100},transitions:[]},t.history&&("boolean"==typeof t.history?t.history&&(this.history.options.enable=!0):Boolean(t.history.enable)&&(void 0===t.history.limit||null===t.history.limit?this.history.options={enable:!0,limit:100}:t.history.limit>0&&(this.history.options={enable:!0,limit:t.history.limit}))),this.history.options.enable&&this.history.transitions.push({state:this.currentState})}return y()(e,[{key:"transition",value:function(e,t){var n=this;if(t&&(t instanceof Set?!t.has(this.currentState):t!==this.currentState))throw new Nc("current state (".concat(this.currentState,") != expected from state (").concat(t instanceof Set?JSON.stringify(mr()(t)):t,")"),"unexpectedFromState");var r="string"==typeof e?{type:e}:e,i=this.states.get(this.currentState),o=i.transitions.get(r.type);if(!o)throw new Nc("current state (".concat(this.currentState,') does not accept "').concat(r.type,'"'),"unexpectedInput");this.currentState=o,this.history.options.enable&&(this.history.transitions.push({event:r.type,state:this.currentState}),this.history.transitions.length>this.history.options.limit&&(this.history.transitions.length===this.history.options.limit+1?this.history.transitions.shift():this.history.transitions.splice(0,this.history.transitions.length-this.history.options.limit))),this.listeners.forEach((function(e){try{e({event:r,from:i.name,to:n.currentState})}catch(e){console.error("FSM listener exec error: ",e)}}))}},{key:"canAccept",value:function(e){return this.states.get(this.currentState).transitions.has(e)}},{key:"subscribe",value:function(e){this.listeners.add(e)}},{key:"unsubscribe",value:function(e){this.listeners.delete(e)}},{key:"getHistoryRepresentation",value:function(e){if(!this.history.options.enable)return"";var t=e.limit?this.history.transitions.slice(-e.limit):this.history.transitions;return"states: ".concat(t.map((function(e){var t=e.state,n=e.event;return"".concat(n?"-(".concat(n,")->"):"").concat(t)})).join(""))}}]),e}(),Nc=function(e){u()(n,e);var t=d()(n);function n(e,r,i){var o;return _()(this,n),(o=t.call(this,e)).type="transition",o.subtype=void 0,o.payload=void 0,o.generic=!0,o.subtype=r,o.payload=i,o}return n}(an()(Error));function Rc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"".concat(e?"".concat(e,"_"):"").concat(+new Date,"_").concat(Math.random())}var Mc=1128,Lc=1,Bc=2,Fc=3,jc=4,Wc=5,Uc=6,Vc=7,Gc=8,Hc=9,Zc=10,qc=11,zc=12,Yc=13,Kc=14,Jc=15,$c=16,Xc=17,Qc=18,eu=30,tu=31,nu=32,ru=33,iu=34,ou=35,au=36,su=37,cu=38,uu=39,lu=40,du=50,fu=51,pu=52,hu=53,gu=54,vu=55,_u=56,mu=57,yu=58,bu=59,wu=60,Iu=function e(t){_()(this,e),this.close=void 0,this.onChange=void 0,this.onError=void 0,this.close=t.close,this.onChange=t.onChange,this.onError=t.onError,t.debug&&Object.defineProperty(this,"virtualClient",{get:function(){return t.virtualClient}})},Su=function e(t){_()(this,e),this.id=void 0,this.docChanges=void 0,this.docs=void 0,this.type=void 0,this.EJSON=void 0,this.requestId=void 0,this.watchId=void 0;var n=t.id,r=t.docChanges,i=t.docs,o=t.type,a=(t.EJSON,t.requestId),s=t.watchId;Object.defineProperties(this,{id:{get:function(){return n},enumerable:!0},docChanges:{get:function(){return r},enumerable:!0},docs:{get:function(){return i},enumerable:!0},type:{get:function(){return o},enumerable:!0}}),this.requestId=a,this.watchId=s},Cu=function(e){u()(n,e);var t=d()(n);function n(e){var r;return _()(this,n),(r=t.call(this,"Watch Error ".concat(JSON.stringify(e.msgData)," (requestid: ").concat(e.requestId,")"))).isRealtimeErrorMessageError=!0,r.payload=void 0,r.payload=e,r}return n}(an()(Error)),Tu=function(e){return e&&e.isRealtimeErrorMessageError},Eu=new Set([Ec.REBUILD_LOGGING_IN,Ec.INIT_LOGGING_IN]),ku=function(e){0},xu=function(){function e(t){var n,r,i=this;_()(this,e),this.watchId=void 0,this._parentFSM=void 0,this._fsm=void 0,this.envId=void 0,this.collectionName=void 0,this.query=void 0,this.limit=void 0,this.orderBy=void 0,this.queryType=void 0,this.send=void 0,this.login=void 0,this.isWSConnected=void 0,this.getWaitExpectedTimeoutLength=void 0,this.getEJSON=void 0,this.getServiceContext=void 0,this.onWatchStart=void 0,this.onWatchClose=void 0,this.timing=void 0,this.closeWatchInvoked=!1,this.userOnErrorInvoked=!1,this.debug=void 0,this.wsclient=void 0,this.listener=void 0,this._availableRetries=void 0,this._ackTimeoutId=void 0,this._loginInvalidated=!1,this._errors=[],this._parentFSMListener=void 0,this._FSMListener=void 0,this._wsDisconnectionTS=void 0,this.sessionInfo=void 0,this._waitExpectedTimeoutId=void 0,this._snapshotHistory=[],this._login=(n=g()(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i._fsm.transition(kc.LOGIN_START),e.prev=1,e.next=4,i.login(i.envId,t||i._loginInvalidated,i.timing);case 4:n=e.sent,i.envId||(i.envId=n.envId),i._fsm.transition(kc.LOGIN_SUCCESS,Eu),i._loginInvalidated=!1,e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),i._errors.push(e.t0),i._loginInvalidated=!0;try{i._fsm.transition(kc.LOGIN_FAIL,Eu)}catch(e){console.warn("[realtime]",e)}case 15:case"end":return e.stop()}}),e,null,[[1,10]])}))),function(e){return n.apply(this,arguments)}),this.initWatch=g()(w().mark((function e(){var t,n,r,o,a,s,c,u,l,d,f;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),n=Rc(),e.prev=2,i._fsm.transition(kc.INIT_WATCH_START,Ec.INIT_LOGGED_IN),r=i.envId,o={watchId:i.watchId,requestId:n,msgType:"INIT_WATCH",msgData:{envId:r,collName:i.collectionName,query:i.query,limit:i.limit,orderBy:i.orderBy,queryType:i.queryType}},e.next=8,i.send({msg:o,waitResponse:!0,skipOnMessage:!0,timeout:1e4});case 8:if(a=e.sent,i.assertAsyncTaskStatus(),s=a.msgData,c=s.events,u=s.currEvent,i.sessionInfo={queryID:a.msgData.queryID,currentEventId:u-1,currentDocs:[],currentEventTS:Date.now()},c.length>0){l=Wn()(c);try{for(l.s();!(d=l.n()).done;)d.value.ID=u}catch(e){l.e(e)}finally{l.f()}i.handleServerEvents(a)}else i.sessionInfo.currentEventId=u,f=new Su({id:u,docChanges:[],docs:[],type:"init",EJSON:i.getEJSON(),requestId:a.requestId,watchId:i.watchId}),wn((function(){return i.listener.onChange(f)}))(),i.scheduleSendACK(),i.debug&&i._snapshotHistory.push(f);i.onWatchStart(i,i.sessionInfo.queryID),i._availableRetries.INIT_WATCH=2,i._wsDisconnectionTS=void 0,lr(Mc,Wc,!0),ur({apiName:"_realtime.initWatch(success)",apiStartTime:t,apiEndTime:Date.now()}),i._fsm.transition(kc.INIT_WATCH_SUCCESS),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(2),ur({apiName:"_realtime.initWatch(fail)",apiStartTime:t,apiEndTime:Date.now()}),i.handleWatchEstablishmentError(e.t0,{operationName:"INIT_WATCH",requestId:n});case 27:case"end":return e.stop()}}),e,null,[[2,22]])}))),this.rebuildWatch=g()(w().mark((function e(){var t,n,r,o,a;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),n=Rc(),e.prev=2,i._fsm.transition(kc.REBUILD_WATCH_START,Ec.REBUILD_LOGGED_IN),r=i.envId,i.sessionInfo){e.next=7;break}throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");case 7:if(!(i._wsDisconnectionTS&&Date.now()-i._wsDisconnectionTS>.9*i.getServiceContext().appConfig.realtimeQueryEventCacheTimeout)){e.next=10;break}throw new pn("query event cache timeout, ws has been disconnected for too long, PLEASE RECONNECT manually",{subtype:"queryEventCacheClientTimeout",retryable:!1});case 10:return o={watchId:i.watchId,requestId:n,msgType:"REBUILD_WATCH",msgData:{envId:r,collName:i.collectionName,queryID:i.sessionInfo.queryID,eventID:i.sessionInfo.currentEventId}},e.next=13,i.send({msg:o,waitResponse:!0,skipOnMessage:!0,timeout:1e4});case 13:a=e.sent,i.assertAsyncTaskStatus(),e.next=20;break;case 20:return e.next=22,i.handleServerEvents(a);case 22:i._availableRetries.REBUILD_WATCH=2,i._wsDisconnectionTS=void 0,lr(Mc,Vc,!0),ur({apiName:"_realtime.rebuildWatch(success)",apiStartTime:t,apiEndTime:Date.now()}),i._fsm.transition(kc.REBUILD_WATCH_SUCCESS),e.next=35;break;case 30:e.prev=30,e.t0=e.catch(2),ur({apiName:"_realtime.rebuildWatch(fail)",apiStartTime:t,apiEndTime:Date.now()}),i.handleWatchEstablishmentError(e.t0,{operationName:"REBUILD_WATCH",requestId:n});case 35:case"end":return e.stop()}}),e,null,[[2,30]])}))),this.handleWatchEstablishmentError=(r=g()(w().mark((function e(t,n){var r,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r="INIT_WATCH"===n.operationName,o=function(e){var o="".concat(e||t," (").concat(r?"initWatch":"rebuildWatch"," requestId ").concat(n.requestId,")");if(i.closeWithError(new cn({errCode:r?sn.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:sn.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:o})),lr(Mc,r?Uc:Gc,!0),!Tu(t)){if(hn(t)){switch(t.payload.subtype){case"totalConnectionTimeout":lr(Mc,r?gu:vu,!0);break;case"queryEventCacheClientTimeout":r||lr(Mc,_u,!0)}return}return vn(t)?void lr(Mc,r?mu:yu,!0):void lr(Mc,r?bu:wu,!0)}switch(t.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":lr(Mc,r?du:fu,!0);break;default:lr(Mc,r?pu:hu,!0)}},i._errors.push(t),i.handleCommonError(t,{onSignError:function(){i._loginInvalidated=!0,i._fsm.transition(i.initialized?kc.REBUILD_WATCH_FAIL:kc.INIT_WATCH_FAIL)},onTimeoutError:function(e){e.payload&&!e.payload.retryable?o(e):i._fsm.transition(i.initialized?kc.REBUILD_WATCH_FAIL:kc.INIT_WATCH_FAIL)},onNotRetryableError:o,onCancelledError:function(e){i._fsm.transition(i.initialized?kc.REBUILD_WATCH_FAIL:kc.INIT_WATCH_FAIL)},onUnknownError:function(){i._fsm.transition(i.initialized?kc.REBUILD_WATCH_FAIL:kc.INIT_WATCH_FAIL)}});case 4:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)}),this.closeWatch=g()(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.closeWatchInvoked=!0,t=i.sessionInfo?i.sessionInfo.queryID:"",i._fsm.currentState!==Ec.CLOSED){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,i._fsm.transition(kc.CLOSE),e.next=8,i.sendCloseWatch();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.warn("[realtime] non-fatal error while closing watch: ".concat(e.t0));case 13:return e.prev=13,i.sessionInfo=void 0,i.onWatchClose(i,t),i._cleanup(),e.finish(13);case 18:case"end":return e.stop()}}),e,null,[[4,10,13,18]])}))),this.sendCloseWatch=g()(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={watchId:i.watchId,requestId:Rc(),msgType:"CLOSE_WATCH",msgData:null},e.next=3,i.send({msg:t});case 3:case"end":return e.stop()}}),e)}))),this.scheduleSendACK=function(){i.clearACKSchedule(),i._ackTimeoutId=setTimeout((function(){i._waitExpectedTimeoutId?i.scheduleSendACK():i.sendACK()}),1e4)},this.clearACKSchedule=function(){i._ackTimeoutId&&clearTimeout(i._ackTimeoutId)},this.sendACK=g()(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i._fsm.currentState===Ec.INIT_WATCH_SUCCESS||i._fsm.currentState===Ec.REBUILD_WATCH_SUCCESS){e.next=4;break}return i.scheduleSendACK(),e.abrupt("return");case 4:if(i.sessionInfo){e.next=7;break}return console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)"),e.abrupt("return");case 7:return t={watchId:i.watchId,requestId:Rc(),msgType:"CHECK_LAST",msgData:{queryID:i.sessionInfo.queryID,eventID:i.sessionInfo.currentEventId}},e.next=10,i.send({msg:t});case 10:i.scheduleSendACK(),e.next=27;break;case 13:if(e.prev=13,e.t0=e.catch(0),!Tu(e.t0)){e.next=26;break}n=e.t0.payload,e.t1=n.msgData.code,e.next="CHECK_LOGIN_FAILED"===e.t1||"SIGN_EXPIRED_ERROR"===e.t1||"SIGN_INVALID_ERROR"===e.t1||"SIGN_PARAM_INVALID"===e.t1?20:"QUERYID_INVALID_ERROR"===e.t1||"SYS_ERR"===e.t1||"INVALIID_ENV"===e.t1||"COLLECTION_PERMISSION_DENIED"===e.t1?23:25;break;case 20:return i._loginInvalidated=!0,i._fsm.currentState!==Ec.INIT_WATCH_SUCCESS&&i._fsm.currentState!==Ec.REBUILD_WATCH_SUCCESS||i._fsm.transition(kc.NEED_REBUILD_WATCH),e.abrupt("return");case 23:return i.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:n.msgData.code})),e.abrupt("return");case 25:return e.abrupt("break",26);case 26:i._availableRetries.CHECK_LAST&&i._availableRetries.CHECK_LAST>0?(i._availableRetries.CHECK_LAST--,i.scheduleSendACK()):i.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:e.t0}));case 27:case"end":return e.stop()}}),e,null,[[0,13]])}))),this.handleCommonError=function(e,t){if(Tu(e)){switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":default:return void t.onNotRetryableError(e)}}else{if(hn(e))return void t.onTimeoutError(e);if(vn(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId="watchid_".concat(+new Date,"_").concat(Math.random()),this._parentFSM=t.parentFSM,this.envId=t.envId,this.collectionName=t.collectionName,this.query=t.query,this.limit=t.limit,this.orderBy=t.orderBy,this.queryType=t.queryType,this.send=t.send,this.login=t.login,this.isWSConnected=t.isWSConnected,this.getWaitExpectedTimeoutLength=t.getWaitExpectedTimeoutLength,this.getEJSON=t.getEJSON,this.getServiceContext=t.getServiceContext,this.onWatchStart=t.onWatchStart,this.onWatchClose=t.onWatchClose,this.timing=t.timing,this.debug=t.debug,this._availableRetries={INIT_WATCH:2,REBUILD_WATCH:2,CHECK_LAST:2},this._fsm=new Oc({initialState:Ec.UNINIT,states:Dc,history:!0}),this._subscribeParentFSMEvents(),this._subscribeFSMEvents(),this.listener=new Iu({close:this.closeWatch,onChange:t.onChange,onError:t.onError,debug:this.debug,virtualClient:this}),this._parentFSM.currentState===Ja.CONNECTED&&this._login(),t.debug&&(this.wsclient=t.wsclient)}var t,n;return y()(e,[{key:"initialized",get:function(){return Boolean(this.sessionInfo)}},{key:"_cleanup",value:function(){this._parentFSM.unsubscribe(this._parentFSMListener)}},{key:"_subscribeParentFSMEvents",value:function(){var e=this;this._parentFSMListener=function(t){var n=t.event;t.from,t.to;if(e._fsm.currentState!==Ec.CLOSED)if(n.type===$a.DISCONNECT||n.type===$a.CONNECTION_FAIL)switch(e._fsm.currentState){case Ec.UNINIT:case Ec.INIT_LOGGING_IN:case Ec.INIT_LOGIN_FAIL:case Ec.INIT_LOGGED_IN:case Ec.INIT_WATCH_PENDING:case Ec.INIT_WATCH_FAIL:e.closeWithError(n.error||new Error("websocket connection fail"),!1);break;default:n.type===$a.DISCONNECT?(e._wsDisconnectionTS||(e._wsDisconnectionTS=Date.now()),e._fsm.transition(kc.WS_DISCONNECTED)):e.closeWithError(n.error||new Error("websocket connection fail"),!1)}else if(n.type===$a.CONNECTION_SUCCESS)switch(e._fsm.currentState){case Ec.UNINIT:case Ec.PAUSED:e._login();break;case Ec.CLOSED:break;default:console.warn("[realtime] current state should not be ".concat(e._fsm.currentState," (parent event ").concat(n,")"))}},this._parentFSM.subscribe(this._parentFSMListener)}},{key:"_subscribeFSMEvents",value:function(){var e=this;this._FSMListener=function(t){var n=t.event,r=t.from;t.to;switch(n.type){case kc.WS_CONNECTED:e._login().catch(ku);break;case kc.LOGIN_SUCCESS:r===Ec.INIT_LOGGING_IN?e.initWatch().catch(ku):r===Ec.REBUILD_LOGGING_IN?e.rebuildWatch().catch(ku):e.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:"unexpected state: event ".concat(n.type," from ").concat(r)}));break;case kc.LOGIN_FAIL:r===Ec.INIT_LOGGING_IN?e.useRetryTicket("INIT_WATCH")?e._login().catch(ku):e.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:"login fail ".concat(e._errors[e._errors.length-1])})):r===Ec.REBUILD_LOGGING_IN?e.useRetryTicket("REBUILD_WATCH")?e._login().catch(ku):e.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:"login fail ".concat(e._errors[e._errors.length-1])})):e.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:"unexpected state: event ".concat(n.type," from ").concat(r)}));break;case kc.INIT_WATCH_SUCCESS:e._availableRetries.INIT_WATCH=2,e._errors=[];break;case kc.INIT_WATCH_FAIL:e.useRetryTicket("INIT_WATCH")?e._login().catch(ku):e.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:"init watch fail ".concat(e._errors[e._errors.length-1])}));break;case kc.REBUILD_WATCH_SUCCESS:e._availableRetries.REBUILD_WATCH=2,e._errors=[];break;case kc.REBUILD_WATCH_FAIL:e.useRetryTicket("REBUILD_WATCH")?e._login().catch(ku):e.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:"init watch fail ".concat(e._errors[e._errors.length-1])}));break;case kc.NEED_REBUILD_WATCH:e._login().catch(ku)}},this._fsm.subscribe(this._FSMListener)}},{key:"useRetryTicket",value:function(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,!0)}},{key:"assertAsyncTaskStatus",value:function(){if(this.closeWatchInvoked)throw new gn("closeWatch",{subtype:"closeWatch"});switch(this._fsm.currentState){case Ec.PAUSED:throw new gn("pause",{subtype:"pause"});case Ec.CLOSED:throw new gn("close",{subtype:"close"})}}},{key:"handleServerEvents",value:(n=g()(w().mark((function e(t){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.scheduleSendACK(),e.next=4,this._handleServerEvents(t);case 4:this._postHandleServerEventsValidityCheck(t),e.next=12;break;case 7:throw e.prev=7,e.t0=e.catch(0),lr(Mc,ru,!0),e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(e){return n.apply(this,arguments)})},{key:"_handleServerEvents",value:(t=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d=this;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestId,(r=t.msgData.events).length&&this.sessionInfo){e.next=4;break}return e.abrupt("return");case 4:i=this.sessionInfo,e.prev=5,o=r.map(Au),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(5),this.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e.t0})),e.abrupt("return");case 13:a=mr()(i.currentDocs),s=!1,c=function(e,r){var c=o[e];if(i.currentEventId>=c.id)return!o[e-1]||c.id>o[e-1].id?lr(Mc,iu,!0):(console.error("[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ".concat(n,")")),lr(Mc,ou,!0)),"continue";if(i.currentEventId===c.id-1){switch(c.dataType){case"update":if(!c.doc)switch(c.queueType){case"update":case"dequeue":var u=a.find((function(e){return e._id===c.docId}));if(u){var l=Cc(u);if(c.updatedFields)for(var f in c.updatedFields)vs(l,f,c.updatedFields[f]);if(c.removedFields){var p,h=Wn()(c.removedFields);try{for(h.s();!(p=h.n()).done;){var g=p.value;Is(l,g)}}catch(v){h.e(v)}finally{h.f()}}c.doc=l}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated."),lr(Mc,au,!0);break;case"enqueue":var v=new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId '.concat(t.requestId,")")});throw d.closeWithError(v),v}break;case"limit":if(!c.doc)switch(c.queueType){case"dequeue":var _=a.find((function(e){return e._id===c.docId}));_?c.doc=_:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType dequeue queueType event where no doc is associated.")}break;case"replace":if(!c.doc){var m=new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="replace" (requestId '.concat(t.requestId,")")});throw d.closeWithError(m),m}break;case"remove":var y=a.find((function(e){return e._id===c.docId}));y?c.doc=y:(console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),lr(Mc,su,!0))}switch(c.queueType){case"init":s?a.push(c.doc):(s=!0,a=[c.doc]);break;case"enqueue":a.push(c.doc);break;case"dequeue":var b=a.findIndex((function(e){return e._id===c.docId}));b>-1?a.splice(b,1):(console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),lr(Mc,cu,!0));break;case"update":var w=a.findIndex((function(e){return e._id===c.docId}));w>-1?a[w]=c.doc:(console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),lr(Mc,uu,!0))}if(e===r-1||o[e+1]&&o[e+1].id!==c.id){var I=mr()(a),S=o.slice(0,e+1).filter((function(e){return e.id===c.id}));d.sessionInfo.currentEventId=c.id,d.sessionInfo.currentDocs=a,d.sessionInfo.currentEventTS=Date.now();var C=new Su({id:c.id,type:"init"===S[0].queueType?"init":void 0,docChanges:d.getEJSON().deserialize(S),docs:d.getEJSON().deserialize(I),EJSON:d.getEJSON(),requestId:n,watchId:d.watchId});wn((function(){return d.listener.onChange(C)}))(),d.debug&&d._snapshotHistory.push(C)}}else lr(Mc,lu,!0),d._fsm.transition(kc.NEED_REBUILD_WATCH)},u=0,l=o.length;case 17:if(!(u<l)){e.next=24;break}if("continue"!==c(u,l)){e.next=21;break}return e.abrupt("continue",21);case 21:u++,e.next=17;break;case 24:case"end":return e.stop()}}),e,this,[[5,9]])}))),function(e){return t.apply(this,arguments)})},{key:"_postHandleServerEventsValidityCheck",value:function(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn("[realtime listener] internal non-fatal error: client eventId ".concat(this.sessionInfo.currentEventId," does not match with server event id after server event handling ").concat(e.msgData.currEvent," (requestId ").concat(e.requestId,")"))):console.error("[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur. (requestId ".concat(e.requestId,")"))}},{key:"clearWaitExpectedEvent",value:function(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)}},{key:"onMessage",value:function(e){var t=this;switch(this._fsm.currentState){case Ec.INIT_WATCH_SUCCESS:case Ec.REBUILD_WATCH_SUCCESS:break;case Ec.PAUSED:if("ERROR"!==e.msgType)return;break;default:return void console.warn("[realtime listener] internal non-fatal error: unexpected message received while state is ".concat(this._fsm.currentState))}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":0,this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((function(){t._fsm.transition(kc.NEED_REBUILD_WATCH)}),this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:"".concat(e.msgData.code," - ").concat(e.msgData.message)}));break;default:0}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")}},{key:"closeWithError",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._fsm.currentState!==Ec.CLOSED&&this._fsm.transition(kc.CLOSE),!this.userOnErrorInvoked){var r=this._fsm.getHistoryRepresentation({limit:20});un(e)?(e.errMsg+="\nhistory ".concat(r),e.history=r):e&&((e=new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:"".concat(e," \nhistory ").concat(r)})).history=r),this.clearACKSchedule(),wn((function(){return t.listener.onError(e)}))(),this.userOnErrorInvoked=!0,this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),n&&this.sendCloseWatch().catch(ku),this.sessionInfo=void 0}}}]),e}();function Au(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=e.removedFields?JSON.parse(e.removedFields):JSON.parse(e.RemovedFields))),t}var Pu,Du={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3004:{code:3004,name:"Client Reconnect on Server Upgrade",description:"The client is terminating the connection in response to server upgrade"},3050:{code:3050,name:"Server Close Unauthenticated Idle Connection",description:"The server is terminating the connection because the connection is idle and not authenticated"},3051:{code:3051,name:"Server Upgrade",description:"The server is terminating the connection because it is upgrading"},3052:{code:3052,name:"Server Requires Authentication",description:"The server is terminating the connection because it has not received authentication message as the connection's first message"}};!function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.ReconnectOnServerUpgrade=3004]="ReconnectOnServerUpgrade",e[e.UnauthenticatedIdleConnection=3050]="UnauthenticatedIdleConnection",e[e.ServerUpgrade=3051]="ServerUpgrade",e[e.AuthenticationRequired=3052]="AuthenticationRequired"}(Pu||(Pu={}));var Ou,Nu=function(e,t){var n=Du[e],r=n?"".concat(n.name,", code ").concat(e,", reason ").concat(t||n.description):"code ".concat(e);return new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:r})},Ru=1,Mu=function(){function e(t){var n,r,i,o=this;_()(this,e),this._fsm=void 0,this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._totalConnectionTimeoutId=void 0,this._serviceContext=void 0,this._ws=void 0,this._lastPingSendTS=void 0,this._pingFailed=0,this._pongMissed=0,this._pingTimeoutId=void 0,this._pongTimeoutId=void 0,this._logins=new Map,this._signatures=new Map,this._wsResponseWait=new Map,this._rttObserved=[],this._closedWatches=new Set,this._EJSON=void 0,this._defaultEnvId=void 0,this._connectionEnvId=void 0,this.initWebSocketConnection=(n=g()(w().mark((function e(t){var n,r,i,a,s,c,u,l,d,f=arguments;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f.length>1&&void 0!==f[1]?f[1]:o._maxReconnect,o._EJSON||(n=Lu().then((function(e){return o._EJSON=e}))),o._fsm.currentState===Ja.DISCONNECTED){e.next=4;break}return e.abrupt("return");case 4:o._fsm.transition($a.CONNECTION_START),o._logins=new Map,o._wsResponseWait=new Map,r=!1,i=[],a=!1,!o._totalConnectionTimeoutId&&o._totalConnectionTimeout&&o._totalConnectionTimeout!==1/0&&(s=o._totalConnectionTimeout,o._totalConnectionTimeoutId=setTimeout((function(){a=!0,o._totalConnectionTimeoutId=void 0;var e=new pn("reconnect timeout (reach totalConnectionTimeout ".concat(s,"s)"),{subtype:"totalConnectionTimeout",retryable:!1});lr(Mc,Xc,!0),o._fsm.transition({type:$a.CONNECTION_FAIL,error:e})}),1e3*s)),c=o._maxReconnect;case 13:if(!(c>=0)){e.next=50;break}return e.prev=14,e.delegateYield(w().mark((function e(){var i,s;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Or();case 3:if(e.sent.isConnected){e.next=20;break}if(t){e.next=9;break}return o._fsm.transition({type:$a.CONNECTION_FAIL,error:new Error("network offline")}),e.abrupt("return",{v:void 0});case 9:return e.next=11,Nr();case 11:if(0!==o._virtualWSClient.size){e.next=16;break}return o.clearTotalReconnectTimeout(),e.abrupt("return",{v:void 0});case 16:if(!Xr()){e.next=20;break}return e.next=20,xr(100);case 20:if(!a){e.next=22;break}return e.abrupt("return",{v:void 0});case 22:return e.next=25,o.getSignature(o._connectionEnvId);case 25:if(i=e.sent,!a){e.next=28;break}return e.abrupt("return",{v:void 0});case 28:return s=Date.now(),e.next=32,new Promise((function(e,t){o._ws=Gn(o._context.identifiers)._socketSkipCheckDomainFactory().connectSocket({url:i.wsUrl,header:{"content-type":"application/json"},perMessageDeflate:!0,success:e,fail:t})}));case 32:if(!a){e.next=34;break}return e.abrupt("return",{v:void 0});case 34:return ur({apiName:"_realtime.connectSocket",apiStartTime:s,apiEndTime:Date.now()}),e.next=38,o.initWebSocketEvent();case 38:if(!a){e.next=40;break}return e.abrupt("return",{v:void 0});case 40:if(!n){e.next=45;break}return e.next=43,n;case 43:if(!a){e.next=45;break}return e.abrupt("return",{v:void 0});case 45:return r=!0,e.abrupt("return","break");case 47:case"end":return e.stop()}}),e)}))(),"t0",16);case 16:if("break"!==(u=e.t0)){e.next=19;break}return e.abrupt("break",50);case 19:if("object"!==qt()(u)){e.next=21;break}return e.abrupt("return",u.v);case 21:e.next=47;break;case 23:if(e.prev=23,e.t1=e.catch(14),i.unshift(e.t1),e.t1.errCode!==sn.TCB_PERMISSION_DENIED){e.next=29;break}return e.abrupt("break",50);case 29:return e.next=31,Or();case 31:if(l=e.sent,d=l.isConnected,!a){e.next=35;break}return e.abrupt("return");case 35:if(!d){e.next=41;break}return e.next=39,xr(o._reconnectInterval);case 39:if(!a){e.next=41;break}return e.abrupt("return");case 41:if(!Xr()){e.next=47;break}return e.next=45,xr(0);case 45:if(!a){e.next=47;break}return e.abrupt("return");case 47:c--,e.next=13;break;case 50:if(!r){e.next=56;break}return o.clearTotalReconnectTimeout(),lr(Mc,t?Fc:Lc,!0),o._fsm.transition($a.CONNECTION_SUCCESS),e.abrupt("return");case 56:o.clearTotalReconnectTimeout(),lr(Mc,t?jc:Bc,!0),t?o._fsm.transition({type:$a.CONNECTION_FAIL,error:new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL,errMsg:"errors of each retry (latest to oldest): ".concat(JSON.stringify(i.map((function(e){return e+""}))))})}):o._fsm.transition({type:$a.CONNECTION_FAIL,error:new cn({errCode:sn.SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL,errMsg:"errors of each retry (latest to oldest): ".concat(JSON.stringify(i.map((function(e){return e+""}))))})});case 60:case"end":return e.stop()}}),e,null,[[14,23]])}))),function(e){return n.apply(this,arguments)}),this.initWebSocketEvent=function(){return new Promise((function(e,t){if(!o._ws)throw new Error("can not initWebSocketEvent, ws not exists");var n=!1;o._ws.onOpen((function(t){o._context.debug&&console.warn("[realtime] ws event: open",t),n=!0,e()}));var r=null;o._ws.onError((function(e){r=e,o._logins=new Map,n?(o._context.debug&&console.error("[realtime] ws event: error",e),o.clearHeartbeat(),lr(Mc,Zc,!0)):(o._context.debug&&console.error("[realtime] ws open failed with ws event: error",e),t(e),lr(Mc,Hc,!0))})),o._ws.onClose((function(e){o._logins=new Map,o.clearHeartbeat();var t=r||Nu(e.code);switch(e.code){case Pu.ReconnectOnServerUpgrade:case Pu.ReconnectWebSocket:case Pu.NoRealtimeListeners:o._fsm.transition({type:$a.DISCONNECT,error:t});break;case Pu.HeartbeatPingError:case Pu.HeartbeatPongTimeoutError:case Pu.NormalClosure:case Pu.AbnormalClosure:o._maxReconnect>0?(o._fsm.transition({type:$a.DISCONNECT,error:t}),o.initWebSocketConnection(!0)):o._fsm.transition({type:$a.CONNECTION_FAIL,error:t}),e.code===Pu.HeartbeatPingError?lr(Mc,zc,!0):e.code===Pu.HeartbeatPongTimeoutError?lr(Mc,Yc,!0):lr(Mc,Kc,!0);break;case Pu.UnauthenticatedIdleConnection:o._fsm.transition({type:$a.CONNECTION_FAIL,error:Nu(e.code,e.reason)}),lr(Mc,Jc,!0);break;case Pu.ServerUpgrade:o._fsm.transition({type:$a.DISCONNECT,error:t}),o.initWebSocketConnection(!0),lr(Mc,Qc,!0);break;default:o._maxReconnect>0?(o._fsm.transition({type:$a.DISCONNECT,error:t}),o.initWebSocketConnection(!0)):o._fsm.transition({type:$a.CONNECTION_FAIL,error:Nu(e.code,e.reason)}),lr(Mc,$c,!0)}lr(Mc,qc,!0)}));var i={timing:{},startKey:"apiStartTime",endKey:"apiEndTime",samplePicker:gr,autoReport:"_realtime.onSocketMessage"};o._ws.onMessage(hr(o.onSocketMessage,i)),o.heartbeat()}))},this.isWSConnected=function(){return Boolean(o._ws&&o._ws.readyState===Ru)},this.onSocketMessage=function(e){var t,n=e.data;o.heartbeat();try{t=JSON.parse(n)}catch(e){throw new Error("[realtime] onMessage parse res.data error: ".concat(e))}o._context.debug&&console.log("[realtime] onMessage ".concat(t.msgType," (").concat((new Date).toLocaleString(),")"),t);var r=o._wsResponseWait.get(t.requestId);if(r){try{"ERROR"===t.msgType?r.reject(new Cu(t)):r.resolve(t)}catch(e){o._context.debug&&console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",e)}finally{o._wsResponseWait.delete(t.requestId)}if(r.skipOnMessage)return}if("PONG"!==t.msgType){var i=t.watchId&&o._watchIdClientMap.get(t.watchId);if(i)i.onMessage(t);else switch(t.watchId?o._closedWatches.has(t.watchId)?lr(Mc,eu,!0):lr(Mc,tu,!0):lr(Mc,nu,!0),t.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":(i=o._queryIdClientMap.get(t.msgData.queryID))&&i.onMessage(t)}}else if(o._lastPingSendTS){var a=Date.now()-o._lastPingSendTS;if(a>1e4)return void(o._context.debug&&console.warn("[realtime] untrusted rtt observed: ".concat(a)));o._rttObserved.length>=3&&o._rttObserved.splice(0,o._rttObserved.length-3+1),o._rttObserved.push(a)}},this.login=(r=g()(w().mark((function e(t,n,r){var i,a,s,c,u,l,d;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t||o._context.env||o._defaultEnvId,n){e.next=17;break}if(!t){e.next=14;break}if(!(i=o._logins.get(t))){e.next=12;break}if(!i.loggedIn||!i.loginResult){e.next=10;break}return e.abrupt("return",i.loginResult);case 10:if(!i.loggingInPromise){e.next=12;break}return e.abrupt("return",i.loggingInPromise);case 12:e.next=17;break;case 14:if(!(a=o._logins.get(""))||!a.loggingInPromise){e.next=17;break}return e.abrupt("return",a.loggingInPromise);case 17:return s=new Promise(function(){var e=g()(w().mark((function e(i,a){var s,c,u,l;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r?hr(o.getSignature(t,n),{timing:r,startKey:"tunnelStartTime",endKey:"tunnelEndTime",condition:{emptyKey:!0}}):o.getSignature(t,n);case 3:return s=e.sent,c=Ar(),u={watchId:void 0,requestId:Rc(),msgType:"LOGIN",msgData:{envId:s.envId,signStr:s.signStr,secretVersion:s.secretVersion,referrer:"mp",sdkVersion:c.version,dataVersion:c.updateDateInDashes}},e.next=8,o.send({msg:u,waitResponse:!0,skipOnMessage:!0,timeout:5e3});case 8:(l=e.sent).msgData.code?a(new Error("".concat(l.msgData.code," ").concat(l.msgData.message))):i({envId:s.envId}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),a(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n){return e.apply(this,arguments)}}()),c=t&&o._logins.get(t),u=Date.now(),c?(c.loggedIn=!1,c.loggingInPromise=s,c.loginStartTS=u):(c={loggedIn:!1,loggingInPromise:s,loginStartTS:u},o._logins.set(t||"",c)),e.prev=22,e.next=25,s;case 25:if(l=e.sent,!(d=o._logins.get(t||""))||d!==c||d.loginStartTS!==u){e.next=35;break}return c.loggedIn=!0,c.loggingInPromise=void 0,c.loginStartTS=void 0,c.loginResult=l,e.abrupt("return",l);case 35:if(!d){e.next=47;break}if(!d.loggedIn||!d.loginResult){e.next=40;break}return e.abrupt("return",d.loginResult);case 40:if(!d.loggingInPromise){e.next=44;break}return e.abrupt("return",d.loggingInPromise);case 44:throw new Error("ws unexpected login info");case 45:e.next=48;break;case 47:throw new Error("ws login info reset");case 48:e.next=57;break;case 50:throw e.prev=50,e.t0=e.catch(22),c.loggedIn=!1,c.loggingInPromise=void 0,c.loginStartTS=void 0,c.loginResult=void 0,e.t0;case 57:case"end":return e.stop()}}),e,null,[[22,50]])}))),function(e,t,n){return r.apply(this,arguments)}),this.getSignature=(i=g()(w().mark((function e(t,n){var r,i,a,s;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=t||o._context.env||o._defaultEnvId,n||!t||!o._signatures.has(t)){e.next=11;break}if(r=o._signatures.get(t),!(Date.now()<r.expireTS)){e.next=8;break}return e.abrupt("return",r);case 8:case 9:e.next=12;break;case 11:case 12:return i=Date.now()+6e4,e.next=15,Ko(o._context,t);case 15:if(a=e.sent,!(Date.now()-i>6e4)){e.next=18;break}return e.abrupt("return",o.getSignature(t,n));case 18:return s=p()(p()({},a),{},{expireTS:i}),o._signatures.set(s.envId,s),t||(o._defaultEnvId=s.envId),e.abrupt("return",s);case 22:case"end":return e.stop()}}),e)}))),function(e,t){return i.apply(this,arguments)}),this.getWaitExpectedTimeoutLength=function(){return o._rttObserved.length?o._rttObserved.reduce((function(e,t){return e+t}))/o._rttObserved.length*1.5:5e3},this.ping=g()(w().mark((function e(){var t;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={watchId:void 0,requestId:Rc(),msgType:"PING",msgData:null},e.next=3,o.send({msg:t});case 3:o._context.debug&&console.log("ping sent");case 4:case"end":return e.stop()}}),e)}))),this.send=function(e){return new Promise((t=g()(w().mark((function t(n,r){var i,a,s,c,u;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o._fsm.currentState===Ja.CONNECTED){t.next=2;break}return t.abrupt("return",r(new Error("websocket not connected")));case 2:if(a=!1,s=!1,c=function(e){a=!0,i&&clearTimeout(i),n(e)},u=function(e){s=!0,i&&clearTimeout(i),r(e)},e.timeout&&(i=setTimeout(g()(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&s){e.next=4;break}return e.next=3,xr(0);case 3:a&&s||u(new pn("wsclient.send timedout"));case 4:case"end":return e.stop()}}),e)}))),e.timeout)),t.prev=7,o._context.debug&&console.log("[realtime] ws send ".concat(e.msg.msgType," (").concat((new Date).toLocaleString(),"): "),e),o._ws){t.next=12;break}return u(new Error("invalid state: ws connection not exists, can not send message")),t.abrupt("return");case 12:if(o._ws.readyState===Ru){t.next=15;break}return u(new Error("ws readyState invalid: ".concat(o._ws.readyState,", can not send message"))),t.abrupt("return");case 15:e.waitResponse&&o._wsResponseWait.set(e.msg.requestId,{resolve:c,reject:u,skipOnMessage:e.skipOnMessage}),o._ws.send({data:JSON.stringify(e.msg),success:function(t){e.waitResponse||c(t)},fail:function(t){u(t),e.waitResponse&&o._wsResponseWait.delete(e.msg.requestId)}}),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),u(t.t0);case 22:case"end":return t.stop()}}),t,null,[[7,19]])}))),function(e,n){return t.apply(this,arguments)}));var t},this.onWatchStart=function(e,t){o._queryIdClientMap.set(t,e)},this.onWatchClose=function(e,t){t&&o._queryIdClientMap.delete(t),o._watchIdClientMap.delete(e.watchId),o._virtualWSClient.delete(e),o._closedWatches.add(e.watchId),o._virtualWSClient.size||o.close(Pu.NoRealtimeListeners)},this.getEJSON=function(){return o._EJSON},this._fsm=new Oc({initialState:Ja.DISCONNECTED,states:Qa}),this._serviceContext=t.serviceContext}return y()(e,[{key:"_context",get:function(){return this._serviceContext}},{key:"_maxReconnect",get:function(){return this._context.appConfig.realtimeMaxReconnect}},{key:"_reconnectInterval",get:function(){return this._context.appConfig.realtimeReconnectInterval}},{key:"_totalConnectionTimeout",get:function(){return this._context.appConfig.realtimeTotalConnectionTimeout}},{key:"heartbeat",value:function(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout(g()(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t._ws&&t._ws.readyState===Ru){e.next=3;break}return e.abrupt("return");case 3:return t._lastPingSendTS=Date.now(),e.next=6,t.ping();case 6:t._pingFailed=0,t._pongTimeoutId=setTimeout((function(){t._context.debug&&console.error("pong timed out"),t._pongMissed<2?(t._pongMissed++,t.heartbeat(!0)):t.close(Pu.HeartbeatPongTimeoutError)}),t._context.appConfig.realtimePongWaitTimeout),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t._pingFailed<2?(t._pingFailed++,t.heartbeat()):t.close(Pu.HeartbeatPingError);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),e?0:this._context.appConfig.realtimePingInterval)}},{key:"clearHeartbeat",value:function(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)}},{key:"clearTotalReconnectTimeout",value:function(){this._totalConnectionTimeoutId&&clearTimeout(this._totalConnectionTimeoutId)}},{key:"close",value:function(e){this.clearHeartbeat(),this._ws&&(this._ws.close({code:e,reason:Du[e].name}),this._ws=void 0)}},{key:"watch",value:function(e){var t=this,n={apiStartTime:Date.now()},r=!1,i=function(){ur(p()(p()({},n),{},{apiName:e.reportAPIName}))},o=e.onChange,a=e.onError;this._fsm.currentState===Ja.DISCONNECTED&&(this._connectionEnvId=e.envId,this.initWebSocketConnection(!1));var s=new xu(p()(p()({},e),{},{parentFSM:this._fsm,send:this.send,login:this.login,isWSConnected:this.isWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,getEJSON:this.getEJSON,getServiceContext:function(){return t._context},onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,timing:n,debug:this._context.debug,wsclient:this,onChange:u,onError:l}));this._virtualWSClient.add(s),this._watchIdClientMap.set(s.watchId,s);var c=s.listener;return c;function u(){for(var e=this,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];r||(r=!0,n.apiEndTime=Date.now(),i()),d(),wn((function(){return c.onChange.apply(e,o)}))()}function l(){for(var e=this,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];r||(r=!0,n.apiEndTime=Date.now(),i()),d(),wn((function(){return c.onError.apply(e,o)}))()}function d(){c.onChange===u&&(c.onChange=o),c.onError===l&&(c.onError=a)}}}]),e}();function Lu(){return Bu.apply(this,arguments)}function Bu(){return(Bu=g()(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Date.now(),n=__webpack_require__(154),ur({apiName:"_realtime.importBSON",apiStartTime:t,apiEndTime:Date.now()}),e.abrupt("return",n.EJSON);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.ASC="asc",e.DESC="desc"}(Ou||(Ou={}));var Fu="document.get",ju="document.update",Wu="document.set",Uu="document.remove",Vu=function(e){var t=function(e){var t=function(){function t(r,i){var o=this;if(_()(this,t),this.collectionName=void 0,this._query=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=function(t){return On(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Mu({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(p()(p()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:o.collectionName,query:JSON.stringify(e.engine.QuerySerializer.encode(o._query.where||{})),limit:o._query.limit,orderBy:o._query.order?o._query.order.reduce((function(e,t){return e[t.fieldPath]=t.order,e}),{}):void 0,queryType:Ro.WHERE,reportAPIName:"cloud.db.collection.watch"}))},!r)throw new cn({errCode:sn.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"collectionName must be provided"});this.collectionName=r,this._query=new n(i),Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field=i&&i.field||{}}return y()(t,[{key:"field",value:function(e){return Nn(e,"object","field"),new t(this.collectionName,p()(p()({},this._query.getProperties()),{},{field:e}))}},{key:"where",value:function(e){return Nn(e,"condition","where"),this._query.where?new t(this.collectionName,p()(p()({},this._query.getProperties()),{},{where:ra.and(this._query.where,e)})):new t(this.collectionName,p()(p()({},this._query.getProperties()),{},{where:e}))}},{key:"orderBy",value:function(e,n){return Nn(e,"fieldPath","orderBy"),Nn(n,"order","orderBy"),new t(this.collectionName,p()(p()({},this._query.getProperties()),{},{order:[].concat(mr()(this._query.order||[]),[{fieldPath:e,order:n}])}))}},{key:"limit",value:function(e){return Nn(e,"max","limit"),new t(this.collectionName,p()(p()({},this._query.getProperties()),{},{limit:e}))}},{key:"skip",value:function(e){return Nn(e,"offset","skip"),new t(this.collectionName,p()(p()({},this._query.getProperties()),{},{offset:e}))}},{key:"get",value:function(t){var n,r=this,i="collection.get",o={apiStartTime:+new Date},a=Pn(t),s=new Promise((n=g()(w().mark((function n(a,s){var c;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Uo({env:e.database.config.env,collectionName:r.collectionName,query:e.engine.QuerySerializer.encode(r._query.where||{}),queryType:Ro.WHERE,options:Za(r,e),instanceContext:e,timing:o,explain:null==t?void 0:t.explain});case 3:if(c=n.sent,null==t||!t.explain||!Xr()){n.next=7;break}return a(c),n.abrupt("return");case 7:a({data:c.list,errMsg:vr(i)}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),s(ln(n.t0,i));case 13:return n.prev=13,ur(p()(p()({},o),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(i)})),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[0,10,13,16]])}))),function(e,t){return n.apply(this,arguments)}));if(!a)return s;s.then((function(e){xn(i,t,e)})).catch((function(e){An(i,t,e)}))}},{key:"update",value:function(t){var n,r=this,i="collection.update",o={apiStartTime:+new Date},a=function(){if(Nn(t,"options","update"),On(t,{data:"object"}),!r._query.where)throw new cn({errCode:-1,errMsg:"query condition must be provided"})},s=Pn(t),c=new Promise((n=g()(w().mark((function n(s,c){var u;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(),n.next=4,Go({env:e.database.config.env,collectionName:r.collectionName,query:e.engine.QuerySerializer.encode(r._query.where||{}),data:e.engine.UpdateSerializer.encode(t.data),queryType:Ro.WHERE,options:{multi:!1!==t.multi,merge:!0},instanceContext:e,timing:o,explain:t.explain});case 4:if(u=n.sent,null==t||!t.explain||!Xr()){n.next=7;break}return n.abrupt("return",s(u));case 7:s({stats:{updated:u.updated},errMsg:vr(i)}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),c(ln(n.t0,i));case 13:return n.prev=13,ur(p()(p()({},o),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(i)})),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[0,10,13,16]])}))),function(e,t){return n.apply(this,arguments)}));if(!s)return c;c.then((function(e){xn(i,t,e)})).catch((function(e){An(i,t,e)}))}},{key:"remove",value:function(t){var n,r=this,i="collection.remove",o={apiStartTime:+new Date},a=function(){if(!r._query.where||0===Object.keys(r._query.where).length)throw new cn({errCode:-1,errMsg:"query condition must be provided and not be empty"})},s=Pn(t),c=new Promise((n=g()(w().mark((function n(s,c){var u;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(),n.next=4,jo({env:e.database.config.env,collectionName:r.collectionName,query:e.engine.QuerySerializer.encode(r._query.where||{}),queryType:Ro.WHERE,options:{multi:!0},instanceContext:e,timing:o,explain:null==t?void 0:t.explain});case 4:if(u=n.sent,null==t||!t.explain||!Xr()){n.next=7;break}return n.abrupt("return",s(u));case 7:s({stats:{removed:u.removed||0},errMsg:vr(i)}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),c(ln(n.t0,i));case 13:return n.prev=13,ur(p()(p()({},o),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(i)})),n.finish(13);case 16:case"end":return n.stop()}}),n,null,[[0,10,13,16]])}))),function(e,t){return n.apply(this,arguments)}));if(!s)return c;c.then((function(e){xn(i,t,e)})).catch((function(e){An(i,t,e)}))}},{key:"count",value:function(t){var n,r=this,i="collection.count",o={apiStartTime:+new Date},a=Pn(t),s=new Promise((n=g()(w().mark((function n(a,s){var c;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(e){return qo.apply(this,arguments)}({env:e.database.config.env,collectionName:r.collectionName,query:e.engine.QuerySerializer.encode(r._query.where||{}),queryType:Ro.WHERE,instanceContext:e,timing:o,explain:null==t?void 0:t.explain});case 3:if(c=n.sent,null==t||!t.explain||!Xr()){n.next=6;break}return n.abrupt("return",a(c));case 6:a({total:c.total,errMsg:vr(i)}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),s(ln(n.t0,i));case 12:return n.prev=12,ur(p()(p()({},o),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(i)})),n.finish(12);case 15:case"end":return n.stop()}}),n,null,[[0,9,12,15]])}))),function(e,t){return n.apply(this,arguments)}));if(!a)return s;s.then((function(e){xn(i,t,e)})).catch((function(e){An(i,t,e)}))}},{key:"toJSON",value:function(){}}]),t}(),n=function(){function e(t){_()(this,e),this.where=void 0,this.offset=void 0,this.limit=void 0,this.order=void 0,this.field=void 0,this.where=t&&t.where,this.offset=t&&t.offset,this.limit=t&&t.limit,this.order=t&&t.order,this.field=t&&t.field}return y()(e,[{key:"getProperties",value:function(){return{where:this.where,offset:this.offset,limit:this.limit,order:this.order,field:this.field}}}]),e}();return t}(e),n=function(e){return function(){function t(n,r){var i=this;if(_()(this,t),this._id=void 0,this.collection=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=function(t){return On(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Mu({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(p()(p()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:i.collection.collectionName,query:JSON.stringify({_id:i._id}),queryType:Ro.DOC,reportAPIName:"cloud.db.document.watch"}))},this.collection=n,this._id=r,null==r)throw new cn({errCode:sn.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"docId must not be null or undefined"});Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field={}}return y()(t,[{key:"field",value:function(e){return Nn(e,"object","field"),On(e,"object","field"),this._field=e,this}},{key:"get",value:function(t){var n,r=this,i={apiStartTime:+new Date},o=Pn(t),a=new Promise((n=g()(w().mark((function t(n,o){var a,s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=r._id,t.next=4,Uo({env:e.database.config.env,collectionName:r.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:r._id}),options:{projection:e.engine.ProjectionSerializer.encode(r._field)},queryType:Ro.DOC,instanceContext:e,timing:i});case 4:if((s=t.sent).list&&s.list.length){t.next=7;break}throw new Error("cannot find document with _id ".concat(a,", ")+"please make sure that the document exists and you have the corresponding access permission");case 7:n({data:s.list[0],errMsg:vr(Fu)}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),o(ln(t.t0,Fu));case 13:return t.prev=13,ur(p()(p()({},i),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(Fu)})),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])}))),function(e,t){return n.apply(this,arguments)}));if(!o)return a;a.then((function(e){xn(Fu,t,e)})).catch((function(e){An(Fu,t,e)}))}},{key:"set",value:function(t){var n,r=this,i={apiStartTime:+new Date},o=Pn(t),a=new Promise((n=g()(w().mark((function n(o,a){var s;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,On(t,{data:"object"}),Mn({name:"options.data",target:t.data}),n.next=4,function(e){return Zo.apply(this,arguments)}({env:e.database.config.env,collectionName:r.collection.collectionName,_id:r._id,data:e.engine.encodeInternalDataType(t.data),options:{},instanceContext:e,timing:i});case 4:s=n.sent,o({_id:s._id,errMsg:vr(Wu),stats:{updated:s.updated,created:s.created}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(ln(n.t0,Wu));case 11:return n.prev=11,ur(p()(p()({},i),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(Wu)})),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])}))),function(e,t){return n.apply(this,arguments)}));if(!o)return a;a.then((function(e){xn(Wu,t,e)})).catch((function(e){An(Wu,t,e)}))}},{key:"update",value:function(t){var n,r=this,i={apiStartTime:+new Date},o=Pn(t),a=new Promise((n=g()(w().mark((function n(o,a){var s;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,On(t,{data:"object"}),Mn({name:"options.data",target:t.data}),n.next=4,Go({env:e.database.config.env,collectionName:r.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:r._id}),data:e.engine.UpdateSerializer.encode(t.data),queryType:Ro.DOC,options:{multi:!1,merge:!1},instanceContext:e,timing:i});case 4:s=n.sent,o({stats:{updated:s.updated},errMsg:vr(ju)}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(ln(n.t0,ju));case 11:return n.prev=11,ur(p()(p()({},i),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(ju)})),n.finish(11);case 14:case"end":return n.stop()}}),n,null,[[0,8,11,14]])}))),function(e,t){return n.apply(this,arguments)}));if(!o)return a;a.then((function(e){xn(ju,t,e)})).catch((function(e){An(ju,t,e)}))}},{key:"remove",value:function(t){var n,r=this,i={apiStartTime:+new Date},o=Pn(t),a=new Promise((n=g()(w().mark((function t(n,o){var a,s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=r._id,t.next=4,jo({env:e.database.config.env,collectionName:r.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:r._id}),queryType:Ro.DOC,options:{},instanceContext:e,timing:i});case 4:if(0!==(s=t.sent).removed){t.next=7;break}throw new Error("cannot remove document with _id ".concat(a,", ")+"please make sure that the document exists and you have the corresponding Write permission");case 7:n({stats:{removed:s.removed||0},errMsg:vr(Uu)}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),o(ln(t.t0,Uu));case 13:return t.prev=13,ur(p()(p()({},i),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(Uu)})),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])}))),function(e,t){return n.apply(this,arguments)}));if(!o)return a;a.then((function(e){xn(Uu,t,e)})).catch((function(e){An(Uu,t,e)}))}},{key:"toJSON",value:function(){}}]),t}()}(e),r=function(e){return function(t){u()(r,t);var n=d()(r);function r(e,t){var i;return _()(this,r),(i=n.call(this,t)).collection=void 0,i._internalType=Qi,i.collection=e,i}return y()(r,[{key:"pushStage",value:function(e,t){return new r(this.collection,[].concat(mr()(this._stages),[new $o(e,t)]))}},{key:"end",value:function(){var t,n=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i="collection.aggregate",o={apiStartTime:+new Date},a=function(){return zo({env:e.database.config.env,collectionName:n.collection.collectionName,stages:e.engine.AggregateSerializer.encodeStages(n._stages),instanceContext:e,timing:o,explain:r.explain})},s=Pn(r),c=new Promise((t=g()(w().mark((function e(t,n){var s;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:if(s=e.sent,!r.explain||!Xr()){e.next=6;break}return e.abrupt("return",t(s));case 6:t({list:s.list,errMsg:vr(i)}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),n(ln(e.t0,i));case 12:return e.prev=12,ur(p()(p()({},o),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(i)})),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])}))),function(e,n){return t.apply(this,arguments)}));if(!s)return c;c.then((function(e){xn(i,r,e)})).catch((function(e){An(i,r,e)}))}}]),r}(Xo)}(e);return function(t){u()(o,t);var i=d()(o);function o(e){var t;return _()(this,o),(t=i.call(this,e)).collectionName=void 0,t.__safe_props__=void 0,t.collectionName=e,t}return y()(o,[{key:"doc",value:function(e){if(null==e)throw ln({errCode:-1,errMsg:"docId must not be empty"},"collection.doc");return new n(this,e)}},{key:"add",value:function(t){var n=this,r="collection.add",i={apiStartTime:+new Date};var o,a=Pn(t),s=new Promise((o=g()(w().mark((function o(a,s){var c;return w().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,On(t,{data:"object"}),o.next=4,Bo({env:e.database.config.env,collectionName:n.collectionName,data:e.engine.encodeInternalDataType(t.data),instanceContext:e,timing:i});case 4:c=o.sent,a({_id:c._id,errMsg:vr(r)}),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),s(ln(o.t0,r));case 11:return o.prev=11,ur(p()(p()({},i),{},{apiEndTime:+new Date,apiName:"cloud.db.".concat(r)})),o.finish(11);case 14:case"end":return o.stop()}}),o,null,[[0,8,11,14]])}))),function(e,t){return o.apply(this,arguments)}));if(!a)return s;s.then((function(e){xn(r,t,e)})).catch((function(e){An(r,t,e)}))}},{key:"aggregate",value:function(){return new r(this,[])}}]),o}(t)},Gu=function(e){return new Hu(e)},Hu=function(){function e(t){_()(this,e),this.regexp=void 0,this.options=void 0,On(t,{regexp:"string"},"RegExp options"),t.options&&On(t.options,"string"),this.regexp=t.regexp,this.options=t.options||""}return y()(e,[{key:"_internalType",get:function(){return go}},{key:"toJSON",value:function(){return{$regex:this.regexp,$options:this.options}}}]),e}(),Zu={},qu={};for(var zu in bo)Zu[bo[zu]]="$".concat(bo[zu]);for(var Yu in $i)Zu[$i[Yu]]="$".concat($i[Yu]);for(var Ku in To)Zu[To[Ku]]="$".concat(To[Ku]);for(var Ju in xo)qu[xo[Ju]]="$".concat(xo[Ju]);function $u(e){return Zu[e]||"$".concat(e.toLowerCase())}function Xu(e){return qu[e]||"$".concat(e.toLowerCase())}Zu[bo.NEQ]="$ne",Zu[To.REMOVE]="$unset",Zu[To.SHIFT]="$pop",Zu[To.UNSHIFT]="$push",Zu[bo.GEO_NEAR]="$nearSphere",Zu[bo.GEO_WITHIN]="$geoWithin",Zu[bo.GEO_INTERSECTS]="$geoIntersects";var Qu,el=function(){function e(){_()(this,e)}return y()(e,null,[{key:"encodeStages",value:function(e){return(new tl).encodeStages(e)}},{key:"encode",value:function(e){return(new tl).encodeAny(e)}}]),e}(),tl=function(){function e(){_()(this,e)}return y()(e,[{key:"encodeStages",value:function(e){var t=this;return e.map((function(e){return t.encodePipelineStage(e)}))}},{key:"encodeAny",value:function(e){var t=this;return Va(e)?ea(e)?this.encodePipeline(e):ta(e)?this.encodePipelineStage(e):Po(e)?this.encodeAggregateCommand(e):Ga(e):Yt(e)?this.encodeObject(e):Qt(e)?e.map((function(e){return t.encodeAny(e)})):e}},{key:"encodeObject",value:function(e){var t={};for(var n in e)t[n]=this.encodeAny(e[n]);return t}},{key:"encodePipeline",value:function(e){var t=this;return e._stages.map((function(e){return t.encodeAny(e)}))}},{key:"encodePipelineStage",value:function(e){var t="$".concat(e.stage);switch(e.stage){case"match":return Xa()({},t,nl.encode(e.val));default:return Xa()({},t,this.encodeAny(e.val))}}},{key:"encodeAggregateCommand",value:function(e){var t=Xu(e.operator);return Xa()({},t,this.encodeAny(e.operands[0]))}}]),e}(),nl=function(){function e(){_()(this,e)}return y()(e,null,[{key:"encode",value:function(e){return rl(e)}}]),e}(),rl=function(e){return yo(e)?ol(e):Co(e)?al(e):ea(e)||Po(e)||ta(e)?el.encode(e):Yt(e)?il(e):Ga(e)},il=function(e){var t,n=ja(e),r=[],i=(t={},Xa()(t,$i.OR,0),Xa()(t,$i.NOR,0),Xa()(t,$i.AND,0),Xa()(t,$i.NOT,0),t),o=function(e){var t=n[e];if(yo(t))switch(t.operator){case $i.OR:case $i.NOR:case $i.AND:i[t.operator]++,r.push(Xa()({},$u(t.operator),t.operands.map((function(t){return rl(Xa()({},e,t))}))));break;case $i.NOT:var o=t.operands[0];if(yo(o))switch(o.operator){case $i.AND:i[$i.OR]++,r.push(ol(new mo($i.OR,o.operands.map((function(t){return Xa()({},e,new mo($i.NOT,[t]))})))));break;case $i.OR:i[$i.NOR]++,r.push(ol(new mo($i.NOR,o.operands.map((function(t){return Xa()({},e,t)})))));break;case $i.NOR:i[$i.OR]++,r.push(ol(new mo($i.OR,o.operands.map((function(t){return Xa()({},e,t)})))));break;case $i.NOT:r.push(rl(Xa()({},e,o.operands[0])))}else r.push(Xa()({},e,ol(t)))}else Co(t)?r.push(Xa()({},e,al(t))):r.push(Xa()({},e,Ga(t)))};for(var a in n)o(a);return sl(r)},ol=function(e){switch(e.operator){case $i.AND:if(e.operands.every((function(e){return Co(e)}))){var t,n={},r=Wn()(e.operands);try{for(r.s();!(t=r.n()).done;){var i=t.value;Object.assign(n,al(i))}}catch(e){r.e(e)}finally{r.f()}return n}var o=$u(e.operator),a=e.operands.map(rl);return Xa()({},o,a);case $i.OR:case $i.NOR:var s=$u(e.operator),c=e.operands.map(rl);return Xa()({},s,c);case $i.NOT:var u=$u(e.operator),l=e.operands[0];return Xa()({},u,rl(l));default:var d=$u(e.operator),f=e.operands.map(rl);return Xa()({},d,f)}},al=function(e){var t=$u(e.operator);switch(e.operator){case bo.EQ:case bo.NEQ:case bo.LT:case bo.LTE:case bo.GT:case bo.GTE:case bo.EXISTS:case bo.SIZE:return Xa()({},t,Ga(e.operands[0]));case bo.IN:case bo.NIN:case bo.MOD:return Xa()({},t,Ga(e.operands));case bo.ALL:return Xa()({},t,e.operands.map(rl));case bo.ELEM_MATCH:case bo.EXPR:return Xa()({},t,rl(e.operands[0]));case bo.GEO_NEAR:return Xa()({},t,{$geometry:Ga(e.operands[0].geometry),$maxDistance:e.operands[0].maxDistance,$minDistance:e.operands[0].minDistance});case bo.GEO_WITHIN:var n={};return e.operands[0].geometry&&(n.$geometry=Ga(e.operands[0].geometry)),e.operands[0].centerSphere&&(n.$centerSphere=Ga(e.operands[0].centerSphere)),Xa()({},t,n);case bo.GEO_INTERSECTS:return Xa()({},t,{$geometry:Ga(e.operands[0].geometry)});default:return Xa()({},t,e.operands.length>1?e.operands.map(rl):rl(e.operands[0]))}},sl=function(e){var t,n={$and:0,$or:0,$nor:0},r=Wn()(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.$and&&n.$and++,i.$or&&n.$or++,i.$nor&&n.$nor++}}catch(e){r.e(e)}finally{r.f()}var o,a=n.$and>1||n.$or>1||n.$nor>1,s=!1,c={},u=Wn()(e);try{for(u.s();!(o=u.n()).done;){var l=o.value;for(var d in l){var f=l[d];a?s?c.$and.push(l):"$and"===d||"$or"===d||"$nor"===d?(s=!0,c.$and=[l]):c[d]=f:c[d]=f}}}catch(e){u.e(e)}finally{u.f()}return c},cl=function(){function e(){_()(this,e)}return y()(e,null,[{key:"encode",value:function(e){return ul(e)}}]),e}(),ul=function(e){return ll(e)},ll=function(e){var t=ja(e),n={};for(var r in t){var i=t[r];if(ko(i)){var o=$u(i.operator);switch(n[o]||(n[o]={}),i.operator){case To.SET:case To.INC:case To.MUL:case To.MIN:case To.MAX:case To.RENAME:case To.BIT:n[o][r]=Ga(i.operands[0]);break;case To.REMOVE:n[o][r]="";break;case To.PUSH:var a=void 0;a=1===i.operands.length&&Yt(i.operands[0])?{$each:i.operands[0].each.map(Ga),$position:i.operands[0].position,$slice:i.operands[0].slice,$sort:i.operands[0].sort}:{$each:i.operands.map(Ga)},n[o][r]=a;break;case To.UNSHIFT:var s={$each:i.operands.map(Ga),$position:0};n[o][r]=s;break;case To.POP:n[o][r]=1;break;case To.SHIFT:n[o][r]=-1;break;case To.ADD_TO_SET:n[o][r]=Yt(i.operands[0])&&i.operands[0].each?{$each:i.operands[0].each}:i.operands[0];break;case To.PULL:n[o][r]=nl.encode(i.operands[0]);break;case To.PULL_ALL:default:n[o][r]=Ga(i.operands[0])}}else n.$set||(n.$set={}),n.$set[r]=Ga(i)}return n},dl=function(){function e(){_()(this,e)}return y()(e,[{key:"encodeProjection",value:function(e){return No(e)?this.encodeProjectionCommand(e):"object"===zt(e)?this.encodeProjectionObject(e):e}},{key:"encodeProjectionCommand",value:function(e){var t=$u(e.operator);switch(e.operator){case Do.SLICE:default:return Xa()({},t,e.operands[0])}}},{key:"encodeProjectionObject",value:function(e){var t=ja(e);for(var n in t)!0===t[n]||1===t[n]?t[n]=1:!1===t[n]||0===t[n]?t[n]=0:No(t[n])?t[n]=this.encodeProjectionCommand(t[n]):delete t[n];return t}}],[{key:"encode",value:function(t){return(new e).encodeProjection(t)}}]),e}(),fl=function(){function e(){_()(this,e)}return y()(e,[{key:"decodeData",value:function(e){var t=this;switch(zt(e)){case"object":return this.decodeObject(e);case"array":return e.map((function(e){if(Yt(e)){var n=Ha(e);return n!==e?n:t.decodeObject(e)}return e}));default:return e}}},{key:"decodeObject",value:function(e){var t=p()({},e);for(var n in t){var r=t[n];switch(zt(r)){case"object":var i=Ha(r);t[n]=i!==r?i:this.decodeObject(t[n]);break;case"array":var o=this.decodeData(r);o!==r&&(t[n]=o);break;default:continue}}return t}}],[{key:"decode",value:function(t){return(new e).decodeData(t)}}]),e}();function pl(){arguments.length>0&&void 0!==arguments[0]||Qu.DEFAULT;return t}!function(e){e[e.DEFAULT=0]="DEFAULT"}(Qu||(Qu={}));const hl=function(e,t){return new(vl(e.identifiers||{}))({context:e,config:t})};function gl(e){return e.debug}var vl=function(t){var n,r;return function(){function i(o){_()(this,i),this.identifiers=void 0,this.config=void 0,this.command=void 0,this.Geo=void 0,this.serverDate=void 0,this.RegExp=void 0,this.__safe_props__=void 0;var a=o.config,s=o.context;this.identifiers=t,this.config=a||{},n={database:this,serviceContext:s,engine:pl()},r=Vu(n),a&&a.env&&On(a.env,"string"),this.command=ra,this.Geo=e,this.serverDate=ia,this.RegExp=Gu,a&&a.hasOwnProperty("debug")&&Object.defineProperties(this,{debug:{value:!0},QuerySerializer:{enumerable:!1,configurable:!1,get:function(){return gl((e=n).database)?e.engine.QuerySerializer:void 0;var e},set:function(){}},UpdateSerializer:{enumerable:!1,configurable:!1,get:function(){return gl((e=n).database)?e.engine.UpdateSerializer:void 0;var e},set:function(){}},ProjectionSerializer:{enumerable:!1,configurable:!1,get:function(){return gl((e=n).database)?e.engine.ProjectionSerializer:void 0;var e},set:function(){}},AggregateSerializer:{enumerable:!1,configurable:!1,get:function(){return gl((e=n).database)?e.engine.AggregateSerializer:void 0;var e},set:function(){}},Decoder:{enumerable:!1,configurable:!1,get:function(){return gl((e=n).database)?e.engine.Decoder:void 0;var e},set:function(){}}})}return y()(i,[{key:"collection",value:function(e){return new r(e)}},{key:"toJSON",value:function(){}}]),i}()};function _l(e){return{database:hl.bind(null,e)}}var ml="database";function yl(e){e.registerService(function(e){var t={name:ml,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(ml)},appConfig:{get docSizeLimit(){return e.appConfig.db_doc_size_limit},get realtimePingInterval(){return e.appConfig.db_realtime_ping_interval},get realtimePongWaitTimeout(){return e.appConfig.db_realtime_pong_wait_timeout},get realtimeMaxReconnect(){return e.config.database.realtime.maxReconnect},get realtimeReconnectInterval(){return e.config.database.realtime.reconnectInterval},get realtimeTotalConnectionTimeout(){return e.config.database.realtime.totalConnectionTimeout},get realtimeQueryEventCacheTimeout(){return e.appConfig.db_realtime_query_event_cache_timeout}}};return{name:ml,context:t,getAPIs:_l.bind(null,t)}}(e))}function bl(e){var t=function(){function e(t){_()(this,e),this.target=void 0,this._internalType=Tr,this.target=t,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}return y()(e,[{key:"toString",value:function(){return JSON.stringify({target:this.target})}}]),e}();return function(e){return new t(e)}}function wl(e){return{CloudID:(t=function(){function e(t){_()(this,e),this.cloudID=void 0,this._internalType=Cr,this.cloudID=t,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}return y()(e,[{key:"toJSON",value:function(){return this.cloudID}},{key:"toString",value:function(){return this.cloudID}}]),e}(),function(e){return new t(e)}),CDN:bl()};var t}var Il="utils";function Sl(e){e.registerService(function(e){var t={name:Il,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug}};return{name:Il,context:t,getAPIs:wl.bind(null,t)}}(e))}var Cl=new(function(){function e(){_()(this,e),this._running=0,this._onIdleCallbacks=[],this._idleTriggerTimer=void 0}return y()(e,[{key:"running",get:function(){return this._running}},{key:"incrementRunning",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._running+=e,this._idleTriggerTimer&&clearTimeout(this._idleTriggerTimer)}},{key:"decrementRunning",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this._running-=t,this._running<0&&(this._running=0),this._running<=0&&this._onIdleCallbacks.length&&(this._idleTriggerTimer=setTimeout((function(){if(e._idleTriggerTimer=null,e._onIdleCallbacks.length){var t=e._onIdleCallbacks.shift();t&&t()}}),50))}},{key:"onceIdle",value:function(e){this._running>0?this._onIdleCallbacks.push(e):e()}}]),e}());function Tl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.fireOnIdle&&Cl.running>0)return new Promise((function(n,r){Cl.onceIdle(g()(w().mark((function i(){var o;return w().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Tl(e,t);case 3:o=i.sent,n(o),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),r(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])}))))}));if(t.onFire)try{t.onFire()}catch(e){}return new Promise((function(n,r){var i,o,a,s,c;Cl.incrementRunning(),Gn((e.cloud||t.cloud||{}).identifiers)._operateWXData({appid:null===(i=e.cloud)||void 0===i||null===(o=i.instanceOptions)||void 0===o?void 0:o.resourceAppid,accessToken:null===(a=e.cloud)||void 0===a||null===(s=a.authStorage)||void 0===s?void 0:s.getItem("access_token"),webRequest:null===(c=e.cloud)||void 0===c?void 0:c.webRequest,apiName:e.apiName||"qbase_commapi",reqData:e.data,requestInQueue:!1,success:function(e){var i=p()(p()({},e),{},{data:e.rawData});if(e.rawData)try{var o=JSON.parse(e.rawData);if(o.baseresponse&&0!==o.baseresponse.errcode){var a=new cn({errCode:o.baseresponse.errcode,errMsg:o.baseresponse.errmsg});return void r(a)}i=p()(p()({},e),{},{data:o})}catch(e){var s=new cn({errMsg:e&&e.toString()});return void r(s)}else if(t&&t.requireDataNotEmpty){var c=new cn({errCode:e.errCode,errMsg:"error empty internal server response, ".concat(e.errMsg)});return void r(c)}n(i)},fail:function(e){if(e&&e.errMsg)if(e.errMsg.includes("invalid scope")){var t="invalid scope 没有权限，请先开通云服务";(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}else{var n=e.errMsg.replace(/^operateWXData:fail /,"");(e=new Error(n)).errMsg=n,e.operateWXDataFail=!0}r(e)},complete:function(){e.complete&&e.complete.apply(null,arguments),Cl.decrementRunning()}})}))}const El=Tl;var kl={REALTIME_DB_MAX_RECONNECT:5,REALTIME_DB_WS_RECONNECT_INTERVAL:5e3,REALTIME_DB_TOTAL_CONNECTION_TIMEOUT:1/0};const xl={db_doc_size_limit:524288,db_realtime_ping_interval:15e3,db_realtime_pong_wait_timeout:15e3,db_realtime_query_event_cache_timeout:18e4,upload_max_file_size:20971520,get_temp_file_url_max_requests:50,call_function_poll_max_retry:10,call_function_max_req_data_size:5242880,call_function_client_poll_timeout:15e3,call_function_valid_start_retry_gap:6e4,call_container_poll_max_retry:10,call_container_client_poll_timeout:15e3,call_container_valid_start_retry_gap:6e4,call_container_max_req_data_size:5242880};var Al={},Pl={},Dl={},Ol="servicewechat.com",Nl=function(){function e(){_()(this,e),this._tunnelRequest=void 0,this._meta=void 0}var t,n;return y()(e,[{key:"setMetaData",value:function(e){this._meta=e}},{key:"setTunnelRequest",value:function(e){this._tunnelRequest=e}},{key:"getEndpoint",value:(n=g()(w().mark((function e(t){var n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Al[t],"container"!==t){e.next=5;break}if(!(null!=n&&n.url&&null!=n&&n.expiresTs&&Date.now()<n.expiresTs)){e.next=4;break}return e.abrupt("return",n);case 4:return e.abrupt("return",this.refreshContainerServiceEndpoint());case 5:if("servicewechatDNS"!==t){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"refreshContainerServiceEndpoint",value:(t=g()(w().mark((function e(){var t=this;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pl.container){e.next=2;break}return e.abrupt("return",Pl.container);case 2:return Dl.servicewechatGetIP||(Dl.servicewechatGetIP=!0,Gn().wx.onNetworkStatusChange((function(e){e.isConnected&&Rl()}))),clearTimeout(Dl.container),Pl.container=new Promise(function(){var e=g()(w().mark((function e(n,r){var i,o,a,s,c,u;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],o=0;case 2:if(!(o<3)){e.next=38;break}if(e.prev=3,a=Date.now(),!t._tunnelRequest){e.next=11;break}return e.next=8,t._tunnelRequest({apiName:"tcbapi_get_service_info",serializedReqData:"{}"});case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,El({apiName:"qbase_commapi",data:{qbase_api_name:"tcbapi_get_service_info",qbase_req:"{}",qbase_options:{},qbase_meta:t._meta,cli_req_id:"".concat(+new Date,"_").concat(Math.random())}});case 13:e.t0=e.sent;case 14:if(s=e.t0,c=s.data,!(Date.now()-a>1e3*c.expires_in)){e.next=19;break}return i.push("result already expired (startTs ".concat(a," resultTs ").concat(Date.now(),")")),e.abrupt("continue",35);case 19:return u=Date.now()+1e3*c.expires_in-(Date.now()-a),Al.container={url:c.service_url,token:c.token,http:c.http,key:c.key,timestamp:c.timestamp,ip:c.ip,vip:c.vip,ips:c.ips?new Set(c.ips):void 0,expiresTs:u},n(Al.container),delete Pl.container,Rl(),l=c.token,nr=l,Ol=!c.vip||c.ips||Al.container.localDNSTrusted?"servicewechat.com":c.vip,Ll(),clearTimeout(Dl.container),Dl.container=setTimeout((function(){t.refreshContainerServiceEndpoint()}),.8*(u-Date.now())),e.abrupt("return");case 32:e.prev=32,e.t1=e.catch(3),i.push(e.t1+"");case 35:o++,e.next=2;break;case 38:r("get container service endpoints errors: ".concat(i.join("\n"))),delete Pl.container;case 40:case"end":return e.stop()}var l}),e,null,[[3,32]])})));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",Pl.container);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}();function Rl(){var e;null!==(e=Al.container)&&void 0!==e&&e.ips&&"ios"===jr().platform&&Gn().wx.downloadFile({url:"https://servicewechat.com/wxa-qbase/keepalive",success:function(e){var t,n=null===(t=Al.container)||void 0===t?void 0:t.ips;Al.container.localDNSTrusted=n&&e.profile&&n.has(e.profile.peerIP),Ol=Al.container.localDNSTrusted?"servicewechat.com":Al.container.vip},fail:function(e){console.warn("check local dns failed",e)}})}var Ml=!1;function Ll(){return Bl.apply(this,arguments)}function Bl(){return(Bl=g()(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ml){e.next=2;break}return e.abrupt("return");case 2:return t=Gn(),n=function(){return new Promise((function(e){var n=Date.now(),r="servicewechat.com"===Ol;t._requestSkipCheckDomain({url:"".concat(r?"https":"http","://").concat(Ol,"/wxa-qbase/keepalive"),header:r?{}:{host:"servicewechat.com"},method:"GET",dataType:"text",enableHttp2:r,success:function(){e(),fr(22990,0,["privateHttpKeepAlive",Ol,n,Date.now(),Date.now()-n].join(","))},fail:function(){e()}})}))},Ml=!0,function e(){setTimeout(g()(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:e();case 3:case"end":return t.stop()}}),t)}))),2e4)}(),e.abrupt("return",n());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sdk,n=e.identifiers||{};t&&Hn(n,t);var r=new Wl(n,!1);return r},jl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Fl(e).exportAPI},Wl=function(){function e(t,n){var r,i=this;_()(this,e),this.inited=!1,this.isInstance=void 0,this.services={},this.apiServiceMap={},this.meta=void 0,this.config=void 0,this.identifiers=void 0,this.debug=!1,this.request=void 0,this.exportAPI=void 0,this.appConfig=void 0,this.apiPermissions=void 0,this.runtimeInfo=void 0,this.serviceEndpoint=void 0,this.authStorage=void 0,this.testSpeed=g()(w().mark((function e(){var t,n,r;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=+new Date,n=t,a=void 0,a=(o={cloud:i,apiName:"tcbapi_testspeed",serializedReqData:null}).cloud,r={apiName:"qbase_commapi",data:{qbase_api_name:o.apiName,qbase_req:o.serializedReqData,qbase_options:{env:o.env},qbase_meta:a.getMetaData(),cli_req_id:"".concat(+new Date,"_").concat(Math.random())},cloud:a},e.abrupt("return",Tl(r,{fireOnIdle:!0,onFire:function(){t=+new Date,n=t}}).then((function(e){ur({apiName:"cloud.testspeed",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:+new Date,tunnelStartTime:n,tunnelTimeNoCSNetCost:e.data.baseresponse.stat.qbase_cost_time})})).catch((function(e){0})));case 4:case"end":return e.stop()}var o,a}),e)}))),this.identifiers=t,this.isInstance=n,this.runtimeInfo=Fi(),this.serviceEndpoint=new Nl,this.request=(r={cloud:this}.cloud,function(e){var t=r.isInstance?p()(p()({},r.instanceOptions),{},{appid:r.instanceOptions.resourceAppid,env:r.instanceOptions.resourceEnv}):p()(p()({},e),{},{env:e.env});return Tl({apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:t,qbase_meta:r.getMetaData(),cli_req_id:"".concat(+new Date,"_").concat(Math.random())},cloud:r})});var o=this;this.exportAPI={init:this.init.bind(this)},this.isInstance||(this.exportAPI.Cloud=function(e){return new Ul(t,o,e).exportAPI}),function(e){_i(e),Ji(e),yl(e),Sl(e),Mi(e)}(this),this.meta={session_id:Date.now()+""},this.serviceEndpoint.setMetaData(this.getMetaData()),this.serviceEndpoint.setTunnelRequest(this.request),this.config={database:Vl()},this.appConfig=p()({},xl),this.apiPermissions={};try{$r.onReady((function(){setTimeout((function(){!function(){if(!or)try{var e=Gn();e.wx.getNetworkType({success:function(e){sr=e.networkType},complete:function(){or=!0,cr()}}),e.wx.onNetworkStatusChange((function(e){or||(or=!0,cr()),sr=e.networkType}))}catch(e){}}()}),2e3)}))}catch(e){}}return y()(e,[{key:"getMetaData",value:function(){var e;if(!this.meta.sdk_version){var t=Gn(this.identifiers);if(t){var n=t.wx;n&&n.version&&("miniprogram"===this.runtimeInfo.env?this.meta.sdk_version="wx-miniprogram-sdk/".concat(n.version.version," (").concat(Date.parse("".concat(n.version.updateTime," GMT+0800")),")"):this.meta.sdk_version="wx-web-sdk/".concat(void 0," (").concat(Date.parse("".concat(void 0," GMT+0800")),")"))}}return this.meta.filter_user_info="singlePage"===(null===(e=$r.appLaunchInfo)||void 0===e?void 0:e.mode),this.meta}},{key:"getConfig",value:function(){return this.config}},{key:"getEnvForService",value:function(e){if(this.isInstance)return this.instanceOptions.resourceEnv;var t=this.config;if(t.env)switch(zt(t.env)){case"string":return t.env;case"object":return t.env[e];default:return}}},{key:"checkAPIPermission",value:function(e){return!this.apiPermissions.hasOwnProperty(e)||1===this.apiPermissions[e]}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.inited=!0,this.initConfig(t),Promise.all([this.sendInitRequest().then((function(){e.testSpeed()}))]).then((function(){}))}},{key:"initConfig",value:function(e){this.config=JSON.parse(JSON.stringify(e)),this.config.database?this.config.database=Ht(this.config.database,Vl()):this.config.database=Vl()}},{key:"sendInitRequest",value:function(){var e=this,t="string"==typeof this.config.env?this.config.env:void 0,n=JSON.stringify({trace_user:!1!==this.config.traceUser,env:t,region:this.config.region}),r=+new Date,i=r;return this.request(p()(p()({},this.config),{},{apiName:"tcbapi_init",serializedReqData:n,env:t})).then((function(t){var n=+new Date,o=t.data;e.appConfig=p()(p()({},e.appConfig),o.config);for(var a=o.tcb_api_list||[],s=0,c=a.length;s<c;s++)e.apiPermissions[a[s].apiname]=a[s].status;ur({apiName:"cloud.init",apiEndTime:+new Date,apiStartTime:r,tunnelEndTime:n,tunnelStartTime:i,tunnelTimeNoCSNetCost:o.baseresponse.stat.qbase_cost_time})})).catch((function(e){console.error("cloud init error: ",e)}))}},{key:"registerService",value:function(e){this.services[e.name]=e;var t=e.getAPIs();for(var n in t)if(this.apiServiceMap[n]=e.name,"function"==typeof t[n])this.registerFunction(n,!0,t[n]);else{var r=t[n],i=r.initRequired,o=r.fn;this.registerFunction(n,i,o)}}},{key:"registerFunction",value:function(e,t,n){var r=this;this.exportAPI[e]=t?function(){if(!r.inited)throw new cn({errMsg:"Cloud API isn't enabled, please call wx.cloud.init first\n请先调用 wx.cloud.init() 完成初始化后再调用其他云 API。"});if(!r.checkAPIPermission(e))throw new cn({errCode:sn.SDK_API_PERMISSION_DENIED,errMsg:sn[sn.SDK_API_PERMISSION_DENIED]});return n.apply(r,arguments)}:n}},{key:"toJSON",value:function(){}}]),e}(),Ul=function(e){u()(c,e);var t,n,i,a=d()(c);function c(e,t,n){var i;if(_()(this,c),(i=a.call(this,e,!0)).defaultInstance=void 0,i.instanceOptions=void 0,i.webRequest=void 0,i._webCurrentRefreshTokenPromise=void 0,"web"===i.runtimeInfo.env){if(!n.identityless&&!n.appid)throw new Error("appid must be provided");if(!n.resourceAppid)throw new Error("resourceAppid must be provided")}if(!n.resourceEnv)throw new Error("resourceEnv must be provided");if(n.config||(n.config={}),i.defaultInstance=t,i.instanceOptions=JSON.parse(JSON.stringify(n)),i.meta=t.meta,i.apiPermissions=t.apiPermissions,i.instanceOptions.config.database=Ht(Vl(),i.instanceOptions.config.database||{}),"web"===i.runtimeInfo.env){if(i.exportAPI.init=i.webInit.bind(r()(i)),i.webRequest=(0,Li.getBoundAuthRequest)(r()(i)),i.registerService((0,Li.createWebService)(r()(i))),!i.instanceOptions.identityless&&(i.authStorage=i.defaultInstance.authStorage,!i.authStorage))throw new Error("authStorage not found")}else i.exportAPI.init=i.miniprogramInit.bind(r()(i));return i.instanceOptions.resourceAppid&&(i.exportAPI.refreshAuth=i.refreshAuth.bind(r()(i))),i}return y()(c,[{key:"miniprogramInit",value:(i=g()(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inited){e.next=2;break}return e.abrupt("return");case 2:if(!this.instanceOptions.resourceAppid){e.next=13;break}return e.next=5,this.refreshAuth();case 5:if(t=e.sent,0!==(n=t.data.env_auth_info).errCode){e.next=12;break}return o()(s()(c.prototype),"init",this).call(this),e.abrupt("return",{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time});case 12:return e.abrupt("return",{errCode:n.errCode,errMsg:n.errMsg});case 13:o()(s()(c.prototype),"init",this).call(this);case 14:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"webInit",value:(n=g()(w().mark((function e(){var t,n,r=this;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inited){e.next=2;break}return e.abrupt("return");case 2:if(this.instanceOptions.identityless){e.next=14;break}return e.next=5,this.refreshAuth();case 5:if(t=e.sent,0!==(n=t.data.env_auth_info).errCode){e.next=13;break}return this.sendInitRequest().then((function(){r.testSpeed()})),o()(s()(c.prototype),"init",this).call(this),e.abrupt("return",{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time});case 13:return e.abrupt("return",{errCode:n.errCode,errMsg:n.errMsg});case 14:this.inited=!0;case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"webRefreshToken",value:(t=g()(w().mark((function e(){var t=this;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._webCurrentRefreshTokenPromise){e.next=2;break}return e.abrupt("return",this._webCurrentRefreshTokenPromise);case 2:return this._webCurrentRefreshTokenPromise=new Promise(function(){var e=g()(w().mark((function e(n,r){var i,o;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.webRequest({url:"/refresh_token",method:"POST",json:{appid:t.instanceOptions.appid,refresh_token:t.authStorage.getItem("refreshToken")}});case 3:i=e.sent,o=i.data,t.authStorage.setItem("appid",o.access_token),n(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),r(e.t0);case 12:return e.prev=12,t._webCurrentRefreshTokenPromise=void 0,e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,9,12,15]])})));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",this._webCurrentRefreshTokenPromise);case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"refreshAuth",value:function(){var e=JSON.stringify({resource_appid:this.instanceOptions.resourceAppid,resource_env:this.instanceOptions.resourceEnv}),t=+new Date,n=t,r=this.request({apiName:"tcbapi_getenvauth",serializedReqData:e});return r.then((function(e){var r=+new Date;ur({apiName:"cloud.refreshAuth",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:r,tunnelStartTime:n})})),r}}]),c}(Wl);function Vl(){return{realtime:{maxReconnect:kl.REALTIME_DB_MAX_RECONNECT,reconnectInterval:kl.REALTIME_DB_WS_RECONNECT_INTERVAL,totalConnectionTimeout:kl.REALTIME_DB_TOTAL_CONNECTION_TIMEOUT}}}var Gl=Symbol("CDN"),Hl=function e(t){_()(this,e),this.symbol=Gl,this.options=void 0,this.options=t};function Zl(e,t){return new Promise((function(n,r){(t||Gn()).uploadToCommonCDN(p()(p()({},e),{},{success:n,fail:r}))}))}function ql(e,t){return new Promise((function(n,r){(t||Gn())._operateWXData(p()(p()({},e),{},{success:n,fail:r}))}))}var zl,Yl,Kl,Jl,$l=(zl=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.service&&t.api){e.next=3;break}throw new Error("field 'service' and 'api' must be provided");case 3:return n=new WeakMap,r=[],t.data&&JSON.stringify(t.data,(function(e,i){return i&&i.symbol===Gl?void r.push(new Promise((function(e,r){var o,a={appType:301,fileType:20303,fileKey:"file_".concat(Math.random())},s=i;switch(o=s.options,Object.prototype.toString.call(o).slice(8,-1)){case"Object":if(!s.options.filePath)throw new Error("filePath must be provided");a.filePath=s.options.filePath;break;default:a.fileData=s.options}e(Zl(a,t.sdk).then((function(e){n.set(i,e.fileUrl)})))}))):i})),e.next=8,Promise.all(r);case 8:return i=JSON.stringify(t.data,(function(e,t){return t&&t.symbol===Gl&&n.has(t)?n.get(t):t})),e.next=11,ql({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:t.service,api_name:t.api,data:i,client_msg_id:"".concat(Math.random(),"_").concat(Date.now()),version:1}},t.sdk);case 11:o=e.sent,a=o.rawData;try{l=JSON.parse(a),s=l.request_id,0===l.errcode?c=JSON.parse(l.data):(d="invokeService:fail ".concat(l.errcode," ").concat(l.errmsg," (requestId: ").concat(s,")"),(u=new Error(d)).errCode=l.errcode,u.errMsg=d,u.requestId=s)}catch(e){f="invokeService:fail inner protocol parse failed (requestId: ".concat(s||"empty",")"),(u=new Error(f)).errCode=-1,u.errMsg=f,u.requestId=s}if(!u){e.next=17;break}throw u;case 17:return e.abrupt("return",{errMsg:"invokeService:ok",data:c,requestId:s});case 20:if(e.prev=20,e.t0=e.catch(0),p="invokeService:fail ",!(e.t0&&e.t0.errMsg&&e.t0.err_code)){e.next=30;break}throw p+=e.t0.errMsg,(h=new Error(p+"(err_code ".concat(e.t0.err_code,")"))).errCode=e.t0.err_code,h;case 30:if(!(e.t0&&e.t0.errMsg&&e.t0.errCode)){e.next=34;break}throw e.t0;case 34:throw new Error("invokeService:fail ".concat(e.t0));case 35:case"end":return e.stop()}}),e,null,[[0,20]])}))),function(e){return zl.apply(this,arguments)});!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e[e.PreResp=3]="PreResp",e[e.FinalResp=4]="FinalResp"}(Yl||(Yl={})),function(e){e[e.None=0]="None",e[e.SysErr=1]="SysErr",e[e.Timeout=2]="Timeout"}(Kl||(Kl={})),function(e){e[e.Sync=0]="Sync",e[e.LongAsync=2]="LongAsync"}(Jl||(Jl={}));var Xl,Ql={SM_EXCEED_MAX_TIMEOUT_POLL_RETRY:100,SM_EMPTY_CALL_RESULT:101,SM_EXCEED_MAX_POLL_RETRY:102,SM_PROVIDER_EXECUTION_ERROR:103,SM_POLL_RESULT_EXPIRED:104,SM_EMPTY_POLL_RESULT_BASE_RESP:105,SM_POLL_RESULT_BASE_RESP_RET_ABNORMAL:106,SM_UNKNOWN_SCENE:107,SM_SYSTEM_ERROR:108},ed="exceed max timeout retry",td="empty call result",nd="exceed max poll retry",rd="invokeService",id=2e4;!function(e){e[e.InvalidRequestId=14]="InvalidRequestId"}(Xl||(Xl={}));var od=function(e){var t=new Date;return"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds()," ").concat(e)},ad=function(e){return e.join("->")},sd=function(){var e=g()(w().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,h,v,_,m,y,b,I;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I=function(e,t,n){var r=function(t){e.push(od("app ".concat(t)))};Br(r);return{resolve:function(e){Fr(r),t(e)},reject:function(e){Fr(r),n(e)}}},b=function(){return(b=g()(w().mark((function e(n){var r,i,o,a,s,c,u,l,d,f,h,v,_,m,b,I,S,C,T,E,k,x;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.param,i=n.data,o=n.callID,a=n.scene,s=n.retryReason,c=n.tryCount,u=n.trace,l=n.systemErrorRetry,d=n.timeoutErrorRetry,f=n.resolve,h=n.reject,v={service_id:r.service,api_name:r.api,data:a===Yl.CALL?i:void 0,client_msg_id:"".concat(Math.random(),"_").concat(Date.now()),version:2,call_id:o,scene:a,retry_reason:s},_=!1,m=!1,b=function(){clearTimeout(S),m=!0},I=+new Date,S=setTimeout(g()(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(id,!(+new Date-I>2e4)){e.next=6;break}return e.next=4,xr();case 4:if(!m){e.next=6;break}return e.abrupt("return");case 6:if(Xr()||!(+new Date-I>60)){e.next=9;break}return u.push(od("timeout, exceed max retry gap")),e.abrupt("return",h(ln({errCode:Ql.SM_POLL_RESULT_EXPIRED,errMsg:"timeout for retry, cannot retry fetching the result anymore (callId: ".concat(o,") (trace: ").concat(ad(u),")")},rd)));case 9:_=!0,n.timeoutErrorRetry>0?(u.push(od("timeout, retry")),y(p()(p()({},n),{},{scene:a,retryReason:Kl.Timeout,tryCount:c-1,timeoutErrorRetry:d-1}))):(u.push(od("timeout, abort")),h(ln({errCode:Ql.SM_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:"".concat(ed," (callId: ").concat(o,") (trace: ").concat(ad(u),")")},rd)));case 11:case"end":return e.stop()}}),e)}))),id),e.prev=7,new Date,e.next=11,ql({apiName:"webapi_servicemarket_jsapi_comm",reqData:v},t.sdk);case 11:if(C=e.sent,e.prev=12,new Date,!_){e.next=16;break}return e.abrupt("return");case 16:if(b(),C.rawData,T=JSON.parse(C.rawData)){e.next=22;break}return u.push(od("empty resp")),e.abrupt("return",h(ln({errCode:Ql.SM_EMPTY_CALL_RESULT,errMsg:td},rd)));case 22:if(T.scene!==Yl.PreResp){e.next=32;break}if(!(c>=0)){e.next=28;break}u.push(od("normal poll")),y(p()(p()({},n),{},{scene:Yl.POLL,retryReason:Kl.None,tryCount:c-1})),e.next=30;break;case 28:return u.push(od("too many polls, abort")),e.abrupt("return",h(ln({errCode:Ql.SM_EXCEED_MAX_POLL_RETRY,errMsg:"".concat(nd," (callId: ").concat(o,") (trace: ").concat(ad(u),")")},rd)));case 30:e.next=46;break;case 32:if(T.scene!==Yl.FinalResp){e.next=44;break}if(0===T.errcode){e.next=39;break}return(E=ln({errCode:Ql.SM_PROVIDER_EXECUTION_ERROR,errMsg:"requestID ".concat(T.request_id,", error message ").concat(T.provider_errmsg||"unknown"," (callid ").concat(o,")")},rd)).requestID=T.request_id,e.abrupt("return",h(E));case 39:k=T.data;try{k=JSON.parse(k)}catch(e){}return e.abrupt("return",f({result:k,requestID:T.request_id}));case 42:e.next=46;break;case 44:return u.push(od("unexpected scene")),e.abrupt("return",h(ln({errCode:Ql.SM_UNKNOWN_SCENE,errMsg:"unknown scene ".concat(T.scene," (callId: ").concat(o,") (trace: ").concat(ad(u),")")},rd)));case 46:e.next=51;break;case 48:e.prev=48,e.t0=e.catch(12),h(ln({errCode:Ql.SM_POLL_ERROR,errMsg:"polling catch error: ".concat(e.t0," (callId: ").concat(o,")")},rd));case 51:e.next=61;break;case 53:if(e.prev=53,e.t1=e.catch(7),new Date,e.t1,!_){e.next=58;break}return e.abrupt("return");case 58:b(),x=e.t1 instanceof Error?e.t1:JSON.stringify(e.t1),e.t1&&e.t1.operateWXDataFail&&l>0?(u.push(od("system error (".concat(x,"), retry"))),y(p()(p()({},n),{},{scene:a,retryReason:Kl.SysErr,tryCount:c-1,systemErrorRetry:l-1}))):(u.push(od("system error (".concat(x,"), abort"))),h(ln("".concat(x," (callId: ").concat(o,") (trace: ").concat(ad(u),")"),rd)));case 61:case"end":return e.stop()}}),e,null,[[7,53],[12,48]])})))).apply(this,arguments)},y=function(e){return b.apply(this,arguments)},m=function(){return(m=g()(w().mark((function e(t,n,r){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){var o=[od("start")],a=I(o,e,i),s=a.resolve,c=a.reject;y({param:t,data:n,callID:r,scene:Yl.CALL,retryReason:Kl.None,tryCount:50,systemErrorRetry:2,timeoutErrorRetry:2,trace:o,resolve:s,reject:c})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)},_=function(e,t,n){return m.apply(this,arguments)},e.prev=5,t.service&&t.api){e.next=8;break}throw new Error("field 'service' and 'api' must be provided");case 8:return n=new WeakMap,r=[],t.data&&JSON.stringify(t.data,(function(e,i){return i&&i.symbol===Gl?void r.push(new Promise((function(e,r){var o,a={appType:301,fileType:20303,fileKey:"file_".concat(Math.random())},s=i;switch(o=s.options,Object.prototype.toString.call(o).slice(8,-1)){case"Object":if(!s.options.filePath)throw new Error("filePath must be provided");a.filePath=s.options.filePath;break;default:a.fileData=s.options}e(Zl(a,t.sdk).then((function(e){n.set(i,e.fileUrl)})))}))):i})),e.next=13,Promise.all(r);case 13:if(i=JSON.stringify(t.data,(function(e,t){return t&&t.symbol===Gl&&n.has(t)?n.get(t):t})),o="".concat(Math.random(),"_").concat(Date.now()),t.async){e.next=25;break}return e.next=18,_(t,i,o);case 18:return a=e.sent,s=a.result,c=a.requestID,e.abrupt("return",{errMsg:"invokeService:ok",data:s,requestId:c});case 25:return u={service_id:t.service,api_name:t.api,data:i,client_msg_id:"".concat(Math.random(),"_").concat(Date.now()),version:2,call_id:o,scene:Yl.CALL,retry_reason:Kl.None,req_type:Jl.LongAsync},e.next=28,ql({apiName:"webapi_servicemarket_jsapi_comm",reqData:u},t.sdk);case 28:if(l=e.sent,(d=JSON.parse(l.rawData)).scene!==Yl.FinalResp||0!==d.errcode){e.next=35;break}return e.abrupt("return",{errMsg:"invokeService:ok",requestId:d.request_id});case 35:throw(f=ln({errCode:Ql.SM_SYSTEM_ERROR,errMsg:"requestID ".concat(d.request_id,", error message ").concat(d.errmsg||"unknown"," (callid ").concat(o,")")},rd)).requestID=d.request_id,f;case 38:e.next=55;break;case 40:if(e.prev=40,e.t0=e.catch(5),h="invokeService:fail ",!(e.t0&&e.t0.errMsg&&e.t0.err_code)){e.next=50;break}throw h+=e.t0.errMsg,(v=new Error(h+"(err_code ".concat(e.t0.err_code,")"))).errCode=e.t0.err_code,v;case 50:if(!(e.t0&&e.t0.errMsg&&e.t0.errCode)){e.next=54;break}throw e.t0;case 54:throw new Error("invokeService:fail ".concat(e.t0));case 55:case"end":return e.stop()}}),e,null,[[5,40]])})));return function(t){return e.apply(this,arguments)}}();function cd(e){return ud.apply(this,arguments)}function ud(){return(ud=g()(w().mark((function e(t){var n,r,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ql({apiName:"webapi_servicemarket_jsapi_retrieve",reqData:{request_id:t.requestId}},t.sdk);case 2:if(n=e.sent,0!==(r=JSON.parse(n.rawData)).errcode){e.next=13;break}if(!r.provider_errmsg){e.next=10;break}return e.abrupt("return",{errCode:0,errMsg:"getAsyncResult:fail provider execution error",status:r.status,providerErrMsg:r.provider_errmsg,requestId:r.request_id});case 10:return e.abrupt("return",{errCode:0,errMsg:"getAsyncResult:ok",data:JSON.parse(r.data),status:r.status,requestId:r.request_id});case 11:e.next=17;break;case 13:throw(i=new Error("getAsyncResult:fail requestID ".concat(r.request_id,", error message ").concat(r.errmsg||"unknown"))).errCode=r.errcode,i.errMsg=r.errmsg,i;case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ld="invokeService",dd="getAsyncResult",fd=function(e){return Pn(e)?pd(e):Xr()&&!e.async?$l(e):sd(e)},pd=function(e){(Xr()&&!e.async?$l(e):sd(e)).then((function(t){xn(ld,e,t)})).catch((function(t){An(ld,e,t)}))},hd=function(e){return Pn(e)?gd(e):cd(e)},gd=function(e){cd(e).then((function(t){xn(dd,e,t)})).catch((function(t){An(dd,e,t)}))};function vd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sdk;return{invokeService:function(e){return fd(p()(p()({},e),{},{sdk:t}))},getAsyncResult:function(e){return hd(p()(p()({},e),{},{sdk:t}))},CDN:Hl}}})(),__cloudSDK__=__webpack_exports__})(),(()=>{var e={9954:(e,t,n)=>{"use strict";n.d(t,{b:()=>o,_:()=>a});var r=n(8947),i=n(8392),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,i.IN)("getABTestConfig",e)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};7===r.Z.appType?(0,i.IN)("getABTestConfig",e):(0,i.YG)("getABTestConfig",e,"permission denied",1)}},4449:(e,t,n)=>{"use strict";n.d(t,{r3:()=>d.r3,FE:()=>d.FE,YG:()=>d.YG,zy:()=>d.zy,IN:()=>d.IN,bb:()=>d.bb,jQ:()=>d.jQ,Ld:()=>d.Ld,eW:()=>f,AL:()=>h,yR:()=>g,kV:()=>_,JF:()=>m,g9:()=>w});var r=n(8676),i=n.n(r),o=n(9947),a=n(2363),s=n(1484),c=n(9588),u=n(8947),l=n(968),d=n(8392);n(2984);function f(e,t,n){var r=t.replace(/\.html\?.*|\.html$/,"");return!!__appServiceEngine__.hasPageRoute(r)||((0,d.YG)(e,n,'page "'.concat((0,o.Z8)(t),'" is not found')),!1)}var p=!1;function h(e){p=!!e.state,e.success&&e.success({state:p})}function g(e,t){!function(e){var t=(0,c.Tp)(e,"thirdApp");0!==t&&1!==t||!(0,l.er)()||1===t&&b()&&(0,d.IN)("showToast",{icon:"",title:"暂不支持当前功能",duration:2500})}(e);var n=(0,c.Tp)(e,"ui");if(n>0&&p)return!1;if(n>=20)if(void 0===__appServiceEngine__){if(t)return!1}else{var r=__appServiceEngine__.getCurrentRoute()||"";if(/^\/?__wx__\//.test(r))return!1;var i=r.match(/(?:^|\/)__plugin__\/(.*?)\//);if((i?i[1]:"")!==t&&n>=30)return!1}var o=(0,c.Tp)(e,"singlePage");return!((!o||1===o)&&(0,l.Av)())||(1===o&&b()&&((0,l.$)()?(0,d.IN)("highlightTitleForSinglePage"):(0,d.IN)("showToast",{icon:"",title:"请前往小程序使用完整服务",duration:2500})),!1)}var v=!1;function _(e){v="tap"===e}function m(){setTimeout((function(){v=!1}),0)}function y(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(4===u.Z.appType)return _("tap"),e.apply(t,r),void m();__virtualDOM__.wrapTapMark((function(){e.apply(t,r)}))}}function b(){return 4===u.Z.appType?v:v||__virtualDOM__.checkTapMark()}function w(e,t){return function(n){var r=this,o=(0,c.Tp)(e,"tap"),f=b(),p=n;if(10!==o||f||((0,s.Y)({name:e,scene:0,strategy:1}),!a.gm&&(0,l.KU)(e))){if((20===o&&f||30===o)&&("function"==typeof n?p=y.call(this,n):"object"===i()(n)&&(p=Object.assign({},n),["success","fail","complete"].forEach((function(e){"function"==typeof p[e]&&(p[e]=y.call(r,p[e]))})))),40!==o||4===u.Z.appType||f){for(var h=arguments.length,g=new Array(h>1?h-1:0),v=1;v<h;v++)g[v-1]=arguments[v];var _=t.apply(this,[p].concat(g));return 4===u.Z.appType&&[10,30,40].includes(o)&&m(),_}n&&(n.fail||n.complete)&&setTimeout((function(){(0,d.YG)(e,n,"can only be invoked by user TAP gesture.")}),0)}else n&&(n.fail||n.complete)&&setTimeout((function(){(0,d.YG)(e,n,"can only be invoked by user TAP gesture.")}),0)}}},6788:(e,t,n)=>{"use strict";n.d(t,{w$:()=>r});var r={FORE_GROUND:0,BACK_GROUND:1,LOCK:2}},3638:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={lastRoute:"",lastOpenType:"",query:{},runningStatus:"active",navigatorLock:!1,openUrlLock:!1,possessingBackgroundAudioPlayer:!1,webviewEventCallback:null,hanged:!1,appStatus:n(6788).w$.FORE_GROUND,navigationBarTitleMap:{},currentNetworkType:""}},4531:(e,t,n)=>{"use strict";n.d(t,{kQ:()=>s,oZ:()=>c,dq:()=>u,V9:()=>l,RK:()=>d});var r=n(6326),i=n(8392),o=n(9947),a=new r.Z;(0,i.jQ)("onPageReload",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.webviewId=t,a.emit("onPageReload",e)}));var s=function(e){a.on("onPageReload",(function(t){t.path&&(t.path=(0,o.Z8)(t.path)),"function"==typeof e&&e(t)}))},c=function(e){a.emit("onBeforeUnloadPage_".concat(e),e),a.removeAllListeners("onBeforeShareAppMessage_".concat(e))},u=function(e,t){a.once("onBeforeUnloadPage_".concat(e),(function(e){"function"==typeof t&&t(e)}))},l=function(e){a.emit("onBeforeShareAppMessage_".concat(e),e)},d=function(e,t){a.on("onBeforeShareAppMessage_".concat(e),(function(e){"function"==typeof t&&t(e)}))}},9947:(e,t,n)=>{"use strict";n.d(t,{Hw:()=>m,Em:()=>h.Em,sd:()=>y,S0:()=>b,s$:()=>w,p9:()=>I,Bf:()=>S,HR:()=>C,cE:()=>T,mQ:()=>E,f0:()=>k,yP:()=>x,Pp:()=>A,Z8:()=>P,l0:()=>D,iZ:()=>O,l7:()=>N,sM:()=>B,RG:()=>F,Nf:()=>j,M8:()=>W,dK:()=>U,yC:()=>V,AK:()=>G,El:()=>H,Ky:()=>Z});var r=n(7163),i=n.n(r),o=n(4742),a=n.n(o),s=n(7541),c=n.n(s),u=n(3087),l=n.n(u),d=n(8676),f=n.n(d),p=n(8947),h=n(9267),g=(n(2363),n(4547)),v=/^[-+a-zA-Z0-9]+:\/\//,_=/^__[-+a-zA-Z0-9]+__\//;function m(e,t){return __errorTracer__.wrapSystemFunction("appServiceSDKScriptError",t,e)}function y(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("[getRealRoute] lastRoute=".concat(e,", relativeRoute=").concat(t,", needTrans=").concat(n),n&&(t=A(t)),0===t.indexOf("/"))return t.substr(1);if(0===t.indexOf("./"))return y(e,t.substr(2),!1);var r,i,o=t.split("/");for(r=0,i=o.length;r<i&&".."===o[r];r++);o.splice(0,r);var a=e.length>0?e.split("/"):[];a.splice(a.length-r-1,r+1);var s=a.concat(o),c=s.join("/");return"[getRealRoute] finalRoute=".concat(c),c}function b(e){var t=e.match(v);if(!t)return e;var n=t[0];if("plugin://"===n){var r=n.length,i=e.indexOf("/",r);if(i>=0){var o=e.slice(r,i),a=p.Z.plugins&&p.Z.plugins[o]?p.Z.plugins[o].provider:o;e=e.slice(0,r)+a+e.slice(i)}var s=e.indexOf("?");s<0&&(s=e.length);var c=e.slice(0,s),u=exparser.Component._list[c];if(!u)throw new D('Page "'.concat(c,'" is not found'));e=u.is+e.slice(s)}else if("plugin-private://"===n){var l=e.indexOf("?");l<0&&(l=e.length);var d=e.slice(0,l);e="/"+__appServiceEngine__.convertComponentAliasToRoute(d)+e.slice(l)}else{if("wx://"!==n)throw new D('Unknown URL protocol "'.concat(n,'"'));e="/__wx__/"+e.slice(5)}return e}function w(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];v.test(t);)t=b(t);return y(e,t,n)}function I(e){var t=e.match(v),n=e.match(_),r="";if(t){var i=t[0];if("plugin://"===i){var o=i.length,a=e.indexOf("/",o);if(a>=0){var s=e.slice(o,a);r=p.Z.plugins&&p.Z.plugins[s]?p.Z.plugins[s].provider:s}}else if("plugin-private://"===i){var c=i.length,u=e.indexOf("/",c);if(u>=0)r=e.slice(c,u)}else"wx://"===i&&(r="//")}if(n){var l=n[0];if("__plugin__/"===l){var d=l.length,f=e.indexOf("/",d);if(f>=0)r=e.slice(d,f)}else"__wx__/"===l&&(r="//")}return r}function S(e,t){var n=I(t);return!n||I(__virtualDOM__.convertRouteToComponentAlias(e))===n}function C(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"!==f()(e))return e;var n=[];for(var r in e)if((0,g.n)(e,r))if(t)try{n.push("".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(e[r])))}catch(t){n.push("".concat(r,"=").concat(e[r]))}else n.push("".concat(r,"=").concat(e[r]));return n.join("&")}function T(e,t){if("string"==typeof e&&"object"===f()(t)&&null!==t&&Object.keys(t).length>0){var n=e.split("?");return n[0]+"?"+C(k((n[1]||"").split("&").reduce((function(e,t){if("string"==typeof t&&t.length>0){var n=t.split("="),r=n[0],i=n[1];e[r]=i}return e}),{}),Object.keys(t).reduce((function(e,n){return"object"===f()(t[n])?e[encodeURIComponent(n)]=encodeURIComponent(JSON.stringify(t[n])):e[encodeURIComponent(n)]=encodeURIComponent(t[n]),e}),{})))}return e}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http";return"http"===t?/^(http|https):\/\/.*/i.test(e):"websocket"===t?/^(ws|wss):\/\/.*/i.test(e):void 0}function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)e[n]=t[n];return e}),{})}function x(e){if("string"==typeof e){var t=e.split("?"),n=t[0],r=(t[1]||"").split("&").reduce((function(e,t){if("string"==typeof t&&t.length>0){var n=t.split("="),r=n[0],i=n[1];e[r]=i}return e}),{}),i=[];for(var o in r)(0,g.n)(r,o)&&i.push("".concat(o,"=").concat(encodeURIComponent(r[o])));return i.length>0?"".concat(n,"?").concat(i.join("&")):e}return e}function A(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?"".concat(t,"?").concat(n):t}function P(e){return"string"==typeof e?-1!==e.indexOf("?")?e.replace(/\.html\?/,"?"):e.replace(/\.html$/,""):e}var D=function(e){a()(n,e);var t=c()(n);function n(e){var r;return i()(this,n),(r=t.call(this,"APP-SERVICE-SDK:".concat(e))).type="AppServiceSdkKnownError",r}return n}(l()(Error)),O=function(e){a()(n,e);var t=c()(n);function n(e){var r;return i()(this,n),(r=t.call(this,"".concat(e))).type="ThirdScriptError",r}return n}(l()(Error));function N(e,t){for(var n in t)e[n]=t[n];return e}var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",M=globalThis.btoa||function(e){for(var t,n,r=String(e),i="",o=0,a=R;r.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&t>>8-o%1*8)){if((n=r.charCodeAt(o+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|n}return i},L=globalThis.atob||function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,i,o=0,a=0;i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?n+=String.fromCharCode(255&r>>(-2*o&6)):0)i=R.indexOf(i);return n};function B(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return M(t)}function F(e){for(var t=L(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function j(e){return Object.keys(e).reduce((function(t,n){return"string"==typeof e[n]?t[n]=e[n]:"number"==typeof e[n]?t[n]=e[n]+"":t[n]=Object.prototype.toString.apply(e[n]),t}),{})}function W(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}p.Z.clientVersion;function U(e,t,n){!1!==(0,h.Kn)(e)&&t!==n&&(0,g.n)(e,t)&&(e[n]=e[t],delete e[t])}function V(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var r=0;r<n;r++){var i=parseInt(e[r],10),o=parseInt(t[r],10);if(i>o)return 1;if(i<o)return-1}return 0}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?{errMsg:t}:void 0;"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?{errMsg:t}:void 0;"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}},7783:(e,t,n)=>{"use strict";n.d(t,{J:()=>h});var r=n(6965),i=n(2363),o=n(2274),a=n(8392),s=n(9267),c=(n(9947),r.Z.fs,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.r3)("readCompressedFile",e,{filePath:"",compressionAlgorithm:""})&&(0,a.IN)("readCompressedFile",e)}),u="weapp://wechat-game-runtime",l="readFile";var d=globalThis,f={};void 0!==r.Z.WebAssembly?f=r.Z.WebAssembly:void 0!==d.WebAssembly&&(f=d.WebAssembly);var p={Table:f.Table,Memory:f.Memory,Global:f.Global,Instance:f.Instance,instantiate:function(e,t){if("string"!=typeof e)return Promise.reject(new Error("WebAssembly.instantiate: first argument must be a string"));if(/^(wxfile|https?):/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: not support wxfile: or http: path"));if(!/\.wasm(\.br)?$/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: only support file type .wasm or .wasm.br"));if(i.jP)return new Promise((function(n,r){!function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.filePath,r=t.encoding,i=new XMLHttpRequest;i.open("POST","".concat(u,"/wxfs/").concat(btoa(n)),!0),i.setRequestHeader("content-type","application/json"),i.responseType="string"==typeof r?"text":"arraybuffer",i.onload=function(){e="string"==typeof r?i.responseText:i.response,(0,a.FE)({name:l,args:t,res:{data:e}})},i.onerror=function(e){(0,a.YG)(l,t,e.message)},i.send(JSON.stringify({}))}({filePath:e,success:function(e){n(f.instantiate(e.data,t))},fail:function(e){var t=e.errMsg;r(new Error(t.replace(/^\w+:fail\s*/,"")))}})}));if(i.cj||i.wZ){var n=f.instantiate(e,t);return"Promise"===(0,s.Em)(n)?n:Promise.resolve(n)}var r=o.p;return i.gm&&/\.br$/.test(e)&&(r=c),new Promise((function(n,i){r({compressionAlgorithm:"br",filePath:e,success:function(e){n(f.instantiate(e.data,t))},fail:function(e){var t=e.errMsg;i(new Error(t.replace(/^\w+:fail\s*/,"")))}})}))}};d.WXWebAssembly=p,delete d.WebAssembly;var h={Table:f.Table,Memory:f.Memory,Global:f.Global,Instance:f.Instance,compile:f.compile,compileStreaming:f.compileStreaming,instantiateStreaming:f.instantiateStreaming,validate:f.validate,CompileError:f.CompileError,LinkError:f.LinkError,Module:f.Module,RuntimeError:f.RuntimeError,instantiate:function(){var e;return Promise.resolve((e=f).instantiate.apply(e,arguments))}}},3180:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(6326),i=n(3618),o=new r.Z;const a={appLaunchInfo:null,appLaunchShareInfo:null,sceneHistory:[],appId:"",ShareInfoStorage:i.Z,emitter:o}},947:(e,t,n)=>{"use strict";n.d(t,{av:()=>c,GB:()=>u,Xb:()=>l,yc:()=>d});var r=n(2805),i=n(9307),o=n(4930),a=n(1957),s=(0,i.s)("AppShow"),c=s.onMethod,u=s.offMethod,l=s.internalOnMethod;function d(e){s.emitGlobal(e)}(0,r.T)((function(e){s.emitInternal(e)})),(0,a.H)((function e(t){if("appLaunch"===t.openType){var n=(0,o.x)();s.emitInternal(n),(0,a.b)(e)}}))},2335:(e,t,n)=>{"use strict";n.d(t,{e4:()=>i,WZ:()=>a,R0:()=>s,LY:()=>c});var r=n(8392),i=["startPullDownRefresh"],o=[],a={appRoute:!1,appRouteDone:!1},s=function(){o.forEach((function(e){var t=e.name,n=e.args,i=e.option;(0,r.oQ)(t,n,i)})),o=[]},c=function(e,t,n){var i=a.appRoute,s=a.appRouteDone;!i&&s?(0,r.oQ)(e,t,n):o.push({name:e,args:t,option:n})}},9714:(e,t,n)=>{"use strict";n.d(t,{NS:()=>c,e1:()=>u,rN:()=>l,_X:()=>d});var r=n(1029),i=n(9601),o=n(8392),a={},s={};function c(e){a=e}function u(e){s=e}function l(){var e=(0,i.hI)(this)||"";return(0,r.rT)(a,e)}function d(){return s}(0,o.Ld)("getEnterAppInfo",(function(e,t){var n=e.callbackId;(0,o.nY)("appEnterInfoGot",{res:d(),callbackId:n},[t])}))},4930:(e,t,n)=>{"use strict";n.d(t,{I:()=>f,x:()=>p});var r,i,o=n(8392),a=n(3180),s=n(1029),c=n(9714),u=n(8947),l=n(9601),d=n(968);function f(){if(!r)throw new Error("getLaunchOptionsSync:fail get launch options");var e=(0,l.hI)(this)||"";return(0,s.rT)(r||{},e)}function p(){if(!i)throw new Error("getLaunchOptionsSync:fail get launch options");return i||{}}(0,o.Ld)("getLaunchAppInfo",(function(e,t){var n=e.callbackId;(0,o.nY)("appLaunchInfoGot",{res:{sceneHistory:a.Z.sceneHistory,appId:a.Z.appId},callbackId:n},[t])})),u.Z.onReady((function(){if(!(0,d.aI)()){var e=u.Z.appLaunchInfo||{};Object.assign(e,u.Z.debugLaunchInfo||{}),a.Z.appLaunchInfo=e,a.Z.appLaunchShareInfo=e.shareInfo,(0,c.e1)(e),i=(0,s.Qs)(e,!0),r=(0,s.Ar)(i,u.Z.preloadType),i.__public=(0,s.rT)(r,""),(0,c.NS)(r)}}))},278:(e,t,n)=>{"use strict";n.d(t,{J:()=>a});var r=n(8392),i=n(7264),o=(0,n(9307).s)("AppEnterBackground"),a=o.internalOnMethod;(0,i.n)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.emit(e),(0,r.nY)("onAppEnterBackground",e)}))},2805:(e,t,n)=>{"use strict";n.d(t,{T:()=>h});var r=n(8392),i=n(3180),o=n(6051),a=n(1029),s=n(9714),c=n(9307),u=n(7264),l=n(968),d=n(3638),f=n(8947);f.Z.onReady((function(){d.Z.scene=f.Z.appLaunchInfo.scene}));var p=(0,c.s)("AppEnterForeground"),h=p.internalOnMethod;function g(e){if(!(0,l.aI)()){e=(0,a.Qs)(e,!1),(0,s.e1)(e);var t=(0,a.Ar)(e);e.__public=(0,a.rT)(t,""),(0,s.NS)(t),p.emit(e),d.Z.scene=e.scene}}(0,u.n)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debugLaunchInfo||{};Object.assign(e,t),delete e.debugLaunchInfo,!(0,o._o)()||1!==e.reLaunch&&!0!==e.reLaunch?g(e):i.Z.emitter.once("onAppRoute",(function(){g(e)})),(0,r.nY)("onAppEnterForeground",e)}))},1957:(e,t,n)=>{"use strict";n.d(t,{H:()=>g,b:()=>v});var r=n(8392),i=n(7264),o=n(6051),a=n(3180),s=n(9947),c=n(9307),u=n(4198),l=n(8947),d=n(7587),f=n(3638),p=n(2335),h=(0,c.s)("AppRoute"),g=h.internalOnMethod,v=h.internalOffMethod,_=new Set;(0,i.n)("onAppRoute",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d.s.log("received onAppRoute, res=",JSON.stringify(e)),p.WZ.appRoute=!0,p.WZ.appRouteDone=!1;var n=(0,u.RJ)(e,t);if(!n){if(e.path=(0,s.Z8)(e.path),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==e.openType&&(f.Z.lastRoute=e.path||"",f.Z.lastRawQuery=JSON.parse(JSON.stringify(e.query||{}))),f.Z.lastOpenType=e.openType,["appLaunch","autoReLaunch"].includes(e.openType)&&_.add(t),!_.has(t))for(var i in e.query)try{e.query[i]=decodeURIComponent(e.query[i])}catch(e){}if("dismissPip"!==e.openType&&(f.Z.query=e.query,f.Z.currentWebviewId=e.webviewId),"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage){var c=e.preloadRule||l.Z._preloadRule&&l.Z._preloadRule[e.path],g=e.page||l.Z._page&&l.Z._page[e.path+".html"];if(c&&(l.Z.updatePreloadRule(e.path,c),"onAppRoute update preloadRule".concat(e.preloadRule?"":" (mock)"),l.Z.preloadRule),g){var v=l.Z.global&&l.Z.global.window||{};g.window=Object.assign({},v,g.window),l.Z.updatePage(e.path,g),"onAppRoute update page".concat(e.page?"":" (mock)"),l.Z.page}}(0,r.nY)("onAppRoute",e,[]),(0,o._o)()&&a.Z.emitter.emit("onAppRoute"),h.emit(e)}}))},8510:(e,t,n)=>{"use strict";n.d(t,{q:()=>d,n:()=>f});var r=n(8392),i=n(7264),o=n(3638),a=n(9307),s=n(8947),c=n(9267),u=n(2335),l=(0,a.s)("AppRouteDone"),d=l.internalOnMethod,f=l.internalOffMethod;function p(e,t){if(0===s.Z.appType&&("[setNavigationBarTitleMap], path=".concat(e,", rawPath=").concat(t),e&&t&&!o.Z.navigationBarTitleMap[e])){var n="";s.Z.page[t]&&s.Z.page[t].window&&(0,c.HD)(s.Z.page[t].window.navigationBarTitleText)?n=s.Z.page[t].window.navigationBarTitleText:s.Z.global&&s.Z.global.window&&(0,c.HD)(s.Z.global.window.navigationBarTitleText)&&(n=s.Z.global.window.navigationBarTitleText),"[setNavigationBarTitleMap], path=".concat(e,", rawPath=").concat(t,", title=").concat(n),o.Z.navigationBarTitleMap[e]=n}}(0,i.n)("onAppRouteDone",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u.WZ.appRoute=!1,u.WZ.appRouteDone=!0,(0,u.R0)();var n="";o.Z.navigatorLock=!1,e.path&&(n=e.path,e.path=e.path.substring(0,e.path.length-5)),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==o.Z.lastOpenType&&(o.Z.lastRoute=e.path||""),l.emit(e),(0,r.nY)("onAppRouteDone",{frameset:e.frameset},[t]),"[onAppRouteDone], path=".concat(e.path),p(e.path,n)}))},4198:(e,t,n)=>{"use strict";n.d(t,{RJ:()=>g,eB:()=>u});var r=n(1570),i=n(9307),o=n(9947),a=n(7587),s=Object.hasOwnProperty,c=(0,i.s)("AppRouteNotFound"),u=c.onMethod,l=(c.offMethod,c.emit),d=function(e,t){a.s.info("[rewriteRoute] (webviewId=".concat(t,") ").concat(e))},f={},p=function(e,t){var n=0;if(s.call(e,"originalWebviewId"))n=e.originalWebviewId,d("Found originalWebviewId=".concat(n),t);else{if(1!==Object.keys(f).length)return d("No originalWebviewId found and we have ".concat(Object.keys(f).length," backup data, guess failed, cleaning backups and giving up"),t),f={},e;n=Object.keys(f)[0],d("No originalWebviewId found and guess it=".concat(n),t)}var r=f[n];return delete f[n],["openType","wxMaterial","location","prerender"].forEach((function(t){e[t]=r[t]})),e},h=function(e,t){var n=t.needHtmlSuffix,r=e.replace(/\.html(\?|$)/i,(function(e){return e.slice(5)})),i=(0,o.S0)(r);if("/"===i[0]&&(i=i.slice(1)),!n)return i;var a=i.indexOf("?");return a<0&&(a=i.length),i.slice(0,a)+".html"+i.slice(a)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(["dismissPip","navigateBack"].includes(e.openType))return!1;if("rewriteRoute"===e.openType&&(e=p(e,t)),!e.notFound)return!1;for(var n=!1,i=e.rawPath;/^[-_+a-z]+:\/\//i.test(i);){d("".concat(i," has protocol, try rewriting"),t);try{i=h(i,{needHtmlSuffix:!0}),n=!0}catch(e){return"AppServiceSdkKnownError"===e.type&&console.error(e.message),(0,r.IN)("pageNotFoundCallback",{hasHandler:!1,webviewId:t}),!1}}return n?(f[t]=e,d('rewriteRoute from "'.concat(e.rawPath,'" to "').concat(i,'"'),t),(0,r.IN)("rewriteRoute",{url:i,webviewId:t}),!0):(l(e,t),!1)}},1029:(e,t,n)=>{"use strict";n.d(t,{Qs:()=>f,Ar:()=>p,rT:()=>h,xH:()=>g});var r,i=n(8676),o=n.n(i),a=n(3180),s=n(9947),c=n(3638),u=n(8392),l=n(8947),d=n(8976);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(e.scene=e.scene?parseInt(e.scene,10):e.scene,e.query=(t?e.query:c.Z.query)||{},e.path=t?(0,s.Z8)(e.path):(0,s.Z8)(c.Z.lastRoute),e.referrerInfo=e.referrerInfo||{},e.isLaunch=t,t||(1044===e.scene?c.Z.lastShareInfo={shareInfo:e.shareInfo,path:e.path,query:e.query}:c.Z.lastShareInfo=void 0),a.Z.sceneHistory.push(e.scene),!e.referrerInfo.appId||1036!==e.scene&&1069!==e.scene||(a.Z.appId=e.referrerInfo.appId),"object"===o()(e.shareInfo)&&null!==e.shareInfo){var n=e.shareInfo;n.shareKey&&n.shareName&&((0,u.IN)("showUpdatableMessageSubscribeButton",{shareKey:n.shareKey}),e.shareTicket=a.Z.ShareInfoStorage.set(n.shareKey,n.shareName),a.Z.ShareInfoStorage.lastShareTicket=e.shareTicket),delete e.shareInfo}return e}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;0===(e=Object.assign({},e)).scene?e.scene=r:r=e.scene;var n=e.scene;1103===n?n=1001:1104===n?n=1089:1131===n||1158!==n&&1159!==n&&1160!==n||!(0,d.J)("getGroupToolbarInfo")&&(n=1008),[1106,1005,1006,1027,1042].indexOf(n)>-1&&(e.referrerInfo.appId=null);var i=e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{};if(e.referrerInfo.privateExtraData&&e.referrerInfo.privateExtraData.__pluginAppId){e.referrerInfo.appId&&(i.pluginAppId=e.referrerInfo.privateExtraData.__pluginAppId),delete e.referrerInfo.privateExtraData.__pluginAppId;var o=Object.keys(e.referrerInfo.privateExtraData);0===o.length&&delete e.referrerInfo.privateExtraData}var a={path:e.path,query:e.query,scene:n,shareTicket:e.shareTicket,referrerInfo:i};e.chatroomUsername&&1156===n&&(a.chatroomUsername=e.chatroomUsername),e.chatType&&(a.chatType=e.chatType);var s=e.nativeExtraData||{};return s.location&&(a.locationInfo=s.location),7!==l.Z.appType&&10!==l.Z.appType||(e.nativeExtraData&&(a.nativeExtraData=e.nativeExtraData),a.sessionId=e.sessionid||e.sessionId,a.isLaunch=e.isLaunch,e.isLaunch&&(a.prerender=!!l.Z.prerender),a.clickTimestamp=e.clickTimestamp,a.preloadType=t),e.mode&&(a.mode=e.mode),1173===n&&(s.mimeType?a.forwardMaterials=[{type:s.mimeType,path:s.materialPath,name:s.materialName,size:s.materialSize}]:Array.isArray(s.materials)&&(a.forwardMaterials=s.materials)),a}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,s.p9)(e.path||"");if(n!==t){var r={path:e.path,query:{},scene:e.scene,shareTicket:e.shareTicket,referrerInfo:{}};return e.mode&&(r.mode=e.mode),10===l.Z.appType&&(e.nativeExtraData&&(r.nativeExtraData=e.nativeExtraData),r.sessionId=e.sessionId,r.isLaunch=e.isLaunch,e.isLaunch&&(r.prerender=e.prerender),r.clickTimestamp=e.clickTimestamp,r.preloadType=e.preloadType),r}return e}function g(e){try{__appServiceEngine__.setPrivateExtraData(e.privateExtraData),e.success()}catch(t){e.fail(t)}}},2675:(e,t,n)=>{"use strict";n.d(t,{hU:()=>_,JQ:()=>w,go:()=>y,Py:()=>k,kr:()=>J,fS:()=>F,MN:()=>j,qW:()=>q,yU:()=>X,k8:()=>W,KU:()=>z,RU:()=>Q,ZX:()=>N,Sk:()=>L,nY:()=>K,Mm:()=>O,Z5:()=>M});var r=n(8947),i=n(8392),o=n(4531),a=n(4547),s=n(6809),c=n(9947),u=n(3638),l=n(3786),d=n(6301),f=n(2363),p=n(2701),h=f.wZ&&r.Z.useXWebCanvas,g=f.cj&&r.Z.useSkiaCanvas,v=f.wZ&&r.Z.useNewXWebCanvasToTFP,_=h||g,m=function(){},y={},b={},w={},I={},S=0,C=0,T=4500,E=Date.now,k=(0,l.kR)("onCanvasMethodCallback"),x=(0,l.kR)("onDrawCanvas");function A(e){var t=e.canvasId,n=e.pluginId,r=e.nodeId,i=e.viewId,o=e.webviewId,a=(0,l.yk)(o,t,n,r);w[a]&&delete w[a],_&&(0,p.OS)({webviewId:o,canvasId:t,pluginId:n,nodeId:r,viewId:i})}function P(e,t,n){var r={errMsg:"".concat(e,": ").concat(n||"fail canvas is empty")},i=__errorTracer__.surroundThirdByTryCatch(t.fail||m,"at api ".concat(e," fail callback function")),o=__errorTracer__.surroundThirdByTryCatch(t.complete||m,"at api ".concat(e," complete callback function"));i(r),o(r)}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=(0,l.yk)(u.Z.currentWebviewId,e.canvasId,n,t),o=(0,c.f0)({},e);if("number"==typeof w[r]||_){if(o.canvasId=w[r],o.jsInvokedAt=Date.now(),o.x=Number(o.x)||0,o.y=Number(o.y)||0,o.width=Number(o.width)||0,o.height=Number(o.height)||0,0===o.width)return void P("canvasGetImageData",e,"the source width is 0");if(0===o.height)return void P("canvasGetImageData",e,"the source height is 0");if(_){var a=(0,p.uy)(r);return void a.getImageData(o)}if(f.gm||f.qB||f.Mq||f.Ae)o.method="getImageData",k(o,(function(t){var n={width:t.width,height:t.height,data:(0,l.Fi)(t.data)};"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)})),(0,i.nY)("invokeCanvasMethod",o);else{var s=o.success,d=o.fail;o.success=function(e){"[object ArrayBuffer]"===Object.prototype.toString.call(e.data)?(e.width=o.width,e.height=o.height,e.data=new Uint8ClampedArray(e.data),"function"==typeof s&&s(e)):(delete e.data,e.errMsg="canvasGetImageData: fail","function"==typeof d&&d(e))},(0,i.IN)("canvasGetImageData",o)}}else P("canvasGetImageData",e)}function O(e,t){D(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.Z.currentWebviewId)?t.__wxExparserNodeId__:"")}function N(e,t,n){D(e,n,t)}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=(0,l.yk)(u.Z.currentWebviewId,e.canvasId,n,t),o=(0,c.f0)({},e);if("number"==typeof o.width)if(o.data&&"[object Uint8ClampedArray]"===Object.prototype.toString.call(o.data))if("number"==typeof w[r]||_){if(o.canvasId=w[r],o.jsInvokedAt=Date.now(),o.x=Number(o.x)||0,o.y=Number(o.y)||0,o.height="number"==typeof o.height?o.height:o.data.length/o.width/4|0,o.width*o.height*4!==o.data.length)return void P("canvasPutImageData",e,"invalid data format");if(f.gm||f.qB||f.Mq||f.Ae)o.data=f.qB||f.Ae?WeixinNativeBuffer.new(o.data.buffer).id:(0,l.GX)(o.data),o.method="putImageData",(0,i.nY)("invokeCanvasMethod",o),"function"==typeof e.success&&e.success({errMsg:"canvasPutImageData:ok"}),"function"==typeof e.complete&&e.complete({errMsg:"canvasPutImageData:ok"});else{if(o.data=o.data.buffer,_){o.data=e.data;var a=(0,p.uy)(r);return void a.putImageData(o)}(0,i.IN)("canvasPutImageData",o)}}else P("canvasPutImageData",e);else P("canvasPutImageData",e,"data argument must be an Uint8ClampedArray");else P("canvasPutImageData",e,"invalid width argument")}function M(e,t){R(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.Z.currentWebviewId)?t.__wxExparserNodeId__:"")}function L(e,t,n){R(e,n,t)}function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;if(f.gm||f.qB||f.Mq||f.Ae){var c={actions:t,reserve:n,canvasId:e};x(c,(function(e){"function"==typeof s&&s({errMsg:e.errMsg})})),(0,i.nY)("canvasActionsChanged",c)}else(0,i.IN)("drawCanvas",{canvasId:e,reserve:n,useHardwareAccelerate:r,actions:t,success:o,fail:a,complete:s})}function F(e){var t=e.isWidgetCanvas,n=e.canvasId,r=e.actions,o=e.reserve,a=e.useHardwareAccelerate,s=e.success,c=e.fail,d=e.complete,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.Z.currentWebviewId,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",v=E();if(Array.isArray(r)){if(t){if(v-S<T){var m={errMsg:"drawCanvas:fail 调用 draw 过于频繁。"};return(C+=1)>500&&(C=0,console.warn(m.errMsg)),void("function"==typeof c&&c(m))}return S=v,void(0,i.IN)("drawCanvas",{canvasId:void 0,reserve:o,actions:r,success:s,fail:c,complete:d})}var y=(0,l.yk)(f,n,h,g);if(_){var b=(0,p.uy)(y);b.draw(r,o,d,f,g,h)}else if("number"==typeof w[y]){var k=w[y];B(k,r,o,a,s,c,d)}else I[y]=I[y]||[],I[y]=I[y].concat({actions:r,reserve:o,useHardwareAccelerate:a,success:s,fail:c,complete:d})}}function j(e){F(e)}function W(e,t,n){F(e,u.Z.currentWebviewId,t,n)}"undefined"!=typeof __widgetConfig__&&(T="number"==typeof __widgetConfig__.drawMinInterval?__widgetConfig__.drawMinInterval:25),(0,i.Ld)("canvasInsert",(function(e,t){var n=e.canvasId,r=e.viewId,i=e.canvasNumber,a=e.pluginId,s=e.data,c=e.position,u=e.nodeId,d=e.compPath;_&&(0,p.mj)({canvasId:n,viewId:r,canvasNumber:i,pluginId:a,position:c,nodeId:u},t);var f=(0,l.yk)(t,n,a,u);y[i]={lastTouches:[],data:s,compPath:d},w[f]=i,b[i]=c,Array.isArray(I[f])&&(I[f].forEach((function(e){B(i,e.actions,e.reserve,e.useHardwareAccelerate,e.success,e.fail,e.complete)})),delete I[f]),(0,o.dq)(t,(function(){A({canvasId:n,pluginId:a,nodeId:u,viewId:r,webviewId:t})}))})),(0,i.Ld)("canvasUpdate",(function(e){var t=e.canvasNumber,n=e.position;(0,a.n)(b,t)&&(b[t]=n)})),(0,i.Ld)("canvasRemove",(function(e,t){A({canvasId:e.canvasId,pluginId:e.pluginId,nodeId:e.nodeId,viewId:e.viewId,webviewId:t})}));var U=null,V=function(e,t,n,r){e.x=e.x?e.x:0,e.y=e.y?e.y:0,(e.x<0||e.x>n)&&(e.x=0),(e.y<0||e.y>r)&&(e.y=0),e.width=e.width?Math.min(n-e.x,e.width):n-e.x,e.height=e.height?Math.min(r-e.y,e.height):r-e.y,e.destWidth=e.destWidth?e.destWidth:e.width*t,e.destHeight=e.destHeight?e.destHeight:e.height*t},G=function(e,t){var n=(0,c.f0)({},t);n.success=t.success,n.fail=t.fail,n.complete=t.complete;var r=300,o=150;(0,a.n)(b,t.canvasId)&&(r=b[t.canvasId].width,o=b[t.canvasId].height),!f.cj||"6.5.10"!==e.version&&"6.5.11"!==e.version&&"6.5.12"!==e.version?V(n,e.pixelRatio,r,o):function(e,t,n,r){n*=t,r*=t,e.x=e.x?e.x*t:0,e.y=e.y?e.y*t:0,(e.x<0||e.x>n)&&(e.x=0),(e.y<0||e.y>r)&&(e.y=0),e.width=e.width?Math.min(n-e.x,e.width*t):n-e.x,e.height=e.height?Math.min(r-e.y,e.height*t):r-e.y,e.destWidth=e.destWidth?e.destWidth/t:e.width/t,e.destHeight=e.destHeight?e.destHeight/t:e.height/t}(n,e.pixelRatio,r,o),(0,i.IN)("canvasToTempFilePath",n)};function H(e,t){if(e.fileType=["jpg","png"].indexOf(e.fileType)>-1?e.fileType:"png",e.quality="jpg"===e.fileType?e.quality<0||e.quality>1?1:e.quality:1,e.jpgQuality=e.quality,e.canvas){var n=e.canvas;delete e.canvas;var r=n._width?n.width/n._width:U.pixelRatio;if(e.x=Number(e.x)||0,e.y=Number(e.y)||0,f.wZ){if(e.width*=r,e.height*=r,e.x=e.x?e.x*r:0,e.y=e.y?e.y*r:0,e.width=Number(e.width)||n.width-e.x,e.height=Number(e.height)||n.height-e.y,e.destWidth=e.destWidth||e.width,e.destHeight=e.destHeight||e.height,e.x+e.width>n.width&&(e.width=n.width-e.x),e.y+e.height>n.height&&(e.height=n.height-e.y),0===e.width)return void(0,c.Ky)(e,"width is 0");if(0===e.height)return void(0,c.Ky)(e,"height is 0");var o=n._ctx.getImageData(e.x,e.y,e.width,e.height);return void(v?(e.viewId=n.id,(0,i.IN)("xwebCanvasToTempFilePath",e)):(e.data=o.data.buffer,(0,i.IN)("canvasToTempFilePath",e)))}if(f.cj)return e.canvasId=n.id,V(e,r,n.width/r,n.height/r),void setTimeout((function(){(0,i.IN)("canvasToTempFilePath",e)}),100);if(f.gm){e.width*=r,e.height*=r,e.x=e.x?e.x*r:0,e.y=e.y?e.y*r:0,e.width=Number(e.width)||n.width-e.x,e.height=Number(e.height)||n.height-e.y,e.destWidth=e.destWidth||e.width,e.destHeight=e.destHeight||e.height,e.x+e.width>n.width&&(e.width=n.width-e.x),e.y+e.height>n.height&&(e.height=n.height-e.y);var a=document.createElement("canvas"),s=a.getContext("2d");a.width=e.destWidth,a.height=e.destHeight,s.drawImage(n._canvasRef,e.x,e.y,e.width,e.height,0,0,e.destWidth,e.destHeight);var u=a.toDataURL(e.fileType,e.quality);return u=u.replace(/^data:image\/(jpg|png|jpeg);base64,/,""),void(0,i.IN)("base64ToTempFilePath",(0,c.f0)({base64Data:u},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("base64ToTempFilePath","canvasToTempFilePath")}})}}if(f.gm||f.qB||f.Mq||f.Ae)e.method="toDataURL",k(e,(function(t){var n=t.dataUrl;(0,i.IN)("base64ToTempFilePath",(0,c.f0)({base64Data:n},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("base64ToTempFilePath","canvasToTempFilePath")}})})),(0,i.nY)("invokeCanvasMethod",e);else if(_&&f.wZ){var l=(0,p.uy)(t);l._contextPromise.then((function(){e.x=Number(e.x)||0,e.y=Number(e.y)||0,e.width=Number(e.width)||l.width-e.x,e.height=Number(e.height)||l.height-e.y,0!==e.width?0!==e.height?l.getImageData({x:e.x,y:e.y,width:e.width,height:e.height,success:function(t){e.data=t.data.buffer,(0,i.IN)("canvasToTempFilePath",e)},fail:function(){(0,c.Ky)(e,"fail")}}):(0,c.Ky)(e,"height is 0"):(0,c.Ky)(e,"width is 0")}))}else U||(U=(0,d.m4)()),G(U,e)}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e.canvasId||e.canvas){if(e.canvas)return U||(U=(0,d.m4)()),void H(e,r);var r=(0,l.yk)(u.Z.currentWebviewId,e.canvasId,n,t);"number"==typeof w[r]?(e.canvasId=w[r],H(e)):P("canvasToTempFilePath",e)}}function q(e,t){Z(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.Z.currentWebviewId)?t.__wxExparserNodeId__:"")}function z(e,t,n){Z(e,n,t)}function Y(e){f.gm||f.qB||f.Mq||f.Ae?(e.method="toDataURL",k(e,(function(t){var n=t.dataUrl;e.success({data:n})})),(0,i.nY)("invokeCanvasMethod",e)):(0,i.IN)("canvasToData",e)}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,l.yk)(u.Z.currentWebviewId,e.canvasId),n=Object.assign({},e),r=n.success,i=n.complete;n.success=function(e){var t="data:image/".concat(n.fileType||"png"),o="".concat(t,";base64,").concat(e.data);"function"==typeof r&&r({dataURL:o}),"function"==typeof i&&i({dataURL:o})},n.complete=m,"number"==typeof w[t]?(n.canvasId=w[t],Y(n)):P("canvasToDataURL",e)}var J=function(){return new s._},$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new s._(e,t,n,r)},X=function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return $(u.Z.currentWebviewId,e,n)},Q=function(e,t,n){return $(u.Z.currentWebviewId,e,n,t)}},6809:(e,t,n)=>{"use strict";n.d(t,{_:()=>E});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(8676),c=n.n(s),u=n(8392),l=n(9947),d=n(4547),f=n(2675),p={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"},h=n(3638),g=n(3786),v=n(2363),_={},m={};function y(e){return"number"==typeof e}function b(e){var t=null;if(null!=(t=/^#([0-9|A-F|a-f]{6})$/.exec(e)))return[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4),16),255];if(null!=(t=/^#([0-9|A-F|a-f]{3})$/.exec(e))){var n=t[1].slice(0,1),r=t[1].slice(1,2),i=t[1].slice(2,3);return[n=parseInt(n+n,16),r=parseInt(r+r,16),i=parseInt(i+i,16),255]}if(null!=(t=/^rgb\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e){return Math.min(255,parseInt(e.trim(),10))})).concat(255);if(null!=(t=/^rgba\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e,t){return 3===t?Math.floor(255*parseFloat(e.trim())):Math.min(255,parseInt(e.trim(),10))}));var o=e.toLowerCase();if((0,d.n)(p,o)){t=/^#([0-9|A-F|a-f]{6,8})$/.exec(p[o]);var a=parseInt(t[1].slice(0,2),16),s=parseInt(t[1].slice(2,4),16),c=parseInt(t[1].slice(4,6),16),u=parseInt(t[1].slice(6,8),16);return[a,s,c,u=u>=0?u:255]}return console.group("非法颜色: "+e),console.error("不支持颜色："+e),console.groupEnd(),[0,0,0,255]}function w(e){if(Array.isArray(e)){var t=[];return e.forEach((function(e){t.push(w(e))})),t}if("object"===c()(e)){var n={};for(var r in e)n[r]=w(e[r]);return n}return e}function I(e,t){if(!(v.gm||v.DD||v.Ae||/wxfile:\/\//.test(t)))if(e.pluginId||e.nodeId){var n=e.pluginId.split("/")[0],r=__virtualDOM__.getNodeById(e.nodeId,e.webviewId),i=r&&r.is||"";t=n?0===t.indexOf("/")?__virtualDOM__.getPluginRoutePrefix(n)+(0,l.sd)(i,t,!1).replace(/\.html$/,""):(0,l.sd)(__virtualDOM__.convertComponentAliasToRoute(i),t,!1).replace(/\.html$/,""):(0,l.sd)(i,t,!1).replace(/\.html$/,"")}else t=(0,l.sd)(h.Z.lastRoute,t,!1).replace(/.html$/,"");return t}var S=function(){function e(t,n){i()(this,e),this.type=t,this.data=n,this.colorStop=[]}return a()(e,[{key:"addColorStop",value:function(e,t){f.hU?this.colorStop.push([e,t]):this.colorStop.push([e,b(t)])}}]),e}(),C=function e(t){i()(this,e),this.width=t},T=function e(t,n){i()(this,e),this.image=t,this.repetition=n},E=function(){function e(t,n,r,o){if(i()(this,e),this.actions=[],this.path=[],this.subpath=[],this.webviewId=t,this.canvasId=n,this.pluginId=o,this.useHardwareAccelerate=!0,this.nodeId=r,this._id=(0,g.yk)(t,n,o,r),this.drawingState=_[this._id]=_[this._id]||[],this.state=m[this._id]=m[this._id]||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:f.hU?"#000000":v.cj?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},this._transform={a:1,b:0,c:0,d:1,e:0,f:0},v.gm||v.DD){var a=document.createElement("canvas");this._context=a.getContext("2d")}}return a()(e,[{key:"getActions",value:function(){var e=w(this.actions);return this.actions=[],this.path=[],this.subpath=[],e}},{key:"clearActions",value:function(){this.actions=[],this.path=[],this.subpath=[]}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this.canvasId,r=w(this.actions),i=this.useHardwareAccelerate;this.actions=[],this.path=[],this.useHardwareAccelerate=!0,this.isWidgetCanvas?(0,f.fS)({isWidgetCanvas:!0,actions:r,reserve:e}):(0,f.fS)({canvasId:n,actions:r,reserve:e,useHardwareAccelerate:i,complete:t},this.webviewId,this.pluginId,this.nodeId)}},{key:"createLinearGradient",value:function(e,t,n,r){return new S("linear",[e,t,n,r])}},{key:"createCircularGradient",value:function(e,t,n){return new S("radial",[e,t,n])}},{key:"createPattern",value:function(e,t){if(void 0!==t){if(-1!==["repeat","repeat-x","repeat-y","no-repeat"].indexOf(t))return e=e._src?e._src:I(this,e),new T(e,t);console.error("Failed to execute 'createPattern' on 'CanvasContext': The provided type ('".concat(t,"') is not one of 'repeat', 'no-repeat', 'repeat-x', or 'repeat-y'."))}else console.error("Failed to execute 'createPattern' on 'CanvasContext': 2 arguments required, but only 1 present.")}},{key:"measureText",value:function(e){var t;return v.gm||v.DD?(this._context.font=this.state.font,t=this._context.measureText(e)):(0,u.IN)("measureText",{text:e,fontSize:this.state.fontSize,fontFamily:this.state.fontFamily,fontWeight:this.state.fontWeight,fontStyle:this.state.fontStyle,complete:function(e){t={width:e.width||0}}}),new C(t.width||0)}},{key:"save",value:function(){this.actions.push({method:"save",data:[]}),this.drawingState.push(this.state)}},{key:"restore",value:function(){this.actions.push({method:"restore",data:[]}),this.state=m[this._id]=this.drawingState.pop()||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:f.hU?"#000000":v.cj?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}},{key:"getLineDash",value:function(){return this.state.lineDash}},{key:"beginPath",value:function(){this.path=[],this.subpath=[],(v.gm||f.hU)&&this.path.push({method:"beginPath",data:[]})}},{key:"moveTo",value:function(e,t){this.path.push({method:"moveTo",data:[e,t]}),this.subpath=[[e,t]]}},{key:"closePath",value:function(){this.path.push({method:"closePath",data:[]}),this.subpath.length&&(this.subpath=[this.subpath.shift()])}},{key:"lineTo",value:function(e,t){0===this.path.length&&0===this.subpath.length?this.path.push({method:"moveTo",data:[].slice.apply(arguments)}):this.path.push({method:"lineTo",data:[].slice.apply(arguments)}),this.subpath.push([e,t])}},{key:"quadraticCurveTo",value:function(e,t,n,r){this.path.push({method:"quadraticCurveTo",data:[e,t,n,r]}),this.subpath.push([n,r])}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){this.path.push({method:"bezierCurveTo",data:[e,t,n,r,i,o]}),this.subpath.push([i,o])}},{key:"arc",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!v.wZ||f.hU)return this.path.push({method:"arc",data:[e,t,n,r,i,o]}),void this.subpath.push([e,t]);var a=e+Math.cos(r)*n,s=t+Math.sin(r)*n;if(this.subpath.push([a,s]),o&&r-i>=2*Math.PI||!o&&i-r>=2*Math.PI)this.subpath.push([a,s]);else{var c=e+Math.cos(i)*n,u=t+Math.sin(i)*n;this.subpath.push([c,u])}this.path.push({method:"arc",data:[e,t,n,r,i,o]})}},{key:"rect",value:function(e,t,n,r){this.path.push({method:"rect",data:[e,t,n,r]}),this.subpath=[[e,t]],v.wZ&&!f.hU&&this.path.push({method:"closePath",data:[]})}},{key:"arcTo",value:function(e,t,n,r,i,o){if((!v.wZ||f.hU)&&!o)return this.path.push({method:"arcTo",data:[e,t,n,r,i]}),void this.subpath.push([n,r]);var a=this.subpath[this.subpath.length-1],s=a[0],c=a[1];if(s===e&&c===t||e===n&&t===r||0===i)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);if(s===e&&s===n||c===t&&c===r)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);var u,l,d,p,h,g,_=Math.sqrt,m=Math.acos,y=Math.sin,b=Math.tan,w=Math.atan,I=Math.PI,S=function(e){return Math.pow(e,2)},C=s-e,T=c-t,E=n-e,k=r-t,x=m((C*E+T*k)/(_(S(C)+S(T))*_(S(E)+S(k))))/2,A=Math.round(i/y(x)*1e6)/1e6,P=Math.round(i/b(x)*1e6)/1e6;if(s-e==0)u=e,l=c-t>0?t+P:t-P;else if(c-t==0)u=s-e>0?e+P:e-P,l=t;else{var D=(c-t)/(s-e),O=c-D*s;l=D*(u=(_(S(C)+S(T))*P+C*e+T*t-O*T)/(C+D*T))+O}if(n-e==0)d=e,p=r-t>0?t+P:t-P;else if(r-t==0)d=n-e>0?e+P:e-P,p=t;else{var N=(r-t)/(n-e),R=r-N*n;p=N*(d=(_(S(E)+S(E))*P+E*e+k*t-R*k)/(E+N*k))+R}var M=(u+d)/2-e,L=(l+p)/2-t;if(0===L)h=e,g=L>0?t+A:t-A;else{var B=L/M,F=t-B*e;g=B*(h=(_(S(M)+S(L))*A+e*M+t*L-F*L)/(M+B*L))+F}h=Math.round(1e6*h)/1e6;var j=l-(g=Math.round(1e6*g)/1e6),W=u-h,U=I-2*x,V=w(j/W);0===j&&W<0&&(V=Math.PI);var G=(u-h)*(p-g)-(l-g)*(d-h);this.path.push({method:"arc",data:[h,g,i,V,G>0?V+U:V-U,G<0]}),this.subpath.push([d,p])}},{key:"getTransform",value:function(){return this._transform}},{key:"clip",value:function(){this.actions.push({method:"clip",data:w(this.path)})}},{key:"lineDashOffset",set:function(e){if(v.gm||v.DD||v.Ae)this.actions.push({method:"setLineDashOffset",data:[e]});else{var t=this.state.lineDash||[0,0];this.actions.push({method:"setLineDash",data:[t,e]})}}},{key:"globalCompositeOperation",set:function(e){this.actions.push({method:"setGlobalCompositeOperation",data:[e]})}},{key:"shadowBlur",set:function(e){v.gm||v.DD||v.Ae?this.actions.push({method:"setShadowBlur",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,e,this.state.shadowColor]}),this.state.shadowBlur=e)}},{key:"shadowColor",set:function(e){var t;v.gm||v.DD||v.Ae?this.actions.push({method:"setShadowColor",data:[e]}):(t=f.hU?e:v.cj&&0===this.state.shadowBlur?[]:b(e),this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,this.state.shadowBlur,t]}),this.state.shadowColor=t)}},{key:"shadowOffsetX",set:function(e){v.gm||v.DD||v.Ae?this.actions.push({method:"setShadowOffsetX",data:[e]}):(this.actions.push({method:"setShadow",data:[e,this.state.shadowOffsetY,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetX=e)}},{key:"shadowOffsetY",set:function(e){v.gm||v.DD||v.Ae?this.actions.push({method:"setShadowOffsetY",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,e,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetY=e)}},{key:"font",get:function(){return this.state.font},set:function(e){var t=this;this.state.font=e;var n=e.match(/^(([\w\-]+\s)*)(\d+r?px)(\/(\d+\.?\d*(r?px)?))?\s+(.*)/);if(n){var r=n[1].trim().split(/\s/),i=parseFloat(n[3]),o=n[7],a=[],s="",c=this;if(r.forEach((function(e,n){["italic","oblique","normal"].indexOf(e)>-1?(a.push({method:"setFontStyle",data:[e]}),t.state.fontStyle=e):["bold","normal"].indexOf(e)>-1?(a.push({method:"setFontWeight",data:[e]}),t.state.fontWeight=e):0===n?(a.push({method:"setFontStyle",data:["normal"]}),c.state.fontStyle="normal"):1===n&&u()})),1===r.length&&u(),s=a.map((function(e){return e.data[0]})).join(" "),this.state.fontSize=i,this.state.fontFamily=o,v.gm||v.DD||v.Ae)return s="".concat(s," ").concat(i,"px ").concat(o),void this.actions.push({method:"setFont",data:[s]});this.actions.push.apply(this.actions,a),this.actions.push({method:"setFontSize",data:[i]},{method:"setFontFamily",data:[o]})}else console.warn("Failed to set 'font' on 'CanvasContext': invalid format.");function u(){a.push({method:"setFontWeight",data:["normal"]}),c.state.fontWeight="normal"}}},{key:"fillStyle",set:function(e){k(this,"setFillStyle",e)}},{key:"strokeStyle",set:function(e){k(this,"setStrokeStyle",e)}},{key:"globalAlpha",set:function(e){e=Math.floor(255*parseFloat(e)),this.actions.push({method:"setGlobalAlpha",data:[e]})}},{key:"textAlign",set:function(e){this.actions.push({method:"setTextAlign",data:[e]})}},{key:"lineCap",set:function(e){this.actions.push({method:"setLineCap",data:[e]})}},{key:"lineJoin",set:function(e){this.actions.push({method:"setLineJoin",data:[e]})}},{key:"lineWidth",set:function(e){this.actions.push({method:"setLineWidth",data:[e]})}},{key:"miterLimit",set:function(e){this.actions.push({method:"setMiterLimit",data:[e]})}},{key:"textBaseline",set:function(e){this.actions.push({method:"setTextBaseline",data:[e]})}}]),e}();function k(e,t,n){"string"==typeof n?f.hU?e.actions.push({method:t,data:["normal",n]}):e.actions.push({method:t,data:["normal",b(n)]}):"object"===c()(n)&&n instanceof S?e.actions.push({method:t,data:[n.type,n.data,n.colorStop]}):n instanceof T&&e.actions.push({method:t,data:["pattern",n.image,n.repetition]})}[].concat(["scale","rotate","translate","setTransform","transform"],["drawImage","fillText","fill","stroke","fillRect","strokeRect","clearRect","strokeText"]).forEach((function(e){E.prototype[e]="fill"===e||"stroke"===e?function(){this.actions.push({method:e+"Path",data:w(this.path)})}:"fillRect"===e?function(e,t,n,r){this.actions.push({method:"fillPath",data:[{method:"rect",data:[e,t,n,r]}]})}:"strokeRect"===e?function(e,t,n,r){this.actions.push({method:"strokePath",data:[{method:"rect",data:[e,t,n,r]}]})}:"fillText"===e||"strokeText"===e?function(t,n,r,i){var o=[t.toString(),n,r];"number"==typeof i&&o.push(i),this.actions.push({method:e,data:o})}:"drawImage"===e?function(t,n,r,i,o,a,s,c,u){var l;t=t._src?t._src:I(this,t),void 0===u&&(a=n,s=r,c=i,u=o,n=void 0,r=void 0,i=void 0,o=void 0),l=y(n)&&y(r)&&y(i)&&y(o)?[t,a,s,c,u,n,r,i,o]:y(c)&&y(u)?[t,a,s,c,u]:[t,a,s],this.actions.push({method:e,data:l})}:"clearRect"===e?function(){this.useHardwareAccelerate=!1,this.actions.push({method:e,data:[].slice.apply(arguments)})}:"transform"===e||"setTransform"===e?function(t,n,r,i,o,a){this._transform={a:t,b:n,c:r,d:i,e:o,f:a},this.actions.push({method:e,data:[t,n,r,i,o,a]})}:function(){this._ignoreScale&&"scale"===e?this._ignoreScale=!1:this.actions.push({method:e,data:[].slice.apply(arguments)})}})),["setFillStyle","setTextAlign","setStrokeStyle","setGlobalAlpha","setShadow","setFontSize","setLineCap","setLineJoin","setLineWidth","setMiterLimit","setTextBaseline","setLineDash"].forEach((function(e){"setFillStyle"===e||"setStrokeStyle"===e?E.prototype[e]=function(){var t=arguments[0];k(this,e,t)}:"setGlobalAlpha"===e?E.prototype[e]=function(){var t=[].slice.apply(arguments,[0,1]);t[0]=Math.floor(255*parseFloat(t[0])),this.actions.push({method:e,data:t})}:"setShadow"===e?E.prototype[e]=function(){var t=[].slice.apply(arguments,[0,4]);f.hU||(t[3]=v.cj&&0===t[2]?[]:b(t[3])),this.actions.push({method:e,data:t}),this.state.shadowBlur=t[2],this.state.shadowColor=t[3],this.state.shadowOffsetX=t[0],this.state.shadowOffsetY=t[1]}:"setLineDash"===e?E.prototype[e]=function(){var t=[].slice.apply(arguments,[0,2]);t[0]=t[0]&&t[0].length?t[0]:[0,0],t[1]=t[1]||0,this.actions.push({method:e,data:t}),this.state.lineDash=t[0]}:"setFontSize"===e?E.prototype.setFontSize=function(e){this.state.font=this.state.font.replace(/\d+\.?\d*px/,e+"px"),this.state.fontSize=e,this.actions.push({method:"setFontSize",data:[e]})}:E.prototype[e]=function(){this.actions.push({method:e,data:[].slice.apply(arguments,[0,1])})}}))},6928:(e,t,n)=>{"use strict";n.d(t,{y:()=>B,n:()=>F});var r=n(4742),i=n.n(r),o=n(7541),a=n.n(o),s=n(1503),c=n.n(s),u=n(8676),l=n.n(u),d=n(7163),f=n.n(d),p=n(5843),h=n.n(p),g=n(6965),v=n(426),_=n(8392),m=n(2363),y=n(3638),b=n(3786),w=n(3646),I=n.n(w),S=n(862),C=n.n(S),T=n(2354),E=n(8457),k=n(5251),x=n(2780),A=n(8273),P=new WeakMap,D=function(e){i()(n,e);var t=a()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f()(this,n);var i=c()({id:-1,width:1,height:1,top:0,left:0,nodeId:"",pluginId:""},r),o=i.id,a=i.width,s=i.height,u=i.top,l=i.left,d=i.nodeId,p=i.pluginId;return(e=t.call(this)).id=o,e._top=u,e._left=l,e._width=a,e._height=s,e._nodeId=d,e._pluginId=p,e._onReady(),e}return h()(n,[{key:"_init",value:function(){if(this.id){var e=this._initCanvasInstance();e.width=this._width,e.height=this._height,P.set(this,e)}else console.error("Canvas node cannot be found")}},{key:"_onReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=function(){P.get(e)||e._init(),t()};n()}},{key:"getContext",value:function(e,t){if("2d"===e){var n=P.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var r=n.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:r}),r}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}},{key:"width",get:function(){var e=P.get(this);return e&&e.width},set:function(e){var t=P.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=P.get(this);return e&&e.height},set:function(e){var t=P.get(this);t&&(t.height=e)}},{key:"createImage",value:function(){}},{key:"createImageData",value:function(){}}]),n}(A.c),O=function(e){i()(r,e);var t=a()(r);function r(){return f()(this,r),t.apply(this,arguments)}return h()(r,[{key:"_initCanvasInstance",value:function(){return T.w4.initialize(E.A),new n.g.Canvas(this.id)}},{key:"getContext",value:function(e,t){return(0,b.zG)(k.I,x.o)(I()(C()(r.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new n.g.Image;return(0,b.K1)(e,{nodeId:this.nodeId,pluginId:this.pluginId,webviewId:""})}}]),r}(D),N=n(8450),R=function(e){i()(r,e);var t=a()(r);function r(){return f()(this,r),t.apply(this,arguments)}return h()(r,[{key:"_initCanvasInstance",value:function(){T.w4.initialize(N.B);var e=(g.Z.HTMLCanvasView||n.g.HTMLCanvasView).createView(this.id);return(g.Z.HTMLCanvasElement||n.g.HTMLCanvasElement).createElement(e)}},{key:"getContext",value:function(e,t){return(0,b.zG)(k.I,x.o)(I()(C()(r.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new(g.Z.SkiaImages||SkiaImage),t=(0,b.K1)(e,{nodeId:this._nodeId,pluginId:this._pluginId,webviewId:""});return new k.e(t)}}]),r}(D),M=function(e){i()(n,e);var t=a()(n);function n(){return f()(this,n),t.apply(this,arguments)}return h()(n,[{key:"_initCanvasInstance",value:function(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=this._top+"px",e.style.left=this._left+"px",e.style.width=this._width+"px",e.style.height=this._height+"px",e.width=this._width,e.height=this._height,e._canvasId=this.id,e}},{key:"getContext",value:function(e,t){return(0,b.zG)(k.I)(I()(C()(n.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=this;if("function"==typeof window.__global.createCustomImage)return window.__global.createCustomImage((function(t){return(0,b.rL)(t,e.nodeId,e.pluginId,y.Z.currentWebviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));console.warn("开发工具暂不支持 createImage")}}]),n}(D),L=n(4269),B=function(){function e(t){var n=t.id,r=t.width,i=t.height,o=t.nodeId,a=t.pluginId;f()(this,e),this._id=n,this._width=r,this._height=i,this._nodeId=o,this._pluginId=a}return h()(e,[{key:"id",get:function(){return this._id}},{key:"_offscreenCanvasId",get:function(){return null}},{key:"createImage",value:function(){}},{key:"getContext",value:function(){}},{key:"width",get:function(){},set:function(e){}},{key:"height",get:function(){},set:function(e){}}]),e}();function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="object"===l()(e)?e:{width:e,height:t,compInst:n},i=c()({type:"webgl",width:1,height:1,compInst:null,pluginId:""},r),o=i.type,a=i.width,s=i.height,u=i.compInst,d=i.pluginId;switch(o){case"2d":return j(a,s,u,d);case"webgl":return W(a,s,u,d);default:throw new Error('unknown type "'.concat(o,'"'))}}function j(e,t,n,r){var i=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return m.cj?function(e,t,n,r){var i=-1*V();return new H({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):m.wZ?function(e,t,n,r){var i=-1*V();return new q({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):m.gm?function(e,t,n,r){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");var i=-1*V();return new Y({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):void 0}function W(e,t,n,r){var i=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return m.cj?function(e,t,n,r){var i=-1*V();return new G({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):m.wZ?function(e,t,n,r){var i=-1*V();return new Z({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):m.gm?function(e,t,n,r){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");var i=-1*V();return new z({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):void 0}var U={},V=function(){for(;;){var e=Math.floor(32767*Math.random());if(!U[e])return U[e]=!0,e}},G=function(e){i()(n,e);var t=a()(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,c=e.pluginId;f()(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:c})).__id=-y.Z.currentWebviewId||r.id,(0,_.IN)("insertWebGLCanvas",{position:{top:-100,left:-100,width:1,height:1},canvasId:r.__id,keepAlive:!0,fail:function(){}});var u=(0,v.t)();return r.canvas=u.createOffscreenCanvas(r.__id,o,a),r}return h()(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){var e=(0,v.t)().createImage(this.__id);return(0,b.K1)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"_offscreenCanvasId",get:function(){return this.canvas.__id}}]),n}(B),H=function(e){i()(n,e);var t=a()(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,c=e.pluginId;return f()(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:c})).canvas=(0,b.ci)()?new L.Q(y.Z.currentWebviewId,i):new O({id:i,width:o,height:a,nodeId:s,pluginId:c}),r}return h()(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}console.warn("can only create 2d context")}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(B);var Z=function(e){i()(n,e);var t=a()(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,c=e.pluginId;return f()(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:c})).canvas=new g.Z.OffscreenCanvas(o,a),r}return h()(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){var e=new g.Z.Image;return(0,b.K1)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"_offscreenCanvasId",get:function(){return this.canvas.__id}}]),n}(B),q=function(e){i()(n,e);var t=a()(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,c=e.pluginId;return f()(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:c})).canvas=(0,b.ci)()?new L.Q(y.Z.currentWebviewId,i):new R({id:i,width:o,height:a,nodeId:s,pluginId:c}),r}return h()(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(B);var z=function(e){i()(n,e);var t=a()(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,c=e.pluginId;f()(this,n),r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:c});var u=document.createElement("canvas");return u.width=o,u.height=a,r.canvas=u,r}return h()(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){var e=this;if("function"==typeof window.__global.createCustomImage)return window.__global.createCustomImage((function(t){return(0,b.rL)(t,e.nodeId,e.pluginId,y.Z.currentWebviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));console.warn("开发工具暂不支持 createImage")}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(B),Y=function(e){i()(n,e);var t=a()(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,c=e.pluginId;return f()(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:c})).canvas=new M({id:i,width:o,height:a,nodeId:s,pluginId:c}),r}return h()(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(B)},2701:(e,t,n)=>{"use strict";n.d(t,{mj:()=>_,OS:()=>m,uy:()=>y,gK:()=>w});var r=n(6885),i=n.n(r),o=n(572),a=n.n(o),s=n(7163),c=n.n(s),u=n(5843),l=n.n(u),d=n(8392),f=n(3786),p=n(9947),h=n(2363),g={},v={};function _(e,t){var n=e.canvasId,r=e.viewId,i=e.canvasNumber,o=e.pluginId,a=e.position,s=e.nodeId,c=(0,f.yk)(t,n,o,s),u=y(c);u.context&&(u=b(c)),u.context||u.init(i,a.width,a.height,r,t)}function m(e){var t=e.canvasId,n=e.pluginId,r=e.nodeId,i=e.viewId,o=e.webviewId,a=(0,f.yk)(o,t,n,r);delete g[a],delete v[i]}function y(e){return g[e]?g[e]:b(e)}function b(e){var t=new w(e);return g[e]=t,t}h.wZ&&(0,d.jQ)("onXWebCanvasSurfaceChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=v[e.viewId];t&&"function"==typeof t.swapSurface&&t.swapSurface()})),(0,d.Ld)("skiaCanvasSizeChanged",(function(e,t){var n=e.canvasId,r=e.pluginId,i=e.nodeId,o=e.position,a=(0,f.yk)(t,n,r,i),s=g[a];0===o.width&&0===o.height||!s||s.width===o.width&&s.height===o.height||(s.width=o.width,s.height=o.height,s.canvas&&s.context&&(s.canvas.width=o.width,s.canvas.height=o.height,s.needsReplay()&&s.replayActions()))}));var w=function(){function e(t){var n=this;c()(this,e),this.id=t,this.width=0,this.height=0,this.context=null,this._actionsDefer=[],this._actionsWaiting=!1,this._images=[],this._actionsQueue=[],this._contextPromise=new Promise((function(e){n._resolveContext=e}))}return l()(e,[{key:"init",value:function(e,t,r,i){this.width=t,this.height=r,h.cj&&(this.canvas=new n.g.Canvas(e),this.context=this.canvas.getContext("2d")),h.wZ&&(this.canvasView=HTMLCanvasView.createView(i),v[i]=this.canvasView,this.canvas=HTMLCanvasElement.createElement(this.canvasView),this.context=this.canvas.getContext("2d")),this._resolveContext&&this._resolveContext(this.context)}},{key:"preloadImage",value:function(e){var t=this;e.forEach((function(e){var r="",i=e.method,o=e.data;"drawImage"===i?r=o[0]:"setFillStyle"===i&&"pattern"===o[0]&&(r=o[1]),r&&!t._images[r]&&(h.cj?(t._images[r]=new n.g.Image,t._images[r].onload=function(){t._images[r].ready=!0}):h.wZ&&(t._images[r]=new SkiaImage,t._images[r].onload=function(){t._images[r].ready=!0}),t._images[r].setSrc(r))}))}},{key:"checkImageLoaded",value:function(e,t,n){var r=this,i=this._images[e];return i.ready?(n(i),!0):(this._actionsDefer.unshift([t,!0]),this._actionsWaiting=!0,i.onload=function(){i.ready=!0,n(i),r._actionsWaiting=!1;var e=r._actionsDefer.slice(0);r._actionsDefer=[];for(var t=e.shift();t;)r.draw(t[0],t[1],t[2],r._webviewId,r._nodeId,r._pluginId),t=e.shift()},!1)}},{key:"draw",value:function(e,t,n,r,i,o){var a=this;this._webviewId=r,this._nodeId=i,this._pluginId=o,this.context?this._draw(e,t,n,r,i,o):this._contextPromise.then((function(){return a._draw(e,t,n,r,i,o),null})).catch((function(){}))}},{key:"_draw",value:function(e,t,n,r,o,s){var c=this,u=this.context;if(e)if(t||this._flushQueue(),this._enqueue({actions:e,reserve:t}),this._actionsWaiting)this._actionsDefer.push([e,t,n]);else{t||(u.fillStyle="#000000",u.strokeStyle="#000000",u.shadowColor="#000000",u.shadowBlur=0,u.shadowOffsetX=0,u.shadowOffsetY=0,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,this.width,this.height)),this.preloadImage(e,r,o,s),u.save();for(var l=function(t){var n=e[t],r=n.method,o=n.data;if(/^set/.test(r)&&"setTransform"!==r){var s=r[3].toLowerCase()+r.slice(4),l=void 0;if("fillStyle"===s||"strokeStyle"===s){if("normal"===o[0])l=o[1];else if("linear"===o[0])l=u.createLinearGradient.apply(u,a()(o[1])),o[2].forEach((function(e){var t=e[0],n=e[1];l.addColorStop(t,n)}));else if("radial"===o[0]){var d=o[1][0],f=o[1][1],p=[d,f,0,d,f,o[1][2]];l=u.createRadialGradient.apply(u,p),o[2].forEach((function(e){var t=e[0],n=e[1];l.addColorStop(t,n)}))}else if("pattern"===o[0]){return c.checkImageLoaded(o[1],e.slice(t+1),(function(e){e&&(u[s]=u.createPattern(e,o[2]))}))?"continue":"break"}u[s]=l}else if("globalAlpha"===s)u[s]=o[0]/255;else if("shadow"===s){var h=["shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor"];o.forEach((function(e,t){u[h[t]]=e}))}else"fontSize"===s?u.font=u.font.replace(/\d+\.?\d*px/,o[0]+"px"):"lineDash"===s?(u.setLineDash(o[0]),u.lineDashOffset=o[1]||0):"textBaseline"===s?("normal"===o[0]&&(o[0]="alphabetic"),u[s]=o[0]):u[s]=o[0]}else if("fillPath"===r||"strokePath"===r)r=r.replace(/Path/,""),u.beginPath(),o.forEach((function(e){u[e.method].apply(u,a()(e.data))})),u[r]();else if("fillText"===r){var g=i()(o),v=g[0],_=g.slice(1);_&&_.map&&(_=_.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u.fillText.apply(u,[v].concat(a()(_)))}else if("drawImage"===r){var m=i()(o),y=m[0],b=m.slice(1);if(c._images=c._images||{},b&&b.map&&(b=b.map((function(e){return"string"==typeof e?parseFloat(e):e}))),!c.checkImageLoaded(y,e.slice(t+1),(function(e){e&&u.drawImage.apply(u,[e].concat(a()(b.slice(4,8)),a()(b.slice(0,4))))})))return"break"}else if("clip"===r)o.forEach((function(e){u[e.method].apply(u,a()(e.data))})),u.clip();else if("arcTo"===r||"rotate"===r){var w=o;o&&o.map&&(w=o.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u[r].apply(u,a()(w))}else if("strokeText"===r){var I=i()(o),S=I[0],C=I.slice(1);C&&C.map&&(C=C.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u[r].apply(u,[S].concat(a()(C)))}else u[r].apply(u,a()(o))},d=0;d<e.length;d++){var f=l(d);if("break"===f)break}u.restore(),h.wZ&&this.canvasView.present(),this._actionsWaiting||"function"==typeof n&&n()}}},{key:"getImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.context?this._getImageData(t):this._contextPromise.then((function(){return e._getImageData(t),null})).catch((function(){}))}},{key:"_getImageData",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n=t||{},r=n.x,i=n.y,o=n.width,a=n.height;e=this.context.getImageData(r,i,o,a)}catch(e){return void(0,p.Ky)(t,e)}if(e){var s={width:e.width,height:e.height,data:e.data};(0,p.AK)(t,s)}else(0,p.Ky)("canvasGetImageData:fail")}},{key:"putImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.context?this._putImageData(t):this._contextPromise.then((function(){return e._putImageData(t),null})).catch((function(){}))}},{key:"_putImageData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t,r=e||{},i=r.x,o=r.y,a=r.width,s=r.height,c=r.data;h.cj?t=new n.g.ImageData(c,a,s):h.wZ&&(t=new SkiaImageData(c,a,s)),h.wZ&&this.canvasView.prepareDraw(),this.context.putImageData(t,i,o),h.wZ&&this.canvasView.present()}catch(t){return void(0,p.Ky)(e,t)}(0,p.El)(e,"canvasPutImageData:ok")}},{key:"replayActions",value:function(){var e=this,t=function(){};this._actionsQueue.forEach((function(n){e.draw(n.actions,n.reserve,t,e._webviewId,e._nodeId,e._pluginId)}))}},{key:"needsReplay",value:function(){return this._actionsQueue.length>0}},{key:"_flushQueue",value:function(){this._actionsQueue=[]}},{key:"_enqueue",value:function(e){this._actionsQueue.push(e)}}]),e}()},426:(e,t,n)=>{"use strict";function r(){return n.g.WeixinCanvas}n.d(t,{t:()=>r})},8273:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=function(){function e(){i()(this,e)}return a()(e,[{key:"_init",value:function(){}},{key:"_onReady",value:function(){}},{key:"_initCanvasInstance",value:function(){}},{key:"getContext",value:function(){}},{key:"createImage",value:function(){}},{key:"requestAnimationFrame",value:function(){}},{key:"cancelAnimationFrame",value:function(){}},{key:"width",get:function(){},set:function(e){}},{key:"height",get:function(){},set:function(e){}}]),e}()},2354:(e,t,n)=>{"use strict";n.d(t,{nE:()=>S,TS:()=>C,iO:()=>T,y9:()=>E,mj:()=>x,OS:()=>A,SF:()=>P,w4:()=>D,gK:()=>O});var r=n(7615),i=n.n(r),o=n(4742),a=n.n(o),s=n(7541),c=n.n(s),u=n(3379),l=n.n(u),d=n(572),f=n.n(d),p=n(7163),h=n.n(p),g=n(5843),v=n.n(g),_=n(9307),m=n(3786),y=n(8273),b=n(4531),w=n(9706),I={},S={},C=new WeakMap,T={},E={},k=(0,_.s)("skiaCanvasLoadFontFace");function x(e,t){var n=(0,m.yk)(t,e.canvasNumber);S[n]={top:e.position.top,left:e.position.left,width:e.position.width,height:e.position.height,canvasNumber:e.canvasNumber,nodeId:e.nodeId,pluginId:e.pluginId,webviewId:t},T[e.canvasNumber]={lastTouches:[],data:e.data,compPath:e.compPath};var r=I[n];"function"==typeof r&&(r.call(),delete I[n]),(0,b.dq)(t,(function(){A(e,t)}))}function A(e,t){var n=(0,m.yk)(t,e.canvasNumber);delete I[n],delete S[n],delete E[n],delete T[e.canvasNumber]}function P(e,t){var n=(0,m.yk)(e,t),r=E[n];return r||null}var D=function(){function e(){h()(this,e),this._fontAssets=[],this.loadFontFace(w.X4),this.subscribeFontLoadEvent()}return v()(e,[{key:"loadFontFace",value:function(e){var t;(t=this._fontAssets).push.apply(t,f()(e))}},{key:"subscribeFontLoadEvent",value:function(){var e=this;k.internalOnMethod((function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.nativeFontAssets,i=[],o=l()(r);try{var a=function(){var n=t.value;e._fontAssets.find((function(e){return e.src===n.src||e.originalSrc===n.originalSrc}))||i.push(n)};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}i.length>0&&e.loadFontFace(i)}))}}],[{key:"initialize",value:function(e){this.fontManagerInstance||(this.fontManagerInstance=new e)}}]),e}();D.fontManagerInstance=null;var O=function(e){a()(n,e);var t=c()(n);function n(e,r,o,a){var s;return h()(this,n),(s=t.call(this))._webviewId=e,s._canvasId=(0,m.yk)(e,r),s._nodeId=a,s._nodeCanvasId=o,E[s._canvasId]=i()(s),s}return v()(n,[{key:"_init",value:function(){var e=S[this._canvasId];if(this.id=e.canvasNumber,this._top=e.top,this._left=e.left,this._width=e.width,this._height=e.height,this.id){var t=this._initCanvasInstance();t.width=300,t.height=150,C.set(this,t)}else console.error("Canvas node cannot be found")}},{key:"_onReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=function(){C.get(e)||e._init(),t()};S[this._canvasId]?n():I[this._canvasId]=n}},{key:"getContext",value:function(e,t){if("2d"===e){var n=C.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var r=n.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:r}),r}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}},{key:"width",get:function(){var e=C.get(this);return e&&e.width},set:function(e){var t=C.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=C.get(this);return e&&e.height},set:function(e){var t=C.get(this);t&&(t.height=e)}},{key:"createImageData",value:function(){}},{key:"createPath2D",value:function(e){}},{key:"requestAnimationFrame",value:function(e){}},{key:"cancelAnimationFrame",value:function(){}},{key:"toDataURL",value:function(e,t){var n=C.get(this);return n?n.toDataURL(e,t):""}}]),n}(y.c)},8450:(e,t,n)=>{"use strict";n.d(t,{B:()=>D,$:()=>O});var r=n(1279),i=n.n(r),o=n(3646),a=n.n(o),s=n(862),c=n.n(s),u=n(4742),l=n.n(u),d=n(7541),f=n.n(d),p=n(7163),h=n.n(p),g=n(5843),v=n.n(g),_=n(8947),m=n(6965),y=n(8392),b=n(2363),w=n(3786),I=n(2354),S=n(5251),C=n(2780),T=n(4531),E={};function k(e,t){var n=(0,w.yk)(t,e.canvasNumber),r=E[n];delete E[n],r&&r.dispose()}b.wZ&&((0,y.Ld)("skiaCanvasInsert",(function(e,t){(0,I.mj)(e,t),(0,T.dq)(t,(function(){k(e,t)}))})),(0,y.Ld)("skiaCanvasRemove",(function(e,t){(0,I.OS)(e,t),k(e,t),(0,y.nY)("skiaCanvasRemoved_"+e.canvasNumber)})),(0,y.Ld)("skiaCanvasSizeChangedBinding",(function(e,t){var n=(0,w.yk)(t,e.canvasNumber),r=I.y9[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})),(0,y.jQ)("onXWebCanvasSurfaceChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=(0,w.yk)(t,e.viewId),r=I.y9[n];r&&"function"==typeof r._swap&&r._swap()})));var x=function(){function e(){h()(this,e)}return v()(e,[{key:"sync",value:function(e){this.t=setInterval((function(){e()}),1e3/60)}},{key:"dispose",value:function(){clearInterval(this.t)}}]),e}(),A={offset:Date.now(),now:function(){return Date.now()-this.offset}},P=function(){function e(t){var n=this;h()(this,e),this.id=0,this.canvasView=t,this.callbacks=new Map,this.vSync=new x,this.vSync.sync((function(){var e=new Map(n.callbacks);n.callbacks.clear(),e.forEach((function(e){"function"==typeof e&&e.apply(null,[A.now()])})),n.canvasView.present()}))}return v()(e,[{key:"requestAnimationFrame",value:function(e){var t=this.id++;return this.callbacks.set(t,e),t}},{key:"cancelAnimationFrame",value:function(e){this.callbacks.delete(e)}},{key:"dispose",value:function(){this.vSync.dispose(),this.callbacks.clear()}}]),e}(),D=function(e){l()(r,e);var t=f()(r);function r(){return h()(this,r),t.apply(this,arguments)}return v()(r,[{key:"loadFontFace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];a()(c()(r.prototype),"loadFontFace",this).call(this,e);var t=m.Z.SkiaCanvasLoadNewFont||n.g.SkiaCanvasLoadNewFont;if("function"==typeof t){var i=e.map((function(e){return e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e}));t(i)}}}]),r}(I.w4),O=function(e){l()(r,e);var t=f()(r);function r(){return h()(this,r),t.apply(this,arguments)}return v()(r,[{key:"_initCanvasInstance",value:function(){I.w4.initialize(D);var e=(m.Z.HTMLCanvasView||n.g.HTMLCanvasView).createView(this.id),t=(m.Z.HTMLCanvasElement||n.g.HTMLCanvasElement).createElement(e);return this._scheduler=new P(e),E[this._canvasId]=this._scheduler,this._swap=function(){e.swapSurface()},t}},{key:"getContext",value:function(e,t){return(0,w.zG)(S.I,C.o)(a()(c()(r.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new(m.Z.SkiaImages||SkiaImage),t=(0,w.K1)(e,I.nE[this._canvasId]);return new S.e(t)}},{key:"createImageData",value:function(e,t,r){return e?(t=parseFloat(t),r=parseFloat(r),new(m.Z.SkiaImageData||n.g.SkiaImageData)(e,t,r)):null}},{key:"createPath2D",value:function(){for(var e=m.Z.SkiaPath2D||n.g.SkiaPath2D,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return 0===r.length?new e:1===r.length?i()(e,r):null}},{key:"requestAnimationFrame",value:function(e){return _.Z.useSkiaCanvasRaf?(m.Z.SkiaCanvasRequestAnimationFrame||n.g.SkiaCanvasRequestAnimationFrame)(e):this._scheduler.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){_.Z.useSkiaCanvasRaf?(m.Z.SkiaCanvasCancelAnimationFrame||n.g.SkiaCanvasCancelAnimationFrame)(e):this._scheduler.cancelAnimationFrame(e)}}]),r}(I.gK)},4269:(e,t,n)=>{"use strict";n.d(t,{Q:()=>E});var r=n(4742),i=n.n(r),o=n(7541),a=n.n(o),s=n(7163),c=n.n(s),u=n(5843),l=n.n(u),d=n(8392),f=n(3786),p=n(2354),h=n(5251),g=n(6809),v=n(4531),_=n(9624),m=n(8947),y={};function b(e,t){var n=(0,f.yk)(t,e.canvasNumber),r=y[n];delete y[n],r&&r.dispose()}m.Z.onReady((function(){(0,f.ci)()&&((0,d.Ld)("skiaCanvasInsert",(function(e,t){(0,p.mj)(e,t),(0,v.dq)(t,(function(){b(e,t)}))})),(0,d.Ld)("skiaCanvasRemove",(function(e,t){(0,p.OS)(e,t),b(e,t),(0,d.nY)("skiaCanvasRemoved_"+e.canvasNumber)})),(0,d.Ld)("skiaCanvasSizeChangedBinding",(function(e,t){var n=(0,f.yk)(t,e.canvasNumber),r=p.y9[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})))}));var w=function(){function e(){c()(this,e)}return l()(e,[{key:"width",get:function(){return this._w},set:function(e){this._w=e}},{key:"height",get:function(){return this._h},set:function(e){this._h=e}}]),e}(),I=function(){function e(){c()(this,e),this._src=null,this._referrerPolicy=""}return l()(e,[{key:"setSrc",value:function(e){var t=this;this._src=e,/^(http|https):\/\//.test(e)?(0,_.o)({url:e,success:function(e){t._src=e.tempFilePath,"function"==typeof t.onload&&t.onload()},fail:this.onerror||function(){}}):"function"==typeof this.onload&&this.onload()}},{key:"getSrc",value:function(){return this._src}},{key:"getReferrerPolicy",value:function(){return this._referrerPolicy}},{key:"setReferrerPolicy",value:function(e){this._referrerPolicy=e}}]),e}(),S=function(){function e(){c()(this,e)}return l()(e,[{key:"sync",value:function(e){var t=this;this.t=setTimeout((function n(){e(),t.t=setTimeout(n,1e3/60)}),1e3/60)}},{key:"dispose",value:function(){clearInterval(this.t)}}]),e}(),C={offset:Date.now(),now:function(){return Date.now()-this.offset}},T=function(){function e(t){var n=this;c()(this,e),this.id=0,this.canvasView=t,this.callbacks=new Map,this.vSync=new S,this.vSync.sync((function(){var e=new Map(n.callbacks);if(n.callbacks.clear(),e.forEach((function(e){"function"==typeof e&&e.apply(null,[C.now()])})),n.canvasView.actions.length>0){for(var t=!0,r=n.canvasView.actions,i=0;i<r.length;i++)"clearRect"===r[i].method&&(t=!1);n.canvasView.draw(t)}}))}return l()(e,[{key:"requestAnimationFrame",value:function(e){var t=this.id++;return this.callbacks.set(t,e),t}},{key:"cancelAnimationFrame",value:function(e){this.callbacks.delete(e)}},{key:"dispose",value:function(){this.vSync.dispose(),this.callbacks.clear()}}]),e}(),E=function(e){i()(n,e);var t=a()(n);function n(){return c()(this,n),t.apply(this,arguments)}return l()(n,[{key:"_initCanvasInstance",value:function(){return this._context=new g._(this._webviewId,this._nodeCanvasId,this._nodeId,""),this._scheduler=new T(this._context),y[this._canvasId]=this._scheduler,new w}},{key:"getContext",value:function(){return(0,f.zG)(h.I)(this._context,this.id)}},{key:"width",get:function(){var e=p.TS.get(this);return e&&e.width},set:function(e){e!==this._width&&(this._context._ignoreScale=!0);var t=p.TS.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=p.TS.get(this);return e&&e.height},set:function(e){e!==this._height&&(this._context._ignoreScale=!0);var t=p.TS.get(this);t&&(t.height=e)}},{key:"createImage",value:function(){var e=new I,t=(0,f.K1)(e,p.nE[this._canvasId]);return new h.e(t)}},{key:"createImageData",value:function(){return null}},{key:"createPath2D",value:function(){return null}},{key:"requestAnimationFrame",value:function(e){return this._scheduler.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){this._scheduler.cancelAnimationFrame(e)}}]),n}(p.gK)},8457:(e,t,n)=>{"use strict";n.d(t,{A:()=>C,l:()=>T});var r=n(1279),i=n.n(r),o=n(7163),a=n.n(o),s=n(5843),c=n.n(s),u=n(3646),l=n.n(u),d=n(862),f=n.n(d),p=n(4742),h=n.n(p),g=n(7541),v=n.n(g),_=n(8392),m=n(3786),y=n(2363),b=n(2354),w=n(5251),I=n(2780),S=n(426);y.cj&&((0,_.Ld)("skiaCanvasInsert",(function(e,t){(0,b.mj)(e,t)})),(0,_.Ld)("skiaCanvasRemove",(function(e,t){(0,b.OS)(e,t),(0,_.nY)("skiaCanvasRemoved_"+e.canvasNumber)})),(0,_.Ld)("skiaCanvasSizeChangedBinding",(function(e,t){var n=(0,m.yk)(t,e.canvasNumber),r=b.y9[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})));var C=function(e){h()(r,e);var t=v()(r);function r(){return a()(this,r),t.apply(this,arguments)}return c()(r,[{key:"loadFontFace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];l()(f()(r.prototype),"loadFontFace",this).call(this,e);var t=n.g.skiacanvasLoadNewFont;if("function"==typeof t){var i=e.map((function(e){return e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e}));t(i)}}}]),r}(b.w4),T=function(e){h()(r,e);var t=v()(r);function r(){return a()(this,r),t.apply(this,arguments)}return c()(r,[{key:"_initCanvasInstance",value:function(){return b.w4.initialize(C),new n.g.Canvas(this.id)}},{key:"getContext",value:function(e,t){return(0,m.zG)(w.I,I.o)(l()(f()(r.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new n.g.Image,t=(0,m.K1)(e,b.nE[this._canvasId]);return new w.e(t)}},{key:"createImageData",value:function(e,t,r){return e?(t=parseFloat(t),r=parseFloat(r),new n.g.ImageData(e,t,r)):null}},{key:"createPath2D",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?new Path2D:1===t.length?i()(Path2D,t):null}},{key:"requestAnimationFrame",value:function(e){return(0,S.t)().requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return(0,S.t)().cancelAnimationFrame(e)}}]),r}(b.gK)},5251:(e,t,n)=>{"use strict";n.d(t,{e:()=>u,I:()=>p});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(8560),c=n(2363),u=function(){function e(t){i()(this,e),Object.defineProperty(this,"_ptr",{value:t,writable:!1,configurable:!1,enumerable:!1})}return a()(e,[{key:"src",get:function(){return this._ptr.src},set:function(e){var t=this;/^(http|https):\/\//.test(e)&&(e=encodeURI(e));var n=function(e){return function(){setTimeout((function(){e()}),0)}};this._ptr.onload=n((function(){"function"==typeof t.__onload&&t.__onload.apply(t)})),this._ptr.onerror=n((function(){"function"==typeof t.__onerror&&t.__onerror.apply(t)})),this._ptr.src=e}},{key:"referrerPolicy",get:function(){return this._ptr.referrerPolicy},set:function(e){"string"==typeof e&&(this._ptr.referrerPolicy=e)}},{key:"onload",get:function(){return this._ptr.onload},set:function(e){Object.defineProperty(this,"__onload",{value:e,writable:!1,configurable:!1,enumerable:!1})}},{key:"onerror",get:function(){return this.__onload},set:function(e){Object.defineProperty(this,"__onerror",{value:e,writable:!1,configurable:!1,enumerable:!1})}},{key:"complete",get:function(){return this._ptr.complete}},{key:"width",get:function(){return this._ptr.width}},{key:"height",get:function(){return this._ptr.height}}]),e}(),l=new WeakMap,d=n.g.SkiaCanvasExternalTexture;function f(e,t){return c.gm?(0,s.hG)(e):new d(t,e._videoId,"video")}function p(e,t){if(!e)return e;var n=e.drawImage.bind(e),r=e.createPattern.bind(e);return e.drawImage=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(e instanceof u)return n.apply(void 0,[e._ptr].concat(i));if(e instanceof s.lR){var a=e,c=a._videoId;if("number"!=typeof c)throw new Error("Failed to execute 'drawImage' on 'CanvasRenderingContext2D': The provided video context is invalid, make sure that comes from 'createSelectQuery.context'.");var d=l.get(a)||{};d[t]?e=d[t]:(e=f(a,t),d[t]=e,l.set(a,d))}return n.apply(void 0,[e].concat(i))},e.createPattern=function(e,t){return r(e instanceof u?e._ptr:e,t)},e}delete n.g.SkiaCanvasExternalTexture},2780:(e,t,n)=>{"use strict";n.d(t,{o:()=>o});var r=n(8676),i=n.n(r);function o(e){if(!e)return e;var t=e.fill.bind(e),n=e.putImageData.bind(e);return e.fill=function(e){return e?t(e,e):t()},e.putImageData=function(e){if(0===e||"object"!==i()(e))return null;for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return n.apply(void 0,[e].concat(r))},e}},2661:(e,t,n)=>{"use strict";n.d(t,{jZ:()=>_,q7:()=>m,z9:()=>w,Kf:()=>I,f5:()=>S,I$:()=>C,aj:()=>T});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(7615),c=n.n(s),u=n(4742),l=n.n(u),d=n(7541),f=n.n(d),p=n(3786),h=n(8273),g=n(4531),v={},_={},m={},y=new WeakMap,b={};function w(e,t){var n=(0,p.yk)(t,e.canvasNumber);m[n]={top:e.top,left:e.left,width:e.width,height:e.height,canvasNumber:e.canvasNumber,nodeId:e.nodeId,pluginId:e.pluginId,webviewId:t},_[n]=Object.assign({},e.data,{webviewId:t});var r=v[n];"function"==typeof r&&(r.call(),delete v[n]),(0,g.dq)(t,(function(){I(e,t)}))}function I(e,t){var n=(0,p.yk)(t,e.canvasNumber);delete m[n],delete _[n],delete v[n],delete b[n]}function S(e,t){var n=(0,p.yk)(e,t);return _[n]}function C(e,t){var n=(0,p.yk)(e,t),r=b[n];return r||null}var T=function(e){l()(n,e);var t=f()(n);function n(e,r){var o;return i()(this,n),(o=t.call(this))._canvasId=(0,p.yk)(e,r),b[o._canvasId]=c()(o),o}return a()(n,[{key:"_init",value:function(){var e=m[this._canvasId];if(this.id=e.canvasNumber,this._top=e.top,this._left=e.left,this._width=e.width,this._height=e.height,this.id){var t=this._initCanvasInstance();y.set(this,t)}else console.error("Canvas node cannot be found")}},{key:"getContext",value:function(e,t){if("2d"===e)console.info("getContext for canvas 2d is not yet supported");else{if("webgl"===e){var n=y.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var r=n.getContext("webgl",t);return this._ctx=r,r}console.error("Invalid type ["+e+"] for Canvas#getContext")}}},{key:"_onReady",value:function(e){var t=this,n=function(){t._init(),"function"==typeof e&&e()};m[this._canvasId]?n():v[this._canvasId]=n}},{key:"width",get:function(){var e=y.get(this);return e&&e.width},set:function(e){var t=y.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=y.get(this);return e&&e.height},set:function(e){var t=y.get(this);t&&(t.height=e)}},{key:"_initCanvasInstance",value:function(){}},{key:"createImage",value:function(){}},{key:"requestAnimationFrame",value:function(){}},{key:"cancelAnimationFrame",value:function(){}}]),n}(h.c)},7466:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OffscreenCanvas:()=>i.y,SKIA_CANVAS_ENABLED:()=>r.hU,SkiaCanvas:()=>o.gK,canvas:()=>r.JQ,canvasGetImageData:()=>r.Mm,canvasGetImageData4Plugin:()=>r.ZX,canvasInfo:()=>r.go,canvasPutImageData:()=>r.Z5,canvasPutImageData4Plugin:()=>r.Sk,canvasToDataURL:()=>r.nY,canvasToTempFilePath:()=>r.qW,canvasToTempFilePath4Plugin:()=>r.KU,createCanvasContext:()=>r.yU,createCanvasContext4Plugin:()=>r.RU,createCanvasNode:()=>ie,createContext:()=>r.kr,createOffscreenCanvas:()=>i.n,drawCanvas:()=>r.MN,drawCanvas4Plugin:()=>r.k8,drawCanvasImpl:()=>r.fS,getOrCreateCanvas:()=>o.uy,onCanvasMethodCallbackOnce:()=>r.Py,skiaCanvasInsert:()=>o.mj,skiaCanvasRemove:()=>o.OS});var r=n(2675),i=n(6928),o=n(2701),a=n(3638),s=n(2363),c=n(2661),u=n(7163),l=n.n(u),d=n(5843),f=n.n(d),p=n(4742),h=n.n(p),g=n(7541),v=n.n(g),_=n(8392),m=n(426),y=n(3786),b=null,w=!1,I={},S=["touchstart","touchmove","touchend","touchcancel"];s.cj&&((0,_.Ld)("webGLInserted",(function(e,t){var n;b||(b=(0,m.t)()),w||(w=!0,n=b,S.forEach((function(e){n["on".concat(e)]=function(t){var n=I[t.canvasId];n?n.handlers["bind".concat(e)]&&a.Z.webviewEventCallback({data:{type:e,target:n.target,currentTarget:n.target,timeStamp:t.timeStamp,touches:(0,y.VN)(t.touches),changedTouches:(0,y.VN)(t.changedTouches)},eventName:n.handlers["bind".concat(e)],webviewId:n.webviewId,nodeId:n.nodeId}):console.error("event can not be dispatched due to missing node info")}}))),I[e.canvasNumber]=Object.assign({},e.data,{webviewId:t}),(0,c.z9)(e,t)})),(0,_.Ld)("webGLRemoved",(function(e,t){delete I[e.canvasNumber],(0,c.Kf)(e,t)})));var C=function(e){h()(n,e);var t=v()(n);function n(){return l()(this,n),t.apply(this,arguments)}return f()(n,[{key:"_initCanvasInstance",value:function(){var e,t;return e=this,(t=b.createCanvas(e.id))._canvasId=e._canvasId,t}},{key:"createImage",value:function(){return e=this,t=b.createImage(e.id),n=c.q7[e._canvasId]||{},(0,y.K1)(t,n);var e,t,n}},{key:"requestAnimationFrame",value:function(e){return b.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return b.cancelAnimationFrame(e)}}]),n}(c.aj),T=n(3646),E=n.n(T),k=n(862),x=n.n(k),A=n(6965),P=["touchstart","touchmove","touchend","touchcancel"],D=!1;function O(){var e=A.Z.EventHandler;P.forEach((function(t){e["on".concat(t)]=function(e){var n=e.currentTarget,r=c.jZ[n._canvasId];r?r.handlers["bind".concat(t)]&&a.Z.webviewEventCallback({data:{type:t,target:r.target,currentTarget:r.target,timeStamp:e.timeStamp,touches:(0,y.VN)(e.touches),changedTouches:(0,y.VN)(e.changedTouches)},eventName:r.handlers["bind".concat(t)],webviewId:r.webviewId,nodeId:r.nodeId}):console.error("event can not be dispatched due to missing node info")}}))}s.wZ&&((0,_.Ld)("webGLInserted",(function(){D||(D=!0,O()),c.z9.apply(void 0,arguments)})),(0,_.Ld)("webGLRemoved",c.Kf));var N=function(e){h()(n,e);var t=v()(n);function n(){return l()(this,n),t.apply(this,arguments)}return f()(n,[{key:"_initCanvasInstance",value:function(){var e,t,n=(e=this,(t=new A.Z.findElementById(e.id))._canvasId=e._canvasId,t);return this.__canvasNumber=this.id,this.id=n.__id,n}},{key:"getContext",value:function(e,t){return t&&t.alpha||(0,_.nY)("xwebWebGLSetOpaqueBackground",{canvasNumber:this.__canvasNumber}),E()(x()(n.prototype),"getContext",this).call(this,e,t)}},{key:"createImage",value:function(){return e=this,t=new A.Z.Image,n=c.q7[e._canvasId],(0,y.K1)(t,n);var e,t,n}},{key:"requestAnimationFrame",value:function(e){return A.Z.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return A.Z.cancelAnimationFrame(e)}}]),n}(c.aj),R=n(2208),M=n.n(R),L=n(3379),B=n.n(L),F=n(1957),j=n(4531),W={},U={},V={},G={},H=a.Z.currentWebviewId;s.gm&&((0,_.Ld)("webGLInserted",c.z9),(0,_.Ld)("webGLUpdated",(function(e,t){var n=(0,y.yk)(t,e.canvasNumber),r=W[n];if(!r)return;r.style.top=e.box.top+"px",r.style.left=e.box.left+"px",r.style.width=e.box.width+"px",r.style.height=e.box.height+"px"})),(0,_.Ld)("webGLRemoved",(function(e,t){var n=(0,y.yk)(t,e.canvasNumber);(0,c.Kf)(e,t),delete W[n]})),(0,_.Ld)("webGLPageScroll",(function(e,t){"function"==typeof window.scrollTo&&(document.body.scrollWidth===e.width&&document.body.scrollHeight===e.height||(document.body.style.width=e.width+"px",document.body.style.height=e.height+"px"),window.scrollTo(e.scrollLeft,e.scrollTop),V[t]={scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})})),(0,F.H)((function(e){G[e.webviewId]||((0,j.dq)(e.webviewId,(function(){var t=U[e.webviewId];if(t){var n,r=B()(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;delete W[i._canvasId],document.body.removeChild(i)}}catch(e){r.e(e)}finally{r.f()}delete V[e.webviewId],delete U[e.webviewId],delete G[e.webviewId]}})),G[e.webviewId]=!0);var t=e.webviewId;if(t!==H)for(var n=0,r=Object.entries(U);n<r.length;n++){var i=M()(r[n],2),o=i[0],a=i[1];if(String(o)===String(t)){var s,c=B()(a);try{for(c.s();!(s=c.n()).done;){s.value.style.visibility="visible"}}catch(e){c.e(e)}finally{c.f()}var u=V[o];u?window.scrollTo(u.scrollLeft,u.scrollTop):window.scrollTo(0,0)}else{var l,d=B()(a);try{for(d.s();!(l=d.n()).done;){l.value.style.visibility="hidden"}}catch(e){d.e(e)}finally{d.f()}}}H=t})));var Z=function(e){h()(n,e);var t=v()(n);function n(e,r){var i;return l()(this,n),(i=t.call(this,e,r))._webviewId=e,i}return f()(n,[{key:"_initCanvasInstance",value:function(){var e,t;return e=this,(t=document.createElement("canvas")).style.position="absolute",t.style.top=e._top+"px",t.style.left=e._left+"px",t.style.width=e._width+"px",t.style.height=e._height+"px",t.width=e._width,t.height=e._height,t._canvasId=e._canvasId,document.body.appendChild(t),W[e._canvasId]=t,U[e._webviewId]||(U[e._webviewId]=[]),U[e._webviewId].push(t),t}},{key:"createImage",value:function(){return e=this,t=c.q7[e._canvasId],window.__global.createCustomImage((function(e){return(0,y.rL)(e,t.nodeId,t.pluginId,t.webviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));var e,t}},{key:"requestAnimationFrame",value:function(e){return window.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return window.cancelAnimationFrame(e)}}]),n}(c.aj),q=n(2354),z=n(8457),Y=n(8450),K=n(1279),J=n.n(K),$=n(5251),X={},Q={},ee={},te=a.Z.currentWebviewId;s.gm&&((0,_.Ld)("skiaCanvasInsert",(function(e,t){(0,q.mj)(e,t)})),(0,_.Ld)("skiaCanvasRemove",(function(e,t){(0,q.OS)(e,t);var n=(0,y.yk)(t,e.canvasNumber);delete X[n]})),(0,_.Ld)("skiaCanvasUpdated",(function(e,t){var n=(0,y.yk)(t,e.canvasNumber),r=X[n];if(!r||"function"==typeof r){return void new Promise((function(e){X[n]=e})).then((function(t){t.style.top=e.box.top+"px",t.style.left=e.box.left+"px",t.style.width=e.box.width+"px",t.style.height=e.box.height+"px"}))}r.style.top=e.box.top+"px",r.style.left=e.box.left+"px",r.style.width=e.box.width+"px",r.style.height=e.box.height+"px"})),(0,_.Ld)("skiaPageScroll",(function(e,t){"function"==typeof window.scrollTo&&(document.body.scrollWidth===e.width&&document.body.scrollHeight===e.height||(document.body.style.width=e.width+"px",document.body.style.height=e.height+"px"),window.scrollTo(e.scrollLeft,e.scrollTop),ee[t]={scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})})),(0,F.H)((function(e){(0,j.dq)(e.webviewId,(function(){var t=Q[e.webviewId];if(t){var n,r=B()(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;document.body.removeChild(i)}}catch(e){r.e(e)}finally{r.f()}delete ee[e.webviewId],delete Q[e.webviewId]}}));var t=e.webviewId;if(t!==te)for(var n=0,r=Object.entries(Q);n<r.length;n++){var i=M()(r[n],2),o=i[0],a=i[1];if(String(o)===String(t)){var s,c=B()(a);try{for(c.s();!(s=c.n()).done;){s.value.style.visibility="visible"}}catch(e){c.e(e)}finally{c.f()}var u=ee[o];u?window.scrollTo(u.scrollLeft,u.scrollTop):window.scrollTo(0,0)}else{var l,d=B()(a);try{for(d.s();!(l=d.n()).done;){l.value.style.visibility="hidden"}}catch(e){d.e(e)}finally{d.f()}}}te=t})));var ne=function(e){h()(n,e);var t=v()(n);function n(e,r){var i;return l()(this,n),(i=t.call(this,e,r))._webviewId=e,i}return f()(n,[{key:"_initCanvasInstance",value:function(){var e=document.createElement("canvas");e.style.position="absolute",e.style.top=this._top+"px",e.style.left=this._left+"px",e.style.width=this._width+"px",e.style.height=this._height+"px",e.width=this._width,e.height=this._height,e._canvasId=this._canvasId,document.body.appendChild(e);var t=X[this._canvasId];return t&&"function"==typeof t&&t(e),X[this._canvasId]=e,Q[this._webviewId]||(Q[this._webviewId]=[]),Q[this._webviewId].push(e),this._canvasRef=e,e}},{key:"getContext",value:function(e,t){return(0,y.zG)($.I)(E()(x()(n.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=q.nE[this._canvasId];return window.__global.createCustomImage((function(t){return(0,y.rL)(t,e.nodeId,e.pluginId,e.webviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}))}},{key:"createImageData",value:function(e,t,n){if(!e)return null;t=parseFloat(t),n=parseFloat(n);for(var r=document.createElement("canvas").getContext("2d").createImageData(t,n),i=0;i<e.length;i++)r.data[i]=e[i];return r}},{key:"createPath2D",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return window.Path2D?J()(Path2D,t):null}},{key:"requestAnimationFrame",value:function(e){return window.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return window.cancelAnimationFrame(e)}}]),n}(q.gK),re=n(4269);function ie(e,t,n,r){if("2d"===t){var i=(0,q.SF)(a.Z.currentWebviewId,e);if(i)return i;if((0,y.ci)())return new re.Q(a.Z.currentWebviewId,e,n,r);if(s.cj)return new z.l(a.Z.currentWebviewId,e);if(s.wZ)return new Y.$(a.Z.currentWebviewId,e);if(s.gm){if(window&&"function"==typeof window.scrollTo)return new ne(a.Z.currentWebviewId,e);console.warn("开发工具暂不支持获取 Canvas 节点")}}else if("webgl"===t){var o=(0,c.I$)(a.Z.currentWebviewId,e);if(o)return o;if(s.cj)return new C(a.Z.currentWebviewId,e);if(s.wZ)return new N(a.Z.currentWebviewId,e);if(s.gm){if(window&&"function"==typeof window.scrollTo)return new Z(a.Z.currentWebviewId,e);console.warn("开发工具暂不支持获取 Canvas 节点")}}return null}},3786:(e,t,n)=>{"use strict";n.d(t,{yk:()=>u,kR:()=>l,GX:()=>d,Fi:()=>g,rL:()=>_,K1:()=>m,VN:()=>y,LG:()=>b,zG:()=>w,ci:()=>S});var r=n(8392),i=n(9947),o=n(3638),a=n(8947),s=n(2363),c=n(968);void 0!==globalThis.ImageData&&globalThis.ImageData;function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i="canvas_".concat(e,"_").concat(t,"_").concat(n,"_");return r&&r!==__virtualDOM__.getRootNodeId(e)&&(i+=r),i}function l(e){var t=[],n=1;return(0,r.Ld)(e,(function(e){for(var n=-1,r=0;r<t.length;r++){var i=t[r],o=i[0],a=i[1];if(o.cid===e.cid&&o.canvasId===e.canvasId){n=r,a(e);break}}n>=0&&t.splice(n,1)})),function(e,r){e.cid=n++,t.push([e,r])}}function d(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return(window.__global||window).btoa(t)}var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/,h="undefined"!=typeof window&&window.atob||function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!p.test(e))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,r,i="",o=0;o<e.length;)t=f.indexOf(e.charAt(o++))<<18|f.indexOf(e.charAt(o++))<<12|(n=f.indexOf(e.charAt(o++)))<<6|(r=f.indexOf(e.charAt(o++))),i+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return i};function g(e){for(var t=h(e),n=t.length,r=new Uint8ClampedArray(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}function v(e,t,n,r){if(/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e)return e;if(!/wxfile:\/\//.test(e))if(n||t){n=n.split("/")[0];var a=__virtualDOM__.getNodeById(t,r),s=a&&a.is||"";e=n?0===e.indexOf("/")?__virtualDOM__.getPluginRoutePrefix(n)+(0,i.sd)(s,e,!1).replace(/\.html$/,""):(0,i.sd)(__virtualDOM__.convertComponentAliasToRoute(s),e,!1).replace(/\.html$/,""):(0,i.sd)(s,e,!1).replace(/\.html$/,"")}else e=(0,i.sd)(o.Z.lastRoute,e,!1).replace(/.html$/,"");return e}function _(e,t,n,r){return/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e?e:"/__pageframe__/"+v(e,t,n,r)}function m(e,t){var n=e.setSrc.bind(e),r=e.getSrc.bind(e),i=e.getReferrerPolicy?e.getReferrerPolicy.bind(e):function(){},o=e.setReferrerPolicy?e.setReferrerPolicy.bind(e):function(){};return delete e.getSrc,delete e.setSrc,delete e.getReferrerPolicy,delete e.setReferrerPolicy,Object.defineProperty(e,"src",{enumerable:!0,set:function(e){var r=v(e,t.nodeId,t.pluginId,t.webviewId);n(r)},get:function(){return r()}}),Object.defineProperty(e,"referrerPolicy",{enumerable:!0,set:function(e){o(e)},get:function(){return i()}}),e}function y(e){return e&&e.length>0&&e.forEach((function(e){e.x=e.clientX||e.pageX,e.y=e.clientY||e.pageY,delete e.target})),e}function b(e){return e&&e.length>0&&e.forEach((function(e){e.clientX=e.x,e.clientY=e.y,e.pageX=e.x,e.pageY=e.y})),e}function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0;o<t.length;++o){var a=t[o];"function"==typeof a&&(e=0===o?a.apply(null,r):a.call(null,e))}return e}}var I=!1;function S(){if(s.cj&&(0,c.er)()){var e=255&Number(a.Z.host.version);if(e>=16&&e<=31)return!0}return a.Z.clientVersion>=385881088&&a.Z.clientVersion<=385881343&&I}a.Z.onReady((function(){(0,r.IN)("getPermissionBytes",{indexes:[977],success:function(e){e.permissionBytes&&1===e.permissionBytes[0]&&(I=!0)}})}))},9588:(e,t,n)=>{"use strict";n.d(t,{Tp:()=>i});var r={sample:{invokeWebviewMethod:null,drawCanvas:null,createContext:null,createCanvasContext:null,canvasToTempFilePath:null,canvasGetImageData:null,canvasPutImageData:null,getShareInfo:null,pageScrollTo:null,chooseInvoiceTitle:null,ShareInfoStorage:null,arrayBufferToBase64:null,base64ToArrayBuffer:null,openSetting:null,getExtConfig:null,chooseMedia:null,chooseWeChatContact:null,uploadEncryptedFileToCDN:null,onUploadEncryptedFileToCDNProgress:null,getExtConfigSync:null,showShareMenu:null,hideShareMenu:null,updateShareMenu:null,openUrl:null,setNavigationBarColor:null,setNavigationBarAlpha:null,_getRealRoute:null,vibrateShort:null,vibrateLong:null,getSetting:null,checkIsSupportFacialRecognition:null,startFacialRecognitionVerify:null,startFacialRecognitionVerifyAndUploadVideo:null,sendBizRedPacket:null,sendGoldenRedPacket:null,openGoldenRedPacketDetail:null,showRedPackage:null,addPhoneContact:null,setScreenBrightness:null,getScreenBrightness:null,shareToWeRun:null,getWeRunData:null,uploadWeRunData:null,canIUse:null,setPageStyle:null,triggerGettingWidgetData:null,navigateToMiniProgram:null,navigateToDevMiniProgram:null,navigateBackMiniProgram:null,exitMiniProgram:null,setNavigationBarRightButton:null,onTapNavigationBarRightButton:null,setTopBarText:null,setTabBarBadge:null,removeTabBarBadge:null,showTabBarRedDot:null,hideTabBarRedDot:null,showTabBar:null,hideTabBar:null,setTabBarStyle:null,setTabBarItem:null,setEnableDebug:null,captureScreen:null,onUserCaptureScreen:null,setKeepScreenOn:null,checkIsSupportSoterAuthentication:null,startSoterAuthentication:null,checkIsSoterEnrolledInDevice:null,openDeliveryList:null,reportIDKey:null,reportKeyValue:null,setNavigationBarTitle:null,showNavigationBarLoading:null,hideNavigationBarLoading:null,startPullDownRefresh:null,stopPullDownRefresh:null,operateWXData:null,getOpenDeviceId:null,makeBluetoothPair:null,openBluetoothAdapter:null,closeBluetoothAdapter:null,getBluetoothAdapterState:null,startBluetoothDevicesDiscovery:null,stopBluetoothDevicesDiscovery:null,getBluetoothDevices:null,getConnectedBluetoothDevices:null,createBLEConnection:null,setBLEMTU:null,closeBLEConnection:null,getBLEDeviceServices:null,getBLEDeviceCharacteristics:null,notifyBLECharacteristicValueChanged:null,notifyBLECharacteristicValueChange:null,readBLECharacteristicValue:null,writeBLECharacteristicValue:null,onBluetoothDeviceFound:null,onBLEConnectionStateChanged:null,onBLEConnectionStateChange:null,onBLECharacteristicValueChange:null,onBluetoothAdapterStateChange:null,offBluetoothAdapterStateChange:null,offBluetoothDeviceFound:null,offBLEConnectionStateChanged:null,offBLEConnectionStateChange:null,offBLECharacteristicValueChange:null,createBLEPeripheralServer:null,onBLEPeripheralConnectionStateChanged:null,offBLEPeripheralConnectionStateChanged:null,startBeaconDiscovery:null,stopBeaconDiscovery:null,getBeacons:null,onBeaconUpdate:null,onBeaconServiceChange:null,startWifi:null,stopWifi:null,getWifiList:null,getConnectedWifi:null,connectWifi:null,presetWifiList:null,setWifiList:null,onGetWifiList:null,onWifiConnected:null,offGetWifiList:null,offWifiConnected:null,onEvaluateWifi:null,getHCEState:null,startHCE:null,stopHCE:null,sendHCEMessage:null,onHCEMessage:null,startLocalServiceDiscovery:null,stopLocalServiceDiscovery:null,onLocalServiceFound:null,offLocalServiceFound:null,onLocalServiceLost:null,offLocalServiceLost:null,onLocalServiceDiscoveryStop:null,offLocalServiceDiscoveryStop:null,onLocalServiceResolveFail:null,offLocalServiceResolveFail:null,redirectTo:null,reLaunch:null,navigateTo:null,switchTab:null,navigateBack:null,_triggerBeforeUnloadPage:null,_triggerBeforeShareAppMessage:null,navigateBackApplication:null,navigateBackNative:null,launchApplication:null,getStorage:null,getStorageSync:null,setStorage:null,setStorageSync:null,removeStorage:null,removeStorageSync:null,clearStorage:null,clearStorageSync:null,getStorageInfo:null,getStorageInfoSync:null,getBackgroundFetchData:null,onBackgroundFetchData:null,request:null,connectSocket:null,closeSocket:null,sendSocketMessage:null,onSocketOpen:null,onSocketClose:null,onSocketMessage:null,onSocketError:null,uploadFile:null,downloadFile:null,addNativeDownloadTask:null,chooseImage:null,previewImage:null,previewMedia:null,getImageInfo:null,saveImageToPhotosAlbum:null,startRecord:null,stopRecord:null,playVoice:null,pauseVoice:null,stopVoice:null,onVoicePlayEnd:null,chooseVideo:null,saveVideoToPhotosAlbum:null,getVideoInfo:null,compressVideo:null,getLocation:null,openLocation:null,chooseLocation:null,choosePoi:null,onLocationChange:null,offLocationChange:null,onLocationChangeError:null,offLocationChangeError:null,startLocationUpdateBackground:null,startLocationUpdate:null,stopLocationUpdate:null,getNetworkType:null,onNetworkStatusChange:null,getSystemInfo:null,getSystemInfoSync:null,getBatteryInfo:null,getBatteryInfoSync:null,startAccelerometer:null,stopAccelerometer:null,onAccelerometerChange:null,startCompass:null,stopCompass:null,onCompassChange:null,reportAction:null,getBackgroundAudioManager:null,getRecorderManager:null,getBackgroundAudioPlayerState:null,playBackgroundAudio:null,pauseBackgroundAudio:null,seekBackgroundAudio:null,stopBackgroundAudio:null,onBackgroundAudioPlay:null,onBackgroundAudioPause:null,onBackgroundAudioStop:null,join1v1Chat:null,setEnable1v1Chat:null,joinVoIPChat:null,exitVoIPChat:null,updateVoIPChatMuteConfig:null,onVoIPChatMembersChanged:null,onVoIPChatSpeakersChanged:null,onVoIPChatInterrupted:null,offVoIPChatMembersChanged:null,offVoIPChatSpeakersChanged:null,offVoIPChatInterrupted:null,onVoIPVideoMembersChanged:null,offVoIPVideoMembersChanged:null,onVoIPChatStateChanged:null,offVoIPChatStateChanged:null,subscribeVoIPVideoMembers:null,login:null,checkSession:null,authorize:null,getUserInfo:null,getUserProfile:null,requestFacetoFacePayment:null,requestPayment:null,requestPersonalPay:null,requestJointPayment:null,getWCPayOverseaPrepayRequest:null,requestH5Transaction:null,openWCPayOverseaPaymentReceive:null,handleWCPayOverseaWalletBuffer:null,requestVerifyUserIdentity:null,verifyPaymentPassword:null,bindPaymentCard:null,requestPaymentToBank:null,requestVirtualPayment:null,openOfflinePayView:null,openWCPayCardList:null,requestMallPayment:null,requestOrderPayment:null,addCard:null,openCard:null,scanCode:null,openQRCode:null,scanItem:null,chooseAddress:null,saveFile:null,openDocument:null,getSavedFileList:null,getSavedFileInfo:null,getFileInfo:null,removeSavedFile:null,getFileSystemManager:null,chooseContact:null,removeUserCloudStorage:null,setUserCloudStorage:null,makePhoneCall:null,makeVoIPCall:null,onAppRoute:null,onAppRouteDone:null,onAppEnterBackground:null,onAppEnterForeground:null,onAppUnhang:null,onPageReload:null,onPageNotFound:null,offPageNotFound:null,onThemeChange:null,offThemeChange:null,onAppShow:null,offAppShow:null,onAppHide:null,offAppHide:null,onError:null,offError:null,onUnhandledRejection:null,offUnhandledRejection:null,getLaunchOptionsSync:null,getEnterOptionsSync:null,createAnimation:null,createInnerAudioContext:null,createAudioContext:null,createVideoContext:null,createMapContext:null,createCameraContext:null,createLivePlayerContext:null,createLivePusherContext:null,onWebviewEvent:null,onNativeEvent:null,hideKeyboard:null,onKeyboardHeightChange:null,offKeyboardHeightChange:null,getPublicLibVersion:null,showModal:null,showToast:null,hideToast:null,showLoading:null,hideLoading:null,showActionSheet:null,reportAnalytics:null,getClipboardData:null,setClipboardData:null,createSelectorQuery:null,createIntersectionObserver:null,updatePerfData:null,traceEvent:null,onMemoryWarning:null,offMemoryWarning:null,getUpdateManager:null,createWorker:null,voiceSplitJoint:null,uploadSilkVoice:null,downloadSilkVoice:null,getResPath:null,setResPath:null,env:null,appStatus:null,hanged:null,getLogManager:null,getRealtimeLogManager:null,onWindowResize:null,offWindowResize:null,setPageOrientation:null,loadFontFace:null,setInnerAudioOption:null,addWeRunData:null,setBackgroundColor:null,setBackgroundTextStyle:null,getMenuButtonBoundingClientRect:null,calRqt:null,getAvailableAudioSources:null,reportMonitor:null,faceVerifyForPay:null,chooseInvoice:null,startDeviceMotionListening:null,stopDeviceMotionListening:null,onDeviceMotionChange:null,startGyroscope:null,stopGyroscope:null,onGyroscopeChange:null,secureTunnel:null,startCustomFacialRecognitionVerify:null,startCustomFacialRecognitionVerifyAndUploadVideo:null,getAccountInfoSync:null,setCookies:null,getCookies:null,nextTick:null,chooseMultiMedia:null,chooseMessageFile:null,getLabInfo:null,setLabInfo:null,compressImage:null,shareAppMessageForFakeNative:null,downloadApp:null,installDownloadApp:null,getAppInstallState:null,queryDownloadAppTask:null,cancelDownloadAppTask:null,resumeDownloadAppTask:null,pauseDownloadAppTask:null,onDownloadAppStateChange:null,downloadAppForIOS:null,offGyroscopeChange:null,offDeviceMotionChange:null,offCompassChange:null,offAccelerometerChange:null,offUserCaptureScreen:null,offNetworkStatusChange:null,offHCEMessage:null,offBeaconUpdate:null,offBeaconServiceChange:null,requestSubscribeMessage:null,hideHomeButton:null,getBLEDeviceRSSI:null,checkIsOpenAccessibility:null,addPhoneCalendar:null,addPhoneRepeatCalendar:null,updateWeChatApp:null,getRandomValues:null,shareFileMessage:null,shareVideoMessage:null,addFileToFavorites:null,addVideoToFavorites:null,showShareImageMenu:null,searchContacts:null,publishWeChatState:null},ui:{invokeWebviewMethod:0,drawCanvas:20,createContext:20,createCanvasContext:20,canvasToTempFilePath:20,canvasGetImageData:20,canvasPutImageData:20,getShareInfo:30,pageScrollTo:30,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:20,openSettingForPlugin:30,getExtConfig:0,chooseMedia:20,chooseWeChatContact:20,uploadEncryptedFileToCDN:10,onUploadEncryptedFileToCDNProgress:10,getExtConfigSync:0,showShareMenu:30,hideShareMenu:30,updateShareMenu:30,openUrl:20,setNavigationBarColor:30,setNavigationBarAlpha:30,hideHomeButton:30,_getRealRoute:20,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:10,startFacialRecognitionVerify:20,startFacialRecognitionVerifyAndUploadVideo:20,sendBizRedPacket:10,sendGoldenRedPacket:10,openGoldenRedPacketDetail:10,showRedPackage:10,addPhoneContact:10,setScreenBrightness:20,getScreenBrightness:20,shareToWeRun:20,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:0,setPageStyle:30,triggerGettingWidgetData:10,navigateToMiniProgram:30,navigateToDevMiniProgram:30,navigateBackMiniProgram:30,exitMiniProgram:30,setNavigationBarRightButton:20,onTapNavigationBarRightButton:20,setTopBarText:30,setTabBarBadge:30,removeTabBarBadge:30,showTabBarRedDot:30,hideTabBarRedDot:30,showTabBar:30,hideTabBar:30,setTabBarStyle:30,setTabBarItem:30,setEnableDebug:30,captureScreen:30,onUserCaptureScreen:30,offUserCaptureScreen:30,setKeepScreenOn:10,checkIsSupportSoterAuthentication:10,startSoterAuthentication:10,checkIsSoterEnrolledInDevice:10,openDeliveryList:20,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:30,showNavigationBarLoading:30,hideNavigationBarLoading:30,startPullDownRefresh:30,stopPullDownRefresh:30,operateWXData:10,getOpenDeviceId:10,makeBluetoothPair:10,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceRSSI:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:30,reLaunch:30,navigateTo:30,switchTab:30,navigateBack:30,_triggerBeforeUnloadPage:30,_triggerBeforeShareAppMessage:30,navigateBackApplication:30,navigateBackNative:0,launchApplication:30,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:10,chooseImage:20,previewImage:20,previewMedia:20,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:20,stopRecord:20,playVoice:20,pauseVoice:20,stopVoice:20,onVoicePlayEnd:20,chooseVideo:20,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:20,openLocation:20,chooseLocation:20,choosePoi:20,onLocationChange:20,offLocationChange:20,onLocationChangeError:20,offLocationChangeError:20,startLocationUpdateBackground:20,startLocationUpdate:20,stopLocationUpdate:20,getNetworkType:0,onAppRoute:30,onAppRouteDone:30,onAppEnterBackground:30,onAppEnterForeground:30,onAppUnhang:30,onPageReload:30,onPageNotFound:30,offPageNotFound:30,onThemeChange:10,offThemeChange:10,onAppShow:30,offAppShow:30,onAppHide:30,offAppHide:30,onError:30,offError:30,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:20,createAudioContext:20,createVideoContext:20,createMapContext:20,createCameraContext:20,createLivePlayerContext:20,createLivePusherContext:20,onWebviewEvent:20,onNativeEvent:20,hideKeyboard:20,onKeyboardHeightChange:20,offKeyboardHeightChange:20,getPublicLibVersion:0,showModal:20,showToast:20,hideToast:20,showLoading:20,hideLoading:20,showActionSheet:20,reportAnalytics:10,getClipboardData:20,setClipboardData:20,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:10,uploadSilkVoice:10,downloadSilkVoice:10,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:20,offWindowResize:20,setPageOrientation:30,loadFontFace:20,setInnerAudioOption:0,setBackgroundColor:30,setBackgroundTextStyle:30,getMenuButtonBoundingClientRect:20,calRqt:10,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,join1v1Chat:10,setEnable1v1Chat:10,joinVoIPChat:10,exitVoIPChat:10,updateVoIPChatMuteConfig:10,onVoIPChatMembersChanged:10,onVoIPChatSpeakersChanged:10,onVoIPChatInterrupted:10,offVoIPChatMembersChanged:10,offVoIPChatSpeakersChanged:10,offVoIPChatInterrupted:10,onVoIPVideoMembersChanged:10,offVoIPVideoMembersChanged:10,onVoIPChatStateChanged:10,offVoIPChatStateChanged:10,subscribeVoIPVideoMembers:10,login:10,checkSession:10,authorize:20,getUserInfo:20,getUserProfile:20,requestFacetoFacePayment:20,requestPayment:20,verifyPaymentPassword:20,bindPaymentCard:20,requestPersonalPay:20,requestPaymentToBank:20,requestJointPayment:20,getWCPayOverseaPrepayRequest:20,requestH5Transaction:20,openWCPayOverseaPaymentReceive:20,handleWCPayOverseaWalletBuffer:20,requestVerifyUserIdentity:20,requestVirtualPayment:20,openOfflinePayView:20,openWCPayCardList:20,requestMallPayment:20,requestOrderPayment:20,addCard:20,openCard:20,scanCode:20,openQRCode:20,scanItem:20,chooseAddress:20,saveFile:10,openDocument:20,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:20,removeUserCloudStorage:10,setUserCloudStorage:10,makePhoneCall:20,makeVoIPCall:20,getAvailableAudioSources:10,reportMonitor:10,faceVerifyForPay:30,chooseInvoice:20,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:10,startCustomFacialRecognitionVerify:10,startCustomFacialRecognitionVerifyAndUploadVideo:10,getAccountInfoSync:0,setCookies:10,getCookies:10,nextTick:0,chooseMultiMedia:20,chooseMessageFile:20,getLabInfo:10,setLabInfo:10,compressImage:0,enterContact:20,shareAppMessageForFakeNative:20,checkIsOpenAccessibility:10,addPhoneCalendar:20,addPhoneRepeatCalendar:20,updateWeChatApp:10,getRandomValues:0,shareFileMessage:20,shareVideoMessage:20,addFileToFavorites:20,addVideoToFavorites:20,showShareImageMenu:20,searchContacts:10,publishWeChatState:20},log:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:2,canvasToTempFilePath:2,canvasGetImageData:2,canvasPutImageData:2,getShareInfo:1,pageScrollTo:1,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,requestSubscribeMessage:1,getExtConfig:1,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:2,showShareMenu:1,hideShareMenu:1,updateShareMenu:1,openUrl:0,setNavigationBarColor:1,setNavigationBarAlpha:0,hideHomeButton:1,_getRealRoute:0,vibrateShort:1,vibrateLong:1,getSetting:1,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:1,addPhoneContact:1,setScreenBrightness:1,getScreenBrightness:1,shareToWeRun:1,getWeRunData:1,canIUse:1,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:1,setTabBarBadge:1,removeTabBarBadge:1,showTabBarRedDot:1,hideTabBarRedDot:1,showTabBar:1,hideTabBar:1,setTabBarStyle:1,setTabBarItem:1,setEnableDebug:1,captureScreen:0,onUserCaptureScreen:3,setKeepScreenOn:1,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:1,showNavigationBarLoading:1,hideNavigationBarLoading:1,startPullDownRefresh:1,stopPullDownRefresh:1,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:1,openBluetoothAdapter:1,closeBluetoothAdapter:1,getBluetoothAdapterState:1,startBluetoothDevicesDiscovery:1,stopBluetoothDevicesDiscovery:1,getBluetoothDevices:1,getConnectedBluetoothDevices:1,createBLEConnection:1,setBLEMTU:1,closeBLEConnection:1,getBLEDeviceServices:1,getBLEDeviceRSSI:1,getBLEDeviceCharacteristics:1,notifyBLECharacteristicValueChanged:1,notifyBLECharacteristicValueChange:1,readBLECharacteristicValue:1,writeBLECharacteristicValue:1,onBluetoothAdapterStateChange:3,onBluetoothDeviceFound:3,onBLEConnectionStateChanged:3,onBLEConnectionStateChange:3,onBLECharacteristicValueChange:3,offBluetoothAdapterStateChange:3,offBluetoothDeviceFound:3,offBLEConnectionStateChanged:3,offBLEConnectionStateChange:3,offBLECharacteristicValueChange:3,createBLEPeripheralServer:2,onBLEPeripheralConnectionStateChanged:3,offBLEPeripheralConnectionStateChanged:3,startBeaconDiscovery:1,stopBeaconDiscovery:1,getBeacons:1,onBeaconUpdate:1,onBeaconServiceChange:1,startWifi:1,stopWifi:1,getWifiList:1,getConnectedWifi:1,connectWifi:1,presetWifiList:1,setWifiList:1,onGetWifiList:3,onWifiConnected:3,offGetWifiList:3,offWifiConnected:3,onEvaluateWifi:3,getHCEState:1,startHCE:1,stopHCE:1,sendHCEMessage:1,onHCEMessage:3,startLocalServiceDiscovery:1,stopLocalServiceDiscovery:1,onLocalServiceFound:3,offLocalServiceFound:3,onLocalServiceLost:3,offLocalServiceLost:3,onLocalServiceDiscoveryStop:3,offLocalServiceDiscoveryStop:3,onLocalServiceResolveFail:3,offLocalServiceResolveFail:3,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,navigateBackNative:0,launchApplication:0,getStorage:1,getStorageSync:2,setStorage:1,setStorageSync:2,removeStorage:1,removeStorageSync:2,clearStorage:1,clearStorageSync:2,getStorageInfo:1,getStorageInfoSync:2,getBackgroundFetchData:1,onBackgroundFetchData:3,request:1,connectSocket:1,closeSocket:1,sendSocketMessage:1,onSocketOpen:3,onSocketClose:3,onSocketMessage:3,onSocketError:3,uploadFile:1,downloadFile:1,addNativeDownloadTask:0,chooseImage:1,previewImage:1,previewMedia:1,getImageInfo:1,saveImageToPhotosAlbum:1,startRecord:1,stopRecord:1,playVoice:1,pauseVoice:1,stopVoice:1,onVoicePlayEnd:1,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:1,compressVideo:1,getLocation:1,openLocation:1,chooseLocation:1,choosePoi:1,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:1,onNetworkStatusChange:3,getSystemInfo:1,getSystemInfoSync:2,getBatteryInfo:1,getBatteryInfoSync:2,startAccelerometer:1,stopAccelerometer:1,onAccelerometerChange:3,startCompass:1,stopCompass:1,onCompassChange:3,reportAction:0,getBackgroundAudioManager:2,getRecorderManager:2,getBackgroundAudioPlayerState:1,playBackgroundAudio:1,pauseBackgroundAudio:1,seekBackgroundAudio:1,stopBackgroundAudio:1,onBackgroundAudioPlay:3,onBackgroundAudioPause:3,onBackgroundAudioStop:3,join1v1Chat:1,setEnable1v1Chat:1,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:3,onVoIPChatSpeakersChanged:3,onVoIPChatInterrupted:3,offVoIPChatMembersChanged:3,offVoIPChatSpeakersChanged:3,offVoIPChatInterrupted:3,onVoIPVideoMembersChanged:3,offVoIPVideoMembersChanged:3,onVoIPChatStateChanged:3,offVoIPChatStateChanged:3,subscribeVoIPVideoMembers:1,login:1,checkSession:1,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:1,requestPersonalPay:1,requestFacetoFacePayment:1,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:1,addCard:1,openCard:1,scanCode:1,openQRCode:1,scanItem:1,chooseAddress:1,saveFile:1,openDocument:1,getSavedFileList:1,getSavedFileInfo:1,getFileInfo:1,removeSavedFile:1,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,onThemeChange:1,offThemeChange:1,createAnimation:2,createInnerAudioContext:2,createAudioContext:0,createVideoContext:2,createMapContext:2,createCameraContext:2,createLivePlayerContext:2,createLivePusherContext:2,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:1,showToast:1,hideToast:1,showLoading:1,hideLoading:1,showActionSheet:1,reportAnalytics:0,getClipboardData:1,setClipboardData:1,createSelectorQuery:1,createIntersectionObserver:1,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:2,createWorker:2,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:3,offWindowResize:3,setPageOrientation:1,loadFontFace:1,uploadWeRunData:0,addWeRunData:0,setBackgroundColor:1,setBackgroundTextStyle:1,getMenuButtonBoundingClientRect:1,onAppShow:3,offAppShow:3,onAppHide:3,offAppHide:3,onError:3,offError:3,onUnhandledRejection:3,offUnhandledRejection:3,getLaunchOptionsSync:2,getEnterOptionsSync:2,calRqt:0,offPageNotFound:0,getAvailableAudioSources:1,reportMonitor:1,faceVerifyForPay:1,chooseInvoice:1,startDeviceMotionLisstening:1,stopDeviceMotionListening:1,onDeviceMotionChange:3,startGyroscope:1,stopGyroscope:1,onGyroscopeChange:3,setInnerAudioOption:1,secureTunnel:1,startCustomFacialRecognitionVerify:1,startCustomFacialRecognitionVerifyAndUploadVideo:1,getAccountInfoSync:0,setCookies:1,getCookies:1,nextTick:0,chooseMultiMedia:1,chooseMessageFile:1,getLabInfo:1,setLabInfo:1,compressImage:1,enterContact:1,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:3,downloadAppForIOS:0,offGyroscopeChange:3,offDeviceMotionChange:3,offCompassChange:3,offAccelerometerChange:3,offUserCaptureScreen:3,offNetworkStatusChange:3,offHCEMessage:3,offBeaconUpdate:3,offBeaconServiceChange:3,checkIsOpenAccessibility:1,addPhoneCalendar:1,addPhoneRepeatCalendar:1,updateWeChatApp:1,getRandomValues:1,shareFileMessage:1,shareVideoMessage:1,addFileToFavorites:1,addVideoToFavorites:1,showShareImageMenu:1,searchContacts:1,publishWeChatState:1},tap:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:0,canvasToTempFilePath:0,canvasGetImageData:0,canvasPutImageData:0,getShareInfo:0,pageScrollTo:0,chooseInvoiceTitle:0,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:10,openSettingForPlugin:10,getExtConfig:0,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:0,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,_getRealRoute:0,vibrateShort:0,vibrateLong:0,getSetting:20,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:0,setScreenBrightness:0,getScreenBrightness:0,shareToWeRun:0,getWeRunData:0,uploadWeRunData:0,canIUse:0,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:0,navigateToDevMiniProgram:0,navigateBackMiniProgram:0,navigateBackNative:0,exitMiniProgram:40,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:0,captureScreen:0,onUserCaptureScreen:0,setKeepScreenOn:0,checkIsSupportSoterAuthentication:0,startSoterAuthentication:0,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:0,stopPullDownRefresh:0,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceRSSI:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,onBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,redirectTo:0,reLaunch:0,navigateTo:0,switchTab:0,navigateBack:0,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,launchApplication:0,getStorage:0,getStorageSync:0,setStorage:0,setStorageSync:0,removeStorage:0,removeStorageSync:0,clearStorage:0,clearStorageSync:0,getStorageInfo:0,getStorageInfoSync:0,request:20,connectSocket:0,closeSocket:0,sendSocketMessage:0,onSocketOpen:0,onSocketClose:0,onSocketMessage:0,onSocketError:0,uploadFile:0,downloadFile:20,addNativeDownloadTask:0,chooseImage:0,previewImage:0,previewMedia:0,getImageInfo:0,saveImageToPhotosAlbum:0,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:0,saveVideoToPhotosAlbum:0,getVideoInfo:0,compressVideo:0,getLocation:0,openLocation:0,chooseLocation:0,choosePoi:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:0,onNetworkStatusChange:0,getSystemInfo:0,getSystemInfoSync:0,getBatteryInfo:0,getBatteryInfoSync:0,startAccelerometer:0,stopAccelerometer:0,onAccelerometerChange:0,startCompass:0,stopCompass:0,onCompassChange:0,reportAction:0,getBackgroundAudioManager:0,getRecorderManager:0,getBackgroundAudioPlayerState:0,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,login:0,checkSession:0,authorize:0,getUserInfo:0,requestFacetoFacePayment:0,requestPayment:30,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:30,addCard:0,openCard:0,scanCode:0,openQRCode:0,scanItem:0,chooseAddress:0,saveFile:0,openDocument:0,getSavedFileList:0,getSavedFileInfo:0,getFileInfo:0,removeSavedFile:0,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:0,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,offPageNotFound:0,onThemeChange:0,offThemeChange:0,onAppShow:0,offAppShow:0,onAppHide:0,offAppHide:0,onError:0,offError:0,onUnhandledRejection:0,offUnhandledRejection:0,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:0,createAudioContext:0,createVideoContext:0,createMapContext:0,createCameraContext:0,createLivePlayerContext:0,createLivePusherContext:0,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:30,showToast:0,hideToast:0,showLoading:0,hideLoading:0,showActionSheet:30,reportAnalytics:0,getClipboardData:0,setClipboardData:0,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:0,createWorker:0,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:0,offWindowResize:0,setPageOrientation:0,loadFontFace:0,setInnerAudioOption:0,addWeRunData:0,setBackgroundColor:0,setBackgroundTextStyle:0,getMenuButtonBoundingClientRect:0,calRqt:0,getAvailableAudioSources:0,reportMonitor:0,faceVerifyForPay:0,chooseInvoice:0,startDeviceMotionListening:0,stopDeviceMotionListening:0,onDeviceMotionChange:0,startGyroscope:0,stopGyroscope:0,onGyroscopeChange:0,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,getAccountInfo:0,nextTick:0,setCookies:0,getCookies:0,getAccountInfoSync:0,chooseMultiMedia:0,join1v1Chat:0,setEnable1v1Chat:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,onVoIPVideoMembersChanged:0,offVoIPVideoMembersChanged:0,onVoIPChatStateChanged:0,offVoIPChatStateChanged:0,subscribeVoIPVideoMembers:0,getBackgroundFetchData:0,onBackgroundFetchData:0,chooseMessageFile:0,getLabInfo:0,setLabInfo:0,compressImage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,offGyroscopeChange:0,offDeviceMotionChange:0,offCompassChange:0,offAccelerometerChange:0,offUserCaptureScreen:0,offNetworkStatusChange:0,offHCEMessage:0,offBeaconUpdate:0,offBeaconServiceChange:0,requestSubscribeMessage:40,hideHomeButton:0,checkIsOpenAccessibility:0,updateWeChatApp:0,openChannelsLive:40,openChannelsActivity:40,openChannelsUserProfile:40,addPhoneCalendar:40,addPhoneRepeatCalendar:40,getRandomValues:0,showShareImageMenu:0,shareFileMessage:40,shareVideoMessage:40,addFileToFavorites:40,addVideoToFavorites:40,getUserProfile:40,searchContacts:40,publishWeChatState:40},singlePage:{invokeWebviewMethod:0,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:0,pageScrollTo:10,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,openSettingForPlugin:1,getExtConfig:10,chooseMedia:1,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,hideHomeButton:0,_getRealRoute:0,vibrateShort:10,vibrateLong:10,getSetting:0,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:1,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:0,uploadWeRunData:0,addWeRunData:0,canIUse:10,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:0,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,offBeaconUpdate:0,onBeaconServiceChange:0,offBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,offHCEMessage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:0,onBackgroundFetchData:0,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:1,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:1,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:0,compressVideo:0,getLocation:10,openLocation:1,chooseLocation:1,choosePoi:1,enableLocationUpdateBackground:0,enableLocationUpdate:0,disableLocationUpdate:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:10,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:0,createVideoContext:10,createMapContext:10,createCameraContext:0,createLivePlayerContext:10,createLivePusherContext:0,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:0,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:0,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:0,setClipboardData:0,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:0,traceEvent:0,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:0,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:0,hanged:0,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:0,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:0,checkSession:0,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:0,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestMidasPayment:0,requestOrderPayment:0,addCard:1,openCard:1,scanCode:1,openQRCode:0,scanItem:1,chooseAddress:1,saveFile:10,openDocument:1,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:1,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:0,getABTestConfig:0,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:0,chooseMultiMedia:0,getLabInfo:0,setLabInfo:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:0,createRewardedVideoAd:0,error:10,serviceMarket:10,getNativeUserInfo:10,getPerformance:10,reportPerformance:10,createUDPSocket:0,createBufferURL:10,revokeBufferURL:10},thirdApp:{invokeWebviewMethod:10,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:10,pageScrollTo:10,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:10,openSettingForPlugin:10,getExtConfig:10,chooseMedia:10,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:10,hideShareMenu:10,updateShareMenu:10,openUrl:0,setNavigationBarColor:10,setNavigationBarAlpha:10,hideHomeButton:10,_getRealRoute:10,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:10,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:10,setPageStyle:10,triggerGettingWidgetData:0,navigateToMiniProgram:10,navigateToDevMiniProgram:10,navigateBackMiniProgram:10,exitMiniProgram:10,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:10,removeTabBarBadge:10,showTabBarRedDot:10,hideTabBarRedDot:10,showTabBar:10,hideTabBar:10,setTabBarStyle:10,setTabBarItem:10,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:10,reportKeyValue:10,setNavigationBarTitle:10,showNavigationBarLoading:10,hideNavigationBarLoading:10,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:10,reLaunch:10,navigateTo:10,switchTab:10,navigateBack:10,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:10,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:10,stopRecord:10,playVoice:10,pauseVoice:10,stopVoice:10,onVoicePlayEnd:10,chooseVideo:10,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:10,openLocation:10,chooseLocation:10,choosePoi:10,enableLocationUpdateBackground:10,enableLocationUpdate:10,disableLocationUpdate:10,onLocationChange:10,offLocationChange:10,onLocationChangeError:10,offLocationChangeError:10,startLocationUpdateBackground:10,startLocationUpdate:10,stopLocationUpdate:10,getNetworkType:10,onAppRoute:10,onAppRouteDone:10,onAppEnterBackground:10,onAppEnterForeground:10,onAppUnhang:10,onPageReload:10,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:10,createVideoContext:10,createMapContext:10,createCameraContext:10,createLivePlayerContext:10,createLivePusherContext:10,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:10,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:10,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:10,setClipboardData:10,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:10,hanged:10,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:10,checkSession:10,authorize:10,getUserInfo:10,getUserProfile:10,requestPayment:10,verifyPaymentPassword:0,bindPaymentCard:0,requestPersonalPay:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:10,addCard:10,openCard:10,scanCode:10,openQRCode:0,chooseAddress:10,saveFile:10,openDocument:10,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:10,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:10,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:10,getABTestConfig:10,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:10,chooseMultiMedia:10,getLabInfo:0,setLabInfo:0,enterContact:10,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:10,createRewardedVideoAd:10,error:10,serviceMarket:10,openBusinessView:10,requestMidasPayment:10,modifyFriendInteractiveStorage:0,getUserInteractiveStorage:0,getUserCloudStorage:0,getPotentialFriendList:0,getGroupInfo:0,getGroupCloudStorage:0,getFriendCloudStorage:0,createGridAd:10,createBannerAd:10}},i=function(e,t){return r[t][e]}},4416:(e,t,n)=>{"use strict";n.d(t,{V:()=>s,K:()=>u});var r,i,o=n(2984),a=(r="getCloudFileUrl",i="qbase_commapi",(0,o.Z)(r,i,{},{},(function(e){var t=e.data;return{qbase_api_name:"tcbapi_component_gettempfileurl",qbase_req:JSON.stringify({fileid_list:t.fileid_list.slice(),type:t.type}),cli_req_id:"".concat(+new Date,"_").concat(Math.random())}}),(function(e){return e})));var s=function(e,t,n){u({fileIds:e,type:t,success:n})},c=new Map,u=function(e){var t=e.fileIds,n=e.type,r=e.success,i=new Map,o=[],s=!1;if(t.forEach((function(e){var t=c.get(e);if(t){if(Date.now()<t.expireTime)return void(i.has(e)||(i.set(e,t.data),s||(s=!0)));c.delete(e)}/^(cloud):\/\//.test(e)&&o.push(e)})),0!==o.length){var u=0,d=function(e,t){for(var n=[],r=Math.ceil(e.length/t),i=0;i<r;i++)n.push(e.slice(i*t,(i+1)*t));return n}(t,50);Promise.all(d.map((function(e){return new Promise((function(t){a({data:{fileid_list:e,type:n},requestInQueue:!1,success:function(n){var r=JSON.parse(n.rawData);if(r.baseresponse&&0===r.baseresponse.errcode?r.download_list.forEach((function(e){i.set(e.fileid,e),!c.has(e.fileid)&&e.max_age&&c.set(e.fileid,{data:e,expireTime:Date.now()+1e3*e.max_age})})):r.baseresponse?e.forEach((function(e){i.set(e,{download_url:e,service_errcode:r.baseresponse.errcode,errmsg:"system error baseresponse.errcode "+r.baseresponse.errcode}),c.has(e)&&c.delete(e)})):e.forEach((function(e){i.set(e,{download_url:e,service_errcode:-1,errmsg:"system error baseresponse empty"}),c.has(e)&&c.delete(e)})),r.baseresponse&&r.baseresponse.stat&&r.baseresponse.stat.qbase_cost_time){var o=r.baseresponse.stat.qbase_cost_time;o>u&&(u=o)}t()},fail:function(){t()},complete:function(e){}})}))}))).then((function(){l(t,i,u,r)})).catch((function(e){"function"==typeof r&&r({data:t.map((function(t){return{url:t,service_errcode:-1,errmsg:e+""}}))})}))}else s?l(t,i,0,r):"function"==typeof r&&r({data:t.map((function(e){return{url:e}}))})};function l(e,t,n,r){var i=[];e.forEach((function(e){if(/^(cloud):\/\//.test(e)){var n=t.get(e);n?0===n.service_errcode?i.push({url:n.download_url}):i.push({url:e,code:n.service_errcode,msg:n.errmsg}):i.push({url:e,code:-1,msg:"NO_RESULT"})}else i.push({url:e})})),"function"==typeof r&&r({data:i,cost:n})}},9567:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var r="undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version},4785:(e,t,n)=>{"use strict";n.d(t,{LU:()=>Me,yN:()=>re,uB:()=>ie,MU:()=>Le,f6:()=>z});var r,i=n(4742),o=n.n(i),a=n(7541),s=n.n(a),c=n(7163),u=n.n(c),l=n(5843),d=n.n(l),f=n(6326),p=n(6965),h=n(9267),g=n(205),v=n(5212),_=n(2274),m=n(968),y=n(4416),b=new WeakMap,w=new WeakMap,I=new WeakMap,S=new WeakMap,C=new WeakMap,T=new WeakMap,E=new WeakMap,k=new WeakMap,x=new WeakMap,A=new WeakMap,P=new WeakMap,D={},O=(0,m.Fr)(v.a),N=(0,m.Fr)(_.p),R=function(e){return N({filePath:e}).then((function(e){return e.data}))},M=function(e){return O({url:e,responseType:"arraybuffer",enableHttp2:!0,enableCache:!0}).then((function(e){return e.data}))},L=function(e){return new Promise((function(t){(0,y.V)([e],"audio",(function(e){t(M(e.data[0].url))}))}))},B=function(e){b.set(this,Object.assign(b.get(this),e))},F=function(e){return b.get(this)[e]},j=function(){return b.get(this)},W=function(){this.stop(!0),B.call(this,{_source:null});var e=I.get(this);e&&e()},U=function(e){var t=r.createBufferSource(),n=V.call(this,e),i=n.currentPlayBackTime,o=n.state,a=o.loop,s=o.playbackRate,c=o._buffer,u=o._gainNode,l=W.bind(this);t.onended=l,t.buffer=c,t.loop=a,t.playbackRate.value=s,u&&t.connect(u),t.start(0,i),r.resume(),B.call(this,{_isPlaying:!0,paused:!1,_source:t,_played:!0,_playbackTime:0,_lastCurrentTime:i,_startedAt:r.currentTime,_endedHandler:l})},V=function(e){var t,n=e=e||j.call(this),i=n._startedAt,o=n._playbackTime,a=n._isPlaying,s=n.playbackRate,c=n._lastCurrentTime,u=n.duration;return(t=a?c+(r.currentTime-i)*s:o)>u&&(t%=u),{currentPlayBackTime:t,state:e}},G=function(){this.stop(!0);var e=j.call(this)._gainNode;e&&e.disconnect(),B.call(this,{_buffer:null,_source:null,_loadPromise:null,_gainNode:null,_audioLoadPromiseResolve:null}),w.delete(this),I.delete(this),S.delete(this),C.delete(this),E.delete(this),T.delete(this),k.delete(this),x.delete(this),P.delete(this),clearInterval(A.get(this)),A.delete(this)},H=function(){this.stop(!0),B.call(this,{_buffer:null,_source:null,_loadPromise:null,_audioLoadPromiseResolve:null})},Z=function(e){var t;H.call(this);var n=new Promise((function(e){t=e}));B.call(this,{src:e,_ready:!1,_played:!1,_loadPromise:n,_audioLoadPromiseResolve:t})},q=function(){function e(){u()(this,e),r||"function"==typeof(r=new g.Z).create&&r.create();var t=r.createGain();t.connect(r.destination);var n={},i=new Promise((function(e){n._audioLoadPromiseResolve=e}));b.set(this,Object.assign(n,{startTime:0,autoplay:!1,loop:!1,volume:1,playbackRate:1,paused:!1,duration:NaN,_loadPromise:i,_gainNode:t,_played:!1,_playbackTime:0,_ready:!1,_isPlaying:!1,src:""}))}return d()(e,[{key:"src",get:function(){return F.call(this,"src")},set:function(e){var t=this,n=j.call(this).src;"string"==typeof e&&e.length>0&&n!==e&&(n&&Z.call(this,e),B.call(this,{src:e}),function(e){var t=D[e];if(t&&t.audioBuffer)return Promise.resolve(t.audioBuffer);if(t&&t.loadPromise)return t.loadPromise;var n=(/^(http|https):\/\//.test(e)?M(e):/^(cloud):\/\//.test(e)?L(e):R(e)).then((function(t){return new Promise((function(n,i){r.decodeAudioData(t,(function(t){var r=D[e];r.audioBuffer||(r.audioBuffer=t),n(r.audioBuffer)}),i)}))}));return D[e]={loadPromise:n},n}(e).then((function(e){var n=j.call(t),r=w.get(t),i=n._isPlaying,o=n.autoplay,a=n._audioLoadPromiseResolve;return B.call(t,{_ready:!0,_buffer:e,duration:e.duration}),r&&r(),o&&!i&&t.play(),a(),null})).catch((function(n){var r=S.get(t);r&&r({type:"error",errMsg:"set audio src ".concat(e," fail: ").concat(n.message)})})))}},{key:"startTime",get:function(){return F.call(this,"startTime")},set:function(e){var t=j.call(this),n=t._played;e!==t.startTime&&"number"==typeof e&&e>=0&&(B.call(this,{startTime:e}),n||this.seek(e))}},{key:"autoplay",get:function(){return F.call(this,"autoplay")},set:function(e){var t=this;!!e!==j.call(this).autoplay&&(B.call(this,{autoplay:!!e}),e&&j.call(this)._loadPromise.then((function(){var e=j.call(t),n=e._isPlaying,r=e.autoplay;return e._source&&!n&&r&&t.play(),null})))}},{key:"loop",get:function(){return F.call(this,"loop")},set:function(e){var t=F.call(this,"_source");B.call(this,{loop:e=!!e}),t&&(t.loop=e)}},{key:"volume",get:function(){return F.call(this,"volume")},set:function(e){var t=j.call(this),n=t.volume,r=t._gainNode;"number"==typeof e&&e>=0&&e<=1&&e!==n&&(B.call(this,{volume:e}),r&&r.gain&&(r.gain.value=e))}},{key:"playbackRate",get:function(){return F.call(this,"playbackRate")},set:function(e){var t=j.call(this),n=t.playbackRate,i=t._source;"number"==typeof e&&n!==e&&e>=.5&&e<=2&&(B.call(this,{playbackRate:e,_lastCurrentTime:this.currentTime,_startedAt:r.currentTime}),i&&(i.playbackRate.value=e))}},{key:"duration",get:function(){return F.call(this,"duration")}},{key:"currentTime",get:function(){return V.call(this).currentPlayBackTime}},{key:"paused",get:function(){return F.call(this,"paused")}},{key:"buffered",get:function(){var e=j.call(this).duration;return e>0?e:0}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=j.call(this),r=n._isPlaying,i=n._ready,o=n._loadPromise;if(!r){var a=function(){return t?null:C.get(e)};if(i){U.call(this,n);var s=a();s&&s()}else o.then((function(){U.call(e);var t=a();return t&&t(),null}))}}},{key:"pause",value:function(){var e=j.call(this),t=e._isPlaying,n=e._source;if(n&&t){var r=T.get(this);n.stop(0),n.disconnect(),n.onended=null,B.call(this,{_isPlaying:!1,_playbackTime:this.currentTime,paused:!0,_endedHandler:null}),r&&r()}}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=j.call(this),n=t._source;if(n){var r=E.get(this);n.stop(0),n.disconnect(),n.onended=null,B.call(this,{_isPlaying:!1,_playbackTime:0,paused:!0,_endedHandler:null}),!e&&r&&r()}}},{key:"seek",value:function(e){if("number"==typeof e&&e>=0){var t=j.call(this)._isPlaying,n=k.get(this),r=x.get(this),i=w.get(this);r&&r(),t?(this.stop(!0),B.call(this,{_playbackTime:e}),this.play(!0)):B.call(this,{_playbackTime:e}),n&&n(),i&&i()}}},{key:"destroy",value:function(){G.call(this)}},{key:"oncanplay",set:function(e){"function"==typeof e?w.set(this,e):w.delete(this)}},{key:"onended",set:function(e){"function"==typeof e?I.set(this,e):I.delete(this)}},{key:"onerror",set:function(e){"function"==typeof e?S.set(this,e):S.delete(this)}},{key:"onplay",set:function(e){"function"==typeof e?C.set(this,e):C.delete(this)}},{key:"onpause",set:function(e){"function"==typeof e?T.set(this,e):T.delete(this)}},{key:"onstop",set:function(e){"function"==typeof e?E.set(this,e):E.delete(this)}},{key:"onseeked",set:function(e){"function"==typeof e?k.set(this,e):k.delete(this)}},{key:"onseeking",set:function(e){"function"==typeof e?x.set(this,e):x.delete(this)}},{key:"ontimeupdate",set:function(e){var t=this;if("function"==typeof e){var n=A.get(this);clearInterval(n);var r=setInterval((function(){j.call(t)._isPlaying&&e()}),350);A.set(this,r)}else A.delete(this)}},{key:"onwaiting",set:function(e){"function"==typeof e?P.set(this,e):P.delete(this)}}]),e}(),z=function(){return g.Z&&!0},Y=["src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered","referrerPolicy"],K=["startTime","duration","currentTime"],J=["Canplay","Ended","Error","Pause","Play","Seeked","Seeking","Stop","TimeUpdate","Waiting"],$=new Set,X=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;u()(this,e);var i=new f.Z;X.set(this,t),$.add(this),te.set(this,{conversion:r}),Y.forEach((function(e){return Object.defineProperty(n,e,{get:function(){return K.includes(e)?t[e]/r:t[e]},set:function(n){K.includes(e)?t[e]=r*n:t[e]=n}})})),J.forEach((function(e){n["on"+e]=function(t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at audioContext.on".concat(e," callback function"));Q.set(t,n),ee.set(n,t),i.on(e,n)},n["off"+e]=function(t){if((0,h.mf)(t)){var n=Q.get(t);(0,h.mf)(n)&&(i.off(e,n),Q.delete(t),ee.delete(n))}else i.listeners(e).forEach((function(e){var t=ee.get(e);Q.delete(t),ee.delete(e)})),i.removeAllListeners(e)},t["on"+e.toLowerCase()]=function(t,n){t?i.emit(e,{errCode:t,errMsg:n}):i.emit(e)}}))}return d()(e,[{key:"play",value:function(){X.get(this).play()}},{key:"stop",value:function(){X.get(this).stop()}},{key:"pause",value:function(){X.get(this).pause()}},{key:"seek",value:function(e){var t=te.get(this).conversion;X.get(this).seek(t*e)}},{key:"destroy",value:function(){var e=this,t=X.get(this);t.destroy&&t.destroy(),J.forEach((function(t){e["off"+t]()})),$.delete(this),X.delete(this)}}],[{key:"pauseAllAudio",value:function(){$.forEach((function(e){var t=X.get(e);t&&t.pause()}))}}]),e}(),re=function(e){o()(n,e);var t=s()(n);function n(){u()(this,n);var e=new p.Z.Audio;return t.call(this,e,1e3)}return n}(ne),ie=function(e){o()(n,e);var t=s()(n);function n(){u()(this,n);var e=new q;return t.call(this,e,1)}return n}(ne),oe=n(9727),ae=n.n(oe),se=n(8392),ce=n(3638),ue=n(7604),le=n(8947),de=n(2363),fe=n(3464),pe=new WeakMap,he=new WeakMap,ge=new WeakMap,ve=new WeakMap,_e=new WeakMap,me=new WeakMap,ye=new WeakMap,be=new Map,we=new Map;p.Z.EventHandler&&(p.Z.EventHandler.onbindingobjectdestruct=function(e){var t=we[e];t&&(0,se.IN)("getAudioState",{audioId:t,success:function(e){!0===e.paused?(be.delete(t),(0,se.IN)("destroyAudioInstance",{audioId:t})):be.get(t)&&!1===be.get(t).loop&&ke.once("".concat(t,"_onAudioStateChange_ended"),(function(){be.delete(t),(0,se.IN)("destroyAudioInstance",{audioId:t})}))}})});var Ie=function(e,t){var n=this;he.set(this,Object.assign(he.get(this),ae()({},e,t))),"src"===e&&he.set(this,Object.assign(he.get(this),{paused:!0})),ve.get(this)&&(setTimeout((function(){var r=Object.assign({},he.get(n),_e.get(n),{timestamp:Date.now(),audioId:pe.get(n),success:function(){he.set(n,Object.assign(he.get(n),ae()({},e,t)))},fail:function(){Ce.call(n)}});(0,ue.lY)()&&(r.autoplay=!1),(0,se.IN)("setAudioState",r),ve.set(n,!0)}),0),ve.set(this,!1)),_e.set(this,Object.assign(_e.get(this),ae()({},e,t)))},Se=function(e,t){var n=this;ye.get(this).then((function(){Ie.call(n,e,t)}))},Ce=function(e,t){var n=this,r=he.get(this)[e];return(0,se.IN)("getAudioState",{audioId:pe.get(this),success:function(i){delete i.errMsg,he.set(n,Object.assign(he.get(n),i)),r=i[e],"function"==typeof t&&t(r)}}),r},Te=function(e){var t=pe.get(this);(0,se.IN)("operateAudio",Object.assign({timestamp:Date.now(),audioId:t,fail:function(e){var t=e.errMsg;Oe("error",{errMsg:t,errCode:-1})}},e))},Ee=function(e){var t=this;ye.get(this).then((function(){setTimeout((function(){Te.call(t,e)}),0)}))},ke=new f.Z;(0,se.jQ)("onAudioStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.state=e.state.toLowerCase();var t=e.state,n=e.audioId;delete e.audioId,delete e.state;var r="play"!==t,i=be.get(n);i&&(i.paused=r),(0,se.IN)("getAudioState",{audioId:n,success:function(){t}}),ke.emit("".concat(n,"_onAudioStateChange_").concat(t),e)}));var xe=function(e,t){var n="".concat(pe.get(this),"_onAudioStateChange_").concat(e),r=function(n){__errorTracer__.surroundThirdByTryCatch(t,"at audioContext.on".concat(e," callback function"))(n)};me.set(t,r),ke.on(n,r)},Ae=function(e,t){var n=this;ye.get(this).then((function(){xe.call(n,e,t)}))},Pe=function(e,t){var n="".concat(pe.get(this),"_onAudioStateChange_").concat(e);if((0,h.mf)(t)){var r=me.get(t);(0,h.mf)(r)&&ke.off(n,r)}else ke.removeAllListeners(n)},De=function(e,t){var n=this;ye.get(this).then((function(){Pe.call(n,e,t)}))},Oe=function(e,t){ke.emit("".concat(pe.get(this),"_onAudioStateChange_").concat(e),t)},Ne=0,Re=!1;const Me=function(){function e(){var t,n,r=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.async,a=void 0===o||o;u()(this,e),he.set(this,{}),_e.set(this,{}),ge.set(this,void 0),ve.set(this,!0),ye.set(this,new fe.Q((function(e,r){t=e,n=r}))),(0,se.IN)(de.wZ&&(0,m.aI)()&&le.Z.clientVersion>=654315008&&a||de.jP?"createAudioInstanceAsync":"createAudioInstance",{timestamp:Date.now(),success:function(e){var n={src:"",startTime:0,paused:!0,currentTime:0,duration:0,obeyMuteSwitch:!0,volume:1,autoplay:!1,loop:!1,buffered:0,referrerPolicy:""};if(be.set(e.audioId,n),pe.set(r,e.audioId),he.set(r,n),p.Z.BindingObject){var i=new p.Z.BindingObject;r.__bindingObject=i,we[i.__id]=e.audioId}Ne+=1,++Ne>=1024&&!Re&&de.cj&&(Re=!0,Reporter.reportIDKey({id:356,key:"audioInstancesCountReach1024"})),setTimeout(t,0)},fail:function(e){n(e.errMsg)}}),["Play","Pause","Stop","Canplay","Error","Ended","Waiting","Seeking","Seeked"].forEach((function(e){r["on".concat(e)]=function(t){Ae.call(r,e.toLowerCase(),t)},r["off".concat(e)]=function(t){De.call(r,e.toLowerCase(),t)}}))}return d()(e,[{key:"src",get:function(){return this.cloudId?this.cloudId:Ce.call(this,"src")},set:function(e){var t=this;"string"==typeof e&&0!==e.length?(0,y.V)([e],"audio",(function(n){/^(cloud):\/\//.test(e)?t.cloudId=e:t.cloudId="",e=n.data[0].url,Se.call(t,"src",e)})):Oe.call(this,"error",{errMsg:"Failed to set src, the src ".concat(e," is invalid.")})}},{key:"startTime",get:function(){return Ce.call(this,"startTime")/1e3},set:function(e){"number"==typeof e?Se.call(this,"startTime",1e3*e):Oe("error",{errMsg:"Failed to set startTime, the startTime ".concat(e," is invalid.")})}},{key:"autoplay",get:function(){return Ce.call(this,"autoplay")},set:function(e){"boolean"==typeof e&&Se.call(this,"autoplay",e)}},{key:"loop",get:function(){return Ce.call(this,"loop")},set:function(e){"boolean"==typeof e&&Se.call(this,"loop",e)}},{key:"obeyMuteSwitch",get:function(){return Ce.call(this,"obeyMuteSwitch")},set:function(e){"boolean"==typeof e&&Se.call(this,"obeyMuteSwitch",e)}},{key:"volume",get:function(){return Ce.call(this,"volume")},set:function(e){"number"!=typeof e||e<0||e>1||Se.call(this,"volume",e)}},{key:"playbackRate",get:function(){return Ce.call(this,"playbackRate")},set:function(e){"number"!=typeof e||e<0||Se.call(this,"playbackRate",e)}},{key:"referrerPolicy",get:function(){return Ce.call(this,"referrerPolicy")},set:function(e){"string"==typeof e&&Se.call(this,"referrerPolicy",e)}},{key:"paused",get:function(){return Ce.call(this,"paused")}},{key:"duration",get:function(){return Ce.call(this,"duration")/1e3}},{key:"currentTime",get:function(){return Ce.call(this,"currentTime")/1e3}},{key:"buffered",get:function(){return Ce.call(this,"buffered")/1e3}},{key:"play",value:function(){!1===(0,ue.lY)()&&Ee.call(this,{operationType:"play"})}},{key:"pause",value:function(){Ee.call(this,{operationType:"pause"})}},{key:"stop",value:function(){Ee.call(this,{operationType:"stop"})}},{key:"seek",value:function(e){"number"!=typeof e||e<0?Oe("error",{errMsg:"Failed to seek, the currentTime ".concat(e," is invalid.")}):Ee.call(this,{operationType:"seek",currentTime:1e3*e})}},{key:"destroy",value:function(){var e=this;ye.get(this).then((function(){var t=pe.get(e);be.has(t)&&(["play","pause","stop","canplay","error","ended","waiting","seeking","seeked"].forEach((function(e){var n="".concat(t,"_onAudioStateChange_").concat(e);ke.removeAllListeners(n)})),be.delete(t),Ne-=1,(0,se.IN)("destroyAudioInstance",{audioId:t}))}))}},{key:"onTimeUpdate",value:function(e){var t=this;ye.get(this).then((function(){var n="".concat(pe.get(t),"_onAudioStateChange_timeupdate");void 0===ge.get(t)&&ge.set(t,setInterval((function(){if("active"===ce.Z.runningStatus&&!0!==he.get(t).paused&&1!==he.get(t).paused){var e=he.get(t).currentTime;Ce.call(t,"currentTime",(function(t){t!==e&&ke.emit(n)}))}}),250)),ke.removeAllListeners(n);var r=function(t){__errorTracer__.surroundThirdByTryCatch(e,"at audioContext.onTimeUpdate callback function")(t)};me.set(e,r),ke.on(n,r)}))}},{key:"offTimeUpdate",value:function(e){var t=this;ye.get(this).then((function(){De.call(t,"timeupdate",e)}))}}],[{key:"pauseAllAudio",value:function(){be.forEach((function(e,t){(0,se.IN)("operateAudio",{timestamp:Date.now(),audioId:t,operationType:"pause"})}))}}]),e}();var Le=function(){Me.pauseAllAudio(),re.pauseAllAudio(),ie.pauseAllAudio()}},8560:(e,t,n)=>{"use strict";n.d(t,{Au:()=>G,hN:()=>H,lR:()=>B,hG:()=>V,oo:()=>O,fH:()=>C});var r=n(4742),i=n.n(r),o=n(7541),a=n.n(o),s=n(1503),c=n.n(s),u=n(5843),l=n.n(u),d=n(7163),f=n.n(d),p=n(6326),h=n(8392),g=n(9947),v=n(6788),_=n(4531),m=n(3638),y=n(8947),b=n(2363),w=b.gm||b.qB||b.Mq||b.Ae,I={},S={},C={},T=new p.y,E={},k=new WeakMap,x={},A={},P=["play","pause","stop","seek","sendDanmu","playbackRate","requestFullScreen","exitFullScreen","showStatusBar","hideStatusBar","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback","hidePoster"],D={},O={},N=y.Z.useXWebVideo,R=!0,M=Object.keys;function L(e){E[e]||(E[e]=!0,(0,_.dq)(e,(function(e){delete E[e],M(I).concat(M(S)).forEach((function(t){new RegExp("^"+e).test(t)&&delete I[t]})),M(x).forEach((function(t){(new RegExp("^api_"+e).test(t)||new RegExp("^SQ_"+e).test(t))&&delete x[t]})),b.Ae&&(0,h.IN)("setKeepScreenOn",{keepScreenOn:!1},{})})))}(0,h.Ld)("updateVideoPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;C.webviewId=t,C.playerId=e.playerId})),(0,h.Ld)("videoAdPlay",(function(e,t){var n=e.videoPlayerId,r=e.type,i="".concat(t,"_").concat(n);A[i]=r})),(0,h.Ld)("videoPlayerInsert",(function(e,t){var n=e.domId,r=e.videoPlayerId,i=e.pluginId,o=e.nodeId,a=e.nodeInfo,s=e.data,c="".concat(t,"_").concat(i,"_").concat(n,"_");o&&o!==__virtualDOM__.getRootNodeId(t)&&(c+=o),I[c]=r,function(e,t,n){if(!b.gm)return;var r=document.createElement("video");e.elem=r,S["".concat(n,"_").concat(t)]=e,r.controls=!1,r.preload="auto",r.muted=!0,r.autoplay=e.autoplay,r.style.width=e.width+"px",r.style.height=e.height+"px"}(a,r,t),T.emit("videoPlayerInsert"),L(t),O["".concat(t,"_").concat(r)]=s||{}})),(0,h.Ld)("xWebVideoInserted",(function(e,t){var n=e.domId,r=e.viewId,i=e.pluginId,o=e.nodeId,a=e.data,s="".concat(t,"_").concat(i,"_").concat(n,"_");o&&o!==__virtualDOM__.getRootNodeId(t)&&(s+=o),I[s]=r,O["".concat(t,"_").concat(r)]=a||{},T.emit("videoPlayerInsert"),L(t)})),(0,h.Ld)("videoPlayerUpdated",(function(e,t){var n=e.action,r=e.value;U({_videoId:e.videoPlayerId,_webviewId:t},n,r)})),(0,h.Ld)("videoPlayerRemoved",(function(e,t){var n=e.domId,r=e.videoPlayerId,i=e.pluginId,o=e.nodeId,a="".concat(t,"_").concat(i,"_").concat(n,"_");o&&o!==__virtualDOM__.getRootNodeId(t)&&(a+=o),delete I[a],function(e,t){delete S["".concat(t,"_").concat(e)]}(r,t);var s="api_".concat(t,"_").concat(i,"_").concat(n,"_");o&&o!==__virtualDOM__.getRootNodeId(t)&&(s+=o);var c="SQ_".concat(t,"_").concat(r);delete x[s],delete x[c],delete O["".concat(t,"_").concat(r)]})),(0,h.Ld)("xWebVideoRemoved",(function(e,t){var n=e.domId,r=e.pluginId,i=e.nodeId,o="".concat(t,"_").concat(r,"_").concat(n,"_");i&&i!==__virtualDOM__.getRootNodeId(t)&&(o+=i);var a=I[o];delete I[o],delete O["".concat(t,"_").concat(a)]})),(0,h.Ld)("xWebVideoSupported",(function(e){var t=e.isXWebSupported;N=N&&t})),(0,h.Ld)("insertVideoToWebLayerStateChanged",(function(e,t){var n=e.viewId,r=e.inserted;D["".concat(t,"_").concat(n)]=r})),y.Z.onReady((function(){y.Z.global&&y.Z.global.window&&"seperated"===y.Z.global.window.renderingMode&&(R=!1,N=!1)}));var B=function e(){f()(this,e)},F=function(){function e(t,n){var r=this;f()(this,e);var i=this.exportContext=new B;P.forEach((function(e){i[e]=r[e].bind(r)})),i._videoId=t,i._webviewId=n}return l()(e,[{key:"play",value:function(){var e=this._getAppStatus();e===v.w$.BACK_GROUND||e===v.w$.LOCK||this._invokeMethod("play")}},{key:"pause",value:function(){this._invokeMethod("pause")}},{key:"stop",value:function(){this._invokeMethod("stop")}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"accurate";if("accurate"!==t&&"inaccurate"!==t)throw new g.iZ("Parameter 2 must either be `accurate` or be `inaccurate`");this._invokeMethod("seek",[e,t])}},{key:"sendDanmu",value:function(e){var t=e.text,n=e.color;this._invokeMethod("sendDanmu",[t,n])}},{key:"playbackRate",value:function(e){.5!==(e=parseFloat(e.toFixed(2)))&&.8!==e&&1!==e&&1.25!==e&&1.5!==e&&2!==e||this._invokeMethod("playbackRate",[e])}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.direction;[0,90,-90].indexOf(t)>-1?this._invokeMethod("requestFullScreen",[t]):this._invokeMethod("requestFullScreen"),k.set(this,!0)}},{key:"exitFullScreen",value:function(){this._invokeMethod("exitFullScreen"),this.showStatusBar(),k.set(this,!1)}},{key:"showStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,h.IN)("showStatusBar",e)}},{key:"hideStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(b.wZ){var t="hideStatusBar:ok";return"function"==typeof e.success&&e.success({errMsg:t}),void("function"==typeof e.complete&&e.complete({errMsg:t}))}if(!k.get(this)){var n="hideStatusBar:fail cannot be invoked but in fullscreen.";return"function"==typeof e.fail&&e.fail({errMsg:n}),void("function"==typeof e.complete&&e.complete({errMsg:n}))}(0,h.IN)("hideStatusBar",e)}},{key:"exitPictureInPicture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(C){var t=C.playerId;b.cj?(0,h.IN)("operateVideoPlayer",c()(c()({},e),{},{videoPlayerId:t,type:"exitPictureInPicture"}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateVideoPlayer","exitPictureInPicture")}}):b.wZ&&(0,h.IN)("operateXWebVideo",c()(c()({},e),{},{viewId:t,type:"exitPictureInPicture"}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateXWebVideo","exitPictureInPicture")}})}}},{key:"requestBackgroundPlayback",value:function(){this._invokeMethod("requestBackgroundPlayback",[])}},{key:"exitBackgroundPlayback",value:function(){this._invokeMethod("exitBackgroundPlayback",[])}},{key:"hidePoster",value:function(){this._invokeMethod("hidePoster")}},{key:"_invokeMethodWithId",value:function(e,t,n){var r=this;"number"==typeof e?function(){if("begin"!==A["".concat(this.webviewId,"_").concat(e)])if(R&&(b.wZ&&N||b.cj&&D["".concat(this.webviewId,"_").concat(e)])&&["requestFullScreen","exitFullScreen","sendDanmu","seek","stop","play"].indexOf(t)>-1)(0,h.nY)("video_".concat(this.webviewId,"_").concat(e,"_actionChanged"),{method:t,data:n},[this.webviewId]);else{var r=this._getAppStatus();if(!w&&r===v.w$.BACK_GROUND&&"stop"===t){var i="operateVideoPlayerBackground";return b.wZ&&N&&(i="operateXWebVideoBackground"),void(0,h.IN)(i,{viewId:e,videoPlayerId:e,type:t})}w?(this._sendAction(e,{method:t,data:n}),["play","pause","stop","seek","playbackRate"].indexOf(t)>-1&&U(this.exportContext,t,n&&n[0])):b.wZ&&N?(0,h.IN)("operateXWebVideo",{viewId:e,type:t,data:n}):(0,h.IN)("operateVideoPlayer",{data:n,videoPlayerId:e,type:t})}else console.error("".concat(t,":fail cannot operate video while ad playing."))}.apply(this):T.once("videoPlayerInsert",(function(){r._invokeMethod(t,n)}))}},{key:"_sendActionWithEvnetName",value:function(e,t){(0,h.nY)(e,t,[this.webviewId])}},{key:"_getAppStatus",value:function(){return m.Z.appStatus}},{key:"_getHanged",value:function(){return m.Z.hanged}}]),e}(),j=function(e){i()(n,e);var t=a()(n);function n(e,r,i,o){var a;if(f()(this,n),a=t.call(this),"string"!=typeof e)throw new g.iZ("Parameter 1 should be a string");return a.domId=e,a.webviewId=r,a.pluginId=o,a.nodeId=i,a}return l()(n,[{key:"_invokeMethod",value:function(e,t){var n="".concat(this.webviewId,"_").concat(this.pluginId,"_").concat(this.domId,"_").concat(this.nodeId),r=I[n];this._invokeMethodWithId(r,e,t)}},{key:"_sendAction",value:function(e,t){this._sendActionWithEvnetName("video_".concat(this.webviewId,"_").concat(e,"_actionChanged"),t)}}]),n}(F),W=function(e){i()(n,e);var t=a()(n);function n(e,r){var i;return f()(this,n),(i=t.call(this,e,r)).videoPlayerId=e,i.webviewId=r,i}return l()(n,[{key:"_invokeMethod",value:function(e,t){var n=this.videoPlayerId;this._invokeMethodWithId(n,e,t)}},{key:"_sendAction",value:function(e,t){this._sendActionWithEvnetName("video_".concat(this.webviewId,"_").concat(e,"_actionChanged"),t)}}]),n}(F);function U(e,t,n){if(b.gm&&void 0!==e._webviewId){var r=S["".concat(e._webviewId,"_").concat(e._videoId)].elem;switch(t){case"setSrc":r.src=n;break;case"play":r.play();break;case"pause":case"stop":r.pause();break;case"seek":0===r.readyState||1===r.readyState?r.oncanplay=function(){r.currentTime=n,r.oncanplay=null}:r.currentTime=n;break;case"playbackRate":r.playbackRate=n}}}function V(e){return S["".concat(e._webviewId,"_").concat(e._videoId)].elem}function G(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i="api_".concat(t,"_").concat(r,"_").concat(e,"_");if(n&&n!==__virtualDOM__.getRootNodeId(t)&&(i+=n),x[i])return x[i].exportContext;var o=new j(e,t,n,r);return x[i]=o,o.exportContext}function H(e,t){var n="SQ_".concat(t,"_").concat(e);if(x[n])return x[n].exportContext;var r=new W(e,t);return x[n]=r,r.exportContext}},3224:(e,t,n)=>{"use strict";n.d(t,{KC:()=>v,Dk:()=>g,$1:()=>P,AJ:()=>x,KL:()=>C,Zv:()=>T,ap:()=>E,DW:()=>I,jl:()=>w,lE:()=>A,zv:()=>k,tc:()=>S});var r=n(9727),i=n.n(r),o=n(2805),a=n(1957),s=n(5322),c=n(8947),u=n(2363),l=n(947),d=n(8976),f=[],p=[],h=["expires","domain","path","busid","indate","receivetime","spread"],g=502,v=503,_={scene:-1,sceneNote:"",sessionId:""};function m(e){return u.gm||(0,d.J)(e)}function y(e){var t,n;t=function(t){t&&w(t,!1,f),e&&e()},n=c.Z.accountInfo&&c.Z.accountInfo.appId||"noAppId",(0,s.L)("getCookiesFromGlobalStorage",{appId:n},void 0,t)}function b(){var e=Date.now(),t=[];f.forEach((function(n){var r=n.expires||n.__wxprivate_calc_expires__;if(r&&1e3*r>e){var i=[];for(var o in n)h.indexOf(o)>=0&&i.push("".concat(encodeURIComponent(o),"=").concat(encodeURIComponent(n[o])));i.push("".concat(encodeURIComponent(n.key),"=").concat(encodeURIComponent(n.value))),t.push(i.join("; "))}}));var n,r,i,o=t.join(";; ");o.length>=4096||(n=o,r=function(){},i=c.Z.accountInfo&&c.Z.accountInfo.appId||"noAppId",n&&n.trim()&&(0,s.L)("setCookiesToGlobalStorage",{cookies:n,appId:i},void 0,r))}function w(e,t,n){if("string"==typeof e){var r=Date.now();e.split(";;").forEach((function(e){var i;if(e.split(";").forEach((function(e){i=i||{};var t=(e=e.split("="))[0].trim(),n=e[1]&&e[1].trim();"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),t&&void 0!==n&&(h.indexOf(t)>=0?i[decodeURIComponent(t)]=decodeURIComponent(n):(i.key=decodeURIComponent(t),i.value=decodeURIComponent(n)))})),i){t&&(i.receivetime=~~(r/1e3)),void 0===i.expires&&void 0!==i.indate&&i.receivetime&&(i.__wxprivate_calc_expires__=+i.receivetime+ +i.indate);var o=i.expires||i.__wxprivate_calc_expires__;o&&!(1e3*o>r)||function(e,t){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e.busid===i.busid&&e.key===i.key)return!0}return!1}(i,n)||n.push(i),c.Z.accountInfo&&c.Z.accountInfo.appId&&i.spread&&(i.spread="*"===i.spread?"":i.spread+":",i.spread+=c.Z.accountInfo.appId)}}))}}(0,l.Xb)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_.scene=e.scene,_.sceneNote=e.scene_note,_.sessionId=e.sessionid}));var I=function(){(0,a.H)((function(){var e=c.Z.appLaunchInfo||{},t=+c.Z.appLaunchInfo.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,r=e.referrerInfo&&e.referrerInfo.messageExtraData,i=n&&n.cookies||r&&r.cookies;"string"==typeof i&&w(i,1037!==t,f),y(b)})),(0,o.T)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=+e.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,r=e.referrerInfo&&e.referrerInfo.messageExtraData,i=n&&n.cookies||r&&r.cookies;(1037===t||i&&"string"==typeof i||1===e.reLaunch||!0===e.reLaunch)&&(f=[],p=[]),"string"==typeof i&&w(i,1037!==t,f),y(b)}))};function S(e){var t=[];for(var n in e)h.indexOf(n)>=0&&t.push("".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n])));return t.push("".concat(encodeURIComponent(e.key),"=").concat(encodeURIComponent(e.value))),t.join("; ")}var C=function(e){var t=Date.now(),n=[];f.forEach((function(e){var r=e.expires||e.__wxprivate_calc_expires__;e.domain&&"*"===e.domain&&(!r||1e3*r>t)&&n.push(S(e))}));var r=n.join(";; ");return e&&e.success&&e.success({cookies:r}),r},T=function(e){var t=Date.now(),n=[];f.forEach((function(e){var r=e.expires||e.__wxprivate_calc_expires__;(!r||1e3*r>t)&&n.push(e)}));var r=c.Z&&c.Z.accountInfo&&c.Z.accountInfo.appId||"",i=_.scene||"",o=_.sceneNote||"",a=_.sessionId||"";n.push({key:"appid",value:r,busid:"wxapp"},{key:"sessionid",value:a,busid:"wxapp"},{key:"scene",value:i,busid:"wxapp"},{key:"scene_note",value:o,busid:"wxapp"});var s=e&&e.pluginInfo?e.pluginInfo:{},u=s.hostAppId,l=s.pluginAppId;if(void 0!==u&&void 0!==l){var d=n.find((function(e){return"appid"===e.key}));d&&(d.value=u),n.push({key:"plugin_appid",value:l,busid:"wxapp"})}var p=c.Z.host||{};"SDK"===p.env&&n.push({key:"sdk_host_appid",value:p.appId,busid:"wxapp"});var h=n.map(S).join(";; ");return e&&e.success&&e.success({cookies:h}),h},E=function(){var e=Date.now(),t=[];return p.forEach((function(n){var r=n.expires||n.__wxprivate_calc_expires__;(!r||1e3*r>e)&&t.push(S(n))})),t.join(";; ")},k=function(e){var t=Date.now(),n=e.cookies||[],r=e.isTemporary;if(n instanceof Array){var i=r?p:f,o=[],a={},s={},u=c.Z.accountInfo&&c.Z.accountInfo.appId||"";if(n.forEach((function(e){if(e.key&&"string"==typeof e.key){var n=+e.expires;if(!e.value||n&&1e3*n<t)a[e.key]={key:e.key,busid:e.busid};else{var i={key:e.key,value:e.value};h.forEach((function(t){var n=e[t];"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),"spread"===t&&n&&!r&&u&&(i.spread="*"===n?"":n+":",i.spread+=u),"receivetime"!==t&&"spread"!==t&&void 0!==n&&(i[t]=n)})),s[e.key]=i,o.push(i)}}})),i.forEach((function(e){var n=a[e.key];if(!n||(n.busid||e.busid)&&n.busid!==e.busid){var r=s[e.key];if(!r||(r.busid||e.busid)&&r.busid!==e.busid){var i=e.expires||e.__wxprivate_calc_expires__;i&&1e3*i<t||o.push(e)}}})),function(e){var t=[];return e.forEach((function(e){t.push(S(e))})),t.join(";; ")}(o).length>=4096)return"setCookies:fail whole cookies storage is out of limit(4KB limit)";r?p=o:(f=o,b())}},x=function(e){var t=Date.now(),n=e.keys||[],r=e.busid,o=e.isTemporary;if(n instanceof Array){var a=[];return(o?p:f).forEach((function(e){var o=e.expires||e.__wxprivate_calc_expires__;if((!o||1e3*o>t)&&n.indexOf(e.key)>=0&&(!r||r&&r===e.busid)){var s=i()({},e.key,e.value);Object.keys(e).forEach((function(t){h.indexOf(t)>=0&&(s[t]=e[t]),"indate"!==t&&"expires"!==t||(s[t]=+s[t])})),a.push(s)}})),a}},A=function(e){var t="setCookies:ok";if(m("setCookies")){var n=k(e);n?(t=n,"function"==typeof e.fail&&e.fail({errMsg:t})):"function"==typeof e.success&&e.success({errMsg:t})}else t="setCookies:fail has no permission for setCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})},P=function(e){var t="getCookies:ok";if(m("getCookies")){var n=x(e);"function"==typeof e.success&&e.success({errMsg:t,cookies:n})}else t="getCookies:fail has no permission for getCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})}},7587:(e,t,n)=>{"use strict";n.d(t,{s:()=>c});var r=n(8392),i=__wxConfig.platform,o=[],a=function(e){var t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),o=("0"+e.getMinutes()).slice(-2),a=("0"+e.getSeconds()).slice(-2),s=("00"+e.getMilliseconds()).slice(-3),c="".concat(e.getFullYear(),"-").concat(t,"-").concat(n),u="".concat(r,":").concat(o,":").concat(a,".").concat(s);if("ios"===i){var l=(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-");return"".concat(c," ").concat(u,"000").concat(l)}var d=(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1");return"".concat(c," ").concat(d," ").concat(u)},s=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.map((function(e){switch(e){case null:return"null";case void 0:return"undefined";default:return e.toString()}})).join(" ");o.push({date:new Date,type:e,content:i})}};__wxConfig.onReady((function(){setTimeout((function e(){var t;(setTimeout(e,2e3),0!==o.length)&&(t=o.slice(),"ios"===i&&"function"==typeof systemLog?systemLog({dataArray:t.map((function(e){return"\n".concat(a(e.date)," [").concat(e.type[0].toUpperCase(),"][weapplib] ").concat(e.content)}))}):"ios"===i||"windows"===i?(0,r.IN)("systemLog",{dataArray:t.map((function(e){return{message:"\n".concat(a(e.date)," [").concat(e.type[0].toUpperCase(),"][weapplib] ").concat(e.content)}}))}):"android"===i&&(0,r.IN)("systemLog",{message:["\n"].concat(t.map((function(e){return"[".concat(e.type[0].toUpperCase(),"][").concat(a(e.date),"][weapplib] ").concat(e.content)}))).join("\n")}),o=[])}),2e3)}));var c={log:s("log"),debug:s("debug"),info:s("info"),warn:s("warn"),error:s("error")}},266:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getNetworkType:()=>u,onNetworkStatusChange:()=>l,offNetworkStatusChange:()=>d,_getCurrentNetworkType:()=>f});var r=n(8392),i=n(9307),o=n(8947),a=n(3638),s="",c=(0,i.s)("networkstatusChange"),u=function(e){(0,r.IN)("getNetworkType",e)},l=c.onMethod,d=c.offMethod,f=function(){return s};(0,r.jQ)("onNetworkStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=e.networkType,a.Z.currentNetworkType=s,c.emit(e),(0,r.nY)("onNetworkStatusChange",e)})),o.Z.onReady((function(){u({success:function(e){s=e.networkType,a.Z.currentNetworkType=s}})}))},5835:(e,t,n)=>{"use strict";n.d(t,{oK:()=>s,j8:()=>c,x9:()=>o});var r=n(8392),i=(0,n(9307).s)("userCaptureScreen"),o=i.onMethod,a=(i.offMethod,null);(0,r.jQ)("onUserCaptureScreen",(function(e){"function"==typeof a&&a(e),i.emit(e)}));var s=function(e){a=__errorTracer__.surroundThirdByTryCatch(e,"at onUserCaptureScreen callback function")},c=function(){a=null}},6301:(e,t,n)=>{"use strict";n.d(t,{So:()=>p,xI:()=>h,jC:()=>g,m4:()=>v,Oo:()=>I,Ew:()=>S,Yu:()=>A,mw:()=>P});var r=n(8392),i=n(7264),o=n(9567),a=n(8947),s=n(2363),c=n(968),u=n(5322),l=null,d=function(e){var t=s.iw;s.cj&&(e.brand="iPhone"),s.gm&&"devtools"!==e.brand&&(t="iPhone"===e.brand?"ios":"android"),e.platform=t,e.SDKVersion=o.c,e.enableDebug=Boolean(a.Z.debug),a.Z.devicePixelRatio&&(e.devicePixelRatio=a.Z.devicePixelRatio),a.Z.theme&&(e.theme=a.Z.theme),a.Z.host&&(e.host=a.Z.host),s.wZ&&/^\d+\.\d+$/.test(e.version)&&(e.version+=".0"),delete(l=Object.assign({},e)).errMsg,(0,c.Av)()&&4!==a.Z.appType&&(e.safeArea=Object.assign({},e.safeArea),e.safeArea.top=0,e.safeArea.bottom=e.screenHeight,e.safeArea.height=e.safeArea.bottom-e.safeArea.top),s.jP&&(e.renderer="h5")},f=function(){a.Z.isReady||(new Error).stack},p=function(e){f();(0,r.IN)("getSystemInfo",e,{beforeSuccess:d})},h=function(){var e={};return p({success:function(t){delete t.errMsg,e=t,l=Object.assign({},e)}}),e},g=function(e){a.Z.supportAsyncGetSystemInfo||(console.info('Current Wechat version do not support asynchronous getSystemInfo. "wx.getSystemInfoAsync" will be finished by synchronous implementation.'),f());var t=a.Z.supportAsyncGetSystemInfo?"getSystemInfoAsync":"getSystemInfo";(0,r.IN)(t,e,{beforeSuccess:d})},v=function(){return l||h()},_=null,m=0,y=0,b=["brand","model","pixelRatio","language","version","system","platform","SDKVersion"];a.Z.onReady((function(){_={};for(var e=0;e<b.length;e++){if(!(b[e]in a.Z)){"[SystemInfo] stableSystemInfo not support (missing ".concat(b[e],"), falllback to JSAPI."),_=v();break}_[b[e]]=a.Z[b[e]]}if(a.Z.screenHeight&&a.Z.screenWidth)m=a.Z.screenWidth,y=a.Z.screenHeight;else{var t=v();m=t.screenWidth,y=t.screenHeight}}));var w,I=function(){return a.Z.isReady?Object.assign({},_):((new Error).stack,{})},S=function(){return a.Z.isReady?{screenWidth:m,screenHeight:y,deviceOrientation:m>y?"landscape":"portrait"}:((new Error).stack,{})},C=!1,T=new Set;(0,i.n)("onAppRouteDone",(function(){C=!0,T.forEach((function(e){return e()})),T.clear()}));var E,k=new Set,x=function(){(0,u.L)("getUserAgent",{},void 0,(function(e){w=e,k.forEach((function(t){try{t(e)}catch(e){}})),k.clear()}))},A=function(e){w?e(w):C?(k.add(e),x()):(T.has(x)||T.add(x),k.add(e))},P=function(){return E||(E=h.apply(void 0,arguments))}},6318:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(8947),i=n(2805),o=function(){var e,t=function(t){e="halfPage"===t.mode};return(0,i.T)((function(e){return t(e)})),r.Z.onReady((function(){return t(r.Z.appLaunchInfo||{})})),function(){return e}}();!function(){var e,t=[1175,1177],n=function(n){e=t.includes(n.scene)};(0,i.T)((function(e){return n(e)})),r.Z.onReady((function(){return n(r.Z.appLaunchInfo||{})}))}()},1251:(e,t,n)=>{"use strict";n.d(t,{yH:()=>a,rW:()=>s,vL:()=>c,bh:()=>u,hr:()=>l,NG:()=>d,NC:()=>f,ho:()=>p,cF:()=>h,yX:()=>g,lz:()=>v,dJ:()=>_,gj:()=>m,aW:()=>y,KK:()=>i.KK});var r=n(8325),i=n(4377),o=r.ZP.app,a=o.saveFile,s=(o.saveFileSync,o.getSavedFileList),c=o.getSavedFileInfo,u=o.removeSavedFile,l=o.getFileInfo,d=(o.readFile,o.readFileSync),f=o.writeFile,p=(o.writeFileSync,o.mkdir,o.mkdirSync),h=(o.rmdir,o.rmdirSync,o.readdir,o.readdirSync,o.access,o.accessSync),g=(o.unlink,o.unlinkSync),v=o.stat,_=o.statSync,m=(o.unzip,o.copyFile,o.copyFileSync,o.rename,o.renameSync),y=o.appendFile;o.appendFileSync},5987:(e,t,n)=>{"use strict";n.d(t,{tT:()=>r,LE:()=>l,Xo:()=>c,jL:()=>u});var r=(0,n(2984).Z)("getChannelsLiveInfo","webapi_getfinderviewlastlive",{},{},(function(e){return{export_id:e.feedId,finder_username:e.finderUserName}}),(function(e){e.live_info&&e.live_info.length&&(e.feedId=e.live_info[0].export_id,e.nonceId=e.live_info[0].nonce_id,e.description=e.live_info[0].description,e.status=e.live_info[0].status,e.headUrl=e.live_info[0].head_url,e.nickname=e.live_info[0].nickname),delete e.live_info,delete e.rawData})),i=n(8392),o=n(733);function a(){if(void 0===__appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}function s(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[e||"",a(),t,n,r].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"WeAppToChannels",value:i})}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(Object.assign({},e,{success:function(t){var n=t.nickname,r=n?"“".concat(n,"”"):"";(0,o._showModal)({content:"即将打开".concat(r,"视频号直播"),confirmText:"允许",cancelText:"取消",success:function(t){t.confirm?(0,i.IN)("openChannelsLive",e,{beforeAll:function(t){var n=t.errMsg;s(e.finderUserName,1,/^\w+:ok/.test(n)?1:0,n)}}):(s(e.finderUserName,1,0,"cancel"),(0,i.YG)("openChannelsLive",e,"cancel"))}})},fail:function(t){var n=t.errMsg;s(e.finderUserName,1,0,n),(0,i.YG)("openChannelsLive",e,n)},complete:null}))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(Object.assign({},e,{success:function(t){var n=t.nickname,r=n?"“".concat(n,"”"):"";(0,o._showModal)({content:"即将打开".concat(r,"视频号"),confirmText:"允许",cancelText:"取消",success:function(t){t.confirm?(0,i.IN)("openChannelsUserProfile",e,{beforeAll:function(t){var n=t.errMsg;s(e.finderUserName,2,/^\w+:ok/.test(n)?1:0,n)}}):(s(e.finderUserName,2,0,"cancel"),(0,i.YG)("openChannelsUserProfile",e,"cancel"))}})},fail:function(t){var n=t.errMsg;s(e.finderUserName,2,0,n),(0,i.YG)("openChannelsUserProfile",e,n)},complete:null}))}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(Object.assign({},e,{success:function(t){var n=t.nickname,r=n?"“".concat(n,"”"):"";(0,o._showModal)({content:"即将打开".concat(r,"视频号"),confirmText:"允许",cancelText:"取消",success:function(t){t.confirm?(0,i.IN)("openChannelsActivity",e,{beforeAll:function(t){var n=t.errMsg;s(e.finderUserName,3,/^\w+:ok/.test(n)?1:0,n)}}):(s(e.finderUserName,3,0,"cancel"),(0,i.YG)("openChannelsActivity",e,"cancel"))}})},fail:function(t){var n=t.errMsg;s(e.finderUserName,3,0,n),(0,i.YG)("openChannelsActivity",e,n)},complete:null}))}},5322:(e,t,n)=>{"use strict";n.d(t,{L:()=>c,V:()=>u});var r=n(8392),i=n(9267),o=n(3638),a=0,s=[],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,c=a++;s[c]=i,(0,r.nY)("invokeWebviewMethod",{name:e,args:t,callbackId:c},void 0===n?[o.Z.currentWebviewId]:n)};(0,r.Ld)("callbackWebviewMethod",(function(e){var t=e.res,n=e.callbackId,r=s[n];delete s[n],r&&r(t)}));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,i.Kn)(t)||(t={}),t=Object.assign({},t);var o=(0,r.wo)(t,e);c(e,t,void 0,(function(t){(0,r.F0)(t,e,o,n)}))}},205:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(6965),i=null;r.Z&&r.Z.WXAUDIO?i=r.Z.WXAUDIO:r.Z&&r.Z.AudioContext?i=r.Z.AudioContext:"undefined"!=typeof AudioContext?i=AudioContext:"undefined"!=typeof webkitAudioContext&&(i=webkitAudioContext);const o=i},5817:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});var r=n(8392),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.IN)("chooseMedia",e)}},9706:(e,t,n)=>{"use strict";n.d(t,{X4:()=>m,nH:()=>I,sS:()=>d});var r=n(1503),i=n.n(r),o=n(9307),a=n(2903),s=n(8392),c=n(3638),u=n(2115),l=n(9624),d=[],f=new Map,p=0,h=/url\((.*)\)/i,g=/([^.]*)(\..*)?/i;(0,s.Ld)("loadedFontFace",(function(e){var t=e.callbackId,n=e.errMsg,r=void 0===n?"":n;if(f.has(t)){var i=f.get(t);f.delete(t);var o=i.success,a=i.fail,s=i.complete,c=0===r.indexOf("loadFontFace:ok"),u={status:c?"loaded":"error",errMsg:r};c?"function"==typeof o&&o(u):"function"==typeof a&&a(u),"function"==typeof s&&s(u)}}));var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p++;var t=e.success,n=e.fail,r=e.complete;delete e.success,delete e.fail,delete e.complete,e.callbackId=p,f.set(p,{success:t,fail:n,complete:r});var i=e.global||!1;if(i){var o=encodeURIComponent(JSON.stringify(e));d.indexOf(o)<0&&d.push(o),(0,s.nY)("loadFontFace",e)}else(0,s.nY)("loadFontFace",e,[c.Z.currentWebviewId])},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){v(i()(i()({},e),{},{success:function(e){t(e)},fail:function(e){n(e)}}))}))},m=[],y=(0,o.s)("skiaCanvasLoadFontFace");function b(e){m.push(e),y.emit({nativeFontAssets:m})}var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=e.source.match(h);return n.length>=2&&(t=(t=n[1]).substring(1,t.length-1)),new Promise((function(n,r){(0,l.o)({url:t,timeout:2e4,success:function(t){b({originalSrc:e.source,src:t.tempFilePath,family:e.family,style:e.desc&&e.desc.style,weight:e.desc&&e.desc.weight,variant:e.desc&&e.desc.variant});var r=(t.tempFilePath||"").replace(g,(function(){return arguments.length<=1?void 0:arguments[1]}));a.L.set(r),n()},fail:function(){r()}})}))},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,s.r3)("loadFontFace",e,{family:"",source:""})){var t="";if(""===e.family&&(t="parameter error: family can not be empty string"),""===e.source&&(t="parameter error: source can not be empty string"),t)(0,s.YG)("loadFontFace",e,t);else{h.test(e.source)||(e.source='url("'.concat(e.source,'")')),e.scopes||(e.scopes=["webview"]),(0,u.I)({name:"loadFontFace",data:{family:e.family,source:encodeURIComponent(e.source),global:Boolean(e.global),scopes:e.scopes}});var n=[];if(e.scopes.indexOf("webview")>=0){var r=_(e);n.push(r)}if(e.scopes.indexOf("native")>=0){var i=w(e);n.push(i)}Promise.all(n).then((function(){(0,s.FE)({name:"loadFontFace",args:e,success:!0,errMsg:"",res:{status:"loaded"}})})).catch((function(){(0,s.FE)({name:"loadFontFace",args:e,success:!1,errMsg:"",res:{status:"error"}})}))}}}},8850:(e,t,n)=>{"use strict";n.d(t,{I9:()=>h,EO:()=>g,zU:()=>_,FI:()=>v,FE:()=>m,hv:()=>y});var r=n(572),i=n.n(r),o=n(3379),a=n.n(o),s=n(8392),c=n(9947),u=n(3638),l=n(9624),d=n(2903),f=n(4416),p=n(8947),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.IN)("chooseImage",(0,c.f0)({count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},e),{beforeSuccess:function(e){e.tempFileSizes?e.tempFiles=(e.tempFilePaths||[]).filter((function(e){return e})).map((function(t,n){return{path:t,size:e.tempFileSizes[n]}})):e.tempFiles=(e.tempFiles||[]).filter((function(e){return e.path&&"number"==typeof e.size})),delete e.tempFileSizes}})},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,s.r3)("previewImage",e,{urls:[""]})){var t,n=p.Z.version,r=p.Z.system,o="7.0.12"===n&&r.indexOf("iOS 13.4")>=0,c=a()(e.urls);try{for(c.s();!(t=c.n()).done;){var u=t.value;if(/^\s*data:image\//.test(u)&&o)return void(0,s.YG)("previewImage",e,"url can not be base64 on iOS 13.4")}}catch(e){c.e(e)}finally{c.f()}var l=Object.assign({},e);l.urls=l.urls.slice(),l.referrerPolicy=l.referrerPolicy||"origin",(0,f.V)(l.urls,"image",(function(e){var t=l.urls;if(l.urls=i()(e.data.map((function(e){return e.url}))),l.current){var n=t.indexOf(l.current);n>=0&&(l.current=l.urls[n])}l.urls&&(l.urls=l.urls.map((function(e){return d.L.get(e)||e}))),(0,s.IN)("previewImage",l)}))}},v=function(e){var t=Object.assign({},e),n=[t.src];(0,f.V)(n,"image",(function(e){return t.src=e.data[0].url,_(t,l.S)}))},_=function(e,t){(0,s.r3)("getImageInfo",e,{src:""})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/tmp\//.test(e.src)?(0,s.IN)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}}):/^(http|https):\/\//.test(e.src)?t({url:e.src,success:function(t){404!==t.statusCode?(e.src=t.tempFilePath,(0,s.IN)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})):(0,s.YG)("getImageInfo",e,"image not found (404)")},fail:function(t){(0,s.YG)("getImageInfo",e,"download image fail. reason: "+t.errMsg)}}):(e.src=(0,c.sd)(u.Z.lastRoute,e.src,!1),(0,s.IN)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.filePath=d.L.get(e.filePath)||e.filePath,(0,s.IN)("saveImageToPhotosAlbum",e,{})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={src:"",quality:80};t=(0,c.l7)(t,e),(0,s.r3)("compressImage",t,{src:"",quality:80})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/(tmp|store)\//.test(e.src)||(t.src=(0,c.sd)(u.Z.lastRoute,t.src,!1)),(0,s.IN)("compressImage",t))}},7604:(e,t,n)=>{"use strict";n.d(t,{pk:()=>o,lY:()=>Pe.lY,Ke:()=>we.K,KL:()=>be,vX:()=>De,G_:()=>de,We:()=>He,tX:()=>xt,fF:()=>ut,b4:()=>pe,FS:()=>ke,jN:()=>c,Qh:()=>Y,Jy:()=>xe,BH:()=>a,JS:()=>Dt,gG:()=>Ce,IM:()=>i,nN:()=>K,LU:()=>Ae,OP:()=>Ee,Rk:()=>s,iR:()=>r,TP:()=>Te});var r={};n.r(r),n.d(r,{Sf:()=>p,cC:()=>d,ew:()=>l,RC:()=>f});var i={};n.r(i),n.d(i,{gS:()=>w,yb:()=>I,F2:()=>S});var o={};n.r(o),n.d(o,{uR:()=>F,sI:()=>j,i5:()=>q,Hw:()=>Z,GO:()=>z,rw:()=>U,BI:()=>W,wT:()=>V,s$:()=>G});var a=n(8850),s=n(1562),c=n(9706),u=n(8392),l=function(e){(0,u.r3)("playVoice",e,{filePath:""})&&(0,u.IN)("playVoice",e)},d=function(e){(0,u.IN)("pauseVoice",e)},f=function(e){(0,u.IN)("stopVoice",e)},p=function(e){(0,u.jQ)("onVoicePlayEnd",__errorTracer__.surroundThirdByTryCatch(e,"at onVoicePlayEnd callback function"))},h=n(3624),g=n(6326),v=new g.Z,_={8e3:[16e3,48e3],11025:[16e3,48e3],12e3:[24e3,64e3],16e3:[24e3,96e3],22050:[32e3,128e3],24e3:[32e3,128e3],32e3:[48e3,192e3],44100:[64e3,32e4],48e3:[64e3,32e4]};(0,u.jQ)("onRecorderStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state;delete e.state,v.emit("onRecorderStateChange_".concat(t),e)}));var m=function(e){(0,u.IN)("operateRecorder",Object.assign({},e))},y={start:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({format:"aac",sampleRate:8e3,encodeBitRate:48e3,numberOfChannels:2,audioSource:"auto"},e);if(-1===Object.keys(_).map((function(e){return parseInt(e,10)})).indexOf(t.sampleRate))throw new Error('invalid sampleRate "'.concat(t.sampleRate,'", sampleRate should be one of ').concat(JSON.stringify(Object.keys(_))));if(t.encodeBitRate>_[t.sampleRate][1]||t.encodeBitRate<_[t.sampleRate][0])throw new Error('invalid encodeBitRate "'.concat(t.encodeBitRate,'", encodeBitRate should be greater than ').concat(_[t.sampleRate][0]," and less than ").concat(_[t.sampleRate][1]));t.operationType="start",t.fail=function(e){v.emit("onRecorderStateChange_error",e)},m(t)},pause:function(){m({operationType:"pause",fail:function(e){v.emit("onRecorderStateChange_error",e)}})},resume:function(){m({operationType:"resume",success:function(){v.emit("onRecorderStateChange_resume")},fail:function(e){v.emit("onRecorderStateChange_error",e)}})},stop:function(){m({operationType:"stop",fail:function(e){v.emit("onRecorderStateChange_error",e)}})},onStart:function(e){v.removeAllListeners("onRecorderStateChange_start"),v.on("onRecorderStateChange_start",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onResume:function(e){v.removeAllListeners("onRecorderStateChange_resume"),v.on("onRecorderStateChange_resume",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onResume callback function")()}))},onPause:function(e){v.removeAllListeners("onRecorderStateChange_pause"),v.on("onRecorderStateChange_pause",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onStop:function(e){v.removeAllListeners("onRecorderStateChange_stop"),v.on("onRecorderStateChange_stop",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onStop callback function")(t)}))},onFrameRecorded:function(e){v.removeAllListeners("onRecorderStateChange_frameRecorded"),v.on("onRecorderStateChange_frameRecorded",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onFrameRecorded callback function")(t)}))},onError:function(e){v.removeAllListeners("onRecorderStateChange_error"),v.on("onRecorderStateChange_error",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onError callback function")(t)}))},onInterruptionBegin:function(e){v.removeAllListeners("onRecorderStateChange_interruptionBegin"),v.on("onRecorderStateChange_interruptionBegin",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionBegin callback function")(t)}))},onInterruptionEnd:function(e){v.removeAllListeners("onRecorderStateChange_interruptionEnd"),v.on("onRecorderStateChange_interruptionEnd",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionEnd callback function")(t)}))}};var b,w=function(){return y},I=function(e){(0,h.v)("startRecord"),(0,u.IN)("startRecord",e)},S=function(e){(0,h.v)("stopRecord"),(0,u.IN)("stopRecord",e)},C=n(9947),T=n(3638),E=n(8676),k=n.n(E),x=n(4657),A=n(4416),P=new x.Q("BackgroundAudioManager",!0),D=wxNativeConsole.createLogger("BackgroundAudioManager"),O={src:"",currentTime:0,duration:0,paused:!0,buffered:0,title:"",coverImgUrl:"",description:"",startTime:0,playbackRate:1,referrerPolicy:""};(0,u.jQ)("onBackgroundAudioNext",(function(){P.emit("Next")})),(0,u.jQ)("onBackgroundAudioPrev",(function(){P.emit("Prev")})),(0,u.jQ)("onBackgroundAudioStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state;delete e.state,"play"===t?(O.paused=!1,T.Z.possessingBackgroundAudioPlayer=!0):"preempted"===t||"occupied"===t?(T.Z.possessingBackgroundAudioPlayer=!1,P.emit("Stop",e)):("pause"===t||"stop"===t)&&(O.paused=!0),P.emit("".concat(t[0].toUpperCase()).concat(t.substr(1)),e)}));var N={play:function(){setTimeout((function(){R({operationType:"play"})}),0)},pause:function(){setTimeout((function(){R({operationType:"pause"})}),0)},seek:function(e){if("number"!=typeof e)throw new Error("BackgroundAudioManager.seek(currentTime): unexpected type ".concat(k()(e)));setTimeout((function(){R({currentTime:e,operationType:"seek"})}),0)},stop:function(){setTimeout((function(){R({operationType:"stop"})}),0)},onTimeUpdate:function(e){var t=this;void 0===b&&(b=setInterval((function(){var e=O.currentTime;M("currentTime",(function(){"active"===T.Z.runningStatus&&!1!==T.Z.possessingBackgroundAudioPlayer&&t.currentTime!==e&&P.emit("Timeupdate")}))}),250)),P.off("Timeupdate"),P.on("Timeupdate",e)}};function R(e){(0,u.IN)("operateBackgroundAudio",e)}["src","title","epname","singer","startTime","coverImgUrl","currentTime","duration","paused","buffered","webUrl","protocol","playbackRate","referrerPolicy"].forEach((function(e){Object.defineProperty(N,e,{get:function(){return"src"===e&&N.srcCloudId?N.srcCloudId:"coverImgUrl"===e&&N.coverCloudId?N.coverCloudId:M(e)},set:function(t){["src","title","epname","singer","coverImgUrl","startTime","webUrl","protocol","playbackRate","referrerPolicy"].indexOf(e)>-1&&("src"===e?(0,A.V)([t],"audio",(function(n){/^(cloud):\/\//.test(t)?N.srcCloudId=t:N.srcCloudId="",B(e,n.data[0].url)})):"coverImgUrl"===e?(0,A.V)([t],"image",(function(n){/^(cloud):\/\//.test(t)?N.coverCloudId=t:N.coverCloudId="",B(e,n.data[0].url)})):B(e,t))}})}));function M(e,t){if(!1!==T.Z.possessingBackgroundAudioPlayer){var n=O[e];return(0,u.IN)("getBackgroundAudioState",{success:function(r){void 0===r.paused||!0===r.paused?r.paused=!0:r.paused=!1,O=Object.assign(O,r),n=O[e],"function"==typeof t&&t(n)},fail:function(e){var t=e.errMsg;D.error("getBackgroundAudioState fail: ".concat(t))}}),n}}["Canplay","Waiting","Error","Play","Pause","Seeking","Seeked","Ended","Stop","Next","Prev"].forEach((function(e){N["on".concat(e)]=function(t){P.off(e),P.on(e,t)}}));var L={};function B(e,t){if("src"===e&&!t)throw new Error("invalid BackgroundAudioManager.src: ".concat(t));if("active"!==T.Z.runningStatus&&!1===T.Z.possessingBackgroundAudioPlayer)throw new C.l0("Can not set BackgroundAudioManager.".concat(e,", background audio is preempted."));L[e]=t,1===Object.keys(L).length&&setTimeout((function(){Object.assign(O,L),O.src&&O.title?(D.log("setBackgroundAudioState, stateInstance:",O),(0,u.IN)("setBackgroundAudioState",Object.assign({},O,{fail:function(e){var t=e.errMsg;D.error(t),P.emit("Error",{errMsg:t.replace(/^setBackgroundAudioState: fail /,"")})}})),L={}):L={}}),0)}var F=function(){return N},j=function(e){if(!1===T.Z.possessingBackgroundAudioPlayer){var t={errMsg:"getBackgroundAudioPlayerState: fail not playing"};"function"==typeof e.fail&&e.fail(t),"function"==typeof e.complete&&e.complete(t)}else(0,u.IN)("getMusicPlayerState",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("getMusicPlayerState","getBackgroundAudioPlayerState")}})},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.IN)("operateMusicPlayer",(0,C.f0)({operationType:"play"},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateMusicPlayer","playBackgroundAudio")}})},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.IN)("operateMusicPlayer",(0,C.f0)({operationType:"pause"},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateMusicPlayer","pauseBackgroundAudio")}})},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("seekBackgroundAudio",e,{position:1})&&(0,u.IN)("operateMusicPlayer",(0,C.f0)({operationType:"seek"},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateMusicPlayer","seekBackgroundAudio")}})},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.IN)("operateMusicPlayer",(0,C.f0)({operationType:"stop"},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateMusicPlayer","stopBackgroundAudio")}})},H=new g.Z;(0,u.jQ)("onMusicPlay",(function(){T.Z.possessingBackgroundAudioPlayer=!0,H.emit("onBackgroundAudioPlay")}));var Z=function(e){H.removeAllListeners("onBackgroundAudioPlay"),H.on("onBackgroundAudioPlay",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at wx.onBackgroundAudioPlay callback function")()}))},q=function(e){(0,u.jQ)("onMusicPause",__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundAudioPause callback function"))},z=function(e){(0,u.jQ)("onMusicEnd",__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundAudioStop callback function"))},Y=function(e){(0,u.IN)("getAvailableAudioSources",e)},K=function(e){(0,u.IN)("setInnerAudioOption",Object.assign({mixWithOther:!0,obeyMuteSwitch:!0},e))},J=n(6965),$=n(7163),X=n.n($),Q=n(5843),ee=n.n(Q),te=n(9727),ne=n.n(te),re=wxNativeConsole.createLogger("MediaAudioPlayerJsApi"),ie=new WeakMap;function oe(e,t){var n=this;ie.set(this,Object.assign(ie.get(this),ne()({},e,t))),this.promise.then((function(){var r;(0,u.IN)("operateAudioPlayer",(r={operationType:"update",containerId:ie.get(n).containerId},ne()(r,e,t),ne()(r,"success",(function(e){re.log("update audio success",e)})),ne()(r,"fail",(function(e){re.error("update audio fail",e)})),r))})).catch((function(e){re.error("update audio fail",e)}))}var ae=function(){function e(){var t=this;X()(this,e),ie.set(this,{}),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),(0,u.IN)("operateAudioPlayer",{operationType:"create",success:function(e){re.log("operateAudioPlayer create success",e),ie.set(t,Object.assign(ie.get(t),{containerId:e.containerId})),t.resolve(e)},fail:function(e){re.error("operateAudioPlayer create fail",e),t.reject(e)}})}return ee()(e,[{key:"start",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){(0,u.IN)("operateAudioPlayer",{operationType:"start",containerId:ie.get(e).containerId,success:function(e){re.log("operateAudioPlayer start success",e),t(e)},fail:function(e){re.error("operateAudioPlayer start fail",e),n(e)}})}))}))}},{key:"addAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){(0,u.IN)("operateAudioPlayer",{operationType:"addTask",containerId:ie.get(t).containerId,taskId:e.videoDecoderId,success:function(e){re.log("addAudioSource addTask success",e),n(e)},fail:function(e){re.error("addAudioSource addTask fail",e),r(e)}})}))}))}},{key:"removeAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){(0,u.IN)("operateAudioPlayer",{operationType:"delTask",containerId:ie.get(t).containerId,taskId:e.videoDecoderId,success:function(e){re.log("removeAudioSource delTask success",e),n(e)},fail:function(e){re.error("removeAudioSource delTask fail",e),r(e)}})}))}))}},{key:"stop",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){(0,u.IN)("operateAudioPlayer",{operationType:"stop",containerId:ie.get(e).containerId,success:function(e){re.log("stop audio success",e),t(e)},fail:function(e){re.log("stop audio fail",e),n(e)}})}))}))}},{key:"destroy",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){(0,u.IN)("operateAudioPlayer",{operationType:"remove",containerId:ie.get(e).containerId,success:function(e){re.log("destroy audio success",e),t(e)},fail:function(e){re.error("destroy audio fail",e),n(e)}}),ie.delete(e)}))}))}},{key:"volume",get:function(){return ie.get(this).audioVolume},set:function(e){return oe.call(this,"audioVolume",e),e}}]),e}(),se=wxNativeConsole.createLogger("MediaAudioPlayerBinding"),ce=new WeakMap;function ue(e,t){var n=this;ce.set(this,Object.assign(ce.get(this),ne()({},e,t))),this.promise.then((function(){J.Z.MediaToolKit.audioUpdate(ne()({containerId:ce.get(n).containerId},e,t),(function(e){0===e.errCode?se.log("operateAudioPlayer update success",e):se.error("operateAudioPlayer update fail",e)}))})).catch((function(e){se.error("update audio fail",e)}))}var le=function(){function e(){var t=this;X()(this,e),ce.set(this,{}),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),se.log("NativeGlobal.MediaToolKit.audioCreate",J.Z.MediaToolKit.audioCreate),J.Z.MediaToolKit.audioCreate({},(function(e){0===e.errCode?(se.log("NativeGlobal.MediaToolKit.audioCreate success",e),ce.set(t,Object.assign(ce.get(t),{containerId:e.containerId})),t.resolve(e)):(se.error("create MediaAudioPlayerBinding fail"),t.reject(e))}))}return ee()(e,[{key:"start",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){J.Z.MediaToolKit.audioStart({containerId:ce.get(e).containerId},(function(e){0===e.errCode?(se.log("operateAudioPlayer start success",e),t(e)):(se.error("operateAudioPlayer start fail",e),n(e))}))}))}))}},{key:"addAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){J.Z.MediaToolKit.audioAddTask({containerId:ce.get(t).containerId,taskId:e.videoDecoderId},(function(e){0===e.errCode?(se.log("addAudioSource addTask success",e),n(e)):(se.error("addAudioSource addTask fail",e),r(e))}))}))}))}},{key:"removeAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){J.Z.MediaToolKit.audioDelTask({containerId:ce.get(t).containerId,taskId:e.videoDecoderId},(function(e){0===e.errCode?(se.log("removeAudioSource delTask success",e),n(e)):(se.error("removeAudioSource delTask fail",e),r(e))}))}))}))}},{key:"stop",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){J.Z.MediaToolKit.audioStop({containerId:ce.get(e).containerId},(function(e){0===e.errCode?(se.log("stop audio success",e),t(e)):(se.log("stop audio fail",e),n(e))}))}))}))}},{key:"destroy",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){J.Z.MediaToolKit.audioRemove({containerId:ce.get(e).containerId},(function(e){0===e.errCode?(se.log("destroy audio success",e),t(e)):(se.error("destroy audio fail",e),n(e))})),ce.delete(e)}))}))}},{key:"volume",get:function(){return ce.get(this).audioVolume},set:function(e){return ue.call(this,"audioVolume",e),e}}]),e}(),de=function(){return J.Z.MediaToolKit&&J.Z.MediaToolKit.audioCreate?new le:new ae},fe=n(205),pe=function(){var e=new fe.Z;J.Z&&J.Z.WXAUDIO&&e&&"function"==typeof e.create&&e.create();var t=[];return["close","resume","suspend"].forEach((function(n){var r=e[n];Object.defineProperty(e,n,{configurable:!1,get:function(){return function(){return r.call(e),new Promise((function(n){t.push(n);var i=e.onstatechange;e.onstatechange=function(){"function"==typeof i&&i();var n=t.pop();n&&n(),e.onstatechange=i},r.call(e)}))}.bind(e)}})})),e},he=n(4449),ge=n(8510),ve=n(1957),_e=null,me=!1;(0,ve.H)((function(){me=!0})),(0,ge.q)((function(){me=!1,_e&&(be(_e),_e=null)}));var ye=100,be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type||(e.type="all"),void 0===e.count&&(e.count=ye),(0,he.r3)("chooseMessageFile",e,{type:"",count:0})&&(e.count<=0?(0,he.YG)("chooseMessageFile",e,"param count should be larger than 0."):void 0===e.extension||"[object Array]"===Object.prototype.toString.call(e.extension)?!e.extension||e.extension.length?(e.count>ye&&(e.count=ye),me?_e=e:(0,he.IN)("chooseMessageFile",e)):(0,he.YG)("chooseMessageFile",e,"param extension should not be empty."):(0,he.YG)("chooseMessageFile",e,"param extension should be Array."))},we=n(5817),Ie=n(2903),Se=n(9601),Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,u.r3)("previewMedia",e,{sources:[]}))if(e.sources.length>50)(0,u.YG)("previewMedia",e,"maximum length of sources is 50");else{var t=(0,Se.hI)(this),n=function(e){return"string"!=typeof t||"/"!==e[0]?e:(0,C.S0)("plugin-private://".concat(t).concat(e))},r=JSON.parse(JSON.stringify(e.sources)),i=[],o=[];r.forEach((function(e,t){e.type=e.type||"image",e.index=t,e.url=e.url?Ie.L.get(e.url)||e.url:"","image"===e.type?i.push(e):"video"===e.type&&o.push(e)}));var a=i.map((function(e){return e.url||""})).map((function(e){return n(e)})),s=o.map((function(e){return e.url||""})).map((function(e){return n(e)}));(0,A.V)(a,"image",(function(t){var n=t.data.map((function(e){return e.url}));(0,A.V)(s,"video",(function(t){var a=t.data.map((function(e){return e.url}));n.forEach((function(e,t){var n=i[t].index;r[n].url=e})),a.forEach((function(e,t){var n=o[t].index;r[n].url=e}));var s=Object.assign({current:0},e,{sources:r});(0,u.IN)("previewMedia",s)}))}))}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.IN)("voiceSplitJoint",e)},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.IN)("uploadSilkVoice",e)},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.IN)("downloadSilkVoice",e)},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.IN)("getResPath",e)},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.IN)("setResPath",e)},Pe=n(1553),De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.IN)("chooseMultiMedia",e)},Oe=n(4742),Ne=n.n(Oe),Re=n(7541),Me=n.n(Re),Le=Object.assign,Be=new WeakMap,Fe=new WeakMap;function je(e,t){return e.map((function(e){return"video"===e.kind?new Ve(e.trackId,e.duration,t):"audio"===e.kind?new Ue(e.trackId,e.duration,t):null}))}var We=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;X()(this,e),this.id=t,this.duration=n,this.mediaContainer=r}return ee()(e,[{key:"appendFrom",value:function(t){var n=this;if(!(t instanceof e))throw new Error("Parameter 1 should be a MediaTrack");Be.get(this.mediaContainer).then((function(){(0,u.IN)("operateMediaTrack",{operationType:"update",containerId:n.mediaContainer.id,trackId:n.id,appendFrom:t.id,fail:(0,C.Hw)((function(e){throw new Error("fail to append. errMsg: ".concat(e.errMsg))}),"at MediaTrack.appendFrom method")})}))}},{key:"slice",value:function(e,t){var n=this,r=[];if("number"==typeof e){if("number"!=typeof t)throw new Error("Parameter 2 should be a number.");r.push([e,t])}else r=e;Be.get(this.mediaContainer).then((function(){(0,u.IN)("operateMediaTrack",{operationType:"update",containerId:n.mediaContainer.id,trackId:n.id,slice:r,fail:(0,C.Hw)((function(e){throw new Error("fail to slice. errMsg: ".concat(e.errMsg))}),"at MediaTrack.slice method")})}))}}]),e}(),Ue=function(e){Ne()(n,e);var t=Me()(n);function n(e,r,i){var o;return X()(this,n),(o=t.call(this,e,r,i)).kind="audio",o}return ee()(n,[{key:"volume",set:function(e){var t=this;if(!(e>=0&&e<=1))throw new Error("Parameter 1 out of range.");Be.get(this.mediaContainer).then((function(){(0,u.IN)("operateMediaTrack",{operationType:"update",containerId:t.mediaContainer.id,trackId:t.id,volume:e,fail:(0,C.Hw)((function(e){throw new Error("fail to set volume. errMsg: ".concat(e.errMsg))}),"at MediaTrack.volume setter")})}))}},{key:"atempo",set:function(e){var t=this;if(!(e>=0&&e<=10))throw new Error("Parameter 1 out of range.");Be.get(this.mediaContainer).then((function(){(0,u.IN)("operateMediaTrack",{operationType:"update",containerId:t.mediaContainer.id,trackId:t.id,atempo:e,fail:(0,C.Hw)((function(e){throw new Error("fail to set atempo. errMsg: ".concat(e.errMsg))}),"at MediaTrack.atempo setter")})}))}}]),n}(We),Ve=function(e){Ne()(n,e);var t=Me()(n);function n(e,r,i){var o;return X()(this,n),(o=t.call(this,e,r,i)).kind="video",o}return n}(We),Ge=function(){function e(){var t=this;X()(this,e);var n=new Promise((function(e){(0,u.IN)("operateMediaContainer",{operationType:"create",success:function(n){t.id=n.containerId,e()},fail:(0,C.Hw)((function(e){throw new Error("fail to createMediaContainer. errMsg: ".concat(e.errMsg))}),"at createMediaContainer function")})}));Be.set(this,n)}return ee()(e,[{key:"extractDataSource",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("createMediaContainer.extractDataSource",t,{source:""})&&Be.get(this).then((function(){(0,u.IN)("operateMediaTrack",Le(t,{operationType:"get",containerId:e.id}),{beforeSuccess:function(t){t.errMsg=t.errMsg.replace("operateMediaTrack","extractDataSource"),t.tracks=je(t.tracks,e)},beforeFail:function(e){e.errMsg=e.errMsg.replace("operateMediaTrack","extractDataSource")}})}))}},{key:"addTrack",value:function(e){var t=this;if(!(e instanceof We))throw new Error("Parameter 1 should be a MediaTrack");if("video"===e.kind){if(Fe.get(this))throw new Error("Only can be added one video track.");Fe.set(this,!0)}Be.get(this).then((function(){(0,u.IN)("operateMediaTrack",{operationType:"create",containerId:t.id,trackId:e.id,fail:(0,C.Hw)((function(e){throw new Error("fail to addTrack. errMsg: ".concat(e.errMsg))}),"at createMediaContainer.addTrack function")})}))}},{key:"removeTrack",value:function(e){var t=this;if(!(e instanceof We))throw new Error("Parameter 1 should be a MediaTrack");"video"===e.kind&&Fe.set(this,!1),Be.get(this).then((function(){(0,u.IN)("operateMediaTrack",{operationType:"remove",containerId:t.id,trackId:e.id})}))}},{key:"export",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.mimeType||(t.mimeType="mp4"),Be.get(this).then((function(){(0,u.IN)("operateMediaContainer",Le(t,{operationType:"export",containerId:e.id}))}))}},{key:"destroy",value:function(){var e=this;Be.get(this).then((function(){(0,u.IN)("operateMediaContainer",{operationType:"remove",containerId:e.id})}))}}]),e}();function He(){return new Ge}var Ze=n(1503),qe=n.n(Ze),ze=n(3356),Ye=n.n(ze),Ke=n(7015),Je=n.n(Ke),$e=n(9769),Xe=n(2363),Qe=new g.Z,et=new WeakMap,tt=new WeakMap;(0,u.jQ)("onCanvasPlayerStateChange",(function(e){var t=e.state;"playEnd"===t?Qe.emit(e.containerId,{event:"ended",data:{}}):"buffSize"===t?Qe.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}}):"error"===t&&Qe.emit(e.containerId,{event:"error",data:{message:e.errMsg,code:e.errCode}})}));var nt=!1;function rt(e){return it.apply(this,arguments)}function it(){return(it=Ye()(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=tt.get(t),e.next=3,n;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,u.bb)("operateCanvasPlayer",qe()(qe()({},n),{},{containerId:e.id||0,operationType:t}))}function at(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,o){n.g.NativeGlobal.MediaToolKit[t](qe()(qe()({},r),{},{containerId:e.id||0}),(function(e){if(0!==e.errCode){var n=new Error(e.errMsg||"".concat(t," failed"));return Object.assign(n,e),void o(n)}i(e)}))}))}function st(e,t,n){var r=et.get(e);r&&r.emit(t,n)}var ct=function(){function e(){var t=this;X()(this,e);var r=new g.Z;et.set(this,r);var i=Ye()(Je().mark((function e(){var i,o;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xe.wZ){e.next=8;break}return Xe.wZ&&(nt||(nt=!0,n.g.NativeGlobal.MediaToolKit.addEventListener("onPlayerBuffSize",(function(e){Qe.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}})})),n.g.NativeGlobal.MediaToolKit.addEventListener("onPlayerPlayEnd",(function(e){Qe.emit(e.containerId,{event:"ended",data:{}})})))),e.next=4,new Promise((function(e,t){n.g.NativeGlobal.MediaToolKit.playerCreate({},(function(n){if(0!==n.errCode){var r=new Error(n.errMsg||"create failed");return Object.assign(r,n),void t(r)}e(n)}))}));case 4:i=e.sent,t.id=i.containerId,e.next=12;break;case 8:return e.next=10,(0,u.bb)("operateCanvasPlayer",{operationType:"create"});case 10:o=e.sent,t.id=o.containerId;case 12:Qe.on(t.id,(function(e){var t=e.event,n=e.data;return r.emit(t,n)}));case 13:case"end":return e.stop()}}),e)})))();tt.set(this,i)}var t,r,i,o,a;return ee()(e,[{key:"start",value:(a=Ye()(Je().mark((function e(){var t,n,r,i,o,a,s=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,rt(this);case 3:if(!Xe.wZ){e.next=21;break}if(r=t.source,t.source&&/^(http|https):\/\/.*/i.test(t.source)){e.next=10;break}return e.next=8,(0,u.bb)("private_fileSystemConvert",{operationType:"getAbsolutePath",localId:t.source});case 8:i=e.sent,r=i.filePath;case 10:return e.next=12,at(this,"playerStart",{filePath:r,mode:void 0!==t.mode?t.mode:1,videoFormat:t.videoFormat||55,startStamp:t.startTime,abortAudio:t.abortAudio,abortVideo:t.abortVideo});case 12:o=e.sent,n=Object.assign({},o.video),this.width=n.width||0,this.height=n.height||0,this.buffer=new ArrayBuffer(this.width*this.height*4),n.video=o.video,n.audio=o.audio,e.next=30;break;case 21:return e.next=23,ot(this,"start",{source:t.source,mode:void 0!==t.mode?t.mode:1,videoFormat:t.videoFormat||55,startStamp:t.startTime,abortAudio:t.abortAudio,abortVideo:t.abortVideo});case 23:a=e.sent,n=Object.assign({},a.video),this.buffId=a.buffId,this.width=n.width||0,this.height=n.height||0,n.video=a.video,n.audio=a.audio;case 30:return st(this,"start",n),e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"seek",value:(o=Ye()(Je().mark((function e(t){var n,r,i=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"inaccurate",e.next=3,rt(this);case 3:if(r="accurate"===n,!Xe.wZ){e.next=9;break}return e.next=7,at(this,"playerSeek",{seekStamp:t,seekByStamp:r});case 7:e.next=11;break;case 9:return e.next=11,ot(this,"seek",{seekStamp:t,seekByStamp:r});case 11:return st(this,"seek",{position:t}),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"wait",value:(i=Ye()(Je().mark((function e(){var t,n=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,rt(this);case 3:if(!Xe.wZ){e.next=8;break}return e.next=6,at(this,"playerWait",{wait:t});case 6:e.next=10;break;case 8:return e.next=10,ot(this,"wait",{wait:t});case 10:st(this,"wait",{});case 11:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"stop",value:(r=Ye()(Je().mark((function e(){return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(this);case 2:if(!Xe.wZ){e.next=7;break}return e.next=5,at(this,"playerStop",{});case 5:e.next=9;break;case 7:return e.next=9,ot(this,"stop",{});case 9:st(this,"stop",{});case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"remove",value:(t=Ye()(Je().mark((function e(){var t;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(this);case 2:if(this.id&&(Qe.removeAllListeners(this.id),(t=et.get(this)).eventNames().forEach((function(e){return t.removeAllListeners(e)}))),!Xe.wZ){e.next=8;break}return e.next=6,at(this,"playerRemove",{});case 6:e.next=10;break;case 8:return e.next=10,ot(this,"remove",{});case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getFrameData",value:function(){var e,t,r,i,o,a,s=this;if(Xe.wZ?n.g.NativeGlobal.MediaToolKit.playerGetFrame({containerId:this.id,buffer:this.buffer},(function(n){n.got&&(e=s.buffer),t=n.pts,r=n.pk_pts,i=n.dts,o=n.pk_dts})):(0,u.IN)("operateCanvasPlayer",{operationType:"getFrame",containerId:this.id,success:function(n){n.got&&(e=$e.Z.get(s.buffId))&&(e.__proto__=ArrayBuffer.prototype),t=n.pts,r=n.pk_pts,i=n.dts,o=n.pk_dts},fail:function(e){a=new Error(e.errMsg&&e.errMsg.replace(/operateCanvasPlayer/g,"getFrameData")),Object.assign(a,e)}}),a)throw a;return e?{width:this.width,height:this.height,data:e,pts:t,pkPts:r,dts:i,pkDts:o}:null}},{key:"on",value:function(e,t){et.get(this).on(e,t)}},{key:"off",value:function(e,t){et.get(this).off(e,t)}},{key:"videoDecoderId",get:function(){return this.id}}]),e}();function ut(){return new ct}var lt=n(1983),dt=n(8947),ft=n(6928),pt=new g.Z,ht=new WeakMap,gt=new WeakMap,vt=new WeakMap,_t=new WeakMap,mt=new Map,yt=new Map,bt=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function wt(e){return It.apply(this,arguments)}function It(){return(It=Ye()(Je().mark((function e(t){var n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_t.get(t),e.next=3,n;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,i){n.g.NativeGlobal.MediaToolKit[e](t,(function(t){if(t&&t.errCode&&0!==t.errCode){var n=new Error(t.errMsg||"".concat(e," failed"));return Object.assign(n,t),void i(n)}r(t)}))}))}function Ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=gt.get(e),i=r.id,o=0;return r instanceof ft.y&&(i=r.__id,o=r._offscreenCanvasId),(0,u.bb)("operateMediaRecorder",qe()(qe()({},n),{},{canvasId:i,offScreenCanvasId:o,operationType:t}))}(0,u.jQ)("onMediaRecorderStateChange",(function(e){var t,n,r=e.state,i=e.canvasId<<0;if(i=mt.has(i)?mt.get(i):i,delete e.state,"timeUpdate"===r)pt.emit(i,{event:"timeupdate",data:{currentTime:e.currentTime}});else if("error"===r){var o=(t=e.errCode,(n={101:{code:lt.vU.MediaRecorder_StartDurationInvalid,message:"MediaRecorder.start:fail duration invalid"},103:{code:lt.vU.MediaRecorder_StartWhileAlreadyStartRecording,message:"MediaRecorder.start:fail start while already start recording"},104:{code:lt.vU.MediaRecorder_StartWhilePaused,message:"MediaRecorder.start:fail start while paused"},106:{code:lt.vU.MediaRecorder_StartBitRateInvalid,message:"MediaRecorder.start:fail bitrate invalid"},107:{code:lt.vU.MediaRecorder_StartFPSInvalid,message:"MediaRecorder.start:fail fps invalid"},108:{code:lt.vU.MediaRecorder_StartGOPInvalid,message:"MediaRecorder.start:fail gop invalid"},201:{code:lt.vU.MediaRecorder_PauseWhileNotStartRecording,message:"MediaRecorder.pause:fail pause while not start recording"},202:{code:lt.vU.MediaRecorder_PauseWhileAlreadyPaused,message:"MediaRecorder.pause:fail pause while already paused"},301:{code:lt.vU.MediaRecorder_ResumeWhileNotStartRecording,message:"MediaRecorder.resume:fail resume while not start recording"},302:{code:lt.vU.MediaRecorder_ResumeWhileRecording,message:"MediaRecorder.resume:fail resume while recording"},401:{code:lt.vU.MediaRecorder_AbortWhileNotStartRecording,message:"MediaRecorder.abort:fail abort while not start recording"},501:{code:lt.vU.MediaRecorder_StopWhileNotStartRecording,message:"MediaRecorder.stop:fail stop while not start recording"},503:{code:lt.vU.Global_FileStorageNotEnough,message:"MediaRecorder.stop:fail file storage not enough"}})[t]?n[t]:[102,110,111,502,710,810].includes(t)?{code:lt.vU.MediaRecorder_InternalFailed,message:"MediaRecorder:fail internal failed"}:{code:lt.vU.MediaRecorder_UnknownError,message:"MediaRecorder:fail unknown error"});pt.emit(i,{event:"error",data:{error:o}})}}));var Tt=!1;function Et(){Xe.wZ&&(Tt||(Tt=!0,n.g.NativeGlobal.MediaToolKit.addEventListener("onRecorderTimeUpdate",(function(e){if(yt.has(e.containerId)){var t=yt.get(e.containerId);pt.emit(t,{event:"timeupdate",data:{currentTime:e.stamp}})}}))))}var kt=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};X()(this,e),gt.set(this,t);var i=new g.Z;ht.set(this,i),pt.on(t.id,(function(e){var t=e.event,n=e.data;return i.emit(t,n)})),"number"==typeof r.duration?this.duration=Math.min(7200,Math.max(5,r.duration)):this.duration=7200,"number"==typeof r.videoBitsPerSecond?this.videoBitsPerSecond=Math.min(3e3,Math.max(600,r.videoBitsPerSecond)):this.videoBitsPerSecond=1e3,this.fps=r.fps||24,this.gop=r.gop||12,this.timeUpdateInterval=r.timeUpdateInterval||this.gop,this.audioPlayerId=r.audioPlayerId;var o=Ye()(Je().mark((function e(){var r;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xe.wZ){e.next=9;break}return Et(),e.next=4,St("recorderCreate",{});case 4:r=e.sent,n._containerId=r.containerId,yt.set(n._containerId,t.id),e.next=12;break;case 9:return e.next=11,Ct(n,"create",{});case 11:t instanceof ft.y&&mt.set(t.__id,t.id);case 12:i.emit("create",{});case 13:case"end":return e.stop()}}),e)})))();_t.set(this,o)}var t,r,i,o,a,s;return ee()(e,[{key:"pause",value:(s=Ye()(Je().mark((function e(){var t,n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt(this);case 2:if(t=ht.get(this),!Xe.wZ){e.next=10;break}return e.next=6,St("recorderUpdate",{containerId:this._containerId,pause:!0});case 6:n=e.sent,t.emit("pause",n),e.next=13;break;case 10:return e.next=12,Ct(this,"pause",{});case 12:t.emit("pause");case 13:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"resume",value:(a=Ye()(Je().mark((function e(){var t,n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt(this);case 2:if(t=ht.get(this),!Xe.wZ){e.next=10;break}return e.next=6,St("recorderUpdate",{containerId:this._containerId,pause:!1});case 6:n=e.sent,t.emit("resume",n),e.next=13;break;case 10:return e.next=12,Ct(this,"resume");case 12:t.emit("resume");case 13:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"start",value:(o=Ye()(Je().mark((function e(){var t,n,r,i,o,a;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt(this);case 2:if(t=ht.get(this),n=gt.get(this),r={width:n.width,height:n.height,fps:this.fps,bitrate:this.videoBitsPerSecond,gop:this.gop,duration:this.duration,timeUpdateInterval:this.timeUpdateInterval,audioPlayerId:this.audioPlayerId,cumulativeStamp:!0},Xe.cj&&dt.Z.clientVersion<385879296?r.duration=Math.floor(this.duration):r.duration=Math.floor(1e3*this.duration),!Xe.wZ){e.next=24;break}return e.next=9,(0,u.bb)("private_fileSystemConvert",{operationType:"getWxFilePath",fileName:"".concat(Date.now()),mimeType:"mp4",autoDeleteIfExists:!0});case 9:return i=e.sent,this.tempFilePath=i.localId,this._absoluteFilePath=i.filePath,o=n.id,n instanceof ft.y&&(o=n._offscreenCanvasId),r.containerId=this._containerId,r.canvasId=o,r.notifyVideoKeyFrame=!0,r.filePath=i.filePath,e.next=20,St("recorderStart",r);case 20:a=e.sent,t.emit("start",a),e.next=27;break;case 24:return e.next=26,Ct(this,"start",r);case 26:t.emit("start");case 27:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"stop",value:(i=Ye()(Je().mark((function e(){var t,n,r,i,o,a,s,c;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wt(this);case 2:if(t=ht.get(this),!Xe.wZ){e.next=12;break}return e.next=6,St("recorderStop",{containerId:this._containerId});case 6:return e.next=8,St("analysis",{filePath:this._absoluteFilePath});case 8:r=e.sent,n={duration:r.duration,tempFilePath:this.tempFilePath,fileSize:r.size},e.next=20;break;case 12:return e.next=14,Ct(this,"stop");case 14:i=e.sent,o=i.tempFilePath,a=i.tempThumbPath,s=i.fileSize,c=i.duration,n={tempFilePath:o,tempThumbPath:a,fileSize:s,duration:c};case 20:return t.emit("stop",n),e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"requestFrame",value:(r=Ye()(Je().mark((function e(){var t,r,i,o,a=this,s=arguments;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:function(){},e.next=3,wt(this);case 3:if(r=gt.get(this),!Xe.wZ){e.next=18;break}return e.next=7,new Promise((function(e){n.g.NativeGlobal.MediaToolKit.recorderCapture({containerId:a._containerId},e)}));case 7:if(i=e.sent,o=1e3/this.fps,i.got){e.next=16;break}return e.next=12,bt(o);case 12:return e.next=14,this.requestFrame(t);case 14:e.next=17;break;case 16:t();case 17:return e.abrupt("return");case 18:if(!(r instanceof ft.y)){e.next=22;break}setTimeout((function(){t(),n.g.WeixinCanvas.recordFrame(r.__id,r._offscreenCanvasId)})),e.next=25;break;case 22:return e.next=24,new Promise((function(e){return r.requestAnimationFrame(e)}));case 24:t();case 25:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"on",value:function(e,t){"timeUpdate"===e&&(e="timeupdate"),ht.get(this).on(e,t)}},{key:"off",value:function(e,t){"timeUpdate"===e&&(e="timeupdate"),ht.get(this).off(e,t)}},{key:"destroy",value:(t=Ye()(Je().mark((function e(){var t,n;return Je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=gt.get(this),pt.removeAllListeners(t.id),(n=ht.get(this)).eventNames().forEach((function(e){return n.removeAllListeners(e)})),!Xe.wZ){e.next=12;break}return e.next=7,wt(this);case 7:return yt.delete(this._containerId),e.next=10,St("recorderRemove",{containerId:this._containerId});case 10:e.next=14;break;case 12:return e.next=14,Ct(this,"remove");case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();function xt(e,t){if(vt.get(e))throw new Error("Already created by the same canvas node.");if(!e||"function"!=typeof e.getContext||!e.getContext("webgl"))throw new Error("Cannot get webgl context from target.");var n=new kt(e,t);return vt.set(e,n),n}var At=300,Pt=Object.assign,Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,u.r3)("openVideoEditor",e,{filePath:""})){var t=e.title,n=e.filePath,r=e.minDuration,i=e.maxDuration;(!(r=parseInt(r,10))||r<1)&&(r=1),(!(i=parseInt(i,10))||i>At)&&(i=At),(0,u.IN)("openVideoEditor",Pt({},e,{editType:2,editorParmas:{title:t,filePath:n,minDuration:r,maxDuration:i,toolBars:["crop"],buttonOptions:[]}}),{beforeSuccess:function(e){e.duration=e.duraionMs||Math.round(e.duration/1e3),delete e.chosenId,delete e.videoMD5,delete e.duraionS,delete e.duraionMs,delete e.duraionUs}})}}},1553:(e,t,n)=>{"use strict";n.d(t,{lY:()=>f,hA:()=>a,xJ:()=>u,p$:()=>o,aS:()=>c});var r=n(9307),i=(0,r.s)("AudioInterruptionBegin"),o=i.onMethod,a=i.offMethod,s=(i.internalOnMethod,i.internalOffMethod,(0,r.s)("AudioInterruptionEnd")),c=s.onMethod,u=s.offMethod,l=(s.internalOnMethod,s.internalOffMethod,n(8392)),d=(n(4785),!1);(0,l.jQ)("onAudioInterruptionBegin",(function(e){wxNativeConsole.info("onAudioInterruptionBegin"),!0,!1===d&&i.emit(e)})),(0,l.jQ)("onAudioInterruptionEnd",(function(e){wxNativeConsole.info("onAudioInterruptionEnd"),!1,!1===d&&s.emit(e)}));var f=function(){return d}},1562:(e,t,n)=>{"use strict";n.d(t,{Dk:()=>i,xW:()=>o,$p:()=>a,Lv:()=>s});var r=n(8392),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof e.maxDuration&&e.maxDuration>60){var t={errMsg:"chooseVideo:fail|maxDuration can not over 60"};return"function"==typeof e.fail&&e.fail(t),void("function"==typeof e.complete&&e.complete(t))}e.sourceType=e.sourceType||["album","camera"],e.camera=e.camera||"back","boolean"!=typeof e.compressed&&(e.compressed=!0),(0,r.IN)("chooseVideo",e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.IN)("saveVideoToPhotosAlbum",e,{})},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.r3)("getVideoInfo",e,{src:""})&&(0,r.IN)("getVideoInfo",e,{})},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.r3)("compressVideo",e,{src:""})&&(0,r.IN)("compressVideo",e,{})}},9624:(e,t,n)=>{"use strict";n.d(t,{o:()=>L,S:()=>B});var r=n(8392),i=n(6965),o=n(2363),a=n(8947),s=n(9954),c=n(8976),u=n(7163),l=n.n(u),d=n(4742),f=n.n(d),p=n(7541),h=n.n(p),g=n(6989);(0,g.b)("Download",{maxTaskCount:10,functionName:"downloadFile"}),a.Z.onReady((function(){try{"number"==typeof a.Z.wxAppInfo.maxDownloadConcurrent&&(0,g.b)("Download",{maxTaskCount:a.Z.wxAppInfo.maxDownloadConcurrent})}catch(e){}}));const v=function(e){f()(n,e);var t=h()(n);function n(e){return l()(this,n),t.call(this,e,{taskType:"Download",beforeSend:function(t){return t.filePath=e.filePath,t},beforeSuccess:function(e){return delete e.timeInterval,e}})}return n}(g.o);var _=n(5843),m=n.n(_),y=n(6326),b=n(968),w=n(8072),I=i.Z.Download,S=new WeakMap,C=new WeakMap,T=new WeakMap,E=[],k=0,x=10;function A(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(e&&(S.delete(e),C.delete(e),T.delete(e),k--);E.length>0&&k<x;){var t=E.shift(),n=S.get(t),r=C.get(t);n&&r&&(n.start(r),k++)}}a.Z.onReady((function(){a.Z.wxAppInfo&&a.Z.wxAppInfo.maxDownloadConcurrent&&(x=a.Z.wxAppInfo.maxDownloadConcurrent)}));var P=function(){function e(t){var n=this;l()(this,e);var i=new I,o=new y.Z;S.set(this,i),T.set(this,o),C.set(this,(0,b.v7)(t,["url","header","filePath","enableProfile"])),i.onfail=function(e){(0,r.YG)("downloadFile",t,e),A(!0)},i.onsuccess=function(e){(0,r.FE)({name:"downloadFile",args:t,res:e}),A(!0)},i.onheader=function(e){return o.emit("header",{header:e})},i.onprogress=function(e,t,n){return o.emit("progress",{progress:e,totalBytesWritten:t,totalBytesExpectedToWrite:n})},(0,w.k)({api:"downloadFile",url:t.url}).then((function(e){t.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost?(E.push(n),A()):(0,r.YG)("downloadFile",t,"invalid url")})).catch((function(){(0,r.YG)("downloadFile",t,"url validate error")}))}return m()(e,[{key:"abort",value:function(){var e=S.get(this);e&&e.abort()}},{key:"onHeadersReceived",value:function(e){var t=T.get(this);t&&t.on("header",e)}},{key:"onProgressUpdate",value:function(e){var t=T.get(this);t&&t.on("progress",e)}},{key:"offHeadersReceived",value:function(e){var t=T.get(this);t&&t.off("header",e)}},{key:"offProgressUpdate",value:function(e){var t=T.get(this);t&&t.off("progress",e)}}]),e}(),D=!1;function O(e){return D?new P(e):new v(e)}i.Z.Download&&a.Z.onReady((function(){var e=!1,t=o.cj?"clicfg_appbrand_ios_native_download":"clicfg_appbrand_native_download";(0,s.b)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&(e=!0)},fail:function(e){}});var n=(0,c.J)("bindingDownload");"".concat((D=e||n)?"binding":"jsapi"," download, abtest: ").concat(e,", permission: ").concat(n)}));var N=n(8325),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,r.r3)("downloadFile",t,{url:""})){t.__skipDomainCheck__=e.__skipDomainCheck__;try{var n=new O(t);return n}catch(e){return void(0,r.YG)("downloadFile",t,e.message)}}}},M=R(),L=R({__skipDomainCheck__:!0}),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("string"!=typeof e.filePath||!e.filePath.startsWith((0,N.WZ)()))return M(e);(0,r.YG)("downloadFile",e,"permission denied")}},5212:(e,t,n)=>{"use strict";n.d(t,{a:()=>H,W:()=>G});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(8392),c=n(9947),u=n(8676),l=n.n(u),d=n(4742),f=n.n(d),p=n(7541),h=n.n(p),g=n(8947),v=n(6989),_=n(9267),m=n(3638),y="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",b="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function w(e){var t=e.isSuccess,n=e.invokeTime,r=e.costTime,i=e.wxdataQueueTimestamp,o=e.wxdataDequeueTimestamp,a=e.beginCGITimestamp,s=e.CGICallbackTimestamp,c=e.wxlibCallbackTimestamp,u=e.requestingCount,l=e.cost1,d=e.cost2,f=e.cost3,p=e.cost4,h=e.cost5,v=e.cost6,w=e.JSApiType;Math.random()<.002&&setTimeout((function(){var e,I=m.Z.currentNetworkType,S=g.Z.appType+1e3,C=g.Z.appLaunchInfo&&void 0!==g.Z.appLaunchInfo.scene?g.Z.appLaunchInfo.scene:0,T=["","",t?1:0,n,r,I,"",S,C,y,b,"",0,0,l,d,f,p,h,v,0,0,u,n,i,o,a,s,0,0,c,w].map((e=1024,function(t){return(0,_.HD)(t)&&t.length>e?t.substr(0,e):t})).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:T})}),0)}(0,_.HD)(y)&&(y=y.replace(" ","")),(0,_.HD)(b)&&(b=b.replace(" ","-"));var I=n(5770),S=n(968),C=n(266),T=(0,S.Fr)((0,I.Ce)(!1,"getDNSInfo")),E={},k={},x={};(0,C.onNetworkStatusChange)((function(){E={},k={},x={}}));var A=0;function P(e,t,n){var r=Date.now();if(A--,t.costTime=r-t.invokeTime,e.clientInfo&&"object"===l()(e.clientInfo)){var i=e.clientInfo;t.wxdataQueueTimestamp=i.invokeTime,t.wxdataDequeueTimestamp=i.invokeTime,t.beginCGITimestamp=i.beginCGITimestamp,t.CGICallbackTimestamp=i.CGICallbackTimestamp,t.wxlibCallbackTimestamp=i.wxlibCallbackTimestamp,t.cost1=t.wxdataQueueTimestamp-t.invokeTime,t.cost2=t.wxdataDequeueTimestamp-t.wxdataQueueTimestamp,t.cost3=t.beginCGITimestamp-t.wxdataDequeueTimestamp,t.cost4=t.CGICallbackTimestamp-t.beginCGITimestamp,t.cost5=t.wxlibCallbackTimestamp-t.CGICallbackTimestamp,t.cost6=r-t.wxlibCallbackTimestamp,n&&n.__wxUseProfile__&&(e.__requestProfileInfo=t),delete e.clientInfo,w(t)}}(0,v.b)("Request",{maxTaskCount:10,functionName:"request"}),g.Z.onReady((function(){try{"number"==typeof g.Z.wxAppInfo.maxRequestConcurrent&&(0,v.b)("Request",{maxTaskCount:g.Z.wxAppInfo.maxRequestConcurrent})}catch(e){}}));const D=function(e){f()(n,e);var t=h()(n);function n(e){i()(this,n);var r={JSApiType:1,invokeTime:Date.now(),requestingCount:++A};return t.call(this,e,{taskType:"Request",beforeSend:function(t){return t.responseType=e.responseType,t.apiSigningSeq=e.apiSigningSeq,t.apiSignature=e.apiSignature,t},beforeSuccess:function(t){var n,i;return e.host&&e.ip&&(n=e.host,i=e.ip,k[n]=i),r.isSuccess=!0,function(e){"string"==typeof e.data&&65279===e.data.charCodeAt(0)&&(e.data=e.data.substr(1))}(t),function(e){e.statusCode=parseInt(e.statusCode,10)}(t),function(e){"object"===l()(e.header)&&(e.header=Object.keys(e.header).reduce((function(t,n){return Array.isArray(e.header[n])?t[n]=e.header[n].join(","):"string"==typeof e.header[n]&&(t[n]=e.header[n]),t}),{}))}(t),"json"===e.dataType&&function(e){try{e.data=JSON.parse(e.data)}catch(e){}}(t),P(t,r,e),t},beforeFail:function(t){return r.isSuccess=!1,P(t,r,e),t}})}return n}(v.o);var O=new WeakMap,N=function(){function e(){var t;i()(this,e);var n=new Promise((function(e){t=e}));O.set(this,{promise:n,resolve:t})}return a()(e,[{key:"abort",value:function(){O.get(this).promise.then((function(e){e.abort()}))}},{key:"onHeadersReceived",value:function(e){O.get(this).promise.then((function(t){t.onHeadersReceived(e)}))}},{key:"offHeadersReceived",value:function(e){O.get(this).promise.then((function(t){t.offHeadersReceived(e)}))}}]),e}();function R(e){var t=e.args,n=(0,c.Em)(t.header);t.header=t.header||{},t.header=(0,c.Nf)(t.header),"Undefined"!==n&&"Object"!==n&&(console.warn("wx.request: header must be an object"),t.header={}),t.header=Object.keys(t.header).reduce((function(e,n){return"content-type"===n.toLowerCase()?e[n.toLowerCase()]=t.header[n]:e[n]=t.header[n],e}),{});var r="text";t.responseType&&(r=t.responseType.toLowerCase());var i,o=t.header||{},a="GET";return"string"==typeof t.method&&(a=t.method.toUpperCase()),t.dataType=t.dataType||"json",o["content-type"]=o["content-type"]||"application/json",i=void 0===t.data?"":"string"!=typeof t.data&&"ArrayBuffer"!==(0,c.Em)(t.data)?o["content-type"].indexOf("application/x-www-form-urlencoded")>-1?(0,c.HR)(t.data,!0):o["content-type"].indexOf("application/json")>-1||"object"===l()(t.data)?JSON.stringify(t.data):i.toString():t.data,"GET"===a&&(t.url=(0,c.cE)(t.url,t.data)),{header:o,method:a,responseType:r,dataStr:i,args:t}}function M(e){var t,n=e.args,r=e.host;if(!0===n.enableHttpDNS){var i=function(e){var t=E[e];return t?{expired:Date.now()>t.expireTime,ip:t.ip}:null}(r);return i&&!1===i.expired?(t=i.ip,{host:r,ip:t}):function(e){return x[e]||(x[e]=T({apiName:"webapi_wxahttpdns_gethostip",reqData:{domain:e}}).then((function(t){delete x[e];var n=t=JSON.parse(t.rawData),r=n.wxa_state,i=n.ip,o=n.ttl;if(0===r)return E[e]={ip:i,expireTime:1e3*o+Date.now()},E[e];throw new Error(r)})).catch((function(t){throw delete x[e],t}))),x[e]}(r).then((function(e){return t=e.ip,{host:r,ip:t}}))}return{}}function L(e){return{forbidReuse:function(e,t){var n=k[e];return t?!(n&&n===t||(delete k[e],0)):(delete k[e],!1)}(e.host,e.ip)}}var B=n(1445);function F(e){var t=e.args,n=(0,B.e)(t.url);return{host:n.host,protocol:n.protocol}}function j(e){var t=e.protocol;return{port:"http"===t?80:"https"===t?443:0}}var W=__safeway__.apiSign.makeApiSign,U=function(){function e(t){i()(this,e),this.innerParams=t,this.asyncTasks=[]}return a()(e,[{key:"use",value:function(e){var t=this,n=e(this.innerParams,this.asyncTasks);if(n instanceof Promise){var r=n.then((function(e){Object.assign(t.innerParams,e)}));this.asyncTasks.push(r)}else Object.assign(this.innerParams,n);return this}},{key:"useAfterAsyncTasks",value:function(e){var t=this;return this.asyncTasks.length>0?Promise.all(this.asyncTasks).then((function(){t.use(e)})).catch((function(e){return e})):this.use(e),this}},{key:"catch",value:function(e){return this.catchFn=e,this}},{key:"execute",value:function(){var e=this;if(this.asyncTasks.length>0){var t=new N;return Promise.all(this.asyncTasks).then((function(){var n=e.createRequestTask();!function(e,t){(0,O.get(e).resolve)(t)}(t,n)})).catch((function(t){e.catchFn&&e.catchFn(t),delete e.catchFn})),t}return this.createRequestTask()}},{key:"createRequestTask",value:function(){var e=this.innerParams,t=e.args,n=e.host,r=e.ip,i=e.header,o=e.method,a=e.port,s=e.responseType,c=e.dataStr,u=e.options,l=e.forbidReuse;try{return new D(Object.assign({},t,{header:i,method:o,responseType:s,data:c,ip:r,host:n,port:a,forbidReuse:l},W("createRequestTask",{url:t.url,__skipDomainCheck__:u.__skipDomainCheck__})))}catch(e){return this.catchFn&&this.catchFn(e),void delete this.catchFn}}}]),e}(),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,s.r3)("request",t,{url:""}))if(!1!==(0,c.mQ)(t.url)){try{JSON.stringify(t.data)}catch(e){return void(0,s.YG)("request",t,"fail to stringify data")}if("function"!=typeof t.data){var n=new U({args:t,options:e});return n.catch((function(e){(0,s.YG)("request",t,e.message||e.errMsg)})).use(R).use(F).use(j).use(M).useAfterAsyncTasks(L),n.execute()}(0,s.YG)("request",t,"data should not be Function")}else(0,s.YG)("request",t,'invalid url "'.concat(t.url,'"'))}},G=V(),H=V({__skipDomainCheck__:!0})},6989:(e,t,n)=>{"use strict";n.d(t,{o:()=>F,b:()=>z});var r=n(2208),i=n.n(r),o=n(8676),a=n.n(o),s=n(9727),c=n.n(s),u=n(7163),l=n.n(u),d=n(5843),f=n.n(d),p=n(4449),h=n(5405),g=n(4657),v=n(968),_=n(9267),m=n(1251),y=n(1445),b=n(2363),w=n(3464),I=n(8947),S=(0,v.Fr)(m.lz),C=0,T=new WeakMap,E=new WeakMap,k=new WeakMap,x=new WeakMap,A=new WeakMap,P=new WeakMap,D=new WeakMap,O=new WeakMap,N=new WeakMap,R=new WeakMap,M={},L=new g.Q("Network",!0),B=wxNativeConsole.createLogger("NetworkTask"),F=function(){function e(t,n){var r=this,i=n.taskType,o=n.beforeSend,a=n.beforeSuccess,s=n.beforeFail;l()(this,e);var c=C++;T.set(this,c),k.set(this,"waiting"),x.set(this,t),A.set(this,i),D.set(this,o),O.set(this,a),(0,_.mf)(s)&&N.set(this,s);var u=!1;b.jP&&(u=!0),b.wZ&&I.Z.clientVersion>=654315008&&("Download"!==i&&"Request"!==i||Object.keys(I.Z.gamePlugins||I.Z.plugins||{}).forEach((function(e){var t=(I.Z.gamePlugins||I.Z.plugins)[e];!t||"wx20afc706a711eefc"!==t.provider&&"wx4d5893418b75cb20"!==t.provider||(u=!0)}))),R.set(this,u),this.promise=new w.Q((function(e,t){r.resolve=e,r.reject=t}));var d=function(){Z.call(r)?M[i].taskQueue.push({id:c,item:r}):W.call(r)};(0,_.mf)(t.customCheck)?t.customCheck(t,(function(e){e?j(i,t,e):d()})):d()}return f()(e,[{key:"abort",value:function(){var e=this;if(B.info("[".concat(A.get(this),"][").concat(T.get(this),"]abort()")),"waiting"===k.get(this)){B.info("[".concat(A.get(this),"][").concat(T.get(this),"] waiting=true"));var t=M[A.get(this)].taskQueue.findIndex((function(t){return t.id===T.get(e)}));t>-1&&(M[A.get(this)].taskQueue.splice(t,1),(0,p.YG)(M[A.get(this)].functionName,x.get(this),"abort")),k.set(this,"done")}else this.promise.then((function(){var t;(0,p.IN)("operate".concat(A.get(e),"Task"),(t={},c()(t,"".concat(A.get(e).toLowerCase(),"TaskId"),E.get(e)),c()(t,"operationType","abort"),t))}))}},{key:"onProgressUpdate",value:function(e){var t=this;this.promise.then((function(){L.on("".concat(A.get(t)).concat(E.get(t),"progressUpdate"),e)}))}},{key:"offProgressUpdate",value:function(e){var t=this;this.promise.then((function(){L.off("".concat(A.get(t)).concat(E.get(t),"progressUpdate"),e)}))}},{key:"onHeadersReceived",value:function(e){var t=this;this.promise.then((function(){L.on("".concat(A.get(t)).concat(E.get(t),"headersReceived"),e)}))}},{key:"offHeadersReceived",value:function(e){var t=this;this.promise.then((function(){L.off("".concat(A.get(t)).concat(E.get(t),"headersReceived"),e)}))}}]),e}();function j(e,t,n){(0,p.FE)({name:M[e].functionName,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:n})}function W(){var e=this,t=x.get(this),n=A.get(this),r=R.get(this);k.set(this,"sending"),P.set(this,Date.now());var i=U.call(this);r?this.promise.then((function(){V.call(e)})).catch((function(e){j(n,t,e)})):i?j(n,t,i):V.call(this)}function U(){var e,t=this,n=A.get(this),r=x.get(this);M[n].currentTaskCount++;var i={data:r.data,url:r.url,header:r.header,method:r.method,timeout:(0,_.hj)(r.timeout)?r.timeout:0,enableHttp2:!!(0,_.jn)(r.enableHttp2)&&r.enableHttp2,enableQuic:!!(0,_.jn)(r.enableQuic)&&r.enableQuic,enableCache:!!(0,_.jn)(r.enableCache)&&r.enableCache,enableProfile:!(0,_.jn)(r.enableProfile)||r.enableProfile,ip:r.ip,port:r.port,forbidReuse:!!(0,_.jn)(r.forbidReuse)&&r.forbidReuse,host:r.host,__skipDomainCheck__:r.__skipDomainCheck__,success:function(e){var r=e["".concat(n.toLowerCase(),"TaskId")];E.set(t,r),M[n].taskIdMap[r]=t,t.resolve()},fail:function(i){M[n].currentTaskCount--;var o=i["".concat(n.toLowerCase(),"TaskId")];e=i.errMsg,G.call(t,{taskType:n,options:r,errMsg:e,success:!1}),t.reject(e),B.error("[".concat(n,"][createTask][Fail] taskId=").concat(o))},complete:function(){k.set(t,"done")}},o=R.get(this),a="create".concat(n,"Task").concat(o?"Async":"");return(0,p.IN)(a,D.get(this)(i)),e}function V(){var e=this,t=E.get(this),n=x.get(this),r=A.get(this),i=M[r].functionName;L.on("".concat(r).concat(t,"success"),(function(t){O.get(e).call(e,t),(0,p.FE)({name:i,args:{success:n.success,fail:n.fail,complete:n.complete},res:t})})),L.on("".concat(r).concat(t,"fail"),(function(t){var r=N.get(e);r&&r.call(e,t),(0,p.FE)({name:i,args:{success:n.success,fail:n.fail,complete:n.complete},success:!1,errMsg:t.errMsg})}))}function G(e){var t=e.taskType,n=e.options,r=e.errMsg,i=e.success,o=void 0===i||i,a=e.dataLength,s=void 0===a?0:a,c=e.statusCode,u=void 0===c?"":c,l=e.responseDataLength,d=void 0===l?0:l,f=e.profile,p=void 0===f?{}:f,g=n.url,v=o?1:2,_=Date.now()-P.get(this),m=n.__skipDomainCheck__;_>=6e4&&B.error("reportTask costTime too long: ".concat(_,"ms, taskId=").concat(E.get(this))),(0,h.P)(M[t].functionName,g,v,_,r,u,m,s,d,p)}function H(e,t){var n="".concat(t.toLowerCase(),"TaskId"),r=e[n],o=e.state,s=e.header;if(delete e.state,delete e[n],e.cookies=s?(0,y.$)(s["Set-Cookie"]||s["set-cookie"]):[],L.emit("".concat(t).concat(r).concat(o),e),"success"===o||"fail"===o){var c=M[t].taskIdMap[r],u=x.get(c);if(!c)return;M[t].currentTaskCount-=1,M[t].taskQueue.length>0&&W.call(M[t].taskQueue.shift().item);var l=Promise.resolve((0,v.Y6)(u.data));if("Upload"===t){var d=0;"object"===a()(u.formData)&&null!==u.formData&&(d=JSON.stringify(u.formData).length),l=S({path:u.filePath}).then((function(e){return d+e.stats.size})).catch((function(){return d}))}var f=Promise.resolve((0,v.Y6)(e.data));if("Download"===t){var p=e.dataLength;f="number"==typeof p?Promise.resolve(p):S({path:e.filePath||e.tempFilePath||""}).then((function(e){return e.stats.size})).catch((function(){return 0}))}Promise.all([l,f]).then((function(n){var r=i()(n,2),a=r[0],s=r[1];G.call(c,{taskType:t,options:u,errMsg:e.errMsg,statusCode:e.statusCode,success:"success"===o,dataLength:a,responseDataLength:s,profile:e.profile})})),q.call(c)}}function Z(){var e=A.get(this);return M[e].currentTaskCount>=M[e].maxTaskCount}function q(){var e=A.get(this),t=E.get(this);delete M[e].taskIdMap[t],L.removeAllListeners("".concat(e).concat(t,"success")),L.removeAllListeners("".concat(e).concat(t,"fail")),L.removeAllListeners("".concat(e).concat(t,"complete"))}function z(e,t){var n=this,r=M[e]?M[e]:{currentTaskCount:0,maxTaskCount:10,taskQueue:[],functionName:"",taskIdMap:{}};(0,p.jQ)("on".concat(e,"TaskStateChange"),(function(t){H.call(n,t,e)})),M[e]=Object.assign(r,t)}},1445:(e,t,n)=>{"use strict";function r(e){return e?Array.isArray(e)?e:e.split(",").reduce((function(e,t){return/^\s*\S+=/.test(t)?e.push(t):e.length&&(e[e.length-1]+=t),e}),[]).map((function(e){return e.trim()})):[]}function i(e){var t={protocol:/^(.+)\:\/\//,host:/\:\/\/(.+?)[\?\#\s\/]/,path:/\w(\/.*?)[\?\#\s]/,query:/\?(.+?)[\#\/\s]/,hash:/\#(\w+)\s$/};return e+=" ",Object.keys(t).forEach((function(n){var r=t[n];t[n]="query"===n?r.exec(e)&&r.exec(e)[1].split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{}):r.exec(e)&&r.exec(e)[1]})),t}n.d(t,{$:()=>r,e:()=>i})},5770:(e,t,n)=>{"use strict";n.d(t,{Lo:()=>a,JM:()=>s,Ce:()=>o,KS:()=>c});var r=n(8392),i=n(2363),o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,r.r3)("operateWXData",a,{apiName:""})){if("operateWXData"===t);var s={api_name:a.apiName,data:a.reqData||{},operate_directly:e};n&&(s.plugin_appid=a.pluginId);var c={data:s,isImportant:!0===o,requestInQueue:!a.hasOwnProperty("requestInQueue")||Boolean(a.requestInQueue)};(0,r.gM)(Object.assign({},c,a),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess:function(e){i.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})}}},a=o(!0),s=o(!1),c=o(!0,void 0,!0)},9809:(e,t,n)=>{"use strict";var r=n(2984);n(8392),n(8947),(0,r.Z)("reportUserBehaviorBranchAnalytics","webapi_reportbranchanalytics",{},{},(function(e){return{itemList:[{branchId:e.branchId,branchDim:e.branchDim,eventType:e.eventType}]}})),(0,r.Z)("reportUserBehaviorBranchAnalyticsForDebug","webapi_reportbranchanalyticsfordebugtool",{},{},(function(e){return{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:e.reportType,query:e.query}]}}))},3618:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9947),i={};const o={lastShareTicket:null,get:function(e){return i[e]},set:function(e,t){var n=(0,r.M8)();return i[n]={shareKey:e,shareName:t},n}}},5401:(e,t,n)=>{"use strict";n.d(t,{l:()=>a});var r=n(8392),i=n(8250),o=(0,n(2984).Z)("getFriendCloudStorage","webapi_getfrienduserstorage",{},{},(function(e){var t=e.keyList;return{key:void 0===t?[]:t}}),(function(e){return e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,e})),delete e.user_item,delete e.rawData,e})),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.M)(e.keyList);t?(0,r.YG)("getFriendCloudStorage",e,t):o(e)}},4675:(e,t,n)=>{"use strict";n.d(t,{q:()=>u});var r=n(3618),i=n(8392),o=n(8250),a=n(2984),s=wxNativeConsole.createLogger("getGroupCloudStorage"),c=(0,a.Z)("getGroupCloudStorage","webapi_getgroupuserstorage",{},{},(function(e){var t=e.keyList,n=void 0===t?[]:t,i=e.shareTicket,o=r.Z.get(i),a=o.shareKey,c=o.shareName;return s.info("shareTicket=",i),s.info("shareInfo=",JSON.stringify(o)),{key:n,share_key:a,share_name:c}}),(function(e){return e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,e})),delete e.user_item,delete e.rawData,e})),u=function(e){var t=(0,o.M)(e.keyList);t?(0,i.YG)("getGroupCloudStorage",e,t):setTimeout((function(){e.shareTicket?r.Z.get(e.shareTicket)?(s.info("use args.shareTicket",e.shareTicket),c(e)):(0,i.YG)("getGroupCloudStorage",e,"参数 shareTicket 不正确"):r.Z.lastShareTicket&&r.Z.get(r.Z.lastShareTicket)?(s.info("use lastShareTicket",r.Z.lastShareTicket),c(Object.assign({shareTicket:r.Z.lastShareTicket},e))):(0,i.YG)("getGroupCloudStorage",e,"当前小程序不是从群分享卡片打开")}),1e3/60)}},4744:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});var r=n(8250),i=n(2984),o=n(8392),a=(0,i.Z)("getUserCloudStorage","webapi_getselfuserstorage",{},{},(function(e){var t=e.keyList;return{key:void 0===t?[]:t}}),(function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,delete e.rawData,e})),s=function(e){var t=(0,r.M)(e.keyList);t?(0,o.YG)("getUserCloudStorage",e,t):a(e)}},8250:(e,t,n)=>{"use strict";function r(e){if(!Array.isArray(e)||e.some((function(e){return"string"!=typeof e||0===e.length})))return"invalid keyList"}n.d(t,{M:()=>r})},6051:(e,t,n)=>{"use strict";n.d(t,{_o:()=>a,Ft:()=>s,LN:()=>c,Ks:()=>u});var r,i=n(8947),o=n(2363),a=(r=!1,(o.cj||o.wZ&&i.Z.clientVersion>=637865520)&&(r=!0),function(){return r}),s=function(){var e=!1;return o.cj&&i.Z.clientVersion>=385877248&&(e=!0),function(){return e}}(),c=function(){var e=!1;return o.cj&&i.Z.clientVersion>=385878314&&(e=!0),function(){return e}}(),u=function(){var e=!1;return o.cj&&i.Z.clientVersion>=402655232&&i.Z.clientVersion<=402655487&&(e=!0),function(){return e}}()},3383:(e,t,n)=>{"use strict";n.d(t,{oM:()=>a,dx:()=>s});var r=n(8392),i=n(8976),o=n(2363),a=(n(5770),__safeway__.apiSign.makeApiSign,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};delete e.operateDirectly,(0,r.IN)("launchApplicationForNative",e,{})}),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.J)("plugin_launchApplicationDirectly_operateDirectly")||delete e.operateDirectly,o.cj?(0,i.J)("launchApplicationDirectly")?(0,r.IN)("launchApplication",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("launchApplication","launchApplicationDirectly")}}):setTimeout((function(){return(0,r.YG)("launchApplicationDirectly",e,"no permission")})):(0,r.IN)("launchApplicationDirectly",e,{})}},8198:(e,t,n)=>{"use strict";n.d(t,{Hk:()=>$,Fl:()=>z,iy:()=>P,Be:()=>X,t4:()=>Q});var r,i,o=n(1503),a=n.n(o),s=n(3356),c=n.n(s),u=n(7015),l=n.n(u),d=n(4449),f=n(9947),p=n(3224),h=n(278),g=n(1484),v=n(8947),_=n(5770),m=n(968),y=n(2363),b=n(8976),w=n(7587),I=n(9954),S=n(7766),C=n(3082),T=n(3541),E=n(266),k=n(6318),x=n(733),A=(0,C.Vl)(_.JM),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"[_doNavigateToMiniProgram], args=".concat(JSON.stringify(e),", privateArgs=").concat(JSON.stringify(t),", ext=").concat(JSON.stringify(n)),w.s.log("[_doNavigateToMiniProgram], args=".concat(JSON.stringify(e),", privateArgs=").concat(JSON.stringify(t),", ext=").concat(JSON.stringify(n)));var r=Object.assign({},e);delete r.sourcetype,delete r.preScene,delete r.preSceneNote,delete r.mode,7!==v.Z.appType&&(delete r.scene,delete r.sceneNote);var i,o=(0,p.KL)();if(o?(r.privateExtraData=r.privateExtraData||{},r.privateExtraData.cookies=o):r.privateExtraData&&delete r.privateExtraData.cookies,i="string"==typeof r.path&&r.path.trim().length>0?Object.assign({},r,t,{path:(0,f.Pp)(r.path).trim()}):Object.assign({},r,t,{path:void 0}),"[_doNavigateToMiniProgram], finalArgs=".concat(JSON.stringify(i)),w.s.log("[_doNavigateToMiniProgram], finalArgs=".concat(JSON.stringify(i))),i.needTransferToWeChat&&(0,m.er)())return(0,d.FE)({name:"navigateToMiniProgram",args:i}),delete i.success,delete i.fail,delete i.complete,void(0,d.IN)("sdk_navigateToMiniProgram",i,n);(0,d.IN)("navigateToMiniProgram",i,n)},D=function(e,t,n,r){var i=[e,t,v.Z.appType+1e3,n+1e3,r].join(",");Reporter.reportKeyValue({key:"NavigateToMiniProgramAlert",value:i})},O=function(){return r||(r=new Promise((function(e){__sclEngine__.initScl((function(t){return e(t.mainRoot)}))}))),r},N=(i=c()(l().mark((function e(t){var n,r,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:n=e.sent,e.t0=M,e.next=e.t0===R.HALF_SCREEN_DIALOG_WITHOUT_LOGO?6:e.t0===R.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED?8:e.t0===R.HALF_SCREEN_DIALOG_WITH_SCORE?11:14;break;case 6:return r=n.append("navigateToMp",{title:t.oldWording,logo:"",name:"",type:R.HALF_SCREEN_DIALOG}),e.abrupt("break",16);case 8:return r=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:R.HALF_SCREEN_DIALOG}),t.expensiveWording&&t.expensiveWording.then((function(e){var t=e.used_friend_cnt_sub_desc;r.setData({desc:t||""})})),e.abrupt("break",16);case 11:return r=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:R.HALF_SCREEN_DIALOG}),t.expensiveWording&&t.expensiveWording.then((function(e){var t=e.score_sub_desc;r.setData({desc:t||""})})),e.abrupt("break",16);case 14:return r=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:M}),e.abrupt("break",16);case 16:return i=(0,S.vJ)((function(e){[S.ML.BottomBackButton,S.ML.NavigationBackInterceptionType,S.ML.NavigateBackCall].includes(e.type)&&r.handleCancel()})),e.next=19,new Promise((function(e){r.addListener("confirm",(function(){e({confirm:!0})})),r.addListener("cancel",(function(){e({confirm:!1})}))}));case 19:return o=e.sent,(0,S.J_)(i),e.abrupt("return",o);case 22:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)}),R={DEFAULT:0,DIALOG:1,HALF_SCREEN_DIALOG:2,HALF_SCREEN_DIALOG_WITHOUT_LOGO:3,HALF_SCREEN_DIALOG_WITH_SCORE:4,HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:5},M=R.DEFAULT;v.Z.onReady((function(){(0,I.b)({experimentId:"clicfg_navigation_use_scl_alert_v5",experimentType:"Expt",success:function(e){"[get scl] Use Scl Navigation Alert ".concat(JSON.stringify(e)),e&&void 0!==e.testConfig&&(M=Number(e.testConfig)||R.DEFAULT,Object.values(R).includes(M)||(M=R.DEFAULT),"Use Scl Navigation Alert ".concat(M))}})}));var L,B,F,j,W=(L=c()(l().mark((function e(t,n,r,i,o,s){var c,u,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==n){e.next=2;break}return e.abrupt("return");case 2:if(c=M!==R.DEFAULT&&"undefined"!=typeof __sclEngine__&&(y.gm||y.cj||y.wZ)&&o,u=c?M:R.DEFAULT,e.prev=4,!c){e.next=11;break}return e.next=8,N(a()(a()({},o),{},{oldWording:t,expensiveWording:s}));case 8:f=e.sent,e.next=14;break;case 11:return e.next=13,(0,d.bb)("showModal",{title:t,content:"",confirmText:"允许",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:"#7D90A9",cancelColor:"#000000",cancelColorDark:"#AAAAAA"});case 13:f=e.sent;case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(4),D(3,r,i,u),e.t0;case 20:if(!f.confirm){e.next=25;break}D(1,r,i,u),e.next=27;break;case 25:throw D(2,r,i,u),new Error("cancel");case 27:case"end":return e.stop()}}),e,null,[[4,16]])}))),function(e,t,n,r,i,o){return L.apply(this,arguments)}),U=function(e){return new Promise((function(t,n){"[_getNavigateWxAppInfo] appId=".concat(e.appId),w.s.log("[_getNavigateWxAppInfo] appId=".concat(e.appId)),(0,_.JM)({apiName:"webapi_getnavigatewxaappinfo",reqData:{target_appid:e.appId},success:function(e){var n=JSON.parse(e.respData.data),r=n.action_code,i=n.skip_local_check,o=Boolean(n.runtime_sdk_whitelist);t({actionCode:r,skipLocalCheck:i,reason:n.reason,wording:n.wording,appType:n.apptype,newWording:n.new_wording,popupInfo:n.pop_up_info,needTransferToWeChat:o}),"[operateWXData][webapi_getnavigatewxaappinfo][success] data=".concat(e.respData.data)},fail:function(e){n(e),"[operateWXData][webapi_getnavigatewxaappinfo][fail], errMsg=".concat(e.errMsg)}})}))},V=1,G=2,H=(B=c()(l().mark((function e(t){var n,r,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.t0=M,e.next=e.t0===R.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED?4:e.t0===R.HALF_SCREEN_DIALOG_WITH_SCORE?6:8;break;case 4:return n.push(G),e.abrupt("break",9);case 6:return n.push(V),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:if(n.length){e.next=11;break}return e.abrupt("return",{});case 11:return"[_getNavigateWxAppDescInfo] appId=".concat(t.appId),w.s.log("[_getNavigateWxAppDescInfo] appId=".concat(t.appId)),e.prev=13,e.next=16,A({apiName:"webapi_getnavigatewxaappdesc",reqData:{target_appid:t.appId,desc_type_list:n}});case 16:return r=e.sent,i=r.respData,"[operateWXData][webapi_getnavigatewxaappdesc][success] data=".concat(i.data),o=JSON.parse(i.data),e.abrupt("return",o);case 23:return e.prev=23,e.t1=e.catch(13),"[operateWXData][webapi_getnavigatewxaappdesc][fail], errMsg=".concat(e.t1.message),e.abrupt("return",{});case 27:case"end":return e.stop()}}),e,null,[[13,23]])}))),function(e){return B.apply(this,arguments)}),Z=(F=[],v.Z.onReady((function(){Array.isArray(v.Z.navigateToMiniProgramAppIdList)&&(F=v.Z.navigateToMiniProgramAppIdList,(0,b.J)("openWxappLimit5")&&F.splice(5))})),function(e,t){return new Promise((function(n,r){var i=(0,m.KU)("navigateToMiniProgramConfig");!1===i||y.gm?t?n():F.indexOf(e)>-1?n({sourcetype:4}):r({errMsg:'appId "'.concat(e,'" is not in navigateToMiniProgramAppIdList')}):!0===i?n():"unknown"===i&&n({sourcetype:4})}))}),q=(j=c()(l().mark((function e(t){var n,r,i,o,s,c,u,f,p,h,g,_,m,y;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"[_checkBeforeNavigateToMiniProgram] appId=".concat(t.appId),w.s.log("[_checkBeforeNavigateToMiniProgram] appId=".concat(t.appId)),n=H(t),M!==R.DEFAULT&&O(),e.prev=4,e.next=7,U(t);case 7:r=e.sent,e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),"[_getNavigateWxAppInfo][reject] errMsg=".concat(e.t0.errMsg||e.t0.message),e.abrupt("return",{});case 14:if(o=(i=r).actionCode,s=i.skipLocalCheck,c=i.reason,u=i.wording,f=i.appType,p=i.newWording,h=i.popupInfo,g=i.needTransferToWeChat,_=1===o,"[_getNavigateWxAppInfo][resolve] actionCode=".concat(o,", skipLocalCheck=").concat(s,", reason=").concat(c,", wording=").concat(u,", appType=").concat(f,", needTransferToWeChat=").concat(g),w.s.log("[_getNavigateWxAppInfo][resolve] actionCode=".concat(o,", skipLocalCheck=").concat(s,", reason=").concat(c,", wording=").concat(u,", appType=").concat(f,", needTransferToWeChat=").concat(g)),1===o||2===o){e.next=21;break}throw h?(Reporter.reportKeyValue({key:"WeAppNavBan",value:[v.Z.appType+1e3,v.Z.appLaunchInfo.scene,33,3302,0,1,c,"跳转跳出",(0,E._getCurrentNetworkType)()].join(",")}),(0,d.IN)("showModal",{showCancel:!0,content:h.desc,confirmText:h.confirm_wording,cancelText:h.cancel_wording,success:function(e){var t=e.confirm,n=h.confirm_url;t&&(0,T.n)({url:n}),Reporter.reportKeyValue({key:"WeAppNavBan",value:[v.Z.appType+1e3,v.Z.appLaunchInfo.scene,33,3302,t?1:2,2,c,"跳转跳出",(0,E._getCurrentNetworkType)()].join(",")})}})):u&&(0,d.IN)("showModal",{content:u,showCancel:!1}),new Error(c);case 21:if(1===o||!(0,k.S)()){e.next=28;break}if(7===f){e.next=27;break}throw(0,x.showToast)({icon:"none",title:"暂不支持当前功能"}),new Error("not supported");case 27:_=!0;case 28:return e.prev=28,e.next=31,Z(t.appId,s);case 31:if(m=e.sent,_){e.next=35;break}return e.next=35,W(u,o,t.appId,f,p,n);case 35:return e.abrupt("return",a()(a()({},m),{},{needTransferToWeChat:g}));case 38:throw e.prev=38,e.t1=e.catch(28),y=e.t1.errMsg||e.t1.message,new Error(y);case 42:case"end":return e.stop()}}),e,null,[[4,10],[28,38]])}))),function(e){return j.apply(this,arguments)}),z=(0,C.NX)("_checkBeforeNavigateToMiniProgram",q),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("navigateToMiniProgram",e,{appId:""})&&("[_navigateToMiniProgram] appId=".concat(e.appId),w.s.log("[_navigateToMiniProgram] appId=".concat(e.appId)),q({appId:e.appId}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"[_checkBeforeNavigateToMiniProgram][resolve], res=".concat(JSON.stringify(t)),w.s.log("[_checkBeforeNavigateToMiniProgram][resolve], res=".concat(JSON.stringify(t))),P(e,{sourcetype:t.sourcetype,needTransferToWeChat:t.needTransferToWeChat})}),(function(t){var n=t.errMsg||t.message;"[_checkBeforeNavigateToMiniProgram][reject], errMsg=".concat(n),w.s.log("[_checkBeforeNavigateToMiniProgram][reject], errMsg=".concat(n)),(0,d.YG)("navigateToMiniProgram",e,n),"cancel"!==n&&Reporter.errorReport({key:"appServiceSDKScriptError",error:t,extend:"at checking before navigate to miniprogram"})})))},K=!1,J=0;(0,d.Ld)("tapAnyWhere",(function(e){J=e.timeStamp,K=!0})),(0,h.J)((function(){J=0,K=!1}));var $=function(){J=Date.now(),K=!0},X=function(e){var t=v.Z.accountInfo.appId;0===v.Z.appType&&"wx308bd2aeb83d3345"!==t&&"wxc98889eca359c1e5"!==t?K?(Y(e),(0,g.Y)({name:"navigateToMiniProgram",scene:0,strategy:0,timeDiffToLastTap:0===J?-2:Date.now()-J})):(0,d.YG)("navigateToMiniProgram",e,"can only be invoked by user TAP gesture."):Y(e)},Q=function(e){(0,b.J)("navigateToMiniProgramDirectly")?P(e,e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("navigateToMiniProgram","navigateToMiniProgramDirectly")}}):(0,d.YG)("navigateToMiniProgramDirectly",e,"no permission")}},6903:(e,t,n)=>{"use strict";n.d(t,{JB:()=>h,vS:()=>i,Yo:()=>o.Y,n8:()=>o.n,Bx:()=>l});var r=n(8392),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.IN)("openDeliveryList",e,{})},o=n(3541),a=n(8676),s=n.n(a),c=!1,u=[],l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.webviewId||!t.data){console.error("invalid arguments");var n={errMsg:"sendDataToH5: arguments data or webviewId cannot be null"};return"function"==typeof t.fail&&t.fail(n),void("function"==typeof t.complete&&t.complete(n))}"object"===s()(t.data)&&(t.data=JSON.stringify(t.data)),c?u.push(t):(c=!0,(0,r.IN)("sendDataToH5",t,{afterAll:function(){if(c=!1,u.length){var t=u.shift();e(t)}}}))},d=!1,f=[];function p(e){for(var t=0;t<f.length;t++)f[t](e)}var h=function(e){if("function"==typeof e){f.push((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.webviewId&&t.data?("string"==typeof t.data&&(t.data=JSON.parse(t.data)),e(t)):console.error("invalid arguments in onH5Data callback")})),d||((0,r.jQ)("onH5Data",p),d=!0)}}},3541:(e,t,n)=>{"use strict";n.d(t,{Y:()=>s,n:()=>c});var r=n(8392),i=n(9947),o=n(3638),a=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!0!==o.Z.openUrlLock)if(t.url=t.url||"",(0,i.mQ)(t.url))o.Z.openUrlLock=!0,(0,r.IN)(e,t,{afterAll:function(){o.Z.openUrlLock=!1}});else{console.error("invalid url",t.url);var n={errMsg:"".concat(e,': invalid url "').concat(t.url,'"')};"function"==typeof t.fail&&t.fail(n),"function"==typeof t.complete&&t.complete(n)}}},s=a("openUrl"),c=a("private_openUrl")},3624:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});var r=function(e){Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},5405:(e,t,n)=>{"use strict";n.d(t,{P:()=>d});var r=n(266),i=n(8392),o=n(968),a=n(4159),s=0,c=[],u=function(){var e=JSON.stringify({business:"mmbizwxaservicequality",dataArray:c,appType:Reporter.getAppType()},null,2);(0,i.IN)("reportRealtimeAction",{actionData:e}),c=[]},l=function(e){var t="";return Object.keys(e).forEach((function(n,r){try{var i="".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(e[n]));0!==r&&(t+="&"),t+=i}catch(e){}})),t},d=function(e,t,n,i,d,f,p){var h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},_="",m="";if((0,o.aI)()&&(m=l(a.Z.query)),void 0!==__appServiceEngine__){var y=__appServiceEngine__.getCurrentPages();if(y&&y.length>0){var b=y[y.length-1];b&&(_=b.route,m=b.__displayReporter&&b.__displayReporter.showOptions&&b.__displayReporter.showOptions.query)}}var w=[e,t,n,i,d,Reporter.getAppType(),f,h,(0,r._getCurrentNetworkType)(),_,m,g,l(v)].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"NetworkAPI",value:w}),Reporter.reportIDKey({key:"".concat(e,"_").concat(1===n?"ok":"fail")}),c.push([e,t,n,f||"",i,d,(0,r._getCurrentNetworkType)(),p?"1":"0",Reporter.getAppType(),h].map((function(e){var t;try{t=encodeURIComponent(e)}catch(n){t=e}return t})).join(",")),Date.now()-s>=6e4&&(s=Date.now(),setTimeout(u,6e4))}},1484:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i});var r=n(3638),i=function(e){var t,n=e.name,i=e.scene,o=e.strategy,a=e.timeDiffToLastTap,s=void 0===a?0:a;void 0!==__appServiceEngine__&&(t=__appServiceEngine__.getCurrentPagesByDomain("").find((function(e){return e.__wxWebviewId__===r.Z.currentWebviewId}))||{});var c=[n,i,Reporter.getAppType(),t?t.route:"",o||0,s].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"RecycledAPI",value:c})}},1886:(e,t,n)=>{var r=n(8676).default,i="undefined"!=typeof __Function__?__Function__:globalThis.Function;e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===r(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./entry.js")}({"./entry.js":function(e,t,n){(function(t){var r=n("./node_modules/protocol-buffers/index.js"),i=n("./node_modules/protocol-buffers-encodings/index.js"),o=n("./node_modules/varint/index.js"),a=function(e,t){var n=new Uint8Array(8),r=t,i=0,o=0,s=0;do{o|=(127&e[r])<<s,(s+=7)>=8&&(n[i]=255&o,o>>=8,s-=8,i++)}while(e[r++]>=128);return n[i]=255&o,a.bytes=r-t,n};function s(e,t){for(var n=0,r=t;r<e.length;r++){if(!(128&e[r]))return n+1;n++}return n}var c,u=function(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}};i.uint64=(c=o.encode,u(0,c,(function e(t,n){var r=s(t,n);if(r>=7&&NativeGlobal.decodeUint64Array){t=a(t,n);var i=NativeGlobal.decodeUint64Array(t);e.bytes=r}else i=o.decode(t,n),e.bytes=o.decode.bytes;return i}),(function(e){return e<0?10:o.encodingLength(e)}))),i.int64=u(0,(function e(t,n,r){if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)throw new Error("number too large, not supported yet");if(t<0){var i=r+9;for(o.encode(-1*t,n,r),n[r+=o.encode.bytes-1]=128|n[r];r<i-1;)n[++r]=255;n[i]=1,e.bytes=10}else o.encode(t,n,r),e.bytes=o.encode.bytes;return n}),(function e(n,r){if(((u=o.decode(n,r))>Number.MAX_SAFE_INTEGER||u<Number.MIN_SAFE_INTEGER)&&NativeGlobal.decodeUint64Array){var i=s(n,r),c=10==i;c&&(n[9+r]=127&n[9+r]),n=a(n,r);var u=NativeGlobal.decodeUint64Array(n);return e.bytes=i,c?"-"+u:u}if(u>=Math.pow(2,63)){for(var l=9;255===n[r+l-1];)l--;var d=new t(l=l||9);n.copy(d,0,r,r+l),d[l-1]=127&d[l-1],u=-1*o.decode(d,0),e.bytes=10}else e.bytes=o.decode.bytes;return u}),(function(e){return e<0?10:o.encodingLength(e)})),e.exports=function(e){var n=r(e);return Object.keys(n).forEach((function(e){var r;n[e].decode&&(n[e].decode=(r=n[e].decode,function e(n){"[object Uint8Array]"==Object.prototype.toString.call(n)&&n.__proto__!=t.__proto__&&(n.__proto__=t.prototype);var i=r.apply(this,arguments);return e.bytes=r.bytes,i}))})),n},e.exports.fixBuffer=function(e){return"[object Uint8Array]"==Object.prototype.toString.call(e)&&e.__proto__!=t.__proto__&&(e.__proto__=t.prototype),e}}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/base64-js/index.js":function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,c=n-i;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(e,t,n){"use strict";(function(e){var r=n("./node_modules/base64-js/index.js"),i=n("./node_modules/ieee754/index.js"),o=n("./node_modules/isarray/index.js");function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function y(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return G(U(t,e.length-n),e,n,r)}function w(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function I(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return G(V(t),e,n,r)}function C(e,t,n,r){return G(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){o=u[d],a=l[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return I(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=W(e[o]);return i}function D(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function L(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,o){return o||L(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||L(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||N(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);N(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:U(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/generate-function/index.js":function(e,t,n){for(var r=n("./node_modules/util/util.js"),o=n("./node_modules/is-property/is-property.js"),a=/[\{\[]/,s=/[\}\]]/,c=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],u={},l=0;l<c.length;l++)u[c[l]]=!0;var d=function(e){return o(e)&&!u.hasOwnProperty(e)},f={s:function(e){return""+e},d:function(e){return""+Number(e)},o:function(e){return JSON.stringify(e)}},p=function(){var e=[],t=0,n={},c=function(n){for(var r="";r.length<2*t;)r+="  ";e.push(r+n)},u=function(e){return s.test(e.trim()[0])&&a.test(e[e.length-1])?(t--,c(e),void t++):a.test(e[e.length-1])?(c(e),void t++):s.test(e.trim()[0])?(t--,void c(e)):void c(e)},l=function e(t){if(!t)return e;if(1===arguments.length&&t.indexOf("\n")>-1)for(var n=t.trim().split("\n"),i=0;i<n.length;i++)u(n[i].trim());else u(r.format.apply(r,arguments));return e};return l.scope={},l.formats=f,l.sym=function(e){return e&&d(e)||(e="tmp"),n[e]||(n[e]=0),e+(n[e]++||"")},l.property=function(e,t){return 1===arguments.length&&(t=e,e=""),o(t+="")?e?e+"."+t:t:e?e+"["+JSON.stringify(t)+"]":JSON.stringify(t)},l.toString=function(){return e.join("\n")},l.toFunction=function(t){t||(t={});var n="return ("+e.join("\n")+")";Object.keys(l.scope).forEach((function(e){t[e]||(t[e]=l.scope[e])}));var r=Object.keys(t).map((function(e){return e})),o=r.map((function(e){return t[e]}));return i.apply(null,r.concat(n)).apply(null,o)},arguments.length&&l.apply(null,arguments),l};p.formats=f,e.exports=p},"./node_modules/generate-object-property/index.js":function(e,t,n){var r=n("./node_modules/is-property/is-property.js"),i=function(e,t){return r(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};i.valid=r,i.property=function(e){return r(e)?e:JSON.stringify(e)},e.exports=i},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}},"./node_modules/is-property/is-property.js":function(e,t,n){"use strict";e.exports=function(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}},"./node_modules/isarray/index.js":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"./node_modules/os-browserify/browser.js":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},"./node_modules/process/browser.js":function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/protocol-buffers-encodings/index.js":function(e,t,n){(function(e){var r=n("./node_modules/varint/index.js"),i=n("./node_modules/signed-varint/index.js");function o(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}}function a(t){return e.isBuffer(t)?t.length:e.byteLength(t)}t.make=o,t.name=function(e){for(var n=Object.keys(t),r=0;r<n.length;r++)if(t[n[r]]===e)return n[r];return null},t.skip=function(e,t,n){switch(e){case 0:return r.decode(t,n),n+r.decode.bytes;case 1:return n+8;case 2:var i=r.decode(t,n);return n+r.decode.bytes+i;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4}throw new Error("Unknown wire type: "+e)},t.bytes=o(2,(function t(n,i,o){var s=o,c=a(n);return r.encode(c,i,o),o+=r.encode.bytes,e.isBuffer(n)?n.copy(i,o):i.write(n,o,c),t.bytes=(o+=c)-s,i}),(function e(t,n){var i=n,o=r.decode(t,n);n+=r.decode.bytes;var a=t.slice(n,n+o);return n+=a.length,e.bytes=n-i,a}),(function(e){var t=a(e);return r.encodingLength(t)+t})),t.string=o(2,(function t(n,i,o){var a=o,s=e.byteLength(n);return r.encode(s,i,o,"utf-8"),o+=r.encode.bytes,i.write(n,o,s),t.bytes=(o+=s)-a,i}),(function e(t,n){var i=n,o=r.decode(t,n);n+=r.decode.bytes;var a=t.toString("utf-8",n,n+o);return e.bytes=(n+=o)-i,a}),(function(t){var n=e.byteLength(t);return r.encodingLength(n)+n})),t.bool=o(0,(function e(t,n,r){return n[r]=t?1:0,e.bytes=1,n}),(function e(t,n){var r=t[n]>0;return e.bytes=1,r}),(function(){return 1})),t.int32=o(0,(function e(t,n,i){return r.encode(t<0?t+4294967296:t,n,i),e.bytes=r.encode.bytes,n}),(function e(t,n){var i=r.decode(t,n);return e.bytes=r.decode.bytes,i>2147483647?i-4294967296:i}),(function(e){return r.encodingLength(e<0?e+4294967296:e)})),t.int64=o(0,(function e(t,n,i){if(t<0){var o=i+9;for(r.encode(-1*t,n,i),n[i+=r.encode.bytes-1]=128|n[i];i<o-1;)n[++i]=255;n[o]=1,e.bytes=10}else r.encode(t,n,i),e.bytes=r.encode.bytes;return n}),(function t(n,i){var o=r.decode(n,i);if(o>=Math.pow(2,63)){for(var a=9;255===n[i+a-1];)a--;a=a||9;var s=e.allocUnsafe(a);n.copy(s,0,i,i+a),s[a-1]=127&s[a-1],o=-1*r.decode(s,0),t.bytes=10}else t.bytes=r.decode.bytes;return o}),(function(e){return e<0?10:r.encodingLength(e)})),t.sint32=t.sint64=o(0,i.encode,i.decode,i.encodingLength),t.uint32=t.uint64=t.enum=t.varint=o(0,r.encode,r.decode,r.encodingLength),t.fixed64=t.sfixed64=o(1,(function e(t,n,r){return t.copy(n,r),e.bytes=8,n}),(function e(t,n){var r=t.slice(n,n+8);return e.bytes=8,r}),(function(){return 8})),t.double=o(1,(function e(t,n,r){return n.writeDoubleLE(t,r),e.bytes=8,n}),(function e(t,n){var r=t.readDoubleLE(n);return e.bytes=8,r}),(function(){return 8})),t.fixed32=o(5,(function e(t,n,r){return n.writeUInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readUInt32LE(n);return e.bytes=4,r}),(function(){return 4})),t.sfixed32=o(5,(function e(t,n,r){return n.writeInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readInt32LE(n);return e.bytes=4,r}),(function(){return 4})),t.float=o(5,(function e(t,n,r){return n.writeFloatLE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readFloatLE(n);return e.bytes=4,r}),(function(){return 4}))}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers-schema/index.js":function(e,t,n){var r=n("./node_modules/protocol-buffers-schema/parse.js"),i=n("./node_modules/protocol-buffers-schema/stringify.js");e.exports=r,e.exports.parse=r,e.exports.stringify=i},"./node_modules/protocol-buffers-schema/parse.js":function(e,t,n){var r=n("./node_modules/protocol-buffers-schema/tokenize.js"),i=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],o=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var n=e.shift();if("("===n&&(n=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[n]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},a=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var n=e.shift();t.required="required"===n,t.repeated="repeated"===n,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=o(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},s=function(e){for(var t={enums:[],options:{},messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(a(e));break;case"enum":t.enums.push(h(e));break;case"message":t.messages.push(l(e));break;case"extensions":t.extensions=u(e);break;case"oneof":e.shift();var n=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var r=a(e);r.oneof=n,t.fields.push(r)}e.shift();break;case"extend":t.extends.push(c(e));break;case";":e.shift();break;case"reserved":for(e.shift();";"!==e[0];)e.shift();break;case"option":var i=g(e);if(void 0!==t.options[i.name])throw new Error("Duplicate option "+i.name);t.options[i.name]=i.value;break;default:e.unshift("optional"),t.fields.push(a(e))}return t},c=function(e){return{name:e[1],message:l(e)}},u=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var n=e.shift();if("max"===n&&(n=536870911),n=Number(n),isNaN(n))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:n}},l=function(e){e.shift();var t=1,n=[],r={name:e.shift(),options:{},enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),n=s(n),r.enums=n.enums,r.messages=n.messages,r.fields=n.fields,r.extends=n.extends,r.extensions=n.extensions,r.options=n.options,r;n.push(e.shift())}if(t)throw new Error("No closing tag for message")},d=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},f=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},p=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var n={value:null,options:{}};return n.value=Number(e.shift()),"["===e[0]&&(n.options=o(e)),e.shift(),{name:t,val:n}},h=function(e){e.shift();var t={},n={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),n;if("option"!==e[0]){var r=p(e);n.values[r.name]=r.val}else t=g(e),n.options[t.name]=t.value}throw new Error("No closing tag for enum")},g=function(e){for(var t=null,n=null,r=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:n};switch(e[0]){case"option":e.shift();var i="("===e[0];if(i&&e.shift(),t=e.shift(),i){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(n=r(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(n))throw new Error("Unexpected value for option optimize_for: "+n);"{"===n&&(n=v(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},v=function e(t){for(var n=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},r={};t.length;){if("}"===t[0])return t.shift(),r;var i="("===t[0];i&&t.shift();var o=t.shift();if(i){if(")"!==t[0])throw new Error("Expected ) but found "+t[0]);t.shift()}var a=null;switch(t[0]){case":":if(void 0!==r[o])throw new Error("Duplicate option map key "+o);t.shift(),"{"===(a=n(t.shift()))&&(a=e(t)),r[o]=a,";"===t[0]&&t.shift();break;case"{":if(t.shift(),a=e(t),void 0===r[o]&&(r[o]=[]),!Array.isArray(r[o]))throw new Error("Duplicate option map key "+o);r[o].push(a);break;default:throw new Error("Unexpected token in option map: "+t[0])}}throw new Error("No closing tag for option map")},_=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},m=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var n=g(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value;break;case"rpc":t.methods.push(y(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},y=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var n=g(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value}throw new Error("No closing tag for rpc")};e.exports=function(e){for(var t=r(e.toString()),n=0;n<t.length;n++){var o;if(/^("|')([^'"]*)$/.test(t[n]))for(o=1===t[n].length?n+1:n;o<t.length;o++)if(/^[^'"\\]*(?:\\.[^'"\\]*)*("|')$/.test(t[o])){t=t.slice(0,n).concat(t.slice(n,o+1).join("")).concat(t.slice(o+1));break}}for(var a={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},s=!0;t.length;){switch(t[0]){case"package":a.package=d(t);break;case"syntax":if(!s)throw new Error("Protobuf syntax version should be first thing in file");a.syntax=f(t);break;case"message":a.messages.push(l(t));break;case"enum":a.enums.push(h(t));break;case"option":var u=g(t);if(a.options[u.name])throw new Error("Duplicate option "+u.name);a.options[u.name]=u.value;break;case"import":a.imports.push(_(t));break;case"extend":a.extends.push(c(t));break;case"service":a.services||(a.services=[]),a.services.push(m(t));break;default:throw new Error("Unexpected token: "+t[0])}s=!1}return a.extends.forEach((function(e){a.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),a.messages.forEach((function(e){e.fields.forEach((function(t){var n,r,o,s;if(t.options&&"true"===t.options.packed&&-1===i.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((n=t.type.split(".")).length>2)throw new Error("what is this?");if(r=n[0],o=n[1],a.messages.some((function(e){if(e.name===r)return s=e,e})),s&&s.enums&&s.enums.some((function(e){return e.name===o})))return}throw new Error("Fields of type "+t.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}}))})),a}},"./node_modules/protocol-buffers-schema/stringify.js":function(e,t){var n=function(e,t){var n=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(n="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(n="");var r=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return r&&(r=" ["+r+"]"),t.push((n?n+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+r+";"),t},i=function e(t,r){r.push("message "+t.name+" {"),t.options||(t.options={}),s(t.options,r),t.enums||(t.enums=[]),t.enums.forEach((function(e){r.push(o(e,[]))})),t.messages||(t.messages=[]),t.messages.forEach((function(t){r.push(e(t,[]))}));var i={};return t.fields||(t.fields=[]),t.fields.forEach((function(e){e.oneof?(i[e.oneof]||(i[e.oneof]=[]),i[e.oneof].push(n(e,[]))):r.push(n(e,[]))})),Object.keys(i).forEach((function(e){i[e].unshift("oneof "+e+" {"),i[e].push("}"),r.push(i[e])})),r.push("}",""),r},o=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var n=s(e.options,[]);return n.length>1&&t.push(n.slice(0,-1)),Object.keys(e.values).map((function(n){var r=a(e.values[n]);t.push([n+" = "+r+";"])})),t.push("}",""),t},a=function(e,t){var n=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return n&&(n=" ["+n+"]"),e.value+n},s=function(e,t){var n=Object.keys(e);return n.forEach((function(n){var i=e[n];~n.indexOf(".")&&(n="("+n+")");var o=r(i);"object"===o?(i=c(i,[])).length&&t.push("option "+n+" = {",i,"};"):("string"===o&&"optimize_for"!==n&&(i='"'+i+'"'),t.push("option "+n+" = "+i+";"))})),n.length>0&&t.push(""),t},c=function e(t,n){return Object.keys(t).forEach((function(i){var o=t[i],a=r(o);"object"===a?Array.isArray(o)?o.forEach((function(t){(t=e(t,[])).length&&n.push(i+" {",t,"}")})):(o=e(o,[])).length&&n.push(i+" {",o,"}"):("string"===a&&(o='"'+o+'"'),n.push(i+": "+o))})),n},u=function(e,t){var n="rpc "+e.name+"(";e.client_streaming&&(n+="stream "),n+=e.input_type+") returns (",e.server_streaming&&(n+="stream "),n+=e.output_type+")",e.options||(e.options={});var r=s(e.options,[]);return r.length>1?t.push(n+" {",r.slice(0,-1),"}"):t.push(n+";"),t},l=function e(t){return function(n){return Array.isArray(n)?n.map(e(t+"  ")).join("\n"):t+n}};e.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),s(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){o(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){i(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),s(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(u(e,[]))})),t.push("}","")}(e,t)})),t.map(l("")).join("\n")}},"./node_modules/protocol-buffers-schema/tokenize.js":function(e,t){e.exports=function(e){var t,n=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(n).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(n).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))}},"./node_modules/protocol-buffers/compile-to-js.js":function(e,t,n){var r=n("./node_modules/os-browserify/browser.js"),i={type:!0,message:!0,name:!0,buffer:!0,encode:!0,decode:!0,encodingLength:!0,dependencies:!0};function o(e){return"function"==typeof e.encode}e.exports=function(e){var t="";return t+="// This file is auto generated by the protocol-buffers compiler"+r.EOL,t+=r.EOL,t+="/* eslint-disable quotes */"+r.EOL,t+="/* eslint-disable indent */"+r.EOL,t+="/* eslint-disable no-redeclare */"+r.EOL,t+="/* eslint-disable camelcase */"+r.EOL,t+=r.EOL,t+="// Remember to `npm install --save protocol-buffers-encodings`"+r.EOL,t+="var encodings = require('protocol-buffers-encodings')"+r.EOL,t+="var varint = encodings.varint"+r.EOL,t+="var skip = encodings.skip"+r.EOL,t+=r.EOL,function e(n,s,c){var u=Object.keys(n).filter((function(e){return!i[e]&&o(n[e])}));Object.keys(n).filter((function(e){if(i[e])return false;return!o(n[e])})).forEach((function(e){t+=c+s+"."+e+" = "+function(e,t){var n=Object.keys(e);if(!n.every((function(t){return"number"==typeof e[t]&&/^[a-z][a-z0-9]+$/i.test(t)})))return JSON.stringify(e,null,2).replace(/\n/g,r.EOL)+r.EOL;var i="{"+r.EOL;return n.forEach((function(o,a){i+=t+"  "+o+": "+e[o]+(a<n.length-1?",":"")+r.EOL})),i+t+"}"+r.EOL}(n[e],c)+r.EOL})),u.forEach((function(e){t+=c+"var "+e+" = "+s+"."+e+" = {"+r.EOL,t+=c+"  buffer: true,"+r.EOL,t+=c+"  encodingLength: null,"+r.EOL,t+=c+"  encode: null,"+r.EOL,t+=c+"  decode: null"+r.EOL,t+=c+"}"+r.EOL,t+=r.EOL})),u.forEach((function(e){t+=c+"define"+e+"()"+r.EOL})),u.length&&(t+=r.EOL);u.forEach((function(i){t+=c+"function define"+i+" () {"+r.EOL,e(n[i],i,c+"  "),t+=c+"  "+i+".encodingLength = encodingLength"+r.EOL,t+=c+"  "+i+".encode = encode"+r.EOL,t+=c+"  "+i+".decode = decode"+r.EOL+r.EOL,t+=c+"  "+a(n[i].encodingLength,c+"  ")+r.EOL+r.EOL,t+=c+"  "+a(n[i].encode,c+"  ")+r.EOL+r.EOL,t+=c+"  "+a(n[i].decode,c+"  ")+r.EOL,t+=c+"}"+r.EOL+r.EOL}))}(e,"exports",""),t+=a(n("./node_modules/protocol-buffers/compile.js").defined,"")+r.EOL;function a(e,t){return e.toString().split("\n").map((function(e,n){return n?t+e:e.replace(/(function \w+)\(/,"$1 (")})).join("\n")}}},"./node_modules/protocol-buffers/compile.js":function(e,t,n){(function(t){var r=n("./node_modules/protocol-buffers-encodings/index.js"),i=n("./node_modules/varint/index.js"),o=n("./node_modules/generate-object-property/index.js"),a=n("./node_modules/generate-function/index.js"),s=function(e){return null!=e&&("number"!=typeof e||!isNaN(e))},c=function(e,t){if(e.map)return"{}";if(e.repeated)return"[]";switch(e.type){case"string":return function(e){try{return!!e&&"string"==typeof JSON.parse(e)}catch(e){return!1}}(t)?t:'""';case"bool":return"true"===t?"true":"false";case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return""+Number(t||0);default:return"null"}};e.exports=function(e,n,u){var l={},d={},f={},p=function(e,t){return u?(n=t[e],(i=r.name(n))?"encodings."+i:n.name?n.name:"encodings.enum"):"enc["+e+"]";var n,i};!function e(t,n){t.enums&&t.enums.forEach((function(t){t.id=n+(n?".":"")+t.name,d[t.id]=t,e(t,t.id)})),t.messages&&t.messages.forEach((function(r){r.id=n+(n?".":"")+r.name,l[r.id]=r,r.fields.forEach((function(e){if(e.map){var r="Map_"+e.map.from+"_"+e.map.to,i={name:r,enums:[],messages:[],fields:[{name:"key",type:e.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:e.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:n+(n?".":"")+r};l[i.id]||(l[i.id]=i,t.messages.push(i)),e.type=r,e.repeated=!0}})),e(r,r.id)}))}(e,"");var h=function(n,u){n.messages.forEach((function(e){u[e.name]=g(e.name,n.id)})),n.enums.forEach((function(e){u[e.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(e.values)})),u.type=2,u.message=!0,u.name=n.name;var l={};n.fields.forEach((function(e){e.oneof&&(l[e.oneof]||(l[e.oneof]=[]),l[e.oneof].push(e.name))}));var d=n.fields.map((function(e){return g(e.type,n.id)})),f=d.filter((function(e,t){return d.indexOf(e)===t})),h=d.map((function(e){return f.indexOf(e)})),v=function(e){for(var t=0;t<d.length;t++)e(d[t],n.fields[t],o("obj",n.fields[t].name),t)},_=a()("function encodingLength (obj) {")("var length = 0");Object.keys(l).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=l[e].map((function(e){return"+defined("+o("obj",e)+")"})).join(" + ");_("if ((%s) > 1) throw new Error(%s)",n,t)})),v((function(e,t,n,r){var o=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,a=i.encodingLength(t.tag<<3|e.type);t.required?_("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):_("if (defined(%s)) {",n),t.map&&(_()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),o?(_()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("var len = %s.encodingLength(%s)",p(h[r],f),n+"[i]")("packedLen += len"),e.message&&_("packedLen += varint.encodingLength(len)"),_("}")("if (packedLen) {")("length += %d + packedLen + varint.encodingLength(packedLen)",a)("}")):(t.repeated&&(_("for (var i = 0; i < %s.length; i++) {",n),_("if (!defined(%s)) continue",n+="[i]")),_("var len = %s.encodingLength(%s)",p(h[r],f),n),e.message&&_("length += varint.encodingLength(len)"),_("length += %d + len",a),t.repeated&&_("}")),t.required||_("}")})),_()("return length")("}"),_=_.toFunction({defined:s,varint:i,enc:f});var m=a()("function encode (obj, buf, offset) {")("if (!offset) offset = 0")("if (!buf) buf = Buffer.allocUnsafe(encodingLength(obj))")("var oldOffset = offset");Object.keys(l).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=l[e].map((function(e){return"+defined("+o("obj",e)+")"})).join(" + ");m("if ((%s) > 1) throw new Error(%s)",n,t)})),v((function(e,t,n,r){t.required?m("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):m("if (defined(%s)) {",n);var o,a=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,s=i.encode(t.tag<<3|2),c=i.encode(t.tag<<3|e.type);if(t.map&&(m()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),a){for(m()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("packedLen += %s.encodingLength(%s)",p(h[r],f),n+"[i]")("}"),m("if (packedLen) {"),o=0;o<c.length;o++)m("buf[offset++] = %d",s[o]);m("varint.encode(packedLen, buf, offset)"),m("offset += varint.encode.bytes"),m("}")}if(t.repeated&&(m("for (var i = 0; i < %s.length; i++) {",n),m("if (!defined(%s)) continue",n+="[i]")),!a)for(o=0;o<c.length;o++)m("buf[offset++] = %d",c[o]);e.message&&(m("varint.encode(%s.encodingLength(%s), buf, offset)",p(h[r],f),n),m("offset += varint.encode.bytes")),m("%s.encode(%s, buf, offset)",p(h[r],f),n),m("offset += %s.encode.bytes",p(h[r],f)),t.repeated&&m("}"),t.required||m("}")})),m()("encode.bytes = offset - oldOffset")("return buf")("}"),m=m.toFunction({encodingLength:_,defined:s,varint:i,enc:f,Buffer:t});var y,b=n.fields.map((function(e,t){return e.required&&"!found"+t})).filter((function(e){return e})).join(" || "),w=a(),I=[];return v((function(e,t){var r=t.options&&t.options.default,i=g(t.type,n.id,!1),a=i&&i.values;a?t.repeated?I.push(o.property(t.name)+": []"):(r=r&&a[r]?a[r].value:a[Object.keys(a)[0]].value,I.push(o.property(t.name)+": "+parseInt(r||0,10))):I.push(o.property(t.name)+": "+c(t,r))})),I=I.filter((y={},function(e){return!y.hasOwnProperty(e)&&(y[e]=!0,!0)})),w()("function decode (buf, offset, end) {")("if (!offset) offset = 0")("if (!end) end = buf.length")('if (!(end <= buf.length && offset <= buf.length)) throw new Error("Decoded message is not valid")')("var oldOffset = offset")("var obj = {"),I.forEach((function(e,t){w(e+(t===I.length-1?"":","))})),w("}"),v((function(e,t,n,r){t.required&&w("var found%d = false",r)})),w("while (true) {")("if (end <= offset) {")(b&&'if (%s) throw new Error("Decoded message is not valid")',b)("decode.bytes = offset - oldOffset")("return obj")("}")("var prefix = varint.decode(buf, offset)")("offset += varint.decode.bytes")("var tag = prefix >> 3")("switch (tag) {"),v((function(t,r,i,a){var s=r.repeated&&(r.options&&r.options.packed&&"false"!==r.options.packed||!(r.options&&"false"==r.options.packed)&&3==e.syntax&&("float"===r.type||"double"===r.type||-1!=r.type.indexOf("int")));w("case %d:",r.tag),r.oneof&&n.fields.forEach((function(e){e.oneof===r.oneof&&r.name!==e.name&&w("delete %s",o("obj",e.name))})),s&&w()("var packedEnd = varint.decode(buf, offset)")("offset += varint.decode.bytes")("packedEnd += offset")("while (offset < packedEnd) {"),t.message?(w("var len = varint.decode(buf, offset)"),w("offset += varint.decode.bytes"),r.map?(w("var tmp = %s.decode(buf, offset, offset + len)",p(h[a],f)),w("%s[tmp.key] = tmp.value",i)):r.repeated?w("%s.push(%s.decode(buf, offset, offset + len))",i,p(h[a],f)):w("%s = %s.decode(buf, offset, offset + len)",i,p(h[a],f))):r.repeated?w("%s.push(%s.decode(buf, offset))",i,p(h[a],f)):w("%s = %s.decode(buf, offset)",i,p(h[a],f)),w("offset += %s.decode.bytes",p(h[a],f)),s&&w("}"),r.required&&w("found%d = true",a),w("break")})),w()("default:")("offset = skip(prefix & 7, buf, offset)")("}")("}")("}"),w=w.toFunction({varint:i,skip:r.skip,enc:f}),m.bytes=w.bytes=0,u.buffer=!0,u.encode=m,u.decode=w,u.encodingLength=_,u.dependencies=f,u},g=function(e,t,o){if(n&&n[e])return n[e];if(r[e])return r[e];var s=(t?t+"."+e:e).split(".").map((function(t,n,r){return r.slice(0,n).concat(e).join(".")})).reverse().reduce((function(e,t){return e||l[t]||d[t]}),null);if(!1===o)return s;if(!s)throw new Error("Could not resolve "+e);return s.values?function(e){var t=Object.keys(e.values).map((function(t){return"val !== "+parseInt(e.values[t].value,10)})).join(" && ");t||(t="true");var n=a()("function encode (val, buf, offset) {")('if (%s) throw new Error("Invalid enum value: "+val)',t)("varint.encode(val, buf, offset)")("encode.bytes = varint.encode.bytes")("return buf")("}").toFunction({varint:i}),o=a()("function decode (buf, offset) {")("var val = varint.decode(buf, offset)")('if (%s) throw new Error("Invalid enum value: "+val)',t)("decode.bytes = varint.decode.bytes")("return val")("}").toFunction({varint:i});return r.make(0,n,o,i.encodingLength)}(s):f[s.id]?f[s.id]:(f[s.id]={},h(s,f[s.id]))};return(e.enums||[]).concat((e.messages||[]).map((function(e){return g(e.id)})))},e.exports.defined=s}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers/index.js":function(e,t,n){(function(t){var i=n("./node_modules/protocol-buffers-schema/index.js"),o=n("./node_modules/protocol-buffers/compile.js"),a=n("./node_modules/protocol-buffers/compile-to-js.js");e.exports=function(e,n){if(n||(n={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var a="object"!==r(e)||t.isBuffer(e)?i.parse(e):e,s=function(){var e=this;o(a,n.encodings||{},n.inlineEnc).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(t.values)||t}))};return s.prototype.toString=function(){return i.stringify(a)},s.prototype.toJSON=function(){return a},new s},e.exports.toJS=function(t){return a(e.exports(t,{inlineEnc:!0}))}}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/signed-varint/index.js":function(e,t,n){var r=n("./node_modules/varint/index.js");t.encode=function e(t,n,i){t=t>=0?2*t:-2*t-1;var o=r.encode(t,n,i);return e.bytes=r.encode.bytes,o},t.decode=function e(t,n){var i=r.decode(t,n);return e.bytes=r.decode.bytes,1&i?(i+1)/-2:i/2},t.encodingLength=function(e){return r.encodingLength(e>=0?2*e:-2*e-1)}},"./node_modules/util/node_modules/inherits/inherits_browser.js":function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"./node_modules/util/support/isBufferBrowser.js":function(e,t){e.exports=function(e){return e&&"object"===r(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"./node_modules/util/util.js":function(e,t,n){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(c(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,a=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<i;s=r[++n])v(s)||!w(s)?a+=" "+s:a+=" "+c(s);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var a,s={};function c(e,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),d(r,e,r.depth)}function u(e,t){var n=c.styles[t];return n?"["+c.colors[n][0]+"m"+e+"["+c.colors[n][1]+"m":e}function l(e,t){return e}function d(e,n,r){if(e.customInspect&&n&&C(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return m(i)||(i=d(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(m(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(_(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(n);if(0===a.length){if(C(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(b(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(I(n))return e.stylize(Date.prototype.toString.call(n),"date");if(S(n))return f(n)}var u,l="",w=!1,T=["{","}"];(h(n)&&(w=!0,T=["[","]"]),C(n))&&(l=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(l=" "+RegExp.prototype.toString.call(n)),I(n)&&(l=" "+Date.prototype.toUTCString.call(n)),S(n)&&(l=" "+f(n)),0!==a.length||w&&0!=n.length?r<0?b(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=w?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)A(t,String(a))?o.push(p(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return p(e,n,r,s,t,w)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,l,T)):T[0]+l+T[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),A(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=v(n)?d(e,c.value,null):d(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function h(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function v(e){return null===e}function _(e){return"number"==typeof e}function m(e){return"string"==typeof e}function y(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===T(e)}function w(e){return"object"===r(e)&&null!==e}function I(e){return w(e)&&"[object Date]"===T(e)}function S(e){return w(e)&&("[object Error]"===T(e)||e instanceof Error)}function C(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function E(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(a)&&(a=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(a)){var r=e.pid;s[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else s[n]=function(){};return s[n]},t.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=g,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=_,t.isString=m,t.isSymbol=function(e){return"symbol"===r(e)},t.isUndefined=y,t.isRegExp=b,t.isObject=w,t.isDate=I,t.isError=S,t.isFunction=C,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===r(e)||void 0===e},t.isBuffer=n("./node_modules/util/support/isBufferBrowser.js");var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(){var e=new Date,t=[E(e.getHours()),E(e.getMinutes()),E(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",x(),t.format.apply(t,arguments))},t.inherits=n("./node_modules/util/node_modules/inherits/inherits_browser.js"),t._extend=function(e,t){if(!t||!w(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!=typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=P,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(D,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,i(t)),n}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/varint/decode.js":function(e,t){e.exports=function e(t,n){var r,i=0,o=0,a=n=n||0,s=t.length;do{if(a>=s)throw e.bytes=0,new RangeError("Could not decode varint");r=t[a++],i+=o<28?(127&r)<<o:(127&r)*Math.pow(2,o),o+=7}while(r>=128);return e.bytes=a-n,i}},"./node_modules/varint/encode.js":function(e,t){e.exports=function e(t,r,i){r=r||[];var o=i=i||0;for(;t>=n;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-o+1,r};var n=Math.pow(2,31)},"./node_modules/varint/index.js":function(e,t,n){e.exports={encode:n("./node_modules/varint/encode.js"),decode:n("./node_modules/varint/decode.js"),encodingLength:n("./node_modules/varint/length.js")}},"./node_modules/varint/length.js":function(e,t){var n=Math.pow(2,7),r=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),a=Math.pow(2,35),s=Math.pow(2,42),c=Math.pow(2,49),u=Math.pow(2,56),l=Math.pow(2,63);e.exports=function(e){return e<n?1:e<r?2:e<i?3:e<o?4:e<a?5:e<s?6:e<c?7:e<u?8:e<l?9:10}},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=globalThis;try{n=n||new i("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n}})},5753:(e,t,n)=>{"use strict";n.d(t,{q:()=>f,Z:()=>p});var r=n(8392),i=n(9947),o=n(3638),a=n(2363),s=n(9307),c=(0,s.s)("XWebTextareaSupportedEvent"),u=!1;(0,r.Ld)("xWebTextareaSupported",(function(e){var t=e.canInsert2XWeb;u=t,c.emit({canInsert2XWeb:t})})),(a.gm||a.qB||a.Mq||a.wZ||a.Ae)&&(0,r.Ld)("SPECIAL_PAGE_EVENT",(function(e){var t=e.data,n=e.eventName,s=e.ext,c=e.nodeId,l=e.instanceId,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if((!a.wZ||u)&&(t&&"input"===t.type&&s&&s.modelValueName&&__virtualDOM__.setModelValueData(t.detail.value,s.modelValueName,d,c),t&&"input"===t.type&&"function"==typeof o.Z.webviewEventCallback)){var f=o.Z.webviewEventCallback({data:t,eventName:n,webviewId:d,nodeId:c}),p=t.detail.value;if(s&&s.setKeyboardValue)if(void 0===f);else if("Object"===(0,i.Em)(f)){var h={};l&&(h.instanceId=l),p!==f.value&&(h.value=f.value+""),Number.isNaN(parseInt(f.cursor,10))||(h.cursor=parseInt(f.cursor,10)),(0,r.nY)("setKeyboardValue",h,[d])}else p!==f&&(0,r.nY)("setKeyboardValue",{value:f+"",cursor:-1,instanceId:l},[d])}}));var l="__DOMReady",d=(0,s.s)("DomReady"),f=d.internalOnMethod,p=function(e){o.Z.webviewEventCallback=e,(0,r.Ld)("PAGE_EVENT",(function(t){var n=t.data,r=t.eventName,i=t.nodeId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r===l&&d.emit({data:n,eventName:r,webviewId:o,nodeId:i}),e({data:n,eventName:r,webviewId:o,nodeId:i})}))}},733:(e,t,n)=>{"use strict";n.r(t),n.d(t,{showToast:()=>y,hideToast:()=>b,showLoading:()=>I,hideLoading:()=>S,_showModal:()=>p,showModal:()=>h,showActionSheet:()=>C,showShareActionSheet:()=>T,_checkIsInteracting:()=>E});var r=n(8392),i=n(9947),o=n(3638),a=n(8198),s=n(2363),c=n(968),u=n(7239),l=n(1957),d=n(5753),f=!1,p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:"",content:"",confirmText:"确定",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:void 0!==__wxConfig.theme&&e.confirmColor?e.confirmColor:"#7D90A9",cancelColor:"#000000",cancelColorDark:void 0!==__wxConfig.theme&&e.cancelColor?e.cancelColor:"#AAAAAA",editable:!1,placeholderText:""};t=(0,i.l7)(t,e),(0,r.r3)("showModal",t,{title:"",content:"",confirmText:"",cancelText:"",confirmColor:"",cancelColor:"",editable:!1,placeholderText:""})&&(t.confirmText.replace(/[^\x00-\xff]/g,"##").length>8?(0,r.YG)("showModal",e,"confirmText length should not larger than 4 Chinese characters"):t.cancelText.replace(/[^\x00-\xff]/g,"##").length>8?(0,r.YG)("showModal",e,"cancelText length should not larger than 4 Chinese characters"):(0,r.IN)("showModal",t,{beforeSuccess:function(e){e.confirm=Boolean(e.confirm),s.cj||s.Mq?e.cancel=!e.confirm:e.cancel=!e.confirm&&Boolean(e.cancel),(0,a.Hk)()},beforeAll:function(){f=!0},afterAll:function(){f=!1}}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(e),(0,c.aI)()&&(0,u.y4)(u.F0.EVENT_CANVAS_AFTER_MODAL)},g={},v={};(0,l.H)((function(e){v[e.webviewId]=[]})),(0,d.q)((function(e){setTimeout((function(){var t=e.webviewId,n=v[t]||[];g[t]=!0,n.length>0&&(m=!1,w=!1,n.forEach((function(e){var t=e.res,n=e.args,i=/hideLoading/.test(t.errMsg)?{beforeAll:function(e){e.errMsg=e.errMsg.replace("hideToast","hideLoading")}}:{};(0,r.IN)("hideToast",n,i)}))),delete v[t]}),100)}));var _=1,m=!1,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={duration:1500,title:"",icon:"success",mask:!1};if(t=(0,i.l7)(t,e),e.image&&(t.image=(0,i.sd)(o.Z.lastRoute,e.image,!1)),["success","loading","none","error"].indexOf(t.icon)<0&&(t.icon="success"),"none"===t.icon&&(t.icon=""),(0,r.r3)("showToast",t,{duration:1,title:"",icon:""})){var n=v[o.Z.currentWebviewId]||[];n.length>0&&(m=!1,w=!1,n.forEach((function(e){var t=e.res,n=e.args;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete v[o.Z.currentWebviewId]),m=_++,setTimeout((function(){m=!1}),t.duration),t.maskAll=!1,(0,r.IN)("showToast",t)}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.gm&&w&&(!m||m<w))return m=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideToast:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideToast:ok"})})),void console.warn("请注意 showToast 与 hideToast 必须配对使用");o.Z.currentWebviewId;m=!1,(0,r.IN)("hideToast",e)},w=!1,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:"",icon:"loading",mask:!1,duration:1e8};if((t=(0,i.l7)(t,e)).icon="loading",delete t.image,(0,r.r3)("showLoading",t,{duration:1,title:""})){var n=v[o.Z.currentWebviewId]||[];n.length>0&&(m=!1,w=!1,n.forEach((function(e){var t=e.res,n=e.args;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete v[o.Z.currentWebviewId]),w=_++,t.maskAll=!1,(0,r.IN)("showToast",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("showToast","showLoading")}})}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.gm&&m&&(!w||w<m))return w=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideLoading:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideLoading:ok"})})),void console.warn("请注意 showLoading 与 hideLoading 必须配对使用");o.Z.currentWebviewId;w=!1,(0,r.IN)("hideToast",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("hideToast","hideLoading")}})},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={itemList:[],itemColor:"#000000",itemColorDark:void 0!==__wxConfig.theme&&e.itemColor?e.itemColor:"#FFFFFFCC"};delete(t=(0,i.l7)(t,e)).cancelText,delete t.cancelColor,(0,r.r3)("showActionSheet",t,{itemList:["1"],itemColor:""})&&(e.itemList.length>6?(0,r.YG)("showActionSheet",e,"parameter error: itemList should not be large than 6"):(0,r.IN)("showActionSheet",t,{beforeAll:function(e){(e.errMsg.indexOf(":ok")>-1||e.errMsg.indexOf(":cancel")>-1)&&(0,a.Hk)(),f=!0},afterAll:function(){f=!1}}))},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.IN)("showShareActionSheet",e)},E=function(){return f}},7766:(e,t,n)=>{"use strict";n.d(t,{ML:()=>f,tl:()=>I,Am:()=>C,vJ:()=>k,J_:()=>x});var r=n(3356),i=n.n(r),o=n(1503),a=n.n(o),s=n(7015),c=n.n(s),u=n(3082),l=n(8392),d=(0,n(9307).s)("navigateBackIntercept"),f={SlideBack:1,BottomBackButton:2,NavigationBarBack:3,NavigateBackCall:4},p=[f.SlideBack,f.BottomBackButton,f.NavigationBarBack,f.NavigateBackCall],h=[],g=0;(0,l.jQ)("onNavigateBackIntercept",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h[h.length-1]||{},n=t.id;d.emit(a()(a()({},e),{},{id:n})),(0,l.nY)("onNavigateBackIntercept",a()(a()({},e),{},{id:n}))}));var v,_,m,y,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scopes,n=new Set(t||[]),r={scopes:p.map((function(e){return{type:e,interception:n.has(e)}}))};return(0,l.bb)("setNavigateBackInterception",r)},w=(v=i()(c().mark((function e(){var t,n,r,i=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:{},n=a()(a()({},n),{},{scopes:null!==(t=n.scopes)&&void 0!==t?t:p}),e.next=4,b(n);case 4:return r=++g,h.push({id:r,options:n}),e.abrupt("return",{id:r});case 7:case"end":return e.stop()}}),e)}))),function(){return v.apply(this,arguments)}),I=(0,u.NX)("setNavigateBackInterception",w),S=(_=i()(c().mark((function e(){var t,n,r,i,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},n=t.id,!((r=h.findIndex((function(e){return e.id===n})))<0)){e.next=4;break}return e.abrupt("return");case 4:if(r!==h.length-1){e.next=8;break}return i=h.length>1?h[h.length-2].options:{scope:[]},e.next=8,b(i);case 8:h.splice(r,1);case 9:case"end":return e.stop()}}),e)}))),function(){return _.apply(this,arguments)}),C=(0,u.NX)("stopNavigateBackInterception",S),T=d.internalOnMethod,E=d.internalOffMethod,k=(m=i()(c().mark((function e(t){var n,r,i,o,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:p,e.next=3,w({scopes:n});case 3:return r=e.sent,i=r.id,T(o=function(e){e.id===i&&t(e)}),e.abrupt("return",{id:i,handler:o});case 8:case"end":return e.stop()}}),e)}))),function(e){return m.apply(this,arguments)}),x=(y=i()(c().mark((function e(t){var n,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return n=e.t0,r=n.id,i=n.handler,e.next=10,S({id:r});case 10:E(i);case 11:case"end":return e.stop()}}),e)}))),function(e){return y.apply(this,arguments)})},422:(e,t,n)=>{"use strict";n.d(t,{Hl:()=>p,KN:()=>h,rD:()=>g});var r=n(8392),i=[],o=null,a=null,s=!1,c=[],u=!1,l="",d=0,f=0,p=function(e){e.deviceOrientation&&(l=e.deviceOrientation),d=e.size.windowWidth,f=e.size.windowHeight};(0,r.jQ)("onViewDidResize",(function(e){!function(e){o=e;var t=!1,n=!0;e.deviceOrientation!==l&&(t=!0),e.size.windowWidth!==d&&(t=!0),e.size.windowHeight!==f&&(t=!0),p(e),e.pageOrientation&&(e.pageOrientation.setPageOrientation&&(u=!0),"auto"===e.pageOrientation.originalPageOrientation||u||(t=!1,n=!1)),void 0!==__appServiceEngine__&&__appServiceEngine__.isFramesetMode()&&(n=!1),t&&(s=!0);var r=e.changedWebviewIds;n&&r&&r.forEach((function(e){c.indexOf(e)<0&&c.push(e)})),a||(a=setTimeout((function(){a=null;var e=s;s=!1;var t=c;c=[];var n={deviceOrientation:o.deviceOrientation,size:o.size};e&&i.forEach((function(e){__errorTracer__.surroundThirdByTryCatch(e,"at onWindowResize callback function")(n)})),t.forEach((function(e){var t=void 0!==__appServiceEngine__?__appServiceEngine__.getPageByWebviewId(e):null;t&&__errorTracer__.surroundThirdByTryCatch((function(){t.__callPageLifeTime__("onResize",n)}),"at Resize callback function")()}))}),16))}(e)}));var h=function(e){i.push(e)},g=function(e){i.splice(i.indexOf(e),1)}},7147:(e,t,n)=>{"use strict";n.d(t,{Z:()=>W,r:()=>U});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(572),c=n.n(s),u=n(1890),l=n(9267),d=n(9947),f="function"==typeof wxNativeConsole?wxNativeConsole.createLogger("SharedArrayBuffer"):wxConsole,p=0,h=1,g=2,v=new WeakMap,_=new Map,m=ArrayBuffer,y="undefined"==typeof WeixinSharedBuffer?{}:WeixinSharedBuffer;"undefined"==typeof WeixinSharedBuffer&&("undefined"!=typeof __global?m=__global.SharedArrayBuffer:n.g.SharedArrayBuffer&&(m=n.g.SharedArrayBuffer));var b=function(){function e(t,n){if(i()(this,e),f.log("constructor length=".concat(t,", sabId=").concat(n)),!(0,l.hj)(t)||t<0)throw new d.iZ("Invalid array buffer length ".concat(t));if((0,l.hj)(n)){var r;f.info("get buffer with sabId: ".concat(n));try{r=y.get(n)}catch(e){throw f.error("WeixinSharedBuffer.get".concat(n," fail: ").concat(e.message)),new Error("WeixinSharedBuffer.get".concat(n," fail: ").concat(e.message))}Object.defineProperty(this,"buffer",{value:r,writable:!1,enumerable:!0}),Object.defineProperty(this,"_sabId",{value:n,enumerable:!0,writable:!1})}else{f.info("new ArrayBuffer with length: ".concat(t)),Object.defineProperty(this,"buffer",{value:new m(t),writable:!1,enumerable:!0});var o=y.new(this.buffer);f.info("sabId: ".concat(o)),Object.defineProperty(this,"_sabId",{value:o,enumerable:!0,writable:!1})}var a={writeStatus:p,readStatus:p,writeLockCallbacks:[],readLockCallbacks:[],writeLockId:void 0,readLockId:void 0,destroyed:!1};v.set(this,a),_.set(this._sabId,this),f.log("[".concat(this._sabId,"] created:"),this.buffer)}return a()(e,[{key:"destroy",value:function(){f.warn("[".concat(this._sabId,"][destroy()]"));var e=v.get(this);e.writeLockCallbacks=[],e.readLockCallbacks=[],_.delete(this._sabId),v.get(this).destroyed=!0,this.unlock(),y.destroy(this._sabId)}},{key:"lock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!0;var n=v.get(this),r=n.destroyed,i=n.writeStatus,o=n.readStatus,a=n.writeLockCallbacks,s=n.readLockCallbacks;if(r)throw new d.iZ("SharedArrayBuffer has been destroyed");if(!(0,l.mf)(e))throw new d.iZ("callback must be a function");if(i!==g)if(t)a.push(e),i===h||(n.writeStatus=h,n.writeLockId=y.Lock(this._sabId,(function(){a.forEach((function(e){return e()})),s.forEach((function(e){return e()})),n.writeStatus=g,n.writeLockCallbacks=[],n.readLockCallbacks=[]})));else{if(o===g)return f.info("[".concat(this._sabId,"][lock()] readStatus is locked, callback immediately")),void e();s.push(e),o===h||i===h||(n.readLockId=y.Lock(this._sabId,(function(){s.forEach((function(e){return e()})),n.readStatus=g,n.readLockCallbacks=[]})),n.readStatus=h)}else e()}},{key:"unlock",value:function(){var e=v.get(this),t=e.writeLockId,n=e.readLockId,r=e.writeStatus,i=e.readStatus;e.destroyed?console.warn("unlock: SharedArrayBuffer has been destroyed"):(r!==h&&r!==g||(y.Unlock(this._sabId,t),e.writeStatus=p,e.writeLockId=void 0,e.writeLockCallbacks=[]),i!==h&&i!==g||(y.Unlock(this._sabId,n),e.readStatus=p,e.readLockId=void 0,e.readLockCallbacks=[]))}}]),e}(),w=function e(t){return f.log("[unpackSharedArrayBuffer]",t),(0,l.Kn)(t)?(f.log("[unpackSharedArrayBuffer] isObject"),(0,l.hj)(t._sabId)?(f.info("[unpackSharedArrayBuffer] sabId is number"),n=t._sabId,f.info("[getSharedArrayBuffer] sabId=".concat(n)),_.has(n)?(f.info("[getSharedArrayBuffer] return existed object"),_.get(n)):(f.info("[getSharedArrayBuffer] return new object"),new b(0,n))):Object.keys(t).reduce((function(n,r){var i=t[r];return n[r]=e(i),n}),{})):(0,l.kJ)(t)?t.map(e):t;var n},I=n(8947),S=n(8325),C=n(8392),T=new WeakMap,E=new WeakMap,k=new WeakMap,x={},A={},P={},D=new WeakMap,O=new WeakMap,N=0,R={};function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:++N;return P[e]?(R[e]||(R[e]=[]),R[e].push({id:n,callback:t})):(P[e]=n,t()),n}function L(e,t){if(P[e]===t&&(delete P[e],R[e]&&R[e].length)){var n=R[e].shift(),r=n.id;M(e,n.callback,r)}}if(!y.new){var B=0;Object.assign(y,{new:function(e){var t=++B;return A[t]=e,Object.keys(x).forEach((function(n){var r=T.get(x[n]);__safeway__.worker.postMsgToWorker(r,{__cmd__:"setSharedBuffer",__buffer__:e,__id__:t},!1)})),t},get:function(e){return A[e]},destroy:function(e){delete A[e]},Lock:M,Unlock:L})}__safeway__.worker.onWorkerMsg((function(e,t){var n=x[e],r=E.get(n),i=O.get(n);if(t.__log__&&t.logs)(o=t).__isNativeConsole__?(a=wxNativeConsole)[o.level].apply(a,c()(o.logs)):(s=console)[o.level].apply(s,c()(o.logs));else{var o,a,s;if("setSharedBuffer"===t.__cmd__)return A[t.__id__]=t.__buffer__,void Object.keys(x).forEach((function(n){var r=T.get(x[n]);r!==e&&__safeway__.worker.postMsgToWorker(r,t,!1)}));if("lockSharedBuffer"!==t.__cmd__)if("unlockSharedBuffer"!==t.__cmd__){if(n&&"function"==typeof r)if(i&&i.useWKWorker){if("requireScriptSuccess"===t.__cmd__){var u=D.get(n);return void(u&&u.evaluateWorkerScriptPromiseResolve&&u.evaluateWorkerScriptPromiseResolve())}if("readFile"===t.__cmd__)return void S.t2.readFile({filePath:t.filePath,success:function(n){var r=n.data;return __safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,result:String.fromCharCode.apply(String,c()(new Uint16Array(r)))})},fail:function(n){var r=n.errMsg;return __safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,errMsg:r})}});r(t.data)}else r(w(t))}else L(t.__sid__,t.__lid__);else M(t.__sid__,(function(){return n.postMessage(t)}),t.__lid__)}}));var F=function(e){this.postMessage({__cmd__:"requireScript",__script__:e,__id__:T.get(this)})},j=function(){var e,t=new Promise((function(t){e=t}));D.set(this,{evaluateWorkerScriptPromise:t,evaluateWorkerScriptPromiseResolve:e})},W=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{useWKWorker:!1};i()(this,e),T.set(this,t),O.set(this,r),x[t]=this,this._id=t,r.useWKWorker?j.call(this):F.call(this,n),u.Z.add(this)}return a()(e,[{key:"postMessage",value:function(e){var t=T.get(this),n=D.get(this),r=O.get(this);r&&r.useWKWorker&&n?n.evaluateWorkerScriptPromise.then((function(){__safeway__.worker.postMsgToWorker(t,{data:e,appid:I.Z.accountInfo.appId})})):__safeway__.worker.postMsgToWorker(t,e)}},{key:"onMessage",value:function(e){E.set(this,e)}},{key:"terminate",value:function(){var e=T.get(this),t=O.get(this);t&&t.useWKWorker?__safeway__.worker.postMsgToWorker(e,{__cmd__:"terminate",appid:I.Z.accountInfo.appId}):__safeway__.worker.terminate(e),u.Z.remove(this),T.delete(this),E.delete(this),D.delete(this),k.delete(this),O.delete(this),delete x[e]}},{key:"onProcessKilled",value:function(e){k.set(this,e)}}]),e}();(0,C.jQ)("onWorkerWebViewTerminate",(function(){Object.keys(x).forEach((function(e){var t=x[e],n=O.get(t);if(n&&n.useWKWorker){var r=k.get(t);u.Z.remove(t),T.delete(t),E.delete(t),D.delete(t),k.delete(t),O.delete(t),delete x[e],"function"==typeof r&&__errorTracer__.surroundThirdByTryCatch(r,"at Worker.onProcessKilled callback function")(),Reporter.reportIDKey({key:"onWorkerWebViewTerminate"})}}))}));var U=function(e){if(e._id>=0&&x[e._id])return e._id}},1890:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=[];const i={add:function(e){e&&r.indexOf(e)<0&&r.push(e)},remove:function(e){var t=r.indexOf(e);t>=0&&r.splice(t,1)},get size(){return r.length}}},3704:(e,t,n)=>{"use strict";n.d(t,{ZA:()=>b,g4:()=>m,Jx:()=>y,V8:()=>I,ye:()=>S,n6:()=>g,UU:()=>h});var r=n(572),i=n.n(r),o=n(8947),a=n(9267),s=n(3638),c=n(8392),u=n(5770),l=n(2363),d=0,f=1,p=2,h={OK:1,BLOCK:2,NO_BLOCK:3},g={NAVIGATE_TO:1,SWITCH_TAB:2,REDIRECT_TO:3,API:4,RE_LAUNCH:5},v=wxNativeConsole.createLogger("BanForPage"),_=!1,m=new Set(["shareAppMessage","shareAppMessageDirectly","requestPayment","setClipboardData","getClipboardData","getLocation","getPhoneNumber","navigateToMiniProgram","navigateBackMiniProgram"]),y=[];function b(e){if(!e)return-1;var t=-1;try{t=y.findIndex((function(t){return(0,a.HD)(t.path_rule)&&new RegExp(t.path_rule).test(e)}))}catch(e){v.log("[getBanRuleIndexByPath] error: ".concat(e.message))}return v.log('[getBanRuleIndexByPath] path="'.concat(e,'", index=').concat(t)),t}function w(e,t,n){v.log("[checkAPIAvailableForPage] APIName=".concat(e,", path=").concat(t,", title=").concat(n));var r=function(e,t,n){for(var r=-1,i=0;i<y.length;i++){var o=y[i];if((!(0,a.HD)(o.path_rule)||!o.path_rule||new RegExp(o.path_rule).test(t))&&(!(0,a.HD)(o.title_rule)||!o.title_rule||new RegExp(o.title_rule).test(n))){r=i;break}}return v.log("[getBanRuleIndexForPage] banRuleIndex=".concat(r)),r}(0,t,n);if(-1===r)return S(e,h.OK,g.API,e),!0;var i=y[r];return v.log("[checkAPIAvailableForPage], found rule:",i),function(e,t){var n,r,i=e.ban_jsapi_list.find((function(e){return e.jsapi_name===t}));if(!i)return v.log("[checkAPIAvailableForPageByRule], no APIItem found"),!0;if(v.log("[checkAPIAvailableForPageByRule], found APIItem:",i),i.state===d)n=!1;else if(i.state===f)n=!0;else if(i.state===p&&(n=!0,1===e.is_valid)){var o=i.toast_wording||"该功能暂时无法使用";(0,c.be)("showToast",{title:o,icon:"none"})}return r=n?e.is_valid?h.BLOCK:h.NO_BLOCK:h.OK,S(t,r,g.API,t),1!==e.is_valid||!n}(i,e)}function I(e){var t=Object.keys(s.Z.query).reduce((function(e,t){return[].concat(i()(e),["".concat(t,"=").concat(s.Z.query[t])])}),[]).join("&"),n=s.Z.lastRoute+(t?"?".concat(t):""),r=s.Z.navigationBarTitleMap[s.Z.lastRoute]||"";return v.log("[checkAPIAvailableForCurrentPage] APIName=".concat(e,", path=").concat(n,", title=").concat(r)),w(e,n,r)}function S(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(v.log("[reportAPIBanForPage] APIName=".concat(e,", blockType=").concat(t,", checkScene=").concat(n,", extraInfo=").concat(r,", needReport=").concat(_)),_){var a=o.Z.appLaunchInfo,c=Object.keys(s.Z.query).map((function(e){return"".concat(e,"=").concat(s.Z.query[e])})).join("&"),l={session_id:a.sessionid||a.sessionId,cur_path:s.Z.lastRoute+(c?"?".concat(c):""),title:s.Z.navigationBarTitleMap[s.Z.lastRoute],check_scene:n,block_status:t,extra_info:r,launch_scene:a.scene,launch_path:a.path,target_path:i};v.log("[reportAPIBanForPage], reqData:",l),(0,u.JM)({reqData:l,apiName:"webapi_reportnvgcheckinfo",complete:function(e){v.log("[reportAPIBanForPage], res.errMsg=".concat(e.errMsg))}})}}o.Z.onReady((function(){if(!l.gm)try{var e=o.Z.appContactInfo.operationInfo.jsonInfo.navigate_ban_info,t=e.do_report,n=e.navigate_ban_rule_list;y=n,_=1===t,m=new Set(n.reduce((function(e,t){return[].concat(i()(e),i()(t.ban_jsapi_list))}),m)),v.log("[BanForPage][init] needReport=".concat(_)),v.log("[BanForPage][init] ruleList:",y),v.log("[BanForPage][init] banAPISet:",m)}catch(e){v.error("[BanForPage][init] fail, errMsg=".concat(e.message))}}))},6965:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r="undefined"!=typeof NativeGlobal?NativeGlobal:{}},8947:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=__wxConfig},9769:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n.g.WeixinArrayBuffer;delete n.g.WeixinArrayBuffer;const i=r},6589:(e,t,n)=>{"use strict";n.d(t,{X:()=>A,T:()=>P});var r=n(3379),i=n.n(r),o=n(8947),a=n(7264),s=n(266),c=n(9267),u=0,l="",d="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",f="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function p(){if(void 0===__appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}(0,c.HD)(d)&&(d=d.replace(" ","")),(0,c.HD)(f)&&(f=f.replace(" ","-")),o.Z.onReady((function(){u=o.Z.appLaunchInfo.scene,l=o.Z.appLaunchInfo.sessionid||o.Z.appLaunchInfo.sessionId,(0,a.n)("onAppEnterForeground",(function(e){e&&e.scene&&(u=e.scene),e&&(e.sessionid||e.sessionId)&&(l=e.sessionid||e.sessionId)}))}));var h=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","getBox2D","createSharedArrayBuffer","nv_constructor","nv_toString"],g=["chooseMedia","chooseVideo","compressVideo","createCameraContext","stopRecord"],v=new WeakSet,_=[];function m(){return 1e4*Date.now()+Math.round(9999*Math.random())}function y(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t);return!r.get&&(!!r.writable&&(!(!t||"_"===t[0])&&(!h.includes(t)&&(!(n&&!g.includes(t))&&!!(0,c.mf)(e[t])))))}function b(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(0,c.mf)(e)&&e.apply(void 0,n)}function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,c.Em)(e);switch(n){case"Number":case"Boolean":return e;case"String":return I(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return"[Error:".concat(w(e.message),"|").concat(w(e.stack),"]");case"Object":return t?Object.keys(e).map((function(t){return"".concat(w(t),"=").concat(w(e[t],!1))})).sort((function(e,t){return e.length-t.length})).join("&")||"{}":"[".concat(n,"]");default:return"[".concat(n,"]")}}function I(e){return function(t){return(0,c.HD)(t)&&t.length>e?t.substr(0,e):t}}function S(e,t,n,r,i,a,s,c,h,g){var v=0;_.forEach((function(t){var n=t.match,r=t.version;"string"==typeof n?e===n&&(v=r):n instanceof RegExp&&n.test(e)&&(v=r)})),"connectWifi"===e&&(n="");var m=[e,t,w(n),r,i,Date.now()-i,a,s,w(c),o.Z.appType+1e3,u,d,f,v,h,p(),l].map(I(1024)).join(",");g||1!==s||(Reporter.reportIDKey({key:"asyncApiCount"}),Reporter.reportIDKey({key:"asyncApiCost",value:Date.now()-i})),Reporter.reportKeyValue({key:g?"WeAppInvoke2":"WeAppInvoke",value:m})}var C=Map,T=Math.random;function E(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if((0,c.Kn)(t)){var u,l=new C,d=i()(Object.getOwnPropertyNames(t));try{for(d.s();!(u=d.n()).done;){var f=u.value;y(t,f,a)&&l.set(f,t[f])}}catch(e){d.e(e)}finally{d.f()}var p,h=Object.getPrototypeOf(t),g=i()(Object.getOwnPropertyNames(h));try{for(g.s();!(p=g.n()).done;){var _=p.value;y(h,_,a)&&l.set(_,h[_])}}catch(e){g.e(e)}finally{g.f()}l.forEach((function(i,u){t[u]=function(l){for(var d="".concat(e).concat(u),f=arguments.length,p=new Array(f>1?f-1:0),h=1;h<f;h++)p[h-1]=arguments[h];if(T()>r){var g=i.call.apply(i,[t,l].concat(p));return n&&(0,c.Kn)(g)&&!v.has(g)&&(E("".concat(d,"."),g,!1,r,o,a),v.add(g)),g}var _=(0,s._getCurrentNetworkType)(),y=Date.now(),w=m();try{var I=i.call.apply(i,[t,(0,c.Kn)(l)&&("success"in l||"fail"in l||"complete"in l)?Object.assign({},l,{success:function(e){S(d,w,l,1,y,_,1,e,o,a),b(l.success,e)},fail:function(e){S(d,w,l,0,y,_,1,e,o,a),b(l.fail,e)}}):l].concat(p));return S(d,w,l,null===I?0:1,y,_,0,I,o,a),n&&(0,c.Kn)(I)&&!v.has(I)&&(E("".concat(d,"."),I,!1,r,o,a),v.add(I)),I}catch(e){throw S(d,w,l,0,y,_,0,e,o,a),e}}}))}}var k=!1;function x(e){if(e.createCanvas){var t=e.createCanvas;e.createCanvas=function(){var n=t.call(e);if(n&&n.getContext){var r=n.getContext;n.getContext=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=r.call.apply(r,[n].concat(t));if(o&&o.compressedTexImage2D){var a=o.compressedTexImage2D;o.compressedTexImage2D=function(){k||(k=!0,S("WebGLRenderingContext.compressedTexImage2D",m(),{},1,Date.now(),(0,s._getCurrentNetworkType)(),0,void 0));for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.call.apply(a,[o].concat(t))}}return o}}return n}}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;E("",e,!0,.05,t),E("",e,!0,1,t,!0),E("cloud.",e.cloud,!0,.05,t),x(e)}function P(e,t){_.push({match:e,version:t})}},8976:(e,t,n)=>{"use strict";n.d(t,{J:()=>c,P:()=>u});var r=n(8392),i=n(9267),o=n(8947),a={requestVirtualPayment:285,setCookies:502,getCookies:503,UDP:606,launchApplicationDirectly:620,screenCanvasReadPixels:631,navigateToMiniProgramDirectly:632,openDataContextExtension:638,batchGetContactDirectly:676,launchApp:692,sendBizRedPacketForOpen:694,openWxappLimit5:720,shareCallback:740,WeAppWorker:775,listenFrameChangeInWorker:776,requestSubscribeWhatsNew:782,getGroupToolbarInfo:803,requestMidasFriendPayment:804,createWebView:805,authShareRelationship:852,uploadToCommonCDN:878,quicklyAddBrandContact:879,engineOpenData:894,preloadMiniProgramEnvDirectly:900,predownloadMiniProgramPackageDirectly:901,addPhoneCalendar:912,addPhoneRepeatCalendar:913,privateScanItem:917,shareDataToWeRun:926,handoff:931,bindingDownload:972,bindingReadFile:973,bindingWebSocket:974,openH5GameClub:975,showShareImageMenu:978,plugin_launchApplicationDirectly_operateDirectly:1009,privateSearchContacts:1024,private_setNavigateBackInterception:1020,private_stopNavigateBackInterception:1021,TCP:1025,TCPServer:1026,inputTypeSafePassword:1027},s={};o.Z.onReady((function(){var e=Object.keys(a).map((function(e){return a[e]}));(0,r.IN)("getPermissionBytes",{indexes:e,success:function(t){if(t.permissionBytes)for(var n=0;n<t.permissionBytes.length;n++){var r=e[n];s[r]=1===t.permissionBytes[n]}},fail:function(e){}})}));var c=function(e){var t=a[e];if("number"!=typeof t)return!1;if(!(0,i.o8)(s[t]))return s[t];var n=!1;return(0,r.IN)("getPermissionBytes",{indexes:[t],success:function(e){e.permissionBytes&&(n=1===e.permissionBytes[0],s[t]=n)}}),n},u=function(e){var t=c(e.apiName);(0,r.FE)({name:"checkPermission",args:e,success:!0,res:{hasPermission:t}})}},4657:(e,t,n)=>{"use strict";n.d(t,{Q:()=>c});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(9267),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i()(this,e),this.type="",this.surround=!1,this.eventMap=new Map,this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap,this.type=t,this.surround=n}return a()(e,[{key:"on",value:function(e,t){if((0,s.mf)(t)){var n,r,i=t;this.surround&&(n=t,r="at ".concat(this.type).concat(e," callback function"),i=void 0!==__errorTracer__?__errorTracer__.surroundThirdByTryCatch(n,r):void 0!==__subContextEngine__?__subContextEngine__.surroundThirdByTryCatch(n,r):function(){try{return n.apply(void 0,arguments)}catch(e){return void console.error("thirdScriptError\n".concat(e.message,";").concat(r,"\n"),e)}},this.callbackMap.set(t,i),this.originalCallbackMap.set(i,t)),this.eventMap.has(e)?this.eventMap.get(e).add(i):this.eventMap.set(e,new Set([i]))}else console.error("emitter.on fail: callback must be a function")}},{key:"off",value:function(e,t){var n=this,r=this.eventMap.get(e);if(r)if("function"!=typeof t)r.forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),r.clear();else if(this.surround){var i=this.callbackMap.get(t);r.delete(i),this.callbackMap.delete(t),this.originalCallbackMap.delete(i)}else r.delete(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.eventMap.has(e)){var i=new Set(this.eventMap.get(e));i.forEach((function(e){return e.apply(void 0,n)}))}}},{key:"removeAllListeners",value:function(e){this.off(e)}},{key:"getListenersLength",value:function(e){var t=this.eventMap.get(e);return t?t.size:0}}]),e}()},2363:(e,t,n)=>{"use strict";n.d(t,{iw:()=>a,gm:()=>s,wZ:()=>c,cj:()=>u,qB:()=>l,Mq:()=>d,Ae:()=>f,DD:()=>p,ux:()=>g,Qw:()=>v,jP:()=>_});var r=n(8676),i=n.n(r),o=n(8947),a=o.Z.platform,s="devtools"===o.Z.platform,c="android"===o.Z.platform,u="ios"===o.Z.platform,l="windows"===o.Z.platform,d="mac"===o.Z.platform,f="mina"===o.Z.platform,p=l||d;var h=o.Z.host||{},g="SDK"===h.env,v=(h.env,h.env,h.forceUseNativeMap||!1),_="object"===("undefined"==typeof window?"undefined":i()(window))&&window&&window.__wkrenderer_h5},1983:(e,t,n)=>{"use strict";n.d(t,{vU:()=>i,g0:()=>o,Ob:()=>a,PB:()=>s});var r={0:"OK","10 01 2":"Global_APINoPermission","10 02 2":"Global_APINoAuthorization","10 03 1":"Global_FileStorageNotEnough","13 01 3":"Render_CanvasIllegalInvocation","13 02 3":"Render_FontFileInvalid","13 03 3":"Render_ImageLoadFailed","14 01 2":"Network_RequestTimeout","15 01 3":"Storage_NotFound","16 01 3":"File_NotExist","22 00 2":"GameRecorder_UnknownError","22 01 2":"GameRecorder_InternalFailed","22 02 2":"GameRecorder_NotSupported","22 10 3":"GameRecorder_StartDurationInvalid","22 11 3":"GameRecorder_StartBitRateInvalid","22 12 3":"GameRecorder_StartFPSInvalid","22 13 3":"GameRecorder_StartGOPInvalid","22 14 3":"GameRecorder_StartWhileAlreadyStartRecording","22 15 3":"GameRecorder_StartWhilePaused","22 20 3":"GameRecorder_PauseWhileNotStartRecording","22 21 3":"GameRecorder_PauseWhileAlreadyPaused","22 30 3":"GameRecorder_ResumeWhileNotStartRecording","22 31 3":"GameRecorder_ResumeWhileRecording","22 40 3":"GameRecorder_AbortWhileNotStartRecording","22 50 3":"GameRecorder_StopWhileNotStartRecording","22 60 3":"GameRecorder_NoVideo","22 61 3":"GameRecorder_BGMNotFound","22 62 3":"GameRecorder_TimeRangeInvalid","22 63 3":"GameRecorder_EditDurationOutOfLimit","22 64 3":"GameRecorder_TimeRangeTooShort","23 00 2":"MediaRecorder_UnknownError","23 01 2":"MediaRecorder_InternalFailed","23 02 2":"MediaRecorder_NotSupported","23 10 3":"MediaRecorder_StartDurationInvalid","23 11 3":"MediaRecorder_StartBitRateInvalid","23 12 3":"MediaRecorder_StartFPSInvalid","23 13 3":"MediaRecorder_StartGOPInvalid","23 14 3":"MediaRecorder_StartWhileAlreadyStartRecording","23 15 3":"MediaRecorder_StartWhilePaused","23 20 3":"MediaRecorder_PauseWhileNotStartRecording","23 21 3":"MediaRecorder_PauseWhileAlreadyPaused","23 30 3":"MediaRecorder_ResumeWhileNotStartRecording","23 31 3":"MediaRecorder_ResumeWhileRecording","23 40 3":"MediaRecorder_AbortWhileNotStartRecording","23 50 3":"MediaRecorder_StopWhileNotStartRecording","23 60 3":"MediaRecorder_NoVideo","23 61 3":"MediaRecorder_BGMNotFound","23 62 3":"MediaRecorder_TimeRangeInvalid","23 63 3":"MediaRecorder_EditDurationOutOfLimit","23 64 3":"MediaRecorder_TimeRangeTooShort"},i=Object.keys(r).reduce((function(e,t){var n=parseInt(t.replace(/\s/g,""),10);return e[r[t]]=n,e}),{}),o=function(e){return e.toString().endsWith(1)},a=function(e){return e.toString().endsWith(2)},s=function(e){return e.toString().endsWith(3)}},9307:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var r=n(8676),i=n.n(r),o=n(6326),a=new o.Z({maxListeners:20,newListener:!1}),s=new o.Z({maxListeners:20,newListener:!1});var c={};function u(e){if(e=e[0].toUpperCase()+e.slice(1),!c[e]){var t=new WeakMap;c[e]={getGlobalListeners:function(){return a.listeners(e)},getInternalListeners:function(){return s.listeners(e)},emit:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];s.emit.apply(s,[e].concat(n)),a.emit.apply(a,[e].concat(n))},emitGlobal:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a.emit.apply(a,[e].concat(n))},emitInternal:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];s.emit.apply(s,[e].concat(n))},internalOnMethod:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"function"==typeof t&&(n.prepend?n.once?s.prependOnceListener(e,t):s.prependListener(e,t):n.once?s.once(e,t):s.on(e,t))},internalOffMethod:function(t){"function"==typeof t&&s.off(e,t)},onMethod:function(n){var r=function(e,t){return"function"!=typeof t?(console.error("on".concat(e," should accept a function instead of ").concat(i()(t))),null):__errorTracer__.surroundThirdByTryCatch(t,"at api on".concat(e," callback function"))}(e,n);r&&(t.set(n,r),a.on(e,r))},offMethod:function(n){if(function(e,t){return!t||"function"==typeof t||(console.error("off".concat(e," should accept a function instead of ").concat(i()(t))),!1)}(e,n))if(n){if(t.has(n)){var r=t.get(n);t.delete(n),a.off(e,r)}}else t=new WeakMap,a.removeAllListeners(e)}}}return c[e]}},6326:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l,y:()=>u});var r=n(8676),i=n.n(r),o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(){this._events={},this._conf&&s.call(this,this._conf)}function s(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:20,e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener)):this._maxListeners=20}function c(e,t){console.warn("[Event] ".concat(e," listeners of event ").concat(t," have been added, possibly causing memory leak."))}function u(e){this._events={},this._newListener=!1,this._removeListener=!1,s.call(this,e)}u.prototype.delimiter=".",u.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},u.prototype.event="",u.prototype.once=function(e,t){return this._once(e,t,!1)},u.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},u.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},u.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},u.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},u.prototype._many=function(e,t,n,r){var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&i.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r),i},u.prototype.emit=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,r,i,o,s=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),s>3)for(t=new Array(s),i=0;i<s;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,s){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if("function"==typeof(o=this._events[e])){switch(this.event=e,s){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}if(o&&(o=o.slice()),o&&o.length){if(s>3)for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,s){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},u.prototype.emitAsync=function(){this._events||a.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,i,o,s=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),i=1;i<c;i++)t[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:s.push(this._all[r].call(this,e));break;case 2:s.push(this._all[r].call(this,e,arguments[1]));break;case 3:s.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[r].apply(this,t))}}if("function"==typeof(o=this._events[e]))switch(this.event=e,c){case 1:s.push(o.call(this));break;case 2:s.push(o.call(this,arguments[1]));break;case 3:s.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];s.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,c){case 1:s.push(o[r].call(this));break;case 2:s.push(o[r].call(this,arguments[1]));break;case 3:s.push(o[r].call(this,arguments[1],arguments[2]));break;default:s.push(o[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},u.prototype.on=function(e,t){return this._on(e,t,!1)},u.prototype.prependListener=function(e,t){return this._on(e,t,!0)},u.prototype.onAny=function(e){return this._onAny(e,!1)},u.prototype.prependAny=function(e){return this._onAny(e,!0)},u.prototype.addListener=u.prototype.on,u.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},u.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||a.call(this),this._newListener&&this.emit("newListener",e,t),this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this},u.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n});for(var a=0;a<r.length;a++){if(n=r[a]._listeners,o(n)){for(var s=-1,c=0,u=n.length;c<u;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){s=c;break}if(s<0)continue;return this._events[e].splice(s,1),0===n.length&&delete this._events[e],this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var n=Object.keys(t);for(var r in n){var o=n[r],a=t[o];a instanceof Function||"object"!==i()(a)||null===a||(Object.keys(a).length>0&&e(t[o]),0===Object.keys(a).length&&delete t[o])}}}(this.listenerTree),this},u.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},u.prototype.removeListener=u.prototype.off,u.prototype.removeAllListeners=function(e){return void 0===e?(!this._events||a.call(this),this):(this._events&&(this._events[e]=null),this)},u.prototype.listeners=function(e){return this._events||a.call(this),this._events[e]||(this._events[e]=[]),o(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},u.prototype.eventNames=function(){return Object.keys(this._events)},u.prototype.listenerCount=function(e){return this.listeners(e).length},u.prototype.listenersAny=function(){return this._all?this._all:[]};const l=u},4547:(e,t,n)=>{"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.d(t,{n:()=>r})},3464:(e,t,n)=>{"use strict";n.d(t,{Q:()=>s});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=function(){function e(t){var n=this;if(i()(this,e),this._status="pending",this._return=void 0,this._processors=[],"function"!=typeof t)throw new TypeError("Promise resolver is not a function");try{t((function(e){"pending"===n._status&&(n._status="then",n._return=e,n._consume())}),(function(e){"pending"===n._status&&(n._status="catch",n._return=e,n._consume())}))}catch(e){this._status="catch",this._return=e,this._consume()}}return a()(e,[{key:"_consume",value:function(){if("pending"!==this._status){var e;do{e=this._processors.shift()}while(e&&e.type!==this._status);if(e)try{this._return=e.func(this._return),this._status="then"}catch(e){this._return=e,this._status="catch"}finally{this._consume()}}}},{key:"then",value:function(e){return this._processors.push({func:e,type:"then"}),this._consume(),this}},{key:"catch",value:function(e){return this._processors.push({func:e,type:"catch"}),this._consume(),this}}],[{key:"resolve",value:function(t){return new e((function(e){return e(t)}))}},{key:"reject",value:function(t){return new e((function(){throw t}))}}]),e}()},2115:(e,t,n)=>{"use strict";n.d(t,{I:()=>u,z:()=>c});var r=n(8947),i=n(266),o=0,a={};r.Z.onReady((function(){o=r.Z.appType,a=r.Z.appLaunchInfo}));var s=function(e,t){var n=[];return t.forEach((function(t){var r=e[t];"boolean"==typeof r&&(r=r?1:0),n.push("".concat(t,":").concat(r))})),n.join("|")},c=["getAccountInfoSync","getLaunchOptionsSync","arrayBufferToBase64","base64ToArrayBuffer","getExtConfig","getExtConfigSync","canIUse","setPageStyle","onError","offError"],u=function(e){var t=e.name,n=e.data,r=void 0!==__appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],c=r.length>0&&r[r.length-1].__route__||"",u=(0,i._getCurrentNetworkType)(),l=wx&&wx.version&&wx.version.version||"",d="";switch(t){case"loadFontFace":d=s(n,["family","source","global","scopes"]);break;case"requestSubscribeMessage":d=s(n,["templateCount","templateType","operationType"])}var f=[Math.round(Date.now()/1e3),a.scene,a.sessionid||a.sessionId,c,u,l,t,d,o,1,""].join(",");Reporter.reportKeyValue({key:"APIUse",value:f,immediately:!0})}},9267:(e,t,n)=>{"use strict";n.d(t,{Em:()=>i,HD:()=>o,hj:()=>a,jn:()=>s,o8:()=>c,Ft:()=>u,Kn:()=>l,kJ:()=>d,mf:()=>f,eP:()=>p,x7:()=>h});var r=Object.prototype.toString;function i(e){return r.call(e).slice(8,-1)}var o=function(e){return"String"===i(e)},a=function(e){return"Number"===i(e)},s=function(e){return!0===e||!1===e||"Boolean"===i(e)},c=function(e){return void 0===e},u=function(e){return null===e},l=(Number.isNaN,Number.isFinite,function(e){return"Object"===i(e)}),d=Array.isArray||function(e){return"Array"===i(e)},f=function(e){return"function"==typeof e},p=function(e){return"ArrayBuffer"===i(e)};function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parameter",r=i(t),o=i(e);if(o!==r)return"".concat(n," should be ").concat(r," instead of ").concat(o,";");var a="";switch(r){case"Object":Object.keys(t).forEach((function(r){a+=h(e[r],t[r],"".concat(n,".").concat(r))}));break;case"Array":if(e.length<t.length)return"".concat(n," should have at least ").concat(t.length," item;");for(var s=0;s<t.length;++s)a+=h(e[s],t[s],"".concat(n,"[").concat(s,"]"))}return a}},3082:(e,t,n)=>{"use strict";n.d(t,{M8:()=>_,Hw:()=>m,ZT:()=>y,op:()=>b,Yt:()=>w,gA:()=>I,Qu:()=>S,SW:()=>T,Vl:()=>E,NX:()=>k,mh:()=>x});var r=n(3451),i=n.n(r),o=n(1503),a=n.n(o),s=n(7163),c=n.n(s),u=n(4742),l=n.n(u),d=n(7541),f=n.n(d),p=n(3087),h=n.n(p),g=n(9267),v=n(8392);function _(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function m(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function y(){}var b=m((function(e){var t=(0,g.Em)(e);if("Array"===t||"Object"===t)try{e=JSON.stringify(e)}catch(e){throw e.type="AppServiceSdkKnownError",e}else e="String"===t||"Number"===t||"Boolean"===t?e.toString():"Date"===t?e.getTime().toString():"Undefined"===t?"undefined":"Null"===t?"null":"";return{data:e,dataType:t}}),"anyTypeToString");var w=m((function(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}),"stringToAnyType");function I(e){return function(){for(var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=n=n||{},s=a.success,c=a.fail,u=a.complete;return s||c||u?e.apply(this,[n].concat(i)):new Promise((function(r,o){var a=Object.assign({success:r,fail:o},n);e.apply(t,[a].concat(i))}))}}function S(e,t,n){var r=I(n.value);return n.value=function(){return r.apply(this,arguments)},n}var C=Symbol("ErrorInfosSymbol"),T=function(e){l()(n,e);var t=f()(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c()(this,n),(r=t.call(this,e))[C]=i,r}return n}(h()(Error)),E=function(e){return function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return new Promise((function(n,o){return e.apply(void 0,[a()(a()({},t),{},{success:n,fail:function(e){var t=e.errMsg,n=i()(e,["errMsg"]),r=new Error(t.replace(/^\w+:fail ?/,""));Object.assign(r,n),r[C]=n,o(r)},complete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.errMsg,n=i()(e,["errMsg"]);if(t&&!/^\w+:(ok|fail)/.test(t)){var r=new Error(e.errMsg.replace(/^\w+:/,""));Object.assign(r,n),r[C]=n,r._complete_hook=!0,o(r)}}})].concat(r))}))}},k=function(e,t){return function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.success,o=n.fail,a=n.complete,s=i()(n,["success","fail","complete"]),c={success:r,fail:o,complete:a},u=arguments.length,l=new Array(u>1?u-1:0),d=1;d<u;d++)l[d-1]=arguments[d];t.apply(void 0,[s].concat(l)).then((function(t){return(0,v.FE)({name:e,args:c,success:!0,res:t})}),(function(t){t._complete_hook?(0,v.S3)({name:e,args:c,errMsg:t.message,res:t[C]||{}}):(0,v.FE)({name:e,args:c,success:!1,errMsg:t.message,res:t[C]||{}})}))}},x=function(e,t){return I(k(e,t))}},6315:(e,t,n)=>{"use strict";n.d(t,{I:()=>u});var r=n(7264),i=n(8947),o=n(7349),a=n(4410),s="",c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{s=e.transitExtraData.adUxInfo}catch(e){s=""}};"undefined"!=typeof __safeway__&&(i.Z.onReady((function(){c(i.Z.appLaunchInfo)})),(0,r.n)("onAppEnterForeground",(function(e){c(e)})),(0,r.n)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"back"!==e.mode&&"close"!==e.mode||(s="")})),(0,a.L)("getAdUxInfo",(function(e,t){(0,o.n)("adUxInfoGot",{adUxInfo:s,callbackId:e.callbackId},[t])})));var u=function(){return s}},1126:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(6315);function i(e,t,n,i){"navigateToMiniProgram"!==e&&"openUrl"!==e&&"private_openUrl"!==e||(t.adUxInfo=t.adUxInfo||(0,r.I)()),__safeway__.bridge.invoke(e,t,n,i)}},1570:(e,t,n)=>{"use strict";n.d(t,{be:()=>x,F0:()=>w,wo:()=>y,IN:()=>C,bb:()=>T,qu:()=>E,oQ:()=>S});var r=n(1126),i=n(8392),o={},a={},s={},c=0,u=function(e,t){return Object.keys(t).map((function(n){return Object.keys(t[n]).map((function(r){return{func:n,result:e,errMsg:r,count:t[n][r]}}))}))},l=function(){var e=u(1,o),t=u(2,a),n=u(3,s),r=[].concat(e,t,n);0!==r.length&&(0,i.IN)("reportRealtimeAction",{actionData:JSON.stringify({business:"mmbizwxajsapi",dataType:1,dataArray:r,appType:Reporter.getAppType()})}),o={},a={},s={}},d=n(3082),f=n(3704),p=n(8947),h=n(9267),g=n(2335),v=n(2363),_=["open","openSync","close","closeSync","fstat","fstatSync","write","writeSync","read","readSync","truncate","truncateSync","ftruncate","ftruncateSync"],m=function(e){return v.jP||v.wZ&&_.includes(e)};function y(e,t){return Object.keys(e).reduce((function(n,r){return"function"==typeof e[r]&&(n[r]=__errorTracer__.surroundThirdByTryCatch(e[r],"at api ".concat(t," ").concat(r," callback function")),delete e[r]),n}),{})}function b(e,t){return Object.keys(e).reduce((function(n,r){return"function"==typeof e[r]&&(n[r]=(0,d.Hw)(e[r],"at api ".concat(t," ").concat(r," callback function")),n[r]._argumentsLength=e[r].length),n}),{})}function w(e,t,n,r){e.errMsg=e.errMsg||"".concat(t,":ok");var i=0===e.errMsg.indexOf("".concat(t,":ok")),u=new RegExp("".concat(t,":(fail |fail:)?cancel")).test(e.errMsg),d=0===e.errMsg.indexOf("".concat(t,":fail"));"function"==typeof r.beforeAll&&r.beforeAll(e),i?function(e,t,n){var r=function(){"function"==typeof e.success&&e.success(t),"function"==typeof n.afterSuccess&&n.afterSuccess(t)};"function"==typeof n.beforeSuccess?2===n.beforeSuccess._argumentsLength?n.beforeSuccess(t,r):(n.beforeSuccess(t),r()):r()}(n,e,r):u?function(e,t,n,r){var i=new RegExp("".concat(t,":(fail |fail:)?cancel"));e.errMsg=e.errMsg.replace(i,"".concat(t,":fail cancel")),"function"==typeof n.fail&&n.fail(e),"function"==typeof r.beforeCancel&&r.beforeCancel(e),"function"==typeof n.cancel&&n.cancel(e),"function"==typeof r.afterCancel&&r.afterCancel(e)}(e,t,n,r):d&&function(e,t,n,r){"function"==typeof e.beforeFail&&e.beforeFail(n),"function"==typeof r.fail&&r.fail(n),"function"==typeof e.afterFail&&e.afterFail(n),(0,h.mf)(e.checkNeedReportFail)&&!1===e.checkNeedReportFail(n)||Reporter.reportIDKey({key:"".concat(t,"_fail")})}(r,t,e,n),"function"==typeof n.complete&&n.complete(e),"function"==typeof r.afterAll&&r.afterAll(e),function(e,t,n,r,i){var u;(u=t?o:n?a:s)[e]=u[e]||{},u[e][i]=(u[e][i]||0)+1,Date.now()-c>=6e4&&(c=Date.now(),setTimeout(l,6e4))}(t,i,d,0,e.errMsg)}function I(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";(0,h.Kn)(n)||(n={}),"operateWXData"===t&&n._isFromBaseOperateWXData;var a=y(n,t);if(n=Object.assign({},n),i=b(i,t),Reporter.reportIDKey({key:t}),!e){if(0===p.Z.appType&&f.g4.has(t)&&!(0,f.V8)(t))return void w({errMsg:"".concat(t,":fail API has been banned")},t,a,i);delete n.pluginId,delete n.permissionBytes,"/"!==o&&(n.pluginId=o)}var s=m(t);(0,r.d)(t,n,(function(e){w(e,t,a,i)}),s)}}var S=I(!1),C=function(e,t,n){g.e4.indexOf(e)<0?S(e,t,n):(0,g.LY)(e,t,n)},T=function(e,t,n){return(0,d.Vl)((function(t){return C(e,t,n)}))(t)},E=function(e){return e?function(t,n,r){S(t,n,r,e)}:C},k=I(!0),x=function(e,t,n){k(e,t,n)}},9762:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});var r=n(3082);function i(e,t){!function(e,t){__safeway__.bridge.on(e,t)}(e,(0,r.Hw)(t,"at api ".concat(e," callback function")))}},7349:(e,t,n)=>{"use strict";function r(e,t,n){!function(e,t,n){__safeway__.bridge.publish(e,t,n)}(e,{data:t,options:{timestamp:Date.now()}},n)}n.d(t,{n:()=>r})},4410:(e,t,n)=>{"use strict";function r(e,t){!function(e,t){__safeway__.bridge.subscribe(e,t)}(e,(function(e,n){var r=e.data,i=e.options,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i&&i.timestamp||0,s=Date.now();Reporter.speedReport({key:"webview2AppService",data:r||{},timeMark:{startTime:a,endTime:s,nativeTime:o.nativeTime||0}}),"function"==typeof t&&t(r,n)}))}n.d(t,{L:()=>r})},8392:(e,t,n)=>{"use strict";n.d(t,{be:()=>o.be,gM:()=>A,r3:()=>u,FE:()=>p,S3:()=>f,YG:()=>d,zy:()=>l,F0:()=>o.F0,wo:()=>o.wo,dw:()=>h.d,IN:()=>o.IN,bb:()=>o.bb,qu:()=>o.qu,oQ:()=>o.oQ,jQ:()=>a.j,nY:()=>r.n,Ld:()=>i.L});var r=n(7349),i=n(4410),o=n(1570),a=n(9762),s=n(3082),c=n(9267);function u(e,t,n){var r=(0,c.x7)(t,n);return!r||(d(e,t,"parameter error: ".concat(r)),!1)}function l(e,t){var n=(0,c.x7)(e,t);if(n)throw new Error("parameter error: ".concat(n))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;p({name:e,args:t,errMsg:n,errCode:r,success:!1})}function f(e){var t=e.name,n=e.args,r=void 0===n?{}:n,i=e.errMsg,o=void 0===i?"":i,a=e.res,c=void 0===a?{}:a;r=r||{};var u="".concat(t,":").concat(o),l=__errorTracer__.surroundThirdByTryCatch(r.complete||s.ZT,"at api ".concat(t," complete callback function"));c.errMsg=u,l(c)}function p(e){var t=e.name,n=e.args,r=void 0===n?{}:n,i=e.success,o=void 0===i||i,a=e.errMsg,u=void 0===a?"":a,l=e.errCode,d=e.res,f=void 0===d?{}:d;r=r||{};var p=o?"".concat(t,":ok"):"".concat(t,":fail ").concat(u),h=__errorTracer__.surroundThirdByTryCatch((o?r.success:r.fail)||s.ZT,"at api ".concat(t," ").concat(o?"success":"fail"," callback function")),g=__errorTracer__.surroundThirdByTryCatch(r.complete||s.ZT,"at api ".concat(t," complete callback function"));f.errMsg=p,(0,c.hj)(l)&&(f.errCode=l),h(f),g(f)}var h=n(1126),g=n(8676),v=n.n(g),_=n(8947),m=n(3638),y="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",b="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function w(e){return function(t){return(0,c.HD)(t)&&t.length>e?t.substr(0,e):t}}function I(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,c.Em)(e);switch(n){case"Number":case"Boolean":return e;case"String":return w(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return"[Error:".concat(I(e.message),"|").concat(I(e.stack),"]");case"Object":return t?Object.keys(e).map((function(t){return"".concat(I(t),"=").concat(I(e[t],!1))})).sort((function(e,t){return e.length-t.length})).join("&")||"{}":"[".concat(n,"]");default:return"[".concat(n,"]")}}function S(e){var t=e.WXDataApiName,n=e.argument,r=e.isSuccess,i=e.invokeTime,o=e.costTime,a=e.result,s=e.errMsg,c=e.isConfirm,u=e.queueLength,l=e.wxdataQueueTimestamp,d=e.wxdataDequeueTimestamp,f=e.beginCGITimestamp,p=e.CGICallbackTimestamp,h=e.beginCGITimestampAfterConfirm,g=e.CGICallbackTimestampAfterConfirm,v=e.wxlibCallbackTimestamp,S=e.requestInQueue,C=e.requestingCount,T=e.cost1,E=e.cost2,k=e.cost3,x=e.cost4,A=e.cost5,P=e.cost6;Math.random()<.05&&setTimeout((function(){var e=m.Z.currentNetworkType,D=_.Z.appType+1e3,O=_.Z.appLaunchInfo&&void 0!==_.Z.appLaunchInfo.scene?_.Z.appLaunchInfo.scene:0,N=[t,I(JSON.stringify(n)),r?1:0,i,o,e,I(a),D,O,y,b,s&&I(s)||"",c?1:0,u,T,E,k,x,A,P,0,S?1:0,C,i,l,d,f,p,h,g,v].map(w(1024)).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:N})}),0)}(0,c.HD)(y)&&(y=y.replace(" ","")),(0,c.HD)(b)&&(b=b.replace(" ","-"));var C=0,T=wxNativeConsole.createLogger("baseOperateWXData"),E=["webapi_getuserinfo","webapi_getwerunstep_history","subscribemsg"],k=["webapi_getuserinfo","webapi_getuserallappauth","webapi_getadvert","webapi_getshareinfo"],x=["qbase_commapi","webapi_botdemo"];function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},e);n._isFromBaseOperateWXData=!0;var r=t.beforeAll,i=t.beforeSuccess,a=t.beforeFail,s=n.data&&n.data.api_name;E.includes(s)?n.requestInQueue=!0:n.requestInQueue=!1,k.includes(s)?n.isImportant=!0:n.isImportant=!1,x.includes(n.data&&n.data.api_name)&&(n.keepAlive=!0);var c={isSuccess:void 0,WXDataApiName:s,argument:n,invokeTime:Date.now(),requestInQueue:n.requestInQueue,requestingCount:++C};T.info("".concat(n.data.api_name," _options.requestInQueue"),n.requestInQueue);for(var u=arguments.length,l=new Array(u>2?u-2:0),d=2;d<u;d++)l[d-2]=arguments[d];o.IN.apply(void 0,["operateWXData",n,{beforeAll:function(e){var n=Date.now();C--,c.costTime=n-c.invokeTime;try{if(e&&e.data&&e.data.data?c.result=JSON.stringify(e.data):c.result=e.data,e.clientInfo&&"object"===v()(e.clientInfo)){var i=e.clientInfo;Object.keys(i).forEach((function(e){c[e]=i[e]})),c.cost1=i.wxdataQueueTimestamp-c.invokeTime,c.cost2=i.wxdataDequeueTimestamp-i.wxdataQueueTimestamp,c.cost3=i.beginCGITimestamp-i.wxdataDequeueTimestamp,c.cost4=i.CGICallbackTimestamp-i.beginCGITimestamp,c.cost5=i.wxlibCallbackTimestamp-i.CGICallbackTimestamp,c.cost6=n-i.wxlibCallbackTimestamp}}catch(e){T.error(e)}"function"==typeof r&&r.call(t,e)},beforeSuccess:function(e){c.isSuccess=!0,n.data.data&&n.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=c),"function"==typeof i&&i.call(t,e),S(c)},beforeFail:function(e){c.isSuccess=!1,c.errMsg=e.errMsg,n.data.data&&n.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=c),"function"==typeof a&&a.call(t,e),S(c)}}].concat(l))}},7264:(e,t,n)=>{"use strict";n.d(t,{n:()=>a,r:()=>s});var r=n(9762),i=n(9307),o={},a=function(e,t){var n=(0,i.s)("WeixinJSBridge-".concat(e));o[e]||((0,r.j)(e,(function(){n.emit.apply(n,arguments)})),o[e]=!0),n.internalOnMethod(t)},s=function(e,t){(0,i.s)("WeixinJSBridge-".concat(e)).internalOffMethod(t)}},4377:(e,t,n)=>{"use strict";n.d(t,{yH:()=>i,Do:()=>o,rW:()=>s,vL:()=>c,bh:()=>u,KK:()=>a});var r=n(8392),i=function(e){(0,r.r3)("saveFile",e,{tempFilePath:""})&&(0,r.IN)("saveFile",e)},o=function(e,t){if(!e||"string"!=typeof e)throw new Error("tempFilePath must be a string");if(void 0!==t&&"string"!=typeof t)throw new Error("filePath must be a string");var n,i;if((0,r.IN)("saveFileSync",{tempFilePath:e,filePath:t,success:function(e){i=e.savedFilePath},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return i},a=function(e){(0,r.r3)("openDocument",e,{filePath:""})&&(e.showMenu=e.showMenu||!1,(0,r.IN)("openDocument",e))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.IN)("getSavedFileList",e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.r3)("getSavedFileInfo",e,{filePath:""})&&(0,r.IN)("getSavedFileInfo",e)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.r3)("removeSavedFile",e,{filePath:""})&&(0,r.IN)("removeSavedFile",e)}},5179:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(8392),i=n(9267),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,r.r3)("getFileInfo",e,{filePath:""})){if(void 0!==e.digestAlgorithm){var t=(0,i.x7)(e,{digestAlgorithm:""});if(t)return void(0,r.YG)("getFileInfo",e,"parameter error: ".concat(t));if(-1===["md5","sha1"].indexOf(e.digestAlgorithm))return void(0,r.YG)("getFileInfo",e,'parameter error: invalid digestAlgorithm "'.concat(e.digestAlgorithm,'"'))}(0,r.IN)("getFileInfo",e,{})}}},8325:(e,t,n)=>{"use strict";n.d(t,{t2:()=>N,ZP:()=>W,WZ:()=>U});var r,i=n(572),o=n.n(i),a=n(4377),s=n(5179),c=n(2274),u=n(8392),l=["ascii","base64","binary","hex","ucs2","ucs-2","utf16le","utf-16le","utf8","utf-8","latin1"],d=n(2903),f=n(8947),p=n(2363),h=p.gm?"http://":"wxfile://",g=[],v=!1;p.cj?r=new RegExp("^".concat(h,"tmp_")):p.wZ&&(r=new RegExp("^tmp_")),f.Z.onReady((function(){p.wZ||p.cj?(0,u.IN)("readdir",{dirPath:h,success:function(e){var t=e.files||[];g=t.filter((function(e){return r.test(e)})),v=!0}}):v=!0}));var _=function(e,t){if(/^wxfile:\/\/(tmp\/?)?$/.test(t)){var n=d.L.get();e.files=e.files.filter((function(e){return new RegExp("^".concat(t)).test(e)||(e="".concat(t).concat(e)),-1===n.indexOf(e)})).filter((function(e){return v?-1===g.indexOf(e):!r.test(e)}))}};var m=n(7163),y=n.n(m),b=n(5843),w=n.n(b),I=function(){function e(t){var n=t.mode,r=t.size,i=t.lastAccessedTime,o=t.lastModifiedTime;y()(this,e),this.mode=n,this.size=r,this.lastAccessedTime=i,this.lastModifiedTime=o}return w()(e,[{key:"_checkModeProperty",value:function(e){return(61440&this.mode)===e}},{key:"isDirectory",value:function(){return this._checkModeProperty(16384)}},{key:"isFile",value:function(){return this._checkModeProperty(32768)}}]),e}(),S=function(e,t){var n=!0;if(["mode","size","lastAccessedTime","lastModifiedTime"].forEach((function(t){n=n&&void 0!==e[t]})),n)e.stats=new I(e),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime;else if(e.stats&&1===Object.keys(e.stats).length&&e.stats[""])e.stats=new I(e.stats[""]);else{var r=[],i=e.stats;p.wZ&&(i=e,r.push({path:"/",stats:C(t)})),Object.keys(i).forEach((function(e){if("errMsg"!==e){var t=i[e];""===e&&(e="/"),r.push({path:e,stats:new I(t)}),delete i[e]}})),e.stats=r}},C=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new Error("path must be a string");if((0,u.IN)("statSync",{path:e,recursive:r,success:function(n){S(n,e),t=n.stats},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return t},T=n(9267),E="readZipEntry",k=["a","ax","a+","ax+","as","as+","r","r+","w","wx","w+","wx+"],x=n(9947),A=n(1503),P=n.n(A),D=n(9769),O=n(968),N={saveFile:a.yH,saveFileSync:a.Do,getSavedFileList:a.rW,getSavedFileInfo:a.vL,removeSavedFile:a.bh,getFileInfo:s.h,readFile:c.p,readFileSync:c.N,writeFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("writeFile",e,{filePath:""})&&(e.encoding&&-1===l.indexOf(e.encoding)?(0,u.YG)("writeFile",e,'invalid encoding "'.concat(e.encoding,'"')):(0,u.IN)("writeFile",e,{}))},writeFileSync:function(e,t,n){if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===l.indexOf(n))throw new Error('invalid encoding "'.concat(n,'"'));var r;if((0,u.IN)("writeFileSync",{filePath:e,data:t,encoding:n,fail:function(e){r=e.errMsg}}),r)throw new Error(r)},mkdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("mkdir",e,{dirPath:""})&&(0,u.IN)("mkdir",e)},mkdirSync:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");if((0,u.IN)("mkdirSync",{dirPath:e,recursive:n,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},rmdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("rmdir",e,{dirPath:""})&&(0,u.IN)("rmdir",e)},rmdirSync:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new Error("dirPath must be a string");if((0,u.IN)("rmdirSync",{dirPath:e,recursive:n,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},readdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("readdir",e,{dirPath:""})&&(0,u.IN)("readdir",e,{beforeSuccess:function(t){_(t,e.dirPath)}})},readdirSync:function(e){if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");var t,n;if((0,u.IN)("readdirSync",{dirPath:e,success:function(e){t=e.files},fail:function(e){n=e.errMsg}},{beforeSuccess:function(t){_(t,e)}}),n)throw new Error(n);return t},access:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("access",e,{path:""})&&(0,u.IN)("access",e)},accessSync:function(e){if(!e||"string"!=typeof e)throw new TypeError("path must be a string");var t;if((0,u.IN)("accessSync",{path:e,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},unlink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("unlink",e,{filePath:""})&&(0,u.IN)("unlink",e)},unlinkSync:function(e){if(!e||"string"!=typeof e)throw new Error("filePath must be a string");var t;if((0,u.IN)("unlinkSync",{filePath:e,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},stat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("stat",e,{path:""})&&(0,u.IN)("stat",e,{beforeSuccess:function(t){S(t,e.path)}})},statSync:C,unzip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("unzip",e,{zipFilePath:""})&&(0,u.IN)("unzip",Object.assign({},e,{targetDirectory:e.targetPath}))},copyFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("copyFile",e,{srcPath:"",destPath:""})&&(0,u.IN)("fs_copyFile",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("fs_copyFile:","copyFile:")}})},copyFileSync:function(e,t){if(!e||"string"!=typeof e)throw new Error("srcPath must be a string");if(!t||"string"!=typeof t)throw new Error("destPath must be a string");var n;if((0,u.IN)("fs_copyFileSync",{srcPath:e,destPath:t,fail:function(e){n=e.errMsg.replace("fs_copyFileSync:","copyFileSync:")}}),n)throw new Error(n)},rename:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("rename",e,{oldPath:"",newPath:""})&&(0,u.IN)("fs_rename",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},renameSync:function(e,t){if(!e||"string"!=typeof e)throw new Error("oldPath must be a string");if(!t||"string"!=typeof t)throw new Error("newPath must be a string");var n;if((0,u.IN)("fs_renameSync",{oldPath:e,newPath:t,fail:function(e){n=e.errMsg.replace(/^fs_/,"")}}),n)throw new Error(n)},appendFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("appendFile",e,{filePath:""})&&(e.encoding&&-1===l.indexOf(e.encoding)?(0,u.YG)("appendFile",e,'invalid encoding "'.concat(e.encoding,'"')):(0,u.IN)("fs_appendFile",e,{}))},appendFileSync:function(e,t,n){if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===l.indexOf(n))throw new Error('invalid encoding "'.concat(n,'"'));var r;if((0,u.IN)("fs_appendFileSync",{filePath:e,data:t,encoding:n,fail:function(e){r=e.errMsg}}),r)throw new Error(r)},readZipEntry:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)(E,e,{filePath:""})&&((0,T.o8)(e.encoding)||-1!==l.indexOf(e.encoding)?"all"===e.entries||Array.isArray(e.entries)?(0,u.IN)(E,e,{beforeSuccess:function(e){return e.entries&&Object.keys(e.entries).forEach((function(t){if(e[t]&&(e.entries[t].data=e[t],delete e[t]),"ok"===e.entries[t].errMsg?e.entries[t].errMsg="".concat(E,":ok"):e.entries[t].errMsg="".concat(E,":fail ").concat(e.entries[t].errMsg),0===t.indexOf("file:")){var n=t.replace("file:","");e.entries[n]=e.entries[t],delete e.entries[t]}})),e}}):(0,u.YG)(E,e,"invalid entries"):(0,u.YG)(E,e,'invalid encoding "'.concat(e.encoding,'"')))},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);(0,u.r3)("open",e,{filePath:""})&&(void 0===e.flag||k.includes(e.flag)?(void 0===e.flag&&(t.flag="r"),(0,u.IN)("open",t)):(0,u.YG)("open",e,'invalid flag "'.concat(e.flag,'"')))},openSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.filePath,i=n.flag;if(!r||"string"!=typeof r)throw new TypeError("filePath must be a string");if(void 0!==i&&!k.includes(i))throw new x.iZ("invalid flag: ".concat(i));if(void 0===i&&(i="r"),(0,u.IN)("openSync",{filePath:r,flag:i,fail:function(e){t=e.errMsg},success:function(t){e=t.fd}}),t)throw new Error(t);return e},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("close",e,{fd:""})&&(0,u.IN)("close",e)},closeSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fd;if(!n||"string"!=typeof n)throw new TypeError("fd must be a string");if((0,u.IN)("closeSync",{fd:n,fail:function(t){e=t.errMsg}}),e)throw new Error(e)},fstat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("fstat",e,{fd:""})&&(0,u.IN)("fstat",e,{beforeSuccess:function(e){var t=e.mode,n=e.size,r=e.lastAccessedTime,i=e.lastModifiedTime;r>1617e9&&(r=Math.floor(r/1e3)),i>1617e9&&(i=Math.floor(i/1e3)),e.stats=new I({mode:t,size:n,lastAccessedTime:r,lastModifiedTime:i}),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime}})},fstatSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.fd;if(!r||"string"!=typeof r)throw new TypeError("fd must be a string");if((0,u.IN)("fstatSync",{fd:r,fail:function(e){t=e.errMsg},success:function(t){var n=t.mode,r=t.size,i=t.lastAccessedTime,o=t.lastModifiedTime;i>1617e9&&(i=Math.floor(i/1e3)),o>1617e9&&(o=Math.floor(o/1e3)),e=new I({mode:n,size:r,lastAccessedTime:i,lastModifiedTime:o})}}),t)throw new Error(t);return e},write:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);if((0,u.r3)("write",t,{fd:""}))if(t.encoding&&-1===l.indexOf(t.encoding))(0,u.YG)("write",t,'invalid encoding "'.concat(t.encoding,'"'));else{if((0,T.eP)(t.data)){if(t.data.byteLength>10485760)return void(0,u.YG)("write",t,"ArrayBuffer exceed size limit (10M)");("number"!=typeof t.offset||t.offset<0)&&(t.offset=0),("number"!=typeof t.length||t.length<0)&&(t.length=t.data.byteLength-t.offset)}else if(!(0,T.HD)(t.data))return void(0,u.YG)("write",t,"data must be a string or ArrayBuffer");"number"!=typeof t.position&&(t.position=void 0),(0,u.IN)("write",t)}},writeSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.fd,i=n.data,o=n.offset,a=n.length,s=n.encoding,c=n.position;if(!r||"string"!=typeof r)throw new TypeError("fd must be a string");if(s&&-1===l.indexOf(s))throw new x.iZ('invalid encoding "'.concat(s,'"'));if((0,T.eP)(i)){if(i.byteLength>10485760)throw new x.iZ("ArrayBuffer exceed size limit (10M)");("number"!=typeof o||o<0)&&(o=0),("number"!=typeof a||a<0)&&(a=i.byteLength-o)}else if(!(0,T.HD)(i))throw new TypeError("data must be a string or ArrayBuffer");if("number"!=typeof c&&(c=void 0),(0,u.IN)("writeSync",{fd:r,data:i,offset:o,length:a,encoding:s,position:c,fail:function(t){e=t.errMsg},success:function(e){t={bytesWritten:e.bytesWritten}}}),e)throw new Error(e);return t},read:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,u.r3)("read",e,{fd:""}))if((0,T.eP)(e.arrayBuffer)){var t=Object.assign({},e);p.cj&&D.Z&&D.Z.trace&&(t.arrayBufferId=D.Z.trace(t.arrayBuffer,"rw"),delete t.arrayBuffer),(0,T.hj)(t.position)&&t.position<0?t.position=0:(0,T.o8)(t.position)||(0,T.Ft)(t.position)?t.position=null:(0,T.hj)(t.position)||(t.position=0);var n=Number(t.length);Number.isNaN(n)?t.length=0:t.length=n;var r=Number(t.offset);Number.isNaN(r)?t.offset=0:t.offset=r,(0,u.IN)("read",t,{beforeSuccess:function(t){t.arrayBuffer=e.arrayBuffer},afterAll:function(){p.cj&&D.Z&&D.Z.untrace&&D.Z.untrace(t.arrayBufferId)}})}else(0,u.YG)("FileSystemManager.read",e,"arrayBuffer must be an ArrayBuffer")},readSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fd,n=e.arrayBuffer;if(!t||"string"!=typeof t)throw new TypeError("fd must be a string");if(!(0,T.eP)(n))throw new TypeError("arrayBuffer must be an ArrayBuffer");var r=Object.assign({},e);p.cj&&D.Z&&D.Z.trace&&(r.arrayBufferId=D.Z.trace(r.arrayBuffer,"rw"),delete r.arrayBuffer),(0,T.hj)(r.position)&&r.position<0?r.position=0:(0,T.o8)(r.position)||(0,T.Ft)(r.position)?r.position=null:(0,T.hj)(r.position)||(r.position=0);var i=Number(r.length);Number.isNaN(i)?r.length=0:r.length=i;var o,a,s=Number(r.offset);if(Number.isNaN(s)?r.offset=0:r.offset=s,(0,u.IN)("readSync",P()(P()({},r),{},{fail:function(e){a=e.errMsg},success:function(e){o={bytesRead:e.bytesRead,arrayBuffer:n}}})),p.cj&&D.Z&&D.Z.untrace&&D.Z.untrace(r.arrayBufferId),a)throw new Error(a);return o},truncate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("truncate",e,{filePath:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),(0,u.IN)("truncate",e,{}))},truncateSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.filePath,r=t.length;if(!n||"string"!=typeof n)throw new Error("filePath must be a string");if("number"!=typeof r&&(r=0),(r=Math.floor(r))<0&&(r=0),(0,u.IN)("truncateSync",{filePath:n,length:r,fail:function(t){e=t.errMsg}}),e)throw new Error(e)},ftruncate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,u.r3)("ftruncate",e,{fd:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),(0,u.IN)("ftruncate",e))},ftruncateSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fd,r=t.length;if(!n||"string"!=typeof n)throw new Error("fd must be a string");if("number"!=typeof r&&(r=0),(r=Math.floor(r))<0&&(r=0),(0,u.IN)("ftruncateSync",{fd:n,length:r,fail:function(t){e=t.errMsg}}),e)throw new Error(e)}},R="",M="";f.Z.onReady((function(){try{R=f.Z.env.USER_DATA_PATH,M=f.Z.env.OPEN_DATA_PATH,delete f.Z.env.OPEN_DATA_PATH}catch(e){}}));var L={saveFile:["filePath"],saveFileSync:[1],readFile:["filePath"],readFileSync:[0],writeFile:["filePath"],writeFileSync:[0],mkdir:["dirPath"],mkdirSync:[0],rmdir:["dirPath"],rmdirSync:[0],readdir:["dirPath"],readdirSync:[0],access:["path"],accessSync:[0],unlink:["filePath"],unlinkSync:[0],stat:["path"],statSync:[0],unzip:["zipFilePath","targetPath"],copyFile:["srcPath","destPath"],copyFileSync:[0,1],rename:["oldPath","newPath"],renameSync:[0,1],appendFile:["filePath"],appendFileSync:[0]},B=function(e){"string"==typeof e&&e.startsWith(R+"/__plugins__")&&Reporter.reportKeyValue({key:"Error",value:[1,"FrameworkError","Warning: MiniProgram is using reserved plugin path",e,__libVersionInfo__.version,0,"","",__libVersionInfo__.updateTime,"",0,"",0].map(encodeURIComponent).join(",")})},F=function(e,t){return"string"!=typeof e||!e.startsWith("wxfile://ad")&&((!(0,O.Av)()||!e.startsWith("wxfile://usr")&&!e.startsWith("http://usr"))&&!e.startsWith("opendata"===t?R:M))},j=function(e){var t={};return Object.keys(N).forEach((function(n){var r=N[n];t[n]=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!L[n])return r.apply(void 0,o()(i));L[n].forEach((function(e){var t=n.endsWith("Sync")?i:i[0];B(t[e])}));var s=L[n].every((function(t){var r=n.endsWith("Sync")?i:i[0];return F(r[t],e)}));if(s)return r.apply(void 0,o()(i));if(n.endsWith("Sync"))throw new Error("".concat(n,":fail permission denied"));i=i[0]||{},(0,u.YG)(n,i,"permission denied")}})),t};const W={app:j("app"),game:j("game"),opendata:j("opendata")};function U(){return M}},2274:(e,t,n)=>{"use strict";n.d(t,{p:()=>h,N:()=>g});var r=n(8392),i=n(8976),o=n(6965),a=n(2363),s=n(8947),c=n(9954),u=n(6589),l=n(9267),d=n(9947),f=o.Z.fs,p=!1;f&&f.FileReader&&s.Z.onReady((function(){var e=!1,t=a.cj?"clicfg_appbrand_ios_native_readfile":"clicfg_appbrand_native_readfile";(0,c.b)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&((0,u.T)(/readFile(?:Sync)?$/,1),e=!0)},fail:function(e){}});var n=(0,i.J)("bindingReadFile");"".concat((p=e||n)?"binding":"jsapi"," readfile, abtest: ").concat(e,", permission: ").concat(n)}));var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,r.r3)("readFile",e,{filePath:""}))if((0,l.o8)(e.encoding)||(0,l.HD)(e.encoding))if((0,l.o8)(e.position)||(0,l.hj)(e.position))if((0,l.o8)(e.length)||(0,l.hj)(e.length))if(p){var t=new f.FileReader;t.onerror=function(t){return(0,r.YG)("readFile",e,t)},t.onread=function(t){return(0,r.FE)({name:"readFile",args:e,res:{data:t}})},t.read(e.filePath,e.encoding)}else(0,r.IN)("readFile",e);else(0,r.YG)("readFile",e,"invalid length: ".concat(e.length));else(0,r.YG)("readFile",e,"invalid position: ".concat(e.position));else(0,r.YG)("readFile",e,"invalid encoding: ".concat(e.encoding))},g=function(e,t,n,i){if(!e||!(0,l.HD)(e))throw new d.iZ("invalid filePath: ".concat(e));if(!(0,l.o8)(t)&&!(0,l.HD)(t))throw new d.iZ("invalid encoding: ".concat(t));if(!(0,l.o8)(n)&&!(0,l.hj)(n))throw new d.iZ("invalid position: ".concat(n));if(!(0,l.o8)(i)&&!(0,l.hj)(i))throw new d.iZ("invalid length: ".concat(i));if(p)try{return f.readFileSync(e,t)}catch(a){throw new Error(a)}var o,a;if((0,r.IN)("readFileSync",{filePath:e,encoding:t,position:n,length:i,success:function(e){o=e.data},fail:function(e){a=e.errMsg}}),a)throw new Error(a);return o}},2984:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(8392),i=n(2363);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){};return function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"operateWXDataFactory name=".concat(e,", APIName=").concat(t),n=a(c),"operateWXDataFactory ".concat(e,": transedReqArgs"),(0,r.gM)(Object.assign({},c,{data:Object.assign({api_name:t},o,n?{data:n}:void 0),requestInQueue:!c.hasOwnProperty("requestInQueue")||Boolean(c.requestInQueue)}),{beforeAll:function(t){"operateWXDataFactory ".concat(e,": beforeAll"),t.errMsg=t.errMsg.replace("operateWXData",e)},beforeSuccess:function(t){if(i.wZ&&"string"==typeof t.data&&(t.data=JSON.parse(t.data)),t.data.data){t.rawData=t.data.data;var n=JSON.parse(t.data.data);t=Object.assign(t,n)}t.data.signature&&(t.signature=t.data.signature),t.data.encryptedData&&(t.encryptedData=t.data.encryptedData,t.iv=t.data.iv,t.data.cloud_id&&(t.cloudID=t.data.cloud_id)),delete t.data,t=s(t),"operateWXDataFactory ".concat(e,": transedRespArgs")}})}}},8072:(e,t,n)=>{"use strict";n.d(t,{k:()=>o});var r=n(8392),i=n(968),o=function(e){var t=e.api,n=e.url;return(0,i.vB)()?Promise.resolve({isInDomainList:!0,isLocalHost:!1,isInLAN:!0}):new Promise((function(e,i){(0,r.IN)("checkNetworkAPIURL",{api:t,url:n,success:e,fail:i})}))}},7100:(e,t,n)=>{"use strict";var r=n(8947),i=n(968),o=n(9366),a=(n(5810),{});r.Z.onReady((function(){a=r.Z.appLaunchInfo,(0,i.aI)()&&((0,o.OQ)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);a.referrerInfo=Object.assign({},a.referrerInfo,t.referrerInfo),delete t.referrerInfo,a=Object.assign({},a,t)})),(0,o.Ke)((function(e){e})))}))},5810:(e,t,n)=>{"use strict";n.d(t,{Ir:()=>d,x9:()=>f,Br:()=>p});var r,i,o=n(8676),a=n.n(o),s=n(3618),c=n(8947),u=n(8976),l=n(3201);c.Z.onReady((function(){var e=p(c.Z.appLaunchInfo||{});r=e.appLaunchInfo,i=e.publicLaunchInfo}));var d=function(){return i},f=function(){return r};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareInfo,n=e.scene,r=e.query||{};"object"===a()(t)&&null!==t&&(e.shareTicket=s.Z.set(t.shareKey,t.shareName),s.Z.lastShareTicket=e.shareTicket),e.query=e.query||{},e.scene=e.scene?parseInt(e.scene,10):e.scene,e.referrerInfo=e.referrerInfo||{},1022===e.scene&&(r=e.query={}),!1===e.reLaunch&&(r={}),(0,l.B)(),void 0===e.reLaunch&&"hide"===(0,l.B)()&&(r={}),1103===e.scene&&(n=1001),1104===e.scene&&(n=1089),1158!==e.scene&&1159!==e.scene&&1160!==e.scene||!(0,u.J)("getGroupToolbarInfo")&&(n=1008);var i={scene:n,query:r,shareTicket:e.shareTicket,referrerInfo:e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{}};return c.Z.debugLaunchInfo&&c.Z.debugLaunchInfo.lanDebugInfo&&!1!==c.Z.debugLaunchInfo.lanDebugInfo.useStaticServer&&(i.lanDebugInfo=c.Z.debugLaunchInfo.lanDebugInfo),e.chatType&&(i.chatType=e.chatType),{publicLaunchInfo:i,appLaunchInfo:e}}},5037:(e,t,n)=>{"use strict";n.d(t,{H:()=>Wt});var r=n(3356),i=n.n(r),o=n(7015),a=n.n(o),s=n(8947),c=n(9567),u=n(2363),l=n(6965),d=l.Z.Image;Object.defineProperty,Object.getOwnPropertyDescriptor,Object.prototype.hasOwnProperty,new WeakMap;var f=n(3082),p=n(8392),h=n(2903),g=n(8676),v=n.n(g),_=function(e){return"object"===v()(e)&&null!==e},m=function(){var e={};return{dirtyTextureMap:new WeakMap,dirtyRenderbufferMap:new WeakMap,dirtyFramebufferMap:new WeakMap,framebufferTextureMap:new WeakMap,framebufferRenderbufferMap:new WeakMap,textures:[],currentTextureIndex:0,screenFramebuffer:e,currentFramebuffer:e}},y=function(){var e=arguments[arguments.length-1],t=yt(e),n=yt(this.canvas).flag,r=n.textures,i=n.currentTextureIndex,o=n.dirtyTextureMap,a=r[i];_(a)&&(t&&t.isSharedCanvas?o.set(a,!0):o.has(a)&&o.delete(a))},b=function(){var e=yt(this.canvas).flag,t=e.textures,n=e.currentFramebuffer,r=e.dirtyFramebufferMap,i=e.framebufferTextureMap,o=e.dirtyTextureMap,a=e.framebufferRenderbufferMap,s=e.dirtyRenderbufferMap;if(t.some((function(e){return o.has(e)}))){r.set(n,!0);var c=i.get(n);_(c)&&o.set(c,!0);var u=a.get(n);_(u)&&s.set(u,!0)}},w={activeTexture:function(e){var t=e-this.TEXTURE0;yt(this.canvas).flag.currentTextureIndex=t},bindTexture:function(e,t){var n=yt(this.canvas).flag;n.textures[n.currentTextureIndex]=t},wxBindCanvasTexture:function(e,t){var n=yt(this.canvas).flag,r=n.textures,i=n.currentTextureIndex,o=n.dirtyTextureMap;if(_(t)){var a=yt(t),s={type:"WeixinCanvasTexture"};r[i]=s,a&&a.isSharedCanvas?o.set(s,!0):o.has(s)&&o.delete(s)}else r[i]=null},texImage2D:y,texSubImage2D:y,bindFramebuffer:function(e,t){var n=yt(this.canvas).flag;n.currentFramebuffer=t||n.screenFramebuffer},framebufferTexture2D:function(e,t,n,r){var i=yt(this.canvas).flag,o=i.framebufferTextureMap,a=i.currentFramebuffer;o.set(a,r)},framebufferRenderbuffer:function(e,t,n,r){var i=yt(this.canvas).flag,o=i.dirtyRenderbufferMap,a=i.dirtyFramebufferMap,s=i.framebufferRenderbufferMap,c=i.currentFramebuffer;o.has(r)&&a.set(c,!0),s.set(c,r)},copyTexImage2D:function(){var e=yt(this.canvas).flag,t=e.dirtyFramebufferMap,n=e.currentFramebuffer,r=e.textures,i=e.currentTextureIndex,o=e.dirtyTextureMap;if(t.has(n)){var a=r[i];_(a)&&o.set(a,!0)}},drawArrays:b,drawElements:b},I=n(8976),S=n(3624),C=n(968),T=function(e){return!yt(e).secure},E=function(e,t){var n=yt(t);if(!n)return!0;var r=n.secure;return!(!yt(e).secure&&r)},k=function(e){return function(){if(/texImage2D|texSubImage2D/.test(e)){var t=yt(this.canvas),n=t.flag,r=n.textures,i=n.currentTextureIndex,o=r[i];if(o&&"WeixinCanvasTexture"===o.type)return void console.warn("在调用 wxBindCanvasTexture() 向 ".concat(i," 号纹理单元提交纹理后，不能再调用 ").concat(e,"() 向该纹理单元提交纹理"))}var a=this.canvas,s=/createPattern|drawImage/.test(e)?arguments[0]:arguments[arguments.length-1];if(E(a,s))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，非安全 Canvas 的 WebGL 上下文的 ".concat(e," 不能传入安全 Canvas"))}},x=!1,A="unknown";s.Z.onReady((function(){x=(0,I.J)("screenCanvasReadPixels"),A=(0,C.KU)("screenCanvasReadPixelsFreely")}));var P,D={toDataURL:function(){return!!T(this)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 不能调用 toDataURL"),"")},getImageData:function(){return!!T(this.canvas)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 的 2d 上下文不能调用 getImageData"),{width:0,height:0,data:new Uint8ClampedArray(0)})},createPattern:k("createPattern"),drawImage:k("drawImage"),texImage2D:k("texImage2D"),texSubImage2D:k("texSubImage2D"),wxBindCanvasTexture:k("wxBindCanvasTexture"),readPixels:function(){if(!yt(this.canvas).secure)return!0;if((0,S.v)("WebGLRenderingContext.readPixels"),x){var e=yt(this.canvas).flag,t=e.dirtyFramebufferMap,n=e.currentFramebuffer;if(!t.has(n)||((0,S.v)("unsafeScreenCanvasReadPixelsUsedBefore"),!1!==A))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，绘制了 sharedCanvas 的画布不能 readPixels")}else(0,S.v)("screenCanvasReadPixelsNoPermission")}},O=l.Z.Canvas,N=l.Z.Image,R={"2d":null,webgl:null},M={Image:null,Canvas:null,CanvasRenderingContext2D:null,CanvasPattern:null,CanvasGradient:null,ImageData:null,TextMetrics:null},L=new WeakMap;function B(){var e=new O;return e.width=1,e.height=1,e}function F(e){var t={};return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);if("function"!=typeof r.value)r.get||r.set?Object.defineProperty(t,n,{get:function(){if(r.get)return r.get.call(this)},set:function(e){r.set&&r.set.call(this,e)}}):Object.defineProperty(t,n,r);else{var i=e[n];t[n]=function(){if("function"==typeof D[n]){var e=D[n].apply(this,arguments);if(!0!==e)return e}return"function"==typeof w[n]&&w[n].apply(this,arguments),i.apply(this,arguments)}}})),t}var j,W=function(){if(P)return P;var e=B(),t=F(Object.getPrototypeOf(e)),n=t.getContext;return t.getContext=function(e,t){if(yt(this).isSharedCanvas)return{};var r=n.call(this,e,t);return null===r||(/2d|webgl/.test(e)&&Object.setPrototypeOf(r,function(e){if(R[e])return R[e];var t=B().getContext(e),n=F(Object.getPrototypeOf(t));return R[e]=n,R[e]}(e)),L.set(r,this),Object.defineProperty(r,"canvas",{value:this,configurable:!1,writeable:!1})),r},P=t,t},U=n(6051),V=wxGA,G=n(9727),H=n.n(G),Z=0,q=1,z=2,Y=3,K={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267};j={},H()(j,Z,"thirdScriptError"),H()(j,q,"widgetThirdScriptError"),H()(j,z,"gameThirdScriptError"),H()(j,Y,"gameSubContextThirdScriptError");var J=n(7587),$=n(4744),X=n(5401),Q=n(4675),ee=n(2984),te=(0,ee.Z)("getPotentialFriendList","webapi_game_potential_friends",{},{},(function(){}),(function(e){return e.list=e.friend_list,delete e.friend_list,delete e.rawData,e})),ne=(0,ee.Z)("getGroupInfo","webapi_getshareinfo_byopengid",{},{},(function(e){return{opengid_list:[e.openGId]}}),(function(e){return e.name=e.info_list[0].room_topic,delete e.info_list,delete e.rawData,e}));var re=n(5852),ie={};function oe(){return Object.keys(ie).map((function(e){return"".concat(e,"=").concat(ie[e])})).join("&")}function ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={openId:e.openId,title:e.title||s.Z.accountInfo.nickname,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId,success:e.success,fail:e.fail,complete:e.complete};t.query=oe(),(0,re.HP)(t,"shareAppMessageToSpecificContactDirectly")}var se=n(5770),ce=(0,se.Ce)(!1,"getUserInfo",!1,!0),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openIdList,n=void 0===t?[]:t,r=e.lang,i=void 0===r?"en":r,o=e.success,a=e.fail,s=e.complete;ce({apiName:"webapi_getuserinfo_byopenid",reqData:{openIdList:n,lang:i},success:function(e){var t=JSON.parse(e.respData.data).userInfoList||[];"function"==typeof o&&o({errMsg:e.errMsg,data:t})},fail:a,complete:s})},le=(0,ee.Z)("getUserCloudStorageKeys","webapi_getuserstorageallappkey",{},{},(function(){}),(function(e){return e.keys=e.data_key,delete e.data_key,delete e.rawData,e})),de=n(3379),fe=n.n(de),pe=n(4657),he=n(733),ge=n(7163),ve=n.n(ge),_e=n(5843),me=n.n(_e),ye=n(7615),be=n.n(ye),we=n(4742),Ie=n.n(we),Se=n(7541),Ce=n.n(Se),Te=n(12),Ee=n.n(Te),ke=n(9583),xe=n(6604),Ae=n(6301),Pe=n(422),De="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png",Oe="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht3OjibpgsQSWKlYHJ8u8AiacNQgu4ianBYzC5gEXmxS74iaGkZUzEbFjwp6n7d8rJV7JSA/0?wx_fmt=png",Ne=0,Re=0;s.Z.onReady((function(){var e=(0,Ae.Ew)();Ne=e.screenWidth,Re=e.screenHeight,(0,Pe.KN)((function(e){Ne=e.windowWidth,Re=e.windowHeight}))}));var Me=function(e){var t=e.cancelText,n=e.confirmText,r=e.icon,i=Ne>Re;return{mask:{width:Ne,height:Re,zIndex:1000007,opacity:.5,backgroundColor:"#000000"},tail:{bottom:0,height:12,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",left:i?(Ne-Re)/2:0,width:i?Re:Ne},popup:{bottom:0,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",borderRadius:12,left:i?(Ne-Re)/2:0,width:i?Re:Ne},header:{height:64,flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:i?Re:Ne},close:{width:14,height:14,marginLeft:20},title:{width:150,height:40,fontSize:15,lineHeight:40,textAlign:"center",color:"#000000"},close2:{width:14,height:14,marginRight:20},main:{flexDirection:"column",alignItems:"center",width:i?Re:Ne},icon:{height:64,width:64,marginTop:12,marginBottom:8},content:{height:60,fontSize:17,color:"#000000",textAlign:"center",lineBreak:"break-all",marginTop:r?0:64,marginBottom:r?0:15,width:i?.9*Re:.9*Ne},footer:{heihgt:40,marginBottom:32,flexDirection:"row",justifyContent:"center",width:i?Re:Ne},cancel:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#07c160",backgroundColor:"rgba(0, 0, 0, 0.05)",width:n?120:184},confirm:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#04c160",width:t?120:184}}},Le=function(e){Ie()(n,e);var t=Ce()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.title,o=r.content,a=r.icon,s=r.confirmText,c=r.cancelText,u=r.confirm,l=r.cancel,d=r.style,f=void 0===d?{}:d;ve()(this,n),e=t.call(this);var p=(0,xe.Wj)(be()(e)),h='<view id="container">\n      <view id="mask" />\n      <view id="tail" />\n      <view id="popup">\n        <view id="header">\n          <image id="close" src="'.concat(De,'" />\n          <text id="title" value="').concat(i,'" />\n          <text id="close2" />\n        </view>\n        <view id="main">\n          ').concat(a?'<image id="icon" src="'.concat(!0===a?Oe:a,'" />'):"",'\n          <text id="content" value="').concat(o,'" />\n        </view>\n        <view id="footer">\n          ').concat(c?'<text id="cancel" value="'.concat(c,'" />'):"","\n          ").concat(s?'<text id="confirm" value="'.concat(s,'" />'):"","\n        </view>\n      </view>\n    </view>"),g=Ee()(h),v=g.root,_=Me(arguments[0]);return Object.keys(f).forEach((function(e){_[e]&&Object.assign(_[e],f[e])})),xe.S1.call(be()(e),v,_),ke.uo.add(p.container),p.close&&p.close.on("click",(function(){"function"==typeof l&&l()})),p.cancel&&p.cancel.on("click",(function(){"function"==typeof l&&l()})),p.confirm&&p.confirm.on("click",(function(){"function"==typeof u&&u()})),e}return me()(n,[{key:"destroy",value:function(){var e=(0,xe.Wj)(this);ke.uo.remove(e.container),(0,xe.bn)(this)}}]),n}(xe.wA);function Be(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u.DD?((0,he._showModal)(Object.assign({},e,{showCancel:!!e.cancelText,success:function(t){var n=t.confirm,r=t.cancel;n?e.confirm&&e.confirm():r&&e.cancel&&e.cancel()}})),{destroy:function(){}}):new Le(e)}var Fe=n(9267);n(2208);var je=0,We=2,Ue=3;var Ve=n(5810),Ge=new pe.Q("InteractiveStorageModified",!0),He={add:1},Ze=(0,C.Fr)(ue);var qe=function(e){var t=e.actionId,n=e.actId,r=void 0===n?0:n,i=e.receiverOpenId,o=e.detail,a=e.opNum,s=void 0===a?0:a,c=e.operationType,u=[t,r,0,o,s,void 0===c?0:c,i].join(",");"[GameInteractiveData][reportAction] ".concat(u),Reporter.reportKeyValue({key:"GameInteractiveData",value:u})},ze=function(e){Reporter.reportIDKey({key:e})},Ye=(0,ee.Z)("modifyFriendInteractiveStorage","webapi_modifyfriendinteractivedata",{},{},(function(e){var t=e.key,n=e.operation,r=e.opNum,i=e.toUser;return{key:t,operation:n,debug:e.debug,opNum:r,toUser:i,action:e.action,object:e.object,ratio:e.ratio,quiet:!!e.quiet,op_num:r,to_user:i,random_number:Date.now(),randomNumber:Date.now()}}),(function(e){var t,n,r=e.json_resp,i=e.inner_errcode,o=e.inner_errmsg,a="modifyFriendInteractiveStorage:fail ";"[modifyFriendInteractiveStorage][callback] errMsg=".concat(e.errMsg," jsonResp=").concat(r,", innerErrCode=").concat(i,", innerErrMsg=").concat(o),delete e.json_resp,delete e.rawData,delete e.inner_errcode,delete e.inner_errmsg;try{t=JSON.parse(r)}catch(e){t={},"parse json_resp fail: ".concat(e.message)}if((n=t.log)&&n.split("\n").map(decodeURIComponent).forEach((function(e){var t=parseInt(e.substr(0,1),10),n="[JSServer]".concat(e.substr(1));switch(t){case je:console.log(n);break;case We:console.warn(n);break;case Ue:console.error(n)}})),!(0,Fe.o8)(i)&&0!==i)return e.errMsg="".concat(a).concat(o),void(e.errCode=i);try{var s=JSON.parse(t.base_resp);if(0!==s.errcode)return e.errCode=s.errmsg,void(e.errMsg="".concat(a).concat(s.errmsg));e.errCode=0}catch(t){e.errCode=-1,e.errMsg="".concat(a).concat(t.message),"".concat(a).concat(t.message)}})),Ke=n(7783),Je=(0,ee.Z)("getGameLifeProfile","webapi_getgamelifeprofile",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),$e=(0,ee.Z)("getGreetingControlInfo","webapi_getgreetingcontrolinfo",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),Xe=(0,ee.Z)("interactGameLifeTag","webapi_interactgamelifetag",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),Qe=n(9947),et=function(e){var t=e.url,n=e.success,r=e.fail,i=e.complete;(0,p.IN)("private_openUrl",{url:t,isNativeStyle:!0,success:n,fail:r,complete:i})},tt=n(8198),nt=n(6903),rt=(0,ee.Z)("gameTransfer","webapi_game_transfer",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),it=n(3383),ot={Component:xe.wA,getPrivateThis:xe.Wj,removePrivateThis:xe.bn,create:xe.Ue,init:xe.S1,webviewLayout:ke.uo,nativeviewLayout:ke._w,xmlParser:Ee()},at={Kanata:Kanata,wxGA:V,reportIDKey:function(e){var t=e.id,n=e.key,r=e.value;return Reporter.reportIDKey({id:t,key:n,value:r})},reportKeyValue:function(e){var t=e.key,n=e.value,r=e.immediately;return"number"!=typeof t||Object.values(K).includes(t)?Reporter.reportKeyValue({key:t,value:n,immediately:r}):Reporter.reportKeyValue({key:t,value:n,immediately:r,number:!0})},getXLogManager:function(){return J.s},getUserCloudStorage:$.u,getFriendCloudStorage:X.l,getGroupCloudStorage:Q.q,getPotentialFriendList:te,getGroupInfo:function(e){setTimeout((function(){ne(Object.assign({},e,{success:function(t){return(0,p.FE)({args:e,res:t,name:"getGroupInfo",success:!!t.name,errMsg:t.name?"":"invalid openGId"})}}))}))},shareMessageToFriend:ae,getUserInfo:ue,getUserCloudStorageKeys:le,modifyFriendInteractiveStorage:function(e){ze("modifyFriendInteractiveStorage");var t=Object.assign({},e,{success:function(t){(0,p.FE)({res:t,args:e,name:"modifyFriendInteractiveStorage",success:0===t.errCode,errCode:t.errCode,errMsg:t.errMsg}),t.errCode||Ge.emit("modified","".concat(e.key))}});t.quiet?function(e){var t=(0,Ve.x9)(),n=(0,re.A5)();!n&&t&&t.referrerInfo&&(n=t.referrerInfo.messageExtraData),n&&3===n.shareType&&n.userInfo?Ye(Object.assign(e,{toUser:n.userInfo.openID})):(0,p.YG)("modifyFriendInteractiveStorage",e,"game is not launch by click share card")}(t):t.toUser?s.Z.modifyFriendInteractiveStorageTemplates?function(e){Ze({openIdList:[e.toUser]}).then((function(t){var n,r,i,o,a=t.data[0].nickName,c=parseInt(e.key,10),u=e.toUser,l=e.opNum,d=He[e.operation],f=fe()(s.Z.modifyFriendInteractiveStorageTemplates);try{for(f.s();!(o=f.n()).done;)if((i=o.value).key===e.key){var h=i.ratio?" x".concat(l*i.ratio," ？"):"？";n="确认".concat(i.action," ").concat(a," ").concat(i.object).concat(h),r=encodeURIComponent(n);break}}catch(e){f.e(e)}finally{f.f()}if(!n)throw new Error("invalid key");var g={actId:c,receiverOpenId:u,detail:r,opNum:l,operationType:d};qe(Object.assign({actionId:1},g)),ze("modifyFriendInteractiveStorageShowModal");var v=Be({content:n,title:"".concat(i.action).concat(i.object),confirmText:"确认".concat(i.action),confirm:function(){v.destroy(),Ye(Object.assign({action:i.action,object:i.object,ratio:i.ratio},e,{success:function(t){if(e.success&&e.success(t),!t.errCode)var n="string"==typeof e.title,r=Be({title:"".concat(i.action).concat(i.object),icon:!0,content:n?"已".concat(i.action,"，马上告诉微信好友？"):"已".concat(i.action),cancelText:n?"下次吧":"我知道了",confirmText:!!n&&"告诉他",cancel:function(){r.destroy()},confirm:function(){r.destroy(),ae({openId:u,title:e.title,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId})}})}})),qe(Object.assign({actionId:2},g)),ze("modifyFriendInteractiveStorageConfirm")},cancel:function(){v.destroy(),(0,p.YG)("modifyFriendInteractiveStorage",e,"cancel"),qe(Object.assign({actionId:3},g)),ze("modifyFriendInteractiveStorageCancel")}})})).catch((function(t){var n=t.errMsg,r=t.message;(0,p.YG)("modifyFriendInteractiveStorage",e,n||r)}))}(t):s.Z.modifyFriendInteractiveStorageConfirmWording?function(e){Ze({openIdList:[e.toUser]}).then((function(t){var n=t.data[0].nickName,r=s.Z.modifyFriendInteractiveStorageConfirmWording.replace("${nickname}",n),i={actId:parseInt(e.key,10),receiverOpenId:e.toUser,detail:encodeURIComponent(r),opNum:e.opNum,operationType:He[e.operation]};qe(Object.assign({actionId:1},i)),ze("modifyFriendInteractiveStorageShowModal"),(0,he._showModal)({content:r,confirmText:"确定",cancelText:"取消",success:function(t){t.confirm?(Ye(e),qe(Object.assign({actionId:2},i)),ze("modifyFriendInteractiveStorageConfirm")):((0,p.YG)("modifyFriendInteractiveStorage",e,"cancel"),qe(Object.assign({actionId:3},i)),ze("modifyFriendInteractiveStorageCancel"))}})})).catch((function(t){var n=t.errMsg;(0,p.YG)("modifyFriendInteractiveStorage",e,n)}))}(t):(0,p.YG)("modifyFriendInteractiveStorage",e,"invalid modifyFriendInteractiveStorage config in game.json"):(0,p.YG)("modifyFriendInteractiveStorage",e,"toUser is required without quiet")},WebAssembly:Ke.J,getGameLifeProfile:Je,getGreetingControlInfo:$e,interactGameLifeTag:Xe,openGameLifeAccountInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete,i=e.query,o="https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/accountinfo.html";et({url:(0,Qe.cE)(o,i),success:t,fail:n,complete:r})},openGameLifeMiniGameTransfer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete,i=e.query,o="https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/minigametransfer.html";et({url:(0,Qe.cE)(o,i),success:t,fail:n,complete:r})},Function:Function.prototype.constructor,createCanvas:function(){return Ot.apply(void 0,arguments)},createScreenCanvas:function(){return Nt.apply(void 0,arguments)},createWebView:function(e){return new ke.kh(e)},navigateToMiniProgramDirectly:function(e){return(0,tt.iy)(e,e)},privateOpenUrl:nt.n8,gameTransfer:rt,coverview:ot,launchApplicationDirectly:it.dx,encode:function(e){if(u.gm){var t=null;return(0,p.IN)("encodeArrayBufferSync",Object.assign(e,{success:function(e){t=e.buffer},fail:function(){}})),t}return l.Z.encodeArrayBuffer(e.data,e.format)},decode:function(e){if(u.gm){var t="";return(0,p.IN)("decodeArrayBufferSync",Object.assign(e,{success:function(e){t=e.result},fail:function(){}})),t}return l.Z.decodeArrayBuffer(e.data,e.format)}},st={wxGA:846,Kanata:933,reportIDKey:847,reportKeyValue:848,getXLogManager:849,getUserCloudStorage:883,getFriendCloudStorage:884,getGroupCloudStorage:885,getPotentialFriendList:886,getGroupInfo:887,shareMessageToFriend:888,getUserInfo:915,getUserCloudStorageKeys:950,modifyFriendInteractiveStorage:951,WebAssembly:962,Function:963,getGameLifeProfile:964,getGreetingControlInfo:965,interactGameLifeTag:966,openGameLifeAccountInfo:979,openGameLifeMiniGameTransfer:980,gameTransfer:981,createCanvas:987,createScreenCanvas:987,createWebView:991,navigateToMiniProgramDirectly:1002,coverview:1005,launchApplication:1006,privateOpenUrl:1007,launchApplicationDirectly:1008,encode:1022,decode:1023},ct=Object.keys(st).map((function(e){return st[e]})),ut={},lt=["getUserCloudStorage","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getGroupInfo","shareMessageToFriend","getUserCloudStorageKeys","modifyFriendInteractiveStorage"],dt={},ft=function(e){return function(e){if(dt[e])return dt[e];ut[e]={},(0,p.IN)("getPluginPermissionBytes",{pluginList:[{indexes:ct,pluginId:e}],success:function(t){var n=t.pluginPermissionMap;if(n&&n[e])for(var r=0;r<n[e].length;r++){var i=ct[r];ut[e][i]=1===n[e][r]}}});var t={platform:s.Z.platform};for(var n in at){var r=st[n],i=ut[e][r];("wx20afc706a711eefc"===e||"wx4d5893418b75cb20"===e||i)&&("createCanvas"===n&&(pt=!0),-1===lt.indexOf(n)?t[n]=at[n]:(0,I.J)("engineOpenData")&&(pt=!0,t[n]=at[n]))}return dt[e]=t,dt[e]}(e)},pt=!1,ht=function(){return pt},gt=l.Z.Canvas,vt=new WeakMap,_t=0,mt=function(e){return vt.get(e).canvasId},yt=function(e){if(null!=e)return vt.get(e)};function bt(e){(0,U.Ft)()&&(0,p.IN)("insertImageView",{parentId:0,viewId:e,position:{width:0,height:0,top:0,left:0},clickable:!1,data:"{}",complete:function(e){var t=e.errMsg;"[insertImageView]errMsg=".concat(t)}})}function wt(e){(0,U.Ft)()&&(0,p.IN)("removeImageView",{viewId:e,complete:function(e){var t=e.errMsg;"[removeImageView]errMsg=".concat(t)}})}function It(e){if((0,U.Ks)()){var t=e.getContext;e.getContext=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=t.call.apply(t,[e].concat(r)),a=o.getSupportedExtensions,s=o.getExtension;return a&&(o.getSupportedExtensions=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=a.call.apply(a,[o].concat(t));if(Array.isArray(r)){var i=new Set(r);return i.delete("WEBGL_compressed_texture_etc1"),i.delete("WEBGL_compressed_texture_etc"),Array.from(i)}return r}),s&&(o.getExtension=function(e){return"WEBGL_compressed_texture_etc1"===e||"WEBGL_compressed_texture_etc"===e?null:s.call(o,e)}),o}}}var St,Ct,Tt,Et=!1,kt=Object.defineProperty,xt=Object.getOwnPropertyDescriptor,At=Object.prototype.hasOwnProperty,Pt=["getContext","toDataURL"],Dt=["width","height","tagName","nodeName"],Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.secure,n=void 0!==t&&t,r=e.isSharedCanvas,i=void 0!==r&&r,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new gt,c=u.gm?s.Z.appConfig.subContext:s.Z.subContext,l="string"==typeof c,d=!!l&&o;if(It(a),u.gm){var g=a.__proto__.__proto__;a.__proto__=new Proxy(a.__proto__,{setPrototypeOf:function(e,t){return g=t,!0},getPrototypeOf:function(){return g}})}u.jP||u.gm||At.call(a,"width")||(Dt.forEach((function(e){for(var t=a;t;t=t.__proto__)if(At.call(t,e)){kt(a,e,xt(t,e)),kt(a,e,{configurable:!1});break}})),kt(a,"style",{value:{},writable:!0}),St||(St={},Pt.forEach((function(e){for(var t=a;t;t=t.__proto__)if(At.call(t,e)){kt(St,e,xt(t,e));break}}))),a.__proto__=St),d&&(Object.setPrototypeOf(a,W()),"Object"===(0,Fe.Em)(a)&&Object.defineProperty(W(),Symbol.toStringTag,{get:function(){return"HTMLCanvasElement"}})),void 0===a.__id&&(a.__id=_t++);var v=!1;Et||(Et=!0,v=!0),"createCanvas isScreenCanvas=".concat(v),vt.set(a,{canvasId:a.__id,secure:n,isSharedCanvas:i,isScreenCanvas:v,flag:m()});try{delete a.__id}catch(e){}var _=u.gm?a:mt(a),y=function(e){if(n){var t=h.L.set(e.tempFilePath);e.tempFilePath=t}wt(_)};return a.toTempFilePathSync=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=vt.get(this),i=!!r&&r.isScreenCanvas;if("canvas.toTempFilePathSync isScreenCanvas=".concat(i),bt(_),(0,p.IN)("canvasToTempFilePathSync",Object.assign({},n,{canvasId:_},{isScreenCanvas:i,success:function(t){e=t.tempFilePath},fail:function(e){t=e.errMsg}}),{beforeSuccess:y}),wt(_),t)throw new Error(t);return e},a.toTempFilePath=(0,f.gA)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=vt.get(a),n=!!t&&t.isScreenCanvas;"canvas.toTempFilePathSync isScreenCanvas=".concat(n),(0,p.IN)("canvasToTempFilePath",Object.assign({},e,{canvasId:_,isScreenCanvas:n}),{beforeSuccess:y})})),a};s.Z.onReady((function(){if((0,C.aI)()){(t=s.Z.plugins||s.Z.gamePlugins)&&Object.keys(t).forEach((function(e){var n=t[e].provider;ft(n)}));var e="string"==typeof(u.gm?s.Z.appConfig.subContext:s.Z.subContext)||ht();(function(e){if((0,U.LN)()){var t=e.getContext;e.getContext=function(n,r){for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if("webgl"===n||"2d"===n){var s=Object.assign({},r);return s.preserveDrawingBuffer=!0,t.call.apply(t,[e,n,s].concat(o))}return t.call.apply(t,[e,n,r].concat(o))}}})(Ct=Ot({secure:e})),It(Ct),Object.keys(M).forEach((function(e){if(!M[e]){var t=B(),n=t.getContext("2d");if("Canvas"===e)M[e]=Object.getPrototypeOf(t);else if("Image"===e)M[e]=Object.getPrototypeOf(new N);else if("CanvasRenderingContext2D"===e)M[e]=Object.getPrototypeOf(n);else if("CanvasPattern"===e){var r=n.createPattern(t,"repeat");M[e]=Object.getPrototypeOf(r)}else if("CanvasGradient"===e){var i=n.createLinearGradient(0,0,100,100);M[e]=Object.getPrototypeOf(i)}else if("ImageData"===e){var o=n.getImageData(0,0,10,10);M[e]=Object.getPrototypeOf(o)}else if("TextMetrics"===e){var a=n.measureText("123");M[e]=Object.getPrototypeOf(a)}}})),(Tt=Ot({secure:e,isSharedCanvas:!0})).width=s.Z.screenWidth,Tt.height=s.Z.screenHeight}var t}));var Nt=function(){return new l.Z.ScreenCanvas},Rt=1,Mt=!1;function Lt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.font="".concat(t,"px -apple-system"),n?e.measureText(n).width:0}s.Z.onReady((function(){Rt=s.Z.pixelRatio,(0,se.JM)({apiName:"webapi_game_issharemarkenabled",reqData:{lib_version:c.c},success:function(e){var t=JSON.parse(e.rawData);Mt=t.is_enabled}})}));var Bt,Ft=function(e){return new Promise((function(t){if(e)if("transparent"===e)t({width:0,height:0});else{var n=new d;n.onload=function(){return t(n)},n.onerror=function(){return t()},n.src=e}else t()}))},jt=(Bt=i()(a().mark((function e(t){var n,r,i,o,s,c,u,l,d,f,p,h,g,v,_,m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.background,r=t.label,i=t.icon,o=t.tag,s=t.more,c=void 0!==s&&s,u=t.base64,l=void 0!==u&&u,n){e.next=3;break}return e.abrupt("return",n);case 3:return d=Ot({secure:ht()}),f=d.getContext("2d"),d.width=210*Rt,d.height=168*Rt,"transparent"===n&&(d.height=40*Rt),f.fillStyle="rgba(255, 255, 255, 0)",f.fillRect(0,0,d.width,d.height),e.next=12,Ft(n);case 12:if(p=e.sent){e.next=15;break}return e.abrupt("return",n);case 15:if(p.width/p.height>=1.25?f.drawImage(p,0,0,1.25*p.height,p.height,0,0,d.width,d.height):p.width/p.height<1.25&&f.drawImage(p,0,0,p.width,.8*p.width,0,0,d.width,d.height),h=Lt(f,12*Rt,r),!o){e.next=45;break}g=Lt(f,10*Rt,o),f.fillStyle="rgba(0, 0, 0, 0.5)",f.beginPath(),f.moveTo(0,8*Rt),f.lineTo(h+g+12*Rt,8*Rt),f.arc(h+g+12*Rt,20*Rt,12*Rt,1.5*Math.PI,2.5*Math.PI),f.lineTo(0,32*Rt),f.closePath(),f.fill(),f.fillStyle="#F36D00",f.beginPath(),f.moveTo(4*Rt,14*Rt),f.arc(6*Rt,14*Rt,2*Rt,Math.PI,1.5*Math.PI),f.lineTo(g+10*Rt,12*Rt),f.arc(g+10*Rt,14*Rt,2*Rt,1.5*Math.PI,2*Math.PI),f.lineTo(g+12*Rt,26*Rt),f.arc(g+10*Rt,26*Rt,2*Rt,2*Math.PI,2.5*Math.PI),f.lineTo(6*Rt,28*Rt),f.arc(6*Rt,26*Rt,2*Rt,.5*Math.PI,Math.PI),f.closePath(),f.fill(),f.fillStyle="#FFFFFF",f.fillText(o,8*Rt,23.5*Rt),Lt(f,12*Rt),f.fillText(r,g+16*Rt,24*Rt),e.next=79;break;case 45:if(!i){e.next=68;break}return e.next=48,Ft(c&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAMCAYAAABBV8wuAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAHtJREFUeNpj/v//v3RDQwNDY2PjLwYkwATEM4F4B1ABL7pEChALoUsyA434AjRqLZCdCcTBQPZqkLGMMBVA1RJAaj8QvwNiD0Zkc5EkHzMxoIL/UMzIhKRaHKr6I8guRiyC7oyMjJ8YsQnC/DEXXRAEWIA4A4g/IQuCAAABEju5SK8v4wAAAABJRU5ErkJggg==");case 48:return v=e.sent,_=v?10*Rt:0,f.fillStyle="rgba(0, 0, 0, 0.5)",f.beginPath(),f.moveTo(0,8*Rt),f.lineTo(h+_+22*Rt,8*Rt),f.arc(h+_+22*Rt,20*Rt,12*Rt,1.5*Math.PI,2.5*Math.PI),f.lineTo(0,32*Rt),f.closePath(),f.fill(),e.next=60,Ft(i);case 60:(m=e.sent)&&m.width&&m.height&&f.drawImage(m,6*Rt,12*Rt,16*Rt,16*Rt),v&&v.width&&v.height&&f.drawImage(v,h+30*Rt,14*Rt,6*Rt,12*Rt),f.fillStyle="#FFFFFF",Lt(f,12*Rt),f.fillText(r,26*Rt,24*Rt),e.next=79;break;case 68:f.fillStyle="rgba(0, 0, 0, 0.5)",f.beginPath(),f.moveTo(0,8*Rt),f.lineTo(h+2*Rt,8*Rt),f.arc(h+2*Rt,20*Rt,12*Rt,1.5*Math.PI,2.5*Math.PI),f.lineTo(0,32*Rt),f.closePath(),f.fill(),f.fillStyle="#FFFFFF",Lt(f,12*Rt),f.fillText(r,6*Rt,24*Rt);case 79:return e.abrupt("return",l?d.toDataURL():d.toTempFilePathSync());case 80:case"end":return e.stop()}}),e)}))),function(e){return Bt.apply(this,arguments)}),Wt=function(e){return new Promise((function(t){Mt&&e.imageUrl?(0,se.JM)({apiName:"webapi_game_getsharemark",reqData:{lib_version:c.c},success:function(n){var r=n.rawData,i=JSON.parse(r);(i=(i.mark_list||[])[0])||t(e),i&&jt({background:e.imageUrl,label:i.wording,icon:i.head_img_url,tag:i.mark_word}).then((function(n){e.imageUrl=n,e.extra={shareCardMarker:{label:i.mark_type}},t(e)})).catch((function(){return t(e)}))},fail:function(){return t(e)}}):t(e)}))}},5852:(e,t,n)=>{"use strict";n.d(t,{HP:()=>M,A5:()=>D,kv:()=>O});n(1503);var r=n(6326),i=n(8392),o=n(3618),a=n(2903),s=(n(3638),n(2363)),c=function(e){(0,i.gM)(Object.assign({},e,{data:{api_name:"webapi_reportgroupshare",data:{path:e.path,share_key:e.shareKey}},success:function(t){s.wZ&&"string"==typeof t.data&&(t.data=JSON.parse(t.data));var n=JSON.parse(t.data.data);0===n.errcode?(t.expiresIn=n.expires_in,t.groupMsgTicket=n.group_msg_ticket,delete t.data,(0,i.FE)({name:"getGroupMsgTicket",args:e,res:t})):(0,i.YG)("getGroupMsgTicket",e,n.errmsg,n.errcode)},fail:function(t){(0,i.YG)("getGroupMsgTicket",e,t.errMsg,-1)}}))},u=n(968),l=n(1484),d=n(8947),f=n(733),p=n(2984),h=(0,p.Z)("getIAPInfo","webapi_getiapinfo");var g=n(266),v=n(8676),_=n.n(v),m={};function y(e){var t=e.result,n=e.shareType,r=e.canUseCustomImageUrl,i=e.imageUrlId,o=void 0===i?"":i,a=e.transformedImageUrl,s=void 0===a?"":a;"[reportShare], result=".concat(t,", shareType=").concat(n,", canUseCustomImageUrl=").concat(r,", imageUrlId=").concat(o,", transformedImageUrl=").concat(s);var c=m.query,u=[],l=d.Z.accountInfo&&d.Z.accountInfo.nickname||"";if(c&&"object"===_()(c))for(var f in c)u.push("".concat(encodeURIComponent(f),"=").concat(encodeURIComponent(c[f])));var p=[m.scene,m.scene_note,m.sessionid,"",l,Reporter.getAppType(),t,0,u.join("&"),n,r?1:2,o,s,d.Z.host?d.Z.host.appId:""].map(encodeURIComponent).join(",");"[reportShare] value=".concat(p),Reporter.reportKeyValue({key:"Share",value:p}),Reporter.submit()}var b=n(7239),w=n(8976),I=n(4416);n(7100);n(2692),n(313);var S=n(3123),C=(n(5179),!0),T={};d.Z.onReady((function(){(0,u.KU)("shareCustomImageUrl")||((0,p.Z)("getShareConfig","webapi_getshareconf")({success:function(e){Array.isArray(e.share_link_list)&&(T=e.share_link_list.reduce((function(e,t){return e[t.id]=t.url,e}),{}))},fail:function(e){}}),C=!1)}));var E=function(){return T},k=function(){return C};n(9809);var x=new r.Z,A=null,P=null,D=function(){return P};d.Z.onReady((function(){(0,u.aI)()&&n(9366).dN((function(e){if(P={},e.referrerInfo&&e.referrerInfo.messageExtraData){var t=P=e.referrerInfo.messageExtraData,n=t.userInfo,r=t.shareType;if(r&&n){var i=[Reporter.getAppType(),r,n.openID,e.path||"",(0,g._getCurrentNetworkType)()].join(",");Reporter.reportKeyValue({key:"ShareCardClick",value:i})}}}))}));var O=function(e){(0,i.IN)("showUpdatableMessageSubscribeButton",{shareKey:e})},N=function(e){return function(t,n){var r=t.shareInfos;if(delete t.shareInfos,void 0!==r&&r.length>0)if(r=r.filter((function(e){return e.shareKey&&e.shareName})),t.shareTickets=r.map((function(e){return O(e.shareKey),o.Z.set(e.shareKey,e.shareName)})),s.gm)delete t.shareTickets,delete t.shareInfos,n();else{if(e.getGroupMsgTicket)return void Promise.all(r.map((function(e){return new Promise((function(t){!function(e){c(e)}({shareKey:e.shareKey,success:function(e){t({groupMsgTicket:e.groupMsgTicket,expiresIn:e.expiresIn})},fail:function(){t({groupMsgTicket:""})}})}))}))).then((function(e){return t.groupMsgInfos=e,n()})).catch((function(){}));n()}else n()}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"_shareAppMessage, APIName=".concat(t);var o=k(),c=E(),d="string"==typeof e.path?e.path:"",p="string"==typeof e.query?e.query:"",h="",g=0;switch(t){case"shareAppMessage":g=1;break;case"shareAppMessageDirectly":g=2;break;case"shareAppMessageToSpecificContactDirectly":g=3}if(p.length>2e3&&(console.warn('shareAppMessage: query exceed max length limit 2000: "'.concat(p.length,'"')),p=p.substr(0,2e3)),p&&(d="".concat(d,"?").concat(p)),e.imageUrl=a.L.get(e.imageUrl)||e.imageUrl,Array.isArray(e.imageUrl)&&(e.imageUrl=""),!o){if(!c[e.imageUrlId])return"找不到 imgeUrl，imageUrlId=".concat(e.imageUrlId),(0,f.showToast)({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),void v(2);h=e.imageUrl=c[e.imageUrlId]}function v(t){y({result:t,shareType:g,canUseCustomImageUrl:o,imageUrlId:e.imageUrlId,transformedImageUrl:h})}(0,i.IN)(t,Object.assign(n,e,{path:d,useDefaultSnapshot:!0,messageExtraData:Object.assign({shareType:g,userInfo:A},e.extra),success:function(t){(0,S.Ku)("shareAppMessage",t),(r||!s.gm&&(0,u.KU)("share"))&&(0,i.FE)({name:"shareAppMessage",args:e,res:t}),v(1),setTimeout((function(){(0,b.y4)(b.F0.EVENT_CANVAS_AFTER_SHARE_SUCCESS)}),500)},fail:function(t){var n=t.errMsg.replace("shareAppMessage:fail","");(r||!s.gm&&(0,u.KU)("share"))&&(0,i.YG)("shareAppMessage",e,n),v(-1!==n.indexOf("cancel")?3:2)},cancel:function(){setTimeout((function(){(0,b.y4)(b.F0.EVENT_CANVAS_AFTER_SHARE_CANCEL)}),500)},complete:function(t){var n=(t.errMsg||"").replace(/^[^:]+/,"shareMessageToFriend"),r=!n||"shareMessageToFriend:ok"===n;(0,w.J)("shareCallback")&&3===g&&(x.emit("callback",{errMsg:n,success:r}),(0,i.FE)({name:"shareMessageToFriend",errMsg:n,success:r,args:e}))}}),{beforeSuccess:N(e),beforeAll:function(e){e.errMsg=e.errMsg.replace("shareAppMessageDirectly","shareAppMessage"),e.errMsg=e.errMsg.replace("shareAppMessageToSpecificContactDirectly","shareAppMessage")}}),["success","fail","cancel","complete"].some((function(t){return"function"==typeof e[t]}))&&(0,l.Y)({name:t,strategy:1}),(0,b.y4)(b.F0.EVENT_CANVAS_BEFORE_SHARE)},M=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=function(){var e=t[0].imageUrl;(0,I.V)([e],"image",(function(r){/^(cloud):\/\//.test(e)&&(e=r.data[0].url),t[0].imageUrl=e,(0,u.aI)()?n(5037).H(t[0]).catch(wxConsole.warn).then((function(){return R.apply(void 0,t)})):R.apply(void 0,t)}))};A?i():h({success:function(e){A=e},complete:function(){return i()}})}},4159:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={query:{}}},5282:(e,t,n)=>{"use strict";n.d(t,{wy:()=>f,Xl:()=>c,tn:()=>u});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=new(n(7937).Z),c="SHOW_REWARD",u="HIDE_REWARD",l={banner:"SHOW_BANNER","incentive-video":c,grid:"SHOW_GRID"},d={banner:"HIDE_BANNER","incentive-video":u,grid:"HIDE_GRID"},f=function(){function e(t){var n=t.adUnitId,r=t.adType,o=void 0===r?"banner":r;i()(this,e),this.adUnitId=n,this.adType=o}return a()(e,[{key:"show",value:function(){var e=l[this.adType];e&&s.emit(e,{adUnitId:this.adUnitId})}},{key:"hide",value:function(){var e=d[this.adType];e&&s.emit(e,{adUnitId:this.adUnitId})}},{key:"on",value:function(e,t){var n=this;s.on(e,(function(e){e.adUnitId!==n.adUnitId&&t(e)}))}}]),e}()},9831:(e,t,n)=>{"use strict";n.d(t,{ul:()=>p,R0:()=>v,fs:()=>u.t2,Be:()=>f,_t:()=>d,Yo:()=>l,Lo:()=>h,mQ:()=>g,yw:()=>_,fy:()=>y,Ae:()=>m});var r=n(8392),i=n(8068),o=n(9627),a=n(9947),s=n(5770),c=n(2363),u=n(8325),l=(0,i.Fr)((function(e){var t=e.url,n=e.adInfo,i=e.adUxInfo,o={url:t,adInfo:n,success:e.success,fail:e.fail,complete:e.complete};i&&(o.adUxInfo=i),(0,r.IN)("private_openUrl",o)})),d=(0,i.Fr)((function(e){var t=e.canvasInfo,n=e.posType,i=e.success,a=e.fail,s=e.complete;(0,r.IN)("openADCanvas",{canvasId:t.canvas_id,preLoad:0,noStore:0,extraData:JSON.stringify({pos_type:n}),adInfoXml:(0,o.l_)(t.ad_info_xml),openFirstSightVoice:1,success:i,fail:a,complete:s})})),f=(0,i.Fr)((function(e){var t=e.appId,n=e.path,i=e.traceid,o=e.aid,s=e.adInfo,c=e.adUxInfo,u=e.success,l=e.fail,d=e.complete,f="".concat(i,":").concat(o),p={appId:t,path:(0,a.Pp)(n).trim(),scene:1095,sourcetype:1,sceneNote:f,adInfo:s,success:u,fail:l,complete:d};c&&(p.adUxInfo=c),(0,r.IN)("navigateToMiniProgram",p)})),p=(0,i.Fr)(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,r.r3)("adOperateWXData",i,{apiName:""})){var o={api_name:i.apiName,data:i.reqData||{},operate_directly:e},a={data:o,isImportant:!0===n,requestInQueue:!i.hasOwnProperty("requestInQueue")||Boolean(i.requestInQueue)};(0,r.IN)("adOperateWXData",Object.assign({},a,i),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("adOperateWXData",t))},beforeSuccess:function(e){c.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.respData=e.data,delete e.data}})}}}(!1,"adOperateWXDataForAd")),h=(0,i.Fr)((0,s.Ce)(!1,"operateWXDataForAd"));function g(e){(0,r.be)("showSplashAd",e)}function v(e){(0,r.be)("closeSplashAd",e)}function _(e){(0,r.be)("showSplashAdMenu",e)}function m(e){(0,r.be)("splashAdFirstStepViewLayoutStateChange",e)}function y(e){(0,r.be)("splashAdAllViewLayoutStateChange",e)}},1033:(e,t,n)=>{"use strict";n.d(t,{vK:()=>i,DX:()=>o,_W:()=>a,WG:()=>s,wE:()=>c,R$:()=>u,fY:()=>l,Lq:()=>d,YC:()=>f,gQ:()=>p,ET:()=>h,UJ:()=>g,yd:()=>v,qi:()=>_,MC:()=>m,c3:()=>y,sl:()=>b,yB:()=>r.Bq});var r=n(2958),i={CRT_SIZE_REWARD_VEDIO169:559,CRT_SIZE_REWARD_VEDIO916:560,CRT_SIZE_REWARD_LANDINGPAGE:910,CRT_SIZE_SPLASH_AD:1003,CRT_SIZE_IN_TEXT_DESC_CARD:841,CRT_SIZE_MULTI_POS_NEW_PIC:927,CRT_SIZE_MULTI_POS_VIDEO:929,CRT_SIZE_GRID:972,CRT_SIZE_BIG_PIC:998,CRT_SIZE_VERTICAL_VIDEO_NEW_916:721},o={banner:"8040321819858439","incentive-video":"1030436212907001",interstitialAd:"3030046789020061",grid:"7070083760581921",splashAd:"5060180989186180",wxAppVideo:"5010365819466098",wxAppPreVideoAd:"7090665964306299",customAd:"4071202390577885"},a={banner:3,"incentive-video":1,interstitialAd:4,grid:7,splashAd:8,customAd:9},s={banner:"showed","incentive-video":"viewable",interstitialAd:"viewable",grid:"viewable",splashAd:"viewable",customAd:"viewable"},c={"incentive-video":3,banner:4,interstitialAd:5,grid:6,customAd:7},u={94794:"widget_gray_batchload_app",94801:"widget_gray_vb_check",94804:"widget_gray_time_limit",94805:"widget_gray_video_download_v2",95489:"widget_gray_unlimit_fetch_tag",95767:"widget_gray_rewardedpage_exposure",100036:"widget_gray_report_install_follow",100332:"widget_gray_rewardedpage_exposure_v2",101246:"widget_gray_reward_new_endpage",104502:"widget_gray_reward_use_gauss_blur",104504:"widget_gray_reward_use_expand_style",105786:"widget_gray_banner_limit_click",105818:"widget_gray_splash_data_channel_parallel",107048:"widget_gray_splash_click_area_switch",109764:"widget_gray_rewrad_use_gauss_blur_android_system_version",109766:"widget_gray_rewrad_use_gauss_blur_android_wechat_version",110106:"widget_gray_splash_check_and_fetch",110108:"widget_gray_splashad_show_duration",110422:"widget_gray_interstitialAd_insurance_tips"},l={WECHAT:23,OPEN_PLATFORM_APP_MOB:12,APPLE_APP_STORE:19,MINI_GAME:46,JD_URL:25,WE_CHAT_SHOP:30,WE_CHAT_ARTICLE:29,GDT_WE_CHAT_ARTICLE:31},d="wxfile://ad",f="".concat(d,"/adinfos.txt"),p={splashAd:1288,customAd:1390},h={dataLoadSuccess:0,dataLoadFail:1,dataPreloadSuccess:2,dataPreloadFail:3,handleDataFail:4,launchAcceptShouldShow:5,menuAcceptShouldShow:6,readFileFail:7,launchShowSplashAdSuccess:8,menuShowSplashAdSuccess:9,showSplashAdFail:10,firstRenderFail:11,firstInsertFail:12,secondRenderFail:13,secondInsertFail:14,iosThirdInsertFail:15,checkAdStateFail:16,adOfflineClose:17,readFileDataFail:18,firstShowSuccess:19,showSplashAdMenuSuccess:20,showSplashAdMenuFail:21,secondShowSuccess:22,removeFileDataFail:23,landingPageFail:24,frequencyControlFail:25,frequencyControlReturn:26,bulkCopyFileFail:27,getAdInfosFail:28,getAidFail:29,setExposureTagFail:30,NO_ADINFOS:31,NO_AID:32,MATERIAL_NOT_READY:33,CHECK_AD_STATUS_ERROR:34,CRT_ORIENTATION_NOT_SURE:35,EXPOSURE_TIMES_LIMIT:36,START_CHECK_AD_STATUS:37,CHECK_AD_STATUS_SUCCESS:38,OTHER_ADS_EMIT_FETCH:39,WRITE_ADINFOS_SUCCESS:40,WRITE_ADINFOS_FAIL:41,SHOW_SPLASH_FAIL:10},g={banner:5,"incentive-video":6,interstitialAd:8,customAd:9,grid:13,splashAd:14},v={click:1,exposure:0},_={showed:0,viewable:1,incentiveVideoCard:2},m={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5},y={NO_ADINFOS:2001,NO_AID:2002,MATERIAL_NOT_READY:2003,CHECK_AD_STATUS_ERROR:2004,CRT_ORIENTATION_NOT_SURE:2005,EXPOSURE_TIMES_LIMIT:2006,SHOW_SPLASH_FAIL:2007},b={12:"应用",19:"应用",23:"公众号",25:"商品",29:"活动",30:"商品",31:"活动",36:"优惠",39:"店铺",43:"活动",46:"小游戏",47:"优惠"}},6878:(e,t,n)=>{"use strict";n.d(t,{Zp:()=>o,S4:()=>a,Ug:()=>s,Pp:()=>c,EJ:()=>u,BZ:()=>l,vj:()=>d,vl:()=>f});var r=n(8392),i=new(n(968).vp),o=function(){i.emit("_onEmitSplashAdFetch")},a=function(e){"function"==typeof e&&i.on("_onEmitSplashAdFetch",e)};function s(e){(0,r.jQ)("shouldShowSplashAd",e)}function c(e){(0,r.jQ)("onSplashAdShow",e)}function u(e){(0,r.jQ)("onSplashAdHide",e)}function l(e){(0,r.jQ)("onSplashAdClose",e)}function d(e){(0,r.jQ)("onSplashAdWillLayout",e)}function f(e){(0,r.jQ)("onSplashAdButtonClicked",e)}},2395:(e,t,n)=>{"use strict";n.d(t,{G_:()=>u,uQ:()=>l,LQ:()=>d,mh:()=>c});var r=n(3379),i=n.n(r),o=n(9627),a=n(9831),s=n(1033),c=function(e){var t={};try{e=JSON.parse(e);var n,r=i()(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.hasOwnProperty("exp_para")&&o.exp_para.forEach((function(e){t[e.name]=Number(e.value)}))}}catch(e){r.e(e)}finally{r.f()}for(var a in t)s.R$[a]&&(t[s.R$[a]]=t[a]);return t}catch(e){return{}}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,a.ul)({apiName:"webapi_getadvert",reqData:{action:"CheckAdIsOnline",request_data:JSON.stringify(e)},requestInQueue:t})},l=function(e){var t=e.aid,n=e.buttonText,r=void 0===n?"":n;return(0,a.Lo)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"get_ad_metric",aid:t.toString(),button_text:r})}}).then((function(e){if(!e.rawData)throw new Error("get_ad_metric no result");try{var t=JSON.parse(e.rawData),n=JSON.parse(t.result)||{},r=n.ad_metric_count,i=n.desc_text;return null==r||null==i||r<50?null:{count:(0,o.in)(r),descText:i}}catch(e){throw new Error("get_ad_metric invalid result")}})).catch((function(){throw new Error("get_ad_metric request failed")}))},d=function(e){var t=e.guide_group_id,n=e.uxinfo;return(0,a.Lo)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"BindAdFansToGuideGroup",guide_group_id:t,uxinfo:n})}}).then((function(e){return"ok"===e.msg?Promise.resolve(e):Promise.reject(e)}))}},4180:(e,t,n)=>{"use strict";n.d(t,{Z7:()=>b,BZ:()=>y,J$:()=>I,fn:()=>w,x1:()=>m});var r=n(8676),i=n.n(r),o=n(3379),a=n.n(o),s=n(9624),c=n(9831),u=n(1033),l=n(2363),d=n(6878),f=n(968),p=6048e5,h=["adinfos.txt","/adinfos.txt","/"],g=0,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){c.fs.stat({path:e,recursive:!0,success:t,fail:n})}))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){c.fs.unlink({filePath:e,success:t,fail:function(e){e&&e.errMsg&&e.errMsg.indexOf("no such file or directory")>-1||n(e)}})}))},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?v(e).then((function(e){var t,n=0,r=[],i=[],o=e.stats||[],s=+new Date,c=a()(o);try{for(c.s();!(t=c.n()).done;){var u=t.value;n+=u.stats.size||0,h.includes(u.path)||r.push(u.path),s-1e3*u.stats.lastAccessedTime>=p&&!h.includes(u.path)&&i.push(u.path)}}catch(e){c.e(e)}finally{c.f()}return{totalSize:n,fileList:r,outedDateFileList:i}})):{totalSize:0,fileList:[],outedDateFileList:[]}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e||0===t.length)return Promise.resolve();var n,r=[],i=a()(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s="".concat(e,"/").concat(o);r.push(_(s))}}catch(e){i.e(e)}finally{i.f()}return Promise.all(r)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?(0,f.er)()?Promise.resolve():l.wZ||l.cj?new Promise((function(n,r){c.fs.writeFile({filePath:t,data:JSON.stringify(e),encoding:"utf-8",success:n,fail:r})})):Promise.resolve():Promise.resolve()},w=function(e){return e&&0!==e.length?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){c.fs.readdir({dirPath:e,success:t,fail:n})}))}(u.Lq).then((function(t){var n=t.files;e&&e.map((function(e){var t=e.url,r=e.filePath,i=e.fileName;return n.includes(i)?Promise.resolve():function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&t)return new Promise((function(n,r){(0,s.o)({url:e,filePath:t,success:n,fail:r})}))}(t,r)}))})):Promise.reject({errMsg:"无数据"})},I=function(e){if(e&&"object"===i()(e)&&!(g>0)&&(g+=1,!(0,f.er)()&&(l.wZ||l.cj)&&e&&e.widget_gray_unlimit_fetch_tag)){var t=3600*e.widget_gray_unlimit_fetch_tag*1e3;try{c.fs.stat({path:u.YC,success:function(e){var n;Date.now()-1e3*(null==e||null===(n=e.stats)||void 0===n?void 0:n.lastModifiedTime)>=t&&(0,d.Zp)()},fail:function(e){e.errMsg&&e.errMsg.indexOf("no such file")>-1&&b({},u.YC)}})}catch(e){}}}},8934:(e,t,n)=>{"use strict";n.d(t,{R:()=>i,Y:()=>o});var r=n(999),i=function(e){return(0,r.J)(19213,e)},o=function(e){return(0,r.J)(19214,e)}},9627:(e,t,n)=>{"use strict";n.d(t,{l_:()=>u,Ee:()=>d,Cy:()=>f,in:()=>g,IU:()=>p,$G:()=>h,U2:()=>v,X1:()=>_,Vs:()=>c.Vs});var r=n(9727),i=n.n(r),o=n(8676),a=n.n(o),s=n(8392),c=n(8068),u=function(e){return 0===(e=e||"").length?"":e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g,"    ").replace(/&#039;|&#39;/g,"'").replace(/&#047;|&#47;/g,"/").replace(/&#092;|&#92;/g,"\\").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/<br>/g,"\n").replace(/<br\/>/g,"\n").replace(/<br \/>/g,"\n")},l=function(e){return e&&"object"===a()(e)&&!Array.isArray(e)},d=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(!r.length)return t;var a=r.shift();if(l(t)&&l(a))for(var s in a)l(a[s])?(t[s]||Object.assign(t,i()({},s,{})),e(t[s],a[s])):Object.assign(t,i()({},s,a[s]));return e.apply(void 0,[t].concat(r))},f=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("")},p=function(e){if(e)return e.wx_game_video&&e.wx_game_video.short_video?e.wx_game_video.short_video.viewid:void 0},h=function(e,t){for(var n=0,r=0,i=0;i<e.length;i++)(n+=/[\u4e00-\u9fa5]/.test(e[i])?2:1)<t-1&&(r=i);return n>t?"".concat(e.substring(0,r+1),"..."):e},g=function(e){return e<1e4?e.toString():"".concat((e/1e4).toFixed(1),"万")},v=function(e,t,n){"string"==typeof t&&(t=t.split("."));for(var r=e,i=0;r&&i<t.length;)r=r[t[i]],i+=1;return r||n},_=function(e){var t=0,n=Object.assign({},{fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},e);try{(0,s.IN)("measureText",Object.assign({},n,{complete:function(e){t=e.width||0}}))}catch(e){}return t}},3123:(e,t,n)=>{"use strict";n.d(t,{lc:()=>I,Ku:()=>S,sv:()=>E,L9:()=>k});var r=n(5835),i=n(8947),o=n(6315),a=n(8934),s=n(8392),c=n(1957),u=n(968),l=n(4531),d=n(5770),f=n(8068),p=n(4180),h=(0,f.Fr)((0,d.Ce)(!1,"advertReport")),g="",v=0,_="index.html",m=new u.vp,y="_onWxAdUserCaptureScreen",b={shareAppMessage:0,shareTimeline:3};i.Z.onReady((function(){g=(0,o.I)()}));var w={};try{(0,c.H)((function(e){v=e.webviewId,w[v]||(w[v]=!0,_=e.path,(0,l.dq)(v,(function(e){T(e)})))}))}catch(e){}(0,r.x9)((function(){var e=+new Date;g&&(0,a.R)({eventTimeStamp:e,scene:7,uxinfo:g,url:_}),v&&(0,s.nY)(y,{eventTimeStamp:e,path:_},[v]),m.emit(y,{eventTimeStamp:e,webviewId:v,path:_})}));var I=function(e){"function"==typeof e&&m.on("_onWxAdUserCaptureScreen",e)},S=function(e,t){if(g){var n="",r=b[e]?b[e]:0;"shareAppMessage"===e&&t.shareInfos&&(r=t.shareInfos.length>0?2:1,n=t.shareInfos.length>0&&t.shareInfos[0].shareName||""),0===r&&"shareAppMessage"===e&&t.shareTickets&&(r=t.shareTickets.length>0?2:1),(0,a.Y)({eventTimeStamp:+new Date,shareType:r,tousername:n,uxinfo:g,url:_})}},C={};(0,s.Ld)("wxAdDelayReport",(function(e,t){C[t]||(C[t]={}),e.key&&e.value&&(C[t][e.key]=e.value)}));var T=function(e){if(C[e]){for(var t in C[e]){var n=C[e][t];h({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:n}}).catch((function(e){}))}delete C[e]}};(0,s.Ld)("checkWxAdFetchLog",(function(e){(0,p.J$)(e)})),(0,s.Ld)("weappTouchEvent",(function(e){m.emit("_onWeappTouchEvent",e)}));var E=function(e){m.off("_onWeappTouchEvent",e)},k=function(e,t){var n=!1;if("function"==typeof e){var r=function(r){!n&&e(r,t),n=!0};return m.on("_onWeappTouchEvent",r),r}return null}},7857:(e,t,n)=>{"use strict";n.d(t,{q3:()=>a,GH:()=>s,aE:()=>c,hz:()=>u});var r=n(572),i=n.n(r),o={},a=function(e,t,n){o.hasOwnProperty(e)||(o[e]={}),o[e][t]=n},s=function(e,t){if(o.hasOwnProperty(e))return o[e][t]},c=function(){if(o.hasOwnProperty("close")){var e=Object.keys(o.close).map((function(e){return o.close[e]}));return Math.max.apply(Math,i()(e))}},u=function(){if(o.hasOwnProperty("show")){var e=Object.keys(o.show).map((function(e){return o.show[e]}));return Math.max.apply(Math,i()(e))}}},5820:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r={20299:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"is_reward",value:"0"},{type:"uint32",key:"is_cancel",value:"0"},{type:"uint32",key:"ad_platform",value:"0"}],18988:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"button_type",value:"0"}],16743:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"close_type",value:"0"},{type:"uint64",key:"exposure_duration",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"close_time",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16139:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"appid",value:"0"},{type:"string",key:"weapppath",value:"0"},{type:"string",key:"adunit_id",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"traceid",value:"0"},{type:"uint64",key:"TimeMs",value:"0"},{type:"string",key:"useragent",value:"0"},{type:"uint32",key:"type",value:"0"},{type:"uint32",key:"diaphaneity",value:"0"},{type:"uint32",key:"PageX",value:"0"},{type:"uint32",key:"PageY",value:"0"},{type:"uint32",key:"ScreenHeight",value:"0"},{type:"uint32",key:"ScreenWidth",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"orig_weapp_id",value:""}],17045:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"weapp_path",value:""},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"device_type",value:""},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"ad_pos_x",value:"0"},{type:"uint32",key:"ad_pos_y",value:"0"},{type:"uint32",key:"exp_time",value:"0"},{type:"uint32",key:"clk_complaint_button",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"service_type",value:"0"},{type:"uint32",key:"first_grade_id",value:"0"},{type:"string",key:"first_grade_desc",value:""},{type:"uint64",key:"first_grade_time",value:"0"},{type:"uint32",key:"second_grade_id",value:"0"},{type:"string",key:"second_grade_desc",value:""},{type:"uint64",key:"second_grade_time",value:"0"},{type:"uint32",key:"is_finish_complaint",value:"0"},{type:"uint32",key:"is_click_ad",value:"0"},{type:"uint64",key:"click_ad_time",value:"0"},{type:"uint64",key:"click_ad_time_ms",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"feedback_reason",value:"0"}],16487:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"click_time",value:"0"},{type:"uint32",key:"click_cnt",value:"0"},{type:"uint32",key:"start_pos_x",value:"0"},{type:"uint32",key:"start_pos_y",value:"0"},{type:"uint32",key:"end_pos_x",value:"0"},{type:"uint32",key:"end_pos_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"uint32",key:"block_click",value:"0"},{type:"uint64",key:"start_posx",value:"0"},{type:"uint64",key:"start_posy",value:"0"},{type:"uint64",key:"end_posx",value:"0"},{type:"uint64",key:"end_posy",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16e3:[{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"uint64",key:"play_duration",value:"0"},{type:"uint64",key:"click_close_ts",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"uint64",key:"video_first_play_ts",value:"0"},{type:"uint64",key:"card_first_show_ts",value:"0"},{type:"uint64",key:"click_card_ts",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"current_play_url",value:""},{type:"string",key:"last_fetch_url",value:""},{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint64",key:"video_duration",value:"0"},{type:"uint32",key:"is_ended",value:"0"}],15730:[{type:"uint64",key:"load_begin_time",value:"0"},{type:"uint64",key:"load_end_time",value:"0"},{type:"uint64",key:"load_cost_time",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"report_type",value:"0"},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"load_departure_time",value:"0"},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],15979:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"lastclkperiod",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"uint32",key:"pagestaytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"string",key:"orig_weapp_id",value:""}],15980:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"opentime",value:"0"},{type:"uint64",key:"closetime",value:"0"},{type:"uint64",key:"staytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"string",key:"act_type",value:""},{type:"string",key:"act_type_str",value:""},{type:"uint32",key:"act_type_int",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16295:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"id_key",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"string",key:"source_url",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"expand_feild",value:""},{type:"string",key:"expand_feild2",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"id_key_group",value:"924"},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"machine_brand",value:""},{type:"string",key:"machine_type",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"}],17035:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"touch_start_x",value:"0"},{type:"uint32",key:"touch_start_y",value:"0"},{type:"uint32",key:"touch_end_x",value:"0"},{type:"uint32",key:"touch_end_y",value:"0"},{type:"uint64",key:"touch_duration",value:"0"},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],18072:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"last_clicks",value:""},{type:"uint32",key:"banner_x",value:"0"},{type:"uint32",key:"banner_y",value:"0"},{type:"uint32",key:"banner_width",value:"0"},{type:"uint32",key:"banner_height",value:"0"},{type:"uint32",key:"exp_ms",value:"0"},{type:"uint32",key:"clk_ms",value:"0"},{type:"uint32",key:"banner_clk_screen_x",value:"0"},{type:"uint32",key:"banner_clk_screen_y",value:"0"},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"last_show_time",value:"0"},{type:"uint64",key:"slotid",value:"0"}],18517:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"action",value:"0"},{type:"string",key:"traceid",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"publisher_appid",value:""},{type:"uint32",key:"row_number",value:"0"},{type:"uint32",key:"column_number",value:"0"},{type:"uint32",key:"box_index",value:"0"},{type:"uint64",key:"action_timems",value:"0"},{type:"uint32",key:"clk_x",value:"0"},{type:"uint32",key:"clk_y",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"machine_type",value:""}],19429:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"show_time",value:"0"},{type:"uint64",key:"end_time",value:"0"},{type:"uint64",key:"show_delay_duration",value:"0"},{type:"uint64",key:"fetch_duration",value:"0"}],19213:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19214:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"shareType",value:"0"},{type:"uint32",key:"tousername",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19837:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"slotid",value:""},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"ext_info",value:""},{type:"uint64",key:"p1",value:"0"},{type:"uint64",key:"p2",value:"0"},{type:"uint64",key:"p3",value:"0"},{type:"uint64",key:"p4",value:"0"},{type:"uint64",key:"p5",value:"0"},{type:"uint64",key:"p6",value:"0"},{type:"uint64",key:"p7",value:"0"},{type:"uint64",key:"p8",value:"0"},{type:"uint64",key:"p9",value:"0"},{type:"uint64",key:"p10",value:"0"},{type:"uint64",key:"p11",value:"0"},{type:"uint64",key:"p12",value:"0"},{type:"uint64",key:"p13",value:"0"},{type:"uint64",key:"p14",value:"0"},{type:"uint64",key:"p15",value:"0"},{type:"uint64",key:"p16",value:"0"},{type:"string",key:"instance_id",value:""},{type:"uint32",key:"scene",value:"0"},{type:"uint32",key:"error_code",value:"0"},{type:"uint64",key:"p17",value:"0"},{type:"uint64",key:"p18",value:"0"},{type:"uint64",key:"p19",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint64",key:"p20",value:"0"},{type:"uint64",key:"p21",value:"0"},{type:"string",key:"machine_brand",value:""},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"}],20480:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"string",key:"click_pos",value:""}],20317:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"branch_id",value:""},{type:"string",key:"branch_dim",value:""}],21644:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"crt_size",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"ad_unit_id",value:""},{type:"uint32",key:"use_gauss_video",value:"0"},{type:"string",key:"video_url",value:""},{type:"string",key:"gauss_video_url",value:""},{type:"uint32",key:"use_expand_style",value:"0"},{type:"uint32",key:"exp_use_gauss_video",value:"0"},{type:"uint32",key:"exp_use_expand_style",value:"0"}],23415:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"string",key:"adunitid",value:""},{type:"uint32",key:"button_type",value:"0"},{type:"uint64",key:"button_time",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint64",key:"ad_clk_time",value:"0"},{type:"uint64",key:"ad_exp_time",value:"0"},{type:"uint32",key:"ad_clk_x",value:"0"},{type:"uint32",key:"ad_clk_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"}]},i=function(e){var t=r[e.toString()];return t?t.concat([]):[]}},999:(e,t,n)=>{"use strict";n.d(t,{r:()=>T,J:()=>C});var r=n(8676),i=n.n(r),o=n(5820),a=n(968),s=n(5770),c=n(8068),u=n(6301),l=n(2363),d=n(708),f=n(8947),p=(0,c.Fr)((0,s.Ce)(!1,"advert_report")),h="",g=l.iw,v="",_="",m="",y="",b="",w="",I=!0,S="";f.Z.onReady((function(){h=(0,d._t)()||"";var e=(0,u.Oo)();v=e.system,_=e.version,m=e.SDKVersion,b=e.model,w=e.brand,I=(0,a.aI)();try{S=f.Z.accountInfo.appId,y=__libVersionInfo__.updateTime}catch(e){}}));var C=function(e,t){var n=(0,o.x)(e);if(n&&0!==n.length)return t=Object.assign({publisher_appid:S,appid:S,orig_weapp_id:"",network_type:"",wechat_version:_,platform:g,system_version:v,device_orientation:h,wxapp_lib_version:m,wxapp_lib_time:y,machine_type:b,ad_platform:I?1:0},t),t=Object.assign({DeviceModel:b,DeviceBrand:w,OsName:g,OsVersion:v},t),n=n.map((function(e){return{type:e.type,value:(t[e.key]||e.value).toString()}})),p({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}}).catch((function(e){}))},T=function(e,t,n){!function(e){var t=e.key,n=e.id;"object"===i()(t)&&(!n&&(n=t.idKeyGroup),t=t.idKey),0===t&&(t="0"),Reporter.reportIDKeyDirectly({id:n||924,key:t,force:!0})}({key:e}),function(e){var t=e.key,n=e.id,r=e.extInfo,o=e.reportData;if("object"===i()(t)&&(!n&&(n=t.idKeyGroup),t=t.idKey),0===t&&(t="0"),o=o||{},r&&"string"!=typeof r)try{r=JSON.stringify(r)}catch(e){r=r.toString()}C(16295,{id_key:t,id_key_group:n||924,report_time:+new Date,ad_pos_type:o.ad_pos_type||0,source_url:o.source_url||"",expand_feild:o.reportAdData||"",expand_feild2:r,aid:o.aid||0,traceid:o.traceid||"",ad_unit_id:o.ad_unit_id})}({key:e,extInfo:t,reportData:n})}},350:(e,t,n)=>{"use strict";n.d(t,{F:()=>ur});var r,i,o,a,s,c,u,l,d,f,p,h,g,v,_,m,y,b,w,I,S,C,T,E,k,x,A,P,D,O,N,R,M,L,B,F,j,W,U,V,G,H,Z,q,z,Y,K,J,$=n(2208),X=n.n($),Q=n(9727),ee=n.n(Q),te=n(3356),ne=n.n(te),re=n(1503),ie=n.n(re),oe=n(3379),ae=n.n(oe),se=n(7163),ce=n.n(se),ue=n(5843),le=n.n(ue),de=n(2102),fe=n.n(de),pe=n(7015),he=n.n(pe),ge=n(12),ve=n.n(ge),_e=n(8947),me=n(968),ye=n(8114),be=n(9831),we=n(2395),Ie=n(8934),Se="<?xml version='1.0' encoding='utf-8' ?>",Ce=function(e){return"<![CDATA[".concat(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"]]>")},Te=function(e){return e.children&&e.children.length>0?e.children.map((function(e){return Ee(e)})).join(""):""},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?Se:"";return n+="<".concat(e.name,">"),e.children.length>0?n+=Te(e):n+=Ce(e.content),n+="</".concat(e.name,">")},ke=n(3123),xe=n(9627),Ae=n(4180),Pe=n(1033),De=Symbol("signExport"),Oe=function(){return function(e,t){e[De]=e[De]||new Set,e[De].add(t)}},Ne=function(e,t){var n,r=Array.isArray(t)?t:[t],i=ae()(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!(o in e)||"function"!=typeof e[o])throw new Error("".concat(o," is not the function method of the class"))}}catch(e){i.e(e)}finally{i.f()}return r.map((function(t){return e[t]}))},Re=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r,i){var o=i.value,a=Ne(n,e);i.value=t?ne()(he().mark((function e(){var t,n,r,i,s,c,u,l,d=arguments;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=d.length,r=new Array(n),i=0;i<n;i++)r[i]=d[i];return e.next=3,(t=o).call.apply(t,[this].concat(r));case 3:s=e.sent,c=ae()(a),e.prev=5,c.s();case 7:if((u=c.n()).done){e.next=13;break}return l=u.value,e.next=11,l.call(this,s);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),c.e(e.t0);case 18:return e.prev=18,c.f(),e.finish(18);case 21:return e.abrupt("return",s);case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])}))):function(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=(e=o).call.apply(e,[this].concat(r));if(s instanceof Promise)return s.then((function(e){var n,r=ae()(a);try{for(r.s();!(n=r.n()).done;){n.value.call(t,e)}}catch(e){r.e(e)}finally{r.f()}return e}));var c,u=ae()(a);try{for(u.s();!(c=u.n()).done;){var l=c.value;l.call(this,s)}}catch(e){u.e(e)}finally{u.f()}return s}}},Me=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r,i){var o=i.value,a=Ne(n,e);i.value=t?ne()(he().mark((function e(){var t,n,r,i,s,c,u,l,d=arguments;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=d.length,r=new Array(n),i=0;i<n;i++)r[i]=d[i];return e.next=4,(t=o).call.apply(t,[this].concat(r));case 4:return s=e.sent,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(0),c=ae()(a),e.prev=11,c.s();case 13:if((u=c.n()).done){e.next=19;break}return l=u.value,e.next=17,l.call(this,e.t0);case 17:e.next=13;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(11),c.e(e.t1);case 24:return e.prev=24,c.f(),e.finish(24);case 27:throw e.t0;case 28:case"end":return e.stop()}}),e,this,[[0,8],[11,21,24,27]])}))):function(){var e=this;try{for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=(t=o).call.apply(t,[this].concat(r));return s instanceof Promise&&s.catch((function(t){var n,r=ae()(a);try{for(r.s();!(n=r.n()).done;){n.value.call(e,t)}}catch(e){r.e(e)}finally{r.f()}})),s}catch(e){var c,u=ae()(a);try{for(u.s();!(c=u.n()).done;){var l=c.value;l.call(this,e)}}catch(e){u.e(e)}finally{u.f()}throw e}}}},Le=n(708),Be=n(8676),Fe=n.n(Be),je=n(2186),We=n(5820),Ue=n(5223),Ve=n(7348),Ge=(r=Oe(),i=Oe(),o=Oe(),a=Oe(),s=Oe(),c=Oe(),u=Oe(),l=Oe(),d=Oe(),f=Oe(),p=Oe(),h=Oe(),g=Oe(),v=Oe(),_=Oe(),m=Oe(),y=Oe(),b=Oe(),w=Oe(),I=Oe(),S=Oe(),C=Oe(),T=Oe(),E=Oe(),k=Oe(),x=Oe(),A=Oe(),P=Oe(),D=Oe(),O=function(){function e(t){ce()(this,e),this.adProxy=t,this.timePoints={},this.analyseBranchInfo=null}return le()(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"data",get:function(){return this.adProxy.data}},{key:"convertedAdData",get:function(){return this.adProxy.convertedAdData}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"adUnitId",get:function(){return this.adProxy.getAdUnitId()}},{key:"pluginAppid",get:function(){return this.adProxy.getPluginAppid()}},{key:"lastClickTime",get:function(){return this.adProxy.getLastClickTime()}},{key:"getTimePoint",value:function(e){return this.timePoints[e]?this.timePoints[e]:0}},{key:"setTimePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("splashAd"!==this.adType){["p2","p12"].includes(e)&&(this.timePoints={p1:this.timePoints.p1||0});var n=t.time;this.timePoints[e]=n||Date.now()}else this.timePoints[e]=Date.now()}},{key:"reportTimePoints",value:function(e){var t,n=e.slotid,r=e.costtype,i=e.splash_instance_id,o=void 0===i?"":i,a=e.scene,s=void 0===a?0:a,c=e.errCode,u=void 0===c?0:c,l=e.extInfo,d=void 0===l?{}:l;if(["customAd","incentive-video","splashAd","interstitialAd"].includes(this.adType)){this.reportMMData(19837,ie()({slotid:n,costtype:r,ext_info:JSON.stringify(Object.assign({},d,{adUnitId:this.adUnitId,is_game:!0})),instance_id:o,scene:s,crt_size:(null===(t=this.data)||void 0===t?void 0:t.crt_size)||0,error_code:u},this.timePoints))}}},{key:"reportCloseAction",value:function(e){return this.reportMMData(16743,e)}},{key:"reportAdEntranceExposure",value:function(e){return this.reportMMData(18988,e)}},{key:"reportTouchClick",value:function(e){return this.reportMMData(16487,e)}},{key:"reportCancelRewardPlayablePage",value:function(e){return this.reportMMData(20299,e)}},{key:"formatMMData",value:function(e,t){var n,r=(0,We.x)(e);if(!r||0===r.length)return null;var i=this.data||{aid:0,traceid:"",crt_size:0};if("grid"===this.adType&&-1!==[16139].indexOf(e))try{i=this.datas[this.datas.length-1]}catch(e){}return Object.assign(t,{aid:i.aid,traceid:i.traceid,crt_size:i.crt_size,slotid:Pe.DX[this.adType],report_time:Date.now(),ad_pos_type:null!==(n=Pe._W[this.adType])&&void 0!==n?n:0,publisher_appid:this.pluginAppid?this.pluginAppid:Ue.S3.gameAppId,appid:this.pluginAppid?this.pluginAppid:Ue.S3.gameAppId,orig_weapp_id:this.pluginAppid?Ue.S3.gameAppId:"",network_type:Ue.S3.adNetworkType,wechat_version:Ue.S3.wechatVersion,platform:Ue.S3.platform,system_version:Ue.S3.systemVersion,device_orientation:Ue.S3.deviceOrientation,wxapp_lib_version:Ue.S3.SDKVersion,wxapp_lib_time:Ue.S3.SDKVersionTime,machine_type:Ue.S3.model,machine_brand:Ue.S3.brand,screen_width:Ue.S3.screenWidth,screen_height:Ue.S3.screenHeight,ad_platform:Ue.S3.isWaGame?1:0,ad_unit_id:this.adUnitId}),r.map((function(e){return{type:e.type,value:(t[e.key]||e.value).toString()}}))}},{key:"reportMMData",value:function(e,t){var n=this.formatMMData(e,t);return(0,be.Lo)({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}})}},{key:"reportAbnormalDetect",value:function(e){var t={adunit_id:this.adUnitId,appid:Ue.S3.gameAppId};if(Object.assign(e,t),"object"===Fe()(e))return this.reportMMData(16139,e)}},{key:"reportAdIDKey",value:function(e){var t,n=e.key,r=e.id,i=n;"object"===Fe()(i)&&(!r&&(r=i.idKeyGroup),i=i.idKey),r||(r=null!==(t=Pe.gQ[this.adType])&&void 0!==t?t:924),0===i&&(i="0"),Reporter.reportIDKeyDirectly({id:r,key:i})}},{key:"processStackMsg",value:function(e){var t=(e.stack||"").replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),n=e.toString();return t.indexOf(n)<0&&(t="".concat(n,"@").concat(t)),t}},{key:"reportAdIDKeyErrorData",value:function(e){var t,n,r=e.key,i=e.id,o=e.extInfo,a=r,s=i,c=void 0===o?"":o;"object"===Fe()(a)&&(!s&&(s=a.idKeyGroup),a=a.idKey),0===a&&(a="0");var u="",l="";try{if(this.data){var d={crt_size:this.data.crt_size,product_type:this.data.product_type,dest_type:this.data.dest_type,url:this.data.url};if([je.CrtSize.CRT_SIZE_REWARD_VEDIO169,je.CrtSize.CRT_SIZE_REWARD_VEDIO916,je.CrtSize.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(this.data.crt_size)){var f=this.convertedAdData;f&&(d.is_gauss_blur=(0,Ve.zt)(f),d.is_expand_style=(0,Ve.zi)(f),l=d.is_gauss_blur?f.gaussVideo.src:f.shortVideo.src)}else this.adProxy.isBannerAd()&&(l=this.data.image_url);u=JSON.stringify(d)}if(c&&"string"!=typeof c)try{c instanceof Error&&(c=this.processStackMsg(c)),c=JSON.stringify(c)}catch(e){c=c.toString()}}catch(e){var p;c=this.processStackMsg(e),l="",u=null===(p=this.data)||void 0===p?void 0:p.crt_size}return this.reportMMData(16295,{id_key:a,id_key_group:null!==(t=null!==(n=s)&&void 0!==n?n:Pe.gQ[this.adType])&&void 0!==t?t:924,report_time:+new Date,source_url:l,expand_feild:u,expand_feild2:c,scene:this.adProxy.scene||0})}},{key:"reportAdMonitorData",value:function(e,t){this.reportAdIDKey({key:e}),this.reportAdIDKeyErrorData({key:e,extInfo:t})}},{key:"reportEndPage",value:function(e){var t=e.slotid,n=e.costtype,r=e.isGame,i=void 0===r?0:r,o=e.posType,a=e.ace_type,s=e.exposure_duration,c=void 0===s?0:s;return this.reportMMData(19002,{slotid:t,costtype:n,is_game:i,pos_type:o,ace_type:a,exposure_duration:c})}},{key:"reportAdFeedbackData",value:function(e){var t,n,r={};if("grid"===this.adType){var i,o={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(i=this.datas)||void 0===i||i.forEach((function(e){e.extBackComm&&o.viewid.push(e.extBackComm.viewid),o.s_pt.push(e.pt),o.s_aid.push(e.aid),o.s_trace_id.push(e.traceid)})),r.grid_feedback_info=o}return this.reportMMData(17045,{appid:Ue.S3.gameAppId,weapp_path:Ue.S0.weappPath,ad_unit_id:this.adUnitId,device_type:Ue.S3.model||"",ad_height:e.adHeight,ad_width:e.adWidth,screen_height:Ue.S3.screenHeight,screen_width:Ue.S3.screenWidth,ad_pos_x:e.adPosX,ad_pos_y:e.adPosY,exp_time:e.expTime,clk_complaint_button:1,slotid:Pe.DX[this.adType],service_type:Ue.S3.isWaGame?1:0,first_grade_id:e.firstGradeId,first_grade_desc:e.firstGradeDesc,first_grade_time:e.firstGradeTime,second_grade_id:e.secondGradeId,second_grade_desc:e.secondGradeDesc,second_grade_time:e.secondGradeTime,is_finish_complaint:0,is_click_ad:null!==(t=e.isClickAd)&&void 0!==t?t:0!==this.lastClickTime?1:0,click_ad_time_ms:null!==(n=e.clickAdTimeMs)&&void 0!==n?n:this.lastClickTime,feedback_reason:e.feedbackReason,ext_feedback_comm:JSON.stringify(r)})}},{key:"reportBehaviorButton",value:function(e){var t=e.button,n=e.playDuration,r=e.preloadVideo,i=e.preloadVideoSuccess,o=e.videoFirstPlay,a=e.cardFirstShow,s=e.clickCard,c=e.pressInterval,u=e.currentPlayUrl,l=e.lastFetchUrl,d=e.isEnded,f=e.videoDuration;return this.reportMMData(16e3,{click_button:t,play_duration:n,click_close_ts:+new Date,preload_video:r,preload_video_success:i,video_first_play_ts:o,card_first_show_ts:a,click_card_ts:s,press_interval:c,current_play_url:u,last_fetch_url:l,is_ended:d?1:0,video_duration:f})}},{key:"reportVideoLoadTime",value:function(e){var t=e.beginTime,n=void 0===t?0:t,r=e.endTime,i=void 0===r?0:r,o=e.departureTime,a=void 0===o?0:o,s=e.preloadVideo,c=void 0===s?0:s,u=e.preloadVideoSuccess,l=void 0===u?0:u,d=e.reportType,f=void 0===d?0:d,p=i-a-n;return p>0?this.reportMMData(15730,{load_begin_time:n,load_end_time:i,load_departure_time:a,load_cost_time:p,preload_video:c,preload_video_success:l,report_type:f}):Promise.resolve()}},{key:"reportRepeatClick",value:function(e){var t=e.slotId,n=e.costType,r=e.clkCnt,i=e.lastClkPeriod,o=e.retCode,a=e.costTime,s=e.pageStayTime,c=e.jsapiName;return this.reportMMData(15979,{slotid:t,costtype:n,clkcnt:r,currenttime:+new Date,lastclkperiod:i,retcode:o,costtime:a,pagestaytime:s,jsapiname:c})}},{key:"reportLandingTime",value:function(e){var t=e.slotId,n=e.costType,r=e.openTime,i=e.closeTime,o=e.stayTime,a=e.jsapiName,s=e.clickTime,c=e.clkCnt,u=e.retCode,l=e.costTime,d=e.actTypeInt,f=e.actTypeStr;return this.reportMMData(15980,{slotid:t,costtype:n,currenttime:s,opentime:r,closetime:i,staytime:o,jsapiname:a,clkcnt:c,retcode:u,costtime:l,act_type_int:d,act_type_str:f})}},{key:"reportVideoLastClick",value:function(e){var t=e.touchStartX,n=e.touchStartY,r=e.touchEndX,i=e.touchEndY,o=e.touchDuration,a=e.screenWidth,s=e.screenHeight;return this.reportMMData(17035,{touch_start_x:t,touch_start_y:n,touch_end_x:r,touch_end_y:i,touch_duration:o,screenwidth:a,screenheight:s})}},{key:"reportBannerLastClick",value:function(e){var t=e.lastClickArr,n=e.top,r=e.left,i=e.width,o=e.height,a=e.expMs,s=e.clickMs,c=e.bannerClkScreenX,u=e.bannerClkScreenY,l=e.lastShowTime;return this.reportMMData(18072,{last_clicks:t,banner_x:n,banner_y:r,banner_width:i,banner_height:o,exp_ms:a,clk_ms:s,banner_clk_screen_x:c,banner_clk_screen_y:u,last_show_time:l,slotid:Pe.DX[this.adType]})}},{key:"reportRelationFetchDuration",value:function(e){var t=e.startTime,n=e.showTime,r=e.endTime;return this.reportMMData(19429,{start_time:t,show_time:n,end_time:r,show_delay_duration:0===n?0:r-n,fetch_duration:r-t})}},{key:"reportMMClickPos",value:function(e){var t,n=e.clickPos;return this.reportMMData(20480,{slotid:Pe.DX[this.adType],costtype:null!==(t=this.data)&&void 0!==t&&t.is_cpm?1:2,currenttime:Date.now(),click_pos:n})}},{key:"reportADFunnelModel",value:function(e){var t=[e.adtype,e.stage].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameADFunnelModel",value:t,force:!0,immediately:!0})}},{key:"recordAnalyseBranchInfo",value:function(e){var t=e.branchId,n=e.branchDim;this.analyseBranchInfo={branchId:t,branchDim:n}}},{key:"resetAnalyseBranchInfo",value:function(){this.analyseBranchInfo=null}},{key:"reportAnalyseInfo",value:function(e){var t=Pe.WG[this.adType]||"viewable";if(Ue.S3.isWaGame&&e===t){var n=this.analyseBranchInfo;n&&("release"!==Ue.S3.envVersion&&this.adProxy.reportAnalyseDebugInfo(n),this.reportMMData(20317,{branch_id:n.branchId,branch_dim:n.branchDim}))}}},{key:"reportRewardGaussVideo",value:function(e){var t=e.useGaussVideo,n=e.useExpandStyle,r=e.videoUrl,i=e.gaussVideoUrl,o=e.expUseGaussVideo,a=e.expUseExpandStyle;this.reportMMData(21644,{use_gauss_video:t?1:0,video_url:r,gauss_video_url:i,use_expand_style:n?1:0,exp_use_gauss_video:o,exp_use_expand_style:a})}},{key:"reportPopupClickAction",value:function(e){var t=e.buttonType,n=e.buttonTime,r=e.adClkTime,i=e.adExpTime,o=e.adClkX,a=e.adClkY,s=e.adWidth,c=e.adHeight,u=e.isGame,l=e.costtype;this.reportMMData(23415,{adunitid:this.adUnitId,button_type:t,button_time:n,ad_clk_time:r,ad_exp_time:i,ad_clk_x:o,ad_clk_y:a,ad_width:s,ad_height:c,is_game:u,costtype:l})}}]),e}(),fe()(O.prototype,"getTimePoint",[r],Object.getOwnPropertyDescriptor(O.prototype,"getTimePoint"),O.prototype),fe()(O.prototype,"setTimePoint",[i],Object.getOwnPropertyDescriptor(O.prototype,"setTimePoint"),O.prototype),fe()(O.prototype,"reportTimePoints",[o],Object.getOwnPropertyDescriptor(O.prototype,"reportTimePoints"),O.prototype),fe()(O.prototype,"reportCloseAction",[a],Object.getOwnPropertyDescriptor(O.prototype,"reportCloseAction"),O.prototype),fe()(O.prototype,"reportAdEntranceExposure",[s],Object.getOwnPropertyDescriptor(O.prototype,"reportAdEntranceExposure"),O.prototype),fe()(O.prototype,"reportTouchClick",[c],Object.getOwnPropertyDescriptor(O.prototype,"reportTouchClick"),O.prototype),fe()(O.prototype,"reportCancelRewardPlayablePage",[u],Object.getOwnPropertyDescriptor(O.prototype,"reportCancelRewardPlayablePage"),O.prototype),fe()(O.prototype,"reportMMData",[l],Object.getOwnPropertyDescriptor(O.prototype,"reportMMData"),O.prototype),fe()(O.prototype,"reportAbnormalDetect",[d],Object.getOwnPropertyDescriptor(O.prototype,"reportAbnormalDetect"),O.prototype),fe()(O.prototype,"reportAdIDKey",[f],Object.getOwnPropertyDescriptor(O.prototype,"reportAdIDKey"),O.prototype),fe()(O.prototype,"processStackMsg",[p],Object.getOwnPropertyDescriptor(O.prototype,"processStackMsg"),O.prototype),fe()(O.prototype,"reportAdIDKeyErrorData",[h],Object.getOwnPropertyDescriptor(O.prototype,"reportAdIDKeyErrorData"),O.prototype),fe()(O.prototype,"reportAdMonitorData",[g],Object.getOwnPropertyDescriptor(O.prototype,"reportAdMonitorData"),O.prototype),fe()(O.prototype,"reportEndPage",[v],Object.getOwnPropertyDescriptor(O.prototype,"reportEndPage"),O.prototype),fe()(O.prototype,"reportAdFeedbackData",[_],Object.getOwnPropertyDescriptor(O.prototype,"reportAdFeedbackData"),O.prototype),fe()(O.prototype,"reportBehaviorButton",[m],Object.getOwnPropertyDescriptor(O.prototype,"reportBehaviorButton"),O.prototype),fe()(O.prototype,"reportVideoLoadTime",[y],Object.getOwnPropertyDescriptor(O.prototype,"reportVideoLoadTime"),O.prototype),fe()(O.prototype,"reportRepeatClick",[b],Object.getOwnPropertyDescriptor(O.prototype,"reportRepeatClick"),O.prototype),fe()(O.prototype,"reportLandingTime",[w],Object.getOwnPropertyDescriptor(O.prototype,"reportLandingTime"),O.prototype),fe()(O.prototype,"reportVideoLastClick",[I],Object.getOwnPropertyDescriptor(O.prototype,"reportVideoLastClick"),O.prototype),fe()(O.prototype,"reportBannerLastClick",[S],Object.getOwnPropertyDescriptor(O.prototype,"reportBannerLastClick"),O.prototype),fe()(O.prototype,"reportRelationFetchDuration",[C],Object.getOwnPropertyDescriptor(O.prototype,"reportRelationFetchDuration"),O.prototype),fe()(O.prototype,"reportMMClickPos",[T],Object.getOwnPropertyDescriptor(O.prototype,"reportMMClickPos"),O.prototype),fe()(O.prototype,"reportADFunnelModel",[E],Object.getOwnPropertyDescriptor(O.prototype,"reportADFunnelModel"),O.prototype),fe()(O.prototype,"recordAnalyseBranchInfo",[k],Object.getOwnPropertyDescriptor(O.prototype,"recordAnalyseBranchInfo"),O.prototype),fe()(O.prototype,"resetAnalyseBranchInfo",[x],Object.getOwnPropertyDescriptor(O.prototype,"resetAnalyseBranchInfo"),O.prototype),fe()(O.prototype,"reportAnalyseInfo",[A],Object.getOwnPropertyDescriptor(O.prototype,"reportAnalyseInfo"),O.prototype),fe()(O.prototype,"reportRewardGaussVideo",[P],Object.getOwnPropertyDescriptor(O.prototype,"reportRewardGaussVideo"),O.prototype),fe()(O.prototype,"reportPopupClickAction",[D],Object.getOwnPropertyDescriptor(O.prototype,"reportPopupClickAction"),O.prototype),O),He=n(8392),Ze=n(8339),qe=n(5212),ze=1,Ye=new Set,Ke=(N=Oe(),R=Oe(),M=Oe(),L=Oe(),B=Oe(),F=Oe(),j=Oe(),W=Oe(),U=Oe(),V=Oe(),G=Oe(),H=Oe(),Z=Oe(),q=Oe(),z=Oe(),Y=Oe(),K=Oe(),J=function(){function e(t){ce()(this,e),this.adProxy=t,this.lastVideoReportTime=0,this.lastExposureTime=0,this.lastClickTime=0,this.lastAdReqTs=0,this.index=void 0,this.index=ze,ze+=1,Ye.add(this.adUnitId)}return le()(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"adUnitId",get:function(){return this.adProxy.getAdUnitId()}},{key:"slotData",get:function(){return this.adProxy.getSlotData()}},{key:"pluginAppid",get:function(){return this.adProxy.getPluginAppid()}},{key:"data",get:function(){return this.adProxy.data}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"reportAdMonitorData",get:function(){return this.adProxy.reportAdMonitorData}},{key:"reset",value:function(){this.lastVideoReportTime=0}},{key:"getLastClickTime",value:function(){return this.lastClickTime}},{key:"getLastAdReqTs",value:function(){return this.lastAdReqTs}},{key:"setLastExposureTime",value:function(e){this.lastExposureTime=e}},{key:"setLastClickTime",value:function(e){this.lastClickTime=e}},{key:"setLastAdReqTs",value:function(e){this.lastAdReqTs=e}},{key:"reportFollow",value:function(e){var t=this,n=e.result,r=5;return this.adProxy.isRewardedVideoAd()?r=6:[je.CrtSize.CRT_SIZE_TABLE_SCREEN_IMAGE,je.CrtSize.CRT_SIZE_INSERT_VIDEO].includes(this.data.crt_size)&&(r=8),(0,be.Lo)({apiName:"webapi_adfollow_report",reqData:{type:{success:140,fail:141,already:142,cancel:143}[n],source:5,scene:75,traceid:this.data.traceid,trace_id:this.data.traceid,aid:this.data.aid,pos_type:r}}).catch((function(e){throw t.reportAdMonitorData(Ze.IN.FOLLOW_REPORT_ERROR,e),e}))}},{key:"getExtraExpOrClkData",value:function(e){var t,n=this,r=[];"exposure"===e.reportType&&e.isMulti&&e.multiList?r=e.multiList.map((function(e,t){return{idx:t,waid:n.datas[e].waid||""}})):this.data.waid&&(r=[{idx:0,waid:this.data.waid}]);var i=ie()(ie()({},(0,Ue.v3)()),{},{weapp_enter_scene:(null===_e.Z||void 0===_e.Z||null===(t=_e.Z.appLaunchInfo)||void 0===t?void 0:t.scene)||0,extra:JSON.stringify(r)}),o=ie()({},i),a=ie()({},i);if("customAd"===this.adType&&e.isMulti)if("exposure"===e.reportType){var s,c={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(s=e.multiList)||void 0===s||s.forEach((function(e){var t=n.datas[e];t.extBackComm&&c.viewid.push(t.extBackComm.viewid),c.s_pt.push(t.pt),c.s_aid.push(t.aid),c.s_trace_id.push(t.traceid)})),o.box_ad_exposure={report_mode:1,box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:JSON.stringify({viewid:c.viewid}),s_trace_id:JSON.stringify(c.s_trace_id),s_aid:JSON.stringify(c.s_aid),s_pt:JSON.stringify(c.s_pt),s_index:JSON.stringify(e.multiList||[])}}else if("click"===e.reportType){var u,l=this.adProxy.adDataIndex;a.box_ad_click={box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:null===(u=this.data.extBackComm)||void 0===u?void 0:u.viewid,box_index:l}}if("customAd"===this.adType){var d,f=null===(d=this.data.extBackComm)||void 0===d?void 0:d.sub_templ_id;f&&(o.sub_templ_id=f,a.sub_templ_id=f)}if("incentive-video"===this.adType&&this.data.isPlayable&&(o.is_playable=1,a.is_playable=1),["interstitialAd","incentive-video","customAd"].includes(this.adType)&&e.videoData){var p=e.videoData,h=p.currentTime,g=p.duration;(h||g)&&(a.video_play_time=h,a.video_duration=g)}if("grid"===this.adType)if("exposure"===e.reportType){var v,_={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(v=this.datas)||void 0===v||v.forEach((function(e){e.extBackComm&&_.viewid.push(e.extBackComm.viewid),_.s_pt.push(e.pt),_.s_aid.push(e.aid),_.s_trace_id.push(e.traceid)})),o.box_ad_exposure={report_mode:1,box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:JSON.stringify({viewid:_.viewid}),s_trace_id:JSON.stringify(_.s_trace_id),s_aid:JSON.stringify(_.s_aid),s_pt:JSON.stringify(_.s_pt)}}else if("click"===e.reportType){var m,y=e.clickAdIndex||0;a.box_ad_click={box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:null===(m=this.data.extBackComm)||void 0===m?void 0:m.viewid,box_index:y}}return{extExposureComm:o,extClickComm:a}}},{key:"reportExpOrClk",value:function(e){var t=this,n=3;if("exposure"===e.reportType?(n={showed:2,viewable:5,incentiveVideoCard:14}[e.exposureType],"showed"===e.exposureType?this.adProxy.setTimePoint("p6"):"viewable"===e.exposureType&&this.adProxy.setTimePoint("p7"),this.adProxy.reportAnalyseInfo(e.exposureType)):"click"===e.reportType&&this.adProxy.setTimePoint("p10"),"exposure"===e.reportType&&e.multiList&&e.isMulti){var r=this.adProxy.adDataIndex;e.multiList.forEach((function(e){t.adProxy.setCurrentData(e),(0,He.IN)("adDataReport",{adInfo:t.adProxy.getTransmissionChainData({logtype:n})})})),this.adProxy.setCurrentData(r)}else(0,He.IN)("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:n})});var i=this.getExtraExpOrClkData(e),o=i.extExposureComm,a=i.extClickComm,s=this.getExpOrClkCommonArgs(e),c="click"===e.reportType?{click_point:JSON.stringify({x:e.clickAbsoluteLeft,y:e.clickAbsoluteTop}),press_interval:e.pressInterval,pos_x:e.clickRelativeLeft,pos_y:e.clickRelativeTop,click_pos:0,ext_click_comm:JSON.stringify(a)}:{exposure_type:Pe.qi[e.exposureType],ext_exposure_comm:JSON.stringify(o)};return(0,be.Lo)({apiName:"advert_report",reqData:ie()(ie()(ie()({},s),c),{},{report_type:Pe.yd[e.reportType],weapp_extra_data:JSON.stringify(s.weapp_extra_data),ad_group_id:s.advert_group_id,apurl:this.data.apurl,rl:this.data.rl,weapp_ghid:s.weapp_gh_id})})}},{key:"getExpOrClkCommonArgs",value:function(e){var t;return{advert_group_id:this.data.group_id,trace_id:this.data.traceid,pos_id:Pe.DX[this.adType],pos_type:Pe.UJ[this.adType],sdk_version:Ue.S3.SDKVersion,ad_w:e.width,ad_h:e.height,aid:this.data.aid,weapp_gh_id:(null===(t=this.data.weapp_info)||void 0===t?void 0:t.original_id)||"",pt:this.data.pt,screen_cnt:1,from_h5:0,from_game:1,wegame_start_ts:Ue.S3.startTime.valueOf(),wegame_enter_ts:Ue.S0.enterForegroundTime.valueOf(),wegame_user_duration:Ue.S0.gameDuration+(Date.now()-Ue.S0.enterForegroundTime.getTime()),wxa_report_detail:this.getWxaReportDetail({left:e.left,top:e.top}),weapp_extra_data:ie()(ie()({},this.getWeappExtraData()),e.weappExtraData||{})}}},{key:"reportClick",value:function(e){var t=this;return this.lastClickTime=+new Date,this.reportExpOrClk(ie()({reportType:"click"},e)).catch((function(e){throw t.reportAdMonitorData(Ze.IN.CLICK_REPORT_ERROR,e),e}))}},{key:"reportExposure",value:function(e){var t=this;return"showed"===e.exposureType&&this.adProxy.checkPreloadH5Page(),this.lastExposureTime=+new Date,this.reportExpOrClk(ie()({reportType:"exposure"},e)).catch((function(e){throw t.reportAdMonitorData(Ze.IN.EXPOSURE_REPORT_ERROR,e),e}))}},{key:"reportFlooringPage",value:function(e,t){var n={aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:Ue.S3.gameAppId,orig_weapp_id:this.pluginAppid?Ue.S3.gameAppId:""},r=null==t?void 0:t.map((function(e){return ie()(ie()({},n),e)})),i={};return 1===e?i.rewared_video_ending_page_a=r:2===e&&(i.rewared_video_ending_page_b=r),(0,be.Lo)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(i)}})}},{key:"reportAntifraud",value:function(e){var t=ie()(ie()({},e),{},{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:Ue.S3.gameAppId,orig_weapp_id:this.pluginAppid?Ue.S3.gameAppId:"",network_type:Ue.S3.adNetworkType,wechat_version:Ue.S3.wechatVersion,platform:Ue.S3.platform,system_version:Ue.S3.systemVersion,device_orientation:Ue.S3.deviceOrientation,wxapp_lib_version:Ue.S3.SDKVersion,crt_size:this.data.crt_size,product_type:this.data.product_type,adunitid:this.adUnitId,machine_brand:Ue.S3.brand||"",machine_type:Ue.S3.model||"",clientimptime:this.lastAdReqTs}),n={};return n.antifraud_table_screen_report=[t],(0,be.Lo)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(n)}})}},{key:"reportVideo",value:function(e){var t=e.playType,n=e.conditionType,r=e.muted,i=e.playDuration,o=e.videoDuration,a=e.rewardedTime,s=e.isRewarded,c=(0,be.Lo)({apiName:"webapi_advideo_report",reqData:{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,trace_id:this.data.traceid,viewid:this.data.wx_game_video.short_video.viewid,video_play_info:{play_type:{unknown:0,complete:1,partial:2,error:3}[t],play_duration:i-this.lastVideoReportTime,video_duration:o,auto_play:!0,muted:r,rewarded_time:a&&Math.min(a,o),is_rewarded:s},report_type:{unknown:0,land:1,end:2,start:3,exit:4,close:5}[n]}});return this.lastVideoReportTime=i,c}},{key:"getWxaReportDetail",value:function(e){var t=e.top,n=void 0===t?0:t,r=e.left,i=void 0===r?0:r;return{page_x:i||0,page_y:n||0,screen_x:i||0,screen_y:n||0,ad_number:ze-1,ad_unit_number:Ye.size,ad_index:this.index,page_enter_time:Ue.S0.enterForegroundTime.valueOf(),phone_screen_width:Ue.S3.screenWidth,phone_screen_height:Ue.S3.screenHeight}}},{key:"getWeappExtraData",value:function(){var e,t;return{weixin_version:Ue.S3.wechatVersion,os_version:Ue.S3.systemVersion,machine_brand:Ue.S3.brand||"",machine_type:Ue.S3.model,network_type:Ue.S3.adNetworkType,start_ts:Ue.S3.startTime.valueOf(),enter_ts:Ue.S0.enterForegroundTime.valueOf(),user_duration:Ue.S0.gameDuration+(Date.now()-Ue.S0.enterForegroundTime.getTime()),imp_time:this.lastAdReqTs,exp_time:this.lastExposureTime,clk_time:this.lastClickTime,env:null===(e=_e.Z.host)||void 0===e?void 0:e.env,app_appid:null===(t=_e.Z.host)||void 0===t?void 0:t.appId}}},{key:"composeExposureCommonInfo",value:function(e){var t,n=e.top,r=void 0===n?0:n,i=e.left,o=void 0===i?0:i,a=e.width,s=void 0===a?0:a,c=e.height,u=void 0===c?0:c,l=e.adType,d=void 0===l?"incentive-video":l;try{t=this.data.weapp_info.original_id}catch(e){}var f=ie()({},(0,Ue.v3)()),p=this.getWeappExtraData(),h=this.getWxaReportDetail({top:r,left:o}),g={report_type:0,pos_id:Pe.DX[this.adType],sdk_version:Ue.S3.SDKVersion,aid:this.data.aid,traceid:this.data.traceid,trace_id:this.data.traceid,ad_group_id:this.data.group_id,weapp_ghid:t,rl:this.data.rl,pt:this.data.pt,screen_cnt:1,ad_w:s,ad_h:u,from_game:1,from_h5:0,wegame_start_ts:Ue.S3.startTime.valueOf(),wegame_enter_ts:Ue.S0.enterForegroundTime.valueOf(),wegame_user_duration:Ue.S0.gameDuration+(Date.now()-Ue.S0.enterForegroundTime.getTime()),pos_type:Pe.UJ[d],wxa_report_detail:h,weapp_extra_data:JSON.stringify(p),ext_exposure_comm:JSON.stringify(f)};return JSON.stringify(g)}},{key:"reportInstallFollow",value:function(e){var t=this.data.condition;t&&1===t.widget_gray_report_install_follow&&(0,be.Lo)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(e)}})}},{key:"reportAnalyseDebugInfo",value:function(e){var t=this,n=Pe.wE[this.adType];return n||this.reportAdMonitorData(Ze.IN.ANALYSE_DEBUG_REPORT_ERROR,new Error("invalid reportType ".concat(this.adType))),(0,be.Lo)({apiName:"webapi_reportbranchanalyticsfordebugtool",reqData:{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:n}]}}).catch((function(e){t.reportAdMonitorData(Ze.IN.ANALYSE_DEBUG_REPORT_ERROR,e)}))}},{key:"reportIPV4",value:function(){var e=this;setTimeout((function(){try{var t,n=e.datas&&e.datas.length>0?e.datas[0]:e.data;null!=n&&null!==(t=n.extBackComm)&&void 0!==t&&t.ip_ping_url&&(0,qe.a)({url:(0,me.Uj)(n.extBackComm.ip_ping_url)})}catch(e){}}),2e3)}}]),e}(),fe()(J.prototype,"getLastClickTime",[N],Object.getOwnPropertyDescriptor(J.prototype,"getLastClickTime"),J.prototype),fe()(J.prototype,"getLastAdReqTs",[R],Object.getOwnPropertyDescriptor(J.prototype,"getLastAdReqTs"),J.prototype),fe()(J.prototype,"setLastExposureTime",[M],Object.getOwnPropertyDescriptor(J.prototype,"setLastExposureTime"),J.prototype),fe()(J.prototype,"setLastClickTime",[L],Object.getOwnPropertyDescriptor(J.prototype,"setLastClickTime"),J.prototype),fe()(J.prototype,"setLastAdReqTs",[B],Object.getOwnPropertyDescriptor(J.prototype,"setLastAdReqTs"),J.prototype),fe()(J.prototype,"reportFollow",[F],Object.getOwnPropertyDescriptor(J.prototype,"reportFollow"),J.prototype),fe()(J.prototype,"getExpOrClkCommonArgs",[j],Object.getOwnPropertyDescriptor(J.prototype,"getExpOrClkCommonArgs"),J.prototype),fe()(J.prototype,"reportClick",[W],Object.getOwnPropertyDescriptor(J.prototype,"reportClick"),J.prototype),fe()(J.prototype,"reportExposure",[U],Object.getOwnPropertyDescriptor(J.prototype,"reportExposure"),J.prototype),fe()(J.prototype,"reportFlooringPage",[V],Object.getOwnPropertyDescriptor(J.prototype,"reportFlooringPage"),J.prototype),fe()(J.prototype,"reportAntifraud",[G],Object.getOwnPropertyDescriptor(J.prototype,"reportAntifraud"),J.prototype),fe()(J.prototype,"reportVideo",[H],Object.getOwnPropertyDescriptor(J.prototype,"reportVideo"),J.prototype),fe()(J.prototype,"getWxaReportDetail",[Z],Object.getOwnPropertyDescriptor(J.prototype,"getWxaReportDetail"),J.prototype),fe()(J.prototype,"composeExposureCommonInfo",[q],Object.getOwnPropertyDescriptor(J.prototype,"composeExposureCommonInfo"),J.prototype),fe()(J.prototype,"reportInstallFollow",[z],Object.getOwnPropertyDescriptor(J.prototype,"reportInstallFollow"),J.prototype),fe()(J.prototype,"reportAnalyseDebugInfo",[Y],Object.getOwnPropertyDescriptor(J.prototype,"reportAnalyseDebugInfo"),J.prototype),fe()(J.prototype,"reportIPV4",[K],Object.getOwnPropertyDescriptor(J.prototype,"reportIPV4"),J.prototype),J),Je=n(572),$e=n.n(Je);function Xe(e){return{appId:e.weapp_info&&e.weapp_info.appid,appType:46==e.product_type?1004:1e3,path:e.url,openRate:e.extBackComm&&e.extBackComm.pctr||0}}var Qe,et,tt,nt,rt,it,ot,at,st,ct,ut,lt,dt,ft=n(13),pt=(Qe=Oe(),et=Oe(),tt=Oe(),nt=Oe(),rt=Oe(),it=Oe(),ot=Oe(),at=Oe(),st=Oe(),ct=Oe(),ut=Oe(),lt=Oe(),dt=function(){function e(t){ce()(this,e),this.adProxy=t,this.isAppInstalled=!1}var t,n,r,i;return le()(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"data",get:function(){return this.adProxy.data}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"reportAdMonitorData",get:function(){return this.adProxy.reportAdMonitorData}},{key:"isValidCondition",get:function(){return this.adProxy.isValidCondition}},{key:"getFullRl",value:function(){var e=this.data.rl;try{/viewid=([^&]+)/.test(e)||(-1===e.indexOf("?")?e+="?viewid=".concat(this.data.extBackComm.viewid):e+="&viewid=".concat(this.data.extBackComm.viewid))}catch(e){}return e}},{key:"getFollowPageUrl",value:function(e,t){var n={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type,jsapi_scene:Ue.S3.isWaGame?147:140};return(0,Le.a3)(t,n)}},{key:"isPrefetch",value:function(e){var t,n,r,i,o,a,s,c,u={url:this.data.url,jump_url:this.data.button_action.jump_url,playable_url:null===(t=this.data.crtInfo)||void 0===t||null===(n=t[0])||void 0===n||null===(r=n.wxgame_video_card)||void 0===r||null===(i=r.flooring_page)||void 0===i?void 0:i.page_url}[e],l={url:this.data.dest_type===Ze.z5.DEST_TYPE_OUTER,jump_url:(null===(o=this.data.button_action)||void 0===o?void 0:o.jump_type)===Ze.z5.DEST_TYPE_OUTER,playable_url:!0}[e];return u&&l&&Boolean(null===(a=this.data)||void 0===a||null===(s=a.extBackComm)||void 0===s||null===(c=s.material_handler_info)||void 0===c?void 0:c.h5_preload_info[e])}},{key:"getTransmissionChainData",value:function(e){var t=e.logtype,n=void 0===t?3:t,r={traceid:this.data.traceid,trace_id:this.data.traceid,product_type:this.data.pt,jump_url:encodeURIComponent(this.data.url),rl:encodeURIComponent(this.getFullRl()),logtype:n};return Object.keys(r).map((function(e){return"".concat(e,"=").concat(r[e])})).join("&")}},{key:"setAppInstallState",value:function(e){this.isAppInstalled=e}},{key:"land",value:(i=ne()(he().mark((function e(){var t,n,r,i,o,a,s,c,u,l,d,f,p,h,g,v,_,m,y,b,w,I=this,S=arguments;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S.length>0&&void 0!==S[0]?S[0]:{},n=t.isButton,r=void 0!==n&&n,i=this.data,o=i.dest_type,a=i.product_type,s=i.url,c={isButton:r},!r){e.next=45;break}if(this.isPrefetch("jump_url")&&this.adProxy.reportAdMonitorData(Ze.IN.H5_PRELOAD_BUTTON_CLICKED),u=this.data.button_action,l=u.jump_type,d=u.jump_url,a!==Ze.kv.IOS){e.next=8;break}return e.abrupt("return",this.openAppStore());case 8:if(a!==Ze.kv.WE_CHAT){e.next=42;break}if(f=this.data.biz_info,p=f.user_name,!f.is_subscribed){e.next=14;break}if(10!==l){e.next=13;break}return e.abrupt("return",this.landPage(l,s,c));case 13:return e.abrupt("return",(0,be.Yo)({url:this.getFollowPageUrl(this.data,d),adInfo:this.getTransmissionChainData({logtype:3})}));case 14:return e.prev=14,e.next=17,this.adProxy.addContact({username:p,isWaGame:Ue.S3.isWaGame});case 17:h=e.sent,g=this.data,v=g.ext_info,_=g.uxinfo;try{m=JSON.parse(v)}catch(e){}if(!(/ok|added/.test(h.errMsg)&&m&&m.guide_group_id&&_)){e.next=31;break}return e.prev=22,e.next=25,(0,we.LQ)({guide_group_id:m.guide_group_id,uxinfo:_});case 25:this.adProxy.reportAdIDKey({key:Ze.IN.BIND_GUIDE_SUCCESS}),e.next=31;break;case 28:e.prev=28,e.t0=e.catch(22),this.reportAdMonitorData(Ze.IN.BIND_GUIDE_ERROR,e.t0);case 31:return e.abrupt("return",h);case 34:if(e.prev=34,e.t1=e.catch(14),!/cancel/.test(e.t1.errMsg)){e.next=38;break}return e.abrupt("return",e.t1);case 38:throw this.reportAdMonitorData(Ze.IN.ADD_CONTACT_ERROR,e.t1),e.t1;case 40:e.next=43;break;case 42:return e.abrupt("return",this.landPage(l,d,c));case 43:e.next=55;break;case 45:if(this.isPrefetch("url")&&this.adProxy.reportAdMonitorData(Ze.IN.H5_PRELOAD_CARD_CLICKED),!([12,19].indexOf(a)>-1)){e.next=54;break}if(y=this.data.app_info.url_scheme,Ue.S3.isIOS&&(b=JSON.stringify({aid:this.data.aid,ad_uid:null===(w=this.data.extBackComm)||void 0===w?void 0:w.uid,scene_id:4001})),!(y&&y.trim().length>0)){e.next=53;break}if(!Ue.S3.isAndroid||this.isAppInstalled){e.next=52;break}return e.abrupt("return",this.landPage(o,s,c));case 52:return e.abrupt("return",this.adProxy.launchApplication({schemeUrl:y,isIosDirect:Ue.S3.isIOS,appInfo:this.data.app_info,extraData:b}).catch((function(){return I.landPage(o,s,c)})));case 53:case 54:return e.abrupt("return",this.landPage(o,s,c));case 55:case"end":return e.stop()}}),e,this,[[14,34],[22,28]])}))),function(){return i.apply(this,arguments)})},{key:"landPage",value:function(e,t,n){var r=this;if(e===Ze.z5.DEST_TYPE_APPDETAIL&&Ue.S3.isIOS){var i,o=this.data.app_info.appinfo_url,a=JSON.stringify({aid:this.data.aid,ad_uid:null===(i=this.data.extBackComm)||void 0===i?void 0:i.uid,scene_id:4001});return this.adProxy.launchApplication({schemeUrl:o,extraData:a}).catch((function(){return(0,be.Yo)({url:o,adInfo:r.getTransmissionChainData({logtype:3})}).catch((function(e){throw r.reportAdMonitorData(Ze.IN.OPEN_URL_ERROR,e),e}))}))}if(e===Ze.z5.DEST_TYPE_BIZ)return(0,be.Yo)({url:this.getFollowPageUrl(this.data,t),adInfo:this.getTransmissionChainData({logtype:3})}).catch((function(e){throw r.reportAdMonitorData(Ze.IN.OPEN_URL_ERROR,e),e}));if(e===Ze.z5.DEST_TYPE_WECHAT_APPLET){var s=this.data,c=s.weapp_info.appid,u=s.traceid,l=s.aid,d=s.uxinfo;return(0,be.Be)({appId:c,path:t,traceid:u,aid:l,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:d}).catch((function(e){throw r.reportAdMonitorData(Ze.IN.OPEN_WXAPP_ERROR,e),e}))}if(e===Ze.z5.DEST_TYPE_CANVAS){var f=this.data,p=f.canvas_info,h=f.pos_type;return(0,be._t)({canvasInfo:p,posType:h}).catch((function(e){throw r.reportAdMonitorData(Ze.IN.OPEN_CANVAS_ERROR,e),e}))}if(10===e){var g=this.data.biz_info.user_name;return this.adProxy.openProfile({username:g}).catch((function(e){throw e}))}return e===Ze.z5.DEST_TYPE_CHANNELS?this.jumpChannels("activity",n):e===Ze.z5.DEST_TYPE_CHANNELS_LIVE?this.jumpChannels("live",n):e===Ze.z5.DEST_TYPE_CHANNELS_USER_PROFILE?this.jumpChannels("userProfile",n):(0,be.Yo)({url:t,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:this.data.uxinfo}).catch((function(e){throw r.reportAdMonitorData(Ze.IN.OPEN_URL_ERROR,e),e}))}},{key:"getChannelsExtraInfo",value:function(e){return JSON.stringify({sns_ad:{uxinfo:this.data.uxinfo||"",snsid:"",scene:e}}).replace(/,/g,";")}},{key:"jumpChannels",value:(r=ne()(he().mark((function e(t,n){var r,i,o,a,s,c,u,l,d,f,p;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.isButton,o=null===(r=this.data)||void 0===r?void 0:r.extBackComm.channels_info,a=this.data,s=a.crt_size,c=a.apurl,u=a.rl,l={feedId:o.id,nonceId:o.nonce_id,finderUserName:o.username,reportExtraInfo:this.getChannelsExtraInfo(i?Ze.Fe.ACTIONBUTTON:Ze.Fe.RESOURCE)},d={activity:Ze.IN.OPEN_CHANNELS_ACTIVITY_SUCCESS,live:Ze.IN.OPEN_CHANNELS_LIVE_SUCCESS,userProfile:Ze.IN.OPEN_CHANNELS_USER_PROFILE_SUCCESS}[t],f={activity:Ze.IN.OPEN_CHANNELS_ACTIVITY_FAILED,live:Ze.IN.OPEN_CHANNELS_LIVE_FAILED,userProfile:Ze.IN.OPEN_CHANNELS_USER_PROFILE_FAILED}[t],!o){e.next=39;break}if("activity"!==t||s!==ft.CrtSize.CRT_SIZE_REWARD_LANDINGPAGE){e.next=19;break}return e.prev=8,e.next=11,this.adProxy.openChannelsRewardedVideoAd(ie()(ie()({},l),{},{expReportLink:c,clkReportLink:u,reportInfo:this.adProxy.getExpOrClkCommonArgs({top:0,left:0,width:Ue.S3.screenWidth,height:Ue.S3.screenHeight}),clickPosMap:{follow:Ze.AN.MMOCAD_CLICKPOS_BIZ_FOLLOW,like:Ze.AN.MMOCAD_CLICKPOS_BIZ_LIKE,comment:Ze.AN.MMOCAD_CLICKPOS_BIZ_COMMENT,headimage:Ze.AN.MMOCAD_CLICKPOS_BIZ_HEADIMAGE,nickname:Ze.AN.MMOCAD_CLICKPOS_BIZ_NICKNAME,forward:Ze.AN.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD},feedbackUrl:this.getFeedbackUrl(Ue.S3.isWaGame?1003:1005)}));case 11:return p=e.sent,this.reportAdMonitorData(d),e.abrupt("return",p);case 16:e.prev=16,e.t0=e.catch(8),this.reportAdMonitorData(f,e.t0);case 19:e.prev=19,e.t1=t,e.next="activity"===e.t1?23:"live"===e.t1?26:"userProfile"===e.t1?29:32;break;case 23:return e.next=25,this.adProxy.openChannelsRewardedVideoAd(ie()(ie()({},l),{},{adJSAPIType:1}));case 25:return e.abrupt("break",32);case 26:return e.next=28,this.adProxy.openChannelsLive(l);case 28:return e.abrupt("break",32);case 29:return e.next=31,this.adProxy.openChannelsUserProfile(l);case 31:return e.abrupt("break",32);case 32:return this.reportAdMonitorData(d),e.abrupt("return");case 36:e.prev=36,e.t2=e.catch(19),this.reportAdMonitorData(f,e.t2);case 39:return this.reportAdMonitorData(f,new Error("channelsInfo is empty")),e.abrupt("return");case 41:case"end":return e.stop()}}),e,this,[[8,16],[19,36]])}))),function(e,t){return r.apply(this,arguments)})},{key:"openAppStore",value:function(){var e,t=this,n=this.data.app_info,r=n.appinfo_url,i=n.url_scheme,o=JSON.stringify({aid:this.data.aid,ad_uid:null===(e=this.data.extBackComm)||void 0===e?void 0:e.uid,scene_id:4001});return i&&i.trim().length>0?this.adProxy.launchApplication({schemeUrl:i,isIosDirect:!0,appInfo:this.data.app_info,extraData:o}).catch((function(){return t.adProxy.launchApplication({schemeUrl:r,extraData:o}).catch((function(){return(0,be.Yo)({url:r,adInfo:t.getTransmissionChainData({logtype:3})}).catch((function(e){throw t.reportAdMonitorData(Ze.IN.OPEN_URL_ERROR,e),e}))}))})):this.adProxy.launchApplication({schemeUrl:r,extraData:o}).catch((function(){return(0,be.Yo)({url:r,adInfo:t.getTransmissionChainData({logtype:3})}).catch((function(e){throw t.reportAdMonitorData(Ze.IN.OPEN_URL_ERROR,e),e}))}))}},{key:"preloadLanding",value:function(){var e=this;try{if(6===this.data.dest_type){var t=[],n=[];if("grid"===this.adType?this.datas.forEach((function(e){var r;null!==(r=e.weapp_info)&&void 0!==r&&r.appid&&(t.push(e.weapp_info.appid),n.push(Xe(e)))})):(t=[this.data.weapp_info.appid],n.push(Xe(this.data))),(0,He.IN)("batchGetContact",{appIds:t}),Ue.S3.isAndroid)this.isValidCondition("widget_gray_batchload_app")&&(0,He.IN)("batchPreloadMiniProgram",{openParams:{visitScene:Ue.S0.currentScene,businessScene:1,innerScene:1095},preloadList:n,success:function(t){e.reportAdMonitorData(Ze.IN.BATCHLOAD_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(Ze.IN.BATCHLOAD_ERROR,t)}});else if(Ue.S3.isIOS){var r="app";this.data.product_type===Ze.kv.MINI_GAME&&(r="game"),this.isValidCondition("widget_gray_preload_env")&&(Ue.S3.isAndroid||"app"===r)&&(0,He.IN)("preloadMiniProgramEnv",{type:r,success:function(t){e.reportAdMonitorData(Ze.IN.PRELOAD_MINIENV_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(Ze.IN.PRELOAD_MINIENV_ERROR,t)}}),this.isValidCondition("widget_gray_predownload_app")&&(0,He.IN)("predownloadMiniProgramPackage",{username:"".concat(this.data.weapp_info.original_id,"@app"),path:this.data.url,scene:1,success:function(t){e.reportAdMonitorData(Ze.IN.PREDOWNLOAD_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(Ze.IN.PREDOWNLOAD_ERROR,t)}})}}}catch(e){}}},{key:"checkFollow",value:(n=ne()(he().mark((function e(t){var n,r;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,be.Lo)({apiName:"webapi_checkcontact",reqData:{biz_uin:t}});case 2:return n=e.sent,r=n.rawData,e.abrupt("return",1===JSON.parse(r).is_subscribed);case 5:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"getFeedbackUrl",value:function(e){var t=this.data.material_id_list||[],n=encodeURIComponent("[".concat(t.toString(),"]"))||"",r=(0,Le.a3)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html#wechat_redirect",{aid:this.data.aid,traceid:this.data.traceid,source:e,material_id:n||"",machine_type:Ue.S3.model,publisher_appid:Ue.S3.gameAppId});if("grid"===this.adType){var i=[],o=[],a=[];this.datas.forEach((function(e){i.push(e.traceid),o.push(e.material_id_list||[]),a.push(e.aid)}));var s={traceid:JSON.stringify(i),source:e,aid:JSON.stringify(a),material_id:JSON.stringify(o),machine_type:Ue.S3.model,publisher_appid:Ue.S3.gameAppId};r=(0,Le.a3)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html?ismulity=1#wechat_redirect",s)}return r}},{key:"openFeedbackUrl",value:function(e){var t=this.getFeedbackUrl(e);return(0,be.Yo)({url:t})}},{key:"checkPreloadH5Page",value:(t=ne()(he().mark((function e(){var t,n,r,i,o,a,s,c,u,l;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=new Set,s=this.data.url,c=null===(t=this.data.button_action)||void 0===t?void 0:t.jump_url,u=null===(n=this.data.crtInfo)||void 0===n||null===(r=n[0])||void 0===r||null===(i=r.wxgame_video_card)||void 0===i||null===(o=i.flooring_page)||void 0===o?void 0:o.page_url,this.isPrefetch("url")&&("1"!==(0,Le.Wz)(s).prefetch&&(s=(0,Le.a3)(s,{prefetch:1}),this.data.url=s),a.add(s)),this.isPrefetch("jump_url")&&("1"!==(0,Le.Wz)(c).prefetch&&(c=(0,Le.a3)(c,{prefetch:1}),this.data.button_action.jump_url=c),a.add(c)),this.isPrefetch("playable_url")&&("1"!==(0,Le.Wz)(u).prefetch&&(u=(0,Le.a3)(u,{prefetch:1}),this.data.crtInfo[0].wxgame_video_card.flooring_page.page_url=u),a.add(u)),!(l=$e()(a).map((function(e){return{url:e,bizScene:Ze.Qc}}))).length){e.next=18;break}return e.prev=9,e.next=12,this.adProxy.preloadH5Page({urlList:l});case 12:this.reportAdMonitorData(Ze.IN.H5_PRELOAD_SUCCESS),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(9),this.reportAdMonitorData(Ze.IN.H5_PRELOAD_FAILED,e.t0);case 18:case"end":return e.stop()}}),e,this,[[9,15]])}))),function(){return t.apply(this,arguments)})}]),e}(),fe()(dt.prototype,"isPrefetch",[Qe],Object.getOwnPropertyDescriptor(dt.prototype,"isPrefetch"),dt.prototype),fe()(dt.prototype,"getTransmissionChainData",[et],Object.getOwnPropertyDescriptor(dt.prototype,"getTransmissionChainData"),dt.prototype),fe()(dt.prototype,"setAppInstallState",[tt],Object.getOwnPropertyDescriptor(dt.prototype,"setAppInstallState"),dt.prototype),fe()(dt.prototype,"land",[nt],Object.getOwnPropertyDescriptor(dt.prototype,"land"),dt.prototype),fe()(dt.prototype,"landPage",[rt],Object.getOwnPropertyDescriptor(dt.prototype,"landPage"),dt.prototype),fe()(dt.prototype,"getChannelsExtraInfo",[it],Object.getOwnPropertyDescriptor(dt.prototype,"getChannelsExtraInfo"),dt.prototype),fe()(dt.prototype,"openAppStore",[ot],Object.getOwnPropertyDescriptor(dt.prototype,"openAppStore"),dt.prototype),fe()(dt.prototype,"preloadLanding",[at],Object.getOwnPropertyDescriptor(dt.prototype,"preloadLanding"),dt.prototype),fe()(dt.prototype,"checkFollow",[st],Object.getOwnPropertyDescriptor(dt.prototype,"checkFollow"),dt.prototype),fe()(dt.prototype,"getFeedbackUrl",[ct],Object.getOwnPropertyDescriptor(dt.prototype,"getFeedbackUrl"),dt.prototype),fe()(dt.prototype,"openFeedbackUrl",[ut],Object.getOwnPropertyDescriptor(dt.prototype,"openFeedbackUrl"),dt.prototype),fe()(dt.prototype,"checkPreloadH5Page",[lt],Object.getOwnPropertyDescriptor(dt.prototype,"checkPreloadH5Page"),dt.prototype),dt);const ht=BabelRuntimeHelpers.initializerDefineProperty;var gt=n.n(ht);BabelRuntimeHelpers.initializerWarningHelper;var vt,_t,mt,yt,bt,wt,It,St,Ct,Tt,Et,kt,xt,At,Pt,Dt,Ot,Nt,Rt,Mt,Lt,Bt,Ft,jt,Wt,Ut,Vt,Gt,Ht,Zt,qt,zt,Yt,Kt,Jt,$t,Xt,Qt,en,tn,nn,rn,on,an,sn,cn,un,ln,dn,fn,pn,hn,gn,vn,_n,mn,yn,bn,wn,In,Sn,Cn,Tn,En,kn,xn,An,Pn,Dn=n(1126),On=n(266),Nn=n(5987),Rn=__safeway__.apiSign.makeApiSign,Mn=function(e){return function(t){return new Promise((function(n,r){e(Object.assign({},t,{success:n,fail:r}))}))}},Ln=function(e,t,n){var r;e.errMsg=e.errMsg||"".concat(t,":ok");var i,o=0===e.errMsg.indexOf("".concat(t,":ok")),a=0===e.errMsg.indexOf("".concat(t,":fail"));if(o)null==n||null===(i=n.success)||void 0===i||i.call(n,e);else if(a){var s;null==n||null===(s=n.fail)||void 0===s||s.call(n,e)}null==n||null===(r=n.complete)||void 0===r||r.call(n,e)},Bn=function(e){var t=e.username,n=e.success,r=e.fail,i=e.complete;(0,He.IN)("profile",{username:t,scene:75,success:n,fail:r,complete:i})},Fn=function(e){var t=e.username,n=e.isWaGame,r=e.success,i=e.fail,o=e.complete;(0,He.IN)("private_addContact",{username:t,scene:n?146:139,webtype:1,success:r,fail:i,complete:o})},jn=function(e){var t=e.schemeUrl,n=e.isIosDirect,r=e.appInfo,i=e.extraData,o=e.success,a=e.fail,s=e.complete,c={};n&&(c.appId=r.app_id,c.installSchemeUrl=r.appinfo_url,c.installAction=0),i&&(c.extraData=i),(0,He.IN)("launchApplication",Object.assign(c,{schemeUrl:t,operateDirectly:1,success:o,fail:a,complete:s}))},Wn=function(e){var t=e.appUrl,n=e.success,r=e.fail,i=e.complete,o=Rn("downloadAppInternal",{appUrl:t,operateDirectly:1,success:n,fail:r,complete:i});(0,He.IN)("downloadAppInternal",o)},Un=function(e){var t=e.packageName,n=e.success,r=e.fail,i=e.complete,o=Rn("getInstallState",{packageName:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i});(0,He.IN)("getInstallState",o)},Vn=function(e){var t=e.downloadId,n=e.success,r=e.fail,i=e.complete;(0,He.IN)("queryDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i})},Gn=function(e){var t=e.downloadId,n=e.success,r=e.fail,i=e.complete;(0,He.IN)("pauseDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i})},Hn=function(e){var t=e.downloadId,n=e.success,r=e.fail,i=e.complete;(0,He.IN)("resumeDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i})},Zn=function(e){var t=e.downloadId,n=e.success,r=e.fail,i=e.complete,o=Rn("installDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i});(0,He.IN)("installDownloadTask",o)},qn=function(e){var t=e.isHide,n=e.success,r=e.fail,i=e.complete;(0,He.IN)("setNavigationBarRightButton",{hide:t,success:n,fail:r,complete:i})},zn=function(e){var t=e.isHide,n=e.success,r=e.fail,i=e.complete;(0,He.IN)("private_setNavigationBarRightButton",{hide:t,success:n,fail:r,complete:i})},Yn=function(e){var t=e.resources,n=e.success,r=e.fail,i=e.complete;(0,He.IN)("loadVideoResource",{resources:t,success:n,fail:r,complete:i})},Kn=function(e){var t=e.orientation,n=e.success,r=e.fail,i=e.complete;(0,He.IN)("private_setPageOrientation",{orientation:t,success:n,fail:r,complete:i})},Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;(0,He.IN)("hideVirtualBottomNavigationBar",{success:t,fail:n,complete:r})},$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;(0,He.IN)("showVirtualBottomNavigationBar",{success:t,fail:n,complete:r})},Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;(0,He.IN)("showStatusBar",{success:t,fail:n,complete:r})},Qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;(0,He.IN)("hideStatusBar",{success:t,fail:n,complete:r})},er=function(e){var t=e.success,n=e.fail,r=e.complete,i=e.feedId,o=e.nonceId,a=e.finderUserName,s=e.reportExtraInfo;(0,Dn.d)("openChannelsActivity",{feedId:i,nonceId:o,finderUserName:a,reportExtraInfo:s,permissionBytes:[1,1,1]},(function(e){Ln(e,"openChannelsActivity",{success:t,fail:n,complete:r})}))},tr=function(e){var t=e.success,n=e.fail,r=e.complete,i=e.feedId,o=e.nonceId,a=e.finderUserName,s=e.reportExtraInfo;(0,Dn.d)("openChannelsLive",{feedId:i,nonceId:o,finderUserName:a,reportExtraInfo:s,permissionBytes:[1,1,1]},(function(e){Ln(e,"openChannelsLive",{success:t,fail:n,complete:r})}))},nr=function(e){var t=e.success,n=e.fail,r=e.complete,i=e.finderUserName,o=e.reportExtraInfo;(0,Dn.d)("openChannelsUserProfile",{finderUserName:i,reportExtraInfo:o,permissionBytes:[1,1,1]},(function(e){Ln(e,"openChannelsUserProfile",{success:t,fail:n,complete:r})}))},rr=function(e){var t=e.success,n=e.fail,r=e.complete,i=e.feedId,o=e.nonceId,a=e.finderUserName,s=e.reportExtraInfo,c=e.adJSAPIType,u=e.expReportLink,l=e.clkReportLink,d=e.reportInfo,f=e.clickPosMap,p=e.feedbackUrl;(0,He.IN)("openChannelsRewardedVideoAd",{feedId:i,nonceId:o,finderUserName:a,reportExtraInfo:s,adJSAPIType:c,expReportLink:u,clkReportLink:l,reportInfo:d,clickPosMap:f,feedbackUrl:p,success:t,fail:n,complete:r})},ir=function(e){var t=e.mixWithOther,n=void 0===t||t,r=e.obeyMuteSwitch,i=void 0===r||r,o=e.success,a=e.fail,s=e.complete;(0,He.IN)("setInnerAudioOption",{mixWithOther:n,obeyMuteSwitch:i,success:o,fail:a,complete:s})},or=function(e){var t=e.urlList,n=e.success,r=e.fail,i=e.complete;(0,He.IN)("private_onWebPageUrlExposed",{urlList:t,success:n,fail:r,complete:i})},ar=Mn((function(e){var t=e.taskName,n=e.taskUrl,r=e.fileMd5,i=e.extInfo,o=e.success,a=e.fail,s=e.complete,c=Rn("addDownloadTaskStraight",{taskName:t,taskUrl:n,fileMd5:r,extInfo:i,permissionBytes:[1,1,1],success:o,fail:a,complete:s});(0,He.IN)("addDownloadTaskStraight",c)})),sr=(vt=Oe(),_t=Oe(),mt=Oe(),yt=Oe(),bt=Oe(),wt=Oe(),It=Oe(),St=Oe(),Ct=Oe(),Tt=Oe(),Et=Oe(),kt=Oe(),xt=Oe(),At=Oe(),Pt=Oe(),Dt=Oe(),Ot=Oe(),Nt=Oe(),Rt=Oe(),Mt=Oe(),Lt=Oe(),Bt=Oe(),Ft=Oe(),jt=Oe(),Wt=Oe(),Ut=function e(){ce()(this,e),gt()(this,"setNavigationBarRightButton",Vt,this),gt()(this,"setMiniProgramNavigationBarRightButton",Gt,this),gt()(this,"hideVirtualBottomNavigationBar",Ht,this),gt()(this,"showVirtualBottomNavigationBar",Zt,this),gt()(this,"showStatusBar",qt,this),gt()(this,"hideStatusBar",zt,this),gt()(this,"openProfile",Yt,this),gt()(this,"addContact",Kt,this),gt()(this,"downloadAppInternal",Jt,this),gt()(this,"openChannelsActivity",$t,this),gt()(this,"openChannelsRewardedVideoAd",Xt,this),gt()(this,"openChannelsLive",Qt,this),gt()(this,"openChannelsUserProfile",en,this),gt()(this,"getChannelsLiveInfo",tn,this),gt()(this,"getNetworkType",nn,this),gt()(this,"preloadH5Page",rn,this),this.innerPreloadVideo=Mn(Yn),gt()(this,"preloadVideo",on,this),this.innerLaunchApplication=Mn(jn),gt()(this,"launchApplication",an,this),this.innerGetInstallState=Mn(Un),gt()(this,"getInstallState",sn,this),this.innerQueryDownloadTask=Mn(Vn),gt()(this,"queryDownloadTask",cn,this),this.innerPauseDownloadTask=Mn(Gn),gt()(this,"pauseDownloadTask",un,this),this.innerResumeDownloadTask=Mn(Hn),gt()(this,"resumeDownloadTask",ln,this),this.innerInstallDownloadTask=Mn(Zn),gt()(this,"installDownloadTask",dn,this),this.innerSetPageOrientation=Mn(Kn),gt()(this,"setPageOrientation",fn,this),this.innerSetInnerAudioOption=Mn(ir),gt()(this,"setInnerAudioOption",pn,this)},Vt=fe()(Ut.prototype,"setNavigationBarRightButton",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(qn)}}),Gt=fe()(Ut.prototype,"setMiniProgramNavigationBarRightButton",[_t],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(zn)}}),Ht=fe()(Ut.prototype,"hideVirtualBottomNavigationBar",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(Jn)}}),Zt=fe()(Ut.prototype,"showVirtualBottomNavigationBar",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn($n)}}),qt=fe()(Ut.prototype,"showStatusBar",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(Xn)}}),zt=fe()(Ut.prototype,"hideStatusBar",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(Qn)}}),Yt=fe()(Ut.prototype,"openProfile",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(Bn)}}),Kt=fe()(Ut.prototype,"addContact",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(Fn)}}),Jt=fe()(Ut.prototype,"downloadAppInternal",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(Wn)}}),$t=fe()(Ut.prototype,"openChannelsActivity",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(er)}}),Xt=fe()(Ut.prototype,"openChannelsRewardedVideoAd",[Et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(rr)}}),Qt=fe()(Ut.prototype,"openChannelsLive",[kt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(tr)}}),en=fe()(Ut.prototype,"openChannelsUserProfile",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(nr)}}),tn=fe()(Ut.prototype,"getChannelsLiveInfo",[At],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(Nn.tT)}}),nn=fe()(Ut.prototype,"getNetworkType",[Pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(On.getNetworkType)}}),rn=fe()(Ut.prototype,"preloadH5Page",[Dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Mn(or)}}),on=fe()(Ut.prototype,"preloadVideo",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.innerPreloadVideo({resources:t})}}}),an=fe()(Ut.prototype,"launchApplication",[Nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n="string"==typeof t?{schemeUrl:t}:t;return e.innerLaunchApplication(n)}}}),sn=fe()(Ut.prototype,"getInstallState",[Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.innerGetInstallState({packageName:t})}}}),cn=fe()(Ut.prototype,"queryDownloadTask",[Mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.innerQueryDownloadTask({downloadId:t})}}}),un=fe()(Ut.prototype,"pauseDownloadTask",[Lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.innerPauseDownloadTask({downloadId:t})}}}),ln=fe()(Ut.prototype,"resumeDownloadTask",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.innerResumeDownloadTask({downloadId:t})}}}),dn=fe()(Ut.prototype,"installDownloadTask",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.innerInstallDownloadTask({downloadId:t})}}}),fn=fe()(Ut.prototype,"setPageOrientation",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){return e.innerSetPageOrientation({orientation:t})}}}),pn=fe()(Ut.prototype,"setInnerAudioOption",[Wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){return e.innerSetInnerAudioOption({mixWithOther:t,obeyMuteSwitch:n})}}}),Ut),cr=!1,ur=(hn=Re("handleAdDataDone"),gn=Me("handleAdDataError"),vn=Re("handleAdDataDone"),_n=Me("handleAdDataError"),mn=Re("handleAdDataDone"),yn=Me("handleAdDataError"),bn=Re("handleAdDataDone"),wn=Me("handleAdDataError"),In=Re("handleAdDataDone"),Sn=Me("handleAdDataError"),Cn=Re("handleAdDataDone"),Tn=Me("handleAdDataError"),En=Re("handleAdDataDone"),kn=Me("handleAdDataError"),xn=function(e,t,n){var r=n.value;n.value=function(){var e=this,t=function(t){Pn&&Pn in e&&"function"==typeof e[Pn]&&e[Pn](t)};try{for(var n,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];var s=(n=r).call.apply(n,[this].concat(o));return s instanceof Promise?s.catch((function(e){return t(e)})):s}catch(e){t(e)}}},An=function(){function e(t){var n=this,r=t.adUnitId,i=t.adType,o=t.pluginAppid,a=void 0===o?"":o;ce()(this,e),this.adUnitId=void 0,this.adType=void 0,this.pluginAppid=void 0,this.slotData={},this.lastAdRetCode=0,this.lastAdRespone="fetch",this.limitAdReqTime=3e4,this.fetchPromise=null,this.webviewId=Ue.S0.currentWebviewId,this.fetchRetryCount=0,this.isCanvasXmlHook=!1,this.handledInNewFetch=!1,this.nativeMethodInvoker=new sr,this.mmReporter=void 0,this.cgiReporter=void 0,this.lander=void 0,this.datas=[],this.data={},this.convertedAdData=null,this.isMulti=!1,this.isViewable=!1,this.adDataIndex=0,this.scene=0,"splashAd"!==i&&(0,Ue.lv)(),this.adUnitId=r,this.adType=i,this.pluginAppid=Ue.S3.isWaGame?"":a,this.mmReporter=new Ge(this),this.cgiReporter=new Ke(this),this.lander=new pt(this),this.bindProxyMethods(),this.setTimePoint("p1"),(0,ke.lc)((function(e){if(e.webviewId===Ue.S0.currentWebviewId&&n.data&&n.isViewable){var t=n.data.uxinfo;(0,Ie.R)({eventTimeStamp:e.eventTimeStamp?e.eventTimeStamp:+new Date,scene:4,uxinfo:t,url:e.path?e.path:"index.html"})}}))}var t,n,r,i,o;return le()(e,[{key:"bindProxyMethods",value:function(){for(var e=this,t=[this.nativeMethodInvoker,this.mmReporter,this.cgiReporter,this.lander],n=function(){var t,n=i[r],o=(0,Le.Zw)(n),a=ae()(o);try{var s=function(){var r,i,o,a=t.value;i=a,(null===(o=(r=n)&&r[De])||void 0===o?void 0:o.has(i))&&(e[a]=function(){var e;return(e=n)[a].apply(e,arguments)})};for(a.s();!(t=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}},r=0,i=t;r<i.length;r++)n()}},{key:"isLimitRequest",value:function(){return"checkAd"!==this.lastAdRespone&&0!==this.lastAdRetCode&&+new Date-this.getLastAdReqTs()<this.limitAdReqTime}},{key:"convertTestAdData",value:function(e){try{var t,n=(0,Le.Xh)(e),r=JSON.parse(n.crt_exp_info);if(n.crtExpInfo=r,1002===r.exp_type){if(null!==(t=n.wx_game_video)&&void 0!==t&&t.wxgame_video_card){var i=JSON.parse(r.exp_data);n.wx_game_video.wxgame_video_card.flooring_page=i}}else if(1001===r.exp_type){n.profile_exp=!0;var o=r.exp_data&&"string"==typeof r.exp_data?JSON.parse(r.exp_data):r.exp_data;n.dest_type=o.dest_type;var a={};if(n.button_action)try{a=JSON.parse(e.button_action)}catch(e){}a.jump_type=o.jump_type,n.button_action=JSON.stringify(a)}else if(105===r.exp_type)n.ad_style_data=r.exp_data;else if(106===r.exp_type){var s=r.exp_data&&"string"==typeof r.exp_data?JSON.parse(r.exp_data):r.exp_data;(0,Le.Ee)(n,s),n.common_exp=!0}else if(r.exp_type&&[108,109,2001].includes(r.exp_type))n.ad_dynamic_list=r.exp_data;else if(r.crt_size&&[ft.CrtSize.CRT_SIZE_WX_APPLICATION_NEW,ft.CrtSize.CRT_SIZE_WX_APPLICATION_X].includes(r.crt_size)){if(n.crt_size=r.crt_size,n.ad_width=r.width,n.material_width=r.width,n.ad_height=r.height,n.material_height=r.height,n.image_url=r.image_url,r.dest_url&&n.url&&[1,3,6].includes(n.dest_type)){var c=(0,Le.Wz)(n.url),u={};c.weixinadkey&&(u.weixinadkey=c.weixinadkey),c.ticket&&(u.ticket=c.ticket),c.gdt_vid&&(u.gdt_vid=c.gdt_vid),c.weixinadinfo&&(u.weixinadinfo=c.weixinadinfo),n.url=(0,Le.a3)(r.dest_url,u)}n.watermark_text=r.watermark||""}else if(r.landpage_type){var l;null!==(l=n.wx_game_video)&&void 0!==l&&l.wxgame_video_card&&(n.wx_game_video.wxgame_video_card.flooring_page=r)}return n}catch(t){return e}}},{key:"getFetchArgs",value:function(e,t){var n,r,i=e.isAdInterval,o={scene_type:Ue.S0.currentScene,ad_unit_id:this.adUnitId,appid:this.pluginAppid?this.pluginAppid:Ue.S3.gameAppId,orig_weapp_id:this.pluginAppid?Ue.S3.gameAppId:"",weapp_path:Ue.S0.weappPath,pos_id:"",network_type:Ue.S3.adNetworkType,orientation:{landscape:1,portrait:2}[Ue.S3.deviceOrientation],sdk_version:Ue.S3.SDKVersion,ext_slot_custom_comm:"",weapp_extra_data:JSON.stringify({wxa_start_ts:Ue.S3.startTime.valueOf(),wxa_enter_ts:Ue.S0.enterForegroundTime.valueOf(),weixin_version:Ue.S3.wechatVersion,os_version:Ue.S3.systemVersion,machine_type:Ue.S3.model,is_ad_interval:!!i,env:null===(n=_e.Z.host)||void 0===n?void 0:n.env,app_appid:null===(r=_e.Z.host)||void 0===r?void 0:r.appId})};o.pos_id=Pe.DX[this.adType];var a={};return"grid"===this.adType?a.box_slot_ad={count:String(this.slotData.gridCount),box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)}:"splashAd"===this.adType?(a.splash_ad={count:String(5)},a.weapp_enter_scene=(null==t?void 0:t.weappEnterScene)||0,a.request_type=(null==t?void 0:t.requestType)||1,a.check_ad_is_online_ads=(null==t?void 0:t.preloadAds)||[],delete o.appid):"customAd"===this.adType&&(a={is_adunit_tmpl:!0}),(0,me.er)()&&(a.in_3rd_app=1),o.ext_slot_custom_comm=JSON.stringify(a),o}},{key:"validateFetchEnv",value:function(){if((0,me.er)()&&this.reportAdMonitorData(Ze.IN.THIRD_ERROR),"splashAd"!==this.adType&&!this.adUnitId)throw{errMsg:"no ad unit id"};if(this.isLimitRequest())throw{errMsg:"no advertisement",errCode:this.lastAdRetCode}}},{key:"validateFetchRes",value:function(e){if("-12001"===e.err_code)throw this.lastAdRetCode=e.err_code,{errMsg:"no permission",errCode:-12001};if(this.lastAdRetCode=e.ret,this.lastAdRespone="fetch",!this.isCheckAdIsOnlineRequest(e)){if(!e.advertisement_num||e.advertisement_num<=0)throw{errMsg:"no advertisement",errCode:e.ret};if(!e.advertisement_info)throw e}}},{key:"validateCrtSize",value:function(e){var t=e.pt,n=e.crt_size,r=Ze._i.includes(t),i=Ze.Z8.includes(n);if(!r&&!i){if(n&&!i)throw{errMsg:"unexpected advertisement crt_size ".concat(n)};throw{errMsg:"unexpected advertisement type ".concat(t)}}}},{key:"handleAdDataDone",value:function(){this.reportAdMonitorData(Ze.IN.AD_FETCH_SUCCESS),this.reportIPV4()}},{key:"handleAdDataError",value:function(e){this.reportAdMonitorData(Ze.IN.AD_FETCH_SUCCESS,e)}},{key:"handleWaidForList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};if(t.length<1)return Promise.resolve(n);var r=[];return null==t||t.forEach((function(e){r.push((0,ye.p4)(e.apkName).then((function(t){return ie()(ie()({},t),{},{aid:e.aid})})))})),Promise.race([Promise.all(r).then((function(e){return e.forEach((function(e){var t=e.waid,r=e.aid,i=void 0===r?"":r;t&&i&&(n[i]=t)})),n})).catch((function(t){return e.reportAdMonitorData(Ze.IN.READ_ADINFOS_ERROR,t),n})),(0,xe.Vs)(2e3).then((function(){return n}))])}},{key:"handleBulkSaveMaterials",value:function(e){var t=[];return this.isSplashAd()&&this.data&&(t=this.getSplashAdMaterialList(e)),t.length>0?(0,Ae.fn)(t):Promise.resolve()}},{key:"getSplashAdMaterialList",value:function(e){var t,n,r=[],i=(null==e?void 0:e.crtInfo[0])||{},o=e.rerankingExtInfo.material_hash||"",a=(null==i?void 0:i.image_url)||"",s=(null==i||null===(t=i.card_info)||void 0===t?void 0:t.pure_color_url)||"",c=(null==i||null===(n=i.card_info)||void 0===n?void 0:n.material_blur_url)||"",u="".concat(Pe.Lq,"/").concat(e.aid,"_").concat(o,".png");if(o&&r.push({url:a,fileName:"".concat(e.aid,"_").concat(o,".png"),filePath:u}),s){var l="".concat(Pe.Lq,"/").concat(e.aid,"_").concat(o,"_pure_color.png");o&&r.push({url:s,fileName:"".concat(e.aid,"_").concat(o,"_pure_color.png"),filePath:l})}if(c){var d="".concat(Pe.Lq,"/").concat(e.aid,"_").concat(o,"_blur.png");o&&r.push({url:c,fileName:"".concat(e.aid,"_").concat(o,"_blur.png"),filePath:d})}return r}},{key:"handleAdInfosIndexCache",value:(o=ne()(he().mark((function e(t,n,r){var i,o;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.handleWaidForList(t);case 3:i=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return n.deviceInfo=(0,Ue.v3)(),n.waidMap=i,this.reportAdMonitorData(Ze.IN.READ_ADINFOS_SUCCESS,{adInfos:n}),e.prev=11,e.next=14,(0,Ae.Z7)(n,r);case 14:return e.abrupt("return",this.reportAdMonitorData(Ze.ET.WRITE_ADINFOS_SUCCESS,{adInfos:n}));case 17:return e.prev=17,e.t1=e.catch(11),o=e.t1 instanceof Error?this.processStackMsg(e.t1):e.t1,e.abrupt("return",this.reportAdMonitorData(Ze.ET.WRITE_ADINFOS_FAIL,{adInfos:n,errMsg:o}));case 21:case"end":return e.stop()}}),e,this,[[0,6],[11,17]])}))),function(e,t,n){return o.apply(this,arguments)})},{key:"isCheckAdIsOnlineRequest",value:function(e){return this.isSplashAd()&&1010===e.ret&&e.advertisement_extra_info}},{key:"isCheckAdIsOnlineResp",value:function(e){return!("traceid"in e)}},{key:"handleCheckAdIsOnlineResp",value:function(e){var t,n=null===(t=JSON.parse(e.advertisement_extra_info))||void 0===t?void 0:t.check_ad_resp;return this.lastAdRespone=this.isCheckAdIsOnlineResp(n)?"checkAd":"fetch",n}},{key:"handleSplashAd",value:(i=ne()(he().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h,g=this;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isCheckAdIsOnlineRequest(t)){e.next=2;break}return e.abrupt("return",this.handleCheckAdIsOnlineResp(t));case 2:return this.reportAdMonitorData(Ze.ET.dataLoadSuccess),r=0,i=[],o=[],a=[],s=(0,xe.Cy)(),c="".concat(s,"_exposure_times"),u="".concat(Pe.Lq,"/adinfos.txt"),n={slot_id:Pe.DX[this.adType],ads:[],crtSizeMap:{},materialHashMap:{},total_exposure_times:0},ee()(n,c,0),ee()(n,"requestInQueue","true"),ee()(n,"totalSizeUsed",0),l=n,e.next=13,(0,Ae.x1)(Pe.Lq);case 13:return d=e.sent,l.totalSizeUsed=d.totalSize,f=(f=d.outedDateFileList||[]).length<21&&d.totalSize>20971520?d.fileList:f,e.prev=18,e.next=21,(0,Ae.BZ)(Pe.Lq,f);case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(18),this.reportAdMonitorData(Ze.ET.removeFileDataFail,e.t0);case 26:e.prev=26,p=t.advertisement_info.length>0&&t.advertisement_info.map((function(e,t){var n,s,u=g.handleAdData(e),d=u.rerankingExtInfo.material_hash||"",f={material_hash:u.rerankingExtInfo.material_hash||"",tid:u.rerankingExtInfo.tid.toString()||"",aid:u.aid,trace_id:u.traceid};l.ads.push(f),l.total_exposure_times=u.rerankingExtInfo.total_exposure_times||0,l[c]=u.rerankingExtInfo[c]||0;var p=null===(n=u.condition)||void 0===n?void 0:n.widget_gray_splash_data_channel_parallel;l.requestInQueue=p?"false":"true",l.isCheckAndFetch=(null===(s=u.condition)||void 0===s?void 0:s.widget_gray_splash_check_and_fetch)||0,l.materialHashMap[u.aid]=d;var h=u.crtInfo[0]||{};u.crtInfo&&(l.crtSizeMap[u.aid]=h.width>h.height?"landscape":"portrait");var v=g.getSplashAdMaterialList(u);o=o.concat(v),r+=0===t?v.length:0;var _="".concat(Pe.Lq,"/").concat(u.aid,".txt");if(i.push((0,Ae.Z7)(u,_)),u.product_type===ft.ProductType.ANDROID){var m,y=null===(m=u.appInfo)||void 0===m?void 0:m.apkName;a.push({apkName:y,aid:u.aid})}return u})),this.datas=p,e.next=35;break;case 31:throw e.prev=31,e.t1=e.catch(26),this.reportAdMonitorData(Ze.ET.handleDataFail,e.t1),e.t1;case 35:return h=o.slice(0,r),e.next=38,(0,Ae.fn)(h);case 38:return i.push((0,Ae.fn)(o)),i.push(this.handleAdInfosIndexCache(a,l,u)),Promise.all(i).then((function(){return g.reportAdMonitorData(Ze.ET.dataPreloadSuccess)})).catch((function(e){throw g.reportAdMonitorData(Ze.ET.dataPreloadFail,e),e})),e.abrupt("return",this.datas[0]);case 42:case"end":return e.stop()}}),e,this,[[18,23],[26,31]])}))),function(e){return i.apply(this,arguments)})},{key:"handleCustomAd",value:function(e){var t=this,n=e.advertisement_info.map((function(e,n){var r,i,o,a=function(e){if(0===n)throw e},s=null,c=t.handleAdData(e),u=c.crtInfo,l=c.button_action,d=c.product_type,f=c.dest_type,p=c.crt_size;if(c.reranking_ext_info&&c.reranking_ext_info.refresh_time)o=c.reranking_ext_info.refresh_time;else if(c.reranking_ext_info&&"string"==typeof c.reranking_ext_info)try{var h=JSON.parse(c.reranking_ext_info);h.refresh_time&&(o=h.refresh_time)}catch(e){}if(null!=c&&null!==(r=c.extBackComm)&&void 0!==r&&r.tmpl_info)try{var g=JSON.parse(c.extBackComm.tmpl_info);s=JSON.parse(g.tmpl_content),i=Number(c.extBackComm.sub_templ_id)}catch(e){t.reportAdMonitorData(Ze.$g.TPL_PARSE_FAILED),a({errMsg:"custom template error",errCode:Pe.yB.ERR_TPL_PARSE})}else t.reportAdMonitorData(Ze.$g.TPL_LOAD_FAILED),a({errMsg:"no custom template",errCode:Pe.yB.ERR_TPL_NONE});return ie()(ie()({},e),{},{crtInfo:u,button_action:l,product_type:d,dest_type:f,crt_size:p,condition:c.condition,template:s,subTemplId:i,refreshTime:o,aid:c.aid,app:c.app,appInfo:c.appInfo,extBackComm:c.extBackComm,wording:c.hint_txt,card_info:c.card_info,video_info:c.video_info,image_url:c.image_url,weapp_info:c.weapp_info,wx_game_video:c.wx_game_video})}));return this.reportAdMonitorData(Ze.$g.LOAD_SUCCESS),n.length>1?this.isMulti=!0:this.isMulti=!1,this.datas=n,this.setCurrentData(0),n[0]}},{key:"handleGridAd",value:function(e){var t=this;if(e.advertisement_info.length!==this.slotData.gridCount)throw this.reportAdMonitorData(Ze.IN.AD_GRID_LOAD_COUNT_ERROR,{count:this.slotData.gridCount,getCount:e.advertisement_info.length}),{errMsg:"no advertisement count error",errCode:e.ret};var n=e.advertisement_info.map((function(e,n){var r=t.handleAdData(e);return r._isGrid=!0,r._gridInfo={row:5===t.slotData.gridCount?1:2,column:5===t.slotData.gridCount?5:4,index:n},r}));this.datas=n,this.setCurrentData(0),this.fetchRetryCount=0;var r,i=ae()(this.datas);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.crt_size!==ft.CrtSize.CRT_SIZE_MULTI_POS_GRID)throw{errMsg:"unexpected advertisement crt_size ".concat(o.crt_size)}}}catch(e){i.e(e)}finally{i.f()}return this.reportAdMonitorData(Ze.IN.AD_GRID_LOAD_SUCCESS),this.datas}},{key:"handleInterstitialAd",value:function(e){var t=JSON.parse(e.image_url),n=ie()(ie()({},t[0]||{}),(0,Le.ei)(e,["crtInfo","product_type","dest_type","crt_size","button_action","condition","app","appInfo","extBackComm"]));if(e.crt_size===ft.CrtSize.CRT_SIZE_INSERT_VIDEO){var r="0",i=decodeURIComponent(this.data.apurl);/viewid=([^&]+)/.test(i)&&(r=RegExp.$1),this.data.wx_game_video={short_video:{viewid:r}}}return this.convertedAdData=n,n}},{key:"handleRewardedVideoAd",value:function(e){var t,n,r,i;e.crt_size===ft.CrtSize.CRT_SIZE_REWARD_LANDINGPAGE&&this.handleRewardedLandingPage(e);var o=this.data.crtInfo&&Array.isArray(this.data.crtInfo)?this.data.crtInfo:[];0===o.length&&o.push({wxgame_video_card:{}});var a=X()(o,1)[0],s=a.wxgame_video_card,c=s.head_bg_img,u=s.mp_tag_type,l=a.wxgame_gauss_video,d=e.canvas_info,f=e.wx_game_video,p=f.short_video,h=f.wxgame_video_card,g=h.show_time,v=h.thumb,_=h.title,m=h.desc,y=h.flooring_page,b=30;if(e.reranking_ext_info&&e.reranking_ext_info.rewarded_time)b=e.reranking_ext_info.rewarded_time;else if(e.reranking_ext_info&&"string"==typeof e.reranking_ext_info)try{var w=JSON.parse(e.reranking_ext_info);w.rewarded_time&&(b=w.rewarded_time)}catch(e){}b=Math.floor(1e3*b),y&&[3,4].indexOf(y.landpage_type)>-1&&(this.data.isPlayable=!0);var I=ie()({crtInfo:o[0],canvas_info:d,type:Ze.Yk[e.pt],shortVideo:this.mapRewardVideoFields(p),gaussVideo:l?this.mapRewardVideoFields(ie()(ie()({},l),{},{video_duration:l.video_duration_ms})):null,rewardedTime:b,card:{icon:v,name:_,wording:m,headBgImg:c,mpTagType:u,showTime:g},flooringPage:y},(0,Le.ei)(e,["crt_size","product_type","dest_type","button_action","condition","app","appInfo"]));this.convertedAdData=I;var S=(0,Ve.zt)(I),C=(0,Ve.zi)(I);return this.reportRewardGaussVideo({useGaussVideo:S,useExpandStyle:C,expUseGaussVideo:null!==(t=null===(n=e.condition)||void 0===n?void 0:n.widget_gray_reward_use_gauss_blur)&&void 0!==t?t:0,expUseExpandStyle:1,videoUrl:null!==(r=null==p?void 0:p.video_url)&&void 0!==r?r:"",gaussVideoUrl:null!==(i=null==l?void 0:l.video_url)&&void 0!==i?i:""}),null!=l&&l.video_url&&this.reportAdMonitorData(Ze.IN.REWARD_GAUSS_EXISTS),S&&C?this.reportAdMonitorData(Ze.IN.REWARD_USE_GAUSS_AND_EXPAND_STYLE):S?this.reportAdMonitorData(Ze.IN.REWARD_USE_GAUSS):C&&this.reportAdMonitorData(Ze.IN.REWARD_USE_EXPAND_STYLE),I}},{key:"mapRewardVideoFields",value:function(e){return{poster:e.thumb_url,src:e.video_url,duration:e.video_duration,width:e.thumb_width,height:e.thumb_height}}},{key:"handleRewardedLandingPage",value:function(e){var t,n=Ue.S3.isAndroid&&_e.Z.clientVersion>=654315008||Ue.S3.isIOS&&_e.Z.clientVersion>=385879552;if((null===(t=this.data.condition)||void 0===t?void 0:t.widget_gray_rewardedpage_exposure_v2)&&n)try{var r=e.canvas_info,i=ve()(r.ad_info_xml).root,o=(0,xe.IU)(e),a=this.composeExposureCommonInfo({top:0,left:0,width:Ue.S3.screenWidth,height:Ue.S3.screenHeight});i.children.push({name:"viewid",children:[],attributes:{},content:o},{name:"commInfo",children:[],attributes:{},content:a});var s=Ee(i,!0);this.data.canvas_info.ad_info_xml=s,this.isCanvasXmlHook=!0}catch(e){this.isCanvasXmlHook=!1}}},{key:"handleBannerAd",value:function(e){var t=e.pt,n=e.crt_size,r=e.image_url,i=e.material_width,o=e.material_height,a=e.ad_width,s=e.ad_height,c=e.use_style_data,u=e.hint_txt,l=e.watermark_type,d=e.extBackComm.antifraud_popup;void 0===d&&(d=!1);var f,p,h=Ze.Yk[t];c?(f=a,p=s):[ft.CrtSize.CRT_SIZE_WX_APPLICATION,ft.CrtSize.CRT_SIZE_WX_APPLICATION_NEW,ft.CrtSize.CRT_SIZE_WX_APPLICATION_X].includes(n)?(f=(a||i)/2,p=(s||o)/2):n===ft.CrtSize.CRT_SIZE_WX_APPLICATION_CARD&&(f=a,p=s);var g=ie()({antifraudPopup:d,type:h,crt_size:n,useStyleData:c,watermark:Ze.wW[l],width:f,height:p,image:{src:r,width:i,height:o},wording:u},(0,Le.ei)(e,["ad_style_data","product_type","dest_type","button_action","watermark_text","condition","app","appInfo"]));return this.convertedAdData=g,g}},{key:"extractJson",value:function(e,t,n,r){var i=null!=n?n:t;if(e[i]&&"string"==typeof e[i])try{e[t]=JSON.parse(e[i])}catch(n){e[t]=null!=r?r:{}}else null!=r&&(e[t]=r)}},{key:"buildWechatInfo",value:function(e){if(e.product_type===ft.ProductType.WE_CHAT){var t=e.biz_appid,n=e.biz_info,r=n.nick_name,i=n.is_subscribed;return{icon:n.head_img,nickname:r,uin:n.biz_uin,isFollowed:i,biz_appid:t}}return{}}},{key:"buildAppInfo",value:function(e){var t=e.product_type;if([ft.ProductType.ANDROID,ft.ProductType.IOS].includes(t)){var n=e.app_info;return{appName:n.app_name,apkName:n.apk_name,apkUrl:n.apk_url,appMd5:n.app_md5,iconUrl:n.icon_url,urlScheme:n.url_scheme,versionCode:n.version_code,channelId:n.channel_id,desc:n.desc}}return{}}},{key:"handleAdData",value:function(e){var t,n=this;if(0===Object.keys(e).length)throw{errMsg:"unexpected adData"};var r=e.crt_exp_tid&&e.crt_exp_info?this.convertTestAdData(e):(0,Le.Xh)(e),i=r;if(r.crt_size&&(i.crt_size=Number(r.crt_size)),this.extractJson(i,"crtInfo","crt_info"),this.extractJson(i,"extBackComm","ext_back_comm"),this.extractJson(i,"button_action","button_action",{}),this.extractJson(i,"adStyleData","ad_style_data",""),this.extractJson(i,"rerankingExtInfo","reranking_ext_info",""),this.extractJson(i,"extInfo","ext_info"),this.extractJson(i,"adDynamicList","ad_dynamic_list"),r.flow_exp_info)try{i.condition=(0,we.mh)(r.flow_exp_info),this.isSplashAd()||this.handleSplashAdFetchLog(i.condition)}catch(e){}if(i.adStyleData&&[ft.CrtSize.CRT_SIZE_REWARD_VEDIO169,ft.CrtSize.CRT_SIZE_REWARD_VEDIO916,ft.CrtSize.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(i.crt_size)){i.use_style_data=!0;var o=i.adStyleData;r.ad_width=o.width,r.ad_height=o.height,o.widgets.forEach((function(e){var t=r.button_action;4===e.type&&(t.button_text=e.title,t.jump_type=e.dest_type||t.jump_type,t.jump_url=e.dest_url||t.jump_url)}))}else this.validateCrtSize(i);var a=r.button_action;if(a.button_text=a.button_text||"查看",r.watermark_text=r.watermark_text||"去逛逛",18001===(null==i||null===(t=i.extInfo)||void 0===t?void 0:t.page_type)){var s={gdt_vid:r.traceid||"",uxinfo:r.uxinfo||"",ad_token:r.ad_token||"",rl:r.rl||""};r.url=(0,Le.a3)(r.url,s)}var c=this.buildWechatInfo(i),u=this.buildAppInfo(i);return r.product_type===ft.ProductType.ANDROID&&(0,ye.p4)(u.apkName).then((function(e){var t=e.waid;i.waid=t,n.reportAdMonitorData(Ze.IN.GET_WAID_SUCCESS)})).catch((function(e){n.reportAdMonitorData(Ze.IN.GET_WAID_ERROR,e)})),ie()(ie()({},i),{},{app:c,appInfo:u})}},{key:"handleSplashAdFetchLog",value:function(e){this.handledInNewFetch||(this.handledInNewFetch=!0,(0,Ae.J$)(e))}},{key:"handleOperateWXData",value:function(e){var t={apiName:"webapi_getadvert",reqData:e,requestInQueue:!1};return this.isSplashAd()?(0,be.ul)(t):(0,be.Lo)(t)}},{key:"processFetch",value:(r=ne()(he().mark((function e(t,n,r){var i,o,a,s,c,u;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.validateFetchEnv(),!(Object.keys(n).length>0)){e.next=5;break}(0,Ue.NN)(n),e.next=11;break;case 5:return Ue.S3.deviceOrientation=(0,Ue.uj)(),e.next=8,this.getNetworkType();case 8:i=e.sent,o=i.networkType,Ue.S3.adNetworkType=o;case 11:return a=this.getFetchArgs({isAdInterval:t},r),this.setLastAdReqTs(+new Date),this.setLastExposureTime(0),this.setLastClickTime(0),this.setTimePoint("p2"),e.prev=16,e.next=19,this.handleOperateWXData(a);case 19:if(s=e.sent,this.fetchPromise=null,this.fetchRetryCount=0,this.handledInNewFetch=!1,this.setTimePoint("p3"),s=JSON.parse(s.rawData),this.validateFetchRes(s),!this.isSplashAd()){e.next=28;break}return e.abrupt("return",this.handleSplashAd(s));case 28:if(!this.isGridAd()){e.next=30;break}return e.abrupt("return",this.handleGridAd(s));case 30:if(!this.isCustomAd()){e.next=32;break}return e.abrupt("return",this.handleCustomAd(s));case 32:if(c=this.handleAdData(s.advertisement_info[0]),this.data=c,this.checkDuplicateRecommendedAds(c.product_type,c.app,c.appInfo),!this.isInterstitialAd(c)){e.next=37;break}return e.abrupt("return",this.handleInterstitialAd(c));case 37:if(!this.isRewardedVideoAd(c)){e.next=39;break}return e.abrupt("return",this.handleRewardedVideoAd(c));case 39:return e.abrupt("return",this.handleBannerAd(c));case 42:e.prev=42,e.t0=e.catch(16),u="";try{u=JSON.parse(e.t0).errMsg}catch(e){}if(this.fetchPromise=null,!(0===u.indexOf("getAdData:fail")&&this.fetchRetryCount<1)){e.next=50;break}return this.fetchRetryCount+=1,e.abrupt("return",this.fetch(t));case 50:throw this.isBannerAd()?this.reportAdMonitorData(Ze.IN.AD_BANNER_LOAD_ERROR,e.t0):this.isRewardedVideoAd()?this.reportAdMonitorData(Ze.IN.AD_VIDEO_LOAD_ERROR,e.t0):this.isInterstitialAd()?this.reportAdMonitorData(Ze.IN.AD_INTERSTITIAL_LOAD_ERROR,e.t0):this.isGridAd()?this.reportAdMonitorData(Ze.IN.AD_GRID_LOAD_ERROR,e.t0):this.isCustomAd()?this.reportAdMonitorData(Ze.$g.LOAD_FAILED,e.t0):this.isSplashAd()&&this.reportAdMonitorData(Ze.ET.dataLoadFail,e.t0),e.t0;case 52:case"end":return e.stop()}}),e,this,[[16,42]])}))),function(e,t,n){return r.apply(this,arguments)})},{key:"checkDuplicateRecommendedAds",value:(n=ne()(he().mark((function e(t,n,r){var i,o,a,s,c,u,l,d,f,p,h,g,v;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],o="0",a=decodeURIComponent(this.data.apurl),/viewid=([^&]+)/.test(a)&&(o=RegExp.$1),s={conv_status:i},c={},e.next=8,Ue.SQ;case 8:if(u=e.sent,l=u.imei,d=u.idfa,f={viewid:o,app_status:0,follow_status:0,imei:l,idfa:d},t!==ft.ProductType.WE_CHAT){e.next=20;break}if(c.ad_type=1,c.ad_id=n.biz_appid,f.follow_status=n.isFollowed?2:1,!n.isFollowed){e.next=18;break}return e.abrupt("return",this.reportAdMonitorData(Ze.IN.AD_FOLLOWED,{adInfo:c}));case 18:e.next=37;break;case 20:if(t!==ft.ProductType.ANDROID){e.next=37;break}return p=r.apkName,h=r.versionCode,e.prev=22,e.next=25,this.getInstallState(p);case 25:g=e.sent,v=g.isInstalled&&(void 0===g.versionCode||g.versionCode>=h),c.ad_type=2,c.ad_id=p,f.app_status=v?2:1,v&&this.reportAdMonitorData(Ze.IN.AD_INSTALLED,{adInfo:c}),e.next=37;break;case 33:e.prev=33,e.t0=e.catch(22),f.app_status=0,Reporter.reportIDKey({key:"adGetInstallState_fail",force:!0});case 37:i.push(f),this.reportInstallFollow(s);case 39:case"end":return e.stop()}}),e,this,[[22,33]])}))),function(e,t,r){return n.apply(this,arguments)})},{key:"getAdType",value:function(){return this.adType}},{key:"getAdUnitId",value:function(){return this.adUnitId}},{key:"getPluginAppid",value:function(){return this.pluginAppid}},{key:"getSlotData",value:function(){return this.slotData}},{key:"getDeviceInfo",value:function(){return Ue.S3}},{key:"isBannerAd",value:function(){return"banner"===this.adType}},{key:"isRewardedVideoAd",value:function(e){return"incentive-video"===this.adType&&(!e||[ft.CrtSize.CRT_SIZE_REWARD_VEDIO169,ft.CrtSize.CRT_SIZE_REWARD_VEDIO916,ft.CrtSize.CRT_SIZE_VERTICAL_VIDEO_NEW_916,ft.CrtSize.CRT_SIZE_REWARD_LANDINGPAGE].includes(e.crt_size))}},{key:"isInterstitialAd",value:function(e){return"interstitialAd"===this.adType&&(!e||[ft.CrtSize.CRT_SIZE_TABLE_SCREEN_IMAGE,ft.CrtSize.CRT_SIZE_INSERT_VIDEO].includes(e.crt_size))}},{key:"isGridAd",value:function(){return"grid"===this.adType}},{key:"isCustomAd",value:function(){return"customAd"===this.adType}},{key:"isSplashAd",value:function(){return"splashAd"===this.adType}},{key:"getProgramStartTime",value:function(){return Ue.S3.startTime}},{key:"getWebviewInfo",value:function(){return{createWebviewId:this.webviewId,lastWebviewId:Ue.S0.lastWebviewId,currentWebviewId:Ue.S0.currentWebviewId,openType:Ue.S0.currentOpenType}}},{key:"setSlotData",value:function(e){this.slotData=Object.assign(this.slotData,e||{})}},{key:"reset",value:function(){this.adDataIndex=0,this.cgiReporter.reset()}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.fetchPromise||(this.fetchPromise=this.processFetch(e,t,n)),this.fetchPromise}},{key:"setRightButtonHide",value:function(e){var t=this,n=function(){return Ue.S3.isWaGame?t.setNavigationBarRightButton({isHide:e}):t.setMiniProgramNavigationBarRightButton({isHide:e})};return n().catch((function(r){return t.reportAdMonitorData(Ze.IN.RIGHTBUTTON_HIDE_ERROR,{retryCount:0,isHide:e,message:t.processStackMsg(r)}),n().catch((function(n){throw t.reportAdMonitorData(Ze.IN.RIGHTBUTTON_HIDE_ERROR,{retryCount:1,isHide:e,message:t.processStackMsg(n)}),n}))}))}},{key:"addDownloadTaskStraight",value:function(e,t,n,r){var i=this;return ar({taskName:e,taskUrl:t,fileMd5:n,extInfo:r}).catch((function(e){return i.reportAdMonitorData(Ze.IN.ADD_DOWNLOAD_TASK_ERROR,e),Promise.reject(e)}))}},{key:"operateFullscreen",value:function(e){if(!e)return Promise.reject();var t=[this.setRightButtonHide("hide"===e)];return Ue.S3.isWaGame||t.push("hide"===e?this.hideStatusBar():this.showStatusBar()),!Ue.S3.isWaGame&&Ue.S3.isAndroid&&t.push("hide"===e?this.hideVirtualBottomNavigationBar():this.showVirtualBottomNavigationBar()),Promise.all(t)}},{key:"isTriggerClick",value:function(e){var t=e.absoluteX,n=e.absoluteY,r=e.absoluteEndX,i=e.absoluteEndY,o=e.pressInterval,a=!1;return Math.abs(i-n)<30&&Math.abs(r-t)<30&&o<300&&(a=!0),a}},{key:"isValidCondition",value:function(e){return!!(e&&this.data&&this.data.condition)&&(this.data.condition[e]||void 0===this.data.condition[e])}},{key:"setCurrentData",value:function(e){var t;this.adDataIndex=e,null!==(t=this.datas)&&void 0!==t&&t[e]&&(this.data=this.datas[e])}},{key:"checkCanvasXmlState",value:function(){return this.isCanvasXmlHook}},{key:"handleRewardedVideoPlayableLand",value:function(e,t){var n,r,i=null==this||null===(n=this.data)||void 0===n||null===(r=n.extBackComm)||void 0===r?void 0:r.uid,o={};4===t?o.xj_scene=6:(o.gdt_vid=this.data.traceid||"",o.uxinfo=this.data.uxinfo||"",o.reward=1),o.rl=this.data.rl||"",o.ad_token=this.data.ad_token||"",Ue.S3.isIOS&&(o.uid=i||"");var a=(0,Le.a3)(e,o);return this.isPrefetch("playable_url")&&this.reportAdMonitorData(Ze.IN.H5_PRELOAD_BUTTON_CLICKED),(0,be.Yo)({url:a})}},{key:"setDeviceInfo",value:function(e){Object.assign(Ue.S3,e)}},{key:"setSplashAdShowStatus",value:function(){cr=!0}},{key:"getSplashAdShowStatus",value:function(){return cr}},{key:"getChannelsLiveStatus",value:(t=ne()(he().mark((function e(){var t,n,r,i,o,a,s,c,u,l;return he().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.data,n=t.dest_type,r=t.extBackComm,i=r.channels_info,o=r.live_video_mode,a=r.live_video_sub_mode,i&&null!=o&&null!=a){e.next=3;break}return e.abrupt("return","none");case 3:if(!(0,Le.Ie)(o,a)||n!==Ze.z5.DEST_TYPE_CHANNELS_LIVE){e.next=30;break}if(s=i.id,c=i.username,s&&c){e.next=7;break}return e.abrupt("return","none");case 7:return e.prev=7,e.next=10,this.getChannelsLiveInfo({feedId:s,finderUserName:c});case 10:if(u=e.sent,l=u.status,![Ze.Ct.NONE,Ze.Ct.IN_PREPARE].includes(l)){e.next=16;break}return e.abrupt("return","none");case 16:if(l!==Ze.Ct.ON_AIR){e.next=20;break}return e.abrupt("return","onlive");case 20:if(l!==Ze.Ct.ENDED){e.next=22;break}return e.abrupt("return","end");case 22:this.reportAdIDKey({key:Ze.IN.GET_CHANNELS_LIVE_STATUS_SUCCESS}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(7),this.reportAdMonitorData(Ze.IN.GET_CHANNELS_LIVE_STATUS_FAILED,{id:s,username:c,errMsg:e.t0});case 28:e.next=32;break;case 30:if(!(0,Le.gC)(o,a)||n!==Ze.z5.DEST_TYPE_CANVAS){e.next=32;break}return e.abrupt("return","reserve");case 32:return e.abrupt("return","none");case 33:case"end":return e.stop()}}),e,this,[[7,25]])}))),function(){return t.apply(this,arguments)})}]),e}(),fe()(An.prototype,"handleCheckAdIsOnlineResp",[hn,gn],Object.getOwnPropertyDescriptor(An.prototype,"handleCheckAdIsOnlineResp"),An.prototype),fe()(An.prototype,"handleSplashAd",[vn,_n],Object.getOwnPropertyDescriptor(An.prototype,"handleSplashAd"),An.prototype),fe()(An.prototype,"handleCustomAd",[mn,yn],Object.getOwnPropertyDescriptor(An.prototype,"handleCustomAd"),An.prototype),fe()(An.prototype,"handleGridAd",[bn,wn],Object.getOwnPropertyDescriptor(An.prototype,"handleGridAd"),An.prototype),fe()(An.prototype,"handleInterstitialAd",[In,Sn],Object.getOwnPropertyDescriptor(An.prototype,"handleInterstitialAd"),An.prototype),fe()(An.prototype,"handleRewardedVideoAd",[Cn,Tn],Object.getOwnPropertyDescriptor(An.prototype,"handleRewardedVideoAd"),An.prototype),fe()(An.prototype,"handleBannerAd",[En,kn],Object.getOwnPropertyDescriptor(An.prototype,"handleBannerAd"),An.prototype),fe()(An.prototype,"checkDuplicateRecommendedAds",[xn],Object.getOwnPropertyDescriptor(An.prototype,"checkDuplicateRecommendedAds"),An.prototype),An)},1232:(e,t,n)=>{"use strict";n.d(t,{IN:()=>a,ET:()=>c,$g:()=>l});var r,i=function(e,t){return{idKey:e,idKeyGroup:t}};!function(e){e[e.COMMON=924]="COMMON",e[e.SPLASHAD=1288]="SPLASHAD",e[e.CUSTOMAD=1390]="CUSTOMAD"}(r||(r={}));var o=function(e){return i(e,r.COMMON)},a={AD_BANNER_LOAD_ERROR:o(5),AD_VIDEO_LOAD_ERROR:o(10),REWARDED_VIDEO_PARSE_ERROR:o(11),REWARDED_VIDEO_RENDER_ERROR:o(12),REWARDED_VIDEO_LOAD_ERROR:o(13),REWARDED_VIDEO_FOLLOW_SUCCESS:o(14),OPEN_URL_ERROR:o(21),OPEN_WXAPP_ERROR:o(22),OPEN_CANVAS_ERROR:o(23),ADD_CONTACT_ERROR:o(24),LAUNCH_APP_ERROR:o(25),OPEN_WEBAPPSTORE_ERROR:o(26),ADD_DOWNLOAD_TASK_ERROR:o(28),CLICK_REPORT_ERROR:o(32),EXPOSURE_REPORT_ERROR:o(33),FOLLOW_REPORT_ERROR:o(34),REWARDED_VIDEO_ANIMATE_ERROR:o(35),AD_FOLLOWED:o(37),AD_INSTALLED:o(38),AD_INTERSTITIAL_LOAD_ERROR:o(39),REWARDED_VIDEO_INSTANCE_BROKEN:o(50),PRELOAD_MINIENV_SUCCESS:o(86),PRELOAD_MINIENV_ERROR:o(87),AD_GRID_LOAD_SUCCESS:o(88),AD_GRID_LOAD_COUNT_ERROR:o(89),AD_GRID_LOAD_ERROR:o(90),PREDOWNLOAD_SUCCESS:o(96),PREDOWNLOAD_ERROR:o(97),REWARDED_VIDEO_OTHER_SHOW_ERROR:o(105),BATCHLOAD_SUCCESS:o(112),BATCHLOAD_ERROR:o(113),REWARDED_VIDEO_BUTTON_WIDTH_ERROR:o(114),REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR:o(115),BIND_GUIDE_SUCCESS:o(119),BIND_GUIDE_ERROR:o(120),REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR:o(121),RIGHTBUTTON_HIDE_ERROR:o(127),REWARDED_VIDEO_RELATION_FETCH_ERROR:o(128),GET_DEVICEINFO_ERROR:o(129),THIRD_ERROR:o(130),GET_DEVICEINFO_SUCCESS:o(131),GET_WAID_SUCCESS:o(132),GET_WAID_ERROR:o(133),READ_ADINFOS_ERROR:o(134),AD_FETCH_SUCCESS:o(135),REWARDED_VIDEO_PRELOAD_ERROR:o(136),REWARDED_VIDEO_PRELOAD_SUCCESS:o(137),READ_ADINFOS_SUCCESS:o(138),ANALYSE_DEBUG_REPORT_ERROR:o(139),PRELOAD_CALL_ERROR:o(140),PRELOAD_LOAD_ERROR:o(141),PRELOAD_LOAD_SUCCESS:o(142),PRELOAD_USE_SUCCESS:o(143),PRELOAD_USE_ERROR:o(144),PRELOAD_DOWNLOAD_SUCCESS:o(145),PRELOAD_DOWNLOAD_ERROR:o(146),REPORT_VIDEO_FAILED:o(147),REWARD_GAUSS_EXISTS:o(148),REWARD_USE_GAUSS:o(149),REWARD_USE_EXPAND_STYLE:o(150),REWARD_USE_GAUSS_AND_EXPAND_STYLE:o(151),REWARDED_VIDEO_KEEP_ALIVE:o(152),REWARDED_VIDEO_END:o(154),OPEN_CHANNELS_ACTIVITY_SUCCESS:o(156),OPEN_CHANNELS_ACTIVITY_FAILED:o(157),OPEN_CHANNELS_LIVE_SUCCESS:o(158),OPEN_CHANNELS_LIVE_FAILED:o(159),OPEN_CHANNELS_USER_PROFILE_SUCCESS:o(160),OPEN_CHANNELS_USER_PROFILE_FAILED:o(161),REWARD_CHANNELS_CALLBACK_SUCCESS:o(162),REWARD_CHANNELS_CALLBACK_FAILED:o(163),H5_PRELOAD_CARD_CLICKED:o(164),H5_PRELOAD_BUTTON_CLICKED:o(165),H5_PRELOAD_SUCCESS:o(166),H5_PRELOAD_FAILED:o(167),H5_PRELOAD_PLAYABLE_CLICKED:o(168),GET_CHANNELS_LIVE_STATUS_SUCCESS:o(169),GET_CHANNELS_LIVE_STATUS_FAILED:o(170),REWARDED_VIDEO_DURATION_ZERO:o(171)},s=function(e){return i(e,r.SPLASHAD)},c={dataLoadSuccess:s(0),dataLoadFail:s(1),dataPreloadSuccess:s(2),dataPreloadFail:s(3),handleDataFail:s(4),launchAcceptShouldShow:s(5),menuAcceptShouldShow:s(6),readFileFail:s(7),launchShowSplashAdSuccess:s(8),menuShowSplashAdSuccess:s(9),showSplashAdFail:s(10),firstRenderFail:s(11),firstInsertFail:s(12),secondRenderFail:s(13),secondInsertFail:s(14),iosThirdInsertFail:s(15),checkAdStateFail:s(16),adOfflineClose:s(17),readFileDataFail:s(18),firstShowSuccess:s(19),showSplashAdMenuSuccess:s(20),showSplashAdMenuFail:s(21),secondShowSuccess:s(22),removeFileDataFail:s(23),landingPageFail:s(24),frequencyControlFail:s(25),frequencyControlReturn:s(26),bulkCopyFileFail:s(27),getAdInfosFail:s(28),getAidFail:s(29),setExposureTagFail:s(30),NO_ADINFOS:s(31),NO_AID:s(32),MATERIAL_NOT_READY:s(33),CHECK_AD_STATUS_ERROR:s(34),CRT_ORIENTATION_NOT_SURE:s(35),EXPOSURE_TIMES_LIMIT:s(36),START_CHECK_AD_STATUS:s(37),CHECK_AD_STATUS_SUCCESS:s(38),OTHER_ADS_EMIT_FETCH:s(39),WRITE_ADINFOS_SUCCESS:s(40),WRITE_ADINFOS_FAIL:s(41)},u=function(e){return i(e,r.CUSTOMAD)},l={LOAD_FAILED:u(1),PRELOAD_SUCCESS:u(2),PRELOAD_FAILED:u(3),PARSE_FAILED:u(4),TPL_RENDER_SUCCESS:u(5),TPL_PARSE_FAILED:u(6),TPL_LOAD_FAILED:u(7),AD_LIMIT_TIME:u(8),AD_LIMIT_BOUNDARY:u(9),RELATION_FETCH_ERROR:u(10),SHOW_FAILED1:u(11),SHOW_FAILED2:u(12),AD_VIDEO_LOAD_FAILED:u(13),FOLLOW_SUCCESS:u(14),FOLLOW_FAILED:u(15),RENDER_SUCCESS:u(16),RENDER_FAILED:u(17),REFETCH_SUCCESS:u(18),REFETCH_FAILED:u(19),LOAD_SUCCESS:u(20),WIDTH_GET_ERROR:u(21)}},8339:(e,t,n)=>{"use strict";var r,i,o;n.d(t,{$g:()=>T.$g,AN:()=>E,W:()=>I,z5:()=>m,Qc:()=>M,IN:()=>T.IN,Fe:()=>R,Ct:()=>N,fr:()=>D,EM:()=>O,kv:()=>S,ET:()=>T.ET,Yk:()=>k,Z8:()=>P,_i:()=>A,wW:()=>x}),function(e){e[e.kUnknown=0]="kUnknown",e[e.kVideo=1]="kVideo",e[e.kArticle=2]="kArticle"}(r||(r={})),function(e){e[e.EXPOSE=1]="EXPOSE",e[e.CLICK=2]="CLICK"}(i||(i={})),function(e){e[e.kDeviceUnknow=0]="kDeviceUnknow",e[e.kDeviceAndroid=1]="kDeviceAndroid",e[e.kDeviceIphone=2]="kDeviceIphone",e[e.kDeviceIpad=3]="kDeviceIpad",e[e.kDeviceTv=4]="kDeviceTv"}(o||(o={}));var a,s,c,u,l,d,f,p,h;n(3592),n(767);!function(e){e[e.AppServiceType_NORMAL=1]="AppServiceType_NORMAL",e[e.AppServiceType_GAME=2]="AppServiceType_GAME"}(a||(a={})),function(e){e[e.AllOS=0]="AllOS",e[e.Ios=1]="Ios",e[e.Android=2]="Android",e[e.Winphone=3]="Winphone",e[e.JAVA=4]="JAVA",e[e.OS_UNKNOWN=5]="OS_UNKNOWN",e[e.SYMBIAN=6]="SYMBIAN",e[e.S40asha=7]="S40asha",e[e.Webwx=8]="Webwx",e[e.Blackberry=9]="Blackberry",e[e.Windows=10]="Windows"}(s||(s={})),function(e){e[e.kUnknownNetwork=0]="kUnknownNetwork",e[e.kWIFI=1]="kWIFI",e[e.k2G=2]="k2G",e[e.k3G=3]="k3G",e[e.k4G=4]="k4G",e[e.k5G=5]="k5G",e[e.kAll=10]="kAll"}(c||(c={})),function(e){e[e.kUnknownCarrier=0]="kUnknownCarrier",e[e.kCMCC=1]="kCMCC",e[e.kCUCC=2]="kCUCC",e[e.kCTCC=3]="kCTCC"}(u||(u={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CMNET=1]="CMNET",e[e.CMWAP=2]="CMWAP",e[e.THREEGNET=3]="THREEGNET",e[e.THREEGWAP=4]="THREEGWAP",e[e.UNINET=5]="UNINET",e[e.UNIWAP=6]="UNIWAP",e[e.WIFI=7]="WIFI",e[e.CTWAP=8]="CTWAP",e[e.CTNET=9]="CTNET",e[e.THREEGNET_UNINET=10]="THREEGNET_UNINET",e[e.THREEGWAP_UNIWAP=11]="THREEGWAP_UNIWAP",e[e.CTNET_CTWAP=12]="CTNET_CTWAP",e[e.THREEGNET_THREEGWAP_UNINET_UNIWAP=13]="THREEGNET_THREEGWAP_UNINET_UNIWAP",e[e.WIMAX=14]="WIMAX"}(l||(l={})),function(e){e[e.Default_Source=0]="Default_Source",e[e.MediaPlatform=1]="MediaPlatform",e[e.WeApp=2]="WeApp",e[e.Moments=3]="Moments",e[e.BizTimeLine=4]="BizTimeLine"}(d||(d={})),function(e){e[e.JSON=0]="JSON",e[e.XML=1]="XML"}(f||(f={})),function(e){e[e.Unknown_sys=-1]="Unknown_sys",e[e.Windows=0]="Windows",e[e.Ios=1]="Ios",e[e.Android=2]="Android"}(p||(p={})),function(e){e[e.Unknown_type=0]="Unknown_type",e[e.Wifi=1]="Wifi",e[e.TwoG=2]="TwoG",e[e.TreeG=3]="TreeG",e[e.FourG=4]="FourG",e[e.FiveG=5]="FiveG",e[e.Ethernet=6]="Ethernet"}(h||(h={}));var g,v,_,m,y,b,w;n(5185);!function(e){e[e.SOURCE_UNKNOW=0]="SOURCE_UNKNOW",e[e.SOURCE_MP=1]="SOURCE_MP",e[e.SOURCE_OSS=2]="SOURCE_OSS",e[e.SOURCE_MP_OSS=3]="SOURCE_MP_OSS",e[e.SOURCE_OPEN_API=4]="SOURCE_OPEN_API",e[e.SOURCE_MARKETING_API=5]="SOURCE_MARKETING_API",e[e.SOURCE_WEPAY=6]="SOURCE_WEPAY",e[e.SOURCE_PRODUCT_API=7]="SOURCE_PRODUCT_API",e[e.SOURCE_WEAPP=8]="SOURCE_WEAPP",e[e.SOURCE_LOCAL_BUSINESS=9]="SOURCE_LOCAL_BUSINESS"}(g||(g={})),function(e){e[e.NORMAL_AD=0]="NORMAL_AD",e[e.LOCAL_BUSINESS_AD=1]="LOCAL_BUSINESS_AD"}(v||(v={})),function(e){e[e.POS_TYPE_APPMSG_BOTTOM=0]="POS_TYPE_APPMSG_BOTTOM",e[e.POS_TYPE_APPMSG_TOP=1]="POS_TYPE_APPMSG_TOP",e[e.POS_TYPE_NEWS=2]="POS_TYPE_NEWS",e[e.POS_TYPE_APPMSG_VIDEO=3]="POS_TYPE_APPMSG_VIDEO",e[e.POS_TYPE_FREE_TRADE=4]="POS_TYPE_FREE_TRADE",e[e.POS_TYPE_APPMSG_MIDDLE=5]="POS_TYPE_APPMSG_MIDDLE",e[e.POS_TYPE_MAIL=6]="POS_TYPE_MAIL",e[e.POS_TYPE_WX_APPLICATION=7]="POS_TYPE_WX_APPLICATION",e[e.POS_TYPE_WX_GAME_VIDEO=8]="POS_TYPE_WX_GAME_VIDEO",e[e.POS_TYPE_MP_PRODUCT=9]="POS_TYPE_MP_PRODUCT",e[e.POS_TYPE_WEAPP_INTERSTITIAL=10]="POS_TYPE_WEAPP_INTERSTITIAL",e[e.POS_TYPE_BOX=11]="POS_TYPE_BOX",e[e.POS_TYPE_WEAPP_COVER=12]="POS_TYPE_WEAPP_COVER",e[e.POS_TYPE_WEAPP_TEMPLATE=13]="POS_TYPE_WEAPP_TEMPLATE",e[e.POS_TYPE_WX_PAY=14]="POS_TYPE_WX_PAY",e[e.POS_TYPE_BIZ_TIME_LINE=15]="POS_TYPE_BIZ_TIME_LINE",e[e.POS_TYPE_MP_MAX=100]="POS_TYPE_MP_MAX",e[e.POS_TYPE_MULTI_SLOT=101]="POS_TYPE_MULTI_SLOT",e[e.POS_TYPE_WX_APPLET=997]="POS_TYPE_WX_APPLET",e[e.POS_TYPE_MP_ALL=998]="POS_TYPE_MP_ALL",e[e.POS_TYPE_SNS_FEED=999]="POS_TYPE_SNS_FEED"}(_||(_={})),function(e){e[e.DEST_TYPE_AD=0]="DEST_TYPE_AD",e[e.DEST_TYPE_OUTER=1]="DEST_TYPE_OUTER",e[e.DEST_TYPE_APPDETAIL=2]="DEST_TYPE_APPDETAIL",e[e.DEST_TYPE_BIZ=3]="DEST_TYPE_BIZ",e[e.DEST_TYPE_APPINFO_PAGE=4]="DEST_TYPE_APPINFO_PAGE",e[e.DEST_TYPE_WECHAT_SHOP=5]="DEST_TYPE_WECHAT_SHOP",e[e.DEST_TYPE_WECHAT_APPLET=6]="DEST_TYPE_WECHAT_APPLET",e[e.DEST_TYPE_CANVAS=9]="DEST_TYPE_CANVAS",e[e.DEST_TYPE_CHANNELS=101]="DEST_TYPE_CHANNELS",e[e.DEST_TYPE_CHANNELS_LIVE=102]="DEST_TYPE_CHANNELS_LIVE",e[e.DEST_TYPE_CHANNELS_USER_PROFILE=103]="DEST_TYPE_CHANNELS_USER_PROFILE"}(m||(m={})),function(e){e[e.RT_SIZE_WORD=91]="RT_SIZE_WORD",e[e.CRT_SIZE_PIC=133]="CRT_SIZE_PIC",e[e.CRT_SIZE_APPMSG=134]="CRT_SIZE_APPMSG",e[e.CRT_SIZE_CARD=135]="CRT_SIZE_CARD",e[e.CRT_SIZE_TOP_PIC=166]="CRT_SIZE_TOP_PIC",e[e.CRT_SIZE_APPDETAIL=167]="CRT_SIZE_APPDETAIL",e[e.CRT_SIZE_WECHAT_SHOP=267]="CRT_SIZE_WECHAT_SHOP",e[e.CRT_SIZE_COPY_CARD=354]="CRT_SIZE_COPY_CARD",e[e.CRT_SIZE_PIC_CARD=355]="CRT_SIZE_PIC_CARD",e[e.CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC=998]="CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC",e[e.CRT_SIZE_OFF_ACCOUNT_PIC=117]="CRT_SIZE_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_WECHAT_APPLET_GRAND_PIC=484]="CRT_SIZE_WECHAT_APPLET_GRAND_PIC",e[e.CRT_SIZE_WECHAT_VIDEO=538]="CRT_SIZE_WECHAT_VIDEO",e[e.CRT_SIZE_H5VIDEO_PIC_6S=555]="CRT_SIZE_H5VIDEO_PIC_6S",e[e.CRT_SIZE_H5VIDEO_VIDEO_15S=1515]="CRT_SIZE_H5VIDEO_VIDEO_15S",e[e.CRT_SIZE_MUTUAL_VIDEO_169=996]="CRT_SIZE_MUTUAL_VIDEO_169",e[e.CRT_SIZE_MUTUAL_VIDEO_43=997]="CRT_SIZE_MUTUAL_VIDEO_43",e[e.CRT_SIZE_IMAGE=666]="CRT_SIZE_IMAGE",e[e.CRT_SIZE_VIDEO=888]="CRT_SIZE_VIDEO",e[e.CRT_SIZE_CARD_IMAGE=450]="CRT_SIZE_CARD_IMAGE",e[e.CRT_SIZE_CARD_VIDEO=452]="CRT_SIZE_CARD_VIDEO",e[e.CRT_SIZE_LINK=454]="CRT_SIZE_LINK",e[e.CRT_SIZE_CARD_SELECT_IMAGE=480]="CRT_SIZE_CARD_SELECT_IMAGE",e[e.CRT_SIZE_CARD_SELECT_VIDEO=482]="CRT_SIZE_CARD_SELECT_VIDEO",e[e.CRT_SIZE_CARD_VOTE_IMAGE=516]="CRT_SIZE_CARD_VOTE_IMAGE",e[e.CRT_SIZE_CARD_VOTE_VIDEO=519]="CRT_SIZE_CARD_VOTE_VIDEO",e[e.CRT_SIZE_WXAPP_PIC=532]="CRT_SIZE_WXAPP_PIC",e[e.CRT_SIZE_CARD_TURN_IMAGE=539]="CRT_SIZE_CARD_TURN_IMAGE",e[e.CRT_SIZE_CARD_TURN_VIDEO=540]="CRT_SIZE_CARD_TURN_VIDEO",e[e.CRT_SIZE_WXAPP_CARD_PIC=556]="CRT_SIZE_WXAPP_CARD_PIC",e[e.CRT_SIZE_WXGAME_VIDEO_0=559]="CRT_SIZE_WXGAME_VIDEO_0",e[e.CRT_SIZE_WXGAME_VIDEO_1=560]="CRT_SIZE_WXGAME_VIDEO_1",e[e.CRT_SIZE_WXAPP_BANNER_608=608]="CRT_SIZE_WXAPP_BANNER_608",e[e.CRT_SIZE_MULTI_POS_960_334=567]="CRT_SIZE_MULTI_POS_960_334",e[e.CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC=568]="CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_MULTI_POS_CARD=569]="CRT_SIZE_MULTI_POS_CARD",e[e.CRT_SIZE_MULTI_POS_COPY_CARD=570]="CRT_SIZE_MULTI_POS_COPY_CARD",e[e.CRT_SIZE_CARD_RATING_IMAGE=588]="CRT_SIZE_CARD_RATING_IMAGE",e[e.CRT_SIZE_CARD_RATING_VIDEO=589]="CRT_SIZE_CARD_RATING_VIDEO",e[e.CRT_SIZE_CARD_FULL_IMAGE=598]="CRT_SIZE_CARD_FULL_IMAGE",e[e.CRT_SIZE_CARD_FULL_VIDEO=599]="CRT_SIZE_CARD_FULL_VIDEO",e[e.CRT_SIZE_MP_TAGS=677]="CRT_SIZE_MP_TAGS",e[e.CRT_SIZE_SCREEN_701=701]="CRT_SIZE_SCREEN_701",e[e.CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO=913]="CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO",e[e.CRT_SIZE_CARD_FULL_GESTURE_VIDEO=698]="CRT_SIZE_CARD_FULL_GESTURE_VIDEO",e[e.CRT_SIZE_BOTTOM_708=708]="CRT_SIZE_BOTTOM_708",e[e.CRT_SIZE_IN_TEXT_841=841]="CRT_SIZE_IN_TEXT_841",e[e.CRT_SIZE_CARD_COMPONENT_IMAGE=1707]="CRT_SIZE_CARD_COMPONENT_IMAGE",e[e.CRT_SIZE_CARD_COMPONENT_VIDEO=1708]="CRT_SIZE_CARD_COMPONENT_VIDEO",e[e.CRT_SIZE_PRODUCT=1501]="CRT_SIZE_PRODUCT",e[e.CRT_SIZE_CARD_SPHERE_IMAGE=699]="CRT_SIZE_CARD_SPHERE_IMAGE",e[e.CRT_SIZE_IMAGE_TEXT_CARD=904]="CRT_SIZE_IMAGE_TEXT_CARD",e[e.CRT_SIZE_MULTI_SLOT_BANNER=925]="CRT_SIZE_MULTI_SLOT_BANNER",e[e.CRT_SIZE_MULTI_SLOT_BANNER_MP=926]="CRT_SIZE_MULTI_SLOT_BANNER_MP",e[e.CRT_SIZE_MULTI_SLOT_IMAGE=927]="CRT_SIZE_MULTI_SLOT_IMAGE",e[e.CRT_SIZE_MULTI_SLOT_IMAGE_MP=928]="CRT_SIZE_MULTI_SLOT_IMAGE_MP",e[e.CRT_SIZE_MULTI_SLOT_VIDEO=929]="CRT_SIZE_MULTI_SLOT_VIDEO",e[e.CRT_SIZE_MULTI_SLOT_BOX=972]="CRT_SIZE_MULTI_SLOT_BOX",e[e.CRT_SIZE_BUTTON_CARD_IMAGE=955]="CRT_SIZE_BUTTON_CARD_IMAGE",e[e.CRT_SIZE_BUTTON_CARD_VIDEO=957]="CRT_SIZE_BUTTON_CARD_VIDEO",e[e.CRT_SIZE_WXGAME_LAND_PAGE=910]="CRT_SIZE_WXGAME_LAND_PAGE",e[e.CRT_SIZE_WEAPP_COVER=1003]="CRT_SIZE_WEAPP_COVER",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO=1064]="CRT_SIZE_SNS_PORTRAIL_VIDEO",e[e.CRT_SIZE_CARD_FULL_PRESS_VIDEO=1065]="CRT_SIZE_CARD_FULL_PRESS_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_1=1479]="CRT_SIZE_SNS_PORTRAIL_VIDEO_1",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_2=1480]="CRT_SIZE_SNS_PORTRAIL_VIDEO_2",e[e.CRT_SIZE_CHANNELS_IMAGE=1530]="CRT_SIZE_CHANNELS_IMAGE",e[e.CRT_SIZE_CHANNELS_PORTRAIL_IMAGE=1531]="CRT_SIZE_CHANNELS_PORTRAIL_IMAGE",e[e.CRT_SIZE_CARD_FULL_TWIST_VIDEO=1733]="CRT_SIZE_CARD_FULL_TWIST_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280=721]="CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280",e[e.CRT_SIZE_CARD_FINDER_EVENT_VIDEO=1748]="CRT_SIZE_CARD_FINDER_EVENT_VIDEO"}(y||(y={})),function(e){e[e.PAGE_TYPE_NONE=0]="PAGE_TYPE_NONE",e[e.PAGE_TYPE_OUTLINK=1]="PAGE_TYPE_OUTLINK",e[e.PAGE_TYPE_ARTICLE=2]="PAGE_TYPE_ARTICLE",e[e.PAGE_TYPE_H5CANVAS=3]="PAGE_TYPE_H5CANVAS",e[e.PAGE_TYPE_CANVAS=4]="PAGE_TYPE_CANVAS",e[e.PAGE_TYPE_CARD=5]="PAGE_TYPE_CARD",e[e.PAGE_TYPE_ACCOUNT=6]="PAGE_TYPE_ACCOUNT",e[e.PAGE_TYPE_APPSTORE=7]="PAGE_TYPE_APPSTORE",e[e.PAGE_TYPE_TMPL=8]="PAGE_TYPE_TMPL",e[e.PAGE_TYPE_SIMPLE_CANVAS=9]="PAGE_TYPE_SIMPLE_CANVAS",e[e.PAGE_TYPE_AD=10]="PAGE_TYPE_AD",e[e.PAGE_TYPE_DIRECT=11]="PAGE_TYPE_DIRECT",e[e.PAGE_TYPE_APPDETAIL=12]="PAGE_TYPE_APPDETAIL",e[e.PAGE_TYPE_APPINFO_PAGE=13]="PAGE_TYPE_APPINFO_PAGE",e[e.PAGE_TYPE_WECHAT_SHOP=14]="PAGE_TYPE_WECHAT_SHOP",e[e.PAGE_TYPE_WEAPP=15]="PAGE_TYPE_WEAPP",e[e.PAGE_TYPE_ACTIVE=16]="PAGE_TYPE_ACTIVE",e[e.PAGE_TYPE_FORM_IMAGE=17]="PAGE_TYPE_FORM_IMAGE",e[e.PAGE_TYPE_FORM_VIDEO=18]="PAGE_TYPE_FORM_VIDEO",e[e.PAGE_TYPE_APP_IMAGE=19]="PAGE_TYPE_APP_IMAGE",e[e.PAGE_TYPE_APP_VIDEO=20]="PAGE_TYPE_APP_VIDEO",e[e.PAGE_TYPE_CANVAS_QUES=21]="PAGE_TYPE_CANVAS_QUES",e[e.PAGE_TYPE_CANVAS_VOTE=22]="PAGE_TYPE_CANVAS_VOTE",e[e.PAGE_TYPE_WEPAY_CARD=23]="PAGE_TYPE_WEPAY_CARD",e[e.PAGE_TYPE_WXGAME=24]="PAGE_TYPE_WXGAME",e[e.PAGE_TYPE_FY_EGOODS=25]="PAGE_TYPE_FY_EGOODS",e[e.PAGE_TYPE_ALITA=26]="PAGE_TYPE_ALITA",e[e.PAGE_TYPE_PHONE_CALL=27]="PAGE_TYPE_PHONE_CALL",e[e.PAGE_TYPE_SUBSCRIPTION=40027]="PAGE_TYPE_SUBSCRIPTION",e[e.PAGE_TYPE_YOUZAN=20003]="PAGE_TYPE_YOUZAN",e[e.PAGE_TYPE_WEIMENG=20305]="PAGE_TYPE_WEIMENG",e[e.PAGE_TYPE_FENGYE_EC_SINGLE=10001]="PAGE_TYPE_FENGYE_EC_SINGLE",e[e.PAGE_TYPE_FENGYE_EC_TOGETHER=10002]="PAGE_TYPE_FENGYE_EC_TOGETHER",e[e.PAGE_TYPE_FENGYE_EC_FOCUS=10003]="PAGE_TYPE_FENGYE_EC_FOCUS",e[e.PAGE_TYPE_PLAY_H5=18001]="PAGE_TYPE_PLAY_H5",e[e.PAGE_TYPE_SCAN=40026]="PAGE_TYPE_SCAN",e[e.PAGE_TYPE_CHANNELS=60003]="PAGE_TYPE_CHANNELS",e[e.PAGE_TYPE_CHANNELS_WATCH_LIVE=60005]="PAGE_TYPE_CHANNELS_WATCH_LIVE",e[e.PAGE_TYPE_CHANNELS_RESERVE_LIVE=60006]="PAGE_TYPE_CHANNELS_RESERVE_LIVE",e[e.PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5=40028]="PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_IOS_APP_H5=40029]="PAGE_TYPE_WECHAT_XJ_IOS_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_WEBSITE_H5=40030]="PAGE_TYPE_WECHAT_XJ_WEBSITE_H5",e[e.PAGE_TYPE_WECHAT_RED_PACKET_COVER=40031]="PAGE_TYPE_WECHAT_RED_PACKET_COVER",e[e.PAGE_TYPE_WECHAT_VIDEO_TOPIC=40032]="PAGE_TYPE_WECHAT_VIDEO_TOPIC",e[e.PAGE_TYPE_MAX=1e8]="PAGE_TYPE_MAX"}(b||(b={})),function(e){e[e.PRODUCTTYPE_UNKNOWN=0]="PRODUCTTYPE_UNKNOWN",e[e.PRODUCTTYPE_OPEN_PLATFORM_APP_MOB=12]="PRODUCTTYPE_OPEN_PLATFORM_APP_MOB",e[e.PRODUCTTYPE_APPLE_APP_STORE=19]="PRODUCTTYPE_APPLE_APP_STORE",e[e.PRODUCTTYPE_WECHAT=23]="PRODUCTTYPE_WECHAT",e[e.PRODUCTTYPE_JD_URL=25]="PRODUCTTYPE_JD_URL",e[e.PRODUCTTYPE_DP_SHOP=26]="PRODUCTTYPE_DP_SHOP",e[e.PRODUCTTYPE_WECHAT_ARTICLE=29]="PRODUCTTYPE_WECHAT_ARTICLE",e[e.PRODUCTTYPE_WECHAT_SHOP=30]="PRODUCTTYPE_WECHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_URL=31]="PRODUCTTYPE_WECHAT_URL",e[e.PRODUCTTYPE_WECHAT_CARD=36]="PRODUCTTYPE_WECHAT_CARD",e[e.PRODUCTTYPE_WECHAT_LBS=37]="PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_WECHAT_APP=38]="PRODUCTTYPE_WECHAT_APP",e[e.GDT_PRODUCTTYPE_WECHAT_LBS=39]="GDT_PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_LEAD_AD=43]="PRODUCTTYPE_LEAD_AD",e[e.PRODUCTTYPE_WECHAT_MINI_GAME=46]="PRODUCTTYPE_WECHAT_MINI_GAME",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.PRODUCTTYPE_WECHAT_CHANNELS=51]="PRODUCTTYPE_WECHAT_CHANNELS",e[e.PRODUCTTYPE_MINI_PROGRAM_WECHAT=52]="PRODUCTTYPE_MINI_PROGRAM_WECHAT"}(w||(w={}));var I,S,C,T=n(1232);!function(e){e[e.PIC_TIME5=555]="PIC_TIME5",e[e.VIDEO_TIME15=1515]="VIDEO_TIME15",e[e.APP_VIDEO=538]="APP_VIDEO",e[e.CRT_SIZE_WX_APPLICATION=532]="CRT_SIZE_WX_APPLICATION",e[e.CRT_SIZE_WX_APPLICATION_X=567]="CRT_SIZE_WX_APPLICATION_X",e[e.CRT_SIZE_WX_APPLICATION_NEW=608]="CRT_SIZE_WX_APPLICATION_NEW",e[e.CRT_SIZE_WX_APPLICATION_CARD=556]="CRT_SIZE_WX_APPLICATION_CARD",e[e.CRT_SIZE_REWARD_VEDIO169=559]="CRT_SIZE_REWARD_VEDIO169",e[e.CRT_SIZE_REWARD_VEDIO916=560]="CRT_SIZE_REWARD_VEDIO916",e[e.CRT_SIZE_REWARD_LANDINGPAGE=910]="CRT_SIZE_REWARD_LANDINGPAGE",e[e.CRT_SIZE_TABLE_SCREEN_IMAGE=701]="CRT_SIZE_TABLE_SCREEN_IMAGE",e[e.CRT_SIZE_INSERT_VIDEO=913]="CRT_SIZE_INSERT_VIDEO",e[e.CRT_SIZE_MULTI_POS_NEW_PIC=927]="CRT_SIZE_MULTI_POS_NEW_PIC",e[e.CRT_SIZE_MULTI_POS_VEDIO=929]="CRT_SIZE_MULTI_POS_VEDIO",e[e.CRT_SIZE_MULTI_POS_GRID=972]="CRT_SIZE_MULTI_POS_GRID",e[e.CRT_SIZE_COVER_AD=1003]="CRT_SIZE_COVER_AD",e[e.CRT_SIZE_CPM_PIC=998]="CRT_SIZE_CPM_PIC",e[e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT=928]="CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT",e[e.CRT_SIZE_VERTICAL_VIDEO_NEW_916=721]="CRT_SIZE_VERTICAL_VIDEO_NEW_916"}(I||(I={})),function(e){e[e.ANDROID=12]="ANDROID",e[e.IOS=19]="IOS",e[e.WE_CHAT=23]="WE_CHAT",e[e.MINI_GAME=46]="MINI_GAME",e[e.WE_CHAT_CARD=36]="WE_CHAT_CARD",e[e.WE_CHAT_SHOP=30]="WE_CHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.WE_CHAT_ARTICLE=29]="WE_CHAT_ARTICLE",e[e.GDT_WE_CHAT_ARTICLE=31]="GDT_WE_CHAT_ARTICLE",e[e.WE_CHAT_APP=38]="WE_CHAT_APP",e[e.LBS=37]="LBS",e[e.LEAD_AD=43]="LEAD_AD",e[e.JD_URL=25]="JD_URL"}(S||(S={})),function(e){e[e.MP_TAG_TYPE_NONE=0]="MP_TAG_TYPE_NONE",e[e.MP_TAG_TYPE_PLAY=1]="MP_TAG_TYPE_PLAY",e[e.MP_TAG_TYPE_DOWNLOAD=3]="MP_TAG_TYPE_DOWNLOAD",e[e.MP_TAG_TYPE_FOLLOW=4]="MP_TAG_TYPE_FOLLOW",e[e.MP_TAG_TYPE_FORM=5]="MP_TAG_TYPE_FORM",e[e.MP_TAG_TYPE_CATEGORY=2]="MP_TAG_TYPE_CATEGORY",e[e.MP_TAG_TYPE_ORDER=6]="MP_TAG_TYPE_ORDER",e[e.MP_TAG_TYPE_POI=7]="MP_TAG_TYPE_POI",e[e.MP_TAG_TYPE_CONVERTION=8]="MP_TAG_TYPE_CONVERTION",e[e.MP_TAG_TYPE_APP_CATEGORY=9]="MP_TAG_TYPE_APP_CATEGORY"}(C||(C={}));var E,k={123:["image","brand"],124:["image","store"],127:["image","download"],128:["image","follow"],134:["image","wxgame"],138:["image","brand"],126:["card","follow","normal"],129:["card","follow","large"],132:["card","download","large"],130:["video","download"],131:["video","brand"],133:["video","wxgame"],135:["video","brand"],136:["video","follow"],137:["video","brand"]},x={1:"store",2:"brand",3:"download",6:"follow",7:"wxgame"},A=[123,124,126,127,128,129,130,131,132,133,134,135,136,137,138],P=[I.CRT_SIZE_WX_APPLICATION,I.CRT_SIZE_WX_APPLICATION_NEW,I.CRT_SIZE_WX_APPLICATION_X,I.CRT_SIZE_WX_APPLICATION_CARD,I.CRT_SIZE_REWARD_VEDIO169,I.CRT_SIZE_REWARD_VEDIO916,I.CRT_SIZE_TABLE_SCREEN_IMAGE,I.CRT_SIZE_REWARD_LANDINGPAGE,I.CRT_SIZE_INSERT_VIDEO,I.CRT_SIZE_MULTI_POS_NEW_PIC,I.CRT_SIZE_MULTI_POS_VEDIO,I.CRT_SIZE_MULTI_POS_GRID,I.CRT_SIZE_CPM_PIC,I.CRT_SIZE_COVER_AD,I.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT,I.CRT_SIZE_VERTICAL_VIDEO_NEW_916];!function(e){e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON=2001]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON=2002]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT=2003]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER=2004]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT=2005]="MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION=2006]="MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION=2007]="MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_FOLLOW=2008]="MMOCAD_CLICKPOS_BIZ_FOLLOW",e[e.MMOCAD_CLICKPOS_BIZ_LIKE=2009]="MMOCAD_CLICKPOS_BIZ_LIKE",e[e.MMOCAD_CLICKPOS_BIZ_COMMENT=2010]="MMOCAD_CLICKPOS_BIZ_COMMENT",e[e.MMOCAD_CLICKPOS_BIZ_HEADIMAGE=2011]="MMOCAD_CLICKPOS_BIZ_HEADIMAGE",e[e.MMOCAD_CLICKPOS_BIZ_NICKNAME=2012]="MMOCAD_CLICKPOS_BIZ_NICKNAME",e[e.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD=2013]="MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD"}(E||(E={}));var D,O,N,R,M=20002;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.VIDEO=1]="VIDEO",e[e.LIVE=2]="LIVE"}(D||(D={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROOM=1]="ROOM",e[e.RESERVATION=2]="RESERVATION"}(O||(O={})),function(e){e[e.NONE=1]="NONE",e[e.ON_AIR=2]="ON_AIR",e[e.ENDED=3]="ENDED",e[e.IN_PREPARE=4]="IN_PREPARE"}(N||(N={})),function(e){e[e.NONE=0]="NONE",e[e.NICKNAME=1]="NICKNAME",e[e.LINK=2]="LINK",e[e.RESOURCE=3]="RESOURCE",e[e.ACTIONBUTTON=4]="ACTIONBUTTON",e[e.CANVASBUTTON=5]="CANVASBUTTON",e[e.TAGBUTTON=6]="TAGBUTTON"}(R||(R={}))},5223:(e,t,n)=>{"use strict";n.d(t,{S3:()=>p,S0:()=>h,v3:()=>g,uj:()=>v,lv:()=>m,SQ:()=>b,NN:()=>w});var r=n(2363),i=n(6301),o=n(8114),a=n(999),s=n(968),c=n(4642),u=n(1957),l=n(8947),d=n(708),f=n(2186),p={startTime:new Date,gameAppId:"",deviceOrientation:"",screenWidth:0,screenHeight:0,systemVersion:"",wechatVersion:"",SDKVersion:"",SDKVersionTime:"",envVersion:"",brand:"",model:"",platform:r.iw,isWaGame:!0,isApp:!1,isIOS:r.cj,isAndroid:r.wZ,isIPad:null,oaid:"",imei:"",idfa:"",common_device_id:"{}",adNetworkType:""},h={enterForegroundTime:new Date,gameDuration:0,currentScene:1011,weappPath:"index.html",lastWebviewId:0,currentWebviewId:0,currentOpenType:""},g=function(){return(0,d.ei)(p,["oaid","imei","idfa","common_device_id"])},v=function(){if(!p.isWaGame){var e=(0,i.xI)();p.screenWidth=e.screenWidth,p.screenHeight=e.screenHeight,p.deviceOrientation=p.screenWidth>p.screenHeight?"landscape":"portrait"}return p.deviceOrientation},_=function(){},m=function(){return _()},y=function(){return new Promise((function(e){_=e}))},b=new Promise((function(e){l.Z.onReady((function(){var t;p.startTime=new Date,p.deviceOrientation=(0,d._t)()||"",p.envVersion=l.Z.envVersion;var n=(0,i.Oo)(),c=(0,i.Ew)();p.screenWidth=c.screenWidth||0,p.screenHeight=c.screenHeight||0,p.systemVersion=n.system,p.wechatVersion=n.version,p.SDKVersion=n.SDKVersion,p.brand=n.brand,p.model=n.model,p.isIPad=null===(t=n.model)||void 0===t?void 0:t.includes("iPad"),p.isWaGame=(0,s.aI)(),p.isApp=(0,s.N0)();try{p.gameAppId=l.Z.accountInfo.appId,p.SDKVersionTime=__libVersionInfo__.updateTime}catch(e){}Promise.all([new Promise((function(e){(0,o.yx)((function(t){p.oaid=t,e()}))})),new Promise((function(e){(0,o.dz)().then((function(t){var n=t.imei,i=t.oaid,o=t.commonid;r.cj?p.idfa=n:r.wZ&&(p.oaid=i,p.imei=n),p.common_device_id=o||"{}",e(),y().then((function(){(0,a.r)(f.IDKEY.GET_DEVICEINFO_SUCCESS)}))})).catch((function(t){e(),y().then((function(){(0,a.r)(f.IDKEY.GET_DEVICEINFO_ERROR,t)}))}))}))]).then((function(){return e(p)}))}))})),w=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];p[r]=e[r]}};try{(0,u.H)((function(e){var t=e.webviewId,n=e.openType,r=e.path;p.isWaGame||(h.lastWebviewId=h.currentWebviewId,h.currentWebviewId=t||0,h.currentOpenType=n,h.weappPath=r)}))}catch(e){}(0,c.dN)((function(e){var t=e.scene;h.enterForegroundTime=new Date,h.currentScene=t})),(0,c.vv)((function(){h.gameDuration+=Date.now()-h.enterForegroundTime.getTime()}))},2186:(e,t,n)=>{"use strict";n.d(t,{F:()=>r.F,CrtSize:()=>i.CrtSize,DestType:()=>i.DestType,IDKEY:()=>i.IDKEY,LiveVideoMode:()=>i.LiveVideoMode,LiveVideoSubMode:()=>i.LiveVideoSubMode,ProductType:()=>i.ProductType});var r=n(350),i=n(13);n(8339)},2158:()=>{},13:(e,t,n)=>{"use strict";n.d(t,{CrtSize:()=>o.W,DestType:()=>o.z5,IDKEY:()=>o.IN,LiveVideoMode:()=>o.fr,LiveVideoSubMode:()=>o.EM,ProductType:()=>o.kv});var r=n(2158);n.o(r,"CrtSize")&&n.d(t,{CrtSize:function(){return r.CrtSize}}),n.o(r,"DestType")&&n.d(t,{DestType:function(){return r.DestType}}),n.o(r,"IDKEY")&&n.d(t,{IDKEY:function(){return r.IDKEY}}),n.o(r,"LiveVideoMode")&&n.d(t,{LiveVideoMode:function(){return r.LiveVideoMode}}),n.o(r,"LiveVideoSubMode")&&n.d(t,{LiveVideoSubMode:function(){return r.LiveVideoSubMode}}),n.o(r,"ProductType")&&n.d(t,{ProductType:function(){return r.ProductType}});var i=n(6010);n.o(i,"CrtSize")&&n.d(t,{CrtSize:function(){return i.CrtSize}}),n.o(i,"DestType")&&n.d(t,{DestType:function(){return i.DestType}}),n.o(i,"IDKEY")&&n.d(t,{IDKEY:function(){return i.IDKEY}}),n.o(i,"LiveVideoMode")&&n.d(t,{LiveVideoMode:function(){return i.LiveVideoMode}}),n.o(i,"LiveVideoSubMode")&&n.d(t,{LiveVideoSubMode:function(){return i.LiveVideoSubMode}}),n.o(i,"ProductType")&&n.d(t,{ProductType:function(){return i.ProductType}});var o=n(8339)},5185:()=>{},3592:()=>{},767:()=>{},6010:()=>{},5889:(e,t,n)=>{"use strict";n.d(t,{Component:()=>E,A:()=>Re,calculateDynamicStyle:()=>be,convertComputableStyle:()=>Ne,convertStyle:()=>Pe,emitComponentProperty:()=>ne,innerUsage:()=>x,mergeStyles:()=>De,percentProperties:()=>Ie,render:()=>Q,unmount:()=>te,updateRender:()=>ee});var r=n(9583),i=n(9727),o=n.n(i),a=n(3379),s=n.n(a),c=n(1503),u=n.n(c),l=n(572),d=n.n(l),f=n(6885),p=n.n(f),h=n(12),g=n.n(h),v=n(8068),_=n(3356),m=n.n(_),y=n(7163),b=n.n(y),w=n(5843),I=n.n(w),S=n(7015),C=n.n(S),T=function(e){for(var t=Array.isArray(e)?e[0]:e;t.parent&&t.parent!==Re&&t.parent.referComponent;)t=t.parent;return t},E=function(){function e(t){b()(this,e),this.state={},this.style={},this.isComponent=!0,this._hasUnmount=!1,this._eventHandler={},this._stateQueue={},this._setStateTimer=null,this._setStyleTimer=null,this._manualStyle={},this._subComponents=[],this._rootElement=void 0,this._elementMap={},this.props=void 0,this.parent=null,this.props=t}var t;return I()(e,[{key:"setState",value:function(e,t){var n=this;this._stateQueue=this._stateQueue||{};for(var r=!1,i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];e[a]!==this.state[a]&&(r=!0)}r?(Object.assign(this._stateQueue,e),this._setStateTimer&&clearTimeout(this._setStateTimer),this._setStateTimer=setTimeout(m()(C().mark((function e(){var r,i,o,a,s;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n._setStateTimer=null,r=!1,i=0,o=Object.keys(n._stateQueue);i<o.length;i++)a=o[i],s=n._stateQueue[a],n.state[a]!==s&&(r=!0);if(r){e.next=5;break}return e.abrupt("return");case 5:return ne(n,"updateState",u()(u()({},n.state),n._stateQueue)),Object.assign(n.state,n._stateQueue),ee(n),be(T(n._rootElement)),e.next=11,Re.nextLayout();case 11:null==t||t(n.state,n.props);case 12:case"end":return e.stop()}}),e)}))),0)):null==t||t(this.state,this.props)}},{key:"ready",value:function(e){}},{key:"updatedProps",value:function(){}},{key:"render",value:function(){return""}},{key:"_unmountComponent",value:function(){if(!this._hasUnmount){if(this._hasUnmount=!0,Array.isArray(this._subComponents)){var e,t=s()(this._subComponents);try{for(t.s();!(e=t.n()).done;){e.value._unmountComponent()}}catch(e){t.e(e)}finally{t.f()}}ne(this,"destroy")}}},{key:"getRootElement",value:function(){if(!Array.isArray(this._rootElement))return this._rootElement;throw new Error("You should'nt try getRootElement() in component with virtual root")}},{key:"getRootElements",value:function(){return this._rootElement}},{key:"getRootComponent",value:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"getSubComponents",value:function(){return this._subComponents}},{key:"getElementById",value:function(e){return this._elementMap[e]?this._elementMap[e]:null}},{key:"getEventHandler",value:function(e){return this._eventHandler[e]}},{key:"setStyle",value:(t=m()(C().mark((function e(t,n){var r,i,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.getElementById(t),i=this._manualStyle,t&&n&&(r&&Object.assign(r.style,n),i[t]=i[t]||{},Object.assign(i[t],n)),e.next=5,Promise.resolve();case 5:return o=this.getRootComponent(),e.next=8,o.requestLayout();case 8:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"requestLayout",value:function(){var e=this,t=Array.isArray(this._rootElement)?this._rootElement[0]:this._rootElement;return new Promise((function(n){e._setStyleTimer&&clearTimeout(e._setStyleTimer),e._setStyleTimer=setTimeout((function(){e._setStyleTimer=null,be(T(e._rootElement)),Promise.race([null==t?void 0:t.nextUpdate(),(0,v.Vs)(200)].filter((function(e){return e}))).then((function(){return n()}))}),0)}))}},{key:"_bindEvent",value:function(e,t,n){return this._eventHandler[e]=this._eventHandler[e]||{},this._eventHandler[e][t]=this._eventHandler[e][t]||new Set,this._eventHandler[e][t].add(n),n}},{key:"_unbindEvent",value:function(e,t,n){var r,i;return!(null===(r=this._eventHandler[e])||void 0===r||null===(i=r[t])||void 0===i||!i.has(n))&&(this._eventHandler[e][t].delete(n),0===this._eventHandler[e][t].size&&delete this._eventHandler[e][t],0===Object.keys(this._eventHandler[e]).length&&delete this._eventHandler[e],!0)}},{key:"onClick",value:function(e,t){return this._bindEvent(e,"click",t)}},{key:"offClick",value:function(e,t){return this._unbindEvent(e,"click",t)}},{key:"onReady",value:function(e,t){return this._bindEvent(e,"ready",t)}},{key:"offReady",value:function(e,t){return this._unbindEvent(e,"ready",t)}},{key:"onTouchstart",value:function(e,t){return this._bindEvent(e,"touchstart",t)}},{key:"offTouchstart",value:function(e,t){return this._unbindEvent(e,"touchstart",t)}},{key:"onTouchmove",value:function(e,t){return this._bindEvent(e,"touchmove",t)}},{key:"offTouchmove",value:function(e,t){return this._unbindEvent(e,"touchmove",t)}},{key:"onTouchend",value:function(e,t){return this._bindEvent(e,"touchend",t)}},{key:"offTouchend",value:function(e,t){return this._unbindEvent(e,"touchend",t)}},{key:"onTouchcancel",value:function(e,t){return this._bindEvent(e,"touchcancel",t)}},{key:"offTouchcancel",value:function(e,t){return this._unbindEvent(e,"touchcancel",t)}},{key:"onWaiting",value:function(e,t){return this._bindEvent(e,"waiting",t)}},{key:"offWaiting",value:function(e,t){return this._unbindEvent(e,"waiting",t)}},{key:"onPlay",value:function(e,t){return this._bindEvent(e,"play",t)}},{key:"offPlay",value:function(e,t){return this._unbindEvent(e,"play",t)}},{key:"onPause",value:function(e,t){return this._bindEvent(e,"pause",t)}},{key:"offPause",value:function(e,t){return this._unbindEvent(e,"pause",t)}},{key:"onEnded",value:function(e,t){return this._bindEvent(e,"ended",t)}},{key:"offEnded",value:function(e,t){return this._unbindEvent(e,"ended",t)}},{key:"onTimeUpdate",value:function(e,t){return this._bindEvent(e,"timeUpdate",t)}},{key:"offTimeUpdate",value:function(e,t){return this._unbindEvent(e,"timeUpdate",t)}},{key:"onError",value:function(e,t){return this._bindEvent(e,"error",t)}},{key:"offError",value:function(e,t){return this._unbindEvent(e,"error",t)}},{key:"onProgress",value:function(e,t){return this._bindEvent(e,"progress",t)}},{key:"offProgress",value:function(e,t){return this._unbindEvent(e,"progress",t)}},{key:"onFullScreenChange",value:function(e,t){return this._bindEvent(e,"fullScreenChange",t)}},{key:"offFullScreenChange",value:function(e,t){return this._unbindEvent(e,"fullScreenChange",t)}}]),e}();E.isComponent=!0,E.subComponents={};var k,x=function(e){return e},A=n(3595);!function(e){e.waiting="waiting",e.play="play",e.pause="pause",e.ended="ended",e.timeUpdate="timeUpdate",e.error="error",e.progress="progress",e.fullScreenChange="fullScreenChange",e.loadedMetaData="loadedMetaData"}(k||(k={}));var P=n(4742),D=n.n(P),O=n(7541),N=n.n(O),R=function(e){D()(n,e);var t=N()(n);function n(){return b()(this,n),t.apply(this,arguments)}return I()(n,[{key:"render",value:function(){return this.props.children}}]),n}(E);R.isFragment=!0;var M="Fragment",L={view:r.G7,text:r.xv,image:r.Ee,video:r.nk},B=function(e){return e.name[0]>="A"&&e.name[0]<="Z"},F=new WeakMap,j=function(e,t){var n=t.referComponent,r={children:t.children},i="getSubComponentProps",o=[];if(e.getProps){var a=e.getProps.split(":"),s=p()(a);i=s[0],o=s.slice(1)}Object.assign(r,ne.apply(void 0,[n,i,t.name].concat(d()(o)))||{});for(var c=0,u=Object.keys(e);c<u.length;c++){var l=u[c],f=e[l];["getProps","children"].includes(l)||(r[l]=f)}return r.children=t.children,r},W=function(e,t,n){if(!n.isComponent)throw new Error("class ".concat(e.name," is not a component, please ensure extend BaseComponent"));return Q(n,j(t,e),!1,e.referComponent)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:V(e),n=e.referComponent,r=t.id,i=(("string"==typeof t.class?t.class:"")||"").split(/\s+/).filter(Boolean),o=u()({},t);r&&(o.name=r),delete o.id,o.style=De({classList:i,name:r,referComponent:n});var a=null!=o.bubbleEvent,c=L[e.name],l=new c(o);if(l.isBubbleEventSet=a,Object.assign(l,{classList:i,referComponent:n,key:t.key||null}),r&&n&&n.getEventHandler(r))for(var d=0,f=Object.keys(n.getEventHandler(r));d<f.length;d++){var p=f[d],h=n.getEventHandler(r)[p];if(p in k){if("video"===e.name){var g,v=s()(h);try{for(v.s();!(g=v.n()).done;){var _=g.value,m="on".concat(p[0].toUpperCase()).concat(p.slice(1)),y=l[m];null==y||y.call(l,_)}}catch(e){v.e(e)}finally{v.f()}}}else{var b,w=s()(h);try{for(w.s();!(b=w.n()).done;){var I=b.value;l.on(p,I)}}catch(e){w.e(e)}finally{w.f()}}}return null!=r&&(x(n)._elementMap[r]=l),l},V=function(e){for(var t={},n=0,r=Object.keys(e.attributes);n<r.length;n++){var i=r[n],o=e.attributes[i],a=(0,v.um)(i);t[a]=o,/\{\{.+\}\}/.test(o)||("true"===o?t[a]=!0:"false"===o?t[a]=!1:"id"===a?t.id=(0,v.um)(o):t[a]=o)}return t},G=function(e){var t=e.constructor.subComponents||[],n="function"==typeof t?t():t;return u()(u()({},n),{},o()({},M,R))},H=function e(t){if(Array.isArray(t)){var n,r=t.map((function(t){return e(t)})),i={element:null,subComponents:[]},o=s()(r);try{for(o.s();!(n=o.n()).done;){var a,c=n.value,u=c.element,l=c.subComponents;if(u)if(null===i.element&&(i.element=[]),Array.isArray(u))(a=i.element).push.apply(a,d()((0,A.xH)(u)));else i.element.push(u);var f,p=s()(l);try{for(p.s();!(f=p.n()).done;){var h=f.value;i.subComponents.includes(h)||i.subComponents.push(h)}}catch(e){p.e(e)}finally{p.f()}}}catch(e){o.e(e)}finally{o.f()}return i}if(!t)return{element:null,subComponents:[]};var g,v=G(t.referComponent),_=[],m=V(t);if(B(t)){if(!v[t.name])throw new Error("component name ".concat(t.name," does not exists"));var y=W(t,m,v[t.name]);if(!(g=y.getRootElements()))return{element:null,subComponents:[]};_.push(y)}else{var b=U(t,m);t.children.forEach((function(t){var n=e(t),r=n.element,i=n.subComponents;if(r)if(_.push.apply(_,d()(i)),Array.isArray(r)){var o,a=s()(r);try{for(a.s();!(o=a.n()).done;){var c=o.value;b.add(c)}}catch(e){a.e(e)}finally{a.f()}}else b.add(r)})),g=b}return{element:g,subComponents:_}},Z=function(e,t){for(var n=["autoInsert","autoplay","bubbleEvent","clickState","controls","enablePlayGesture","enableProgressGesture","eventType","height","hide","initialTime","live","loop","muted","obeyMuteSwitch","objectFit","parentId","playbackRate","poster","preLoad","scene","showCenterPlayBtn","src","underGameView","width","x","y","value"],r=!1,i=0,o=n;i<o.length;i++){var a=o[i];void 0===t[a]&&(t[a]=void 0)}for(var s=0,c=Object.keys(t);s<c.length;s++){var u=c[s],l=t[u];n.includes(u)&&e[u]!==l&&(e[u]=l,r=!0)}return r},q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n;if(e!==t){if(!r){if(!e||!e.parent)throw new Error("can not find element tree without parent");r=e.parent}if(e&&r.remove(e),t)if(Array.isArray(t)){var i,o=s()(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;r.add(a)}}catch(e){o.e(e)}finally{o.f()}}else r.add(t)}},z=function(e,t){return L[t.name]&&e?e.constructor===L[t.name]:!(null==e||!e.isRootElementOfComponent||!e.referComponent)&&e.referComponent.constructor.name===t.name},Y=function(e,t){var n=V(t),r=t.referComponent,i=G(r),o=e&&z(e,t);if(!B(t)){var a;if(!t.children||0===t.children.length)return e&&o?(Z(e,n),e):U(t,n);if(e&&o)return Z(e,n),J(function(e){return Object.keys(e.children).map((function(t){return e.children[t]}))}(e),t.children),e;var s=H(t),c=s.element,u=s.subComponents;return(a=r.getSubComponents()).push.apply(a,d()(u)),c}var l=null==e?void 0:e.referComponent,f=null==l?void 0:l.constructor;if(l&&f===i[t.name])return Object.assign(x(l).props,j(n,t)),ee(l);var p=r.getSubComponents().indexOf(l);return p>-1&&r.getSubComponents().splice(p,1),l&&ne(l,"destroy"),null==e||e.remove(),W(t,n,i[t.name]).getRootElements()},K=function e(t){return t.reduce((function(t,n){return n.name===M?t.push.apply(t,d()(e(n.children))):t.push(n),t}),[])},J=function(e,t){var n,r=[],i={},o=s()(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.key?i[a.key]=a:r.push(a)}}catch(e){o.e(e)}finally{o.f()}var c,u=s()(K(t));try{for(u.s();!(c=u.n()).done;){var l=c.value,f=l.key,p=null;if(f)i[f]&&(p=i[f],delete i[f]);else for(var h=0,g=Object.keys(r);h<g.length;h++){var v=g[h],_=r[+v];if(_&&z(_,l)){p=_,r.splice(Number(v),1);break}}p||(p=r.shift()||null),e.length&&e[0].parent&&q(p,Y(p,l),e[0].parent)}}catch(e){u.e(e)}finally{u.f()}for(var m=Object.keys(i).reduce((function(e,t){return e.push(i[t]),e}),[]),y=0,b=[].concat(r,d()(m));y<b.length;y++){var w=b[y];null==w||w.remove()}},$=function e(t,n){Array.isArray(t)?t.forEach((function(t){return e(t,n)})):(n(t),t.children.forEach((function(t){return e(t,n)})))},X=function(e,t){$(e,(function(e){e.referComponent||(e.referComponent=t)}))},Q=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=new e(t);i.parent=r;var o=i.render(),a="string"==typeof o?g()(o).root:o;X(a,i);var s=H(a),c=s.element,u=s.subComponents;return x(i)._subComponents=u,c&&(x(i)._rootElement=c,Array.isArray(c)?c.forEach((function(e){e.isRootElementOfComponent=!0})):c.isRootElementOfComponent=!0),ne(i,"ready",c,u),n&&(c&&(Array.isArray(c)?c.forEach((function(e){Re.add(e),be(e)})):(Re.add(c),be(c))),F.set(e,i)),i},ee=function(e,t){t&&Object.assign(x(e).props,t);var n=e.getRootElements(),r=e.render(),i="string"==typeof r?g()(r).root:r;return X(i,e),Array.isArray(n)&&Array.isArray(i)?J(n,i):Array.isArray(n)&&!Array.isArray(i)?J(n,[i]):!Array.isArray(n)&&Array.isArray(i)?J([n],i):Array.isArray(n)||Array.isArray(i)||q(n,Y(n,i)),ne(e,"updatedProps"),n},te=function(e){if(!x(e).isComponent)throw new Error("variable is not a component instance");var t=e.getRootElements();Array.isArray(t)?t.forEach((function(e){return Re.remove(e)})):Re.remove(t),x(e)._unmountComponent(),F.delete(e.constructor)},ne=function(e,t){if("function"==typeof e[t]){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e[t].apply(e,r)}return null},re=(n(74),n(2208)),ie=n.n(re),oe=n(7581),ae=n(708),se=n(1121),ce=["width","height"],ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"column",t=arguments.length>1?arguments[1]:void 0;return["row","column"].indexOf(e)===["width","height"].indexOf(t)},le=function(e,t){return Math.max(e,t)},de=function(e,t){return e+t},fe=function(e){return{width:(e.style.marginLeft||0)+(e.style.marginRight||0),height:(e.style.marginTop||0)+(e.style.marginBottom||0)}},pe=function(e){return{width:(e.style.paddingLeft||0)+(e.style.paddingRight||0),height:(e.style.paddingTop||0)+(e.style.paddingBottom||0)}},he=function(e,t,n){return e&&"px"===e.slice(-2)?parseFloat(e.slice(0,-2))+n:parseFloat(e.slice(0,-1))/100*t+n},ge=function(e,t,n,r,i,o){var a,s=e.parent,c=r[n],u=pe(e)[n],l=t,d=null,f=!1;if(!i&&o>0&&(null==l||o>l)&&(l=o),r.position&&"absolute"===r.position[1]&&null!=l&&(l+=o),c||null==l)c&&"percent"===c[0]&&null!=l?(d=l*c[1]-u,f=!0):c&&"digit"===c[0]&&(d=c[1]-u,f=!0);else if("auto"!==e.style[n])if("absolute"===(null===(a=r.position)||void 0===a?void 0:a[1])){for(var p=0,h=!1,g=0,v="width"===n?["left","right"]:["top","bottom"];g<v.length;g++){var _=v[g];null!=r[_]?"digit"===r[_][0]?p+=Number(r[_][1])||0:"percent"===r[_][0]&&(p+=(Number(r[_][1])||0)*l):h=!0}d=h?null:l-p}else i&&ue(s.style.flexDirection,n)&&e.style.flex>0?d=null:(function(e){return(0,ae.MJ)(e).some((function(e){return null!=e.style.flex&&e.style.flex>0}))}(e)&&(f=!0),d=l-u);return null!=d&&(e.autoFitSize[n].size=d),f},ve=function e(t){var n=(0,ae.ex)(t),i=pe(t);t.autoFitSize={width:{size:null,margin:0,padding:i.width},height:{size:null,margin:0,padding:i.height}};var o,a=t.parent,c=Ne(De(t)),u={width:!1,height:!1},l={width:null,height:null},d=s()(ce);try{for(d.s();!(o=d.n()).done;){var f=o.value,p=c[f],h=n?"width"===f?oe.S.screenWidth:oe.S.screenHeight:a.autoFitSize[f].size,g=n?0:a.autoFitSize[f].padding;!p&&n&&"height"===f&&(h=null),u[f]=ge(t,h,f,c,!0,g)}}catch(e){d.e(e)}finally{d.f()}me(t,c);var v,_=pe(t),m="wrap"===t.style.flexWrap,y=[],b=s()((0,ae.MJ)(t));try{for(b.s();!(v=b.n()).done;){var w=v.value;e(w);var I=fe(w);if("absolute"!==w.style.position){var S,C=s()(ce);try{for(C.s();!(S=C.n()).done;){var T=S.value,E=ue(t.style.flexDirection,T);if(m){if(E){var k="width"===T?"height":"width";y.push([(w.autoFitSize[T].size||0)+w.autoFitSize[T].padding+I[T],(w.autoFitSize[k].size||0)+w.autoFitSize[k].padding+I[k]])}}else{var x=E?de:le;null==w.autoFitSize[T].size&&w.autoFitSize[T].padding<=0&&x===de&&(u[T]=!0),l[T]=x((w.autoFitSize[T].size||0)+w.autoFitSize[T].padding+I[T],l[T]||0)}}}catch(e){C.e(e)}finally{C.f()}}}}catch(e){b.e(e)}finally{b.f()}if(m){var A=0,P=0,D=0,O=0,N=ue(t.style.flexDirection,"width")?"width":"height",R="width"===N?"height":"width";O=u[N]&&null!=t.style[N]?t.style[N]:y.reduce((function(e,t){return e+ie()(t,1)[0]}),0);var M,L=s()(y);try{for(L.s();!(M=L.n()).done;){var B=ie()(M.value,2),F=B[0],j=B[1];D=Math.max(D,j),F+A>O?(P+=D,D=j,A=F):A+=F}}catch(e){L.e(e)}finally{L.f()}P+=D,l[N]=A,l[R]=P}t instanceof r.xv&&(null!=t.autoFitSize.height.size&&u.height||Object.assign(t.autoFitSize.height,{size:t.style.lineHeight||t.style.fontSize||0,padding:_.height}),null!=t.autoFitSize.width.size&&u.width||Object.assign(t.autoFitSize.width,{size:se.Z.getTextWidth(t.value,t.style.fontSize||14)+3,padding:_.width}));var W,U=s()(ce);try{for(U.s();!(W=U.n()).done;){var V=W.value;u[V]||null===l[V]?_[V]>0&&(t.autoFitSize[V].padding=_[V]):Object.assign(t.autoFitSize[V],{size:null!=l[V]?l[V]:null,padding:_[V]})}}catch(e){U.e(e)}finally{U.f()}},_e=function e(t){var n,i=(0,ae.MJ)(t),o=s()(ce);try{for(o.s();!(n=o.n()).done;){var a=n.value,c=ue(t.style.flexDirection,a),u=t.autoFitSize[a].size,l=t.autoFitSize[a].padding;if(null!=u||l){u=u||0;var d,f=0,p=0,h=s()(i);try{for(h.s();!(d=h.n()).done;){var g=d.value,v=g.autoFitSize[a],_=v.size,m=v.margin,y=v.padding;"absolute"!==g.style.position&&(null!=_?f+=_+y+m:g.style.flex&&g.style.flex>0&&(p+=Number(g.style.flex)))}}catch(e){h.e(e)}finally{h.f()}var b,w=s()(i);try{for(w.s();!(b=w.n()).done;){var I,S=b.value,C=Ne(De(S)),T=null;c?T=S.style.flex?(u-f)/le(p,1)*S.style.flex:null:t.style.alignItems&&"stretch"!==t.style.alignItems||(T=u),null==S.autoFitSize[a].size&&T?ge(S,T,a,C,!1,l):"absolute"===(null===(I=C.position)||void 0===I?void 0:I[1])&&ge(S,u,a,C,!1,l)}}catch(e){w.e(e)}finally{w.f()}}}}catch(e){o.e(e)}finally{o.f()}var E,k=s()(i);try{for(k.s();!(E=k.n()).done;){e(E.value)}}catch(e){k.e(e)}finally{k.f()}var x,A=s()(ce);try{for(A.s();!(x=A.n()).done;){var P=x.value,D=t.autoFitSize[P],O=D.size,N=D.padding;null!=O&&t.style[P]!==O+N&&(t.style[P]=O+N)}}catch(e){A.e(e)}finally{A.f()}t instanceof r.xv&&null==t.style.lineHeight&&(t.style.lineHeight=t.style.height)},me=function(e,t){for(var n=e.autoFitSize.width.size,r=e.autoFitSize.height.size,i=0,o=Object.keys(t);i<o.length;i++){var a=o[i],s=t[a];"percent"===s[0]?"horizontal"===Ie[a]&&null!=n?e.style[a]=s[1]*n:"vertical"===Ie[a]&&null!=r&&(e.style[a]=s[1]*r):"normal"===s[0]&&(e.style[a]=s[1])}t.transform&&"transform"===t.transform[0]&&(e.style.left=he(t.transform[1][0],n||0,e.style.left||0),e.style.top=he(t.transform[1][1],r||0,e.style.top||0)),!e.style.lineHeight&&e.parent&&e.parent.style.lineHeight&&(e.style.lineHeight=e.parent.style.lineHeight)},ye=function e(t){var n,r=[["width","left"],["height","top"]],i=s()((0,ae.MJ)(t));try{for(i.s();!(n=i.n()).done;){var o=n.value;e(o);var a,c=s()(r);try{for(c.s();!(a=c.n()).done;){var u,l=ie()(a.value,2),d=l[0],f=l[1];if((o.style.position||null!==(u=o.expandAbsoluteSize)&&void 0!==u&&u.has(d))&&"hidden"!==t.style.overflow){var p=(o.style[d]||0)+(o.style[f]||0);p>(t.style[d]||0)&&(t.style[d]=p,t.expandAbsoluteSize=t.expandAbsoluteSize||new Set,t.expandAbsoluteSize.add(d))}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){i.e(e)}finally{i.f()}},be=function(e){ve(e),_e(e),ye(e)},we=function(e){return Number(e).toString()===e},Ie={left:"horizontal",right:"horizontal",marginLeft:"horizontal",marginRight:"horizontal",paddingLeft:"horizontal",paddingRight:"horizontal",marginTop:"horizontal",marginBottom:"horizontal",paddingTop:"horizontal",paddingBottom:"horizonta",borderRadius:"horizontal",top:"vertical",bottom:"vertical"},Se=/^\s*#[0-9a-fA-F]{3}\s*$/,Ce=/^\s*#[0-9a-fA-F]{3,6}\s*$/,Te=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,Ee=/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/,ke=/px$/,xe=function(e){return"number"==typeof e?e:ke.test(e)?Number(e.replace(ke,""))||0:we(e)?parseInt(e,10):e},Ae=function(e){if("string"==typeof e&&Se.test(e)){var t=e.slice(1),n=ie()(t,3),r=n[0],i=n[1],o=n[2];return"#".concat(r).concat(r).concat(i).concat(i).concat(o).concat(o)}return e},Pe=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],a=e[i];if(["padding","margin"].includes(i)){var s,c=Array.isArray(a)?a:(null==a?"":a).toString().split(/\s+/),u=null,l=null,d=null,f=null;switch(c.length){case 0:continue;case 1:var p=ie()(c,1);u=p[0];var h=ie()(c,1);l=h[0];var g=ie()(c,1);d=g[0];var v=ie()(c,1);f=v[0];break;case 2:var _=ie()(c,2);u=_[0],l=_[1];var m=ie()(c,2);d=m[0],f=m[1];break;case 3:var y=ie()(c,3);u=y[0],l=y[1],d=y[2],f=l;break;case 4:var b=ie()(c,4);u=b[0],f=b[1],d=b[2],l=b[3];break;default:continue}Object.assign(t,(s={},o()(s,"".concat(i,"Top"),xe(u)),o()(s,"".concat(i,"Left"),xe(l)),o()(s,"".concat(i,"Bottom"),xe(d)),o()(s,"".concat(i,"Right"),xe(f)),s))}else if("border"===i){var w=(a||"").toString().split(/\s+/);switch(w.length){case 0:continue;case 1:t.borderColor=Ae(w[0]);continue;case 2:t.borderWidth=xe(w[0]),t.borderColor=Ae(w[1]);continue;case 3:t.borderWidth=xe(w[0]),t.borderColor=Ae(w[2]);continue;default:continue}}else if("background"===i&&Ce.test(e[i]))t.backgroundColor=Ae(e[i]);else if("background"===i&&(Te.test(e[i])||Ee.test(e[i])))t.backgroundColor=e[i];else if("background"===i&&e[i].includes("linear-gradient"))t.backgroundColor=e[i];else if("color"===i&&"string"==typeof a&&Ee.test(a)){var I=Ee.exec(a).slice(1,5).map((function(e){return Number(e)})),S=ie()(I,4),C=S[0],T=S[1],E=S[2],k=S[3],x=function(e){return e.toString(16)};t.color="#".concat(x(C)).concat(x(T)).concat(x(E)),null==e.opacity&&(t.opacity=Number(k))}else if("display"===i&&"none"===e[i])t.hidden=!0;else if("rotate"===i){var A=e[i];t.rotate="string"==typeof A?Number(A.replace("deg",""))||0:A}else t[i]=Ae(xe(e[i]))}return t},De=function(e){var t=x(e.referComponent);if(!t)return Object.assign({},e.style||{});var n,r={},i=t.style||{},o=s()(e.classList||[]);try{for(o.s();!(n=o.n()).done;){var a=n.value;Object.assign(r,Pe(i[a])),Object.assign(r,Pe(i[".".concat(a)]))}}catch(e){o.e(e)}finally{o.f()}return i[e.name]&&Object.assign(r,Pe(i[e.name])),e.name&&t._manualStyle[e.name]&&Object.assign(r,Pe(t._manualStyle[e.name])),r},Oe={percent:/^-?[1-9]\d*(\.\d+)?%$/,translate:/translate\(\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*,\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*\)/},Ne=function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],o=e[i];if(null!=o){var a=o.toString().trim();if((Ie[i]||["width","height"].includes(i))&&Oe.percent.test(a)){var s=parseFloat(a.slice(0,-1))/100;t[i]=["percent",s]}else if(we(a))t[i]=["digit",Number(a)];else if("transform"===i&&a.includes("translate")){var c=Oe.translate.exec(a);c&&(t[i]=["transform",c.slice(1,3)])}else t[i]="string"==typeof o?["normal",a]:["normal",o]}}return t},Re=r.uo},74:()=>{},7581:(e,t,n)=>{"use strict";n.d(t,{S:()=>c,g:()=>u});var r=n(8947),i=n(968),o=n(708),a=n(6301),s=!1,c={},u=function(){return s?Promise.resolve(c):new Promise((function(e){r.Z.onReady((function(){s=!0,c.deviceOrientation=(0,o._t)();var t=(0,a.Ew)();c.screenWidth=t.screenWidth||0,c.screenHeight=t.screenHeight||0,c.isWaGame=(0,i.aI)(),e(c)}))}))}},7871:(e,t,n)=>{"use strict";n.d(t,{v:()=>u});var r=n(7163),i=n.n(r),o=n(4742),a=n.n(o),s=n(7541),c=n.n(s),u=function(e){a()(n,e);var t=c()(n);function n(){return i()(this,n),t.apply(this,arguments)}return n}(n(7937).Z)},3595:(e,t,n)=>{"use strict";n.d(t,{ei:()=>d,Ee:()=>p,Zw:()=>h,U2:()=>g,xH:()=>v,Xh:()=>_});var r=n(572),i=n.n(r),o=n(3379),a=n.n(o),s=n(9727),c=n.n(s),u=n(8676),l=n.n(u),d=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},f=function(e){return e&&"object"===l()(e)&&!Array.isArray(e)};function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var i=n.shift();if(f(e)&&f(i))for(var o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];f(i[s])?(e[s]||Object.assign(e,c()({},s,{})),p(e[s],i[s])):Object.assign(e,c()({},s,i[s]))}return p.apply(void 0,[e].concat(n))}var h=function(e){for(var t=new Set,n=e;n;){var r,o=a()(Object.getOwnPropertyNames(n));try{for(o.s();!(r=o.n()).done;){var s=r.value;t.add(s)}}catch(e){o.e(e)}finally{o.f()}n=Object.getPrototypeOf(n)}return i()(t)},g=function(e,t,n){for(var r="string"==typeof t?t.split("."):t,i=e,o=0;i&&o<r.length;)i=i[r[o]],o+=1;return i||n},v=function e(t){return t.reduce((function(t,n){return Array.isArray(n)?t.push.apply(t,i()(e(n))):t.push(n),t}),[])},_=function(e){return JSON.parse(JSON.stringify(e))}},708:(e,t,n)=>{"use strict";n.d(t,{a3:()=>y,Xh:()=>r.Xh,U2:()=>r.U2,Ze:()=>d,_t:()=>I,Zw:()=>r.Zw,Wz:()=>m,MJ:()=>u,gC:()=>E,Ie:()=>T,ex:()=>s,Ee:()=>r.Ee,ei:()=>r.ei,zJ:()=>l});var r=n(3595),i=n(3379),o=n.n(i),a=n(5889),s=function(e){var t;return e.parent===a.A||!(null!==(t=e.parent)&&void 0!==t&&t.referComponent)},c=function(e){return Object.keys(e.children).map((function(t){return e.children[t]}))},u=function(e){return c(e).filter((function(e){return!0!==(null==e?void 0:e.style.hidden)}))},l=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"downward";"downward"===r&&n(t);var i,a=o()(c(t));try{for(a.s();!(i=a.n()).done;){var s=i.value;e(s,n,r)}}catch(e){a.e(e)}finally{a.f()}"upward"===r&&n(t)},d=function(e,t){var n,i=o()(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=a.path,c=a.value,u=a.condition;if(void 0===u||u){var l=c||(s?(0,r.U2)(e,s):"");if(l)return l}}}catch(e){i.e(e)}finally{i.f()}return null},f=n(2208),p=n.n(f),h=63,g=function(e){var t=e.toString(16).toUpperCase();return t.length<2?"%0".concat(t):"%".concat(t)},v=function(e){if(!e)return"";var t,n=String(e),r=[],i=/[ \r\n!*"'();:@&=+$,/?%#[\]<>{}|`^\\\u0080-\uffff]/,a=o()(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.match(i)){var c=s.codePointAt?s.codePointAt(0):s.charCodeAt(0);c<128?r.push(g(c)):c<2048?r.push([g(192+(c>>6)),g(128+(c&h))].join("")):c<65536?r.push([g(224+(c>>12)),g(128+(c>>6&h)),g(128+(c&h))].join("")):c<2097152&&r.push([g(240+(c>>18)),g(128+(c>>12&h)),g(128+(c>>6&h)),g(128+(c&h))].join(""))}else r.push(s)}}catch(e){a.e(e)}finally{a.f()}return r.join("")},_=function(e){if(!e)return"";for(var t=function(e){if(!e)throw new Error("invalid text")},n=function(e){return String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(e)},r=e.replace(/%[a-fA-F0-9]{2}/gi,(function(e){return String.fromCharCode(parseInt(e.replace("%",""),16))})),i=0,o="";i<r.length;){var a=r.charCodeAt(i);if(a<128)o+=n(a),i+=1;else if(a>=192&&a<224){t(i+1<r.length),o+=n((31&a)<<6|r.charCodeAt(i+1)&h),i+=2}else if(a<240){t(i+2<r.length);var s=r.charCodeAt(i+1),c=r.charCodeAt(i+2);o+=n((15&a)<<12|(s&h)<<6|c&h),i+=3}else{t(i+3<r.length);var u=r.charCodeAt(i+1),l=r.charCodeAt(i+2),d=r.charCodeAt(i+3);o+=n([(7&a)<<18,(u&h)<<12,(l&h)<<6,d&h].reduce((function(e,t){return e|t}),0)),i+=4}}return o},m=function(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,r=e.substring(n);r.indexOf("#")>-1&&(r=r.substring(0,r.indexOf("#")));var i,a=r.split("&"),s=o()(a);try{for(s.s();!(i=s.n()).done;){var c=i.value.split("="),u=p()(c,2),l=u[0],d=u[1];t[l]=_(d)}}catch(e){s.e(e)}finally{s.f()}}return t},y=function(e,t){if(!e)return"";if(!t)return e;var n=e.split("#"),r=n[0].indexOf("?")>-1?"&":"?",i="",a=Object.keys(t);if(a.length>0){var s,c=o()(a);try{for(c.s();!(s=c.n()).done;){var u=s.value;i=i.concat("".concat(u,"=").concat(v(t[u]),"&"))}}catch(e){c.e(e)}finally{c.f()}return i.length>0&&(i=i.substring(0,i.length-1)),n[0]+r+i+(n[1]?"#".concat(n[1]):"")}return e},b=n(6301),w=n(8947),I=function(){var e=(0,b.Ew)();return e.screenWidth&&e.screenHeight?e.screenWidth>e.screenHeight?"landscape":"portrait":w.Z.deviceOrientation&&/^landscape/.test(w.Z.deviceOrientation)?"landscape":w.Z.deviceOrientation||"portrait"},S=n(2186),C=function(e){return e===S.LiveVideoMode.LIVE},T=function(e,t){return C(e)&&t===S.LiveVideoSubMode.ROOM},E=function(e,t){return C(e)&&t===S.LiveVideoSubMode.RESERVATION}},8794:(e,t,n)=>{"use strict";n.d(t,{op:()=>Q,OP:()=>ce,O5:()=>ue,al:()=>oe,vA:()=>ne,P1:()=>ae,dK:()=>$,kq:()=>U,oh:()=>q,Mp:()=>G,DX:()=>J,jO:()=>te,ZP:()=>le});var r=n(1503),i=n.n(r),o=n(7163),a=n.n(o),s=n(5843),c=n.n(s),u=n(7615),l=n.n(u),d=n(3646),f=n.n(d),p=n(862),h=n.n(p),g=n(4742),v=n.n(g),_=n(7541),m=n.n(_),y=n(2208),b=n.n(y),w=n(9727),I=n.n(w),S=n(3356),C=n.n(S),T=n(3379),E=n.n(T),k=n(7015),x=n.n(k),A=n(8392),P=n(5889),D=n(9390),O=n(708),N=n(2363),R=n(8068),M=n(2958),L=n(1121),B=n(5223),F={},j=N.iw,W=function(e){v()(o,e);var t,n,r=m()(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.autoRegister,s=void 0===i||i;a()(this,o),(t=r.call(this,e)).adCustomId=void 0,t.adProxy=void 0,t.adData=void 0,t.adDatas=void 0,t.template=void 0,t.manager=void 0,t.reporter=void 0,t.emitter=void 0,t.id=void 0,t.options=void 0,t.data=void 0,t.events=void 0,t.lifecycle=void 0,t.innerStyles=void 0,t.animations=void 0,t.idPrefix=void 0,t.forType=void 0,t.forItem=void 0,t.forIndex=void 0,t.ratio=1,t.tplConfig=null,t.bubbleEvent=void 0,t.adCustomListener=null,t.clickCallbackMap=new WeakMap,t.handleCommonClick=function(e){t.doActions(t.events.tap,{event:e})},t.handleAdCustomAction=function(e){e.targetid===t.id&&t.doCommonAction(e)},t.adCustomId=e.adCustomId,t.adProxy=e.adProxy,t.adData=e.adData,t.adDatas=e.adDatas,t.manager=e.manager,t.reporter=e.reporter,t.emitter=e.emitter,t.idPrefix=e.idPrefix||"",t.forType=e.forType||M.bk.NONE,t.forItem=e.forItem,t.forIndex=e.forIndex,e.ratio&&(t.ratio=e.ratio),t.checkSize();var c=e.template||{};t.template=c,t.id="".concat(t.adCustomId,"-").concat(t.idPrefix).concat(t.template.id);var u=c.options||{};t.options=u,t.data=u.data||{},t.events=u.events||{},t.lifecycle=u.lifecycle||{},t.innerStyles=u.innerStyles||{},t.animations=u.animations||{},t.bubbleEvent=void 0===u.bubbleEvent||u.bubbleEvent;var l=t.getDataValue("_bubbleEvent");return void 0!==l&&(t.bubbleEvent=l),s&&t.bindCommonEvents(),t}return c()(o,[{key:"ready",value:function(e){this.emitComponentLifeCycle("onInit"),e&&(e.adId=this.id)}},{key:"updatedProps",value:function(){this.updateBubbleEvent()}},{key:"destroy",value:function(){this.emitComponentLifeCycle("onDestroy"),this.offClick("container",this.handleCommonClick),this.emitter.off("adCustomAction",this.handleAdCustomAction),this.removeAdCustomListener()}},{key:"bindCommonEvents",value:function(){this.onClick("container",this.handleCommonClick),this.emitter.on("adCustomAction",this.handleAdCustomAction)}},{key:"getCommonSubComponentProps",value:function(){return{template:this.template,adCustomId:this.adCustomId,emitter:this.emitter,adProxy:this.adProxy,reporter:this.reporter,adData:this.adData,adDatas:this.adDatas,adPosition:this.props.adPosition,systemInfo:this.props.systemInfo,manager:this.manager,idPrefix:this.idPrefix||"",forType:this.forType,forIndex:this.forIndex,forItem:this.forItem,ratio:this.ratio,scope:this.props.scope}}},{key:"getDataValue",value:function(e,t,n){var r=t||this.data,i=r["".concat(e,"Expr")];return i?this.run(i,null==n?void 0:n.args):r[e]}},{key:"getDataValueWithDefault",value:function(e,t,n,r){var i=n?this.getDataValue(e,n,r):this.getDataValue(e);return void 0===i?t:i}},{key:"getAdData",value:function(){return this.forType===M.bk.ADS&&null!=this.forIndex?this.getAdDatas()[this.forIndex]||{}:this.adData}},{key:"getAdDatas",value:function(){return this.adDatas||[]}},{key:"addAdCustomListener",value:function(e){var t=this;this.removeAdCustomListener(),this.adCustomListener=function(n){n.adCustomId===t.adCustomId&&(null==e||e(n))},this.emitter.on("adCustomEvent",this.adCustomListener)}},{key:"removeAdCustomListener",value:function(){this.adCustomListener&&this.emitter.off("adCustomEvent",this.adCustomListener)}},{key:"setRatio",value:function(e){this.ratio=e}},{key:"checkSize",value:function(){var e,t,n=this.template;if(!n||"root"===n.type){this.tplConfig=(null==n?void 0:n.tplConfig)||{};var r=this.props.adPosition||{};if(this.tplConfig){var i,o,a=this.tplConfig,s=(this.props.adPosition||{}).width;if(null==s)s=(null===(i=this.props)||void 0===i||null===(o=i.systemInfo)||void 0===o?void 0:o.screenWidth)||B.S3.screenWidth;s=Number(s);var c=a.minWidth||0,u=a.maxWidth||0,l=a.baseWidth||375,d=Math.min((null===(e=this.props)||void 0===e||null===(t=e.systemInfo)||void 0===t?void 0:t.screenWidth)||B.S3.screenWidth,Math.max(c,s));u&&(d=Math.min(d,u)),0===d&&this.setRatio(l/l),r.width=d,this.setRatio(d/l)}}}},{key:"emitAdCustomEvent",value:function(e,t){this.emitter.emit("adCustomEvent",{adCustomId:this.adCustomId,action:e,value:t})}},{key:"emitComponentEvent",value:function(e,t){var n=this.events[e];null!=n&&n.length&&this.doActions(n,t||{})}},{key:"emitComponentLifeCycle",value:function(e,t){var n=this.lifecycle[e];null!=n&&n.length&&this.doActions(n,t)}},{key:"doActions",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=E()(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.force&&!i.targetid?this.doCommonAction({args:n,payload:i}):this.emitter.emit("adCustomAction",{fromid:this.id,targetid:i.targetid?"".concat(this.adCustomId,"-").concat(i.targetid):this.id,args:n,payload:i})}}catch(e){r.e(e)}finally{r.f()}}},{key:"doCommonAction",value:function(e){var t=this,n=e.payload,r=e.args,i=n.delay,o=void 0===i?0:i,a=n.expr,s=void 0===a?void 0:a,c=function(){if(!s||t.run(s,r))switch(n.action){case M.aO.SETSTYLE:var i=n.value;if(i.styleExpr)for(var o=0,a=Object.keys(i.styleExpr);o<a.length;o++){var c=a[o];i.style[c]=t.run(i.styleExpr[c],r)}t.setStyle(i.id,i.style);break;case M.aO.SETEXPRVARS:var u=n.value.key,l=t.getDataValue("value",n.value);t.getExprInnerVars()[u]=l;break;case M.aO.REPORTIDKEY:break;case M.aO.TRIGGEREVENT:var d=n.value,f=d.detail,p=void 0===f?{}:f,h=d.eventName;try{if(null!=r&&r.event&&(p.rawDetail=JSON.stringify(r.event)),n.value.detailExpr)for(var g=0,v=Object.keys(n.value.detailExpr);g<v.length;g++){var _=v[g],m=n.value.detailExpr[_];p[_]=t.run(m,r)}}catch(e){}t.emitAdCustomEvent(M.A$.TRIGGEREVENT,{eventName:h,detail:p});break;case M.aO.REPORTMMDATA:var y=n.value,b=y.data,w=y.dataExpr,I=y.id;if(w)for(var S=0,C=Object.keys(w);S<C.length;S++){var T=C[S],E=w[T];b[T]=t.run(E,r)}t.emitAdCustomEvent(M.A$.REPORTMMDATA,{id:I,data:b});break;case M.aO.ANIMATE:var k=n.value,x=k.id,A=k.animation;t.doAnimation({id:x,animationName:A});break;case M.aO.TRIGGERBTNCLICK:var P,D=null==r?void 0:r.event;if(D)t.emitAdCustomEvent(M.A$.BTNTAP,{event:D,isHandleDownload:(null===(P=n.value)||void 0===P?void 0:P.isHandleDownload)||!1});break;case M.aO.LANDAD:var O=null==r?void 0:r.event;O&&t.emitAdCustomEvent(M.A$.LANDAD,{index:t.getDataValueWithDefault("index",0,n.value,{args:r}),event:O});break;case M.aO.SPLASHSKIPAD:var N=null==r?void 0:r.event;N&&t.emitAdCustomEvent(M.A$.SPLASHSKIPAD,{event:N});break;case M.aO.REPORTADMONITORDATA:var R=n.value,L=R.id,B=R.key,F=t.getDataValue("extInfo",n.value,{args:r});t.emitAdCustomEvent(M.A$.REPORTADMONITORDATA,{id:L,key:B,extInfo:F});break;case M.aO.REWARDEDVIDEODYNAMIC:var j=n.value.list;t.emitAdCustomEvent(M.A$.REWARDEDVIDEODYNAMIC,{list:j});break;default:"doAction"in t&&"function"==typeof t.doAction&&t.doAction(e)}};o?setTimeout(c,o):c()}},{key:"run",value:function(e,t){var n=this.getInnerFunction(),r=i()(i()({},this.getScope()),n);return(0,D.K)(e,t?i()({$args:t},r):r,n)}},{key:"getElementById",value:function(e){if(!e){var t,n,r=null!==(t=null===(n=this.getRootElement())||void 0===n?void 0:n.parent)&&void 0!==t?t:null;return r===P.A?this.getRootElement():r}return"$$"===e?this.getRootElement():f()(h()(o.prototype),"getElementById",this).call(this,e)}},{key:"doAnimation",value:(n=C()(x().mark((function e(t){var n,r,a,s,c,u,l,d,f,p,h,g,v,_,m,y,b,w,I,S,C,T,E,k,A;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,r=t.emitEvent,a=void 0===r||r,s=t.animationName,c=t.animation,u=!c&&s?this.animations[s]:c,l=this.getElementById(n),u&&l){e.next=5;break}return e.abrupt("return");case 5:if(d=u.keys,f=u.duration,p=u.easing,!(((null==d?void 0:d.length)||0)<2)){e.next=9;break}return e.abrupt("return");case 9:h=0,g=0,v=Object.keys(d);case 11:if(!(g<v.length)){e.next=31;break}if(_=v[g],m=d[+_],y=m.offset,b=m.opacity,w=m.left,I=m.top,S=m.rotate,C=m.scaleX,T=m.scaleY,E=f*y,k=(0,P.convertStyle)({opacity:b,left:w,top:I,rotate:S,scaleWidth:C,scaleHeight:T}),!(E<=0)){e.next=22;break}return e.next=20,this.setStyle(n,k);case 20:e.next=28;break;case 22:return(A=i()(i()({},k),{},{easing:p,duration:E-h})).left=k.left,A.top=k.top,e.next=27,o.animate(l,A);case 27:h=E;case 28:g++,e.next=11;break;case 31:if(!s||!a){e.next=34;break}return e.next=34,this.emitComponentEvent(M.H.ANIMATIONEND,{animation:s});case 34:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"updateInnerStyle",value:function(){if(this.innerStyles)for(var e=0,t=Object.keys(this.innerStyles);e<t.length;e++){var n=t[e],r=this.innerStyles[n];r.expr&&!this.run(r.expr)||this.updateStyle(r.style,n)}}},{key:"setStyle",value:(t=C()(x().mark((function e(t,n){var r,i,a,s,c,u,l;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getDataValue("_useApx")?this.convertToApxRatio(n):n,"$$"===(i=t)&&(i=null===(a=this.getRootElement())||void 0===a?void 0:a.name),!r){e.next=11;break}for(s=0,c=Object.keys(r);s<c.length;s++)u=c[s],r[u]=this.convertApxStyle(r[u]);if(!i){e.next=10;break}return e.next=8,f()(h()(o.prototype),"setStyle",this).call(this,i,r);case 8:e.next=11;break;case 10:null===(l=this.parent)||void 0===l||l.setStyle("container",r);case 11:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"convertApxStyle",value:function(e){var t=this;return e&&"string"==typeof e?e.replace(/([+-]?\d+(?:\.\d+)?)apx/g,(function(e,n){return"".concat(Number(n*t.ratio),"px")})):e}},{key:"updateStyle",value:function(e,t){if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],o=i,a=e[i];if(i.includes("Expr")){var s=i.split("Expr");if(2===s.length)o=b()(s,1)[0],a=this.run(a)}this.setStyle(t,I()({},o,a))}}},{key:"removeInnerStyle",value:function(){if(this.innerStyles)for(var e=0,t=Object.keys(this.innerStyles);e<t.length;e++){var n=t[e],r=this.innerStyles[n];this.removeStyle(r.style,n)}}},{key:"removeStyle",value:function(e,t){if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];this.setStyle(t,I()({},i,null))}}},{key:"getScope",value:function(){var e,t;return{$ad:this.getAdData(),$ads:this.getAdDatas(),$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:(null===(e=this.props)||void 0===e?void 0:e.systemInfo)||{},ua:"",ratio:this.ratio,time:Date.now()},$for:{index:this.forIndex,item:this.forItem},$scope:(null===(t=this.props)||void 0===t?void 0:t.scope)||{}}}},{key:"getExprInnerVars",value:function(){return void 0===F[this.adCustomId]&&(F[this.adCustomId]={}),F[this.adCustomId]}},{key:"getInnerFunction",value:function(){var e=this.getExprInnerVars();return{"#getVar":function(t){return e[t]},"#measureText":function(e,t){return L.Z.getTextWidth(e,t)}}}},{key:"updateBubbleEvent",value:function(){var e=this.getRootElement();e&&(0,O.zJ)(e,(function(e){if(!e.isBubbleEventSet)if(e.isRootElementOfComponent){var t=e.referComponent;e.bubbleEvent=!t||t.bubbleEvent}else e.bubbleEvent=!0}))}},{key:"onClick",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.handleTriggerClick,a=void 0===i||i,s=r.handleClickLimit,c=void 0===s||s,u=r.isReport,l=void 0!==u&&u,d=r.clickType,p=void 0===d?0:d,g=function(e){null!==n.reporter&&(a&&!n.reporter.judgeTriggerClick(e,l)||c&&n.reporter.isClickLimit(e,p))||t(e)};return this.clickCallbackMap.set(t,g),f()(h()(o.prototype),"onClick",this).call(this,e,g)}},{key:"offClick",value:function(e,t){return this.clickCallbackMap.has(t)?f()(h()(o.prototype),"offClick",this).call(this,e,this.clickCallbackMap.get(t)):f()(h()(o.prototype),"offClick",this).call(this,e,t)}},{key:"checkUseApx",value:function(){if(this.getDataValue("_useApx"))for(var e=0,t=Object.keys(this.style);e<t.length;e++){var n=t[e];this.style[n]=this.convertToApxRatio(this.style[n])}}},{key:"convertToApxRatio",value:function(e){for(var t=this.ratio,n=/(\d+)px/g,r={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];if(null!==M.fc&&void 0!==M.fc&&M.fc.includes(a)){var s=e[a],c=s;"number"==typeof s?c=s*t:"string"==typeof s?c=s.replace(n,(function(e,n){var r=Number(n);return Number.isNaN(r)?e:"".concat(r*t,"px")})):Array.isArray(s)&&null!=s&&s.every((function(e){return"number"==typeof e}))&&(c=s.map((function(e){return e*t}))),r[a]=c}else r[a]=e[a]}return r}}],[{key:"animate",value:function(e,t){var n=t.left,r=t.top,i=t.scaleWidth,o=t.scaleHeight,a=t.opacity,s=t.rotate,c=void 0===s?0:s,u=t.easing,l=void 0===u?"ease-in":u,d=t.duration,f=void 0===d?500:d,p=new Promise((function(t,s){(0,A.IN)("animateCoverView",{dest:e.dest,viewId:e.id,easing:l,duration:f,finalStyle:{left:n,top:r,opacity:a,rotate:c,scaleX:i,scaleY:o},success:t,fail:s})}));return"devtools"===j&&(p=Promise.all([p,(0,R.Vs)(f)])),p}}]),o}(P.Component),U=function(e){v()(n,e);var t=m()(n);function n(e){var r,i;if((a()(this,n),(r=t.call(this,e,{autoRegister:!1})).style={blank:{width:0,height:0},linearGradient:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},".reverse":{rotate:180}},r.isShow=void 0,r.isLinearGradient=!1,r.isLinearGradientReverse=!1,r.linearGradientSrc="https://wxa.wxs.qq.com/images/wxapp/linear_gradient.png",r.linearGradientRe=/^linear-gradient\(rgba\(0,0,0,([\d.]+)\),rgba\(0,0,0,([\d.]+)\)\)$/,r.isShow=r.getDataValueWithDefault("_isShow",!0),r.isShow)&&("feedback"===r.template.type?r.setStyle("container",{display:"inline-block"}):"end"===r.template.type&&r.setStyle("container",{display:"none"}),r.updateStyle(r.template.style||{},"container"),null!==(i=r.template.style)&&void 0!==i&&i.background)){var o=r.linearGradientRe.exec(r.template.style.background.replace(/ /g,""));if(o){var s=o.slice(1),c=b()(s,2),u=c[0],l=c[1];r.isLinearGradient=!0,Number(u)>Number(l)&&(r.isLinearGradientReverse=!0)}}return r}return c()(n,[{key:"getSubComponentProps",value:function(){return this.getCommonSubComponentProps()}},{key:"render",value:function(){var e=this.props.template,t=null;return"for"===e.type?"<CustomFor></CustomFor>":(["layout","image","text","button","video","feedback","end","carousel","countdown"].includes(e.type)&&(t="Custom".concat(e.type[0].toUpperCase()).concat(e.type.slice(1))),this.isShow&&t?'\n      <view id="container">\n        '.concat(this.isLinearGradient?'\n          <image id="linear-gradient" class="'.concat(this.isLinearGradientReverse?"reverse":"",'" src="').concat(this.linearGradientSrc,'"></image>\n        '):"","\n        <").concat(t,"></").concat(t,">\n      </view>\n    "):'<view id="blank"></view>')}}]),n}(W);U.subComponents=function(){return{CustomLayout:q,CustomText:J,CustomImage:$,CustomButton:Q,CustomVideo:te,CustomFeedback:ne,CustomEnd:oe,CustomFor:ae,CustomCarousel:ce,CustomCountdown:ue}};var V=n(4642),G=function(e){v()(n,e);var t=m()(n);function n(e){var r,i,o,s;a()(this,n),(s=t.call(this,e)).style={body:{zIndex:1,position:"absolute",hidden:!0,opacity:0,flexDirection:"column",alignItems:"center",justifyContent:"center"},".full-size":{width:"100%",height:"100%"},".full":{position:"absolute",left:0,right:0,top:0,bottom:0},".tip-container":{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",hidden:!0},".video-close-tip":{position:"relative",zIndex:1e3,height:48,width:122,lineHeight:48,backgroundColor:"#4C4C4C",borderRadius:12,fontSize:17,color:"#fff",textAlign:"center"},".empty":{width:"100%",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center",backgroundColor:"#dcdcdc",color:"#888",textAlign:"center",fontSize:12,minHeight:50}},s.state={hidden:!0},s.isFullScreen=void 0,s.useDefaultFeedback=void 0,s.exposureUntilVideoPlay=void 0,s.exportAid=void 0,s.enableTimer=void 0,s.hideAfterLanding=void 0,s.isMulti=void 0,s.isWidthRequired=void 0,s.multiShowList=void 0,s.show=function(){s.setStyle("body",{hidden:!1,opacity:1}),s.emitAdCustomEvent(M.A$.CHECKEXPOSURE)},s.hide=function(){s.setStyle("body",{hidden:!0,opacity:0}),s.emitAdCustomEvent(M.A$.CHECKEXPOSURE)},s.showFeedback=function(){l()(s).useDefaultFeedback&&(s.setStyle("tipContainer",{hidden:!1}),setTimeout((function(){s.setStyle("tipContainer",{hidden:!0})}),3e3))},s.handleEnterForeground=function(){s.emitComponentEvent(M._d.APPENTERFOREGROUND),s.emitAdCustomEvent(M.A$.APPENTERFOREGROUND)},s.handleEnterBackground=function(){s.emitComponentEvent(M._d.APPENTERBACKGROUND),s.emitAdCustomEvent(M.A$.APPENTERBACKGROUND)},s.handleContainerClick=function(e){var t,n;null!==(t=s.manager)&&void 0!==t&&t.isMulti||(s.emitComponentEvent(M._d.CONTAINERTAP),null===(n=s.reporter)||void 0===n||n.handleClick(e,2))},s.isFullScreen=s.getDataValueWithDefault("isFullScreen",!1),s.enableTimer=s.getDataValueWithDefault("enableTimer",!0),s.useDefaultFeedback=s.getDataValueWithDefault("useDefaultFeedback",!0),s.exposureUntilVideoPlay=s.getDataValueWithDefault("exposureUntilVideoPlay",!1),s.hideAfterLanding=s.getDataValueWithDefault("hideAfterLanding",!1),s.exportAid=s.getDataValueWithDefault("exportAid",!1),s.isMulti=null!==(r=null===(i=s.template)||void 0===i||null===(o=i.tplConfig)||void 0===o?void 0:o.isMulti)&&void 0!==r&&r,s.isWidthRequired=s.getDataValueWithDefault("isWidthRequired",!1),s.multiShowList=s.getDataValue("multiShowList"),s.bindEvent(),s.updateInnerStyle(),s.updateStyle(s.template.style||{},"container");var c=["left","top"];return!B.S3.isWaGame&&c.push("fixed"),s.isWidthRequired&&c.push("width"),!s.isFullScreen&&e.adPosition&&s.setStyle("body",(0,O.ei)(e.adPosition,c)),s}return c()(n,[{key:"destroy",value:function(){f()(h()(n.prototype),"destroy",this).call(this),this.unbindEvent()}},{key:"ready",value:function(e){f()(h()(n.prototype),"ready",this).call(this,e),this.isFullScreen&&(e.fullscreen=!0),this.updateBubbleEvent()}},{key:"getCustomItemProps",value:function(e,t){return i()(i()({},this.getCommonSubComponentProps()),{},{template:this.props.template.children[parseInt(t,10)]})}},{key:"bindEvent",value:function(){(0,V.dN)(this.handleEnterForeground),(0,V.vv)(this.handleEnterBackground),this.onClick("container",this.handleContainerClick)}},{key:"unbindEvent",value:function(){(0,V.Tb)(this.handleEnterForeground),(0,V.b$)(this.handleEnterBackground),this.offClick("container",this.handleContainerClick)}},{key:"getRootData",value:function(e){switch(e){case"hidable":return this.getDataValueWithDefault("hidable",!0);case"refetchable":return this.getDataValueWithDefault("refetchable",!1)}}},{key:"doAction",value:function(e){var t,n,r=e.payload,i=e.args;if(r.action===M.aO.HIDEAD)"value"in r&&r.value.preventClose?null===(t=this.manager)||void 0===t||t.hide(!0):null===(n=this.manager)||void 0===n||n.hide();else if(r.action===M.aO.RELOADAD){var o;null===(o=this.manager)||void 0===o||o.reload()}else r.action===M.aO.CHANGEMULTISHOW&&(r.value.listExpr?this.emitAdCustomEvent(M.A$.CHANGEMULTISHOW,{list:this.run(r.value.listExpr,i)}):r.value.list?this.emitAdCustomEvent(M.A$.CHANGEMULTISHOW,{list:r.value.list}):null!=i&&i.list&&this.emitAdCustomEvent(M.A$.CHANGEMULTISHOW,{list:i.list}))}},{key:"isShow",value:function(){var e,t=this.getElementById("body");return null!==(e=!(null!=t&&t.style.hidden))&&void 0!==e&&e}},{key:"render",value:function(){if(this.props.isEmpty)return'\n        <view id="body">\n          <view id="empty-container" class="empty">\n            <text id="empty-container-text" class="empty-info" value="暂无广告，具体指引查看小程序流量主功能"></text>\n          </view>\n        </view>\n      ';var e=this.props.template,t=this.isFullScreen,n=this.useDefaultFeedback;return'\n      <view id="body" class="'.concat(t?"full-size":"",'">\n        ').concat(e?'\n          <view id="container" class="wx-ad-custom '.concat(t?"full full-size":"",'">\n            ').concat(e.children.map((function(e,t){return'\n              <CustomItem get-props="getCustomItemProps:'.concat(t,'"></CustomItem>\n            ')})).join("\n"),"\n          </view>\n          ").concat(n?'\n            <view id="tip-container" class="tip-container">\n              <text id="close-tip" class="video-close-tip" value="感谢反馈"></text>\n            </view>\n          ':"","\n        "):"","\n      </view>\n    ")}}]),n}(W);G.subComponents={CustomItem:U};var H=n(572),Z=n.n(H),q=function(e){v()(n,e);var t=m()(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).state={children:[]},r.style={".layout-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".layout-column":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".layout-proportion":{position:"absolute",width:"100%",height:"100%"}},r.baseType=void 0,r.classRow=!1,r.classColumn=!1,r.baseType=r.options.baseType||M.BB.COMMON,r.baseType===M.BB.ROW?r.classRow=!0:r.baseType===M.BB.COLUMN?r.classColumn=!0:(r.baseType,M.BB.PROPORTION),r.state.children=r.template.children||[],r.updateInnerStyle(),r}return c()(n,[{key:"doAction",value:function(e){var t=e.payload;if(t.action===M.aO.ADDCHILDREN){var n=t.value,r=Array.isArray(n)?n:[n],i=[].concat(Z()(this.state.children),Z()(r));this.setState({children:i})}}},{key:"ready",value:function(e){f()(h()(n.prototype),"ready",this).call(this,e),this.initProportionComponent()}},{key:"initProportionComponent",value:function(){var e=this.getDataValue("mProportion");if(e){var t=this.getRootElement().layoutBox;if(t.width/t.height>e){var n=Math.round(t.height*e);this.setStyle("container",{width:n,left:(t.width-n)/2,top:0})}else{var r=Math.round(t.width/e);this.setStyle("container",{height:r,top:(t.height-r)/2,left:0})}}}},{key:"getSubComponentProps",value:function(e,t){return i()(i()({},this.getCommonSubComponentProps()),{},{template:this.state.children[parseInt(t,10)]})}},{key:"render",value:function(){var e=this.state.children,t=["layout"];return this.classRow&&t.push("layout-row"),this.classColumn&&t.push("layout-column"),'\n      <view\n        id="container"\n        class="'.concat(t.join(" "),'"\n      >\n      ').concat(e.map((function(e,t){return'\n        <CustomItem get-props="getSubComponentProps:'.concat(t,'"></CustomItem>\n      ')})).join("\n"),"\n      </view>\n    ")}}]),n}(W);q.subComponents=function(){return{CustomItem:U}};var z=n(1033),Y=n(2395),K=n(9627),J=function(e){v()(r,e);var t,n=m()(r);function r(e){var t;a()(this,r),(t=n.call(this,e)).style={".text":{color:"#000",fontSize:14,wordBreak:"break-all"},".text-ellipsis":{lineBreak:"ellipsis",overflow:"hidden"}},t.state={text:""},t.baseType=void 0,t.classEllipsis=!1,t.maxLen=void 0;var i=t.options.baseType||M.qW.NICKNAME;return t.baseType=i,i===M.qW.COMMON?t.initCommonComponent():i===M.qW.NICKNAME?t.initNickNameComponent():i===M.qW.DESC&&t.initDescComponent(),t.classEllipsis=t.getDataValueWithDefault("isEllipsis",!0),t.maxLen=t.getDataValueWithDefault("maxLen",null),t.updateInnerStyle(),t}return c()(r,[{key:"ready",value:function(e){f()(h()(r.prototype),"ready",this).call(this,e),this.baseType===M.qW.RELATION&&this.initRelationComponent()}},{key:"initCommonComponent",value:function(){this.state.text=this.getDataValueWithDefault("text","")}},{key:"initNickNameComponent",value:function(){var e=this.getAdData(),t=[z.fY.APPLE_APP_STORE,z.fY.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===z.vK.CRT_SIZE_GRID,r=[z.fY.WE_CHAT_ARTICLE,z.fY.GDT_WE_CHAT_ARTICLE].includes(e.product_type),i=[z.fY.WE_CHAT_SHOP,z.fY.JD_URL].includes(e.product_type),o=[{path:["extBackComm","nick_name"]},{path:["weapp_info","nick_name"],condition:n},{path:["crtInfo","0","wxgame_video_card","title"],condition:[z.vK.CRT_SIZE_REWARD_VEDIO169,z.vK.CRT_SIZE_REWARD_VEDIO916,z.vK.CRT_SIZE_VERTICAL_VIDEO_NEW_916,z.vK.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size)},{path:["appInfo","appName"],condition:t},{path:["app","nickname"],condition:!t},{path:["crtInfo","0","card_info","title"]},{value:"品牌推广",condition:r},{value:"电商推广",condition:i},{value:"活动推广"}];this.state.text=(0,O.Ze)(e,o)}},{key:"initDescComponent",value:function(){var e=this.getAdData(),t=[z.fY.APPLE_APP_STORE,z.fY.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=[z.vK.CRT_SIZE_REWARD_VEDIO169,z.vK.CRT_SIZE_REWARD_VEDIO916,z.vK.CRT_SIZE_VERTICAL_VIDEO_NEW_916,z.vK.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size),r=e.product_type===z.fY.MINI_GAME,i=e.product_type===z.fY.WECHAT,o=[z.fY.WE_CHAT_ARTICLE,z.fY.GDT_WE_CHAT_ARTICLE].includes(e.product_type),a=[z.fY.WE_CHAT_SHOP,z.fY.JD_URL].includes(e.product_type),s=[{path:["extBackComm","desc_1"]},{path:["crtInfo","0","wxgame_video_card","desc"],condition:n},{path:["wording"],condition:[z.vK.CRT_SIZE_MULTI_POS_NEW_PIC,z.vK.CRT_SIZE_IN_TEXT_DESC_CARD].includes(e.crt_size)}];this.getDataValueWithDefault("useDefault",!1)?s.push({path:["extBackComm","default_desc"]},{value:"今日活动推荐",condition:o},{value:"今日商品推荐",condition:a},{value:"今日应用推荐",condition:t},{value:"今日公众号推荐",condition:i},{value:"今日小游戏推荐",condition:r},{value:"今日活动推荐"}):s.push({value:""}),this.state.text=(0,O.Ze)(e,s)}},{key:"initRelationComponent",value:(t=C()(x().mark((function e(){var t,n,r,i,o,a,s,c,u,l;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getAdData(),8===(0,O.U2)(t,["crtInfo","0","card_info","mp_tag_type"])){e.next=3;break}return e.abrupt("return");case 3:return n=t.aid,r=Date.now(),i=(0,O.U2)(t,["button_action","button_text"],""),e.prev=6,e.next=9,(0,Y.uQ)({aid:n,buttonText:i});case 9:a=e.sent,s=Date.now(),this.adProxy.reportRelationFetchDuration({startTime:r,endTime:s,showTime:(null===(o=this.manager)||void 0===o?void 0:o.showDetailTime)||0}),c="",a&&(u=a.count,l=a.descText,c=this.getDataValueWithDefault("text","",void 0,{args:{count:u,descText:l}}),this.emitComponentEvent(M.Xw.RELATIONFETCHED,{count:u,descText:l})),this.setState({text:c}),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(6),this.setState({text:""}),this.adProxy.reportAdMonitorData(M.IN.RELATION_FETCH_ERROR,e.t0);case 21:case"end":return e.stop()}}),e,this,[[6,17]])}))),function(){return t.apply(this,arguments)})},{key:"doAction",value:function(e){var t=e.payload;t.action===M.aO.TEXTSETTEXT&&this.setState({text:this.getDataValue("text",t.value)})}},{key:"render",value:function(){var e=this.classEllipsis,t=this.state.text;return this.classEllipsis&&null!==this.maxLen&&t&&(t=(0,K.$G)(t,2*this.maxLen)),'\n      <view id="container">\n        <text\n          id="text"\n          class="text '.concat(e?"text-ellipsis":"",'"\n          value="').concat(t,'"\n        ></text>\n      </view>\n    ')}}]),r}(W),$=function(e){v()(n,e);var t=m()(n);function n(e){var r;a()(this,n),(r=t.call(this,e)).style={".image-img":{width:"100%",height:"100%"},".image-img-appicon":{borderRadius:5},".image-img-icon":{borderRadius:"50%"}},r.state={imgUrl:""},r.classAppIcon=!1,r.classIcon=!1,r.useBgMode=!1,r.baseType=void 0,r.useBgMode=r.getDataValueWithDefault("useBgMode",!1);var i=r.options.baseType||M.v5.ICON;switch(r.baseType=i,i){case M.v5.COMMON:r.initCommonComponent();break;case M.v5.AD:r.initADComponent();break;case M.v5.ICON:r.initIconComponent()}return r.useBgMode,r.updateInnerStyle(),r}return c()(n,[{key:"initCommonComponent",value:function(){this.state.imgUrl=this.getDataValueWithDefault("imgUrl","")}},{key:"initIconComponent",value:function(){var e=this.getAdData(),t=[z.fY.APPLE_APP_STORE,z.fY.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===z.vK.CRT_SIZE_GRID,r=[z.fY.WE_CHAT_SHOP,z.fY.JD_URL].includes(e.product_type),i=[z.vK.CRT_SIZE_REWARD_VEDIO169,z.vK.CRT_SIZE_REWARD_VEDIO916,z.vK.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);t?this.classAppIcon=!0:this.classIcon=!0;var o=[{path:["extBackComm","head_img"]},{path:["weapp_info","head_img"],condition:n},{path:["crtInfo","0","wxgame_video_card","thumb"],condition:i},{path:["appInfo","iconUrl"],condition:t},{path:["app","icon"],condition:!t},{path:["crtInfo","0","card_info","thumb"]},{value:"https://wxa.wxs.qq.com/images/wxapp/dianshang.png",condition:r},{value:"https://wxa.wxs.qq.com/images/wxapp/pinpai.png"}];this.state.imgUrl=(0,O.Ze)(e,o)}},{key:"initADComponent",value:function(){var e=this.getAdData(),t=e.image_url;if(!t.startsWith("http"))try{t=e.crtInfo[0].image_url||t}catch(e){}this.state.imgUrl=this.getDataValue("imgUrl")||t}},{key:"doAction",value:function(e){var t=e.payload;t.action===M.aO.IMAGESETSRC&&this.setState({imgUrl:this.getDataValue("imgUrl",t.value)})}},{key:"render",value:function(){var e=this.classAppIcon,t=this.classIcon,n=this.baseType===M.v5.AD,r=this.state.imgUrl,i=["image-img"];return e&&i.push("image-img-appicon"),t&&i.push("image-img-icon"),'\n      <view id="container" class="image">\n        <image\n          id="img"\n          '.concat(n?'bubble-event="false"':"",'\n          class="').concat(i.join(" "),'"\n          src="').concat(r,'"\n        >\n      </view>\n    ')}}]),n}(W),X=n(2186),Q=function(e){v()(n,e);var t=m()(n);function n(e){var r;a()(this,n),(r=t.call(this,e)).style={".button":{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#07c160",padding:"0 12px",borderRadius:3,overflow:"hidden"},".button-text":{textAlign:"center",color:"#fff",fontSize:16},".button-download-progress":{position:"absolute",left:0,top:0,width:0,height:"100%",overflow:"hidden"},".download-text-container":{position:"absolute",top:0,left:0,width:0,height:"100%",flexDirection:"row",alignItems:"center",justifyContent:"center"}},r.state={buttonText:""},r.downloadProgress=0,r.isHandleDownload=!1,r.handleAdCustomEvent=function(e){var t=e.action,n=e.value,i=void 0===n?{}:n;t===M.A$.CHANGEADBTNTEXT&&i.text&&(r.setState({buttonText:i.text}),i.progress&&(r.downloadProgress=i.progress))},r.handleButtonClick=function(e){r.emitAdCustomEvent(M.A$.BTNTAP,{event:e,isHandleDownload:r.isHandleDownload}),r.emitComponentEvent(M.Y8.BUTTONTAP,{event:e})};var i=r.options.baseType||M.Dx.LOGICCOMMON;return i===M.Dx.COMMON?r.initCommonComponent():i===M.Dx.LOGICCOMMON&&r.initLogicCommonComponent(),r.updateInnerStyle(),r.setStyle("downloadProgressBar",{width:"".concat(r.downloadProgress,"%")}),r.setStyle("downloadTextContainer",{width:"".concat(1e4/r.downloadProgress,"%")}),r.onClick("container",r.handleButtonClick,{isReport:!0,clickType:1}),r}return c()(n,[{key:"destroy",value:function(){f()(h()(n.prototype),"destroy",this).call(this),this.offClick("container",this.handleButtonClick)}},{key:"getButtonText",value:function(){return this.state.buttonText}},{key:"initCommonComponent",value:function(){this.state.buttonText=this.getDataValueWithDefault("buttonText","")}},{key:"initLogicCommonComponent",value:function(){var e=this.getAdData(),t=this.getDataValue("buttonText");t?this.state.buttonText=t:e.product_type===X.ProductType.WE_CHAT?this.state.buttonText=e.app.isFollowed?"查看":e.button_action.button_text:this.state.buttonText=e.button_action.button_text,this.addAdCustomListener(this.handleAdCustomEvent),this.isHandleDownload=this.getDataValueWithDefault("isHandleDownload",!1)}},{key:"doAction",value:function(e){var t=e.payload;t.action===M.aO.BUTTONSETTEXT&&this.setText(t.value)}},{key:"setText",value:function(e){this.setState({buttonText:this.getDataValue("text",e)})}},{key:"render",value:function(){var e=this.isHandleDownload,t=this.state.buttonText;return'\n      <view id="container" class="button" bubbleEvent="false">\n        <text id="button-text" class="button-text" value="'.concat(t,'"></text>\n        ').concat(e?'\n          <view\n            id="download-progress-bar"\n            class="button-download-progress"\n          >\n            <view id="download-text-container" class="download-text-container"\n              <text id="download-text" class="button-text" value="'.concat(t,'"></text>\n            </view>\n          </view>\n        '):"","\n      </view>\n    ")}}]),n}(W),ee=n(6842),te=function(e){v()(n,e);var t=m()(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).style={".video-context":{zIndex:1000008},".click-mask":{position:"absolute",zIndex:1000008,borderRadius:6,width:"100%",height:"100%"},".video-voice-box":{zIndex:1000009,position:"absolute",width:24,height:24},".video-voice-box-topleft":{top:10,left:10},".video-voice-box-topright":{top:10,right:10},".video-voice-box-bottomleft":{bottom:10,left:10},".video-voice-box-bottomright":{bottom:10,right:10},".video-count-down":{zIndex:1000009,position:"absolute",color:"#fff",textAlign:"right",fontSize:12,width:32,height:16,lineHeight:16},".video-count-down-topleft":{top:10,left:10},".video-count-down-topright":{top:10,right:10},".video-count-down-bottomleft":{bottom:10,left:10},".video-count-down-bottomright":{bottom:10,right:10},".video-voice-icon":{width:"100%",height:"100%"},".video-progress":{position:"absolute",zIndex:9,bottom:0,left:0,right:0,height:3,backgroundColor:"#f2f2f2"},".video-progress-played":{width:0,height:3,backgroundColor:"#07c160"}},r.state={muted:!0,loop:!0,autoplay:!1,countDownNumber:null,isEndPageShowing:!1},r.src="",r.poster="",r.isShowVoice=!0,r.isShowProgress=!0,r.isShowCountDown=!1,r.isShowEndPage=!1,r.voicePlacement=null,r.countDownPlacement=null,r.voiceIconSrc="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",r.mutedIconSrc="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",r.currentTime=0,r.videoDuration=0,r.objectFit="contain",r.baseType=void 0,r.toggleMuted=function(){r.setState({muted:!r.state.muted}),r.emitComponentEvent(M.XP.MUTEDCHANGE,{muted:r.state.muted})},r.handleCustomEvent=function(e){var t=e.action,n=e.value,i=void 0===n?{}:n;switch(t){case M.A$.ADSHOWHALF:r.state.isEndPageShowing||r.operateVideoPlay("play");break;case M.A$.ADHIDEHALF:r.state.isEndPageShowing||r.operateVideoPlay("pause");break;case M.A$.APPENTERBACKGROUND:var o=Math.min(r.currentTime,r.videoDuration);i.inAdDetail?r.reportVideoPlay("partial","exit",o):r.reportVideoPlay("partial","app_exit",o);break;case M.A$.ENDPAGEINIT:r.isShowEndPage=r.getDataValueWithDefault("isShowEndPage",!1),r.isShowEndPage&&r.setState({loop:!1});break;case M.A$.ENDPAGEHIDE:r.isShowEndPage&&(r.setState({isEndPageShowing:!1}),r.operateVideoPlay("play"));break;case M.A$.ENDPAGESHOW:r.isShowEndPage&&r.setState({isEndPageShowing:!0});break;case M.A$.BTNTAP:r.reportVideoPlay(r.currentTime<r.videoDuration?"partial":"complete","land",r.videoDuration)}},r.handleError=function(e){r.adProxy.reportAdMonitorData(M.IN.AD_VIDEO_LOAD_FAILED,e)},r.handleTimeUpdate=function(e){var t,n=e.duration,i=e.position;if(null!=n&&null!=i){var o=Math.min(1,i/n);r.setStyle("videoProgressPlayed",{width:"".concat(100*o,"%")}),r.isShowCountDown&&r.setState({countDownNumber:"".concat(Math.ceil(n-i),"s")}),r.emitComponentEvent(M.XP.VIDEOTIMEUPDATE,{event:e,rate:o}),r.currentTime=1e3*i,r.videoDuration||(r.videoDuration=1e3*n);var a={currentTime:r.currentTime,duration:r.videoDuration},s=(null===(t=r.manager)||void 0===t?void 0:t.adCustomId)||r.adCustomId;(0,ee.i)(s,a)}},r.handleEnded=function(e){var t;r.emitComponentEvent(M.XP.VIDEOENDED,{event:e}),r.emitAdCustomEvent(M.A$.TRIGGEREVENT,{eventName:"videoended",detail:{baseType:r.baseType}}),r.reportVideoPlay("viewable","end",r.videoDuration),N.cj&&r.reportVideoPlay("partial","start");var n={currentTime:r.videoDuration,duration:r.videoDuration},i=(null===(t=r.manager)||void 0===t?void 0:t.adCustomId)||r.adCustomId;(0,ee.i)(i,n),r.currentTime=0,r.isShowEndPage&&r.emitAdCustomEvent(M.A$.SHOWENDPAGE,{videoId:r.id}),r.setState({countDownNumber:null})},r.handlePlay=function(e){r.emitComponentEvent(M.XP.VIDEOPLAY,{event:e}),r.emitAdCustomEvent(M.A$.ADVIDEOPLAY),r.reportVideoPlay("partial","start",Math.min(r.currentTime,r.videoDuration))},r.handlePause=function(e){r.emitComponentEvent(M.XP.VIDEOPAUSE,{event:e}),r.emitAdCustomEvent(M.A$.ADVIDEOPAUSE),r.reportVideoPlay("partial","close",Math.min(r.currentTime,r.videoDuration))},r.baseType=r.options.baseType||M.jn.AD,r.baseType===M.jn.COMMON?r.initCommonComponent():r.baseType===M.jn.AD&&r.initADComponent(),r.isShowVoice=r.getDataValueWithDefault("isShowVoice",!0),r.voicePlacement=r.getDataValueWithDefault("voicePosition","bottomleft").toLowerCase(),r.state.muted=r.getDataValueWithDefault("muted",!0),r.state.loop=r.getDataValueWithDefault("loop",!0),r.isShowProgress=r.getDataValueWithDefault("isShowProgress",!0),r.isShowCountDown=r.getDataValueWithDefault("isShowCountDown",!1),r.countDownPlacement=r.getDataValueWithDefault("countDownPosition","topright").toLowerCase(),r.objectFit=r.getDataValueWithDefault("objectFit","contain"),r.updateInnerStyle(),r.bindEvent(),setTimeout((function(){r.emitComponentEvent(M.XP.MUTEDCHANGE,{muted:r.state.muted})}),0),r}return c()(n,[{key:"destroy",value:function(){f()(h()(n.prototype),"destroy",this).call(this),this.unbindEvent(),this.removeAdCustomListener()}},{key:"bindEvent",value:function(){this.onTimeUpdate("video",this.handleTimeUpdate),this.onEnded("video",this.handleEnded),this.onPlay("video",this.handlePlay),this.onPause("video",this.handlePause),this.onError("video",this.handleError),this.onClick("videovoicebox",this.toggleMuted,{clickType:1})}},{key:"unbindEvent",value:function(){this.offTimeUpdate("video",this.handleTimeUpdate),this.offEnded("video",this.handleEnded),this.offPlay("video",this.handlePlay),this.offPause("video",this.handlePause),this.offError("video",this.handleError),this.offClick("videovoicebox",this.toggleMuted)}},{key:"initCommonComponent",value:function(){this.src=this.getDataValueWithDefault("src",""),this.poster=this.getDataValueWithDefault("poster","")}},{key:"initADComponent",value:function(){var e,t=this.getAdData();this.src=this.getDataValue("src")||(0,O.U2)(t,["video_info","videoUrl"])||(0,O.U2)(t,["short_video","video_url"]),this.poster=this.getDataValue("poster")||(0,O.U2)(t,["video_info","thumbUrl"])||(0,O.U2)(t,["short_video","trumb_url"]),this.addAdCustomListener(this.handleCustomEvent),this.videoDuration=(0,O.U2)(t,["wx_game_video","short_video","video_duration"])||(0,O.U2)(t,["crtInfo","0","short_video","video_duration"],0),this.videoDuration=1e3*this.videoDuration;var n={currentTime:0,duration:this.videoDuration},r=(null===(e=this.manager)||void 0===e?void 0:e.adCustomId)||this.adCustomId;(0,ee.i)(r,n),this.emitAdCustomEvent(M.A$.REPORTTIMEPOINT,{key:"p8"})}},{key:"doAction",value:function(e){switch(e.payload.action){case M.aO.VIDEOTOGGLEMUTED:this.toggleMuted();break;case M.aO.VIDEOPLAY:this.operateVideoPlay("play");break;case M.aO.VIDEOPAUSE:this.operateVideoPlay("pause");break;case M.aO.VIDEOSTOP:this.operateVideoPlay("stop")}}},{key:"operateVideoPlay",value:function(e){if(["play","pause","stop","seek"].includes(e)){this.setState({autoplay:"play"===e});var t=this.getElementById("video");null!=t&&t[e]&&t[e]()}}},{key:"reportVideoPlay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.baseType===M.jn.AD&&this.emitAdCustomEvent(M.A$.REPORTVIDEOPLAY,{playType:e,conditionType:t,videoInfo:{playDuration:n,videoDuration:this.videoDuration,isMuted:this.state.muted,isAutoPlay:this.state.autoplay}})}},{key:"render",value:function(){var e=this.src,t=this.poster,n=this.isShowVoice,r=this.mutedIconSrc,i=this.voiceIconSrc,o=this.voicePlacement,a=this.countDownPlacement,s=this.isShowProgress,c=this.isShowCountDown,u=this.objectFit,l=this.state,d=l.muted,f=l.loop,p=l.autoplay,h=l.countDownNumber,g=l.isEndPageShowing,v=["video-voice-box"],_=["video-count-down"];return v.push("video-voice-box-".concat(o)),_.push("video-count-down-".concat(a)),'\n      <view id="container" class="video">\n        <video\n          id="video"\n          class="video-context"\n          src="'.concat(e,'"\n          poster="').concat(t,'"\n          controls="false"\n          muted="').concat(d,'"\n          loop="').concat(f,'"\n          autoplay="').concat(p,'"\n          auto-insert="false"\n          under-game-view="false"\n          show-progress="false"\n          show-play-btn="false"\n          show-center-play-btn="false"\n          show-fullscreen-btn="false"\n          enable-progress-gesture="false"\n          object-fit="').concat(u,'"\n        >\n          ').concat(!g&&n?'\n            <view id="videovoicebox" bubble-event="false" class="'.concat(v.join(" "),'">\n              <image\n                src="').concat(d?r:i,'"\n                id="videovoiceimg"\n                class="video-voice-icon"\n              ></image>\n            </view>\n          '):"","\n          ").concat(s?'\n            <view id="video-progress" class="video-progress">\n              <view id="video-progress-played" class="video-progress-played"></view>\n            </view>\n          ':"","\n          ").concat(!g&&c&&h?'\n            <text id="video-count-down" class="'.concat(_.join(" "),'" value="').concat(h,'"></text>\n          '):"","\n        </video>\n      </view>\n    ")}}]),n}(W),ne=function(e){v()(n,e);var t=m()(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).style={".feedback-icon":{width:6,height:4,marginLeft:2,position:"relative"},".close-icon":{width:6,height:6,marginLeft:2,position:"relative"},".feedback":{position:"relative",zIndex:1000010,padding:6},".feedback-tag-container":{flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative",padding:"2px 4px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},".feedback-hot-click":{position:"absolute",top:-10,left:-10,right:-10,bottom:-10},".feedback-tag-text":{fontSize:10,height:12,lineHeight:12,color:"#fff"},".feedback-list":{position:"absolute",width:134,flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",borderWidth:1,borderColor:"rgba(0, 0, 0, 0.03)",borderRadius:4,zIndex:1000011},".feedback-list-bottomleft":{top:26,left:6},".feedback-list-bottomright":{top:26,right:6},".feedback-list-topleft":{bottom:26,left:6},".feedback-list-topright":{bottom:26,right:6},".feedback-btn":{position:"relative",width:132,height:32,lineHeight:32,color:"#566a97",fontSize:12,opacity:.9,textAlign:"center",zIndex:1000011},".feedback-title":{color:"#000",zIndex:1000011},".feedback-line":{width:100,height:1,opacity:.03,backgroundColor:"#000",zIndex:1000011}},r.state={isShowFeedback:!1,isShowFeedbackMenu:!1,position:null},r.feedbackIconSrc="https://wxa.wxs.qq.com/images/wxapp/feedback_icon.png",r.closeIconSrc="https://wxa.wxs.qq.com/images/wxapp/close.png",r.dislikeReasonHandlers={},r.baseType=void 0,r.handleTagClick=function(e){if(r.baseType===M.Eo.SIMPLE)return r.handleSimpleTagClick(e);var t=r.state,n=t.isShowFeedback,i=t.isShowFeedbackMenu;n||i?r.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}):(r.setState({isShowFeedback:!0}),r.updateMenuPosition(),r.updateInnerStyle(),r.emitAdCustomEvent(M.A$.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"广告角标"}),r.emitComponentEvent(M.nf.TAGTAP,{event:e}))},r.handleDislikeClick=function(e){r.setState({isShowFeedback:!1,isShowFeedbackMenu:!0}),r.updateMenuPosition(),r.updateInnerStyle(),r.emitComponentEvent(M.nf.DISLIKETAP,{event:e})},r.handleFeedbackBtnClick=function(e){r.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),r.emitComponentEvent(M.nf.FEEDBACKBTNTAP,{event:e}),r.emitAdCustomEvent(M.A$.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"投诉"}),r.emitAdCustomEvent(M.A$.FEEDBACKBTNTAP)},r.checkUseApx(),r.baseType=r.options.baseType||M.Eo.COMMON,r.bindEvent(),r.updateInnerStyle(),r}return c()(n,[{key:"destroy",value:function(){f()(h()(n.prototype),"destroy",this).call(this),this.unbindEvent()}},{key:"bindEvent",value:function(){this.onClick("feedbackTagContainer",this.handleTagClick),this.onClick("feedbackBtn",this.handleFeedbackBtnClick),this.onClick("dislike",this.handleDislikeClick),this.dislikeReasonHandlers={isdismatch:this.onClick("isdismatch",this.handleDislikeReasonClick.bind(this,1)),isduplicate:this.onClick("isduplicate",this.handleDislikeReasonClick.bind(this,5)),isbadad:this.onClick("isbadad",this.handleDislikeReasonClick.bind(this,4))}}},{key:"unbindEvent",value:function(){this.offClick("feedbackTagContainer",this.handleTagClick),this.offClick("feedbackBtn",this.handleFeedbackBtnClick),this.offClick("dislike",this.handleDislikeClick);for(var e=0,t=Object.keys(this.dislikeReasonHandlers);e<t.length;e++){var n=t[e],r=this.dislikeReasonHandlers[n];this.offClick(n,r)}}},{key:"updateMenuPosition",value:function(){this.setState({position:this.getDataValueWithDefault("menuPosition","bottomleft").toLowerCase()})}},{key:"handleSimpleTagClick",value:function(e){this.emitAdCustomEvent(M.A$.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:6}),this.emitAdCustomEvent(M.A$.HIDEAD),this.emitComponentEvent(M.nf.TAGTAP,{event:e})}},{key:"handleDislikeReasonClick",value:function(e,t){this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(M.nf.DISLIKEREASONTAP,{event:t}),this.emitAdCustomEvent(M.A$.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:e});var n=this.getDataValueWithDefault("afterDislike","showTip");"showTip"===n?this.emitAdCustomEvent(M.A$.SHOWFEEDBACK):"hide"===n&&this.emitAdCustomEvent(M.A$.HIDEAD)}},{key:"render",value:function(){var e=this.state,t=e.isShowFeedback,n=e.isShowFeedbackMenu,r=e.position,i=["feedback-list"],o=["feedback-list"];r&&(i.push("feedback-list-".concat(r.toLowerCase())),o.push("feedback-list-".concat(r.toLowerCase())));var a=this.baseType===M.Eo.SIMPLE?this.closeIconSrc:this.feedbackIconSrc,s=this.baseType===M.Eo.SIMPLE?"close-icon":"feedback-icon";return'\n      <view id="container" class="feedback" bubble-event="false">\n        <view id="feedback-tag-container" class="feedback-tag-container">\n          <text id="feedback-tag" class="feedback-tag-text" value="广告"></text>\n          <image id="feedback-icon" class="'.concat(s,'" src="').concat(a,'"></image>\n        </view>\n        ').concat(t?'\n          <view id="menu1" key="menu1" class="'.concat(i.join(" "),'">\n            <text class="feedback-btn feedback-title" value="由赞助商提供的内容"></text>\n            <view class="feedback-line"></view>\n            <text id="dislike" class="feedback-btn" value="不感兴趣"></text>\n            <view class="feedback-line"></view>\n            <text id="feedback-btn" class="feedback-btn" value="投诉"></text>\n          </view>\n        '):"","\n        ").concat(n?'\n          <view id="menu2" key="menu2" class="'.concat(o.join(" "),'">\n            <text id="isdismatch" class="feedback-btn" value="与我无关"></text>\n            <view class="feedback-line"></view>\n            <text id="isduplicate" class="feedback-btn" value="重复收到多次"></text>\n            <view class="feedback-line"></view>\n            <text id="isbadad" class="feedback-btn" value="内容太差"></text>\n          </view>\n        '):"","\n      </view>\n    ")}}]),n}(W),re=n(8382),ie=n.n(re),oe=function(e){v()(n,e);var t=m()(n);function n(e){var r;a()(this,n),(r=t.call(this,e)).style={".end":{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1000099,backgroundColor:"rgba(0, 0, 0, 0.8)",flexDirection:"column",justifyContent:"center",alignItems:"center",hidden:!0},".end-refresh":{position:"absolute",left:0,bottom:0,flexDirection:"row",alignItems:"center"},".end-refresh-text":{color:"#D8D8D8",opacity:.5}},r.state={isShowEndPage:!1},r.children=[],r.refreshIconSrc="https://wxa.wxs.qq.com/images/wxapp/refresh_icon.png",r.showTime=0,r.cardInfo=void 0,r.backgroundImage="",r.exposured=!1,r.viewableExposured=!1,r.viewableExposureTimer=null,r.handleAdCustomListener=function(e){switch(e.action){case M.A$.SHOWENDPAGE:r.setState({isShowEndPage:!0}),r.emitAdCustomEvent(M.A$.ENDPAGESHOW),r.showTime=Date.now(),!r.exposured&&r.reportEndPageExposure(),r.exposured=!0,r.viewableExposured||(r.viewableExposureTimer=setTimeout((function(){!r.viewableExposured&&r.reportEndPageExposure(!0)}),1e3)),r.emitComponentEvent(M.H_.SHOW);break;case M.A$.APPENTERBACKGROUND:r.state.isShowEndPage&&r.reportEndPageDuration();break;case M.A$.APPENTERFOREGROUND:r.state.isShowEndPage&&(r.showTime=Date.now());break;case M.A$.ADSHOWHALF:r.state.isShowEndPage&&(r.showTime=Date.now(),r.viewableExposured||(r.viewableExposureTimer=setTimeout((function(){!r.viewableExposured&&r.reportEndPageExposure(!0)}),1e3)));break;case M.A$.ADHIDEHALF:r.state.isShowEndPage&&(r.reportEndPageDuration(),r.viewableExposureTimer&&(clearTimeout(r.viewableExposureTimer),r.viewableExposureTimer=null))}},r.handleReplay=function(){r.setState({isShowEndPage:!1}),r.emitAdCustomEvent(M.A$.ENDPAGEHIDE),r.emitComponentEvent(M.H_.HIDE),r.reportEndPage({act_type:1003}),r.emitComponentEvent(M.H_.REPLAY)},r.handleContainerClick=function(e){var t;r.reportEndPage({act_type:1002}),null===(t=r.reporter)||void 0===t||t.handleClick(e,2)};var i=r.getAdData();return r.cardInfo=(0,K.U2)(i,["crtInfo",0,"card_info"],{}),r.cardInfo.end_page_type?(r.backgroundImage=r.cardInfo.head_bg_img,r.setStyle("refresh",{padding:"13apx 12apx"}),r.setStyle("refreshIcon",{height:"16apx",width:"16apx",marginRight:"4apx"}),r.setStyle("refreshText",{lineHeight:"18apx",fontSize:"14apx"}),r.children=r.getChildren(),r.bindEvent(),r.updateInnerStyle(),setTimeout((function(){r.emitAdCustomEvent(M.A$.ENDPAGEINIT)}),0),r):ie()(r)}return c()(n,[{key:"updateState",value:function(e){this.state.isShowEndPage!==e.isShowEndPage&&this.setStyle("container",{hidden:!e.isShowEndPage})}},{key:"getSubComponentProps",value:function(e,t){return i()(i()({},this.getCommonSubComponentProps()),{},{template:this.children[parseInt(t,10)]})}},{key:"bindEvent",value:function(){this.onClick("contiainer",this.handleContainerClick),this.onClick("refresh",this.handleReplay),this.addAdCustomListener(this.handleAdCustomListener)}},{key:"destroy",value:function(){f()(h()(n.prototype),"destroy",this).call(this),this.offClick("contiainer",this.handleContainerClick),this.offClick("refresh",this.handleReplay),this.removeAdCustomListener()}},{key:"reportEndPageDuration",value:function(){this.showTime&&(this.reportEndPage({act_type:1006,exposure_duration:Date.now()-this.showTime}),this.showTime=0)}},{key:"reportEndPageExposure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;e&&(t=1,this.viewableExposured=!0),this.reportEndPage({act_type:t})}},{key:"reportEndPage",value:function(e){this.emitAdCustomEvent(M.A$.REPORTENDPAGE,{data:e})}},{key:"doAction",value:function(e){e.payload.action===M.aO.ENDPAGEHIDE&&(this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(M.A$.ENDPAGEHIDE),this.emitComponentEvent(M.H_.HIDE))}},{key:"getChildren",value:function(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={},i=this.template.id;r.feedBack={type:"feedback",id:"".concat(i,"_endPageFeedback"),style:{position:"absolute",zIndex:99,top:"2px",left:"2px"},options:{events:{tagTap:[{action:M.aO.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:M.aO.TRIGGEREVENT,value:{eventName:M.H_.VIDEODISLIKE}}]}}},r.iconBig={type:"image",id:"".concat(i,"_endPageIconBig"),style:{width:"40apx",height:"40apx",marginBottom:"7apx"},options:{baseType:2}},r.nickBig={type:"text",id:"".concat(i,"_endPageNickBig"),style:{marginBottom:"6apx"},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",height:"24apx",lineHeight:"24apx"}}}}},r.descSmall={type:"text",id:"".concat(i,"_endPageDescSmall"),style:{marginBottom:"23apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",opacity:.5,fontSize:"14apx",lineHeight:"20apx"}}}}},r.button={type:"button",id:"".concat(i,"_endPageButton"),style:{},options:{innerStyles:{container:{style:{height:"32apx",backgroundColor:"#07C160",borderRadius:"4apx",padding:"0 12.5apx",paddingBottomExpr:"#like($const.systemInfo.osVersion, 'Android') ? '1px' : '0'"}},buttonText:{style:{fontSize:"16apx",color:"#fff"}}},baseType:2,events:{buttonTap:[{action:M.aO.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1001},n)}}]}}},r.iconSmall={type:"image",id:"".concat(i,"_endPageIconSmall"),style:{width:"20apx",height:"20apx",marginRight:"8apx"},options:{baseType:2}},r.nickSmall={type:"text",id:"".concat(i,"_endPageNickSmall"),style:{},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"15apx",height:"18apx",lineHeight:"18apx",opacity:".5"}}}}},r.layoutSmall={type:"layout",id:"".concat(i,"_endPageLayoutSmall"),style:{marginBottom:"16apx"},options:{baseType:2},children:[]},r.layoutSmall.children.push(r.iconSmall),r.layoutSmall.children.push(r.nickSmall),r.descBig={type:"text",id:"".concat(i,"_endPageDescBig"),style:{marginBottom:"32apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",lineHeight:"22apx"}}}}};var o=this.getDataValue("childrenConf");if(o)for(var a=0,s=Object.keys(o);a<s.length;a++){var c=s[a];r[c]&&(0,K.Ee)(r[c],o[c])}var u=[];return u=2===this.cardInfo.end_page_type?[r.feedBack,r.layoutSmall,r.descBig,r.button]:[r.feedBack,r.iconBig,r.nickBig,r.descSmall,r.button],3===e?u.concat(this.template.children||[]):u}},{key:"render",value:function(){var e=this.backgroundImage,t=this.children,n=this.refreshIconSrc;return'\n      <view\n        id="container"\n        class="end"\n        bubble-event="false"\n      >\n        '.concat(e?'<image src="'.concat(e,'"></image>'):"","\n        ").concat(t.map((function(e,t){return'\n          <CustomItem get-props="getSubComponentProps:'.concat(t,'"></CustomItem>\n        ')})),'\n        <view id="refresh" class="end-refresh">\n          <image id="refresh-icon" class="end-refresh-icon" src=').concat(n,"></image>\n        </view>\n      </view>\n    ")}}]),n}(W);oe.subComponents=function(){return{CustomItem:U}};var ae=function(e){v()(n,e);var t=m()(n);function n(e){var r;return a()(this,n),(r=t.call(this,e,{autoRegister:!1})).forArr=void 0,r.forType=r.options.baseType||M.bk.COMMON,r.forArr=r.getDataValueWithDefault("forArr",[]),r.forType===M.bk.COMMON?r.forArr=r.getDataValueWithDefault("forArr",[]):r.forType===M.bk.ADS&&(r.forArr=r.getAdDatas()),r}return c()(n,[{key:"getSubComponentProps",value:function(e,t,n){var r=this.template,o=this.forArr;return i()(i()({},this.getCommonSubComponentProps()),{},{idPrefix:this.idPrefix+(r.id||"")+t,forType:this.forType,forItem:o[Number(t)],template:r.children[Number(n)],forIndex:Number(t)})}},{key:"render",value:function(){var e=this.props.template,t=this.forArr.map((function(t,n){return e.children.map((function(e,t){return'\n        <CustomItem get-props="getSubComponentProps:'.concat(n,":").concat(t,'"></CustomItem>\n      ')})).join("\n")})).join("\n");return"<Fragment>".concat(t,"</Fragment>")}}]),n}(W);ae.subComponents=function(){return{CustomItem:U}};var se=n(8612),ce=function(e){v()(r,e);var t,n=m()(r);function r(e){var t;return a()(this,r),(t=n.call(this,e)).style={".carousel":{overflow:"hidden",position:"relative"},".carousel-list":{position:"relative",zIndex:1},".carousel-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".carousel-col":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".carousel-mask":{position:"absolute",width:"100%",height:"100%",zIndex:2000001,backgroundColor:"rgba(0, 0, 0, 0)"}},t.baseType=void 0,t.showCount=void 0,t.allCount=void 0,t.animateCount=void 0,t.allIndexList=void 0,t.size=void 0,t.duration=void 0,t.isViewable=!1,t.isPlaying=!1,t.animated=!1,t.timerSet=new Set,t.disabled=void 0,t.isCol=void 0,t.handleMaskClick=function(e){var n,r=null!=t.moveTime?(Date.now()-t.moveTime)/t.duration*t.size:0;n=t.animated?-t.animateCount*t.size+r:-r;var i=(t.isCol?e.relativeY:e.relativeX)-n,o=Math.floor(i/t.size);t.emitComponentEvent(M.Zw.UNITTAP,{index:o,event:e})},t.handleAdCustomEvent=function(e){var n=e.action;[M.A$.ADSHOWHALF].includes(n)?(t.isViewable=!0,t.autoplay()):[M.A$.ADHIDEHALF].includes(n)&&(t.isViewable=!1,t.clearTimers())},t.moveTime=null,t.baseType=t.options.baseType||M.Af.ROWLOOP,t.showCount=t.getDataValueWithDefault("showCount",0),t.allCount=t.getDataValueWithDefault("allCount",0),t.animateCount=t.allCount-t.showCount,t.size=(0,se.G0)(t.getDataValueWithDefault("size","0px")).replace("px",""),t.duration=t.getDataValueWithDefault("duration",1500),t.disabled=t.getDataValueWithDefault("disabled",!1),t.allIndexList=Array.from({length:t.allCount}).map((function(e,t){return t})),t.isCol=t.baseType===M.Af.COLUMNLOOP,t.onClick("mask",t.handleMaskClick),t.baseType===M.Af.ROWLOOP?t.initCarousel("width"):t.baseType===M.Af.COLUMNLOOP&&t.initCarousel("height"),t.updateInnerStyle(),t}return c()(r,[{key:"destroy",value:function(){f()(h()(r.prototype),"destroy",this).call(this),this.offClick("mask",this.handleMaskClick),this.clearTimers(),this.isViewable=!1}},{key:"initCarousel",value:function(e){this.setStyle("container",I()({},e,this.showCount*this.size)),this.setStyle("list",I()({},e,this.allCount*this.size)),this.addAdCustomListener(this.handleAdCustomEvent)}},{key:"clearTimers",value:function(){var e,t=E()(this.timerSet);try{for(t.s();!(e=t.n()).done;){var n=e.value;clearTimeout(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"autoplay",value:(t=C()(x().mark((function e(){var t,n,r,i,o=this;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isViewable&&!this.isPlaying){e.next=2;break}return e.abrupt("return");case 2:if(t=this.baseType===M.Af.ROWLOOP?"left":"top",!this.disabled){e.next=8;break}this.emitComponentEvent(M.Zw.SHOWCHANGE,{list:this.allIndexList.slice(0,this.showCount)||[]}),this.isPlaying=!1,e.next=29;break;case 8:if(!(this.animateCount<=0)){e.next=13;break}this.emitComponentEvent(M.Zw.SHOWCHANGE,{list:this.allIndexList||[]}),this.isPlaying=!1,e.next=29;break;case 13:for(this.isPlaying=!0,n=function(e){var t=o.animated,n=setTimeout((function(){o.timerSet.delete(n);var r=t?o.allIndexList.slice(o.allCount-e-o.showCount,o.allCount-e):o.allIndexList.slice(e,e+o.showCount);o.emitComponentEvent(M.Zw.SHOWCHANGE,{list:r})}),e*o.duration);o.timerSet.add(n)},r=0;r<this.animateCount;r+=1)n(r);return this.moveTime=Date.now(),e.prev=17,e.next=20,this.doAnimation({id:"list",emitEvent:!1,animation:{keys:[I()({offset:0},t,this.animated?-1*this.animateCount*this.size:0),I()({offset:1},t,this.animated?0:-1*this.animateCount*this.size)],duration:this.duration*this.animateCount,easing:"linear"}});case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(17);case 24:this.animated=!this.animated,this.isPlaying=!1,this.moveTime=null,i=setTimeout((function(){o.timerSet.delete(i),o.autoplay()}),this.duration/4),this.timerSet.add(i);case 29:case"end":return e.stop()}}),e,this,[[17,22]])}))),function(){return t.apply(this,arguments)})},{key:"getCustomItemProps",value:function(e,t){return i()(i()({},this.getCommonSubComponentProps()),{},{template:this.props.template.children[parseInt(t,10)]})}},{key:"render",value:function(){var e=this.props.template.children,t=this.baseType,n=this.allCount,r=this.showCount;if(!(e&&e.length&&n&&r))return"<view></view>";var i=["carousel-list",t===M.Af.ROWLOOP?"carousel-row":"carousel-col"];return'\n      <view id="container" class="carousel">\n        <view id="mask" class="carousel-mask"></view>\n        <view id="list" class="'.concat(i.join(" "),'">\n          ').concat(e.map((function(e,t){return'\n            <CustomItem get-props="getCustomItemProps:'.concat(t,'"></CustomItem>\n          ')})).join("\n"),"\n        </view>\n      </view>\n    ")}}]),r}(W);ce.subComponents=function(){return{CustomItem:U}};var ue=function(e){v()(n,e);var t=m()(n);function n(e){var r;return a()(this,n),(r=t.call(this,e)).style={".countdown":{position:"relative",flexDirection:"row",height:32,alignItems:"center"},".countdown-background":{position:"absolute",top:0,bottom:0,left:0,right:0,height:32,background:"rgba(0, 0, 0, 0.15)",border:"0.5px solid rgba(255, 255, 255, 0.254048)",borderRadius:16},".countdown-right":{position:"relative",height:32,flexDirection:"row",alignItems:"center",alignSelf:"flex-start",paddingLeft:63,paddingRight:12,justifyContent:"center",background:"rgba(0, 0, 0, 0.15)",borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,borderRadius:16},".countdown-container":{height:32,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative"},".countdown-text":{fontSize:14,height:20,lineHeight:20,width:14,color:"#fff",alignSelf:"center",position:"relative"},".countdown-value":{fontSize:14,height:20,lineHeight:20,width:11,color:"#fff",alignSelf:"center",position:"relative"},".split-line":{width:.5,height:18.5,marginRight:8.5,position:"relative",backgroundColor:"rgba(255, 255, 255, 0.25)"}},r.state={countdownValue:""},r.children=[],r.handleAdCustomEvent=function(e){var t=e.action,n=e.value,i=void 0===n?{}:n;if(t===M.A$.CHANGECOUNTDOWN){var o=r.getElementById("countdownvalue"),a=2===i.value.toString().length?18:11;r.setStyle("countdownvalue",{width:a}),o&&(o.value=i.value)}},r.children=r.getChildren(),r.updateInnerStyle(),r.addAdCustomListener(r.handleAdCustomEvent),r}return c()(n,[{key:"destroy",value:function(){f()(h()(n.prototype),"destroy",this).call(this)}},{key:"getSubComponentProps",value:function(e,t){return i()(i()({},this.getCommonSubComponentProps()),{},{template:this.children[parseInt(t,10)]})}},{key:"getChildren",value:function(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={};r.feedBack={type:"feedback",id:"Countdown-Feedback",style:{position:"absolute",height:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1111999,left:12},options:{innerStyles:{container:{style:{height:32,padding:0}},feedbackTag:{style:{fontSize:14,width:28,height:20,lineHeight:20}},feedbackTagContainer:{style:{backgroundColor:"",borderRadius:0,padding:0,height:32,top:0,left:0}},feedbackIcon:{style:{marginLeft:4.5,width:9,height:6,marginTop:4}},menu1:{style:{top:40,left:0}},menu2:{style:{top:40,left:0}}},events:{tagTap:[{action:M.aO.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:M.aO.TRIGGEREVENT,value:{eventName:M.H_.VIDEODISLIKE}}]},data:{}}};var i=this.getDataValue("childrenConf");if(i)for(var o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];r[s]&&(0,K.Ee)(r[s],i[s])}var c=[];return c=[r.feedBack],3===e?c.concat(this.template.children||[]):c}},{key:"render",value:function(){var e=this.children;return'\n      <view id="container" class="countdown" bubble-event="false">\n        '.concat(e.map((function(e,t){return'\n          <CustomItem get-props="getSubComponentProps:'.concat(t,'"></CustomItem>\n        ')})),'\n        <view class="countdown-right">\n          <view id="split-line" class="split-line"></view>\n          <view id="countdown-container" class="countdown-container">\n            <text class="countdown-value" id="countdownvalue" value="5"></text>\n            <text class="countdown-text" value="秒"></text>\n          </view>\n        </view>\n      </view>\n    ')}}]),n}(W);ue.subComponents=function(){return{CustomItem:U}};const le=G},9883:(e,t,n)=>{"use strict";var r,i,o,a,s,c,u,l,d;n.d(t,{H:()=>r,_d:()=>i,Y8:()=>o,Xw:()=>a,XP:()=>s,nf:()=>c,H_:()=>u,Zw:()=>l,dA:()=>d}),function(e){e.TAP="tap",e.ANIMATIONEND="animationend"}(r||(r={})),function(e){e.APPENTERFOREGROUND="appEnterForeground",e.APPENTERBACKGROUND="appEnterBackground",e.CONTAINERTAP="containerTap",e.ADBUTTONTAP="adButtonTap",e.VIEWABLEEXPOSURE="viewableExposure",e.EXPOSURE="exposure",e.SHOWHALF="showhalf",e.HIDEHALF="hidehalf",e.SPLASHADFIRSTRENDER="splashAdFirstRender",e.SPLASHADMENUVIEW="splashAdMenuView"}(i||(i={})),function(e){e.BUTTONTAP="buttonTap"}(o||(o={})),function(e){e.RELATIONFETCHED="relationFetched"}(a||(a={})),function(e){e.VIDEOENDED="videoEnded",e.VIDEOPAUSE="videoPause",e.VIDEOPLAY="videoPlay",e.VIDEOTIMEUPDATE="videoTimeUpdate",e.MUTEDCHANGE="mutedChange",e.VIDEOLOADEDMETADATA="videoLoadedMetaData"}(s||(s={})),function(e){e.FEEDBACKBTNTAP="feedbackBtnTap",e.TAGTAP="tagTap",e.DISLIKETAP="dislikeTap",e.DISLIKEREASONTAP="dislikeReasonTap"}(c||(c={})),function(e){e.REPLAY="replay",e.SHOW="show",e.HIDE="hide",e.VIDEODISLIKE="videodislike"}(u||(u={})),function(e){e.SHOWCHANGE="showChange",e.UNITTAP="unitTap"}(l||(l={})),function(e){e.REWARDEDVIDEOPLAY="rewardedVideoPlay",e.REWARDEDVIDEOEND="rewardedVideoEnd",e.REWARDEDVIDEOTIMEUPDATE="rewardedVideoTimeUpdate",e.REWARDEDVIDEOSHOWFLOORINGPAGE="rewardedVideoShowFlooringPage",e.REWARDEDVIDEOHANDLEDYNAMICDONE="rewardedVideoHandleDynamicDone"}(d||(d={}))},7733:(e,t,n)=>{"use strict";var r;n.d(t,{A:()=>r}),function(e){e.SHOWFEEDBACK="showFeedback",e.ADSHOWHALF="adShowHalf",e.ADHIDEHALF="adHideHalf",e.TRIGGEREVENT="triggerEvent",e.REPORTVIDEOPLAY="reportVideoPlay",e.APPENTERBACKGROUND="appEnterBackground",e.ADVIDEOPAUSE="adVideoPause",e.ADVIDEOPLAY="adVideoPlay",e.FEEDBACKBTNTAP="feedbackBtnTap",e.FEEDBACKREPORT="feedbackReport",e.BTNTAP="btnTap",e.CHANGEADBTNTEXT="changedAdBtnText",e.ENDPAGEINIT="endPageInit",e.SHOWENDPAGE="showEndPage",e.REPORTENDPAGE="reportEndPage",e.APPENTERFOREGROUND="appEnterForeground",e.ENDPAGEHIDE="endPageHide",e.ENDPAGESHOW="endPageShow",e.REPORTMMDATA="reportMMData",e.HIDEAD="hideAd",e.REPORTTIMEPOINT="reportTimePoint",e.CHANGEMULTISHOW="changeMultiShow",e.CHECKEXPOSURE="checkExposure",e.LANDAD="landAd",e.CHANGECOUNTDOWN="changeCountdown",e.SPLASHSKIPAD="splashSkipAd",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(r||(r={}))},2958:(e,t,n)=>{"use strict";var r;n.d(t,{aO:()=>r,Y8:()=>g.Y8,Dx:()=>c,Zw:()=>g.Zw,Af:()=>h,H:()=>g.H,A$:()=>v.A,JF:()=>m,H_:()=>g.H_,Bq:()=>_,nf:()=>g.nf,Eo:()=>l,bk:()=>p,IN:()=>y.$g,v5:()=>a,BB:()=>o,dA:()=>g.dA,_d:()=>g._d,Xw:()=>g.Xw,qW:()=>s,XP:()=>g.XP,jn:()=>u,fc:()=>b}),function(e){e.HIDEAD="hideAd",e.SETSTYLE="setStyle",e.REPORTIDKEY="reportIdKey",e.TRIGGEREVENT="triggerEvent",e.SETEXPRVARS="setExprVar",e.VIDEOTOGGLEMUTED="videoToggleMuted",e.VIDEOPLAY="videoPlay",e.VIDEOPAUSE="videoPause",e.VIDEOSTOP="videoStop",e.BUTTONSETTEXT="buttonSetText",e.RELOADAD="reloadAd",e.REPORTMMDATA="reportMMData",e.ENDPAGEHIDE="endPageHide",e.IMAGESETSRC="imageSetSrc",e.TEXTSETTEXT="textSetText",e.ANIMATE="animate",e.TRIGGERBTNCLICK="triggerBtnClick",e.CHANGEMULTISHOW="changeMultiShow",e.LANDAD="landAd",e.SPLASHSKIPAD="splashSkipAd",e.ADDCHILDREN="addChildren",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(r||(r={}));var i,o,a,s,c,u,l,d,f,p,h,g=n(9883),v=n(7733);!function(e){e[e.COMMON=1]="COMMON",e[e.FULLSCREEN=2]="FULLSCREEN"}(i||(i={})),function(e){e[e.COMMON=1]="COMMON",e[e.ROW=2]="ROW",e[e.COLUMN=3]="COLUMN",e[e.PROPORTION=4]="PROPORTION"}(o||(o={})),function(e){e[e.COMMON=1]="COMMON",e[e.ICON=2]="ICON",e[e.AD=3]="AD"}(a||(a={})),function(e){e[e.COMMON=1]="COMMON",e[e.NICKNAME=2]="NICKNAME",e[e.DESC=3]="DESC",e[e.RELATION=4]="RELATION"}(s||(s={})),function(e){e[e.COMMON=1]="COMMON",e[e.LOGICCOMMON=2]="LOGICCOMMON"}(c||(c={})),function(e){e[e.COMMON=1]="COMMON",e[e.AD=2]="AD"}(u||(u={})),function(e){e[e.COMMON=1]="COMMON",e[e.SIMPLE=2]="SIMPLE"}(l||(l={})),function(e){e[e.COMMON=1]="COMMON"}(d||(d={})),function(e){e[e.COMMON=1]="COMMON"}(f||(f={})),function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.ADS=2]="ADS"}(p||(p={})),function(e){e[e.NONE=0]="NONE",e[e.ROWLOOP=1]="ROWLOOP",e[e.COLUMNLOOP=2]="COLUMNLOOP"}(h||(h={}));var _,m,y=n(1232);!function(e){e[e.ERR_RENDER=2001]="ERR_RENDER",e[e.ERR_TPL_NONE=2002]="ERR_TPL_NONE",e[e.ERR_TPL_PARSE=2003]="ERR_TPL_PARSE",e[e.ERR_SHOW_FAILED1=2004]="ERR_SHOW_FAILED1",e[e.ERR_SHOW_FAILED2=2005]="ERR_SHOW_FAILED2"}(_||(_={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ING=1]="ING",e[e.PAUSE=2]="PAUSE",e[e.SUCCESS=3]="SUCCESS",e[e.INSTALLED=4]="INSTALLED"}(m||(m={}));var b=["left","top","right","bottom","width","height","maxWidth","maxHeight","minWidth","minHeight","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","fontSize","lineHeight","borderRadius"]},9390:(e,t,n)=>{"use strict";n.d(t,{K:()=>S});var r=n(3379),i=n.n(r),o=n(8676),a=n.n(o),s=n(7163),c=n.n(s),u=n(5843),l=n.n(u),d=n(3595),f={type:"EOF"},p=function(){function e(){c()(this,e),this.token=[],this.tokens=[],this.state=null,this.state=this.start}return l()(e,[{key:"isEOF",value:function(e){var t=e;return t&&"object"===a()(t)&&"EOF"===t.type}},{key:"start",value:function(e){return this.isEOF(e)?(this.emmitToken("EOF",f),this.start):"#"===e?(this.token.push(e),this.inTplFunc):"$"===e?(this.token.push(e),this.inTplStr):"&"===e||"|"===e?(this.token.push(e),this.inLogic):/^[0-9]/.test(e)?(this.token.push(e),this.inNumber):"'"===e?this.inQuoteStr:-1!==[">","<","=","!"].indexOf(e)?(this.token.push(e),this.inCompare):"?"===e?(this.emmitToken("QUESTION",e),this.start):":"===e?(this.emmitToken("COLON",e),this.start):","===e?(this.emmitToken("COMMA",e),this.start):/^\s/.test(e)?this.start:null}},{key:"inLogic",value:function(e){return this.isEOF(e)||"&"!==e&&"|"!==e?this.start(e):(this.token.push(e),this.emmitToken("LOGIC",this.token.join("")),this.token=[],this.start)}},{key:"inNumber",value:function(e){return!this.isEOF(e)&&/^[0-9.]/.test(e)?(this.token.push(e),this.inNumber):(this.emmitToken("NUMBER",this.token.join("")),this.token=[],this.start(e))}},{key:"inTplFunc",value:function(e){var t=this;return this.isEOF(e)?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),")"===e&&function(){for(var e=0,n=0,r=0,i=t.token.length;r<i;r++){var o=t.token[r];"("===o?e+=1:")"===o&&(n+=1)}return e===n}()?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start):this.inTplFunc)}},{key:"inTplStr",value:function(e){return!this.isEOF(e)&&/^[a-zA-Z0-9.-_$]/.test(e)?(this.token.push(e),this.inTplStr):(this.emmitToken("TPLSTR",this.token.join("")),this.token=[],this.start(e))}},{key:"inCompare",value:function(e){return this.isEOF(e)||"="!==e?(this.emmitToken("COMPARE",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),this.inCompare)}},{key:"inQuoteStr",value:function(e){return this.isEOF(e)||"'"!==e?(this.token.push(e),this.inQuoteStr):(this.emmitToken("STR",this.token.join("")),this.token=[],this.start)}},{key:"emmitToken",value:function(e,t){this.tokens.push({type:e,value:t})}},{key:"push",value:function(e){this.state&&(this.state=this.state(e))}},{key:"end",value:function(){this.state&&this.state(f)}}]),e}(),h=function(e){for(var t=new p,n=0,r=e.length;n<r;){var i=e[n];n+=1,t.push(i)}return t.end(),t.tokens},g=function(e){return"ROOT"===e.type?{type:"ROOT",maxChildren:0,children:[],priority:-9999}:"TPLFUNC"===e.type?{type:"TPLFUNC",children:[e.value],maxChildren:1,priority:40}:"TPLSTR"===e.type?{type:"TPLSTR",children:[e.value],maxChildren:1,priority:40}:"NUMBER"===e.type?{type:"NUMBER",children:[e.value],maxChildren:1,priority:40}:"STR"===e.type?{type:"STR",children:[e.value],maxChildren:1,priority:40}:"COMPARE"===e.type?{type:"COMPARE",operator:e.value,children:[],maxChildren:2,priority:30,isSign:!0}:"LOGIC"===e.type?{type:"LOGIC",operator:e.value,children:[],maxChildren:2,priority:20,isSign:!0}:"QUESTION"===e.type?{type:"QUESTION",operator:e.value,children:[],maxChildren:3,priority:10,isSign:!0}:"COLON"===e.type?{type:"COLON",operator:e.value,children:[],maxChildren:0,priority:10,isSign:!0}:"EOF"===e.type?{type:"ROOT_END",children:[],maxChildren:0,priority:-9999}:null},v=function(e){return 0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length>=e.maxChildren)},_=function(e){return 0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length<e.maxChildren)},m=function(e){var t;t="string"==typeof e?h(e):e;for(var n=[g({type:"ROOT"})],r=function(e){for(var t=e.priority;v(n[n.length-1])&&_(n[n.length-2])&&t<=n[n.length-1].priority&&t<=n[n.length-2].priority;){var r=n[n.length-2].children;null==r||r.push(n.pop())}},i=function(e){var t=g(e),i=n[n.length-1];if("STR"===t.type||"TPLSTR"===t.type||"NUMBER"===t.type||"TPLFUNC"===t.type){if(v(i))return;_(i)?i.children.push(t):n.push(t)}else"COMPARE"===t.type||"LOGIC"===t.type||"QUESTION"===t.type?v(i)&&(t.priority>i.priority?function(e,t){var r=t.children.pop();r&&e.children.push(r),n.push(e)}(t,i):(r(t),function(e){var t=n.pop();t&&e.children.push(t),n.push(e)}(t))):"ROOT_END"===t.type&&(r(t),n.push(t))},o=0,a=t.length;o<a;o++)i(t[o]);return n},y=function(e,t){var n=e.split("."),r="";return n.forEach((function(e){""===r?r=t[e]:("string"==typeof r&&(r=JSON.parse(r)),r=r[e])})),r},b=function(e,t,n){var r=e.indexOf("("),i=e.substring(0,r),o=e.substring(r+1,e.length-1);if(!n[i])return null;for(var a=h(o),s=[],c=[],u=0,l=a.length;u<l;u++){var d=a[u];"COMMA"===d.type||"EOF"===d.type?(s.push(c),c=[]):c.push(d)}var f=[];return s.forEach((function(e){f.push(S(e,t,n))})),n[i].apply(null,f)},w=function e(t,n){var r=t.type,i=t.children,o=t.operator,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=function(t){return e(i[t],n,a)};if("COMPARE"===r){var c={">":function(){return s(0)>s(1)},"<":function(){return s(0)<s(1)},">=":function(){return s(0)>=s(1)},"<=":function(){return s(0)<=s(1)},"==":function(){return s(0)==s(1)},"!=":function(){return s(0)!=s(1)},"===":function(){return s(0)===s(1)}},u=o&&c[o];return u?u():null}if("LOGIC"===r){var l={"&&":function(){return s(0)&&s(1)},"||":function(){return s(0)||s(1)}},d=o&&l[o];return d?d():null}var f={NUMBER:function(){return Number(i[0])},STR:function(){return i[0]},TPLSTR:function(){return y(i[0],n)},QUESTION:function(){return s(0)?s(1):s(2)},TPLFUNC:function(){return b(i[0],n,a)}},p=f[r]||null;return p?p():null},I={"#scope":function(e){return e},"#no":function(e){return!e},"#add":function(e,t){return e+t},"#sub":function(e,t){return e-t},"#multi":function(e,t){return e*t},"#division":function(e,t){return e/t},"#negative":function(e){return-e},"#toNumber":function(e){return Number(e)},"#toString":function(e){return String(e)},"#toArray":function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},"#ceil":function(e){return Math.ceil(e)},"#floor":function(e){return Math.floor(e)},"#round":function(e){return Math.round(e)},"#substring":function(e,t,n){return e.substring(t,n)},"#like":function(e,t){return-1!==e.indexOf(t)},"#toFixed":function(e,t){return parseFloat(e).toFixed(t)},"#toLowerCase":function(e){return e.toLowerCase()},"#toUpperCase":function(e){return e.toUpperCase()},"#len":function(e){return e.length},"#hansLen":function(e){var t,n=0,r=i()(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n+=/[\u4e00-\u9fa5]/.test(o)?2:1}}catch(e){r.e(e)}finally{r.f()}return n/2},"#parse":function(e){try{return JSON.parse(e)}catch(e){return{}}},"#value":function(e,t){return e[t]||{}},"#truncate":function(e,t){var n,r="",o=0,a=i()(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;if((o+=/[\u4e00-\u9fa5]/.test(s)?2:1)>t){r+="...";break}r+=s}}catch(e){a.e(e)}finally{a.f()}return r},"#concat":function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("")},"#split":function(e,t,n){return null==e?void 0:e.split(t,n)},"#abbrNum":function(e){return e<1e4?e.toString():"".concat((e/1e4).toFixed(1),"万")},"#trimDigit":function(e){var t=e.toString().split(".");if(t.length<2)return e;for(var n=t.slice(-1)[0];"0"===n[n.length-1];)n=n.slice(0,-1);return t.slice(0,-1).concat(n?[n]:[]).join(".")},"#append":function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n&&e.indexOf(t)>-1||e.push(t),e},"#remove":function(e,t){return e.filter((function(e){return e!==t}))},"#include":function(e,t){return e.indexOf(t)>-1},"#mod":function(e,t){return e%t},"#indexedArray":function(e){if(e<=0)return[];for(var t=[],n=0;n<e;n+=1)t.push(n);return t},"#get":d.U2,"#slice":function(e,t,n){return e.slice(t,n)}},S=function(e,t,n){try{var r=m(e);return w(r[1],t,Object.assign({},I,n))}catch(e){}return null}},8612:(e,t,n)=>{"use strict";n.d(t,{FB:()=>o,G0:()=>u});var r=n(7581),i=1,o=function(e,t){i=e/t},a=/([+-]?\d+(?:\.\d+)?)apx/g,s=/([+-]?\d+(?:\.\d+)?)rpx/g,c=function(e){return null!=e&&e.replace?e.replace(s,(function(e,t){return"".concat(function(e){if(0===e)return 0;var t=e/750*r.S.screenWidth;return t<0&&(t=-t),t=Math.floor(t+1e-4),e<0?-t:t}(Number(t)),"px")})):e},u=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?c(e):e;return n&&"string"==typeof n?n.replace(a,(function(e,t){return"".concat(Number(t*i),"px")})):n}},6842:(e,t,n)=>{"use strict";n.d(t,{i:()=>i,f:()=>o});var r={videoDataMap:{}},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(r.videoDataMap[e]=t)},o=function(e){return r.videoDataMap[e]||{}}},7348:(e,t,n)=>{"use strict";n.d(t,{C$:()=>$t,zi:()=>zt,zt:()=>Zt});var r,i=n(7163),o=n.n(i),a=n(5843),s=n.n(a),c=n(7615),u=n.n(c),l=n(4742),d=n.n(l),f=n(7541),p=n.n(f),h=n(2208),g=n.n(h),v=n(1503),_=n.n(v),m=n(3379),y=n.n(m),b=n(8676),w=n.n(b),I=n(12),S=n.n(I),C=n(9583),T=n(2186),E=n(9947),k=n(5282),x=n(4642),A=n(8947),P=n(7871),D=n(8068),O=n(6604),N=n(4052),R=n(8392),M=n(7857),L=n(8510),B=n(4785),F=n(1121);!function(e){e.REWARD_ENDPAGE_HEAD_IMG="REWARD_ENDPAGE_HEAD_IMG",e.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED="REWARD_ENDPAGE_WORDING_LOGO_ENHANCED",e.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED="REWARD_ENDPAGE_WORDING_TEXT_ENHANCED",e.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED="REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED",e.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED="REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_HEAD_IMG="REWARD_EXPAND_CARD_HEAD_IMG",e.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED="REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED="REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED="REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED="REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED",e.REWARD_OLD_ENDPAGE_BUTTON="REWARD_OLD_ENDPAGE_BUTTON",e.REWARD_TEMPLATE_AREA="REWARD_TEMPLATE_AREA",e.REWARD_PAGE_BUTTON="REWARD_PAGE_BUTTON",e.REWARD_PAGE_CARD="REWARD_PAGE_CARD",e.REWARD_PAGE_IMAGE="REWARD_PAGE_IMAGE",e.REWARD_CARD_BUTTON="REWARD_CARD_BUTTON",e.REWARD_CARD="REWARD_CARD",e.REWARD_DOWNLOAD="REWARD_DOWNLOAD",e.REWARD_DYNAMIC_CONTENT="REWARD_DYNAMIC_CONTENT",e.REWARD_DYNAMIC_BUTTON="REWARD_DYNAMIC_BUTTON"}(r||(r={}));var j="REWARDED_DYNAMIC",W=n(5889),U=n(5223),V=n(1033),G=n(9627),H={defaultPageHeadline:{flexDirection:"row"},defaultPageAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},defaultPageWordingWrapper:{marginTop:0,marginBottom:48,height:72},defaultPageAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},defaultPageAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},Z={expandCardHeadline:{flexDirection:"row"},expandCardAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},expandCardWordingWrapper:{marginTop:0,marginBottom:48,height:72},expandCardAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},expandCardAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},q='\n  <view id="container">\n    <video id="video" controls="false" muted="true" autoplay="false" object-fit="contain" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad" player-hint="supportSoftDecode,mp4Only">\n      <view id="blank"></view>\n      <view id="page-card-body">\n        <view id="page-card-hot-area">\n          <image id="page-card-tip-icon"></image>\n          <text id="page-card-tip" value="了解更多"></text>\n        </view>\n        <image id="page-card-container" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=a5af9b5364f6e959667331801f6558e8&filekey=3033020101041f301d02016d040253480410a5af9b5364f6e959667331801f6558e80202423f040d00000004627466730000000131&hy=SH&storeid=32303138313031363036343533343030306464383764313336666664393336663561333230613030303030303664&bizid=1023">\n          <view id="page-card" click-state="true">\n            <image id="page-card-app-icon" bubble-event="true"></image>\n            <view id="page-card-app-information" bubble-event="true">\n              <text id="page-card-app-name" bubble-event="true"></text>\n              <text id="page-card-app-wording" bubble-event="true"></text>\n            </view>\n            <text id="page-card-button" click-state="true"></text>\n          </view>\n          <view id="page-card-split-line"></view>\n          <view id="page-card-img-container">\n            <view id="page-card-img-box" click-state="true">\n              <image id="page-card-img0" bubble-event="true"></image>\n              <image id="page-card-img1" bubble-event="true"></image>\n              <image id="page-card-img2" bubble-event="true"></image>\n              <image id="page-card-img3" bubble-event="true"></image>\n            </view>\n          </view>\n        </image>\n      </view>\n    </video>\n    '.concat('\n  <view id="dynamic-container"></view>\n','\n    <view id="card-container">\n      ').concat('\n  <view id="playable-tips-wrap">\n    <text id="playable-tips-content" value="视频结束后可试玩"></text>\n    <text id="playable-give-up" value="放弃"></text>\n    <view id="playable-cancel-box" click-state="true"></view>\n  </view>\n','\n      <view id="card" click-state="true">\n        <image id="app-icon" bubble-event="true"></image>\n        <view id="app-information" bubble-event="true">\n          <text id="app-name" bubble-event="true"></text>\n          <text id="app-wording" bubble-event="true"></text>\n        </view>\n        <text id="button" click-state="true"></text>\n        <view id="download-button" click-state="true">\n          <text id="download-button-text" bubble-event="true"></text>\n          <text id="download-progress" bubble-event="true">\n            <text id="download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n    ').concat('\n  <view id="expand-card-container">\n    <view id="expand-card-info-container">\n      <view id="expand-card-wording-wrapper">\n        <view id="expand-card-headline" bubble-event="true">\n          <image id="expand-card-app-icon" bubble-event="true"></image>\n          <text id="expand-card-app-name" bubble-event="true"></text>\n        </view>\n        <text id="expand-card-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="expand-card-app-conversion"></text>\n      <text id="expand-card-button" click-state="true"></text>\n    </view>\n  </view>\n',"\n    ").concat('\n  <view id="pendant-container"></view>\n',"\n    ").concat('\n  <view id="default-page-container">\n    <view id="default-page-background-container">\n      <image id="default-page-background-image"></image>\n      <view id="default-page-background-mask"></view>\n    </view>\n    <view id="default-page-info-container">\n      <view id="default-page-wording-wrapper">\n        <view id="default-page-headline" bubble-event="true">\n          <image id="default-page-app-icon" bubble-event="true"></image>\n          <text id="default-page-app-name" bubble-event="true"></text>\n        </view>\n        <text id="default-page-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="default-page-app-conversion"></text>\n      <text id="default-page-button" click-state="true"></text>\n    </view>\n  </view>\n',"\n    ").concat('\n  <view id="page-container">\n    <view id="page-img-container">\n      <view id="page-img-box">\n        <image id="page-img0" bubble-event="true"></image>\n        <image id="page-img1" bubble-event="true"></image>\n        <image id="page-img2" bubble-event="true"></image>\n      </view>\n      <view id="page-img-tips">\n        <view id="page-img-icon0"></view>\n        <view id="page-img-icon1"></view>\n        <view id="page-img-icon2"></view>\n      </view>\n    </view>\n    <view id="page-info-container">\n      <view id="page-info-wrapper">\n        <image id="page-app-icon"></image>\n        <text id="page-app-name"></text>\n        <text id="page-app-wording"></text>\n        <text id="page-app-conversion"></text>\n        <text id="page-button" click-state="true"></text>\n        <view id="page-download-button" click-state="true">\n          <text id="page-download-button-text" bubble-event="true"></text>\n          <text id="page-download-progress" bubble-event="true">\n            <text id="page-download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n  </view>\n','\n    <view id="page-handler"></view>\n    <view id="page-mask"></view>\n    ').concat('\n  <view id="top-bar">\n    <view id="bar-left">\n      <view id="count">\n        <view id="ad-feedback">\n          <text id="ad-text" value="广告" bubble-event="true"></text>\n          <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n          <view id="split-line-left" bubble-event="true"></view>\n        </view>\n        <text id="count-down"></text>\n        <text id="count-down-append"></text>\n      </view>\n    </view>\n    <view id="bar-right">\n      <image id="sound"></image>\n      <view id="split-line"></view>\n      <text id="close" value="关闭"></text>\n    </view>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="top-bar-fix">\n    <view id="bar-left-fix">\n      <image id="sound-fix"></image>\n      <view id="split-line-fix"></view>\n      <text id="count-down-fix"></text>\n      <text id="count-down-append-fix"></text>\n      <text id="close-fix" value="关闭广告"></text>\n    </view>\n  </view>\n','\n    <view id="dialog-close-tip">\n      <view id="ad-close-tip-wrap">\n        <text id="ad-close-tip-content" bubble-event="true" value="感谢你的反馈"></text>\n      </view>\n    </view>\n    <view id="dialog-container">\n      <view id="dialog-mask"></view>\n      <view id="dialog">\n        <text id="dialog-title"></text>\n        <view id="dialog-split"></view>\n        <view id="dialog-button">\n          <text id="dialog-close" value="放弃"></text>\n          <view id="button-split"></view>\n          <text id="dialog-cancel" value="继续"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n'),z=_()(_()(_()(_()(_()(_()(_()({container:{rotate:0,position:"absolute",justifyContent:"center",alignItems:"center",overflow:"hidden",zIndex:1000002,hidden:!0},video:{padding:8,paddingBottom:16,flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",backgroundColor:"#ff0000",position:"absolute",bottom:0},blank:{width:1,height:1},cardContainer:{hidden:!0,position:"absolute",left:8,flexDirection:"column",alignSelf:"stretch",overflow:"hidden"},card:{hidden:!0,backgroundColor:"rgba(247, 247, 247, 0.95)",borderColor:"rgba(0, 0, 0, 0.08)",flexDirection:"row",alignItems:"center",borderRadius:8,portrait:{height:90,padding:16},landscape:{width:348,height:72,padding:10}},appIcon:{borderRadius:8,opacity:.95,portrait:{width:48,height:48,marginRight:10},landscape:{width:45,height:45,marginRight:6}},appInformation:{flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},appName:{height:22.5,lineHeight:22.5,marginBottom:5,fontSize:17,lineBreak:"ellipsis",color:"#000000",portrait:{marginBottom:5},landscape:{marginBottom:2}},appWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#888888",fontSize:14},button:{width:84,height:36,lineHeight:36,textAlign:"center",fontSize:16,color:"#ffffff",borderWidth:1,borderColor:"#07C160",borderRadius:4,marginLeft:8,backgroundColor:"#07C160"},downloadButton:{width:62,height:32,hidden:!0,marginLeft:10},downloadButtonText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},dialogContainer:{zIndex:1000007,position:"absolute",overflow:"hidden",top:0,left:0,hidden:!0},dialogMask:{position:"absolute",overflow:"hidden",backgroundColor:"#000000",opacity:.7,top:0,left:0},dialog:{position:"absolute",width:300,height:168,borderRadius:10,backgroundColor:"rgba(255, 255, 255, 1)"},dialogTitle:{marginTop:28,marginBottom:27,width:300,height:48,lineHeight:24,textAlign:"center",color:"#000000",fontSize:17,fontWeight:"bold",lineBreak:"break-all"},dialogSplit:{width:300,height:1,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogButton:{width:300,justifyContent:"center",flexDirection:"row",alignItems:"center"},buttonSplit:{width:1,height:63.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogClose:{marginTop:19,marginBottom:19,width:149.5,height:25,lineHeight:25,textAlign:"center",color:"#000000",fontWeight:"bold",fontSize:18},dialogCancel:{marginTop:19,marginBottom:19,width:150,height:25,lineHeight:25,textAlign:"center",color:"#576A94",fontWeight:"bold",fontSize:18},pageCardBody:{position:"absolute",hidden:!0,flexDirection:"column",alignItems:"center",height:340},pageCardHotArea:{flexDiretion:"cloumn",alignItems:"center",height:70},pageCardTipIcon:{hidden:!0,marginTop:33,width:20,height:6.5},pageCardTip:{marginTop:2,hidden:!0,width:52,height:20,lineHeight:20,fontSize:13,color:"#ffffff"},pageCardContainer:{borderRadius:10,flexDirection:"column",height:270},pageCard:{paddingLeft:15,paddingRight:15,flexDirection:"row",alignItems:"center",borderRadius:5,height:80},pageCardAppIcon:{borderRadius:10,opacity:.95,width:48,height:48},pageCardAppInformation:{paddingLeft:5,marginTop:3,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},pageCardAppName:{height:22.5,fontSize:16,color:"#ffffff"},pageCardAppWording:{height:20,marginTop:1,color:"#888888",fontSize:14},pageCardButton:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:14,color:"#ffffff",borderWidth:1,backgroundColor:"#07C160",borderColor:"#07C160",borderRadius:4},pageCardSplitLine:{marginLeft:15,marginRight:15,height:1,backgroundColor:"rgba(255, 255, 255, 0.10)"},pageCardImgContainer:{marginTop:15,marginLeft:15,marginRight:15,marginBottom:25,height:150,overflow:"hidden"},pageCardImgBox:{height:150,left:0,flexDirection:"row",justifyContent:"center"},pageCardImg0:{order:0,borderRadius:3},pageCardImg1:{marginLeft:10,order:1,borderRadius:3},pageCardImg2:{marginLeft:10,order:2,borderRadius:3},pageCardImg3:{marginLeft:10,order:3,borderRadius:3},pageHandler:{top:0,position:"absolute",hidden:!0},pageMask:{top:0,position:"absolute",backgroundColor:"#000000",hidden:!0},dialogCloseTip:{hidden:!0,position:"absolute",overflow:"hidden",top:0,left:0},adCloseTipWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{playableTipsWrap:{left:0,hidden:!0,marginBottom:10,width:132,height:32,flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:4},playableTipsContent:{width:100,height:16,lineHeight:16,fontSize:12,color:"#ffffff",textAlign:"center"},playableGiveUp:{hidden:!0,marginLeft:8,width:24,height:32,lineHeight:32,fontSize:12,color:"#07C160"},playableCancelBox:{hidden:!0,width:44,height:32,left:72,position:"absolute"}}),{pageContainer:{top:0,hidden:!0,position:"absolute",backgroundColor:"#ffffff"},pageImgContainer:{position:"absolute",overflow:"hidden",backgroundColor:"#000000"},pageImgBox:{flexDirection:"row",justifyContent:"center",position:"absolute",backgroundColor:"#000000"},pageImg0:{flex:1,order:0},pageImg1:{flex:1,order:1},pageImg2:{flex:1,order:2},pageImgTips:{flexDirection:"row",justifyContent:"center",height:10,width:35},pageImgIcon0:{height:7,width:7,borderRadius:16,backgroundColor:"#ffffff"},pageImgIcon1:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageImgIcon2:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},pageInfoWrapper:{flexDirection:"column",alignItems:"center",height:242},pageAppIcon:{borderRadius:8,width:64,height:64},pageAppName:{marginTop:20,width:180,textAlign:"center",height:28,lineHeight:28,fontSize:20,color:"#000000"},pageAppWording:{marginTop:4,marginBottom:20,width:220,height:28,textAlign:"center",lineHeight:28,color:"#888888",fontSize:17},pageAppConversion:{hidden:!0,width:220,height:24,textAlign:"center",lineHeight:24,color:"#000000",opacity:.3,fontSize:14},pageButton:{marginTop:14,width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4},pageDownloadButton:{marginTop:14,width:166,height:42,hidden:!0},pageDownloadButtonText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#ffffff"},pageDownloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},pageDownloadProgressText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#04be02"}}),{defaultPageContainer:{hidden:!0,top:0,position:"absolute",backgroundColor:"#000000"},defaultPageBackgroundContainer:{position:"absolute"},defaultPageBackgroundMask:{position:"absolute",left:0,top:0,backgroundColor:"#000000",opacity:.6},defaultPageBackgroundImage:{position:"absolute",left:0,top:0},defaultPageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},defaultPageAppIcon:{borderRadius:8,width:64,height:64,left:0},defaultPageAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},defaultPageAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},defaultPageAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},defaultPageButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{topBar:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:0,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10}},barLeft:{flexWrap:"nowrap"},count:{marginLeft:10,paddingLeft:12.5,paddingRight:12.5,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},barRight:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},close:{width:29,height:32,lineHeight:32,color:"#ffffff",fontSize:14},splitLine:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},sound:{width:20,height:20},topBarFix:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:10,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10},hidden:!0},barLeftFix:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},soundFix:{width:20,height:20},splitLineFix:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},countDownFix:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppendFix:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},closeFix:{width:56,height:32,lineHeight:32,color:"#ffffff",fontSize:14},adFeedback:{hidden:!0,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:4},splitLineLeft:{width:1,height:18.5,marginLeft:12,marginRight:12,backgroundColor:"rgba(255, 255, 255, 0.25)"},adFeedbackList:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}}),{expandCardContainer:{hidden:!0,top:0,position:"absolute",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0)"},expandCardInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},expandCardAppIcon:{borderRadius:8,width:64,height:64,left:0},expandCardAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},expandCardAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},expandCardAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},expandCardButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{dynamicContainer:{hidden:!0,position:"absolute",top:0,left:0}}),{pendantContainer:{hidden:!0,position:"absolute"}}),Y=n(7239),K=n(2395),J=n(3123),$=n(999),X=n(8794),Q=n(2958),ee=n(9390),te=n(708),ne=[{op:"insert",id:"innerPendant",parent:"pendantContainer",tpl:{type:"image",id:"innerPendantImage",style:{width:80,height:60},options:{baseType:1,data:{imgUrlExpr:"$scope.private.data.crtInfo.wxgame_video_card.pendant_img"},events:{rewardedVideoPlay:[{action:"rewardedVideoDynamic",expr:"$scope.private.pendantContainer.style.hidden == $const.true",value:{list:[{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth < $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#sub($const.systemInfo.screenWidth, 92)",bottomExpr:"#rewardedVideoIsExpandStyle() ? #add(12, #multi(1032, #division($const.systemInfo.screenWidth, 960))) : 150"}},{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth > $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#rewardedVideoIsExpandStyle() ? #sub(#sub(#division($const.systemInfo.screenWidth, 2), #division($const.systemInfo.screenHeight, 6)), 92)  : #sub($const.systemInfo.screenWidth, 92)",bottom:20}}]}}],tap:[{action:"landAd"},{action:"reportAdMonitorData",value:{id:924,key:172,extInfo:"pendant-click"}}]}}}}],re=V.DX["incentive-video"],ie=function(e){return(0,O.Wj)(e)},oe=function(){return D._u.apply(void 0,arguments)},ae=S()(q).root,se="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",ce="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",ue="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJAic1IGjzG9g458d7DpIe8URUq74t0dicbwKKc69rPBf8hiby1llOBTndbKUq2NTA9YaA/0?wx_fmt=png",le=1e3,de=2e3,fe=500,pe=!1,he="portrait",ge=0,ve=0,_e=0,me=0,ye=0,be=0,we={};A.Z.onReady((function(){we=A.Z.safeArea||{};try{A.Z.global.window.pageOrientation&&(he=A.Z.global.window.pageOrientation)}catch(e){}if(U.S3.isIOS?pe=!0===A.Z.showStatusBar:U.S3.isAndroid&&(pe=!0===A.Z.showStatusBar||"true"===A.Z.showStatusBar),U.S3.isWaGame){var e=n(4853).Z;e.onTouchStart((function(e){null!=e&&e.changedTouches&&e.changedTouches.length>0&&(ge=Math.round(e.changedTouches[0].clientX),ve=Math.round(e.changedTouches[0].clientY),_e=0,me=0,be=0,ye=+new Date)})),e.onTouchEnd((function(e){null!=e&&e.changedTouches&&e.changedTouches.length>0&&(_e=Math.round(e.changedTouches[0].clientX),me=Math.round(e.changedTouches[0].clientY),be=+new Date-ye)}))}}));var Ie=function(e,t){var n=e.touchendTimeStamp-e.touchstartTimeStamp;e.touchendTimeStamp>0&&e.touchstartTimeStamp>0&&n>=0&&(0,$.J)(17035,{aid:t.aid,traceid:t.traceid,touch_start_x:Math.round(e.touchstartPosX),touch_start_y:Math.round(e.touchstartPosY),touch_end_x:Math.round(e.touchendPosX),touch_end_y:Math.round(e.touchendPosY),touch_duration:n,screenwidth:U.S3.screenWidth,screenheight:U.S3.screenHeight,device_orientation:U.S3.deviceOrientation})},Se=function(){var e=ie(this);try{if(U.S3.isIOS&&U.S3.isApp&&e.adProxy.isValidCondition("widget_gray_measure_text")){var t;(0,R.IN)("measureText",{text:e.button.value,fontSize:16,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t={width:e.width||0}}}),!1===e.button.style.hidden&&(e.button.style.width=t.width+24),e.data.flooringPage&&2===e.pageType&&((0,R.IN)("measureText",{text:e.button.value,fontSize:e.pageCardButton.style.fontSize||14,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t={width:e.width||0}}}),e.pageCardButton.style.width=t.width+24)}else{var n=F.Z.getTextWidthInAndroid(e.button.value,e.button.style.fontSize||16)+24;!1===e.button.style.hidden&&(e.button.style.width=n),!1===e.downloadButton.style.hidden&&(n=F.Z.getTextWidthInAndroid(e.downloadButtonText.value,e.downloadButtonText.style.fontSize||13)+24,e.downloadButton.style.width=n+2,e.downloadButtonText.style.width=n,e.downloadProgressText.style.width=n),e.data.flooringPage&&2===e.pageType&&(n=F.Z.getTextWidthInAndroid(e.button.value,e.pageCardButton.style.fontSize||14)+24,e.pageCardButton.style.width=n)}}catch(t){e.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_BUTTON_WIDTH_ERROR,t)}},Ce="video-ad has been destroyed",Te=function(){var e=ie(this);return e.playableTipsWrap.animate({left:-144,duration:200}).then((function(){var t="即将跳转试玩",n={text:t=U.S3.isIOS?"".concat(t," "):t,fontSize:12},r=(0,G.X1)(n)||72,i=(0,G.X1)({text:"放弃",fontSize:12})||24;return e.playableTipsContent.style.width=r,e.playableGiveUp.style.width=i,e.playableTipsWrap.style.width=r+i+32,e.playableTipsContent.value=t,e.playableGiveUp.value="放弃",e.playableGiveUp.style.hidden=!1,e.playableCancelBox.style.left=r+12,e.playableCancelBox.style.hidden=!1,e.playableCancelBox.style.width=i+20,(0,D.Vs)(300).then((function(){return e.playableTipsWrap.animate({left:0,duration:200})}))}))},Ee=function(e){if(!Ot.call(this)){var t=ie(this);if("object"===w()(e)&&e.length>0){var n,r=y()(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i]&&(t[i].style.width=U.S3.screenWidth,t[i].style.height=U.S3.screenHeight)}}catch(e){r.e(e)}finally{r.f()}}}},ke=function(){var e=this;if(Ot.call(this))return Promise.reject({errMsg:Ce});var t=ie(this);return Ae.call(this,"hide").then((function(){U.S3.isWaGame||(t.adProxy.setPageOrientation(U.S3.deviceOrientation),U.S3.isAndroid&&(t.updateScreenInfoTimer&&(clearTimeout(t.updateScreenInfoTimer),t.updateScreenInfoTimer=null),t.updateScreenInfoTimer=setTimeout((function(){var n=U.S3.screenWidth,r=U.S3.screenHeight;(0,U.uj)();var i=!1,o=0;U.S3.screenHeight===r&&U.S3.screenWidth===n||(i=!0,o=U.S3.screenHeight-r),o&&(t.cardContainer.style.top+=o);var a=["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"];Mt.call(e)&&a.push("video"),Ee.call(e,a),i&&Mt.call(e)&&(Ne.call(e,!0),Vt.call(e),Jt.call(e))}),1e3)))}))},xe=function(){if(Ot.call(this))return Promise.reject({errMsg:Ce});var e=ie(this);return Ae.call(this,"show").then((function(){U.S3.isWaGame||e.adProxy.setPageOrientation(he)})).catch((function(t){throw e.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR,t),t}))},Ae=function(e){var t=ie(this);return Bt.call(this)?Promise.resolve():t.adProxy.operateFullscreen(e)},Pe=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Ot.call(this))return!1;var n=ie(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&ft.call(this,e,i),r},De=function(){var e=this;if(!Ot.call(this)){var t=ie(this),n=t.data,r=n.product_type,i=n.button_action,o=n.card,a=o.icon,s=o.name,c=o.wording,u=o.showTime,l=o.headBgImg,d=o.mpTagType,f=n.app,p=n.flooringPage,h=Ft.call(this);t.cardShowTime=u,t.appIcon.src=a,t.appName.value=(0,D.$G)(s,20),t.appWording.value=c,t.appIcon.style.borderRadius=10,-1===[12,19].indexOf(r)&&("portrait"===U.S3.deviceOrientation?t.appIcon.style.borderRadius=27:"landscape"===U.S3.deviceOrientation&&(t.appIcon.style.borderRadius=22)),t.button.value=i.button_text,i.button_text||(12===r?t.button.value="下载":19===r&&(t.button.value="查看")),23===r&&t.adProxy.checkFollow(t.data.app.uin).then((function(n){var r=n?"查看公众号":i.button_text||"关注公众号";t.button.value=r,Se.call(e),t.data.flooringPage&&1===t.pageType&&0===t.buttonTextType?t.pageButton.value=r:t.data.flooringPage&&2===t.pageType&&0===t.buttonTextType?t.pageCardButton.value=r:t.pageType||(t.defaultPageButton.value=r),t.expandCardButton.value=r,ct.call(e,Q.A$.CHANGEADBTNTEXT,{text:r})})).catch((function(){var n=f.isFollowed?"查看公众号":i.button_text||"关注公众号";t.button.value=n,Se.call(e),ct.call(e,Q.A$.CHANGEADBTNTEXT,{text:n})})),1===t.buttonTextType&&(t.button.value=i.button_text,ct.call(this,Q.A$.CHANGEADBTNTEXT,{text:i.button_text})),Se.call(this),t.pageType=null!=p&&p.landpage_type?p.landpage_type:0,Je.call(this),h&&(t.expandCardAppIcon.bubbleEvent=!1),t.expandCardAppIcon.src=a,t.expandCardAppName.value=(0,D.$G)(s,20),t.expandCardAppWording.value=c,t.expandCardButton.value=t.button.value;var g=U.S3.screenWidth,v=U.S3.screenHeight,_=t.expandCardInfoContainer.style;if("portrait"===U.S3.deviceOrientation?(_.width=g,_.justifyContent="flex-start",_.paddingLeft=0,_.paddingTop=48,_.height=400/375*g,_.bottom=0,_.position="absolute"):(_.justifyContent="center",_.paddingLeft=.672*v,_.width=_.paddingLeft+300,_.paddingTop=0,_.height=v,_.bottom=null,_.position=null),!h){var m=F.Z.getTextWidth((0,D.$G)(s,20),17);t.expandCardAppIcon.style.left=134-m/2;for(var y=0,b=Object.keys(Z);y<b.length;y++){var w=b[y],I=Z[w];t[w]&&Object.assign(t[w].style,I)}}if(t.expandCardAppIcon.style.borderRadius=h?8:3,-1===[V.fY.OPEN_PLATFORM_APP_MOB,V.fY.APPLE_APP_STORE].indexOf(r)&&(t.expandCardAppIcon.style.borderRadius=h?32:12),p&&1===t.pageType&&"portrait"===U.S3.deviceOrientation)t.pageAppIcon.src=a,t.pageAppIcon.style.borderRadius=t.appIcon.style.borderRadius,t.pageAppName.value=(0,D.$G)(s,20),t.pageAppWording.value=c,t.pageButton.value=t.button.value,t.imgBaseName="pageImg",t.pageImgContainer.style.width=g,t.pageImgContainer.style.height=g,t.pageImgBox.style.width=3*g,t.pageImgBox.style.height=g,t.pageImgBox.style.left=0,t.pageInfoContainer.style.width=g,t.pageInfoContainer.style.height=v-g,t.pageInfoContainer.style.top=g,t.pageImgTips.style.top=g-20,t.pageImgTips.style.left=g/2-17.5,U.S3.isIOS&&(t.pageImgIcon0.style.borderRadius=4,t.pageImgIcon1.style.borderRadius=4,t.pageImgIcon2.style.borderRadius=4),t.pageImgIcon0.style.backgroundColor="#ffffff",t.pageImgIcon1.style.backgroundColor="rgba(255, 255, 255, 0.55)",t.pageImgIcon2.style.backgroundColor="rgba(255, 255, 255, 0.55)",Ye.call(this),Ne.call(this);else if(p&&2===t.pageType&&"portrait"===U.S3.deviceOrientation)t.pageCardContainer.style.width=g,t.pageCardAppIcon.src=a,t.pageCardAppIcon.style.borderRadius=t.appIcon.style.borderRadius,t.pageCardAppName.value=(0,D.$G)(s,20),t.pageCardAppWording.value=c,t.pageCardButton.value=t.button.value,t.pageCard.style.width=g,t.pageCardSplitLine.style.width=g-20,t.pageCardHotArea.style.width=g,t.pageCardImgContainer.style.width=g-20,t.pageCardImgBox.style.width=qe.call(this,{padding:10}),t.pageCardTipIcon.src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=f8ba19ac709edca00138c47585de39be&filekey=3033020101041f301d02016d040253480410f8ba19ac709edca00138c47585de39be020202d1040d00000004627466730000000131&hy=SH&storeid=32303138313031303133353430323030303461363337313336666664393336663561333230613030303030303664&bizid=1023",t.video.style.padding=0,t.video.style.paddingBottom=0,t.imgBaseName="pageCardImg",Ye.call(this),Ne.call(this),t.pageHandler.style.hidden=!1;else if(p&&[3,4].indexOf(t.pageType)>-1){var S="视频结束后可试玩",C={text:S=U.S3.isIOS?"".concat(S," "):S,fontSize:12},E=(0,G.X1)(C)||100;t.playableTipsContent.style.width=E,t.playableTipsWrap.style.width=E+24,t.cardContainer.style.top-=32}else if(!t.pageType){if(h&&(t.defaultPageAppIcon.bubbleEvent=!1),t.defaultPageAppIcon.src=a,t.defaultPageAppName.value=(0,D.$G)(s,20),t.defaultPageAppWording.value=c,t.defaultPageButton.value=t.button.value,!h){var k=F.Z.getTextWidth((0,D.$G)(s,20),17);t.defaultPageAppIcon.style.left=134-k/2;for(var x=0,A=Object.keys(H);x<A.length;x++){var P=A[x],O=H[P];t[P]&&Object.assign(t[P].style,O)}}t.defaultPageAppIcon.style.borderRadius=h?8:3,-1===[V.fY.OPEN_PLATFORM_APP_MOB,V.fY.APPLE_APP_STORE].indexOf(r)&&(t.defaultPageAppIcon.style.borderRadius=h?32:12),t.defaultPageBackgroundImage.src=l||"",Vt.call(this)}if(8===d){var N=+new Date;(0,K.uQ)({buttonText:t.button.value,aid:t.adProxy.data.aid}).then((function(e){var n=+new Date;if(t.adProxy.reportRelationFetchDuration({startTime:N,endTime:n,showTime:t.showDetailTime||0}),e){var r=e.count,i=e.descText,o="- 最近已有".concat(r,"人").concat(i," -");t.pageType?1===t.pageType&&(t.pageAppConversion.value=o,t.pageAppConversion.style.hidden=!1):(t.defaultPageAppConversion.value=o,t.defaultPageAppConversion.style.hidden=!1),t.expandCardAppConversion.value=o,t.expandCardAppConversion.style.hidden=!1}else t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0})).catch((function(e){t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0,t.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_RELATION_FETCH_ERROR,e)}))}else t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0;t.androidAppState=0,t.button.style.hidden=!1,t.pageButton.style.hidden=!1,t.defaultPageButton.style.hidden=!1,t.expandCardButton.style.hidden=!1,t.downloadButton.style.hidden=!0,t.pageDownloadButton.style.hidden=!0,12===r&&t.adProxy.isValidCondition("widget_gray_video_download_v2")&&(t.button.style.hidden=!0,t.downloadButton.style.hidden=!1,t.downloadButtonText.value=i.button_text,t.downloadProgressText.value=i.button_text,Se.call(this),1===t.pageType&&(t.pageButton.style.hidden=!0,t.pageDownloadButton.style.hidden=!1,t.pageDownloadButtonText.value=i.button_text,t.pageDownloadProgressText.value=i.button_text))}},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ot.call(this))return!1;var t=ie(this);if(t.direction)return t.direction===e.direction;if(1===t.pageType||!t.pageType)return!!t.flooringPageIsShow;if(2===t.pageType){if("left"===e.direction){var n=e.y,r=t.flooringPageIsShow?t.video.style.height-180:0,i=t.flooringPageIsShow?t.video.style.height:0;return!!(n>r&&n<i)}if("top"===e.direction){var o=e.y,a=0,s=t.flooringPageIsShow?t.video.style.height-180:t.video.style.height;return!!(o>a&&o<s)}}return!1},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Ot.call(this)){var t,n=U.S3.screenWidth,r=U.S3.screenHeight,i=ie(this),o="",a="",s=0,c=0,u=0,l=0,d=(r-i.video.style.height)/2;1===i.pageType?(i.pageHandler.style.width=n,i.pageHandler.style.height=n,o="pageImgBox",c=n/4,s=3*n/4-i.pageImgBox.style.width,t={xRevise:!0,decideByDirection:!0,setImgTips:!0,posQueue:[0,-n,-2*n]}):2===i.pageType&&(i.pageHandler.style.width=n,i.pageHandler.style.height=i.video.style.height,i.pageHandler.style.top=(r-i.video.style.height)/2,(r!==i.video.style.height||e)&&(i.pageMask.style.hidden=!1,i.pageMask.style.width=n,i.pageMask.style.height=(r-i.video.style.height)/2,i.pageMask.style.top=(r+i.video.style.height)/2),o="pageCardImgBox",a="pageCardBody",s=n-(c=60)-i.pageCardImgBox.style.width,u=i.video.style.height-i.pageCardBody.style.height+10,!U.S3.isWaGame&&U.S3.isAndroid&&(u=i.video.style.height-i.pageCardBody.style.height+d+10),l=u+180,i.pageCardBody.style.top=l,t={yRevise:!0,directionMap:{up:u,down:l},logPagePull:!0,showTips:!0,xInertia:!0,handleTail:!0,xHead:0,xTail:n-i.pageCardImgBox.style.width-20,touchClick:!0,imgBoxHeight:180,cardHeight:60,buttonWidth:60,buttonHeight:30}),i.flooringPageInfos={xMin:s,xMax:c,yMin:u,yMax:l,xContainer:o,yContainer:a,infos:t}}},Re=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ot.call(this)){var n=ie(this),r=!0===n.flooringPageIsShow?t.max:t.min;return n.pageCardBody.animate({top:r,duration:50}).then((function(){return et.call(e,t)})).then((function(){return Be.call(e)}))}},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ot.call(this)){var t=ie(this),n=e.event?e.event:{};if(Fe.call(this,n))if(t.flooringPageIsShow){var i=t.pageCard.getAbsolutePosition(),o=i.top,a=i.top+e.cardHeight,s=t.pageCardImgContainer.getAbsolutePosition(),c=s.top;if(n.y>o&&n.y<a){var u=t.pageCardButton.getAbsolutePosition(),l=u.top,d=u.top+e.buttonHeight,f=u.left,p=u.left+e.buttonWidth;n.y>l&&n.y<d&&n.x>f&&n.x<p?je.call(this,n,"button",r.REWARD_PAGE_BUTTON):je.call(this,n,"card",r.REWARD_PAGE_CARD)}else n.y>=c&&n.y<=t.video.style.height?je.call(this,n,"img",r.REWARD_PAGE_IMAGE):Re.call(this,e)}else{var h=t.pageCard.getAbsolutePosition(),g=h.top,v=h.top+e.cardHeight,_=t.pageCardButton.getAbsolutePosition(),m=_.top,y=_.top+e.buttonHeight,b=_.left,w=_.left+e.buttonWidth;n.y>g&&n.y<v?n.y>m&&n.y<y&&n.x>b&&n.x<w?je.call(this,n,"button",r.REWARD_PAGE_BUTTON):je.call(this,n,"card",r.REWARD_PAGE_CARD):Re.call(this,e)}}},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ot.call(this)){var t=ie(this),n=e.imgBox?e.imgBox:"",r=e.xMin?e.xMin:0,i=e.xMax?e.xMax:0,o=e.xHead?e.xHead:0,a=e.xTail?e.xTail:0;return t[n].nextLayout((function(){var e=t[n].style.left,s=e;if(e>o&&e<=i?s=o:e>=r&&e<a&&(s=a),s!==e)return t[n].animate({left:s,duration:50})}))}},Be=function(){if(!Ot.call(this)){var e=ie(this);e.flooringPageIsShow?(e.pageCardTipIcon.style.hidden=!0,e.pageCardTip.style.hidden=!0):(e.showTipsTimer&&(clearTimeout(e.showTipsTimer),e.showTipsTimer=null),e.pageCardTipIcon.style.hidden=!1,e.pageCardTip.style.hidden=!1)}},Fe=function(e){if(!Ot.call(this)){var t=ie(this);return!!(Math.abs(e.x-t.startPosX)<30&&Math.abs(e.y-t.startPosY)<30)}},je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;Ot.call(this)||Fe.call(this,e)&&We.call(this,e,t,n)},We=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;if(!Ot.call(this)){var i=ie(this);if([1,2].includes(i.pageType)&&Xe.call(this,e,n),U.S3.isAndroid&&12===i.data.product_type&&1===i.pageType&&i.adProxy.isValidCondition("widget_gray_video_download_v2"))Et.call(this);else if(U.S3.isIOS&&46===i.data.product_type&&6===i.data.dest_type)Promise.race([pt.call(this,e,r),(0,D.Vs)(500)]).then((function(){gt.call(t,{button:5},e),St.call(t)})).catch((function(){gt.call(t,{button:5},e),St.call(t)}));else{pt.call(this,e,r),gt.call(this,{button:5},e);var o={};23===i.data.product_type&&(o["button"===n?"isButton":"toOfficalAccountDetail"]=!0),St.call(this,o)}}},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ot.call(this)){var t=ie(this),n=e.container?e.container:"",r=e.event?e.event:{},i=t[n].getAbsolutePosition();return{x:i.left+r.x,y:i.top+r.y}}},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ot.call(this)){var n=ie(this);n.isPress=e,n.startPosX=null!=t&&t.x?t.x:0,n.startPosY=null!=t&&t.y?t.y:0,n.lastPosX=null!=t&&t.x?t.x:0,n.lastPosY=null!=t&&t.y?t.y:0,n.lastSecondPosX=null!=t&&t.x?t.x:0,n.lastSecondPosY=null!=t&&t.y?t.y:0,n.direction="",n.startTime=e?+new Date:0,e&&n.throttleTimer&&clearTimeout(n.throttleTimer),n.throttleTimer=null,n.timeStamp=0,n.callCount=0,n.distanceList=[]}},Ge=function(){if(!Ot.call(this))for(var e=ie(this),t=e.imgBaseName,n=0;n<3;n++){var r=e[t+n].getAbsolutePosition();e["pageImgIcon".concat(n)].style.backgroundColor=0===r.left?"#ffffff":"rgba(255, 255, 255, 0.55)"}},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ot.call(this)){var t=ie(this),n=e.event?e.event:{},r=e.direction?e.direction:"left",i="top"===r?n.y-t.lastPosY:n.x-t.lastPosX;U.S3.isAndroid&&(i="top"===r?n.y-t.lastSecondPosY:n.x-t.lastSecondPosX);var o=e.critical?e.critical:0;return"top"===r?i<0&&Math.abs(i)>=o?"up":"down":i<0&&Math.abs(i)>=o?"right":"left"}},Ze=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ot.call(this))return Promise.reject({errMsg:Ce});var n=ie(this),r=t.direction?t.direction:"left",i=t.imgBox?t.imgBox:"",o="top"===r?t.event.y:t.event.x,a=He.call(this,t),s=t.directionMap?t.directionMap:{},c=t.posQueue?t.posQueue:[],u=null;if(Object.keys(s).length>0)u=s[a]?s[a]:0;else{o=n[i].style[r],c.sort((function(e,t){return e-t}));for(var l=0,d=c.length-1;l<d;){var f=Math.floor((l+d)/2),p=d-l,h=c[f];if(o===h){u=h;break}if(o>h?l=f:d=f,p<=1)break}if(!u)if(t.decideByDirection)u=c[a]||("right"===a?c[l]:c[d]);else{var g=c[d],v=c[l];u=Math.abs(o-g)>=Math.abs(o-v)?v:g}}return Promise.resolve().then((function(){n[i].style[r]=u})).then((function(){if(t.logPagePull)return et.call(e,t);Ve.call(e)})).then((function(){if(t.showTips)return Be.call(e)})).then((function(){if(t.setImgTips)return n[i].nextLayout((function(){Ge.call(e)}))}))},qe=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ot.call(this)&&t&&"object"===w()(t)){var n=ie(this),r=t.padding?t.padding:0,i=n.pageType,o=n.data.flooringPage.img_list?n.data.flooringPage.img_list:[];o="string"==typeof o?JSON.parse(o):o;var a=0;return o.forEach((function(t,n){var o=ze.call(e,{pageType:i,width:t.width,height:t.height}).width;a+=0===n?o:r+o})),a}},ze=function(e){if(!Ot.call(this)){var t={},n=U.S3.screenWidth;if(!e||"object"!==w()(e))return t;var r=e.pageType,i=e.width,o=e.height;return 1!==r&&r?2===r&&i===o?(t.scale=150/i,t.width=150,t.height=150):2===r&&i!==o&&(t.scale=150/o,t.width=150*i/o,t.height=150):(t.scale=n/i,t.width=n,t.height=n),t}},Ye=function(){var e=this;if(!Ot.call(this)){var t=ie(this),n=t.pageType,r=t.data.flooringPage.img_list?t.data.flooringPage.img_list:[];r="string"==typeof r?JSON.parse(r):r;var i=t.imgBaseName?t.imgBaseName:"";r.forEach((function(r,o){var a=i+o,s=ze.call(e,{pageType:n,width:r.width,height:r.height}),c=s.width,u=s.height,l=s.scale;t[a].scale=l,t[a].style.width=c,t[a].style.height=u,t[a].src=r.image_url}))}},Ke=function(){var e=this;if(Ot.call(this))return Promise.resolve();var t=ie(this);if(!t.data.flooringPage)return Promise.resolve();ut.call(this,Q.dA.REWARDEDVIDEOSHOWFLOORINGPAGE);var n=t.flooringPageInfos,r=n.yMin,i=n.yMax;return 2!==t.pageType||t.flooringPageIsShow?1===t.pageType?t.pageContainer.animate({left:0,duration:300}).then((function(){return et.call(e)})):t.pageType?Promise.resolve():(t.cardContainer.animate({opacity:0,duration:280}),t.defaultPageContainer.animate({opacity:1,duration:280}).then((function(){return et.call(e)}))):t.pageCardBody.animate({top:r,duration:50}).then((function(){return t.flooringPageAutoShow=!0,et.call(e,{min:r,max:i})})).then((function(){return Be.call(e)}))},Je=function(){if(!Ot.call(this)){var e=ie(this);if([1,2].includes(e.pageType)){e.flooringPageState.pageType=e.pageType,e.flooringPageState.card={click:0},e.flooringPageState.button={click:0};for(var t=0;t<=3&&(3!==t||2===e.pageType);t++)e.flooringPageState["img".concat(t)]={exposure:0,click:0}}}},$e=function(){if(!Ot.call(this)){var e=ie(this);if(U.S3.isIOS){for(var t=0;t<3;t++)e["pageImg".concat(t)].src=ue,e["pageCardImg".concat(t)].src=ue;e.pageCardImg3.src=ue,e.pageAppIcon.src=ue,e.pageCardAppIcon.src=ue,e.pageCardTipIcon.src=ue}}},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!Ot.call(this)){var n=ie(this);if("img"===t)for(var r=n.imgBaseName,i=0;i<=3&&(3!==i||2===n.pageType);i++){var o=n[r+i].getAbsolutePosition(),a=n[r+i].style.width,s=n[r+i].style.height,c=o.left,u=o.left+a,l=o.top,d=o.top+s;e.x>=c&&e.x<=u&&e.y>=l&&e.y<=d&&(n.flooringPageState["img".concat(i)].click+=1)}else["card","button"].includes(t)&&(n.flooringPageState[t].click+=1)}},Qe=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Ot.call(this)){var r=ie(this);if(n){if(r.pageType)for(var i=r.imgBaseName,o=0;o<=3&&(3!==o||2===r.pageType);o++){var a=r[i+o].getAbsolutePosition(),s=r[i+o].style.width,c=-s/2,u=U.S3.screenWidth-s/2;a.left>c&&a.left<u&&(r.flooringPageState["img".concat(o)].exposure+=1)}}else r.exposureTimer&&(clearTimeout(r.exposureTimer),r.exposureTimer=null),r.exposureTimer=setTimeout((function(){return e.call(t,!0)}),1e3)}},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ot.call(this)){var t=ie(this);if(2===t.pageType){var n=e.min?e.min:0,r=e.max?e.max:0;t.pageCardBody.style.top!==n||t.flooringPageIsShow||t.flooringPageAutoShow?t.pageCardBody.style.top===r&&t.flooringPageIsShow?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,tt.call(this,{type:2,staytime:0,componentsstartstr:""}),tt.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageShowTime=0,t.flooringPageCloseTime=0,Je.call(this)):t.pageCardBody.style.top===n&&t.flooringPageAutoShow?(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,tt.call(this,{type:4,staytime:0,componentsstartstr:""}),Qe.call(this)):e.isClose&&t.flooringPageIsShow&&(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,tt.call(this,{type:5,staytime:0,componentsstartstr:""}),tt.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Je.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,tt.call(this,{type:1,staytime:0,componentsstartstr:""}),Qe.call(this))}else 1===t.pageType?e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,tt.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Je.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,tt.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),Qe.call(this)):t.pageType||(e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,tt.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Je.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,tt.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),Qe.call(this)))}},tt=function(e){if(!Ot.call(this)){var t=ie(this);1===t.pageType&&delete e.type;var n=[];return n.push(e),t.adProxy.reportFlooringPage(t.pageType,n)}},nt=function(){var e=this;if(Ot.call(this))return Promise.reject({errMsg:Ce});var t=ie(this);return t.adProxy.fetch().then((function(n){try{t.adProxy.setTimePoint("p4");var r=Object.keys(t.emitter.emitter).includes("_events")?Object.keys(t.emitter.emitter._events):[];return"devtools"!==U.S3.platform||r.includes("_error")?(t.data=n,t.isData=!0,rt.call(e),t.adProxy.preloadLanding(),t.emitter.emit("load"),void t.adProxy.setTimePoint("p5")):void console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。（无广告返回时，建议不设置激励视频入口）")}catch(e){throw t.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_PARSE_ERROR,e),{}}}))},rt=function(){if(!Ot.call(this)){var e=ie(this),t=e.data,n=U.S3.deviceOrientation,r=U.S3.screenWidth,i=U.S3.screenHeight;if(e.container.style.left=0,U.S3.isIOS){var o="portrait"===n?we.top?44:12:10,a="portrait"===n?we.top?78:46:44;e.topBar.style.top=o,e.topBarFix.style.top=o,e.adFeedbackList.style.top=a,e.adFeedbackMenu.style.top=a}e.container.style.top=i,e.video.style.padding=8,e.video.style.paddingBottom=16;if(Ee.call(this,["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"]),r<i)e.cardContainer.style.width=r-16,e.cardContainer.style.top=i-130,e.cardContainer.style.left=8,e.topBar.style.left=0,e.topBar.style.width=r,e.card.style.height=90;else if(r>=i){var s=we.top||0;e.cardContainer.style.width=348,e.cardContainer.style.top=i-104,e.cardContainer.style.left=s+18,e.topBar.style.width=r-2*s-16,e.topBar.style.left=s+8,e.card.style.height=72}if(pe&&(e.topBar.style.top=e.topBar.style.top+30,e.topBarFix.style.top=e.topBarFix.style.top+30,e.adFeedbackList.style.top=e.adFeedbackList.style.top+30,e.adFeedbackMenu.style.top=e.adFeedbackMenu.style.top+30),U.S3.isWaGame?e.container.style.fixed&&delete e.container.style.fixed:e.container.style.fixed=!0,e.dialog.style.top=i>138?(i-138)/2:0,e.dialog.style.left=r>300?(r-300)/2:0,e.dialogCloseTip.style.top=(i-36)/2,e.dialogCloseTip.style.left=(r-124)/2,Lt.call(this))e.cardContainer.style.hidden=!0,e.container.style.backgroundColor="rgba(0, 0, 0, 0)",e.topBar.style.hidden=!0,e.topBarFix.style.hidden=!0,e.video.style.hidden=!0,e.video.src&&(e.video.src="https://wxa.wxs.qq.com/images/wxapp/empty.mp4");else{var c,u;e.container.style.backgroundColor="#000000";var l=t.product_type,d=Yt.call(this),f=d.src,p=d.poster,h=d.duration;e.cardContainer.style.hidden=qt.call(this),e.expandCardContainer.style.hidden=!qt.call(this),U.S3.isIOS&&e.video.src===f&&e.video.seek(0),U.S3.isIOS?(e.video.poster=p,(0,D.Vs)(500).then((function(){e.video.src=f}))):(e.video.src=f,e.video.poster=p),e.adProxy.setTimePoint("p8"),e.buttonTextType=e.data.button_action.text_type||0,Jt.call(this),U.S3.isAndroid&&(e.preloadVideo=!0,e.preloadVideoSuccess=!1,e.adProxy.preloadVideo([f]).catch((function(t){e.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_PRELOAD_ERROR,t)})));var g=e.data.rewardedTime,v=Math.ceil((h>g?g:h)/1e3).toString();e.countDown.value=v,e.countDownFix.value=v,e.countDownAppend.value="秒后可获得奖励",e.countDownAppendFix.value="秒后可获得奖励",e.countDown.style.width=2===v.length?19:12,e.countDownFix.style.width=2===v.length?19:12,e.countDownAppend.style.width=100,e.countDownAppendFix.style.width=100,De.call(this),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedback.style.hidden=!1,e.close.value="关闭",e.close.style.width=29),12===l&&(e.adProxy.setAppInstallState(!1),Tt.call(this));var _=[];(null===(c=e.data.crtInfo)||void 0===c||null===(u=c.wxgame_video_card)||void 0===u?void 0:u.pendant_img)&&(_=_.concat(ne));var m=e.adProxy.data.adDynamicList,y=null!=m&&m.length?_.concat(m):_;at.call(this,y)}}},it=function(e){var t=this,n=ie(this),r=(0,te.ei)(U.S3,["screenWidth","screenHeight","deviceOrientation"]);return(0,ee.K)(e,{$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:_()({},r),time:Date.now()},$scope:{private:n,safeArea:we}},{"#rewardedVideoIsExpandStyle":function(){return qt.call(t)}})},ot=null,at=function(e){var t=this,n=ie(this),r=(0,te.ei)(U.S3,["screenWidth","screenHeight","deviceOrientation"]);null!=e&&e.length&&(n.dynamicElems||(n.dynamicElems={}),n.dynamicOldStyle||(n.dynamicOldStyle={}),n.dynamicEmitter||st.call(this),e.forEach((function(e){var i=e.op,o=e.expr;if(!o||it.call(t,o))if("insert"===i){var a,s=e.id,c=e.parent,u=e.tpl,l=e.bubbleEvent;if(null!==(a=n.dynamicElems)&&void 0!==a&&a[s]){var d,f,p;if(r.screenWidth===ot)return;null===(d=(f=n.dynamicElems[s]).remove)||void 0===d||d.call(f),(0,W.unmount)(null===(p=n.dynamicElems[s])||void 0===p?void 0:p.referComponent)}var h=(0,W.render)(X.kq,{manager:null,reporter:null,emitter:n.dynamicEmitter,adProxy:n.adProxy,template:u,systemInfo:_()({},r),scope:{private:n,safeArea:we},adData:n.adProxy.data,adDatas:n.adProxy.datas,adCustomId:j,isEmpty:!1},!1);!1!==l&&h.updateBubbleEvent(),n.dynamicElems[s]=h.getRootElement(),n[c]&&n[c].add(n.dynamicElems[s])}else if("setStyle"===i){var v=e.id,m=e.style,y=n[v]||n.dynamicElems[v]||null;if(y){var b=!1;n.dynamicOldStyle&&!n.dynamicOldStyle[v]&&(b=!0,n.dynamicOldStyle[v]={});for(var w=0,I=Object.keys(m);w<I.length;w++){var S=I[w],C=S,T=m[S];if(S.includes("Expr")){var E=S.split("Expr");if(2===E.length)C=g()(E,1)[0],T=it.call(t,T)}b&&(n.dynamicOldStyle[v][C]=y.style[C]),y.style[C]=T}}}else if("setAttrs"===i){var k=e.id,x=e.attrs,A=n[k]||n.dynamicElems[k]||null;if(A)for(var P=0,D=Object.keys(x);P<D.length;P++){var O=D[P];A[O]=x[O]}}})),ot=r.screenWidth),ut.call(this,Q.dA.REWARDEDVIDEOHANDLEDYNAMICDONE)},st=function(){var e=this,t=ie(this);t.dynamicEmitter=new P.v,t.dynamicEmitter.on("adCustomEvent",(function(n){var i=n.action,o=n.adCustomId,a=n.value;if(o===j)if(i===Q.A$.LANDAD){var s,c=null===(s=n.value)||void 0===s?void 0:s.event;if(!Pe.call(e,c))return;We.call(e,c,"",r.REWARD_DYNAMIC_CONTENT)}else if(i===Q.A$.BTNTAP){var u,l=null===(u=n.value)||void 0===u?void 0:u.event;if(!Pe.call(e,l))return;We.call(e,l,"button",r.REWARD_DYNAMIC_BUTTON)}else if(i===Q.A$.REPORTADMONITORDATA){var d=a.id,f=a.key,p=a.extInfo,h=d?{idKeyGroup:d,idKey:f}:f;t.adProxy.reportAdMonitorData(h,p)}else if(i===Q.A$.REWARDEDVIDEODYNAMIC){var g=a.list;(0,U.uj)(),at.call(e,g)}}))},ct=function(e,t){var n=ie(this);if(n.dynamicElems){for(var r=[],i=0,o=Object.keys(n.dynamicElems);i<o.length;i++){var a=o[i];r.push(n.dynamicElems[a].ready())}Promise.all(r).then((function(){n.dynamicEmitter&&n.dynamicEmitter.emit("adCustomEvent",{adCustomId:j,action:e,value:t})}))}},ut=function(e,t){var n=ie(this);if(n.dynamicElems)for(var r=0,i=Object.keys(n.dynamicElems);r<i.length;r++){var o,a=i[r],s=null===(o=n.dynamicElems[a])||void 0===o?void 0:o.referComponent;s&&s.emitComponentEvent(e,t)}},lt=function(){var e=ie(this);dt.call(this);var t=Yt.call(this);e.keepAliveTimer=setTimeout((function(){e.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_KEEP_ALIVE,{currentTime:e.currentTime,duration:t.duration,src:e.video.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},dt=function(){var e=ie(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},ft=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Ot.call(this))return Promise.reject({errMsg:Ce});var r=ie(this),i=2===r.pageType?r.pageCard.layoutBox:r.card.layoutBox,o=i.width,a=i.height;[0,2,3].includes(n)&&(r.clickCount+=1);var s={slotid:re,costtype:null!==(t=r.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,click_time:+new Date,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:Number(o)||0,ad_height:Number(a)||0,press_interval:e.pressInterval,block_click:n};return r.adProxy.reportTouchClick(s)},pt=function(e,t){if(Ot.call(this))return Promise.reject({errMsg:Ce});var n=ie(this),i=Yt.call(this),o=Promise.resolve(),a={currentTime:n.currentTime,duration:i.duration},s=n.card,c=e.absoluteX,u=e.absoluteY;2===n.pageType?(s=n.pageCardContainer,c=Math.round(e.x),u=Math.round(e.y)):s=[r.REWARD_CARD_BUTTON,r.REWARD_CARD].indexOf(t)>-1?n.card:n.container;var l=s.getAbsolutePosition(),d=l.left,f=l.top,p=s.layoutBox,h=p.width,g=p.height;return o=n.adProxy.reportClick({clickAbsoluteLeft:c,clickAbsoluteTop:u,clickRelativeLeft:c-d,clickRelativeTop:u-f,pressInterval:e.pressInterval,left:d,top:f,width:h,height:g,videoData:a}),jt.call(this,t),oe(o,"激励视频","点击广告卡片"),vt.call(this,{stage:1002}),o},ht=function(e){var t=e.playType,n=e.conditionType;if(Ot.call(this))return Promise.reject({errMsg:Ce});var r=ie(this),i=Yt.call(this);return r.adProxy.reportVideo({playType:t,conditionType:n,playDuration:r.currentTime,videoDuration:i.duration,muted:r.video.muted,rewardedTime:r.data.rewardedTime,isRewarded:r.isRewarded})},gt=function(e){var t,n=e.button,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ot.call(this))return Promise.reject({errMsg:Ce});var i=ie(this),o=Yt.call(this),a=5===n?+new Date:0,s=r?r.pressInterval:0;return i.adProxy.reportBehaviorButton({button:n,isEnded:i.isEnded,playDuration:i.currentTime,videoDuration:null!==(t=null==o?void 0:o.duration)&&void 0!==t?t:0,preloadVideo:i.preloadVideo?1:0,preloadVideoSuccess:i.preloadVideoSuccess?1:0,videoFirstPlay:i.videoFirstPlayTime,cardFirstShow:i.cardFirstShowTime,clickCard:a,pressInterval:s,currentPlayUrl:i.video.src,lastFetchUrl:o?o.src:""})},vt=function(e){var t=e.stage;if(Ot.call(this))return Promise.reject({errMsg:Ce});var n={adtype:2,stage:t};return ie(this).adProxy.reportADFunnelModel(n)},_t=function(e){e?(0,Y.y4)(Y.F0.EVENT_CANVAS_ADS_FIN):(0,Y.y4)(Y.F0.EVENT_CANVAS_ADS_CANCEL)},mt=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!Ot.call(this)){var n=ie(this);n.adProxy.reportTimePoints({slotid:re,costtype:null!==(e=n.adProxy.data)&&void 0!==e&&e.is_cpm?1:2,extInfo:{preloadVideoSuccess:n.preloadVideoSuccess?1:0}});var r=n.isRewarded;n.sound.style.hidden=!1,n.soundFix.style.hidden=!1,n.splitLine.style.hidden=!1,n.splitLineFix.style.hidden=!1,n.landingCount=0,n.clickCount=0,n.isPlaying=!1,n.isVideoCalledPlay=!1,n.isFirstPlaySuccess=!1,n.isShowed=!1,n.isRewarded=!1,n.isEnded=!1,n.isData=!1,n.disableGaussBlur=!1;try{var i;if(n.dynamicElems)for(var o=0,a=Object.keys(n.dynamicElems);o<a.length;o++){var s=a[o],c=n.dynamicElems[s];null!=c&&c.remove&&c.remove(),c.referComponent&&(0,W.unmount)(c.referComponent)}if(n.dynamicOldStyle)for(var u=0,l=Object.keys(n.dynamicOldStyle);u<l.length;u++)for(var d,f=l[u],p=n[f]||(null===(d=n.dynamicElems)||void 0===d?void 0:d[f])||null,h=n.dynamicOldStyle[f],g=0,v=Object.keys(h);g<v.length;g++){var _=v[g];p.style[_]=h[_]}n.dynamicElems=null,n.dynamicOldStyle=null,null!==(i=n.dynamicEmitter)&&void 0!==i&&i.off&&n.dynamicEmitter.off("adCustomEvent"),n.dynamicEmitter=null}catch(e){}n.isCancelPlayablePage=!1,n.isLandingPlayblePage=!1,n.playableTipsContent.value="视频结束后可试玩",n.playableGiveUp.value="放弃",n.playableGiveUp.style.color="#07C160",n.playableGiveUp.style.opacity=1,n.playableTipsWrap.style.width=132,n.playableTipsWrap.style.left=0,n.playableTipsWrap.style.hidden=!0,n.cardContainer.style.hidden=!0,n.playableTipsContent.style.width=120,n.playableGiveUp.style.hidden=!0,n.playableCancelBox.style.hidden=!0,n.cardContainer.style.opacity=1,n.rewardPageCostTime=0,n.isShowedExposureReported=!1,n.isViewableExposureReported=!1,n.adProxy.isViewable=!0,U.S3.isWaGame||(n.isFullscreen=!1),n.downloadProgress.style.width=0,n.pageDownloadProgress.style.width=0,2!==t&&(!U.S3.isWaGame&&(U.S3.isIOS||n.data&&n.data.crt_size===V.vK.CRT_SIZE_REWARD_LANDINGPAGE)?(0,D.Vs)(100).then((function(){n.emitter.emit("close",{isEnded:r}),_t(r)})):(n.emitter.emit("close",{isEnded:r}),_t(r))),n.adProxy.reset();var m=nt.call(this);m.catch((function(){})),n.adFetchResult=m,n.container.style.hidden=!0,n.adCover.hide(),r?vt.call(this,{stage:1005}):vt.call(this,{stage:1006}),1===n.pageType?n.pageContainer.style.hidden=!0:2===n.pageType?(n.pageHandler.style.hidden=!0,n.pageCardBody.style.hidden=!0,n.pageMask.style.hidden=!0,n.pageCardTip.style.hidden=!0,n.video.style.padding=8,n.video.style.paddingBottom=16):n.pageType||(n.defaultPageContainer.style.hidden=!0),n.pageHandler.style.hidden=!0,et.call(this,{isClose:!0}),U.S3.isAndroid&&n.adProxy.setInnerAudioOption(!0).catch((function(){})),n.showTipsTimer&&clearTimeout(n.showTipsTimer),n.exposureTimer&&clearTimeout(n.exposureTimer),n.updateScreenInfoTimer&&clearTimeout(n.updateScreenInfoTimer),n.layoutTimer&&clearTimeout(n.layoutTimer),n.rewardPageTimer&&clearTimeout(n.rewardPageTimer),n.reportDurationTimer&&clearTimeout(n.reportDurationTimer),n.pageType=0,n.imgBaseName="",(0,M.q3)("show",n.adType,0),(0,M.q3)("close",n.adType,+new Date)}},yt=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(Ot.call(this))return Promise.reject({errMsg:Ce});var n=ie(this);return Lt.call(this)||Bt.call(this)?bt.call(this,t):(ht.call(this,{playType:n.isEnded?"complete":"partial",conditionType:"close"}),1===t?(mt.call(this),Promise.resolve()):[2,3].includes(t)?Promise.all([xe.call(this),mt.call(this,t)]):n.container.animate({top:U.S3.screenHeight,duration:fe}).then((function(){return xe.call(e)})).then((function(){return mt.call(e)})))},bt=function(e){if(Ot.call(this))return Promise.reject({errMsg:Ce});var t=ie(this);return Bt.call(this)||(t.container.style.top=U.S3.screenHeight,t.topBar.style.hidden=!0,t.topBarFix.style.hidden=!1,t.dialogClose.value="放弃",t.dialogCancel.value="继续",t.video.style.hidden=!1,t.showDialogContainer=!1),1===e?(mt.call(this),Promise.resolve()):Promise.all([xe.call(this),mt.call(this,e)])},wt=function(){if(!Ot.call(this)){var e=ie(this);if(e.rewardPageCostTime>=15e3)e.isEnded=!0,e.isRewarded=!0,yt.call(this),gt.call(this,{button:4});else{e.showDialogContainer=!0,e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续浏览页面",e.adProxy.setRightButtonHide(!0).catch((function(){}))}}},It=function(){if(!Ot.call(this)){var e=ie(this);if(dt.call(this),e.isRewarded)yt.call(this),gt.call(this,{button:4});else{e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续观看视频",Kt.call(this,"pause"),e.isPause=!0}}},St=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ot.call(this)){var n,r=ie(this),i=Yt.call(this);if(r.notReportExit=!0,r.landingCount+=1,r.landingCount>1)r.adProxy.reportRepeatClick({slotId:re,costType:null!==(n=r.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,clkCnt:r.landingCount,lastClkPeriod:+new Date-r.lastLandingTime,retCode:r.lastJsapiStatus,costTime:r.lastJsapiCostTime,pageStayTime:r.landingPageCostTime,jsapiName:r.lastJsapiName});r.lastLandingTime=+new Date,r.lastJsapiStatus=2,r.lastJsapiCostTime=0,r.isLandingPage=!1,r.landingPageCostTime=0;var o=r.adProxy.land(t);if(23===r.data.product_type&&t&&t.isButton&&!r.adProxy.data.biz_info.is_subscribed?(o.then((function(t){var n=/ok/.test(t.errMsg);n&&(0===r.buttonTextType&&(r.button.value="查看公众号",Se.call(e),ct.call(e,Q.A$.CHANGEADBTNTEXT,{text:"查看公众号"})),r.data.flooringPage&&1===r.pageType&&0===r.buttonTextType?r.pageButton.value="查看公众号":r.data.flooringPage&&2===r.pageType&&0===r.buttonTextType?r.pageCardButton.value="查看公众号":r.pageType||(r.defaultPageButton.value="查看公众号"),r.expandCardButton.value="查看公众号",r.adProxy.data.biz_info&&(r.adProxy.data.biz_info.is_subscribed=1),r.adProxy.reportAdIDKey({key:T.IDKEY.REWARDED_VIDEO_FOLLOW_SUCCESS})),t.errMsg&&(r.lastJsapiName=t.errMsg.replace(":ok","").replace(":fail cancel",""));var i,o=+new Date;(r.lastJsapiStatus=0,r.lastJsapiCostTime=o-r.lastLandingTime,"private_addContact"===r.lastJsapiName)&&r.adProxy.reportLandingTime({slotId:re,costType:null!==(i=r.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,openTime:r.lastLandingTime,closeTime:o,stayTime:r.lastJsapiCostTime,jsapiName:r.lastJsapiName,clickTime:r.lastLandingTime,clkCnt:r.landingCount,retCode:r.lastJsapiStatus,costTime:r.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"});U.S3.isWaGame||!U.S3.isAndroid||Bt.call(e)||setTimeout((function(){r.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),r.container.forceUpdate()}),250)})).catch((function(){r.lastJsapiStatus=1})),Ct.call(this,o)):(r.flooringPageCloseTime=(new Date).getTime(),o.then((function(t){t.errMsg&&(r.lastJsapiName=t.errMsg.replace(":ok","")),"private_openUrl"===r.lastJsapiName||"navigateToMiniProgram"===r.lastJsapiName||"openADCanvas"===r.lastJsapiName||"launchApplication"===r.lastJsapiName?(r.isLandingPage=!0,dt.call(e),r.flooringPageIsShow&&(tt.call(e,{type:3,staytime:r.flooringPageCloseTime-r.flooringPageShowTime,componentsstartstr:JSON.stringify(r.flooringPageState)}),r.flooringPageShowTime=0,r.flooringPageCloseTime=0,Je.call(e))):r.lastJsapiStatus=0,r.lastJsapiCostTime=+new Date-r.lastLandingTime})).catch((function(){r.lastJsapiStatus=1}))),Lt.call(this)||Bt.call(this)){setTimeout((function(){r.notReportExit=!1}),1e3);var a=r.adProxy.reportVideo({playType:r.isPlaying?"partial":"complete",conditionType:"land",playDuration:r.currentTime,videoDuration:i.duration,muted:r.video.muted});oe(a,"激励视频","跳转落地页")}return o}},Ct=function(e){if(!Ot.call(this)){var t=ie(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):Promise.resolve()})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}));return oe(n,"激励视频","关注"),n}},Tt=function(){var e=this;if(!Ot.call(this)){var t=ie(this),n=t.data.appInfo,r=n.apkName,i=n.versionCode,o=n.urlScheme;t.adProxy.getInstallState(r).then((function(n){if(n.isInstalled&&(void 0===n.versionCode||n.versionCode>=i)){if(t.adProxy.setAppInstallState(!0),t.androidAppState=4,t.button&&o&&o.trim().length>0){if(t.button.value="进入应用",t.pageCardButton.value="进入应用",t.pageButton.value="进入应用",t.defaultPageButton.value="进入应用",t.expandCardButton.value="进入应用",ct.call(e,Q.A$.CHANGEADBTNTEXT,{text:"进入应用"}),1===t.buttonTextType){var r=t.data.button_action.button_text;t.button.value=r,t.pageCardButton.value=r,t.pageButton.value=r,t.defaultPageButton.value=r,t.expandCardButton.value=r,ct.call(e,Q.A$.CHANGEADBTNTEXT,{text:r})}Se.call(e)}if(t.adProxy.isValidCondition("widget_gray_video_download_v2")&&t.downloadButtonText&&o&&o.trim().length>0){if(t.downloadButtonText.value="进入应用",t.downloadProgressText.value="进入应用",1===t.buttonTextType){var a=t.data.button_action.button_text;t.downloadButtonText.value=a,t.downloadProgressText.value=a}if(1===t.pageType&&(t.pageDownloadButtonText.value="进入应用",t.pageDownloadProgressText.value="进入应用",1===t.buttonTextType)){var s=t.data.button_action.button_text;t.pageDownloadButtonText.value=s,t.pageDownloadProgressText.value=s}Se.call(e)}}else t.adProxy.isValidCondition("widget_gray_video_download_v2")&&4===t.androidAppState&&(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadProgressText.value=t.data.button_action.button_text,Se.call(e),1===t.pageType&&(t.pageDownloadButtonText.value=t.data.button_action.button_text,t.pageDownloadProgressText.value=t.data.button_action.button_text),t.androidAppState=0)})).catch((function(){}))}},Et=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ot.call(this)){var n=ie(this);pt.call(this,t,r.REWARD_DOWNLOAD);var i,o=n.data.appInfo,a=o.appName,s=o.apkName,c=o.apkUrl,u=o.appMd5,l=o.urlScheme,d=n.adProxy.data,f=d.aid,p=d.traceid,h=d.apurl,g=0,v="";if(n.landingCount+=1,n.lastLandingTime=+new Date,n.lastJsapiStatus=0,n.lastJsapiCostTime=0,4===n.androidAppState)n.adProxy.launchApplication(l).catch((function(){St.call(e,{isButton:!0})})),n.lastJsapiName="launchApplication",n.isLandingPage=!0;else if(0===n.androidAppState){var _=[f,p,s.replace(/./g,"_"),0,20,h.indexOf("ad.wx.com")>-1?1:0].join(".");n.adProxy.addDownloadTaskStraight(a,c,u,_).then((function(t){n.androidDownloadId=t.downloadId,setTimeout(kt.bind(e),le)})).catch((function(){St.call(e,{isButton:!0})})),n.lastJsapiName="addDownloadTaskStraight",g=4,v="下载"}else 1===n.androidAppState?(n.adProxy.pauseDownloadTask(n.androidDownloadId).catch((function(){})),n.downloadButtonText.value="继续下载",n.downloadProgressText.value="继续下载",1===n.pageType&&(n.pageDownloadButtonText.value="继续下载",n.pageDownloadProgressText.value="继续下载"),Se.call(this),n.androidAppState=2,n.lastJsapiName="pauseDownloadTask",g=5,v="暂停"):2===n.androidAppState?(n.adProxy.resumeDownloadTask(n.androidDownloadId).then((function(){setTimeout(kt.bind(e),le)})).catch((function(){})),n.downloadButtonText.value="暂停下载",n.downloadProgressText.value="暂停下载",1===n.pageType&&(n.pageDownloadButtonText.value="暂停下载",n.pageDownloadProgressText.value="暂停下载"),Se.call(this),n.androidAppState=1,n.lastJsapiName="resumeDownloadTask",g=6,v="继续"):3===n.androidAppState&&(n.adProxy.installDownloadTask(n.androidDownloadId).catch((function(){})),n.lastJsapiName="installDownloadTask",g=7,v="安装");if(g>0)n.adProxy.reportLandingTime({slotId:re,costType:null!==(i=n.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,openTime:n.lastLandingTime,clickTime:n.lastLandingTime,clkCnt:n.landingCount,jsapiName:n.lastJsapiName,actTypeInt:g,actTypeStr:v})}},kt=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;if(!Ot.call(this)){var r=ie(this);r.adProxy.queryDownloadTask(r.androidDownloadId).then((function(n){if("download_succ"===n.state)r.downloadButtonText.value="安装应用",r.downloadProgressText.value="安装应用",r.downloadProgress.style.width=r.downloadButton.style.width,1===r.pageType&&(r.pageDownloadButtonText.value="安装应用",r.pageDownloadProgressText.value="安装应用",r.pageDownloadProgress.style.width=r.pageDownloadButton.style.width),r.androidAppState=3,Se.call(t);else if("downloading"===n.state)r.downloadButtonText.value="暂停下载",r.downloadProgressText.value="暂停下载",r.downloadProgress.style.width=r.downloadButton.style.width*parseInt(n.progress,10)/100,1===r.pageType&&(r.pageDownloadButtonText.value="暂停下载",r.pageDownloadProgressText.value="暂停下载",r.pageDownloadProgress.style.width=r.pageDownloadButton.style.width*parseInt(n.progress,10)/100),r.androidAppState=1,Se.call(t);else if("download_fail"===n.state){if(r.downloadButtonText.value=r.data.button_action.button_text,r.downloadProgressText.value=r.data.button_action.button_text,r.downloadProgress.style.width=0,1===r.pageType&&(r.pageDownloadButtonText.value=r.data.button_action.button_text,r.pageDownloadProgressText.value=r.data.button_action.button_text,r.pageDownloadProgress.style.width=0,1===r.buttonTextType)){var i=r.data.button_action.button_text;r.pageDownloadButtonText.value=i}r.androidAppState=0,Se.call(t)}"downloading"!==n.state&&"default"!==n.state||setTimeout(e.bind(t),le)})).catch((function(){n>0&&e.call(t,n-1)}))}},xt=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!Ot.call(this)){var d=ie(this);n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:U.S3.screenWidth,adHeight:U.S3.screenHeight,adPosX:0,adPosY:0,expTime:d.startExposureTime,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})}},At=function(e){var t=ie(this),n={adWidth:U.S3.screenWidth,adHeight:U.S3.screenHeight,adPosX:0,adPosY:0},r={dismatch:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1},quality:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4},duplicate:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}};if(Array.isArray(e)){var i,o=y()(e);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.type,c=a.expTime,u=a.isClickAd,l=a.clickAdTimeMs,d=a.feedbackTimeMs;if("good"!==s){var f=r[s]||{};t.adProxy.reportAdFeedbackData(_()(_()(_()({},n),f),{},{expTime:c||0,isClickAd:u,clickAdTimeMs:l||0,secondGradeTime:d||0}))}}}catch(e){o.e(e)}finally{o.f()}}},Pt=function(){var e=ie(this),t=U.S3.isWaGame?"count":"count_".concat(e.adProxy.getWebviewInfo().currentWebviewId),n=(0,M.GH)(t,e.adType)||0;(0,M.q3)(t,e.adType,n>0?n-1:0),(0,x.Tb)(e.onShow),(0,x.b$)(e.onHide),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),C.uo.remove(e.container),(0,O.bn)(this)},Dt=function(){var e=this;if(!Ot.call(this)){var t=ie(this),n=Promise.resolve();t.isShowed&&(n=xe.call(this).then((function(){t.adCover.hide(),U.S3.isAndroid&&t.adProxy.setInnerAudioOption(!0).catch((function(){})),(0,M.q3)("show",t.adType,0),(0,M.q3)("close",t.adType,+new Date)}))),n.then((function(){Pt.call(e)})).catch((function(){Pt.call(e)})),this._destroyed=!0}},Ot=function(){return this._destroyed},Nt=function(e){var t=ie(this),n=t.adProxy.reportExposure({exposureType:e,left:0,top:0,width:U.S3.screenWidth,height:U.S3.screenHeight});"showed"===e?t.isShowedExposureReported=!0:"viewable"===e&&(t.isViewableExposureReported=!0),oe(n,"激励浏览","原始曝光")},Rt=function(){var e=this,t=ie(this);return Bt.call(this)||(t.container.style.hidden=!1,t.container.style.top=0,t.adCover.show()),t.container.nextLayout().then((function(){return Ot.call(e)?Promise.reject({errMsg:Ce}):(ke.call(e).then((function(){U.S3.isWaGame||(t.isFullscreen=!0)})).catch((function(e){t.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR,e)})),St.call(e))})).then((function(n){if(Bt.call(e)){n?t.adProxy.reportAdMonitorData(T.IDKEY.REWARD_CHANNELS_CALLBACK_SUCCESS,n):t.adProxy.reportAdMonitorData(T.IDKEY.REWARD_CHANNELS_CALLBACK_FAILED);var r=n||{},i=r.rewardedDuration,o=r.feedbackInfo,a=null!=i&&i>=15;t.isEnded=a,t.isRewarded=a,yt.call(e),gt.call(e,{button:a?4:1}),At.call(e,o)}})).catch((function(e){throw(0,M.q3)("show",t.adType,0),e}))},Mt=function(){var e;return(null===(e=ie(this).data)||void 0===e?void 0:e.crt_size)!==T.CrtSize.CRT_SIZE_REWARD_LANDINGPAGE},Lt=function(){var e,t,n=ie(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===T.CrtSize.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)!==T.DestType.DEST_TYPE_CHANNELS},Bt=function(){var e,t,n=ie(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===T.CrtSize.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)===T.DestType.DEST_TYPE_CHANNELS},Ft=function(){var e=ie(this),t=e.data.product_type;return[V.fY.OPEN_PLATFORM_APP_MOB,V.fY.APPLE_APP_STORE,V.fY.WECHAT,V.fY.MINI_GAME].includes(t)||!e.expandCardUseLogoStrategy},jt=function(e){ie(this).adProxy.reportMMClickPos({clickPos:e})},Wt=function(){var e=this,t=ie(this);if(Gt.call(this)){t.disableGaussBlur=!0;var n=Yt.call(this),r=n.poster,i=n.src;t.video.poster!==r&&(t.video.poster=r),t.video.src!==i&&(t.video.src=i,setTimeout((function(){t.isVideoCalledPlay&&Kt.call(e,"play")}),0)),t.video.style.width=U.S3.screenWidth,t.video.style.height=U.S3.screenHeight,Ut.call(this)}},Ut=function(){var e=ie(this);"portrait"===U.S3.deviceOrientation?e.video.style.bottom=217*U.S3.screenWidth/160-U.S3.screenHeight/2:e.video.style.left=43*-U.S3.screenHeight/96},Vt=function(){var e=ie(this),t=U.S3.deviceOrientation,n=U.S3.screenWidth,r=U.S3.screenHeight,i="portrait"===t,o=i?r:n,a=i?n:r;e.defaultPageBackgroundImage.style.width=o,e.defaultPageBackgroundImage.style.height=o;var s=(o-a)/-2;i?(e.defaultPageBackgroundImage.style.left=s,e.defaultPageBackgroundImage.style.top=0):(e.defaultPageBackgroundImage.style.left=0,e.defaultPageBackgroundImage.style.top=s)},Gt=function(){var e=ie(this);return!(!e.data||e.disableGaussBlur)&&Zt(e.data)},Ht=function(e){var t=/(\d+)(?:\.(\d+))?(?:\.(\d+))?(?:\.(\d+))?/.exec(e);return t?t.slice(1).filter((function(e){return null!=e})).join("."):null},Zt=function(e){var t,n,r=zt(e),i="portrait"===U.S3.deviceOrientation,o=e.crt_size===T.CrtSize.CRT_SIZE_REWARD_VEDIO916;if(U.S3.isAndroid){var a,s,c=Ht((null==e||null===(a=e.condition)||void 0===a?void 0:a.widget_gray_rewrad_use_gauss_blur_android_system_version)||""),u=Ht((null==e||null===(s=e.condition)||void 0===s?void 0:s.widget_gray_rewrad_use_gauss_blur_android_wechat_version)||""),l=Ht(U.S3.systemVersion),d=Ht(U.S3.wechatVersion);if(c&&l&&(0,E.yC)(l,c)<0)return!1;if(u&&d&&(0,E.yC)(d,u)<0)return!1}return Boolean((null==e||null===(t=e.condition)||void 0===t?void 0:t.widget_gray_reward_use_gauss_blur)&&(null==e||null===(n=e.gaussVideo)||void 0===n?void 0:n.src)&&i!==o&&[T.CrtSize.CRT_SIZE_REWARD_VEDIO169,T.CrtSize.CRT_SIZE_REWARD_VEDIO916].includes(e.crt_size)&&(r||i))},qt=function(){var e=ie(this);return!!e.data&&zt(e.data)},zt=function(e){var t=e.flooringPage,n="portrait"===U.S3.deviceOrientation,r=[T.CrtSize.CRT_SIZE_REWARD_VEDIO916,T.CrtSize.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);return Boolean(n!==r&&!U.S3.isIPad&&[T.CrtSize.CRT_SIZE_REWARD_VEDIO169,T.CrtSize.CRT_SIZE_REWARD_VEDIO916,T.CrtSize.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size)&&![2,3,4].includes(null==t?void 0:t.landpage_type))},Yt=function(){var e,t,n=ie(this);return Gt.call(this)&&null!==(e=n.data)&&void 0!==e&&e.gaussVideo?n.data.gaussVideo:(null==n||null===(t=n.data)||void 0===t?void 0:t.shortVideo)||null},Kt=function(e){var t=ie(this),n=t.video;n&&("play"===e?(t.isVideoCalledPlay=!0,n.play()):"pause"===e?(t.isVideoCalledPlay=!1,n.pause()):"stop"===e&&(t.isVideoCalledPlay=!1,n.stop()))},Jt=function(){var e=ie(this),t=U.S3.deviceOrientation,n=U.S3.screenWidth,r=U.S3.screenHeight,i=Yt.call(this),o=i.width,a=i.height;if(e.video.style.width=n,e.video.style.height=r,e.video.style.left=0,e.video.style.bottom=0,Gt.call(this)){if("portrait"===t&&o<a)e.video.style.height=Math.floor(n/o*a),e.video.style.width=n;else if("landscape"===t&&o>a){var s=Math.floor(r*o/a);e.video.style.width=s,e.video.style.height=r,e.video.style.left=(n-s)/2}}else qt.call(this)&&Ut.call(this)},$t=function(e){d()(n,e);var t=p()(n);function n(e){var i,a=e.adUnitId,s=e.multiton,c=void 0!==s&&s,l=e.pluginId,d=void 0===l?"":l;o()(this,n),(i=t.call(this))._destroyed=void 0;var f=ie(u()(i));f.emitter=new P.v,f.androidAppState=0,f.androidDownloadId=0,f.adUnitId=a,f.adType="incentive-video",f.adProxy=new T.F({adUnitId:a,adType:"incentive-video",pluginAppid:d}),f.adCover=new k.wy({adUnitId:a,adType:"incentive-video"}),f.isShowedExposureReported=!1,f.isViewableExposureReported=!1,f.isCardExposureReported=!1,f.dynamicElems=null,f.dynamicOldStyle=null,f.dynamicEmitter=null,f.expandCardUseLogoStrategy=!1,f.rewardPageCostTime=0,f.rewardPageTimer=null,f.showDialogContainer=!1,f.isData=!1,f.isFirstPlay=!1,f.isFirstPlaySuccess=!1,f.isPlaying=!1,f.isVideoCalledPlay=!1,f.isRewarded=!1,f.isEnded=!1,f.isPause=!1,f.currentTime=0,f.cardShowTime=0,f.videoFirstPlayTime=0,f.preloadVideo=!1,f.preloadVideoSuccess=!1,f.cardFirstShowTime=0,f.clickCount=0,f.landingCount=0,f.lastLandingTime=0,f.lastJsapiName="",f.lastJsapiStatus=0,f.lastJsapiCostTime=0,f.isLandingPage=!1,f.landingPageCostTime=0,f.hideTime=0,f.showTime=0,f.startExposureTime=0,f.clickFirstGradeTime=0,f.flooringPageIsShow=!1,f.flooringPageShowTime=0,f.flooringPageCloseTime=0,f.flooringPageState={},f.flooringPageAutoShow=!1,f.showTipsTimer=null,f.exposureTimer=null,f.isCancelPlayablePage=!1,f.isLandingPlayblePage=!1,f.buttonTextType=0,f.isPress=!1,f.startPosX=0,f.startPosY=0,f.lastPosX=0,f.lastPosY=0,f.lastSecondPosX=0,f.lastSecondPosY=0,f.direction="",f.throttleTimer=null,f.timeStamp=0,f.callCount=0,f.distanceList=[],f.startTime=0,f.lastStartTime=0,f.lastMoveTime=0,f.flooringPageInfos={},f.weappTouchEventHandler=null,f.updateScreenInfoTimer=null,f.layoutTimer=null,f.closeEventCount=0,f.reportDurationTimer=null,f.disableGaussBlur=!1,i._destroyed=!1,N.i.call(u()(i),ae,z);var p=U.S3.deviceOrientation,h=U.S3.screenWidth,v=U.S3.screenHeight;f.container.style.width=h,f.container.style.height=v,f.container.style.top=v,f.container.style.hidden=!0,f.topBar.style.width=h,f.sound.src=ce,f.soundFix.src=ce,f.appIcon.src=ue,$e.call(u()(i)),U.S3.isIOS&&(f.video.obeyMuteSwitch=!0),C.uo.add(f.container),pe&&(f.topBar.style.top=f.topBar.style.top+30,f.topBarFix.style.top=f.topBarFix.style.top+30,f.adFeedbackList.style.top=f.adFeedbackList.style.top+30,f.adFeedbackMenu.style.top=f.adFeedbackMenu.style.top+30);Ee.call(u()(i),["dialogContainer","dialogMask"]),f.dialog.style.top=v>138?(v-138)/2:0,f.dialog.style.left=h>300?(h-300)/2:0,U.S3.isWaGame||(f.container.fullscreen=!0,f.isFullscreen=!1);var _=nt.call(u()(i));_.catch((function(){})),f.adFetchResult=_,f.isSwitched=!1,U.S3.isWaGame||(0,L.q)((function(){if(!Ot.call(u()(i))){var e=f.adProxy.getWebviewInfo(),t=e.openType,n=e.createWebviewId,r=e.lastWebviewId;if(["navigateTo","switchTab"].includes(t)&&n===r&&(f.isSwitched=!0),["navigateBack","navigateTo"].includes(t)&&n===r&&f.isShowed&&f.isData){var o=f.isFullscreen?3:1;gt.call(u()(i),{button:6}),yt.call(u()(i),o)}}})),f.close.on("click",(function(e){Pe.call(u()(i),e,!1)&&It.call(u()(i))})),f.closeFix.on("click",(function(e){Pe.call(u()(i),e,!1)&&It.call(u()(i))})),f.dialogClose.on("click",(function(e){Pe.call(u()(i),e,!1)&&(f.dialogContainer.style.hidden=!0,yt.call(u()(i)),gt.call(u()(i),{button:1}))})),f.dialogCancel.on("click",(function(e){Pe.call(u()(i),e,!1)&&(f.dialogContainer.style.hidden=!0,Lt.call(u()(i))?(f.showDialogContainer=!1,St.call(u()(i))):(Kt.call(u()(i),"play"),lt.call(u()(i))),gt.call(u()(i),{button:2}))})),f.sound.on("click",(function(e){Pe.call(u()(i),e,!1)&&(f.video.muted=!f.video.muted,f.sound.src=f.video.muted?ce:se)})),f.soundFix.on("click",(function(e){Pe.call(u()(i),e,!1)&&(f.video.muted=!f.video.muted,f.soundFix.src=f.video.muted?ce:se)})),f.adFeedback.on("click",(function(e){Pe.call(u()(i),e,!1)&&(f.adFeedbackList.style.hidden=!f.adFeedbackMenu.style.hidden||!f.adFeedbackList.style.hidden,f.adFeedbackList.style.hidden||xt.call(u()(i),{firstGradeId:1,firstGradeDesc:"广告角标"}))})),f.adFeedbackBtn.on("click",(function(e){Pe.call(u()(i),e,!1)&&(f.adProxy.openFeedbackUrl(U.S3.isWaGame?1003:1005),f.adFeedbackList.style.hidden=!0,xt.call(u()(i),{secondGradeId:1,secondGradeDesc:"投诉"}))})),f.adDislikeBtn.on("click",(function(e){Pe.call(u()(i),e,!1)&&(xt.call(u()(i),{secondGradeId:2,secondGradeDesc:"不感兴趣"}),f.adFeedbackList.style.hidden=!0,f.adFeedbackMenu.style.hidden=!1)})),f.adQualityBtn.on("click",(function(e){Pe.call(u()(i),e,!1)&&(f.adFeedbackMenu.style.hidden=!0,xt.call(u()(i),{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),f.dialogCloseTip.style.hidden=!1,(0,D.Vs)(de).then((function(){f.dialogCloseTip.style.hidden=!0})))})),f.adDuplicateBtn.on("click",(function(e){Pe.call(u()(i),e,!1)&&(f.adFeedbackMenu.style.hidden=!0,xt.call(u()(i),{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),f.dialogCloseTip.style.hidden=!1,(0,D.Vs)(de).then((function(){f.dialogCloseTip.style.hidden=!0})))})),f.adDismatchBtn.on("click",(function(e){Pe.call(u()(i),e,!1)&&(f.adFeedbackMenu.style.hidden=!0,xt.call(u()(i),{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),f.dialogCloseTip.style.hidden=!1,(0,D.Vs)(de).then((function(){f.dialogCloseTip.style.hidden=!0})))})),f.video.onTimeUpdate((function(e){var t=Number(e.duration),n=Number(e.position);try{if(Ot.call(u()(i))||!f.isShowed)return;if(lt.call(u()(i)),f.isFirstPlay){var r=0;f.showTime>f.videoFirstPlayTime&&(r=f.showTime-f.videoFirstPlayTime),f.adProxy.setTimePoint("p21",{time:Date.now()-1e3*n}),f.adProxy.reportVideoLoadTime({beginTime:f.videoFirstPlayTime,endTime:(new Date).getTime()-Math.floor(1e3*n),departureTime:r,preloadVideo:f.preloadVideo?1:0,preloadVideoSuccess:f.preloadVideoSuccess?1:0,reportType:1}),f.isFirstPlay=!1,vt.call(u()(i),{stage:1004})}if(f.isPlaying=!0,n>0&&(f.currentTime=1e3*n),n>=1&&!f.isViewableExposureReported){var o=f.video.style,a=o.width,s=o.height;f.isViewableExposureReported=!0,f.adProxy.isViewable=!0;var c=f.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:a,height:s});oe(c,"激励视频","可视曝光")}Math.ceil(t-n)<=6&&[3,4].indexOf(f.pageType)>-1&&f.playableGiveUp.style.hidden&&Te.call(u()(i));var l=f.data.rewardedTime,d=Yt.call(u()(i)).duration,h=t>l/1e3?l/1e3:t||d/1e3,g=Math.ceil((d>l?l:d)/1e3);if(0===t&&(f.reportDurationTimer&&clearTimeout(f.reportDurationTimer),f.reportDurationTimer=setTimeout((function(){f.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_DURATION_ZERO,{duration:t,durationFromAd:d,rewardedTime:l})}),1e3)),h>n){var v=Math.ceil(h-n);v>g&&(v=g),f.countDown.value=v.toString(),f.countDownFix.value=v.toString(),f.countDownAppend.value="秒后可获得奖励",f.countDownAppendFix.value="秒后可获得奖励",f.countDown.style.width=2===v.toString().length?19:12,f.countDownFix.style.width=2===v.toString().length?19:12,f.countDownAppend.style.width=100,f.countDownAppendFix.style.width=100}else f.countDown.style.hidden=!0,f.countDownFix.style.hidden=!0,f.sound.style.hidden=!0,f.soundFix.style.hidden=!0,f.splitLine.style.hidden=!0,f.splitLineFix.style.hidden=!0,f.countDownAppend.value="已获得奖励",f.countDownAppendFix.value="已获得奖励",f.countDownAppend.style.width=72,f.countDownAppendFix.style.width=72,f.isRewarded=!0;if((1e3*n>=f.cardShowTime||1e3*n>0)&&f.card.style.hidden){if(f.data.flooringPage&&2===f.pageType&&"portrait"===p?f.pageCardBody.style.hidden=!1:(f.playableTipsWrap.style.hidden=!(f.data.flooringPage&&[3,4].indexOf(f.pageType)>-1),f.card.style.hidden=!1),f.isCardExposureReported)return;f.card.nextLayout((function(){var e=f.card.getAbsolutePosition(),t=e.left,n=e.top,r=f.card.layoutBox,o=r.width,a=r.height;f.isCardExposureReported=!0;var s=f.adProxy.reportExposure({exposureType:"incentiveVideoCard",left:t,top:n,width:o,height:a});oe(s,"激励视频","卡片曝光"),f.cardFirstShowTime=(new Date).getTime(),f.data.flooringPage&&2===f.pageType&&(f.showTipsTimer=setTimeout((function(){Be.call(u()(i))}),3e3))}))}ut.call(u()(i),Q.dA.REWARDEDVIDEOTIMEUPDATE,{event:e})}catch(e){f.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_RENDER_ERROR,e)}})),f.video.onEnded((function(){var e,t;if(!Ot.call(u()(i))&&f.isShowed){f.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_END),dt.call(u()(i)),f.countDown.style.hidden=!0,f.countDownFix.style.hidden=!0,f.sound.style.hidden=!0,f.soundFix.style.hidden=!0,f.splitLine.style.hidden=!0,f.splitLineFix.style.hidden=!0,f.countDownAppend.value="已获得奖励",f.countDownAppendFix.value="已获得奖励",f.countDownAppend.style.width=72,f.countDownAppendFix.style.width=72,f.isRewarded=!0,f.isPlaying=!1,f.isVideoCalledPlay=!1,f.isEnded=!0,f.isPause=!1;var n=Yt.call(u()(i)).duration;f.currentTime=n;var r=null===(e=f.data)||void 0===e||null===(t=e.card)||void 0===t?void 0:t.headBgImg,o=f.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:f.currentTime,videoDuration:n,muted:f.video.muted});if(f.data.flooringPage&&1===f.pageType&&"portrait"===p)f.pageContainer.style.width=h,f.pageContainer.style.height=v,f.pageContainer.style.left=h,f.pageContainer.style.hidden=!1,f.pageHandler.style.hidden=!1,f.pageHandler.style.zIndex=1000003,f.topBar.style.zIndex=1000004,f.pageImgTips.style.zIndex=1000004,f.pageContainer.nextLayout((function(){Ke.call(u()(i))}));else if(f.data.flooringPage&&2===f.pageType&&"portrait"===p)Ke.call(u()(i));else if(f.data.flooringPage&&[3,4].indexOf(f.pageType)>-1&&!f.isCancelPlayablePage){var a=f.data.flooringPage.page_url||"";if(!a&&f.data.crtInfo)try{a=f.data.crtInfo.wxgame_video_card.flooring_page.page_url||""}catch(e){}f.adProxy.handleRewardedVideoPlayableLand(a,f.pageType).then((function(){f.isLandingPlayblePage=!0}))}else!f.pageType&&r&&(f.defaultPageContainer.style.hidden=!1,f.defaultPageContainer.style.opacity=0,f.defaultPageContainer.nextLayout((function(){Ke.call(u()(i))})));oe(o,"激励视频","播放完成")}})),f.video.onError((function(e){f.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_LOAD_ERROR,e),dt.call(u()(i)),Gt.call(u()(i))&&Wt.call(u()(i))})),f.playableCancelBox.on("click",(function(e){var t;if(Pe.call(u()(i),e)&&!f.isCancelPlayablePage){f.isCancelPlayablePage=!0,f.playableGiveUp.value="已放弃",f.playableGiveUp.style.color="#ffffff",f.playableGiveUp.style.opacity=.6;var n=(0,G.X1)({text:"已放弃",fontSize:12})||36;f.playableGiveUp.style.width=n,f.playableTipsWrap.style.width=f.playableTipsContent.style.width+n+32,f.adProxy.reportCancelRewardPlayablePage({costtype:null!==(t=f.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,slotid:re,is_reward:1,is_cancel:1})}})),f.pageButton.on("click",(function(e){Pe.call(u()(i),e)&&We.call(u()(i),e,"button",r.REWARD_OLD_ENDPAGE_BUTTON)}));var m=function(e){return function(t){if(Pe.call(u()(i),t)){var n=Ft.call(u()(i));if(!(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))){var o=[[r.REWARD_ENDPAGE_HEAD_IMG,n&&"logo"===e],[r.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[r.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[r.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED,n&&"button"===e],[r.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((function(e){return g()(e,2)[1]}))[0];We.call(u()(i),t,"button"===e?"button":"",o)}}}},y=function(e){return function(t){if(Pe.call(u()(i),t)){var n=Ft.call(u()(i));if(!(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))){var o=[[r.REWARD_EXPAND_CARD_HEAD_IMG,n&&"logo"===e],[r.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[r.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[r.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED,n&&"button"===e],[r.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((function(e){return g()(e,2)[1]}))[0];We.call(u()(i),t,"button"===e?"button":"",o)}}}};if(f.defaultPageButton.on("click",m("button")),f.defaultPageAppIcon.on("click",m("logo")),f.defaultPageAppName.on("click",m("wording")),f.defaultPageAppWording.on("click",m("wording")),f.defaultPageWordingWrapper.on("click",m("wrapper")),f.expandCardButton.on("click",y("button")),f.expandCardAppIcon.on("click",y("logo")),f.expandCardAppName.on("click",y("wording")),f.expandCardAppWording.on("click",y("wording")),f.expandCardWordingWrapper.on("click",y("wrapper")),f.pageDownloadButton.on("click",(function(e){Pe.call(u()(i),e)&&Et.call(u()(i),e)})),f.button.on("click",(function(e){Pe.call(u()(i),e)&&(U.S3.isIOS&&46===f.data.product_type&&6===f.data.dest_type?Promise.race([pt.call(u()(i),e,r.REWARD_CARD_BUTTON),(0,D.Vs)(500)]).then((function(){gt.call(u()(i),{button:5},e),St.call(u()(i))})).catch((function(){gt.call(u()(i),{button:5},e),St.call(u()(i))})):(pt.call(u()(i),e,r.REWARD_CARD_BUTTON),gt.call(u()(i),{button:5},e),23===f.data.product_type?St.call(u()(i),{isButton:!0}):St.call(u()(i))))})),f.downloadButton.on("click",(function(e){Pe.call(u()(i),e)&&Et.call(u()(i),e)})),f.card.on("click",(function(e){Pe.call(u()(i),e)&&(U.S3.isIOS&&46===f.data.product_type&&6===f.data.dest_type?Promise.race([pt.call(u()(i),e,r.REWARD_CARD),(0,D.Vs)(500)]).then((function(){gt.call(u()(i),{button:5},e),St.call(u()(i))})).catch((function(){gt.call(u()(i),{button:5},e),St.call(u()(i))})):(pt.call(u()(i),e,r.REWARD_CARD),gt.call(u()(i),{button:5},e),23===f.data.product_type?St.call(u()(i),{toOfficalAccountDetail:!0}):St.call(u()(i))))})),f.pageHandler.on("touchstart",(function(e){if(!Ot.call(u()(i))){var t=Ue.call(u()(i),{event:e,container:"pageHandler"});f.startPosX=t.x,f.startPosY=t.y,f.lastPosX=t.x,f.lastPosY=t.y,f.lastStartTime=(new Date).getTime()}})),f.pageHandler.on("touchmove",(function(e){if(!Ot.call(u()(i))){var t=f.pageHandler.getAbsolutePosition(),n=t.left+e[0].x,r=t.top+e[0].y,o=f.flooringPageInfos,a=o.xMin,s=o.xMax,c=o.yMin,l=o.yMax,d=o.xContainer,p=o.yContainer;if(n-f.lastPosX!=0&&d&&Oe.call(u()(i),{x:n,y:r,direction:"left"})){var h=f[d].style.left;(h+=n-f.lastPosX)>=a&&h<=s&&(f[d].style.left=h,f.lastSecondPosX=f.lastPosX,f.lastPosX=n,f.direction="left",f.lastMoveTime=(new Date).getTime())}if(r-f.lastPosY!=0&&p&&Oe.call(u()(i),{x:n,y:r,direction:"top"})){var g=f[p].style.top;(g+=r-f.lastPosY)>=c&&g<=l&&(f[p].style.top=g,f.lastSecondPosY=f.lastPosY,f.lastPosY=r,f.direction="top")}}})),f.pageHandler.on("touchend",(function(e){if(!Ot.call(u()(i))){var t=Ue.call(u()(i),{event:e,container:"pageHandler"}),n=f.flooringPageInfos,r=n.xMin,o=n.xMax,a=n.yMin,s=n.yMax,c=n.xContainer,l=n.yContainer,d=n.infos;if(d.event=t,d.event&&(d.event.pressInterval=(new Date).getTime()-f.lastStartTime),d.touchClick&&Me.call(u()(i),Object.assign({},d,{event:t,max:s,min:a})),"top"===f.direction&&d.yRevise)Ze.call(u()(i),Object.assign({},d,{max:s,min:a,direction:"top",imgBox:l}));else if("left"===f.direction&&d.xRevise)Ze.call(u()(i),Object.assign({},d,{max:o,min:r,direction:"left",imgBox:c})),Qe.call(u()(i));else if("left"===f.direction&&d.xInertia){var p=t.x-f.lastPosX,h=f[c].style.left+5*p;h>=d.xHead&&h<=d.xTail?f[c].style.left=h:Le.call(u()(i),Object.assign({},d,{xMax:o,xMin:r,imgBox:c})),Qe.call(u()(i))}else f.startPosX=0,f.startPosY=0,f.lastPosX=0,f.lastPosY=0,f.lastSecondPosX=0,f.lastSecondPosY=0,f.direction="";f.direction=""}})),f.onShow=function(){if(!Ot.call(u()(i))&&(f.adProxy.setTimePoint("p11"),[3,4].indexOf(f.pageType)>-1&&f.isLandingPlayblePage&&yt.call(u()(i)),!Bt.call(u()(i)))){if(Lt.call(u()(i))&&f.isShowed&&!f.showDialogContainer)return f.rewardPageTimer&&clearTimeout(f.rewardPageTimer),f.rewardPageCostTime+=+new Date-f.hideTime-400,wt.call(u()(i)),setTimeout((function(){f.lastJsapiStatus=0,f.isLandingPage=!1}),10),void(U.S3.isWaGame||!U.S3.isAndroid||Bt.call(u()(i))||(f.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),f.layoutTimer=setTimeout((function(){f.container.forceUpdate()}),250)));!f.isShowed||f.isEnded||f.isPause||setTimeout((function(){!f.isShowed||f.isEnded||f.isPause||(Kt.call(u()(i),"play"),lt.call(u()(i)))}),1e3),f.data&&23===f.data.product_type?f.adProxy.checkFollow(f.data.app.uin).then((function(e){var t=f.data.button_action.button_text;0===f.buttonTextType&&(f.button.value=e?"查看公众号":t,Se.call(u()(i)),ct.call(u()(i),Q.A$.CHANGEADBTNTEXT,{text:e?"查看公众号":t})),f.data.flooringPage&&2===f.pageType&&0===f.buttonTextType?f.pageCardButton.value=e?"查看公众号":t:f.data.flooringPage&&1===f.pageType&&0===f.buttonTextType?f.pageButton.value=e?"查看公众号":t:f.pageType||(f.defaultPageButton.value=e?"查看公众号":t),f.expandCardButton.value=e?"查看公众号":t,f.adProxy.data.biz_info&&(f.adProxy.data.biz_info.is_subscribed=e?1:0)})):f.data&&12===f.data.product_type&&Tt.call(u()(i)),f.showTime=+new Date,setTimeout((function(){var e;(f.flooringPageIsShow&&(f.flooringPageShowTime=+new Date,Qe.call(u()(i))),f.isLandingPage)&&(f.lastJsapiStatus=0,f.isLandingPage=!1,f.landingPageCostTime=f.showTime-f.hideTime,f.adProxy.reportLandingTime({slotId:re,costType:null!==(e=f.adProxy.data)&&void 0!==e&&e.is_cpm?1:2,openTime:f.hideTime,closeTime:f.showTime,stayTime:f.landingPageCostTime,jsapiName:f.lastJsapiName,clickTime:f.lastLandingTime,clkCnt:f.landingCount,retCode:f.lastJsapiStatus,costTime:f.lastJsapiCostTime,actTypeInt:1}),U.S3.isWaGame||!U.S3.isAndroid||Bt.call(u()(i))||(f.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),f.layoutTimer=setTimeout((function(){f.container.forceUpdate()}),250)),f.adProxy.setRightButtonHide(!0).catch((function(){})))}),10)}},(0,x.dN)(f.onShow),f.onHide=function(){if(!Ot.call(u()(i))){var e=Yt.call(u()(i));if(f.hideTime=+new Date,Lt.call(u()(i))&&f.isShowed){var t=f.adProxy.checkCanvasXmlState();return!t&&!f.isShowedExposureReported&&Nt.call(u()(i),"showed"),!t&&!f.isViewableExposureReported&&Nt.call(u()(i),"viewable")}if(!f.notReportExit&&f.isShowed){dt.call(u()(i));var n=f.adProxy.reportVideo({playType:f.isPlaying?"partial":"complete",conditionType:"exit",playDuration:f.currentTime,videoDuration:e.duration,muted:f.video.muted});oe(n,"激励视频","退出小游戏"),f.flooringPageIsShow&&(f.flooringPageCloseTime=(new Date).getTime(),tt.call(u()(i),{type:6,staytime:f.flooringPageCloseTime-f.flooringPageShowTime,componentsstartstr:JSON.stringify(f.flooringPageState)}),f.flooringPageShowTime=0,f.flooringPageCloseTime=0,Je.call(u()(i)))}}},(0,x.vv)(f.onHide),(0,R.jQ)("onVideoResourceLoad",(function(e){!f.isShowed&&f.video&&f.video.src===e.resource&&(f.preloadVideoSuccess=!0,f.video.src=e.resource,f.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_PRELOAD_SUCCESS))})),!0===c){var b=U.S3.isWaGame?"count":"count_".concat(f.adProxy.getWebviewInfo().currentWebviewId),w=((0,M.GH)(b,f.adType)||0)+1;(0,M.q3)(b,f.adType,w),w>=5&&(console.warn("系统检测到您创建的激励视频广告实例过多，由于您当前使用的是多例模式，为避免影响".concat(U.S3.isWaGame?"小游戏":"小程序","性能，请减少实例创建数量或调用destroy方法销毁无用的实例")),5===w&&f.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_INSTANCE_BROKEN))}return i}return s()(n,[{key:"load",value:function(){if(Ot.call(this))return Promise.reject({errMsg:Ce});var e=ie(this);if(e.isShowed)return Promise.reject({errMsg:"can't invoke load() while video-ad is showed"});if(e.isData)return Promise.resolve();var t=nt.call(this);return e.adFetchResult=t.catch((function(t){var n=-12001===t.errCode?{errMsg:"RewardedVideoAd fail no permission"}:t;throw e.emitter.emit("_error",n),n})),e.adFetchResult}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(Ot.call(this))return Promise.reject({errMsg:Ce});var i=ie(this);if(i.isShowed)return Promise.resolve();if(!i.isData)return Promise.reject({errMsg:"no advertisement data available, please invoke load()"});var o=(0,M.GH)("show",i.adType)||0;if(1===o)return i.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_OTHER_SHOW_ERROR),Promise.reject({errMsg:"can't invoke show() while other video-ad is showed"});vt.call(this,{stage:1001});var a=(new Date).getTime();return i.isSwitched=!1,(0,M.q3)("show",i.adType,1),i.adProxy.setTimePoint("p19"),n?i.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):i.adProxy.resetAnalyseBranchInfo(),i.adFetchResult.then((function(){if(Ot.call(e))return Promise.reject({errMsg:Ce});(0,U.uj)(),rt.call(e);var t=U.S3.screenWidth,n=U.S3.screenHeight;return U.S3.isWaGame?i.adProxy.reportVideoLastClick({touchStartX:Math.round(ge),touchStartY:Math.round(ve),touchEndX:Math.round(_e),touchEndY:Math.round(me),touchDuration:be,screenWidth:t,screenHeight:n}):(i.weappTouchEventHandler&&(0,J.sv)(i.weappTouchEventHandler),i.weappTouchEventHandler=(0,J.L9)(Ie,{aid:i.adProxy.data.aid,traceid:i.adProxy.data.traceid}),(0,R.nY)("emitWeappTouchEvent")),i.adProxy.reportVideoLoadTime({beginTime:a,endTime:(new Date).getTime(),reportType:2}),i.isShowed=!0,i.startExposureTime=0,i.isShowedExposureReported=!1,i.isViewableExposureReported=!1,i.isCardExposureReported=!1,i.adProxy.isViewable=!1,Lt.call(e)||Bt.call(e)?Rt.call(e):(i.adProxy.isValidCondition("widget_gray_video_sound")?((0,B.MU)(),i.video.muted=!1,U.S3.isIOS&&(i.video.obeyMuteSwitch=!0),i.sound.src=se,i.soundFix.src=se):(i.video.muted=!0,i.sound.src=ce,i.soundFix.src=ce),i.count.style.hidden=!1,i.countDown.style.hidden=!1,i.splitLineLeft.style.hidden=!1,i.countDownFix.style.hidden=!1,i.card.style.hidden=!0,i.container.style.hidden=!1,i.adFeedbackList.style.hidden=!0,i.adCover.show(),i.adProxy.setTimePoint("p15"),i.container.nextLayout().then((function(){return(0,D.Vs)(500)})).then((function(){if(Ot.call(e))return Promise.reject({errMsg:Ce});if(i.isSwitched)return yt.call(e,1);ke.call(e).then((function(){i.topBar.style.hidden=!1,i.topBarFix.style.hidden=!0,U.S3.isWaGame||(i.isFullscreen=!0)})).catch((function(){i.topBar.style.hidden=!0,i.topBarFix.style.hidden=!1}));var t={top:0,duration:fe};return i.container.animate(t).then((function(){(0,Y.y4)(Y.F0.EVENT_CANVAS_BEFORE_ADS);var t=i.video.style,n=t.width,r=t.height,o=i.adProxy.reportExposure({exposureType:"showed",left:0,top:0,width:n,height:r});return i.startExposureTime=+new Date,oe(o,"激励视频","原始曝光"),(0,D.Vs)(500).then((function(){i.isFirstPlay=!0,i.videoFirstPlayTime=(new Date).getTime(),i.adProxy.setTimePoint("p20"),Kt.call(e,"play"),lt.call(e),ut.call(e,Q.dA.REWARDEDVIDEOPLAY)}))})).then((function(){i.isFirstPlaySuccess=!0;var t=Yt.call(e),n=i.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:t.duration,muted:i.video.muted});oe(n,"激励视频","开始播放")})).catch((function(t){var n={errMsg:t,isSwitched:i.isSwitched};return i.adProxy.reportAdMonitorData(T.IDKEY.REWARDED_VIDEO_ANIMATE_ERROR,n),yt.call(e,2)}))})).catch((function(e){throw(0,M.q3)("show",i.adType,0),e})))})).catch((function(e){throw(0,M.q3)("show",i.adType,0),e}))}},{key:"isReady",value:function(){return!Ot.call(this)&&ie(this).isData}},{key:"destory",value:function(){Dt.call(this)}},{key:"destroy",value:function(){Dt.call(this)}},{key:"onError",value:function(e){Ot.call(this)||ie(this).emitter.on("_error",e)}},{key:"offError",value:function(e){Ot.call(this)||ie(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){Ot.call(this)||ie(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){Ot.call(this)||ie(this).emitter.off("load",e)}},{key:"onClose",value:function(e){if(!Ot.call(this)){var t=ie(this);t.emitter.on("close",e),e&&"function"==typeof e&&(t.closeEventCount+=1,t.closeEventCount>1&&console.warn("激励视频广告组件检测到您绑定了多次 onClose 事件，绑定重复的事件会产生多次重复的回调，请确认您绑定的事件是否重复，以免造成事件重复回调问题。"))}}},{key:"offClose",value:function(e){if(!Ot.call(this)){var t=ie(this);t.emitter.off("close",e),e&&"function"==typeof e&&t.closeEventCount>0&&(t.closeEventCount-=1),e||(t.closeEventCount=0)}}}]),n}(O.wA)},4052:(e,t,n)=>{"use strict";n.d(t,{i:()=>i});var r=n(6604),i=function(e,t,n){return r.S1.call(this,e,function(e){for(var t={},n=0,r=Object.keys(e||{});n<r.length;n++){var i=r[n];e[i]&&(t[i]=Object.assign({},e[i]),e[i].landscape&&!e[i].landscapeLeft&&(t[i].landscapeLeft=Object.assign({},e[i].landscape)),e[i].landscape&&!e[i].landscapeRight&&(t[i].landscapeRight=Object.assign({},e[i].landscape)))}return t}(t),n)}},8114:(e,t,n)=>{"use strict";n.d(t,{yx:()=>h,dz:()=>g,p4:()=>v});var r=n(1503),i=n.n(r),o=n(2363),a=n(8947),s=n(8392),c="",u="",l="{}",d="",f="",p="{}";function h(e){c?e&&e(c):o.wZ&&a.Z.clientVersion<654315827?(0,s.IN)("getOAID",{success:function(t){/:ok/.test(t.errMsg)?(c=t.result||"",e&&e(c)):e&&e("")},fail:function(){e&&e("")}}):e&&e("")}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){o.wZ&&a.Z.clientVersion>=654315827||o.cj&&a.Z.clientVersion>=385879808?(0,s.IN)("getDeviceInfo",{waidPkg:e,success:function(e){c=e.oaid||"",u=e.imei||"",f=e.waid||"",d=e.ua||"",p=e.devIdInfo||"{}";try{l=JSON.stringify(i()(i()({},JSON.parse(p)),d?{ua:d}:{}))}catch(e){n(e)}t({oaid:c,imei:u,commonid:l,waid:f})},fail:function(e){n(e)}}):t({oaid:c,imei:u,commonid:l,waid:f})}))}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){var r="",i="";o.wZ&&a.Z.clientVersion>=654316032?(0,s.IN)("getDeviceInfo",{waidPkg:e,success:function(e){r=e.waid||"",i=e.imei||"",t({waid:r,imei:i})},fail:function(e){n(e)}}):t({waid:r,imei:i})}))}},6604:(e,t,n)=>{"use strict";n.d(t,{wA:()=>d,Wj:()=>c,bn:()=>l,S1:()=>f,Ue:()=>u});var r=n(7163),i=n.n(r),o=n(9583),a=n(8068),s=new WeakMap,c=function(e){return s.get(e)},u=function e(t){var n=this,r=c(this),i={view:o.G7,text:o.xv,image:o.Ee,video:o.nk,"image-previewer":o.Vr}[t.name],s="";t.attributes.id?s=(0,a.um)(t.attributes.id):wxNativeConsole.error("".concat(t.name," 缺少id"));var u=Object.keys(t.attributes).reduce((function(e,n){var i=t.attributes[n],o=(0,a.um)(n);return"id"===n?(e.style=Object.assign(e.style||{},r.style[s]),e):"class"===n?(e.style=i.split(/\s+/).reduce((function(e,t){return Object.assign(e,r.style[t])}),e.style||{}),e):(/\{\{.+\}\}/.test(i)||(e[o]=""===i||"true"===i||"false"!==i&&i),e)}),{});u.name=s;var l=new i(u);return r[s]=l,t.children.forEach((function(t){var r=e.call(n,t);l.add(r)})),l},l=function(e){s.delete(e)},d=function e(){i()(this,e);s.set(this,{})},f=function(e,t,n){var r=c(this);r.xom=e,r.style=t,r.state=n,u.call(this,e)}},7937:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(6326),c=function(){function e(){i()(this,e),this.emitter=new s.Z({maxListeners:2e3}),this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap}return a()(e,[{key:"emit",value:function(e,t){this.emitter.emit(e,t)}},{key:"on",value:function(e,t){if(t&&"function"==typeof t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at ".concat(e," callback function"));this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}},{key:"off",value:function(e,t){var n=this;if(t&&"function"==typeof t){var r=this.callbackMap.get(t);"function"==typeof r&&(this.emitter.off(e,r),this.callbackMap.delete(t),this.originalCallbackMap.delete(r))}else this.emitter.listeners(e).forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}}]),e}()},1121:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r,i=n(7163),o=n.n(i),a=n(5843),s=n.n(a),c=n(9727),u=n.n(c),l={AD_TYPE_BANNER:1,AD_TYPE_PORTAL:2,AD_TYPE_ICON:3};r={},u()(r,l.AD_TYPE_BANNER,"BANNER"),u()(r,l.AD_TYPE_PORTAL,"PORTAL"),u()(r,l.AD_TYPE_ICON,"ICON");const d={0:5.5615234375,1:5.5615234375,2:5.5615234375,3:5.5615234375,4:5.5615234375,5:5.5615234375,6:5.5615234375,7:5.5615234375,8:5.5615234375,9:5.5615234375,"%":8.8916015625,"(":3.330078125,")":3.330078125,"-":3.330078125,".":2.7783203125,"/":2.7783203125,A:6.669921875,B:6.669921875,C:7.2216796875,D:7.2216796875,E:6.669921875,F:6.1083984375,G:7.7783203125,H:7.2216796875,I:2.7783203125,J:5,K:6.669921875,L:5.5615234375,M:8.330078125,N:7.2216796875,O:7.7783203125,P:6.669921875,Q:7.7783203125,R:7.2216796875,S:6.669921875,T:6.1083984375,U:7.2216796875,V:6.669921875,W:9.4384765625,X:6.669921875,Y:6.669921875,Z:6.1083984375,a:5.5615234375,b:5.5615234375,c:5,d:5.5615234375,e:5.5615234375,f:2.7783203125,g:5.5615234375,h:5.5615234375,i:2.2216796875,j:2.2216796875,k:5,l:2.2216796875,m:8.330078125,n:5.5615234375,o:5.5615234375,p:5.5615234375,q:5.5615234375,r:3.330078125,s:5,t:2.7783203125,u:5.5615234375,v:5,w:7.2216796875,x:5,y:5,z:5,"|":2.59765625};var f=n(2363),p=n(968),h=n(7466),g=d,v=null,_=function(){if(v)return v;if((0,p.aI)()){var e=new NativeGlobal.Canvas;e.width=1,e.height=1,v=e.getContext("2d")}else v=(0,h.createCanvasContext)();return v};const m=new(function(){function e(){o()(this,e)}return s()(e,[{key:"getCharWidth",value:function(e,t){return(g[e]?g[e]:10)*t/10}},{key:"limitString",value:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e}},{key:"getTextWidth",value:function(e,t){if(f.wZ)return this.getTextWidthInAndroid(e,t);var n=_();return t&&(n.font="".concat(t,"px ").concat("PingFangSC-Regular, SF Pro Display, SF Pro Text")),Math.ceil(n.measureText(e).width||0)+1}},{key:"getTextWidthInAndroid",value:function(e,t){var n=this;e=(e=String(e)).split("");var r=0;return e.forEach((function(e){var i=n.getCharWidth(e,t);r+=i})),r}},{key:"getMaxWordLength",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=(e=String(e)).split("");var i=0,o=0;r&&(n-=this.getTextWidth("...",t));for(var a=0;a<e.length;a++){var s=e[a],c=this.getCharWidth(s,t);if(i+c>n)break;o++,i+=c}return o}},{key:"textMetrics",value:function(e,t){for(var n=t.fontSize,r=t.maxWidth,i=t.maxLines,o=void 0===i?1:i,a=[],s=0,c=e.substring(0,e.length);s<o;){var u=this.getMaxWordLength(c,n,r,!(s!==o-1)),l=s===o-1?this.limitString(c,u):c.substring(0,u);l&&a.push({text:l,width:this.getTextWidth(l,n)}),s++,c=c.substring(u,c.length)}return a}}]),e}())},9062:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=function(){var e,t="inherit",n="row",r="row-reverse",i="column",o="column-reverse",a="flex-start",s="center",c="flex-start",u="center",l="flex-end",d="stretch",f="relative",p="absolute",h={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},g={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},v={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},_={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function m(e){return void 0===e}function y(e){return e===n||e===r}function b(e,t){if(void 0!==e.style.marginStart&&y(t))return e.style.marginStart;var n=null;switch(t){case"row":n=e.style.marginLeft;break;case"row-reverse":n=e.style.marginRight;break;case"column":n=e.style.marginTop;break;case"column-reverse":n=e.style.marginBottom}return void 0!==n?n:void 0!==e.style.margin?e.style.margin:0}function w(e,t){if(void 0!==e.style.marginEnd&&y(t))return e.style.marginEnd;var n=null;switch(t){case"row":n=e.style.marginRight;break;case"row-reverse":n=e.style.marginLeft;break;case"column":n=e.style.marginBottom;break;case"column-reverse":n=e.style.marginTop}return null!=n?n:void 0!==e.style.margin?e.style.margin:0}function I(e,t){if(void 0!==e.style.borderStartWidth&&e.style.borderStartWidth>=0&&y(t))return e.style.borderStartWidth;var n=null;switch(t){case"row":n=e.style.borderLeftWidth;break;case"row-reverse":n=e.style.borderRightWidth;break;case"column":n=e.style.borderTopWidth;break;case"column-reverse":n=e.style.borderBottomWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function S(e,t){if(void 0!==e.style.borderEndWidth&&e.style.borderEndWidth>=0&&y(t))return e.style.borderEndWidth;var n=null;switch(t){case"row":n=e.style.borderRightWidth;break;case"row-reverse":n=e.style.borderLeftWidth;break;case"column":n=e.style.borderBottomWidth;break;case"column-reverse":n=e.style.borderTopWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function C(e,t){return function(e,t){if(void 0!==e.style.paddingStart&&e.style.paddingStart>=0&&y(t))return e.style.paddingStart;var n=null;switch(t){case"row":n=e.style.paddingLeft;break;case"row-reverse":n=e.style.paddingRight;break;case"column":n=e.style.paddingTop;break;case"column-reverse":n=e.style.paddingBottom}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+I(e,t)}function T(e,t){return function(e,t){if(void 0!==e.style.paddingEnd&&e.style.paddingEnd>=0&&y(t))return e.style.paddingEnd;var n=null;switch(t){case"row":n=e.style.paddingRight;break;case"row-reverse":n=e.style.paddingLeft;break;case"column":n=e.style.paddingBottom;break;case"column-reverse":n=e.style.paddingTop}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+S(e,t)}function E(e,t){return I(e,t)+S(e,t)}function k(e,t){return b(e,t)+w(e,t)}function x(e,t){return C(e,t)+T(e,t)}function A(e,t){return t.style.alignSelf?t.style.alignSelf:e.style.alignItems?e.style.alignItems:"stretch"}function P(e,t){if("rtl"===t){if(e===n)return r;if(e===r)return n}return e}function D(e,t){return function(e){return e===i||e===o}(e)?P(n,t):i}function O(e){return e.style.position?e.style.position:"relative"}function N(e){return O(e)===f&&e.style.flex>0}function R(e,t){return e.layout[_[t]]+k(e,t)}function M(e,t){return void 0!==e.style[_[t]]&&e.style[_[t]]>=0}function L(e,t){return void 0!==e.style[t]}function B(e,t){return void 0!==e.style[t]?e.style[t]:0}function F(e,t,n){var r={row:e.style.minWidth,"row-reverse":e.style.minWidth,column:e.style.minHeight,"column-reverse":e.style.minHeight}[t],i={row:e.style.maxWidth,"row-reverse":e.style.maxWidth,column:e.style.maxHeight,"column-reverse":e.style.maxHeight}[t],o=n;return void 0!==i&&i>=0&&o>i&&(o=i),void 0!==r&&r>=0&&o<r&&(o=r),o}function j(e,t){return e>t?e:t}function W(e,t){void 0===e.layout[_[t]]&&M(e,t)&&(e.layout[_[t]]=j(F(e,t,e.style[_[t]]),x(e,t)))}function U(e,t,n){t.layout[g[n]]=e.layout[_[n]]-t.layout[_[n]]-t.layout[v[n]]}function V(e,t){return void 0!==e.style[h[t]]?B(e,h[t]):-B(e,g[t])}function G(S,G,Z){var q=function(e,n){var r;return(r=e.style.direction?e.style.direction:t)===t&&(r=void 0===n?"ltr":n),r}(S,Z),z=P(function(e){return e.style.flexDirection?e.style.flexDirection:i}(S),q),Y=D(z,q),K=P(n,q);W(S,z),W(S,Y),S.layout.direction=q,S.layout[h[z]]+=b(S,z)+V(S,z),S.layout[g[z]]+=w(S,z)+V(S,z),S.layout[h[Y]]+=b(S,Y)+V(S,Y),S.layout[g[Y]]+=w(S,Y)+V(S,Y);var J=S.children.length,$=x(S,K);if(function(e){return void 0!==e.style.measure}(S)){var X=!m(S.layout[_[K]]),Q=e;Q=M(S,K)?S.style.width:X?S.layout[_[K]]:G-k(S,K),Q-=$;var ee=!M(S,K)&&!X,te=!M(S,i)&&m(S.layout[_.column]);if(ee||te){var ne=S.style.measure(Q);ee&&(S.layout.width=ne.width+$),te&&(S.layout.height=ne.height+x(S,i))}if(0===J)return}var re,ie,oe,ae,se=function(e){return"wrap"===e.style.flexWrap}(S),ce=function(e){return e.style.justifyContent?e.style.justifyContent:"flex-start"}(S),ue=C(S,z),le=C(S,Y),de=x(S,z),fe=x(S,Y),pe=!m(S.layout[_[z]]),he=!m(S.layout[_[Y]]),ge=y(z),ve=null,_e=null,me=e;pe&&(me=S.layout[_[z]]-de);for(var ye=0,be=0,we=0,Ie=0,Se=0,Ce=0;be<J;){var Te,Ee=0,ke=0,xe=0,Ae=0,Pe=pe&&ce===a||!pe&&ce!==s,De=Pe?J:ye,Oe=!0,Ne=J,Re=null,Me=null,Le=ue,Be=0;for(re=ye;re<J;++re){if((oe=S.children[re]).lineIndex=Ce,oe.nextAbsoluteChild=null,oe.nextFlexChild=null,(qe=A(S,oe))===d&&O(oe)===f&&he&&!M(oe,Y))oe.layout[_[Y]]=j(F(oe,Y,S.layout[_[Y]]-fe-k(oe,Y)),x(oe,Y));else if(O(oe)===p)for(null===ve&&(ve=oe),null!==_e&&(_e.nextAbsoluteChild=oe),_e=oe,ie=0;ie<2;ie++)ae=0!==ie?n:i,!m(S.layout[_[ae]])&&!M(oe,ae)&&L(oe,h[ae])&&L(oe,g[ae])&&(oe.layout[_[ae]]=j(F(oe,ae,S.layout[_[ae]]-x(S,ae)-k(oe,ae)-B(oe,h[ae])-B(oe,g[ae])),x(oe,ae)));var Fe=0;if(pe&&N(oe)?(ke++,xe+=oe.style.flex,null===Re&&(Re=oe),null!==Me&&(Me.nextFlexChild=oe),Me=oe,Fe=x(oe,z)+k(oe,z)):(Te=e,ge||(Te=M(S,K)?S.layout[_[K]]-$:G-k(S,K)-$),0===we&&H(oe,Te,q),O(oe)===f&&(Ae++,Fe=R(oe,z))),se&&pe&&Ee+Fe>me&&re!==ye){Ae--,we=1;break}Pe&&(O(oe)!==f||N(oe))&&(Pe=!1,De=re),Oe&&(O(oe)!==f||qe!==d&&qe!==c||m(oe.layout[_[Y]]))&&(Oe=!1,Ne=re),Pe&&(oe.layout[v[z]]+=Le,pe&&U(S,oe,z),Le+=R(oe,z),Be=j(Be,F(oe,Y,R(oe,Y)))),Oe&&(oe.layout[v[Y]]+=Ie+le,he&&U(S,oe,Y)),we=0,Ee+=Fe,be=re+1}var je=0,We=0,Ue=0;if(Ue=pe?me-Ee:j(Ee,0)-Ee,0!==ke){var Ve,Ge,He=Ue/xe;for(Me=Re;null!==Me;)(Ve=He*Me.style.flex+x(Me,z))!==(Ge=F(Me,z,Ve))&&(Ue-=Ge,xe-=Me.style.flex),Me=Me.nextFlexChild;for((He=Ue/xe)<0&&(He=0),Me=Re;null!==Me;)Me.layout[_[z]]=F(Me,z,He*Me.style.flex+x(Me,z)),Te=e,M(S,K)?Te=S.layout[_[K]]-$:ge||(Te=G-k(S,K)-$),H(Me,Te,q),oe=Me,Me=Me.nextFlexChild,oe.nextFlexChild=null}else ce!==a&&(ce===s?je=Ue/2:"flex-end"===ce?je=Ue:"space-between"===ce?(Ue=j(Ue,0),We=ke+Ae-1!=0?Ue/(ke+Ae-1):0):"space-around"===ce&&(je=(We=Ue/(ke+Ae))/2));for(Le+=je,re=De;re<be;++re)O(oe=S.children[re])===p&&L(oe,h[z])?oe.layout[v[z]]=B(oe,h[z])+I(S,z)+b(oe,z):(oe.layout[v[z]]+=Le,pe&&U(S,oe,z),O(oe)===f&&(Le+=We+R(oe,z),Be=j(Be,F(oe,Y,R(oe,Y)))));var Ze=S.layout[_[Y]];for(he||(Ze=j(F(S,Y,Be+fe),fe)),re=Ne;re<be;++re)if(O(oe=S.children[re])===p&&L(oe,h[Y]))oe.layout[v[Y]]=B(oe,h[Y])+I(S,Y)+b(oe,Y);else{var qe,ze=le;if(O(oe)===f)if((qe=A(S,oe))===d)m(oe.layout[_[Y]])&&(oe.layout[_[Y]]=j(F(oe,Y,Ze-fe-k(oe,Y)),x(oe,Y)));else if(qe!==c){var Ye=Ze-fe-R(oe,Y);ze+=qe===u?Ye/2:Ye}oe.layout[v[Y]]+=Ie+ze,he&&U(S,oe,Y)}Ie+=Be,Se=j(Se,Le),Ce+=1,ye=be}if(Ce>1&&he){var Ke=S.layout[_[Y]]-fe,Je=Ke-Ie,$e=0,Xe=le,Qe=function(e){return e.style.alignContent?e.style.alignContent:"flex-start"}(S);Qe===l?Xe+=Je:Qe===u?Xe+=Je/2:Qe===d&&Ke>Ie&&($e=Je/Ce);var et=0;for(re=0;re<Ce;++re){var tt=et,nt=0;for(ie=tt;ie<J;++ie)if(O(oe=S.children[ie])===f){if(oe.lineIndex!==re)break;m(oe.layout[_[Y]])||(nt=j(nt,oe.layout[_[Y]]+k(oe,Y)))}for(et=ie,nt+=$e,ie=tt;ie<et;++ie)if(O(oe=S.children[ie])===f){var rt=A(S,oe);if(rt===c)oe.layout[v[Y]]=Xe+b(oe,Y);else if(rt===l)oe.layout[v[Y]]=Xe+nt-w(oe,Y)-oe.layout[_[Y]];else if(rt===u){var it=oe.layout[_[Y]];oe.layout[v[Y]]=Xe+(nt-it)/2}else rt===d&&(oe.layout[v[Y]]=Xe+b(oe,Y))}Xe+=nt}}var ot=!1,at=!1;if(pe||(S.layout[_[z]]=j(F(S,z,Se+T(S,z)),de),z!==r&&z!==o||(ot=!0)),he||(S.layout[_[Y]]=j(F(S,Y,Ie+fe),fe),Y!==r&&Y!==o||(at=!0)),ot||at)for(re=0;re<J;++re)oe=S.children[re],ot&&U(S,oe,z),at&&U(S,oe,Y);for(_e=ve;null!==_e;){for(ie=0;ie<2;ie++)ae=0!==ie?n:i,!m(S.layout[_[ae]])&&!M(_e,ae)&&L(_e,h[ae])&&L(_e,g[ae])&&(_e.layout[_[ae]]=j(F(_e,ae,S.layout[_[ae]]-E(S,ae)-k(_e,ae)-B(_e,h[ae])-B(_e,g[ae])),x(_e,ae))),L(_e,g[ae])&&!L(_e,h[ae])&&(_e.layout[h[ae]]=S.layout[_[ae]]-_e.layout[_[ae]]-B(_e,g[ae]));oe=_e,_e=_e.nextAbsoluteChild,oe.nextAbsoluteChild=null}}function H(e,t,n){e.shouldUpdate=!0;var r=e.style.direction||"ltr";!e.isDirty&&e.lastLayout&&e.lastLayout.requestedHeight===e.layout.height&&e.lastLayout.requestedWidth===e.layout.width&&e.lastLayout.parentMaxWidth===t&&e.lastLayout.direction===r?(e.layout.width=e.lastLayout.width,e.layout.height=e.lastLayout.height,e.layout.top=e.lastLayout.top,e.layout.left=e.lastLayout.left):(e.lastLayout||(e.lastLayout={}),e.lastLayout.requestedWidth=e.layout.width,e.lastLayout.requestedHeight=e.layout.height,e.lastLayout.parentMaxWidth=t,e.lastLayout.direction=r,e.children.forEach((function(e){e.layout.width=void 0,e.layout.height=void 0,e.layout.top=0,e.layout.left=0})),G(e,t,n),e.lastLayout.width=e.layout.width,e.lastLayout.height=e.layout.height,e.lastLayout.top=e.layout.top,e.lastLayout.left=e.layout.left)}return{layoutNodeImpl:G,computeLayout:H,fillNodes:function e(t){return t.layout&&!t.isDirty||(t.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),t.style||(t.style={}),t.children||(t.children=[]),t.children.forEach(e),t}}}();function i(e){r.fillNodes(e),r.computeLayout(e)}},5704:(e,t,n)=>{"use strict";n.d(t,{W:()=>y});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(6326),c=n(6301),u=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","fontSize","lineHeight","borderRadius"],l=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"],d=n(8068),f=n(8947),p=n(7264),h=new s.Z({maxListeners:2e5}),g=32768,v="portrait",_="";f.Z.onReady((function(){v=f.Z.deviceOrientation||v,_=(0,c.Oo)().model||""}));var m=function(e,t){return-1!==["click","touchstart","touchmove","touchend","touchcancel","ready","prop-change"].indexOf(e)?"element-".concat(t,"-").concat(e):-1!==["layout"].indexOf(e)?e:void 0},y=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.parentId,o=void 0===r?0:r,a=n.id,s=void 0===a?g++:a,c=n.style,p=void 0===c?{}:c,h=n.props,m=void 0===h?{}:h,y=n.name,b=void 0===y?"":y;i()(this,e);var w=f.Z.platform;this.parentId=o,this.dest=0,this.id=s,this.name=b,this.children={},this.parent=null,this.isInserted=!1,this.shouldUpdate=!1,this.readyResult=new Promise((function(e){t.on("ready",e)})),p=Object.assign({left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1,scaleWidth:1,scaleHeight:1,color:void 0,fontSize:void 0,textAlign:void 0,fontWeight:void 0,lineHeight:void 0,lineBreak:void 0,backgroundColor:void 0,backgroundColorOpacity:1,borderRadius:void 0,borderColor:void 0,borderColorOpacity:1,opacity:void 0,overflow:void 0,zIndex:1,fixed:!1,rotate:0},p),Object.assign(p,p[v]);var I=/iphone x/.test(_.toLowerCase())?"iphone x":w;Object.assign(p,p[I]),Object.assign(p,p["".concat(I,"-").concat(v)]),this.style={},this.computedStyle=Object.assign({},p),this.lastComputedStyle=Object.assign({},p),this.layoutBox=null,Object.keys(p).forEach((function(e){Object.defineProperty(t.style,e,{configurable:!0,enumerable:!0,get:function(){return p[e]},set:function(n){if(n!==p[e]&&void 0!==n){if(p[e]=n,t.computedStyle[e]=n,t.lastComputedStyle[e]=n,-1!==u.indexOf(e)&&t.style.scale){var r=n*t.style.scale;t.computedStyle[e]=r,t.lastComputedStyle[e]=r}"scale"===e&&u.forEach((function(e){p[e]&&(t.computedStyle[e]=p[e]*n,t.lastComputedStyle[e]=p[e]*n)})),t.shouldUpdate=!0,"hidden"===e&&(n?((0,d.cM)(t.id,t.name,"隐藏, 保存宽高",t.computedStyle.width,t.computedStyle.height),l.forEach((function(e){t.computedStyle[e]=0}))):((0,d.cM)(t.id,t.name,"显示, 设置回来",t.lastComputedStyle.width,t.lastComputedStyle.height),l.forEach((function(e){t.computedStyle[e]=t.lastComputedStyle[e]})))),t.requestLayout()}}})})),u.forEach((function(e){if(t.style[e]&&t.style.scale){var n=t.style[e]*t.style.scale;t.computedStyle[e]=n,t.lastComputedStyle[e]=n}})),p.hidden&&l.forEach((function(e){t.computedStyle[e]=0})),Object.keys(m).forEach((function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return m[e]},set:function(n){n!==m[e]&&(m[e]=n,t.shouldUpdate=!0,t.requestLayout())}})})),["touchstart","touchmove","touchend","touchcancel"].forEach((function(e){t.on(e,(function(n){if(t.bubbleEvent&&t.parent){var r=0,i=0;try{r=t.layoutBox.left,i=t.layoutBox.top}catch(e){}if("touchstart"===e||"touchend"===e){var o=Object.assign({},n);o.x+=r,o.y+=i,t.parent.emit(e,o)}else{var a=n.map((function(e){return{x:e.x+r,y:e.y+i}}));t.parent.emit(e,a)}}}))}))}return a()(e,[{key:"getChildren",value:function(){var e=this;return Object.keys(this.children).map((function(t){var n=e.children[t];return n.dest=e.dest,{id:n.id,name:n.name,style:n.computedStyle,children:n.getChildren()}}))}},{key:"getAbsolutePosition",value:function(e){if(!e)return this.getAbsolutePosition(this);if(!e.parent)return{left:0,top:0};var t=this.getAbsolutePosition(e.parent),n=t.left,r=t.top;return{left:n+e.layoutBox.left,top:r+e.layoutBox.top}}},{key:"add",value:function(e){e.parent=this,e.parentId=this.id,e.dest=this.dest,this.children[e.id]=e,this.requestLayout()}},{key:"remove",value:function(e){var t=this;e?this.children[e.id]&&(e.remove(),delete this.children[e.id]):(Object.keys(this.children).forEach((function(e){t.children[e].remove(),delete t.children[e]})),this.destroy(),this.parent&&delete this.parent.children[this.id]),this.requestLayout()}},{key:"emit",value:function(e,t){h.emit(m(e,this.id),t)}},{key:"on",value:function(e,t){h.on(m(e,this.id),t)}},{key:"once",value:function(e,t){h.once(m(e,this.id),t)}},{key:"off",value:function(e,t){h.off(m(e,this.id),t)}},{key:"nextLayout",value:function(e){var t=this;if(!e||"function"!=typeof e)return new Promise((function(e){return t.nextLayout(e)}));setTimeout(e,250)}},{key:"nextUpdate",value:function(e){var t=this;if(!e||"function"!=typeof e)return new Promise((function(e){return t.nextUpdate(e)}));this.once("update-done",e)}},{key:"ready",value:function(){var e=this,t=Object.keys(this.children).map((function(t){return e.children[t].ready()}));return Promise.all(t.concat(this.readyResult))}},{key:"requestLayout",value:function(){this.emit("layout")}},{key:"forceUpdate",value:function(){var e=this,t=this.isInserted?this.update():this.insert(),n=Object.keys(this.children).map((function(t){return e.children[t].forceUpdate()}));return t.then((function(){return Promise.all(n)}))}},{key:"insert",value:function(){return Promise.resolve()}},{key:"update",value:function(){return Promise.resolve()}},{key:"destroy",value:function(){var e=this;["click","ready","touchstart","touchmove","touchend","touchcancel"].forEach((function(t){var n=m(t,e.id);h.removeAllListeners(n)}))}}]),e}(),b=function(e){var t=JSON.parse(e.data).id;h.emit(m("click",t))};(0,p.n)("onTextViewClick",b),(0,p.n)("onImageViewClick",b),["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"].forEach((function(e){var t=e.replace(/^on/,"").toLowerCase();(0,p.n)(e,(function(e){try{var n=JSON.parse(e.data).id;h.emit(m(t,n),e.touch||e.touches)}catch(e){}}))}))},9583:(e,t,n)=>{"use strict";n.d(t,{Ee:()=>x,Vr:()=>se,xv:()=>y,nk:()=>G,G7:()=>m,kh:()=>oe.k,_w:()=>E,uo:()=>T});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(3646),c=n.n(s),u=n(862),l=n.n(u),d=n(4742),f=n.n(d),p=n(7541),h=n.n(p),g=n(8392),v=n(5704),_=n(8068),m=function(e){f()(n,e);var t=h()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.id,a=r.parentId,s=r.style,c=r.props,u=void 0===c?{}:c,l=r.type,d=void 0===l?"text":l,f=r.name,p=void 0===f?"":f,h=r.autoInsert,g=void 0!==h&&h,v=r.eventType,_=void 0===v?"touch":v,m=r.clickState,y=void 0!==m&&m,b=r.bubbleEvent,w=void 0!==b&&b;i()(this,n),(e=t.call(this,{id:o,style:s,props:Object.assign(u,{fullscreen:!1}),name:p,parentId:a})).type="text"===d?"TextView":"ImageView",e.eventType=_,e.autoInsert=g,e.bubbleEvent=w,"touch"===e.eventType&&y&&e.ready().then((function(){e.mask=new n({style:{backgroundColor:"rgba(0, 0, 0, 0.1)",hidden:!0,position:"absolute",left:0,top:0},eventType:"click"}),e.mask.name="mask",e.add(e.mask)})).catch((function(){}));var I=Date.now(),S={x:0,y:0};e.on("touchstart",(function(t){y&&e.mask&&(e.mask.style.hidden=!1),I=Date.now(),S=t}));var C=function(t){y&&e.mask&&(e.mask.style.hidden=!0);var n={x:0,y:0};try{n=e.getAbsolutePosition()}catch(e){}var r={x:0,y:0};Array.isArray(t)?r=t.pop():t.x&&t.y&&(r=t);var i={absoluteX:n.left+S.x,absoluteY:n.top+S.y,relativeX:S.x,relativeY:S.y,absoluteEndX:n.left+r.x,absoluteEndY:n.top+r.y,relativeEndX:r.x,relativeEndY:r.y,pressInterval:Date.now()-I};e.emit("click",i)};return e.on("touchend",C),e.on("touchcancel",C),e.autoInsert&&e.insert(),e}return a()(n,[{key:"toNativeData",value:function(){var e=this,t=["borderRadius","borderWidth","borderColor","opacity","overflow","fixed","rotate"];"ImageView"===this.type&&t.push("objectFit");var n=t.reduce((function(t,n){return t[n]=e.computedStyle[n],"borderColor"===n&&(t[n]=(0,_.$v)(e.computedStyle[n])),t}),{});n.bgColor=(0,_.$v)(this.computedStyle.backgroundColor),n.scaleX=this.computedStyle.scaleWidth,n.scaleY=this.computedStyle.scaleHeight;var r={left:this.computedStyle.left,top:this.computedStyle.top,width:this.computedStyle.width,height:this.computedStyle.height};return this.layoutBox&&(r={left:this.layoutBox.left,top:this.layoutBox.top,width:this.layoutBox.width,height:this.layoutBox.height}),this.computedStyle.hidden&&(r.width=0,r.height=0),this.mask&&(this.mask.style.width=r.width,this.mask.style.height=r.height),n.padding=[0,0,0,0],void 0!==n.borderRadius&&n.borderRadius||(n.borderRadius=0),{parentId:this.parentId,dest:this.dest,viewId:this.id,position:r,hide:this.computedStyle.hidden,style:n,notCoverRect:!0,fullscreen:this.fullscreen,zIndex:this.style.zIndex,fixed:n.fixed}}},{key:"insert",value:function(){var e=this,t=Object.assign(this.toNativeData(),{clickable:"click"===this.eventType,gesture:"touch"===this.eventType,transEvt:!1,sendTo:"appservice",data:JSON.stringify({id:this.id})});return this.isInserted=!0,new Promise((function(n,r){(0,g.IN)("insert".concat(e.type),Object.assign(t,{success:function(t){(0,_.cM)(e.name,e.id,"ready"),e.emit("ready"),n(t)},fail:r}))}))}},{key:"update",value:function(){var e=this;this.shouldUpdate=!1;var t=this.toNativeData();return new Promise((function(n,r){(0,g.IN)("update".concat(e.type),Object.assign(t,{success:n,fail:r}))}))}},{key:"destroy",value:function(){var e=this;c()(l()(n.prototype),"destroy",this).call(this);var t={dest:this.dest,viewId:this.id};return new Promise((function(n,r){(0,g.IN)("remove".concat(e.type),Object.assign(t,{success:n,fail:r}))}))}},{key:"animate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.left,r=t.top,i=t.opacity,o=t.scaleWidth,a=t.scaleHeight,s=t.rotate,c=void 0===s?0:s,u=t.duration,l=void 0===u?500:u,d={dest:this.dest,viewId:this.id,easing:"ease-in",duration:l,finalStyle:{left:n,top:r,opacity:i,rotate:c,scaleX:o,scaleY:a}};return new Promise((function(e,t){(0,g.IN)("animateCoverView",Object.assign(d,{success:e,fail:t}))})).then((function(t){return void 0!==n&&(e.style.left=n),void 0!==r&&(e.style.top=r),void 0!==o&&(e.style.scaleWidth=o),void 0!==a&&(e.style.scaleHeight=a),void 0!==i&&(e.style.opacity=i),void 0!==c&&(e.style.rotate=c),t}))}}]),n}(v.W),y=function(e){f()(n,e);var t=h()(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,o=e.style,a=e.value,s=void 0===a?"":a,c=e.name,u=void 0===c?"":c,l=e.autoInsert,d=void 0!==l&&l,f=e.eventType,p=e.bubbleEvent,h=e.clickState;return i()(this,n),t.call(this,{id:r,style:o,props:{value:s},type:"text",name:u,autoInsert:d,eventType:f,bubbleEvent:p,clickState:h})}return a()(n,[{key:"toNativeData",value:function(){var e=this,t=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"].reduce((function(t,n){return t[n]=e.computedStyle[n],t}),{});return Object.assign(c()(l()(n.prototype),"toNativeData",this).call(this),{label:Object.assign(t,{content:this.value})})}}]),n}(m),b=n(9062),w=function e(t,n){var r=!1;n.layoutBox=n.layoutBox||{},["left","top","width","height"].forEach((function(e){r=r||n.layoutBox[e]!==t.layout[e],n.layoutBox[e]=t.layout[e]})),n.shouldUpdate=n.shouldUpdate||r,t.children.forEach((function(t){var r=n.children[t.id];r&&e(t,r)}))},I=function e(t){var n=Promise.resolve();return t.isInserted?t.shouldUpdate&&(n=t.update()):n=t.insert(),n.then((function(){return Promise.all(Object.keys(t.children).map((function(n){var r=t.children[n];return e(r)})))}))},S=function e(t){t.isInserted?t.shouldUpdate&&t.update():t.insert(),Object.keys(t.children).map((function(n){var r=t.children[n];return e(r)}))},C=function(e){f()(n,e);var t=h()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.style,a=r.name,s=r.auto,c=void 0===s||s;i()(this,n),e=t.call(this,{style:o,id:0,name:a});var u=null;return e.auto=c,e.on("layout",(function(){e.auto&&(clearTimeout(u),u=setTimeout((function(){return e.layout()}),0))})),e.onebyone=!0,e}return a()(n,[{key:"layout",value:function(){var e=this,t={id:this.id,style:{width:this.style.width,height:this.style.height,flexDirection:"row"},children:this.getChildren()};return(0,b.Z)(t),w(t,this),this.onebyone?I(this).then((function(){return e.emit("update-done")})):(S(this),Promise.resolve().then((function(){return e.emit("update-done")})))}}]),n}(v.W),T=new C({name:"webview-layout"});T.dest=0;var E=new C({name:"nativeview-layout",auto:!1});E.onebyone=!1,E.dest=1;var k=n(968),x=function(e){f()(n,e);var t=h()(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,o=e.style,a=e.src,s=void 0===a?"":a,c=e.name,u=void 0===c?"":c,l=e.autoInsert,d=void 0!==l&&l,f=e.eventType,p=e.bubbleEvent,h=e.clickState;return i()(this,n),t.call(this,{id:r,style:o,props:{src:s},type:"image",name:u,autoInsert:d,eventType:f,bubbleEvent:p,clickState:h})}return a()(n,[{key:"toNativeData",value:function(){return Object.assign(c()(l()(n.prototype),"toNativeData",this).call(this),{iconPath:(0,k.Uj)(this.src)})}}]),n}(m),A=n(7615),P=n.n(A),D=n(7937),O=n(7264),N=n(2363),R=n(8947),M=n(266),L={video:1,"live-player":2,"live-pusher":3,image:4,audio:5},B=0,F={};R.Z.onReady((function(){B=R.Z.appType+1e3,F=R.Z.appLaunchInfo}));var j={onLoad:1,onWaiting:2,onError:3,onPlay:4,onPause:5,onFullScreenChange:6,onEnd:7,onTimeUpdate:8,onSrcSet:9,onImageLoad:91,onImageError:92},W={},U=["onVideoWaiting","onVideoPlay","onVideoPause","onVideoEnded","onVideoTimeUpdate","onVideoError","onVideoProgress"];N.wZ&&U.push("onVideoFullScreenChange");var V=function(e,t,n){"ad"!==e.scene&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.component,n=e.eventName,r=e.eventData,i=e.src,o=void 0===i?"":i,a=(0,M._getCurrentNetworkType)(),s=wx&&wx.version&&wx.version.version||"",c=Object.keys(F.query||{}).map((function(e){var t=F.query[e];return"".concat(e,"=").concat(t)})).join(",");c=encodeURIComponent(c);var u="";switch(n){case"onLoad":u=[r.duration,r.controls?2:1].join(";");break;case"onWaiting":u=[r.position,r.buffered].join(";");break;case"onError":u=r.errMsg.replace(","," ");break;case"onFullScreenChange":u=r.fullScreen?2:1;break;case"onTimeUpdate":u=[r.position,r.buffered].join(";");break;case"onImageLoad":u=[r.isLazyLoad?2:1,r.size,r.loadTime,r.width,r.height,r.originalWidth,r.originalHeight].join(";");break;case"onImageError":u=[r.isLazyLoad?2:1].join(";")}var l=[Math.round(Date.now()/1e3),F.scene,"",F.sessionid||F.sessionId,F.path,c,a,s,L[t],j[n],u,encodeURIComponent(o.substring(0,1024)).substring(0,1024),B].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:l})}({component:"video",eventName:t,eventData:n,src:e.src})},G=function(e){f()(n,e);var t=h()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.style,a=void 0===o?{}:o,s=r.name,c=r.x,u=void 0===c?0:c,l=r.y,d=void 0===l?0:l,f=r.width,p=void 0===f?300:f,h=r.height,g=void 0===h?200:h,v=r.hide,_=void 0!==v&&v,m=r.src,y=r.poster,b=r.referrerPolicy,w=void 0===b?"no-referrer":b,I=r.initialTime,S=void 0===I?0:I,C=r.playbackRate,T=void 0===C?1:C,E=r.live,k=void 0!==E&&E,x=r.objectFit,A=void 0===x?"contain":x,O=r.controls,N=void 0===O||O,R=r.showProgress,M=void 0===R||R,L=r.showProgressInControlMode,B=void 0===L?M:L,F=r.autoplay,j=void 0!==F&&F,V=r.muted,G=void 0!==V&&V,H=r.loop,Z=void 0!==H&&H,q=r.enableProgressGesture,z=void 0===q||q,Y=r.enablePlayGesture,K=void 0!==Y&&Y,J=r.showCenterPlayBtn,$=void 0===J||J,X=r.autoInsert,Q=void 0===X||X,ee=r.scene,te=void 0===ee?"default":ee,ne=r.preLoad,re=void 0!==ne&&ne,ie=r.obeyMuteSwitch,oe=void 0!==ie&&ie,ae=r.underGameView,se=void 0!==ae&&ae,ce=r.backgroundColor,ue=void 0===ce?"#000000":ce,le=r.playerHint,de=void 0===le?"":le,fe=r.zIndex;i()(this,n),(e=t.call(this,{style:a,name:s})).isSrcChanged=!1,e.autoInsert=Q,e.playerHint=de,e.scene=te,e.preLoad=re,e.underGameView=se,e.zIndex=fe,W[e.id]=P()(e);var pe=null;e.emitter=new D.Z,e.deferred=[],e._buffered=0,e._position=0;var he={x:u,y:d,width:p,height:g,hide:_,src:m,poster:y,initialTime:S,playbackRate:T,live:k,objectFit:A,controls:N,showProgress:M,showProgressInControlMode:B,backgroundColor:ue,autoplay:j,muted:G,loop:Z,enableProgressGesture:z,enablePlayGesture:K,showCenterPlayBtn:$,obeyMuteSwitch:oe,referrerPolicy:w};return Object.keys(he).forEach((function(t){Object.defineProperty(P()(e),t,{configurable:!0,enumerable:!0,get:function(){return he[t]},set:function(n){"src"!==t&&he[t]===n||(he[t]=n,e.isInserted?("src"===t&&(e.isSrcChanged=!0),"poster"===t&&(e.isPosterChanged=!0),"playbackRate"===t?e.operate("playbackRate",[n]):(clearTimeout(pe),pe=setTimeout((function(){return e.update()}),0))):e.deferred.push({type:"property",property:t,value:n}))}})})),U.forEach((function(t){var n=t.toLowerCase().replace("video","");e[n]=function(){},e.emitter.on(t,(function(t){e[n](t)}))})),e.autoInsert&&e.insert().then((function(){e.playbackRate&&1!==e.playbackRate&&e.operate("playbackRate",[e.playbackRate])})).then((function(){e.deferred.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)}))})),e}return a()(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return this.isInserted=!0,V(this,"onSrcSet",{}),new Promise((function(t,n){(0,g.IN)("insertVideoPlayer",Object.assign(e.toNativeData(),{data:JSON.stringify({id:e.id}),filePath:(0,k.Uj)(e.src),scene:e.scene,preLoad:e.preLoad,underGameView:e.underGameView,referrerPolicy:e.referrerPolicy,playerHint:e.playerHint,zIndex:e.zIndex,success:function(n){e.emit("ready"),t(n)},fail:n}))}))}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){N.cj?setTimeout((function(){(0,g.IN)("removeVideoPlayer",{videoPlayerId:e.id,success:t,fail:n})}),0):(0,g.IN)("removeVideoPlayer",{videoPlayerId:e.id,success:t,fail:n}),U.forEach((function(t){var n=t.replace("Video","").replace("on","off");"function"==typeof e[n]&&e[n]()})),delete W[e.id]}))}},{key:"toNativeData",value:function(){this.layoutBox;var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={videoPlayerId:this.id,position:e,hide:this.hide,zIndex:Number.isInteger(+this.zIndex)?+this.zIndex:0,initialTime:this.initialTime,live:this.live,objectFit:this.objectFit,needEvent:!0,showBasicControls:this.controls,showProgress:this.showProgress,showProgressInControlMode:this.showProgressInControlMode,backgroundColor:this.backgroundColor,backgroudColor:this.backgroundColor,autoplay:this.autoplay,muted:this.muted,loop:this.loop,customCache:!1,enableProgressGesture:this.enableProgressGesture,enablePlayGesture:this.enablePlayGesture,showCenterPlayBtn:this.showCenterPlayBtn,obeyMuteSwitch:this.obeyMuteSwitch,referrerPolicy:this.referrerPolicy};return this.isSrcChanged&&(t.filePath=(0,k.Uj)(this.src),this.isSrcChanged=!1),this.isPosterChanged&&(t.poster=(0,k.Uj)(this.poster),this.isPosterChanged=!1),this.autoInsert||(t.parentId=this.parentId),t}},{key:"update",value:function(){this.shouldUpdate=!1;var e=this.toNativeData();return e.filePath&&V(this,"onSrcSet",{}),new Promise((function(t,n){(0,g.IN)("updateVideoPlayer",Object.assign({},e,{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.isInserted)return this.hide&&"playbackRate"!==e?Promise.reject(new Error("".concat(e," can't be invoked when video is hidden"))):new Promise((function(r,i){(0,g.IN)("operateVideoPlayer",{videoPlayerId:t.id,type:e,data:n,success:r,fail:i})}));this.deferred.push({type:"method",method:e,args:n})}},{key:"play",value:function(){return this.operate("play")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"seek",value:function(e){return this.operate("seek",[e])}},{key:"requestFullScreen",value:function(e){return this.operate("requestFullScreen",[e])}},{key:"exitFullScreen",value:function(){return this.operate("exitFullScreen")}}]),n}(v.W);U.forEach((function(e){var t=e.replace("Video","");G.prototype[t]=function(t){this.emitter.on(e,t)};var n=t.replace("on","off");G.prototype[n]=function(t){this.emitter.off(e,t)}})),U.forEach((function(e){(0,O.n)(e,(function(t){var n=t.videoPlayerId||JSON.parse(t.data).id,r=W[n];if(r)if(r.emitter.emit(e,t),"onVideoProgress"!==e){var i=t;"onVideoTimeUpdate"===e?(r._position=t.position,i={position:t.position,buffered:r._buffered}):"onVideoWaiting"===e&&(i={position:r._position,buffered:r._buffered}),V(r,e.replace("Video",""),i)}else r._buffered=t.buffered}))}));var H=n(6326),Z=n(9769),q=n(8976),z=n(7147),Y=new H.Z,K={};!function(e){f()(n,e);var t=h()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.style,a=r.name,s=r.x,c=void 0===s?0:s,u=r.y,l=void 0===u?0:u,d=r.width,f=void 0===d?300:d,p=r.height,h=void 0===p?200:p,v=r.devicePosition,_=void 0===v?"back":v,m=r.flash,y=void 0===m?"auto":m,b=r.size,w=void 0===b?"small":b,I=r.autoInsert,S=void 0===I||I,C=r.success,T=r.fail,E=r.complete;i()(this,n),(e=t.call(this,{style:o,name:a})).size=w,K[e.id]=P()(e);var k=null;e.deferred=[];var x={x:c,y:l,width:f,height:h,devicePosition:_,flash:y};Object.keys(x).forEach((function(t){Object.defineProperty(P()(e),t,{configurable:!0,enumerable:!0,get:function(){return x[t]},set:function(n){if(x[t]!==n){if(x[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(k),k=setTimeout((function(){return e.update()}),0)}}})})),Y.on("onInit",(function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)}))}));var A={success:C,fail:T,complete:E};return S&&e.insert().then((function(t){e.frameWidth=t.width,e.frameHeight=t.height,(0,g.FE)({name:"createCamera",args:A})})).catch((function(){(0,g.YG)("createCamera",A)})),e}a()(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){(0,g.IN)("insertCamera",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){(0,g.IN)("updateCamera",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isInserted?new Promise((function(r,i){(0,g.IN)("operateCamera",Object.assign(n,{cameraId:t.id,type:e,fail:i,success:function(n){if(r(n),"listenFrameChange"===e){if(!Z.Z)throw new Error("device not supported");n.data=Z.Z.get(n.bufferId),n.data.__proto__=ArrayBuffer.prototype,t._frame=n}}}))})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={cameraId:this.id,position:e,devicePosition:this.devicePosition,flash:this.flash,size:this.size};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"takePhoto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";return this.operate("takePhoto",{quality:e})}},{key:"startRecord",value:function(){return this.operate("startRecord")}},{key:"stopRecord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.operate("stopRecord",{compressed:e})}},{key:"onAuthCancel",value:function(e){Y.on("onAuthCancel",e)}},{key:"onStop",value:function(e){Y.on("onStop",e)}},{key:"onCameraFrame",value:function(e){var t=this;"function"==typeof e&&Y.on("onCameraFrame",(function(){t._frame&&e({data:t._frame.data,width:t._frame.width,height:t._frame.height})}))}},{key:"listenFrameChange",value:function(e){var t=e?(0,z.r)(e):void 0,n={size:this.size};return void 0!==t&&(0,q.J)("listenFrameChangeInWorker")?(n.workerId=t,this.operate("listenFrameChange",n)):this.operate("listenFrameChange",n)}},{key:"closeFrameChange",value:function(){return this._frame=null,this.operate("closeFrameChange")}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete K[e.id],Y.removeAllListeners("onInit"),Y.removeAllListeners("onAuthCancel"),Y.removeAllListeners("onStop"),Y.removeAllListeners("onCameraFrame"),(0,g.IN)("removeCamera",{cameraId:e.id,success:t,fail:n})}))}}])}(v.W);(0,O.n)("onCameraInitDone",(function(){return Y.emit("onInit")})),(0,O.n)("onCameraNeedAuthCancel",(function(){return Y.emit("onAuthCancel")})),(0,O.n)("onCameraStop",(function(){return Y.emit("onStop")})),(0,O.n)("onCameraFrame",(function(){return Y.emit("onCameraFrame")}));var J=n(4657),$={},X=new J.Q("LivePlayer",!0),Q=(function(e){f()(n,e);var t=h()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.style,a=r.name,s=r.x,c=void 0===s?0:s,u=r.y,l=void 0===u?0:u,d=r.width,f=void 0===d?300:d,p=r.height,h=void 0===p?200:p,v=r.src,_=r.mode,m=void 0===_?"live":_,y=r.autoplay,b=void 0!==y&&y,w=r.muted,I=void 0!==w&&w,S=r.orientation,C=void 0===S?"vertical":S,T=r.objectFit,E=void 0===T?"contain":T,k=r.minCache,x=void 0===k?1:k,A=r.maxCache,D=void 0===A?3:A,O=r.soundMode,N=void 0===O?"speaker":O,R=r.autoPauseIfOpenNative,M=void 0===R||R,L=r.autoInsert,B=void 0===L||L,F=r.success,j=r.fail,W=r.complete;i()(this,n),e=t.call(this,{style:o,name:a}),$[e.id]=P()(e);var U=null;e.deferred=[];var V={x:c,y:l,width:f,height:h,src:v,mode:m,autoplay:b,muted:I,orientation:C,objectFit:E,minCache:x,maxCache:D,soundMode:N,autoPauseIfOpenNative:M};Object.keys(V).forEach((function(t){Object.defineProperty(P()(e),t,{enumerable:!0,get:function(){return V[t]},set:function(n){if(V[t]!==n){if(V[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(U),U=setTimeout((function(){return e.update()}),0)}}})}));var G={success:F,fail:j,complete:W};return B&&e.insert().then((function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)})),(0,g.FE)({name:"createLivePlayer",args:G})})).catch((function(e){var t=(e.errMsg||"").replace(/^\w+:fail\s*/,"");(0,g.YG)("createLivePlayer",G,t)})),e}a()(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){(0,g.IN)("insertLivePlayer",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){(0,g.IN)("updateLivePlayer",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.isInserted?new Promise((function(r,i){(0,g.IN)("operateLivePlayer",{livePlayerId:t.id,type:e,data:n,quality:n.quality,fail:i,success:r})})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePlayerId:this.id,position:e,playUrl:this.src,mode:"live"===this.mode?1:2,autoplay:this.autoplay,muted:this.muted,orientation:this.orientation,objectFit:this.objectFit,minCache:this.minCache,maxCache:this.maxCache,soundMode:this.soundMode,autoPauseIfOpenNative:this.autoPauseIfOpenNative,needEvent:!0,needNetStatus:!0,needAudioVolume:!0};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"play",value:function(){return this.operate("play")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"resume",value:function(){return this.operate("resume")}},{key:"mute",value:function(){return this.operate("mute")}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.operate("requestFullScreen",[e])}},{key:"exitFullScreen",value:function(){return this.operate("exitFullScreen")}},{key:"snapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"raw";return this.operate("snapshot",{quality:e})}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete $[e.id],X.off("state-".concat(e.id)),X.off("fs-".concat(e.id)),X.off("net-".concat(e.id)),X.off("audio-".concat(e.id)),(0,g.IN)("removeLivePlayer",{livePlayerId:e.id,success:t,fail:n})}))}},{key:"onStateChange",value:function(e){X.on("state-".concat(this.id),e)}},{key:"offStateChange",value:function(e){X.off("state-".concat(this.id),e)}},{key:"onFullScreenChange",value:function(e){X.on("fs-".concat(this.id),e)}},{key:"offFullScreenChange",value:function(e){X.off("fs-".concat(this.id),e)}},{key:"onNetStatus",value:function(e){X.on("net-".concat(this.id),e)}},{key:"offNetStatus",value:function(e){X.off("net-".concat(this.id),e)}},{key:"onAudioVolumeNotify",value:function(e){X.on("audio-".concat(this.id),e)}},{key:"offAudioVolumeNotify",value:function(e){X.off("audio-".concat(this.id),e)}}])}(v.W),function(e,t){return(0,O.n)(e,(function(e){return t(e||{})}))});Q("onLivePlayerEvent",(function(e){var t=e.livePlayerId,n=e.errCode,r=e.errMsg;X.emit("state-".concat(t),{code:n,message:r})})),Q("onLivePlayerFullScreenChange",(function(e){var t=e.livePlayerId,n=e.fullScreen,r=e.direction;X.emit("fs-".concat(t),{fullScreen:n,direction:r})})),Q("onLivePlayerNetStatus",(function(e){var t=e.livePlayerId,n=e.info;n&&X.emit("net-".concat(t),{videoBitrate:n.VIDEO_BITRATE,audioBitrate:n.AUDIO_BITRATE,videoFPS:n.VIDEO_FPS,videoGOP:n.VIDEO_GOP,netSpeed:n.NET_SPEED,netQualityLevel:n.NET_QUALITY_LEVEL,netJitter:n.NET_JITTER,videoWidth:n.VIDEO_WIDTH,videoHeight:n.VIDEO_HEIGHT})})),Q("onLivePlayerAudioVolume",(function(e){var t=e.livePlayerId,n=e.volume;X.emit("audio-".concat(t),{volume:n})}));var ee={},te=new J.Q("LivePusher",!0);function ne(e){switch(e){case"SD":return 1;case"HD":return 2;case"FHD":return 3;default:return 6}}function re(e){switch(e){case"3:14":return 1;default:return 2}}!function(e){f()(n,e);var t=h()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.style,a=r.name,s=r.x,c=void 0===s?0:s,u=r.y,l=void 0===u?0:u,d=r.width,f=void 0===d?300:d,p=r.height,h=void 0===p?200:p,v=r.url,_=r.mode,m=void 0===_?"RTC":_,y=r.autopush,b=void 0!==y&&y,w=r.muted,I=void 0!==w&&w,S=r.enableCamera,C=void 0===S||S,T=r.autoFocus,E=void 0===T||T,k=r.orientation,x=void 0===k?"vertical":k,A=r.beauty,D=void 0===A?0:A,O=r.whiteness,N=void 0===O?0:O,R=r.aspect,M=void 0===R?"9:16":R,L=r.minBitrate,B=void 0===L?200:L,F=r.maxBitrate,j=void 0===F?1e3:F,W=r.audioQuality,U=void 0===W?"high":W,V=r.waitingImage,G=r.waitingImageHash,H=r.zoom,Z=void 0!==H&&H,q=r.devicePosition,z=void 0===q?"front":q,Y=r.remoteMirror,K=void 0!==Y&&Y,J=r.localMirror,$=void 0===J?"auto":J,X=r.audioReverbType,Q=void 0===X?0:X,te=r.enableMic,ne=void 0===te||te,re=r.enableAgc,ie=void 0!==re&&re,oe=r.enableAns,ae=void 0!==oe&&oe,se=r.audioVolumeType,ce=void 0===se?"voicecall":se,ue=r.videoWidth,le=void 0===ue?360:ue,de=r.videoHeight,fe=void 0===de?640:de,pe=r.autoInsert,he=void 0===pe||pe,ge=r.success,ve=r.fail,_e=r.complete;i()(this,n),e=t.call(this,{style:o,name:a}),ee[e.id]=P()(e);var me=null;e.deferred=[];var ye={x:c,y:l,width:f,height:h,url:v,mode:m,autopush:b,muted:I,enableCamera:C,autoFocus:E,orientation:x,beauty:D,whiteness:N,aspect:M,minBitrate:B,maxBitrate:j,audioQuality:U,waitingImage:V,waitingImageHash:G,zoom:Z,devicePosition:z,remoteMirror:K,localMirror:$,audioReverbType:Q,enableMic:ne,enableAgc:ie,enableAns:ae,audioVolumeType:ce,videoWidth:le,videoHeight:fe};Object.keys(ye).forEach((function(t){Object.defineProperty(P()(e),t,{enumerable:!0,get:function(){return ye[t]},set:function(n){if(ye[t]!==n){if(ye[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(me),me=setTimeout((function(){return e.update()}),0)}}})}));var be={success:ge,fail:ve,complete:_e};return he&&e.insert().then((function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)})),(0,g.FE)({name:"createLivePusher",args:be})})).catch((function(e){var t=(e.errMsg||"").replace(/^\w+:fail\s*/,"");(0,g.YG)("createLivePusher",be,t)})),e}a()(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){(0,g.IN)("insertLivePusher",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){(0,g.IN)("updateLivePusher",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isInserted?new Promise((function(r,i){(0,g.IN)("operateLivePusher",{livePusherId:t.id,type:e,url:n.url,volume:n.volume,quality:n.quality,fail:i,success:r})})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePusherId:this.id,position:e,pushUrl:this.url,mode:ne(this.mode),autopush:this.autopush,muted:this.muted,enableCamera:this.enableCamera,focusMode:this.autoFocus?0:1,orientation:this.orientation,beauty:this.beauty,whiteness:this.whiteness,aspect:re(this.aspect),minBitrate:this.minBitrate,maxBitrate:this.maxBitrate,backgroundImage:this.waitingImage,backgroundMD5:this.waitingImageHash,zoom:this.zoom,devicePosition:this.devicePosition,remoteMirror:this.remoteMirror,localMirror:this.localMirror,enableMic:this.enableMic,enableAGC:this.enableAgc,enableANS:this.enableAns,audioVolumeType:this.audioVolumeType,audioReverbType:this.audioReverbType,videoWidth:this.videoWidth,videoHeight:this.videoHeight,needEvent:!0,needNetStatus:!0};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"start",value:function(){return this.operate("start")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"resume",value:function(){return this.operate("resume")}},{key:"playBGM",value:function(e){return this.operate("playBGM",{url:e})}},{key:"stopBGM",value:function(){return this.operate("stopBGM")}},{key:"pauseBGM",value:function(){return this.operate("pauseBGM")}},{key:"resumeBGM",value:function(){return this.operate("resumeBGM")}},{key:"setBGMVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.operate("setBGMVolume",{volume:e})}},{key:"setMICVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.operate("setMICVolume",{volume:e})}},{key:"startPreview",value:function(){return this.operate("startPreview")}},{key:"stopPreview",value:function(){return this.operate("stopPreview")}},{key:"snapshot",value:function(e){return this.operate("snapshot",{quality:e})}},{key:"switchCamera",value:function(){return this.operate("switchCamera")}},{key:"toggleTorch",value:function(){return this.operate("toggleTorch")}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete ee[e.id],te.off("state-".concat(e.id)),te.off("net-".concat(e.id)),te.off("start-".concat(e.id)),te.off("progress-".concat(e.id)),te.off("complete-".concat(e.id)),te.off("error-".concat(e.id)),(0,g.IN)("removeLivePusher",{livePusherId:e.id,success:t,fail:n})}))}},{key:"onStateChange",value:function(e){te.on("state-".concat(this.id),e)}},{key:"offStateChange",value:function(e){te.off("state-".concat(this.id),e)}},{key:"onNetStatus",value:function(e){te.on("net-".concat(this.id),e)}},{key:"offNetStatus",value:function(e){te.off("net-".concat(this.id),e)}},{key:"onBGMStart",value:function(e){te.on("start-".concat(this.id),e)}},{key:"offBGMStart",value:function(e){te.off("start-".concat(this.id),e)}},{key:"onBGMProgress",value:function(e){te.on("progress-".concat(this.id),e)}},{key:"offBGMProgress",value:function(e){te.off("progress-".concat(this.id),e)}},{key:"onBGMComplete",value:function(e){te.on("complete-".concat(this.id),e)}},{key:"offBGMComplete",value:function(e){te.off("complete-".concat(this.id),e)}},{key:"onError",value:function(e){te.on("error-".concat(this.id),e)}},{key:"offError",value:function(e){te.off("error-".concat(this.id),e)}}])}(v.W);var ie=function(e,t){return(0,O.n)(e,(function(e){return t(e||{})}))};ie("onLivePusherEvent",(function(e){var t=e.livePusherId,n=e.errCode,r=e.errMsg;te.emit("state-".concat(t),{code:n,message:r})})),ie("onLivePusherNetStatus",(function(e){var t=e.livePusherId,n=e.info;n&&te.emit("net-".concat(t),{videoBitrate:n.VIDEO_BITRATE,audioBitrate:n.AUDIO_BITRATE,videoFPS:n.VIDEO_FPS,videoGOP:n.VIDEO_GOP,netSpeed:n.NET_SPEED,netQualityLevel:n.NET_QUALITY_LEVEL,netJitter:n.NET_JITTER,videoWidth:n.VIDEO_WIDTH,videoHeight:n.VIDEO_HEIGHT})})),ie("onLivePusherBGMStart",(function(e){var t=e.livePusherId;te.emit("start-".concat(t))})),ie("onLivePusherBGMProgress",(function(e){var t=e.livePusherId,n=e.progress,r=e.duration;te.emit("progress-".concat(t),{progress:n,duration:r})})),ie("onLivePusherBGMComplete",(function(e){var t=e.livePusherId,n=e.errCode;te.emit("complete-".concat(t),{errCode:n})})),ie("onLivePusherError",(function(e){var t=e.livePusherId,n=e.errCode,r=e.errMsg,i=e.data;te.emit("error-".concat(t),{errCode:n,errMsg:r,data:i})}));var oe=n(5473),ae={},se=function(e){f()(n,e);var t=h()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.style,a=void 0===o?{}:o,s=r.name,c=r.x,u=void 0===c?0:c,l=r.y,d=void 0===l?0:l,f=r.width,p=void 0===f?300:f,h=r.height,g=void 0===h?200:h,v=r.url,_=void 0===v?"":v,m=r.urls,y=void 0===m?[]:m,b=r.scale,w=void 0===b?1:b,I=r.autoInsert,S=void 0===I||I,C=r.hide,T=void 0!==C&&C,E=r.zIndex,k=void 0===E?0:E;if(i()(this,n),(e=t.call(this,{style:a,name:s})).x=u,e.y=d,e.width=p,e.height=g,e.scale=+w,e.hide=T,e.autoInsert=S,e.url=_,e.zIndex=k,e.emitter=new J.Q("ImagePreviewer",!0),ae[e.id]=P()(e),"string"==typeof y)try{e.urls=JSON.parse(y)}catch(t){e.urls=[]}else e.urls=y;return e._insertPromise=new Promise((function(t,n){e._insertPromiseResolve=t,e._insertPromiseReject=n})),e}return a()(n,[{key:"insert",value:function(){var e=this;return this.toNativeData(),(0,g.IN)("insertImagePreviewer",Object.assign(this.toNativeData(),{success:function(t){e._insertPromiseResolve(t)},fail:function(t){e._insertPromiseReject(t)}})),this._insertPromise}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){e._insertPromise.then((function(){e.toNativeData(),(0,g.IN)("updateImagePreviewer",Object.assign(e.toNativeData(),{success:function(e){t(e)},fail:function(e){n(e)}}))})).catch(n)}))}},{key:"destroy",value:function(){var e=this;return this.id,new Promise((function(t,n){setTimeout((function(){(0,g.IN)("removeImagePreviewer",{viewId:e.id,success:t,fail:n}),e.offImageLoadFail(),delete ae[e.id]}),0)}))}},{key:"toNativeData",value:function(){this.layoutBox;var e={position:this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},urls:this.urls.length>0?this.urls:[this.url],scale:this.scale,hide:this.hide,viewId:this.id,zIndex:this.zIndex,parentId:this.parentId};return this.parentId,e}},{key:"onImageLoadFail",value:function(e){this.emitter.on("onImageLoadFail",e)}},{key:"offImageLoadFail",value:function(e){this.emitter.off("onImageLoadFail",e)}}]),n}(v.W);(0,O.n)("onImagePreviewerLoadFail",(function(e){ae[e.viewId].emitter.emit("onImageLoadFail",e)}))},5473:(e,t,n)=>{"use strict";n.d(t,{k:()=>I});n(572);var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(7615),c=n.n(s),u=n(4742),l=n.n(u),d=n(7541),f=n.n(d),p=n(5704),h=n(8392),g=n(7264),v=n(8947),_=new Map,m=new WeakMap,y=new WeakMap,b=new WeakMap;function w(e){var t=this;return new Promise((function(n,r){var i=y.get(t);(0,h.IN)("insertHTMLWebView",{htmlId:t.id,position:i,src:m.get(t),zIndex:b.get(t),backgroundColor:i.backgroundColor,__skipDomainCheck__:e,success:n,fail:r})}))}var I=function(e){l()(n,e);var t=f()(n);function n(e){var r,o=e.src,a=e.zIndex,s=e.style,u=void 0===s?{}:s,l=e.__skipDomainCheck__;return i()(this,n),r=t.call(this,{style:u}),_.set(r.id,c()(r)),m.set(c()(r),o),y.set(c()(r),u),b.set(c()(r),a),w.call(c()(r),l),r.isInserted=!0,r}return a()(n,[{key:"src",get:function(){return m.get(this)},set:function(e){m.set(this,e),(0,h.IN)("updateHTMLWebView",{htmlId:this.id,src:e})}},{key:"style",get:function(){return y.get(this)},set:function(e){this.style||y.set(this,{});var t=Object.assign(this.style,e);this.isInserted&&(0,h.IN)("updateHTMLWebView",{htmlId:this.id,position:t,backgroundColor:t.backgroundColor})}},{key:"zIndex",get:function(){return b.get(this)},set:function(e){b.set(this,e),(0,h.IN)("updateHTMLWebView",{htmlId:this.id,zIndex:e})}},{key:"destroy",value:function(){_.delete(this.id),(0,h.IN)("removeHTMLWebView",{htmlId:this.id})}}]),n}(p.W);function S(e){var t=e.htmlId,n=_.get(t);n&&n.onload&&setTimeout(n.onload)}function C(e){var t=e.name,n=e.arg,r=e.htmlId;"postMessage"===t&&_.forEach((function(e,t){var i=e.onmessage;r&&r!==t||i&&setTimeout((function(){return i(n)}))}))}v.Z.onReady((function(){4===v.Z.appType&&((0,g.n)("onWebviewFinishLoad",S),(0,g.n)("onWebInvokeAppService",C),(0,g.n)("WEB_INVOKE_APPSERVICE",C))}))},8068:(e,t,n)=>{"use strict";n.d(t,{XS:()=>r,Vs:()=>i,_u:()=>o,cM:()=>a,$G:()=>s,um:()=>c,$v:()=>l,Fr:()=>u});n(8676);var r=function(e){var t,n,r,i=e.outer,o=void 0===i?{width:0,height:0}:i,a=e.inner,s=void 0===a?{width:0,height:0}:a,c=e.maxScale,u=void 0===c?1e3:c,l=e.minScale,d=void 0===l?0:l,f=e.side,p=o.width/o.height,h=s.width/s.height,g=o.width/s.width,v=o.height/s.height,_=p>h?v:g;return"width"===f?_=g:"height"===f&&(_=v),t=_,n=d,r=u,_=Math.min(Math.max(n,t),r),s.width*=_,s.height*=_,o.width=Math.max(o.width,s.width),o.height=Math.max(o.height,s.height),{scale:_,outer:o,inner:s}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout(t,e)}))},o=function(){},a=function(){},s=function(e,t){for(var n="",r=0,i=0;i<e.length;i++){if((r+=/[\u4e00-\u9fa5]/.test(e[i])?2:1)>t){n+="...";break}n+=e[i]}return n},c=function(e){return e.split("-").map((function(e,t){return 0===t?e:e[0].toUpperCase()+e.slice(1)})).join("")},u=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){e(Object.assign(t,{success:n,fail:r}))}))}},l=function(e){var t=null;return!/^#/.test(e)||7!==e.length&&9!==e.length?null!==(t=/^(rgb|rgba)\((.+)\)/.exec(e))?"#"+t[2].split(",").map((function(e,t){return e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e="0"+e),e})).join(""):"#00000000":e}},4642:(e,t,n)=>{"use strict";n.d(t,{b$:()=>d,Tb:()=>r.Tb,vv:()=>l,dN:()=>r.dN});var r=n(9366),i=n(7264),o=n(9307),a=n(2692),s=n(3201),c=(0,o.s)("Hide"),u=(0,o.s)("BaseFrameHide"),l=(c.onMethod,c.offMethod,c.internalOnMethod),d=c.internalOffMethod;u.internalOnMethod,u.internalOffMethod;(0,i.n)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,s.v)(e.mode),(0,a.b$)()?u.emit(e):(u.emit(e),c.emit(e))}));var f=n(8392),p=(0,o.s)("GameLiveStateChange"),h=p.internalOnMethod,g=(p.internalOffMethod,p.onMethod,p.offMethod,function(e){return["end","start"][e]});(0,i.n)("onGameLiveStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p.emitInternal(e),p.emitGlobal({state:g(e.event)})})),h((function(e){4===e.event&&(0,f.IN)("startGameLive")}))},9366:(e,t,n)=>{"use strict";n.d(t,{Ke:()=>v,dN:()=>_,Tb:()=>m,OQ:()=>y});var r=n(8676),i=n.n(r),o=n(5810),a=n(9307),s=n(8947),c=n(5852),u=n(2363),l=n(7264),d=n(4159),f=n(2692),p=n(9267),h=(0,a.s)("Show"),g=(0,a.s)("BaseFrameShow"),v=h.onMethod,_=(h.offMethod,h.internalOnMethod),m=h.internalOffMethod,y=g.internalOnMethod;g.internalOffMethod;function b(e,t){e=e||(0,o.Ir)(),t=t||(0,o.x9)(),Reporter.__query__=e.query,d.Z.query=e.query,h.emitInternal(t),h.emitGlobal(e)}function w(e){wxNativeConsole.info("[emitBaseFrameOnShow]",e),g.emitInternal(e)}function I(e){var t=e.split("?")[1],n={};if(t)try{n=t.split("&").reduce((function(e,t){var n=t.split("="),r=n[0],i=n.slice(1).join("=");return e[r]=i,e}),{})}catch(e){n={}}return n}(0,l.n)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path;u.wZ&&(0,p.Kn)(e.query)&&Object.keys(e.query).length>0||t&&(e.query=I(t));var n=(0,o.Br)(e),r=n.publicLaunchInfo,a=n.appLaunchInfo,s=a.shareInfo;w(a),setTimeout((function(){(0,f.b$)()||b(r,a),"object"===i()(s)&&null!==s&&(0,c.kv)(s.shareKey)}),0)})),s.Z.onReady((function(){var e=(0,o.Ir)(),t=(0,o.x9)();Reporter.__query__=e.query,d.Z.query=e.query,u.gm||(w(t),setTimeout((function(){(0,f.b$)()||b(e,t)}),0))}))},3201:(e,t,n)=>{"use strict";var r;function i(e){r=e}function o(){return r}n.d(t,{v:()=>i,B:()=>o})},4853:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(6965),i=n(4657),o=n(2903),a=n(4449),s=n(9267),c=new i.Q("touch",!0),u=new i.Q("touch",!0),l={};["start","move","end","cancel"].forEach((function(e){if("start"===e){r.Z.EventHandler["ontouch".concat(e)]=function(t){o.U.emit("beforeTouchStart",t),o.U.emit("setLastTapTime",Date.now()),(0,a.kV)("tap"),c.emit(e,t),u.emit(e,t)}}else if("end"===e){r.Z.EventHandler["ontouch".concat(e)]=function(t){o.U.emit("beforeTouchEnd"),c.emit(e,t),u.emit(e,t),o.U.emit("afterTouchEnd")}}else r.Z.EventHandler["ontouch".concat(e)]=function(t){c.emit(e,t),u.emit(e,t)};l["onTouch".concat(e.charAt(0).toUpperCase()+e.slice(1))]=function(t,n){(0,s.Kn)(n)&&(r.Z.EventHandler["ontouch".concat(e,"Dst")]=n),c.on(e,t)},l["offTouch".concat(e.charAt(0).toUpperCase()+e.slice(1))]=function(t){c.off(e,t)}}));const d=l},313:(e,t,n)=>{"use strict"},3499:(e,t,n)=>{"use strict";n.d(t,{n:()=>i});var r={},i={get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return r[e]},set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";r[t]=e},clear:function(){r={}}}},2692:(e,t,n)=>{"use strict";n.d(t,{b$:()=>i});n(9727),n(8676),n(7100);var r=n(3499);n(313);function i(){return!!r.n.get()}},7239:(e,t,n)=>{"use strict";n.d(t,{F0:()=>i,y4:()=>s});var r=n(8392),i=(n(9267),n(5473),{EVENT_CANVAS_BEFORE_SHARE:1,EVENT_CANVAS_AFTER_SHARE_SUCCESS:2,EVENT_CANVAS_AFTER_SHARE_CANCEL:3,EVENT_CANVAS_BEFORE_ADS:4,EVENT_CANVAS_ADS_FIN:5,EVENT_CANVAS_ADS_CANCEL:6,EVENT_CANVAS_BEFORE_JUMP_TO_APP:7,EVENT_CANVAS_BEFORE_PAY:8,EVENT_CANVAS_BEFORE_JUMP_TO_CUSTOMER_SERVICE:9,EVENT_CANVAS_BEFORE_CLOSE_CUSTOMER_SERVICE:10,EVENT_CANVAS_BEFORE_QR_CODE:11,EVENT_CANVAS_BEFORE_MORE:12,EVENT_CANVAS_BEFORE_GAME_ClUB:13,EVENT_CANVAS_AFTER_MODAL:14,EVENT_CANVAS_BEFORE_NORMAL_EXIT:15,EVENT_CANVAS_SAMPLE_BY_TIME:16,EVENT_CANVAS_WEBVIEW_TIMING:17,EVENT_CANVAS_WEBVIEW_BEFORE_JUMP:18}),o={sampleEventList:[]},a=new Map;function s(e,t){"[reportCanvasData][invoke], eventType=".concat(e);var n=function(e){return"[getEventInfoByEventType][invoke] eventType=".concat(e),o.sampleEventList.find((function(t){return e===t.event}))}(e);if("[reportCanvasData][invoke], eventInfo=".concat(n),n){var i=Date.now(),s=a.get(n);if("[reportCanvasData][invoke] now=".concat(i,", lastReportTime=").concat(s,", delta=").concat((i-s)/1e3,", interval=").concat(n.sample_interval_seconds),(i-s)/1e3<n.sample_interval_seconds)return;(0,r.IN)("reportCanvasData",{eventInfo:JSON.stringify(n),viewId:t>0?t:0,success:function(){a.set(n,i)},fail:function(e){var t=e.errMsg;"[reportCanvasData][fail] errMsg=".concat(t)}})}}},2903:(e,t,n)=>{"use strict";n.d(t,{U:()=>o,L:()=>a});var r=n(6326),i=n(3082),o=new r.Z,a={map:{},set:function(e){var t=(0,i.M8)();return this.map[t]=e,t},get:function(e){var t=this;return e?this.map[e]:Object.keys(this.map).map((function(e){return t.map[e]}))}}},2745:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={emitter:new(n(6326).Z),puidToPluginWX:{},pluginIDs:{},pluginVersions:{},pluginInfos:{}}},9601:(e,t,n)=>{"use strict";n.d(t,{hI:()=>a,hb:()=>s,MX:()=>c,u4:()=>u,Jv:()=>l,qS:()=>d});var r=n(8575),i=n(2745),o=function(e){for(var t in i.Z.puidToPluginWX)if(i.Z.puidToPluginWX[t]===e)return t},a=function(e){return i.Z.pluginIDs[o(e)]},s=function(e){return i.Z.pluginVersions[o(e)]},c=function(e){var t=a(e);if(void 0!==t)return i.Z.pluginInfos[t]},u=function(e){e.success(i.Z.pluginInfos[e.pluginId])},l=function(e,t){if(void 0===t||void 0===e)return!1;for(var n=(0,r.Qc)(e||""),i=0;i<t.length;i++){var o=t[i]||"",a=(0,r.Qc)(o);if(a.protocol===n.protocol&&a.hostname===n.hostname&&a.port===n.port)return!0}return!1},d=function(e,t,n){var r=new RegExp("^".concat(t,":")),i={};return["success","fail","complete"].forEach((function(t){"function"==typeof e[t]&&(i[t]=function(i){i.errMsg=i.errMsg.replace(r,n+":"),e[t](i)})})),Object.assign({},e,i)}},968:(e,t,n)=>{"use strict";n.d(t,{Vs:()=>p,vp:()=>h,Y6:()=>g,KU:()=>v,aI:()=>_,N0:()=>m,Fr:()=>y,a2:()=>b,fm:()=>w,vB:()=>I,v7:()=>S,Uj:()=>C,Av:()=>T,$:()=>E,er:()=>k,GO:()=>x,Cb:()=>A});var r=n(7163),i=n.n(r),o=n(5843),a=n.n(o),s=n(8676),c=n.n(s),u=n(6326),l=n(8947),d=(n(4449),n(2363)),f=n(9267);var p=function(e,t){var n=t.timeout;if("number"==typeof n){var r=!1,i=setTimeout((function(){var e={errMsg:"request timeout"};r=!0,"function"==typeof t.fail&&t.fail(e),"function"==typeof t.complete&&t.complete(e)}),n),o=["success","fail","complete"].reduce((function(e,n){return e[n]=function(e){r||(clearTimeout(i),"function"==typeof t[n]&&t[n](e))},e}),{});e(Object.assign({},t,o))}else e(t)};var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxListeners:2e3};i()(this,e),this.emitter=new u.Z(t),this.callbackMap="undefined"!=typeof WeakMap?new WeakMap:{},this.originalCallbackMap=new WeakMap}return a()(e,[{key:"emit",value:function(e,t){this.emitter.emit(e,t)}},{key:"on",value:function(e,t){if(t&&"function"==typeof t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at ".concat(e," callback function"));this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}},{key:"off",value:function(e,t){var n=this;if(t&&"function"==typeof t){var r=this.callbackMap.get(t);this.emitter.off(e,r),this.callbackMap.delete(t),this.originalCallbackMap.delete(r)}else this.emitter.listeners(e).forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}},{key:"listeners",value:function(e){return this.emitter.listeners(e)}}]),e}();function g(e){return"string"==typeof e?e.length:"object"===c()(e)&&null!==e&&"number"==typeof e.byteLength?e.byteLength:0}function v(e){var t="unknown";if(l.Z.appContactInfo&&l.Z.appContactInfo.operationInfo&&l.Z.appContactInfo.operationInfo.jsonInfo&&l.Z.appContactInfo.operationInfo.jsonInfo.apiAvailable){var n=l.Z.appContactInfo.operationInfo.jsonInfo.apiAvailable;"number"==typeof n[e]&&(t=1===n[e])}return"checkAPIAvailable:key=".concat(e,", ret=").concat(t),t}function _(){return 4===l.Z.appType}function m(){return 0===l.Z.appType}function y(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){e(Object.assign(t,{success:n,fail:r}))}))}}function b(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}function w(e){return e.charAt(0).toUpperCase()+e.slice(1)}function I(){return d.gm?!l.Z.urlCheck:!0===l.Z.debug}function S(e,t){return t.reduce((function(t,n){return(0,f.o8)(e[n])||(t[n]=e[n]),t}),{})}function C(e){if(!d.gm||"string"!=typeof e)return e;if(/^https?:\/\//.test(e)){var t=e.split("?"),n=t[1]||"",r=n.length>0?"&":"";e="".concat(t[0],"?").concat(n).concat(r,"devtools_ignore=true")}return e}function T(){return l.Z.appLaunchInfo&&"singlePage"===l.Z.appLaunchInfo.mode}function E(){var e;return 1==(1&((null===(e=l.Z.appLaunchInfo)||void 0===e?void 0:e.secFlagForSinglePageMode)||0))}function k(){var e=l.Z.host;return e&&"WeChat"!==e.env&&"WMPF"!==e.env}var x=function(){return l.Z.isIsolateContext};function A(e,t){var n=function(e){if("string"==typeof e){for(var t=e.split(".").map((function(e){return parseInt(e,10)}));t.length<4;)t.push(0);return function(e){for(var t=e.length,n=0,r=0;r<t;++r)n=n<<8|e[r];return n}(t.slice(0,4))}return"number"==typeof e?268435455&e:e};return(e=n(e))>(t=n(t))?1:e<t?-1:0}},4488:e=>{function t(e,t){const n=[],r=~~(t/8),i=t%8;for(let t=0,o=e.length;t<o;t++)n[t]=(e[(t+r)%o]<<i&255)+(e[(t+r+1)%o]>>>8-i&255);return n}function n(e,t){const n=[];for(let r=e.length-1;r>=0;r--)n[r]=255&(e[r]^t[r]);return n}function r(e,t){const n=[];for(let r=e.length-1;r>=0;r--)n[r]=e[r]&t[r]&255;return n}function i(e,t){const n=[];for(let r=e.length-1;r>=0;r--)n[r]=255&(e[r]|t[r]);return n}function o(e,t){const n=[];let r=0;for(let i=e.length-1;i>=0;i--){const o=e[i]+t[i]+r;o>255?(r=1,n[i]=255&o):(r=0,n[i]=255&o)}return n}function a(e){return n(n(e,t(e,9)),t(e,17))}function s(e,t,o,a){return a>=0&&a<=15?n(n(e,t),o):i(i(r(e,t),r(e,o)),r(t,o))}function c(e,t,o,a){return a>=0&&a<=15?n(n(e,t),o):i(r(e,t),r(function(e){const t=[];for(let n=e.length-1;n>=0;n--)t[n]=255&~e[n];return t}(e),o))}function u(e,r){const i=[],u=[];for(let e=0;e<16;e++){const t=4*e;i.push(r.slice(t,t+4))}for(let e=16;e<68;e++)i.push(n(n((l=n(n(i[e-16],i[e-9]),t(i[e-3],15)),n(n(l,t(l,15)),t(l,23))),t(i[e-13],7)),i[e-6]));var l;for(let e=0;e<64;e++)u.push(n(i[e],i[e+4]));const d=[121,204,69,25],f=[122,135,157,138];let p,h,g,v,_=e.slice(0,4),m=e.slice(4,8),y=e.slice(8,12),b=e.slice(12,16),w=e.slice(16,20),I=e.slice(20,24),S=e.slice(24,28),C=e.slice(28,32);for(let e=0;e<64;e++){const r=e>=0&&e<=15?d:f;p=t(o(o(t(_,12),w),t(r,e)),7),h=n(p,t(_,12)),g=o(o(o(s(_,m,y,e),b),h),u[e]),v=o(o(o(c(w,I,S,e),C),p),i[e]),b=y,y=t(m,9),m=_,_=g,C=S,S=t(I,19),I=w,w=a(v)}return n([].concat(_,m,y,b,w,I,S,C),e)}e.exports=function(e){let t=8*e.length,n=t%512;n=n>=448?512-n%448-1:448-n-1;const r=new Array((n-7)/8);for(let e=0,t=r.length;e<t;e++)r[e]=0;const i=[];t=t.toString(2);for(let e=7;e>=0;e--)if(t.length>8){const n=t.length-8;i[e]=parseInt(t.substr(n),2),t=t.substr(0,n)}else t.length>0?(i[e]=parseInt(t,2),t=""):i[e]=0;const o=[].concat(e,[128],r,i),a=o.length/64;let s=[115,128,22,111,73,20,178,185,23,36,66,215,218,138,6,0,169,111,48,188,22,49,56,170,227,141,238,77,176,251,14,78];for(let e=0;e<a;e++){const t=64*e;s=u(s,o.slice(t,t+64))}return s}},347:(e,t,n)=>{const r=n(4488);e.exports=function(e){return e="string"==typeof e?function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e.codePointAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>>6),t.push(128|63&r);else if(r<=55295||r>=57344&&r<=65535)t.push(224|r>>>12),t.push(128|r>>>6&63),t.push(128|63&r);else{if(!(r>=65536&&r<=1114111))throw t.push(r),new Error("input is not supported");n++,t.push(240|r>>>18&28),t.push(128|r>>>12&63),t.push(128|r>>>6&63),t.push(128|63&r)}}return t}(e):Array.prototype.slice.call(e),r(e).map((e=>1===(e=e.toString(16)).length?"0"+e:e)).join("")}},2511:function(e,t,n){var r;e=n.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,c=36,u=/^xn--/,l=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,h=String.fromCharCode;function g(e){throw RangeError(f[e])}function v(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function _(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+v((e=e.replace(d,".")).split("."),t).join(".")}function m(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function y(e){return v(e,(function(e){var t="";return e>65535&&(t+=h((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=h(e)})).join("")}function b(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,n){var r=0;for(e=n?p(e/700):e>>1,e+=p(e/t);e>455;r+=c)e=p(e/35);return p(r+36*e/(e+38))}function I(e){var t,n,r,i,o,a,u,l,d,f,h,v=[],_=e.length,m=0,b=128,I=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&g("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(o=m,a=1,u=c;i>=_&&g("invalid-input"),((l=(h=e.charCodeAt(i++))-48<10?h-22:h-65<26?h-65:h-97<26?h-97:c)>=c||l>p((s-m)/a))&&g("overflow"),m+=l*a,!(l<(d=u<=I?1:u>=I+26?26:u-I));u+=c)a>p(s/(f=c-d))&&g("overflow"),a*=f;I=w(m-o,t=v.length+1,0==o),p(m/t)>s-b&&g("overflow"),b+=p(m/t),m%=t,v.splice(m++,0,b)}return y(v)}function S(e){var t,n,r,i,o,a,u,l,d,f,v,_,y,I,S,C=[];for(_=(e=m(e)).length,t=128,n=0,o=72,a=0;a<_;++a)(v=e[a])<128&&C.push(h(v));for(r=i=C.length,i&&C.push("-");r<_;){for(u=s,a=0;a<_;++a)(v=e[a])>=t&&v<u&&(u=v);for(u-t>p((s-n)/(y=r+1))&&g("overflow"),n+=(u-t)*y,t=u,a=0;a<_;++a)if((v=e[a])<t&&++n>s&&g("overflow"),v==t){for(l=n,d=c;!(l<(f=d<=o?1:d>=o+26?26:d-o));d+=c)S=l-f,I=c-f,C.push(h(b(f+S%I,0))),l=p(S/I);C.push(h(b(l,0))),o=w(n,y,r==i),n=0,++r}++n,++t}return C.join("")}a={version:"1.3.2",ucs2:{decode:m,encode:y},decode:I,encode:S,toASCII:function(e){return _(e,(function(e){return l.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return _(e,(function(e){return u.test(e)?I(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},7225:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(n);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var u=0;u<c;++u){var l,d,f,p,h=e[u].replace(a,"%20"),g=h.indexOf(r);g>=0?(l=h.substr(0,g),d=h.substr(g+1)):(l=h,d=""),f=decodeURIComponent(l),p=decodeURIComponent(d),t(o,f)?Array.isArray(o[f])?o[f].push(p):o[f]=[o[f],p]:o[f]=p}return o}},4066:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,i){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(i){var o=encodeURIComponent(t(i))+r;return Array.isArray(e[i])?e[i].map((function(e){return o+encodeURIComponent(t(e))})).join(n):o+encodeURIComponent(t(e[i]))})).join(n):i?encodeURIComponent(t(i))+r+encodeURIComponent(t(e)):""}},6254:(e,t,n)=>{"use strict";t.decode=t.parse=n(7225),t.encode=t.stringify=n(4066)},8575:(e,t,n)=>{"use strict";var r=n(2511),i=n(2502);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=y;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),d=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(6254);function y(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var y=e=u.join(s);if(y=y.trim(),!n&&1===e.split("#").length){var b=c.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?m.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=a.exec(y);if(w){var I=(w=w[0]).toLowerCase();this.protocol=I,y=y.substr(w.length)}if(n||w||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===y.substr(0,2);!S||w&&v[w]||(y=y.substr(2),this.slashes=!0)}if(!v[w]&&(S||w&&!_[w])){for(var C,T,E=-1,k=0;k<f.length;k++){-1!==(x=y.indexOf(f[k]))&&(-1===E||x<E)&&(E=x)}-1!==(T=-1===E?y.lastIndexOf("@"):y.lastIndexOf("@",E))&&(C=y.slice(0,T),y=y.slice(T+1),this.auth=decodeURIComponent(C)),E=-1;for(k=0;k<d.length;k++){var x;-1!==(x=y.indexOf(d[k]))&&(-1===E||x<E)&&(E=x)}-1===E&&(E=y.length),this.host=y.slice(0,E),y=y.slice(E),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var P=this.hostname.split(/\./),D=(k=0,P.length);k<D;k++){var O=P[k];if(O&&!O.match(p)){for(var N="",R=0,M=O.length;R<M;R++)O.charCodeAt(R)>127?N+="x":N+=O[R];if(!N.match(p)){var L=P.slice(0,k),B=P.slice(k+1),F=O.match(h);F&&(L.push(F[1]),B.unshift(F[2])),B.length&&(y="/"+B.join(".")+y),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+j,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[I])for(k=0,D=l.length;k<D;k++){var U=l[k];if(-1!==y.indexOf(U)){var V=encodeURIComponent(U);V===U&&(V=escape(U)),y=y.split(U).join(V)}}var G=y.indexOf("#");-1!==G&&(this.hash=y.substr(G),y=y.slice(0,G));var H=y.indexOf("?");if(-1!==H?(this.search=y.substr(H),this.query=y.substr(H+1),t&&(this.query=m.parse(this.query)),y=y.slice(0,H)):t&&(this.search="",this.query={}),y&&(this.pathname=y),_[I]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var Z=this.search||"";this.path=j+Z}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=m.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",m=n.search||"";n.path=g+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=b||y||n.host&&e.pathname,I=w,S=n.pathname&&n.pathname.split("/")||[],C=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!_[n.protocol]);if(C&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),w=w&&(""===h[0]||""===S[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=h;else if(h.length)S||(S=[]),S.pop(),S=S.concat(h),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(C)n.hostname=n.host=S.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=S.slice(-1)[0],E=(n.host||e.host||S.length>1)&&("."===T||".."===T)||""===T,k=0,x=S.length;x>=0;x--)"."===(T=S[x])?S.splice(x,1):".."===T?(S.splice(x,1),k++):k&&(S.splice(x,1),k--);if(!w&&!I)for(;k--;k)S.unshift("..");!w||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),E&&"/"!==S.join("/").substr(-1)&&S.push("");var A,P=""===S[0]||S[0]&&"/"===S[0].charAt(0);C&&(n.hostname=n.host=P?"":S.length?S.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(w=w||n.host&&S.length)&&!P&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},2502:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},12:(e,t,n)=>{var r=n(9112)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}();function t(){if(o(/^<\?xml\s*/)){for(var e={attributes:{}};!a()&&!s("?>");){var t=i();if(!t)return e;e.attributes[t.name]=t.value}return o(/\?>\s*/),e}}function n(){r("tag %j",e);var t=o(/^<([\w-:.]+)\s*/);if(t){for(var c,u={name:t[1],attributes:{},children:[]};!(a()||s(">")||s("?>")||s("/>"));){var l=i();if(!l)return u;u.attributes[l.name]=l.value}if(o(/^\s*\/>\s*/))return u;for(o(/\??>\s*/),u.content=function(){r("content %j",e);var t=o(/^([^<]*)/);return t?t[1]:""}();c=n();)u.children.push(c);return o(/^<\/[\w-:.]+>\s*/),u}}function i(){r("attribute %j",e);var t,n=o(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(n)return{name:n[1],value:(t=n[2],t.replace(/^['"]|['"]$/g,""))}}function o(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function a(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},9112:(e,t,n)=>{function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=n(7247)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},7247:(e,t,n)=>{var r;function i(e){function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=a[c];n=i.call(e,o),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var u=n.log||t.log||console.log.bind(console);u.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(7307),t.names=[],t.skips=[],t.formatters={}},7307:e=>{var t=1e3,n=60*t,r=60*n,i=24*r,o=365.25*i;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,s){s=s||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!a)return;var s=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*o;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return s.long?a(c=e,i,"day")||a(c,r,"hour")||a(c,n,"minute")||a(c,t,"second")||c+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},7015:e=>{"use strict";e.exports=regeneratorRuntime},2102:e=>{"use strict";e.exports=BabelRuntimeHelpers.applyDecoratedDescriptor},7615:e=>{"use strict";e.exports=BabelRuntimeHelpers.assertThisInitialized},3356:e=>{"use strict";e.exports=BabelRuntimeHelpers.asyncToGenerator},7163:e=>{"use strict";e.exports=BabelRuntimeHelpers.classCallCheck},1279:e=>{"use strict";e.exports=BabelRuntimeHelpers.construct},5843:e=>{"use strict";e.exports=BabelRuntimeHelpers.createClass},3379:e=>{"use strict";e.exports=BabelRuntimeHelpers.createForOfIteratorHelper},7541:e=>{"use strict";e.exports=BabelRuntimeHelpers.createSuper},9727:e=>{"use strict";e.exports=BabelRuntimeHelpers.defineProperty},3646:e=>{"use strict";e.exports=BabelRuntimeHelpers.get},862:e=>{"use strict";e.exports=BabelRuntimeHelpers.getPrototypeOf},4742:e=>{"use strict";e.exports=BabelRuntimeHelpers.inherits},1503:e=>{"use strict";e.exports=BabelRuntimeHelpers.objectSpread2},3451:e=>{"use strict";e.exports=BabelRuntimeHelpers.objectWithoutProperties},8382:e=>{"use strict";e.exports=BabelRuntimeHelpers.possibleConstructorReturn},2208:e=>{"use strict";e.exports=BabelRuntimeHelpers.slicedToArray},6885:e=>{"use strict";e.exports=BabelRuntimeHelpers.toArray},572:e=>{"use strict";e.exports=BabelRuntimeHelpers.toConsumableArray},8676:e=>{"use strict";e.exports=BabelRuntimeHelpers.typeof},3087:e=>{"use strict";e.exports=BabelRuntimeHelpers.wrapNativeSuper}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var r={};(()=>{"use strict";n.d(r,{default:()=>XP});var e={};n.r(e),n.d(e,{createAudioContext:()=>Wt,createCameraContext:()=>Ue,createInnerAudioContext:()=>Ht,createLivePlayerContext:()=>ct,createLivePusherContext:()=>kt,createMapContext:()=>ee,createSQEditorContext:()=>Xt,createSQLivePlayerContext:()=>ut,createSQMapContext:()=>te,createSQVideoContext:()=>he.hN,createVideoContext:()=>he.Au});var t={};n.r(t),n.d(t,{_triggerBeforeShareAppMessage:()=>za,_triggerBeforeUnloadPage:()=>qa,createRouter:()=>Sn,navigateBack:()=>In,navigateTo:()=>yn,navigateToWithRelatedInfo:()=>bn,normalizeUrl:()=>fn,onPageReload:()=>Za,reLaunch:()=>mn,redirectTo:()=>_n,switchTab:()=>wn});var i={};n.r(i),n.d(i,{ShareInfoStorage:()=>dT,_getRealRoute:()=>F,_triggerBeforeShareAppMessage:()=>pT,_triggerBeforeUnloadPage:()=>fT,addToFavorites:()=>AC,checkAPIAvailable:()=>Ce.KU,checkHandoffEnabled:()=>FC,createPluginConsole:()=>eC,createPluginWX:()=>QS,emitIsloatedAppHide:()=>sT,emitIsloatedAppShow:()=>aT,fontFaceRecords:()=>gC.sS,getAppConfig:()=>SC,getCachePermissionBytes:()=>hC,getCloudFileUrl:()=>j.V,getInnerEnterOptionsSync:()=>KC,getLaunchOptionsSync:()=>oT,getLogManager:()=>wp,getNetworkType:()=>Dc.getNetworkType,getPreloadAdUnitIds:()=>hi,getPreloadVideoAdUnitIds:()=>Xr,getPublicLibVersion:()=>Zf,getShareCookieString:()=>xn.ap,getSystemInfoSync:()=>Dr.xI,invokeWebviewMethod:()=>an.L,isIsolatedSubpackage:()=>fC,nativeConsole:()=>br.s,onAddToFavorites:()=>kC,onAppConfig:()=>CC,onAppEnterBackground:()=>eT,onAppEnterForeground:()=>QC,onAppHide:()=>nT,onAppRoute:()=>hT,onAppRouteDone:()=>gT,onAppShow:()=>tT,onAppUnhang:()=>JC,onCallMethodFromWxs:()=>ET,onError:()=>rT,onNavigationBarTitleUpdate:()=>cT,onPageNotFound:()=>$C,onPageReload:()=>vT,onPullDownRefresh:()=>TC,onRealtimeDataResponse:()=>Rp,onShareAppMessage:()=>EC,onShareTimeline:()=>qC,onStartHandoff:()=>xC,onTabItemTap:()=>PC,onThemeChange:()=>XC,onUnhandledRejection:()=>iT,onWebviewEvent:()=>_T,operateRealtimeData:()=>Np,publishAnalyticsConfig:()=>DC,publishCheckWebviewAlive:()=>ST,publishFunctionalPage:()=>mT,publishPageScrollTo:()=>yT,publishTelecontrol:()=>bT,publishUpdateAppData:()=>wT,reportPv:()=>TT,reportRealtimeAction:()=>OC,reportRecycledAPI:()=>kn.Y,reportShareAppMessage:()=>Pw.Ku,route:()=>t,shareAppMessage:()=>NC,shareAppMessageDirectly:()=>RC,shareAppMessageForFakeNative:()=>LC,shareAppMessageToSpecificContactDirectly:()=>MC,shareAppMessageToSpecificContactForFakeNativeDirectly:()=>BC,shareTimeline:()=>zC,showShareMenu:()=>uT,showShareTimelineMenu:()=>YC,showUpdatableMessageSubscribeButton:()=>ZC,startHandoff:()=>IC,subscribeAnalyticsReport:()=>jC,subscribeCheckWebviewAliveOk:()=>IT,subscribeRecycleStatistics:()=>WC,subscribeSavePageState:()=>UC,subscribeSubjectInfo:()=>CT,subscribeTapHandoffButton:()=>GC,subscribeTapShareButton:()=>VC,subscribeTapShareTimeLineButton:()=>HC,uploadUserLogOnHide:()=>ph,userShareMenuState:()=>lT});var o={};n.r(o),n.d(o,{getSubpackagesConfig:()=>kT,onSubpackageReady:()=>Cd});var a={};n.r(a),n.d(a,{_downloadFileSkipCheckDomain:()=>Rr.o,_operateWXData:()=>Nr.JM,_requestSkipCheckDomain:()=>Ad.a,_socketSkipCheckDomainFactory:()=>hf,_uploadFileSkipCheckDomain:()=>Md,private_getUserAgent:()=>Dr.Yu,uploadToCommonCDN:()=>Td});var s=n(8676),c=n.n(s),u=n(3379),l=n.n(u),d=n(8392),f=n(4449),p=n(9947),h=n(3638),g=null;(0,d.Ld)("onInputComponentData",(function(e){g=e,_.forEach((function(e){v(e,e.webviewId)})),_=[]}));var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=g.data;if(n&&"function"==typeof h.Z.webviewEventCallback){var r=JSON.parse(n);if(r.bindkeyboardheightchange)try{h.Z.webviewEventCallback({data:{type:"keyboardheightchange",target:r.target,currentTarget:r.target,timeStamp:Date.now(),touches:[],detail:{duration:e.duration||0,height:e.height||0}},eventName:r.bindkeyboardheightchange,webviewId:t||h.Z.currentWebviewId,nodeId:r.nodeId})}catch(e){throw new p.l0("bind key input error")}}};(0,d.Ld)("removeInputComponent",(function(e){g&&g.inputId===e.inputId&&(g=null)}));var _=[];(0,d.jQ)("onKeyboardHeightChange",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;g?v(e,t):_.push({inputId:e.inputId,height:e.height,duration:e.duration,webviewId:t})})),(0,d.jQ)("onKeyboardValueChange",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.value,r=e.cursor;if((0,d.nY)("setKeyboardValue",{value:n,cursor:r,inputId:e.inputId},[t]),e.data){var i=JSON.parse(e.data);if(i.modelValueName&&__virtualDOM__.setModelValueData(e.value,i.modelValueName,t,i.nodeId),"function"==typeof h.Z.webviewEventCallback&&i.bindinput){var o;try{o=h.Z.webviewEventCallback({data:{type:"input",target:i.target,currentTarget:i.target,timeStamp:Date.now(),touches:[],detail:{value:e.value,cursor:e.cursor,keyCode:e.keyCode}},eventName:i.bindinput,webviewId:t,nodeId:i.nodeId})}catch(e){throw new p.l0("bind key input error")}if(i.setKeyboardValue)if(null==o||!1===o);else if("Object"===(0,p.Em)(o)){var a={inputId:e.inputId};n!==o.value&&(a.value=o.value+""),Number.isNaN(parseInt(o.cursor,10))||(a.cursor=parseInt(o.cursor,10),void 0===a.value&&(a.value=n),a.cursor>a.value.length&&(a.cursor=-1)),(0,d.IN)("setKeyboardValue",a)}else n!==o&&(0,d.IN)("setKeyboardValue",{value:o+"",cursor:-1,inputId:e.inputId})}}}));var m,y=n(6326),b=n(7264),w=n(4742),I=n.n(w),S=n(7541),C=n.n(S),T=n(1503),E=n.n(T),k=n(572),x=n.n(k),A=n(5843),P=n.n(A),D=n(2102),O=n.n(D),N=n(7163),R=n.n(N),M=n(3082),L=n(4531),B=n(2363),F=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,p.sd)(h.Z.lastRoute,e,t)},j=n(4416),W=n(9267),U=!B.Qw&&B.ux,V={},G={},H=new y.y,Z={},q={},z={},Y=["getCenterLocation","getRegion","getScale","includePoints","moveToLocation","translateMarker","setIndoorFloor","getIndoorFloor","setIndoorMaskColor","getRotate","getSkew","eraseLines","setCenterOffset","addCustomLayer","removeCustomLayer","moveAlong","initMarkerCluster","addMarkers","removeMarkers","on","off","once","toScreenLocation","fromScreenLocation","addGroundOverlay","updateGroundOverlay","removeGroundOverlay","openMapApp","setLocMarkerIcon"];var K=0;(0,d.Ld)("mapInsert",(function(e,t){var n=e.nodeId,r=e.domId,i=e.mapId,o=e.pluginId,a="".concat(t,"_").concat(o,"_").concat(r,"_");n&&n!==__virtualDOM__.getRootNodeId(t)&&(a+=n),V[a]=i,G["".concat(t,"_").concat(i)]=e,H.emit("mapInsert"),function(e){Z[e]||(Z[e]=!0,(0,L.dq)(e,(function(e){delete Z[e],Object.keys(V).forEach((function(t){new RegExp("^"+e).test(t)&&(delete G["".concat(e,"_").concat(V[t])],delete V[t])})),Object.keys(q).forEach((function(t){new RegExp("^api_"+e).test(t)&&(delete G["".concat(e,"_").concat(V[t.substr(4)])],delete q[t])})),Object.keys(q).forEach((function(t){new RegExp("^SQ_"+e).test(t)&&(delete G[t.substr(3)],delete q[t])}))})))}(t)})),(0,d.Ld)("mapRemove",(function(e,t){var n=e.domId,r=e.mapId,i=e.pluginId,o=e.nodeId,a="".concat(t,"_").concat(i,"_").concat(n,"_");o&&o!==__virtualDOM__.getRootNodeId(t)&&(a+=o),delete V[a],delete G["".concat(t,"_").concat(r)];var s="api_".concat(t,"_").concat(i,"_").concat(n,"_");o&&o!==__virtualDOM__.getRootNodeId(t)&&(s+=o);var c="SQ_".concat(t,"_").concat(r);delete q[s],delete q[c]}));var J=function e(){R()(this,e)};(0,d.Ld)("operateMapCallback",(function(e){var t=e.callbackId;t&&"function"==typeof z[t]&&(z[t](e),delete z[t])}));var $=(m=function(){function e(){var t=this;R()(this,e);var n=this.exportContext=new J;Y.forEach((function(e){return n[e]=t[e].bind(t)})),this._lastMarkerPos={},this._lastMarkerDeg={},this._translating={},this._delayTranslate={},this._isGetMarkerPos={}}return P()(e,[{key:"on",value:function(e,t){this._listenerHandler("on",e,t)}},{key:"off",value:function(e,t){this._listenerHandler("off",e,t)}},{key:"once",value:function(e,t){this._listenerHandler("once",e,t)}},{key:"_invoke",value:function(e,t){if(B.DD||B.gm||U||B.Ae||["includeMapPoints","getMapMarker"].indexOf(e)>=0){t.method=e;var n="callback".concat(this.webviewId,"_").concat(t.mapId,"_").concat(K++);z[n]=function(e){delete e.callbackId,delete e.mapId,delete e.method,e.errMsg&&(e.errMsg.indexOf(":ok")>-1?"function"==typeof t.success&&t.success(e):e.errMsg.indexOf(":fail")>-1&&"function"==typeof t.fail&&t.fail(e)),"function"==typeof t.complete&&t.complete(e)},t.callbackId=n,(0,d.nY)("operateMap",t,[this.webviewId])}else(0,d.IN)(e,t)}},{key:"toScreenLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("toScreenLocation",e)}},{key:"fromScreenLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("fromScreenLocation",e)}},{key:"getCenterLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapCenterLocation",e)}},{key:"setLocMarkerIcon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("setLocMarkerIcon",e,{iconPath:""})){var t=Object.assign({},e);/^(wxfile|https?)/.test(t.iconPath)||(t.iconPath=F(t.iconPath,!1)),this._invokeMethod("setMapLocMarkerIcon",t)}}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapScale",e,{beforeSuccess:function(e){e.scale=+Number.parseFloat(e.scale).toFixed(2)}})}},{key:"getRegion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapRegion",e)}},{key:"moveToLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("moveToMapLocation",e)}},{key:"addGroundOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("addGroundOverlay",e,{id:0,src:"",bounds:{}})){var t=Object.assign({visible:!0,zIndex:1,opacity:1},e);/^(wxfile|https?)/.test(t.src)||(t.src=F(t.src,!1)),this._invokeMethod("addMapGroundOverlay",t)}}},{key:"openMapApp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("openMapApp",e,{longitude:0,latitude:0,destination:""})&&this._invokeMethod("openMapApp",e)}},{key:"removeGroundOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("removeGroundOverlay",e,{id:0})&&this._invokeMethod("removeMapGroundOverlay",e)}},{key:"updateGroundOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("updateGroundOverlay",e,{id:0,src:"",bounds:{}})){var t=Object.assign({visible:!0,zIndex:1,opacity:1},e);this._invokeMethod("updateMapGroundOverlay",t)}}},{key:"moveAlong",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("moveAlong",e,{duration:0,markerId:0,path:[]})){var t={autoRotate:!0};Object.assign(t,e),this._invokeMethod("moveMapMarkerAlong",t)}}},{key:"addMarkers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("addMarkers",t,{markers:[]})){var n=t.markers.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};W.hj(e.id)||console.warn("marker id must be a number");var t=Object.assign({},e);t.anchor=W.Kn(t.anchor)?t.anchor:{x:.5,y:1},t.alpha=W.hj(t.alpha)?t.alpha:1,t.rotate=W.hj(t.rotate)?t.rotate:0;var n=t.iconPath;return W.HD(n)&&!/^(wxfile|https?)/.test(n)&&(t.iconPath=F(n,!1)),W.Kn(t.label)&&(t.label=Object.assign({content:"",color:"#000000",fontSize:12,borderRadius:0,borderWidth:0,borderColor:"#000000",bgColor:"#00000000",padding:0,anchorX:0,anchorY:0,textAlign:"right"},t.label)),W.Kn(t.callout)?(t.callout=Object.assign({content:"",color:"#000000",fontSize:12,display:"BYCLICK",borderRadius:0,borderWidth:0,borderColor:"#00000000",bgColor:"#ffffff",padding:0,anchorX:0,anchorY:0,textAlign:"center"},t.callout),t.callout.display="ALWAYS"===t.callout.display?1:0):W.HD(t.title)&&(t.callout={content:t.title,bgColor:"#FFFFFF",padding:10,display:0,textAlign:"center"}),delete t.title,t.data=JSON.stringify({markerId:t.id}),t})),r={};n.forEach((function(e,t){var n=e.iconPath;W.HD(n)&&/^cloud:/.test(n)&&(r[n]||(r[n]=[]),r[n].push(t))}));var i=Object.keys(r);(0,j.V)(i,"image",(function(o){x()(o.data.map((function(e){return e.url}))).forEach((function(e,t){r[i[t]].forEach((function(t){n[t].iconPath=e}))}));var a=Object.assign({clear:!1},t,{markers:n});e._invokeMethod("addMapMarkers",a)}))}}},{key:"removeMarkers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("removeMarkers",e,{markerIds:[]})){var t=Object.assign({},{markers:e.markerIds},e);this._invokeMethod("removeMapMarkers",t)}}},{key:"initMarkerCluster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({enableDefaultStyle:!0,zoomOnClick:!0,gridSize:60},e);this._invokeMethod("initMapMarkerCluster",t)}},{key:"translateMarker",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.markerId;if(void 0!==n)if(t.destination)if(this._translating[n])this._delayTranslate[n]?this._delayTranslate[n].push(t):this._delayTranslate[n]=[t];else{if(!this._isGetMarkerPos[n])return this._translating[n]=!0,this._invokeMethod("getMapMarker",{markerId:n,success:function(t){e._lastMarkerPos[n]=t.pos},complete:function(){e._isGetMarkerPos[n]=!0,e._translating[n]=!1;var t=e._delayTranslate[n];t&&t.length&&e.translateMarker(t.shift())}}),void(this._delayTranslate[n]?this._delayTranslate[n].push(t):this._delayTranslate[n]=[t]);0===t.duration&&(t.duration=1);var r={markerId:n,keyFrames:[],success:function(n){"function"==typeof t.success&&t.success.call(e,n),"function"==typeof t.animationEnd&&t.animationEnd.call(e)},fail:function(r){e._delayTranslate[n]=[],"function"==typeof t.fail&&t.fail.call(e,r)},complete:function(r){"function"==typeof t.complete&&t.complete.call(e,r),e._translating[n]=!1;var i=e._delayTranslate[n];i&&i.length&&e.translateMarker(i.shift())}},i=0,o=this._lastMarkerPos[n],a=t.destination,s=!(o&&o.latitude===a.latitude&&o.longitude===a.longitude);if(t.autoRotate||"number"!=typeof t.rotate){var c,u;if(o){var l=a.latitude-o.latitude,d=a.longitude-o.longitude,f=l/d||0;c=Math.abs((d<0?180:0)-Math.abs(180*Math.atan(f)/Math.PI))*(l>0?-1:1)}"number"==typeof this._lastMarkerDeg[n]&&(u=c-this._lastMarkerDeg[n],Math.abs(u)>180&&(u=u>0?u-360:u+360),Math.abs(u)>3&&t.autoRotate&&s&&(i=u)),(Math.abs(u)>3&&t.autoRotate||void 0===this._lastMarkerDeg[n])&&(this._lastMarkerDeg[n]=c)}else{var p=t.rotate-(this._lastMarkerDeg[n]||0);Math.abs(p)>3&&(Math.abs(p)>180&&(p=p>0?p-360:p+360),i=p,this._lastMarkerDeg[n]=t.rotate)}var h="number"==typeof t.duration?t.duration:1e3;t.moveWithRotate?r.keyFrames.push(E()({rotate:i,duration:h},t.destination)):(s&&r.keyFrames.push(E()({duration:h},t.destination)),0!==i&&r.keyFrames.unshift({rotate:i,duration:Math.abs(i)<10?100:500})),r.keyFrames.length>0?(this._translating[n]=!0,this._invokeMethod("translateMapMarker",r)):setTimeout((function(){r.success(),r.complete()})),this._lastMarkerPos[n]=t.destination}else console.warn("MapContext.translateMarker: require destination");else console.warn("MapContext.translateMarker: require markerId")}},{key:"includePoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.points&&e.points instanceof Array){e.points.forEach((function(e){e.latitude=Number(e.latitude),e.longitude=Number(e.longitude)}));var t=e.padding;e.padding=[0,0,0,0],t&&(e.padding[0]=Number(t[0])||0,e.padding[1]=Number(t[1])||0,e.padding[2]=Number(t[2])||0,e.padding[3]=Number(t[3])||0),this._invokeMethod("includeMapPoints",e)}}},{key:"setIndoorFloor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.buildingId?e.floorName?this._invokeMethod("setMapIndoorFloor",e):console.warn("MapContext.setIndoorFloor: require floorName"):console.warn("MapContext.setIndoorFloor: require buildingId")}},{key:"getIndoorFloor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapIndoorFloor",e)}},{key:"getRotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapRotate",e)}},{key:"getSkew",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapSkew",e)}},{key:"setIndoorMaskColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("setMapIndoorMaskColor",e)}},{key:"eraseLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.lines&&e.lines instanceof Array?this._invokeMethod("eraseMapLines",e):console.warn("MapContext.eraseLines: require lines")}},{key:"setCenterOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({offset:[.5,.5],animated:!1},e);this._invokeMethod("setMapCenterOffset",t)}},{key:"addCustomLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("addCustomLayer",e,{layerId:""})&&this._invokeMethod("addMapCustomLayer",e)}},{key:"removeCustomLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("removeCustomLayer",e,{layerId:""})&&this._invokeMethod("removeMapCustomLayer",e)}}]),e}(),O()(m.prototype,"toScreenLocation",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"toScreenLocation"),m.prototype),O()(m.prototype,"fromScreenLocation",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"fromScreenLocation"),m.prototype),O()(m.prototype,"getCenterLocation",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"getCenterLocation"),m.prototype),O()(m.prototype,"setLocMarkerIcon",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"setLocMarkerIcon"),m.prototype),O()(m.prototype,"getScale",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"getScale"),m.prototype),O()(m.prototype,"getRegion",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"getRegion"),m.prototype),O()(m.prototype,"moveToLocation",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"moveToLocation"),m.prototype),O()(m.prototype,"addGroundOverlay",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"addGroundOverlay"),m.prototype),O()(m.prototype,"openMapApp",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"openMapApp"),m.prototype),O()(m.prototype,"removeGroundOverlay",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"removeGroundOverlay"),m.prototype),O()(m.prototype,"updateGroundOverlay",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"updateGroundOverlay"),m.prototype),O()(m.prototype,"moveAlong",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"moveAlong"),m.prototype),O()(m.prototype,"addMarkers",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"addMarkers"),m.prototype),O()(m.prototype,"removeMarkers",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"removeMarkers"),m.prototype),O()(m.prototype,"initMarkerCluster",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"initMarkerCluster"),m.prototype),O()(m.prototype,"translateMarker",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"translateMarker"),m.prototype),O()(m.prototype,"includePoints",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"includePoints"),m.prototype),O()(m.prototype,"setIndoorFloor",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"setIndoorFloor"),m.prototype),O()(m.prototype,"getIndoorFloor",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"getIndoorFloor"),m.prototype),O()(m.prototype,"getRotate",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"getRotate"),m.prototype),O()(m.prototype,"getSkew",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"getSkew"),m.prototype),O()(m.prototype,"setIndoorMaskColor",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"setIndoorMaskColor"),m.prototype),O()(m.prototype,"eraseLines",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"eraseLines"),m.prototype),O()(m.prototype,"setCenterOffset",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"setCenterOffset"),m.prototype),O()(m.prototype,"addCustomLayer",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"addCustomLayer"),m.prototype),O()(m.prototype,"removeCustomLayer",[M.Qu],Object.getOwnPropertyDescriptor(m.prototype,"removeCustomLayer"),m.prototype),m),X=function(e){I()(n,e);var t=C()(n);function n(e,r,i,o){var a;if(R()(this,n),a=t.call(this),"string"!=typeof e)throw new p.iZ("Parameter 1 should be a string");return a.domId=e,a.pluginId=o,a.webviewId=r,a.nodeId=i,a}return P()(n,[{key:"_invokeMethod",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="".concat(this.webviewId,"_").concat(this.pluginId,"_").concat(this.domId,"_").concat(this.nodeId);"number"==typeof V[i]||V[i]?(t.mapId=V[i],this._invoke(e,t,r)):H.on("mapInsert",(function(){t.mapId=V[i],n._invoke(e,t,r)}))}},{key:"_listenerHandler",value:function(e,t,n){if(["on","off","once"].includes(e)){var r,i="".concat(this.webviewId,"_").concat(this.pluginId,"_").concat(this.domId,"_").concat(this.nodeId),o=this.webviewId;"number"==typeof V[i]||V[i]?(r=V[i],re[e]("".concat(t,"_").concat(o,"_").concat(r),n)):H.on("mapInsert",(function(){r=V[i],re[e]("".concat(t,"_").concat(o,"_").concat(r),n)}))}}}]),n}($),Q=function(e){I()(n,e);var t=C()(n);function n(e,r){var i;return R()(this,n),(i=t.call(this)).mapId=e,i.webviewId=r,i}return P()(n,[{key:"_invokeMethod",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.mapId=this.mapId,this._invoke(e,t,n)}},{key:"_listenerHandler",value:function(e,t,n){if(["on","off","once"].includes(e)){var r=this.webviewId,i=this.mapId;re[e]("".concat(t,"_").concat(r,"_").concat(i),n)}}}]),n}($),ee=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i="api_".concat(t,"_").concat(r,"_").concat(e,"_");if(n&&n!==__virtualDOM__.getRootNodeId(t)&&(i+=n),q[i])return q[i].exportContext;var o=new X(e,t,n,r);return q[i]=o,o.exportContext},te=function(e,t){var n="SQ_".concat(t,"_").concat(e);if(q[n])return q[n].exportContext;var r=new Q(e,t);return q[n]=r,r.exportContext},ne=n(8198),re=new y.Z({maxListeners:2e5}),ie={onMapMarkerClusterCreate:"markerClusterCreate",onMapMarkerClusterClick:"markerClusterClick"};Object.keys(ie).forEach((function(e){(0,b.n)(e,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.mapId,i=ie[e];delete t.mapId,re.emit("".concat(i,"_").concat(n,"_").concat(r),t)}))})),(0,d.jQ)("onMapMarkerClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,ne.Hk)();var n=G["".concat(t,"_").concat(e.mapId)];if(n&&n.bindmarkertap&&"function"==typeof h.Z.webviewEventCallback){var r=JSON.parse(e.data);h.Z.webviewEventCallback({data:{type:"markertap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{markerId:r.markerId},markerId:r.markerId,_userTap:!0},eventName:n.bindmarkertap,webviewId:t,nodeId:n.nodeId})}})),(0,d.jQ)("onMapCalloutClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,ne.Hk)();var n=G["".concat(t,"_").concat(e.mapId)];if(n&&n.bindcallouttap&&"function"==typeof h.Z.webviewEventCallback){var r=JSON.parse(e.data);h.Z.webviewEventCallback({data:{type:"callouttap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{markerId:r.markerId},markerId:r.markerId,_userTap:!0},eventName:n.bindcallouttap,webviewId:t,nodeId:n.nodeId})}})),(0,d.jQ)("onMapLabelClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,ne.Hk)();var n=G["".concat(t,"_").concat(e.mapId)];if(n&&n.bindlabeltap&&"function"==typeof h.Z.webviewEventCallback){var r=JSON.parse(e.data);h.Z.webviewEventCallback({data:{type:"labeltap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{markerId:r.markerId},markerId:r.markerId,_userTap:!0},eventName:n.bindlabeltap,webviewId:t,nodeId:n.nodeId})}})),(0,d.jQ)("onMapControlClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if((0,ne.Hk)(),e.data&&"function"==typeof h.Z.webviewEventCallback){var n=JSON.parse(e.data);n.bindcontroltap&&h.Z.webviewEventCallback({data:{type:"controltap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{controlId:n.controlId},controlId:n.controlId,_userTap:!0},eventName:n.bindcontroltap,webviewId:t,nodeId:n.nodeId})}})),(0,d.Ld)("onMapControlTap",(function(e,t){var n=e.data;if((0,ne.Hk)(),n&&"function"==typeof h.Z.webviewEventCallback){var r=JSON.parse(n);r.bindcontroltap&&h.Z.webviewEventCallback({data:{type:"controltap",target:r.target,currentTarget:r.target,timeStamp:Date.now(),touches:[],detail:{controlId:r.controlId},controlId:r.controlId,_userTap:!0},eventName:r.bindcontroltap,webviewId:t,nodeId:r.nodeId})}})),(0,d.jQ)("onMapRegionChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=G["".concat(t,"_").concat(e.mapId)];if(n&&n.bindregionchange&&"function"==typeof h.Z.webviewEventCallback){var r={type:e.type,rotate:e.rotate,skew:e.skew,gesture:e.gesture,scale:+Number.parseFloat(e.scale).toFixed(2),centerLocation:e.centerLocation,region:e.region},i={target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{type:e.type},type:e.type,causedBy:e.causedBy};"end"===e.type&&(i.detail=r),h.Z.webviewEventCallback({data:i,eventName:n.bindregionchange,webviewId:t,nodeId:n.nodeId})}})),(0,d.jQ)("onMapClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,ne.Hk)();var n=G["".concat(t,"_").concat(e.mapId)];n&&n.bindtap&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"tap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{longitude:e.longitude,latitude:e.latitude},_userTap:!0},eventName:n.bindtap,webviewId:t,nodeId:n.nodeId})})),(0,d.jQ)("onMapPoiClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,ne.Hk)();var n=G["".concat(t,"_").concat(e.mapId)];if(n&&n.bindpoitap&&"function"==typeof h.Z.webviewEventCallback){var r={name:e.name,longitude:e.longitude,latitude:e.latitude};e.buildingId&&(r.buildingId=e.buildingId),e.floorName&&(r.floorName=e.floorName),h.Z.webviewEventCallback({data:{type:"poitap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:r,_userTap:!0},eventName:n.bindpoitap,webviewId:t,nodeId:n.nodeId})}})),(0,d.jQ)("onMapIndoorChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=G["".concat(t,"_").concat(e.mapId)];n&&n.bindindoorchange&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{},info:{buildingId:e.buildingId,buildingName:e.buildingName,floorIndex:e.floorIndex,floorList:e.floorList}},eventName:n.bindindoorchange,webviewId:t,nodeId:n.nodeId})})),(0,d.jQ)("onMapAnchorPointClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,ne.Hk)();var n=G["".concat(t,"_").concat(e.mapId)];n&&n.bindanchorpointtap&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"anchorpointtap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{longitude:e.longitude,latitude:e.latitude},_userTap:!0},eventName:n.bindanchorpointtap,webviewId:t,nodeId:n.nodeId})}));var oe=function(e,t,n){e=e||[];var r=[],i=[];if("onTouchStart"===t){for(var o=0;o<e.length;++o)r.push(e[o]);var a={x:n.touch.x,y:n.touch.y,identifier:n.touch.id};i.push(a),r.push(a)}else if("onTouchMove"===t)for(var s=0;s<e.length;++s){for(var c=e[s],u=!1,l=0;l<n.touches.length;++l){var d={x:n.touches[l].x,y:n.touches[l].y,identifier:n.touches[l].id};if(d.identifier===c.identifier&&(c.x!==d.x||c.y!==d.y)){r.push(d),i.push(d),u=!0;break}}u||r.push(c)}else if("onTouchEnd"===t)for(var f={x:n.touch.x,y:n.touch.y,identifier:n.touch.id},p=0;p<e.length;++p){var h=e[p];h.identifier===f.identifier?i.push(f):r.push(h)}else if("onTouchCancel"===t)for(var g=0;g<n.touches.length;++g){var v={x:n.touches[g].x,y:n.touches[g].y,identifier:n.touches[g].id};i.push(v)}else if("onLongPress"===t){for(var _={x:n.touch.x,y:n.touch.y,identifier:n.touch.id},m=0;m<e.length;++m)e[m].identifier===_.identifier?r.push(_):r.push(e[m]);i.push(_)}return{touches:r,changedTouches:i}},ae={onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchCancel:"touchcancel",onLongPress:"longtap"},se=n(7466),ce=n(2354),ue=n(2661),le=n(3786),de=n(4547),fe=n(8947);function pe(e,t,n,r){if("onLongPress"!==e){var i=(0,ue.f5)(r,t.canvasNumber),o=oe(i.lastTouches,e,n),a=o.touches,s=o.changedTouches;i.lastTouches=a,i[e]&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:ae[e],timeStamp:new Date-i.startTime,target:i.target,touches:(0,le.LG)(a),changedTouches:(0,le.LG)(s)},eventName:i[e],webviewId:r,nodeId:i.nodeId})}}fe.Z.onReady((function(){["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onLongPress"].forEach((function(e){(0,b.n)(e,(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=JSON.parse(t.data||"{}"),i=r.canvasNumber,o=r.skia,a=r.type;if("TextView"!==a&&"ImageView"!==a)if("android-webgl"!==a){if(o){if(!(0,de.n)(ce.iO,i))return}else if(!(0,de.n)(se.canvasInfo,i))return;var s;s=o?ce.iO[i].data:se.canvasInfo[i].data;var c=oe(s.lastTouches,e,t),u=c.touches,l=c.changedTouches;s.lastTouches=u,s[e]&&"function"==typeof h.Z.webviewEventCallback&&("onTouchMove"===e&&0===l.length||h.Z.webviewEventCallback({data:{type:ae[e],timeStamp:new Date-s.startTime,target:s.target,touches:u,changedTouches:l},eventName:s[e],webviewId:n,nodeId:r.nodeId}))}else pe(e,r,t,n)}))}))}));var he=n(8560),ge=["onVideoPlay","onVideoPause","onVideoTimeUpdate","onVideoClickFullScreenBtn","onVideoClickDanmuBtn","onVideoFullScreenChange","onVideoWaiting","onVideoError","onVideoLoadedMetaData","onVideoProgress","onVideoBackgroundPlaybackChange"];fe.Z.onReady((function(){B.wZ&&fe.Z.useXWebVideo&&(ge=ge.map((function(e){return e.replace("on","onXWeb")})).concat(ge)),ge.forEach((function(e){(0,b.n)(e,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r="bind".concat(e.replace("XWeb","").substring(7).toLowerCase()),i=JSON.parse(t.data),o=i.handlers,a=i.event,s=i.createdTimestamp,c=i.nodeId;if(o){var u=JSON.parse(t.data);if(t.videoPlayerId=t.videoPlayerId||u&&u.videoPlayerId||"-1000",o[r]&&"function"==typeof h.Z.webviewEventCallback){var l={type:r.substring(4),target:a.target,currentTarget:a.currentTarget,timeStamp:(t.timeStamp||Date.now())-s,detail:{}};if("bindtimeupdate"===r&&(l.detail={currentTime:t.position,duration:t.duration}),"bindfullscreenchange"===r){var d=t.direction;d=0===d||180===d||"vertical"===d?"vertical":"horizontal",l.detail={fullScreen:t.fullScreen,fullscreen:t.fullScreen,direction:d}}"binderror"===r?l.detail={errMsg:t.errMsg}:"bindprogress"===r?l.detail={buffered:t.buffered}:"bindloadedmetadata"===r?l.detail={duration:t.duration,width:t.width,height:t.height}:"bindbackgroundplaybackchange"===r&&(l.detail={playInBackground:t.playInBackground}),h.Z.webviewEventCallback({data:l,eventName:o[r],webviewId:n,nodeId:c})}}}))}))})),(0,d.jQ)("onEnterVideoPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=he.fH.webviewId,n=he.oo["".concat(t,"_").concat(e.videoPlayerId)];n&&n.handlers.bindenterpictureinpicture&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"enterpictureinpicture",target:n.event.target,currentTarget:n.event.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindenterpictureinpicture,webviewId:t,nodeId:n.nodeId})})),(0,d.jQ)("onLeaveVideoPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=he.fH.webviewId,n=he.oo["".concat(t,"_").concat(e.videoPlayerId)];n&&n.handlers.bindleavepictureinpicture&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"leavepictureinpicture",target:n.event.target,currentTarget:n.event.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindleavepictureinpicture,webviewId:t,nodeId:n.nodeId})}));var ve=!1,_e={};(0,d.Ld)("enableCoverViewScrollEventTransfer",(function(e){var t=e.nodeId;_e[t]=!0})),(0,d.Ld)("disableCoverViewScrollEventTransfer",(function(e){var t=e.nodeId;_e[t]=!1})),(0,d.jQ)("onScrollViewScroll",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(ve||(setTimeout((function(){ve=!1}),500),(0,d.IN)("hideKeyboard",{}),ve=!0),e.data&&"function"==typeof h.Z.webviewEventCallback){var n=JSON.parse(e.data);n.bindscroll&&h.Z.webviewEventCallback({data:{type:"scroll",target:n.target,currentTarget:n.target,detail:{scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop},timeStamp:Date.now()-n.timeStamp},eventName:n.bindscroll,webviewId:t,nodeId:n.nodeId}),_e[n.nodeId]&&(0,d.nY)("coverViewScrollEvent",{nodeId:n.nodeId,scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})}}));var me=n(3356),ye=n.n(me),be=n(7015),we=n.n(be),Ie=n(9769),Se=n(8510),Ce=n(968);function Te(e){return"scope.userInfo"!==e||((0,Ce.KU)("getUserInfo")||(0,Ce.KU)("authorize"))}var Ee,ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.innerContext,n=void 0===t?{}:t,r=e.args,i=void 0===r?{}:r;(0,d.r3)("authorize",i,{scope:""})&&(Te(i.scope)?(0,d.IN)("authorize",(0,p.f0)(i,{scope:[i.scope],requestInQueue:!n.hasOwnProperty("requestInQueue")||Boolean(n.requestInQueue)}),{beforeAll:function(e){delete e.body,void 0!==e.err_code&&(e.errCode=e.err_code,delete e.err_code)}}):(0,d.YG)("authorize",i,"scope unauthorized"))},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ke({args:e})},Ae=ke,Pe={},De={},Oe={},Ne=[],Re={},Me=new y.y,Le=new WeakMap;var Be=function(e){var t=[],n=1;return(0,d.Ld)(e,(function(e){t.forEach((function(t){var n=t[0],r=t[1];n.cid===e.cid&&n.cameraId===e.cameraId&&r(e)})),t=[]})),function(e,r){e.cid=n++,t.push([e,r])}}("onOperateCameraCallback"),Fe={};function je(e,t){var n=e.cameraId,r=e.pluginId;Me.emit("cameraRemoved"),delete Pe["".concat(t,"_").concat(r)],delete De["".concat(t,"_").concat(n)],delete Oe["".concat(t,"_").concat(n)],delete Fe[t]}(0,b.n)("onCameraInitDone",(function(){Fe[h.Z.currentWebviewId]=!0,Me.emit("cameraInitialized")})),(0,d.Ld)("cameraInserted",(function(e,t){var n=e.cameraId,r=e.pluginId,i=e.bindings,o="".concat(t,"_").concat(r);Pe[o]=n,De["".concat(t,"_").concat(n)]=i,Me.emit("cameraInsert"),(0,L.dq)(t,(function(){je({cameraId:n,pluginId:r},t)}))})),(0,d.Ld)("cameraUpdated",(function(e,t){var n=e.cameraId,r=e.hidden;Oe["".concat(t,"_").concat(n)]=r})),(0,d.Ld)("cameraRemoved",(function(e,t){je({cameraId:e.cameraId,pluginId:e.pluginId},t)})),(0,Se.q)((function(){if(void 0!==__appServiceEngine__&&"function"===__appServiceEngine__.getCurrentPagesByDomain){var e=__appServiceEngine__.getCurrentPagesByDomain("").map((function(e){return e.__wxWebviewId__}));Object.keys(Pe).forEach((function(t){var n=t.split("_").shift();-1===e.indexOf(Number(n))&&(delete De["".concat(n,"_").concat(Pe[t])],delete Oe["".concat(n,"_").concat(Pe[t])],delete Pe[t],Re[n]&&(Re[n].forEach((function(e){clearTimeout(e)})),delete Re[n]))}))}})),(0,d.jQ)("onCameraVideoTaken",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Ne.forEach((function(n){n(e,t)}))}));var We=(Ee=function(){function e(t,n){R()(this,e),this.webviewId=t,this.pluginId=n}return P()(e,[{key:"onCameraFrame",value:function(e){if(B.gm||B.qB)return function(e,t,n){var r=null,i=null,o=null,a=(0,M.mh)("start",ye()(we().mark((function c(){var u,l,d,f,p,h,g,v,_,m,y;return we().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(u=480,l=640,d="".concat(t,"_").concat(n),e&&"function"==typeof e){c.next=5;break}throw new Error("callback is not a function");case 5:if("number"!=typeof Pe[d]&&!Pe[d]){c.next=11;break}f=De["".concat(t,"_").concat(Pe[d])],"small"===(p=(f||{}).frameSize)?(u=288,l=352):"medium"===p?(u=480,l=640):"large"===p&&(u=720,l=1280),c.next=14;break;case 11:return c.next=13,new Promise((function(e){return Me.once("cameraInsert",e)}));case 13:return c.abrupt("return",a());case 14:return o=function(){s()},Me.once("cameraRemoved",o),h=window.createObjectURL||window.URL&&window.URL.createObjectURL||window.webkitURL.createObjectURL,g=document.createElement("video"),v=document.createElement("canvas"),_=v.getContext("2d"),v.width=u,v.height=l,g.style.width=u+"px",g.style.height=l+"px",c.prev=24,c.next=27,new Promise((function(e,t){navigator.getUserMedia({video:{width:u,height:l},audio:!1},e,t)}));case 27:m=c.sent,c.next=33;break;case 30:throw c.prev=30,c.t0=c.catch(24),new Error("camera is not found");case 33:"srcObject"in g?g.srcObject=m:g.src=h(m),g.play(),r=m.getTracks()[0],y=function t(){_.drawImage(g,0,0),e({width:u,height:l,data:_.getImageData(0,0,u,l).data.buffer}),i=window.requestAnimationFrame(t)},i=window.requestAnimationFrame(y);case 38:case"end":return c.stop()}}),c,null,[[24,30]])})))),s=(0,M.mh)("stop",ye()(we().mark((function e(){return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.cancelAnimationFrame(i),Me.off("cameraRemoved",o),r&&r.stop();case 3:case"end":return e.stop()}}),e)}))));return{start:a,stop:s}}(e,this.webviewId,this.pluginId);var t=this.webviewId,n=(0,M.Vl)(this._invokeMethod.bind(this,"listenFrameChange")),r=(0,M.Vl)(this._invokeMethod.bind(this,"closeFrameChange")),i=!1,o=null,a=null,s=null,c=(0,M.mh)("start",ye()(we().mark((function r(){var c,l,d;return we().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!i){r.next=2;break}return r.abrupt("return");case 2:if(i=!0,e&&"function"==typeof e){r.next=5;break}throw new Error("callback is not a function");case 5:if(!B.wZ||Fe[t]){r.next=8;break}return r.next=8,new Promise((function(e){return Me.once("cameraInitialized",e)}));case 8:if(i){r.next=10;break}throw new Error("listener has been stopped");case 10:return B.cj&&(o=function(){if(i&&a){var t={width:a.width,height:a.height,data:a.data};e(t)}},(0,b.n)("onCameraFrame",o)),r.prev=11,r.next=14,n({});case 14:c=r.sent,r.next=21;break;case 17:throw r.prev=17,r.t0=r.catch(11),B.cj&&(0,b.r)("onCameraFrame",o),r.t0;case 21:if(i){r.next=23;break}throw new Error("listener has been stopped");case 23:if(Ie.Z){r.next=25;break}throw new Error("onCameraFrame is not supported on your device");case 25:if(!(l=Ie.Z.get(c.bufferId))){r.next=30;break}l.__proto__=ArrayBuffer.prototype,r.next=31;break;case 30:throw new Error("onCameraFrame fails to allocate ArrayBuffer");case 31:d={width:c.width,height:c.height,data:l},B.cj?a={width:c.width,height:c.height,data:l}:(o=function(){i&&e(d)},(0,b.n)("onCameraFrame",o)),s=function(){u()},Me.once("cameraRemoved",s);case 35:case"end":return r.stop()}}),r,null,[[11,17]])})))),u=(0,M.mh)("stop",ye()(we().mark((function e(){return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return i=!1,s&&(Me.off("cameraRemoved",s),s=null),o&&((0,b.r)("onCameraFrame",o),o=null),e.next=7,r({});case 7:case"end":return e.stop()}}),e)}))));return{start:c,stop:u}}},{key:"_invoke",value:function(e,t){t.type=e,B.gm||B.qB||B.Ae?(Be(t,(function(n){var r=n.imageData,i=n.videoData;function o(t,n){(0,d.IN)("base64ToTempFilePath",Object.assign({fileType:"jpg",base64Data:r},t),{beforeAll:function(r){"takePhoto"===t.type?r.tempImagePath=r.tempFilePath:r.tempFilePath&&(r.tempThumbPath=r.tempFilePath),n&&(r.tempVideoPath=n),r.errMsg=r.errMsg.replace("base64ToTempFilePath",e),delete r.tempFilePath}})}i?(0,d.IN)("base64ToTempFilePath",{fileType:"webm",base64Data:i,complete:function(e){o(t,e.tempFilePath)}}):"startRecord"===e?("function"==typeof t.success&&t.success({errMsg:"startRecord:ok"}),"function"==typeof t.complete&&t.complete({errMsg:"startRecord:ok"})):o(t)})),(0,d.nY)("operateCamera",t,[this.webviewId])):(0,d.IN)("operateCamera",t)}},{key:"_invokeMethod",value:function(e,t){var n=this,r="".concat(this.webviewId,"_").concat(this.pluginId);if("number"==typeof Pe[r]||Pe[r]){var i=De["".concat(this.webviewId,"_").concat(Pe[r])];if(i.isCancelAuth)return"function"==typeof t.fail&&t.fail({errMsg:"user cancel auth"}),void("function"==typeof t.complete&&t.complete({errMsg:"user cancel auth"}));if("scanCode"===i.mode&&("takePhoto"===e||"startRecord"===e))return"function"==typeof t.fail&&t.fail({errMsg:"Not allow to invoke takePhoto in 'scanCode' mode."}),void("function"==typeof t.complete&&t.complete({errMsg:"Not allow to invoke takePhoto in 'scanCode' mode."}));t.cameraId=Pe[r],this._invoke(e,t)}else Me.once("cameraInsert",(function(){n._invokeMethod(e,t)}))}},{key:"takePhoto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="".concat(this.webviewId,"_").concat(this.pluginId),n=Oe["".concat(this.webviewId,"_").concat(Pe[t])];if(n)return"function"==typeof e.fail&&e.fail({errMsg:"Not allow to invoke takePhoto if camera is hidden."}),void("function"==typeof e.complete&&e.complete({errMsg:"Not allow to invoke takePhoto if camera is hidden."}));this._invokeMethod("takePhoto",e)}},{key:"setZoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("CameraContext.setZoom",e,{zoom:1})&&(e.zoom<1&&(e.zoom=1),this._invokeMethod("setZoom",e))}},{key:"startRecord",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xe({scope:"scope.record",success:function(){Le.set(e,!0),e._startRecord(t)},fail:function(){"function"==typeof t.fail&&t.fail({errMsg:"Failed to invoke 'startRecord' on 'CameraContext': not allowed to use microphone."}),"function"==typeof t.complete&&t.complete({errMsg:"Failed to invoke 'startRecord' on 'CameraContext': not allowed to use microphone."})}})}},{key:"_startRecord",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Le.get(this)){var n="".concat(this.webviewId,"_").concat(this.pluginId),r=Oe["".concat(this.webviewId,"_").concat(Pe[n])];if(r)return"function"==typeof t.fail&&t.fail({errMsg:"Not allow to invoke takePhoto if camera is hidden."}),void("function"==typeof t.complete&&t.complete({errMsg:"Not allow to invoke takePhoto if camera is hidden."}));var i=t.timeoutCallback,o=t.fail;if(t.fail=function(t){e._isRecording=!1,clearTimeout(s),"function"==typeof o&&o(t)},this._invokeMethod("startRecord",t),!this._isRecording){this._isRecording=!0;var a="number"==typeof t.timeout?Math.max(0,t.timeout):30,s=this._timer=setTimeout((function(){e._isRecording&&(e.stopRecord({complete:i||function(){}}),e._isRecording=!1)}),1e3*a);0===a?clearTimeout(s):Re[this.webviewId]?Re[this.webviewId].push(s):Re[this.webviewId]=[s];var c=this._videoTaken=function(t,n){var r="".concat(n,"_").concat(e.pluginId);if(t.cameraId===Pe[r]){var o=Ne.indexOf(c);o>-1&&Ne.splice(o,1),e._isRecording&&(delete t.cameraId,"function"==typeof i&&i(t),e._isRecording=!1,clearTimeout(s))}};Ne.push(c)}}}},{key:"stopRecord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ne.indexOf(this._videoTaken);t>-1&&(Ne.splice(t,1),this._videoTaken=null),this._invokeMethod("stopRecord",e),this._isRecording=!1,clearTimeout(this._timer)}}]),e}(),O()(Ee.prototype,"takePhoto",[M.Qu],Object.getOwnPropertyDescriptor(Ee.prototype,"takePhoto"),Ee.prototype),O()(Ee.prototype,"setZoom",[M.Qu],Object.getOwnPropertyDescriptor(Ee.prototype,"setZoom"),Ee.prototype),O()(Ee.prototype,"startRecord",[M.Qu],Object.getOwnPropertyDescriptor(Ee.prototype,"startRecord"),Ee.prototype),O()(Ee.prototype,"stopRecord",[M.Qu],Object.getOwnPropertyDescriptor(Ee.prototype,"stopRecord"),Ee.prototype),Ee);function Ue(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new We(t,r)}(0,b.n)("onCameraNeedAuthCancel",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=De["".concat(t,"_").concat(e.cameraId)];n&&n.binderror&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"error",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{msg:"user cancel auth"}},eventName:n.binderror,webviewId:t,nodeId:n.nodeId}),n&&(n.isCancelAuth=!0)})),(0,b.n)("onCameraStop",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=De["".concat(t,"_").concat(e.cameraId)];n&&n.bindstop&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"stop",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{}},eventName:n.bindstop,webviewId:t,nodeId:n.nodeId})})),(0,b.n)("onCameraInitDone",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=De["".concat(t,"_").concat(e.cameraId)];n&&n.bindinitdone&&"function"==typeof h.Z.webviewEventCallback?h.Z.webviewEventCallback({data:{type:"initdone",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{maxZoom:e.maxZoom}},eventName:n.bindinitdone,webviewId:t,nodeId:n.nodeId}):Me.once("cameraInsert",(function(){var n=De["".concat(t,"_").concat(e.cameraId)];n&&n.bindinitdone&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"initdone",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{maxZoom:e.maxZoom}},eventName:n.bindinitdone,webviewId:t,nodeId:n.nodeId})}))})),(0,b.n)("onCameraScanCode",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=De["".concat(t,"_").concat(e.cameraId)];if(n&&n.bindscancode&&"function"==typeof h.Z.webviewEventCallback){var r={data:{type:"scancode",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{type:e.type,result:e.result,rawData:e.rawData,charSet:e.charSet,scanArea:e.scanArea}},eventName:n.bindscancode,webviewId:t,nodeId:n.nodeId};"barcode"===e.type&&(delete r.data.detail.rawData,delete r.data.detail.charSet),h.Z.webviewEventCallback(r)}}));var Ve,Ge=n(6788),He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("setKeepScreenOn",e,{keepScreenOn:!0})&&(0,d.IN)("setKeepScreenOn",e,{})},Ze=B.gm,qe={},ze={},Ye={},Ke=new y.y,Je={},$e=new WeakMap,Xe={},Qe=["play","stop","mute","pause","resume","requestFullScreen","exitFullScreen","snapshot","requestPictureInPicture","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback"],et=Object.assign,tt={};function nt(e,t){return"".concat(e,"_").concat(t)}function rt(e){Je[e]||(Je[e]=!0,(0,L.dq)(e,(function(e){delete Je[e],Object.keys(qe).forEach((function(t){new RegExp("^"+e).test(t)&&(delete ze["".concat(e,"_").concat(qe[t])],delete qe[t])})),Object.keys(Xe).forEach((function(t){new RegExp("^api_"+e).test(t)?(delete ze["".concat(e,"_").concat(qe[t.substr(4)])],delete Xe[t]):new RegExp("^SQ_"+e).test(t)&&(delete ze[t.substr(3)],delete Xe[t])})),function(e){delete ft[e]}(e),He({keepScreenOn:!1})})))}(0,d.Ld)("xWebLivePlayerSupported",(function(e,t){var n=e.insert2XWebEnabled,r=e.viewId;tt[nt(t,r)]=n,dt(tt)})),(0,d.Ld)("updateLivePlayerPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;Ye.webviewId=t,Ye.playerId=e.playerId})),["xWebLivePlayerInsert","livePlayerInsert"].forEach((function(e){(0,d.Ld)(e,(function(e,t){var n=e.viewId,r=e.domId,i=e.playerId,o=e.pluginId,a=e.data,s=e.nodeId,c=tt[nt(t,n)]?n:i,u="".concat(t,"_").concat(o,"_").concat(r,"_");s&&s!==__virtualDOM__.getRootNodeId(t)&&(u+=s),qe[u]=c,ze["".concat(t,"_").concat(c)]=a||{},Ke.emit("livePlayerInsert"),rt(t),function(e){var t=ft[e];if(ft[e]=[],!t)return;for(var n=0;n<t.length;n++){var r=t[n];gt(r[0],r[1],r[2])}}(t)}))})),["xWebLivePlayerRemoved","livePlayerRemoved"].forEach((function(e){(0,d.Ld)(e,(function(e,t){var n=e.viewId,r=e.domId,i=e.playerId,o=e.pluginId,a=e.nodeId,s=tt[nt(t,n)]?n:i,c="".concat(t,"_").concat(o,"_").concat(r,"_");a&&a!==__virtualDOM__.getRootNodeId(t)&&(c+=a),delete qe[c],delete ze["".concat(t,"_").concat(s)];var u="api_".concat(t,"_").concat(o,"_").concat(r,"_");a&&a!==__virtualDOM__.getRootNodeId(t)&&(u+=a);var l="SQ_".concat(t,"_").concat(s);delete Xe[u],delete Xe[l],He({keepScreenOn:!1})}))}));var it=function e(){R()(this,e)},ot=(Ve=function(){function e(){var t=this;R()(this,e);var n=this.exportContext=new it;Qe.forEach((function(e){return n[e]=t[e].bind(t)}))}return P()(e,[{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getAppStatus();t===Ge.w$.BACK_GROUND||t===Ge.w$.LOCK||(this._invokeMethod("play",[],e),He({keepScreenOn:!0}))}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("stop",[],e),He({keepScreenOn:!1})}},{key:"mute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("mute",[],e)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("pause",[],e),He({keepScreenOn:!1})}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("resume",[],e),He({keepScreenOn:!0})}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getPlayerId(),n=this._getWebviewId(),r=tt[nt(n,t)];if(r)this._invokeWebviewMethod("xWebLivePlayerRequestFullScreen",{direction:e.direction},e);else{var i=e.direction;[0,90,-90].indexOf(i)>-1?this._invokeMethod("requestFullScreen",[i],e):this._invokeMethod("requestFullScreen",[],e),$e.set(this,!0)}}},{key:"exitFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getPlayerId(),n=this._getWebviewId(),r=tt[nt(n,t)];r?this._invokeWebviewMethod("xWebLivePlayerExitFullScreen",[],e):(this._invokeMethod("exitFullScreen",[],e),this.showStatusBar(),$e.set(this,!1))}},{key:"exitPictureInPicture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ye){var t=(0,d.qu)(this.pluginId);B.cj?t("operateLivePlayer",E()(E()({},e),{},{type:"exitPictureInPicture",livePlayerId:Ye.playerId}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateLivePlayer","exitPictureInPicture")}}):B.wZ&&t("operateXWebLivePlayer",E()(E()({},e),{},{type:"exitPictureInPicture",viewId:Ye.playerId}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateXWebLivePlayer","exitPictureInPicture")}})}}},{key:"showStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("showStatusBar",e)}},{key:"hideStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!$e.get(this)){var t="hideStatusBar:fail cannot be invoked but in fullscreen.";return"function"==typeof e.fail&&e.fail({errMsg:t}),void("function"==typeof e.complete&&e.complete({errMsg:t}))}(0,d.IN)("hideStatusBar",e)}},{key:"snapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ze)return console.warn("开发者工具暂不支持 LivePlayerContext.snapshot 接口，请到客户端调试。"),void("function"!=typeof e.fail&&"function"!=typeof e.complete||(e.fail||e.complete)({errMsg:"operateLivePlayer:fail not support in devtools"}));this._invokeMethod("snapshot",[],et({quality:"raw"},e))}},{key:"requestBackgroundPlayback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("requestBackgroundPlayback",[],e)}},{key:"exitBackgroundPlayback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("exitBackgroundPlayback",[],e)}},{key:"requestPictureInPicture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getPlayerId();if("number"==typeof t){var n=(0,d.qu)(this.pluginId);n("requestLivePlayerPictureInPicture",E()(E()({},e),{},{viewId:t,livePlayerId:t,beforeAll:function(e){e.errMsg=e.errMsg.replace("requestLivePlayerPictureInPicture","requestPictureInPicture")}}))}else(0,d.YG)("requestPictureInPicture",e,"playerId not exists")}},{key:"_invokeMethodWithId",value:function(e,t,n,r){var i=this,o=this._getPlayerId(),a=this._getWebviewId(),s=tt[nt(a,o)],c=s?"operateXWebLivePlayer":"operateLivePlayer";"number"==typeof e?(Ze&&(r.type=t,r.playerId=e,(0,d.nY)("operateLivePlayer",r,[this.webviewId])),function(){var i=s?{viewId:e}:{livePlayerId:e},o=(0,d.qu)(this.pluginId);this._getAppStatus()===Ge.w$.BACK_GROUND&&"stop"===t&&(c="".concat(c,"Background")),o(c,et({},r,E()({data:n,type:t},i)))}.apply(this)):Ke.once("livePlayerInsert",(function(){i._invokeMethod(t,n,r)}))}},{key:"_getAppStatus",value:function(){return h.Z.appStatus}},{key:"_getHanged",value:function(){return h.Z.hanged}},{key:"_getPlayerId",value:function(){}},{key:"_getWebviewId",value:function(){}}]),e}(),O()(Ve.prototype,"play",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"play"),Ve.prototype),O()(Ve.prototype,"stop",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"stop"),Ve.prototype),O()(Ve.prototype,"mute",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"mute"),Ve.prototype),O()(Ve.prototype,"pause",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"pause"),Ve.prototype),O()(Ve.prototype,"resume",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"resume"),Ve.prototype),O()(Ve.prototype,"requestFullScreen",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"requestFullScreen"),Ve.prototype),O()(Ve.prototype,"exitFullScreen",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"exitFullScreen"),Ve.prototype),O()(Ve.prototype,"exitPictureInPicture",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"exitPictureInPicture"),Ve.prototype),O()(Ve.prototype,"snapshot",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"snapshot"),Ve.prototype),O()(Ve.prototype,"requestBackgroundPlayback",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"requestBackgroundPlayback"),Ve.prototype),O()(Ve.prototype,"exitBackgroundPlayback",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"exitBackgroundPlayback"),Ve.prototype),O()(Ve.prototype,"requestPictureInPicture",[M.Qu],Object.getOwnPropertyDescriptor(Ve.prototype,"requestPictureInPicture"),Ve.prototype),Ve),at=function(e){I()(n,e);var t=C()(n);function n(e,r,i,o){var a;if(R()(this,n),a=t.call(this),"string"!=typeof e)throw new p.iZ("Parameter 1 should be a string");return a.domId=e,a.webviewId=r,a.nodeId=i,a.pluginId=o,a}return P()(n,[{key:"_invokeMethod",value:function(e,t,n){var r="".concat(this.webviewId,"_").concat(this.pluginId,"_").concat(this.domId,"_").concat(this.nodeId),i=qe[r];this._invokeMethodWithId(i,e,t,n)}},{key:"_getPlayerId",value:function(){var e="".concat(this.webviewId,"_").concat(this.pluginId,"_").concat(this.domId,"_").concat(this.nodeId);return qe[e]}},{key:"_getWebviewId",value:function(){return this.webviewId}},{key:"_invokeWebviewMethod",value:function(e,t,n){var r="".concat(this.webviewId,"_").concat(this.pluginId,"_").concat(this.domId,"_").concat(this.nodeId),i=qe[r];"function"==typeof n.success&&setTimeout((function(){n.success({errMsg:"operateLivePlayer:ok"})}),0),"function"==typeof n.complete&&setTimeout((function(){n.complete({errMsg:"operateLivePlayer:ok"})}),0),(0,d.nY)(e,E()({viewId:i},t),[this.webviewId])}}]),n}(ot),st=function(e){I()(n,e);var t=C()(n);function n(e,r,i){var o;return R()(this,n),(o=t.call(this)).playerId=e,o.webviewId=r,o.pluginId=i,o}return P()(n,[{key:"_invokeMethod",value:function(e,t,n){var r=this.playerId;this._invokeMethodWithId(r,e,t,n)}},{key:"_getPlayerId",value:function(){return this.playerId}},{key:"_getWebviewId",value:function(){return this.webviewId}},{key:"_invokeWebviewMethod",value:function(e,t,n){"function"==typeof n.success&&setTimeout((function(){n.success({errMsg:"operateLivePlayer:ok"})}),0),"function"==typeof n.complete&&setTimeout((function(){n.complete({errMsg:"operateLivePlayer:ok"})}),0),(0,d.nY)(e,E()({viewId:this.playerId},t),[this.webviewId])}}]),n}(ot);function ct(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i="api_".concat(t,"_").concat(r,"_").concat(e,"_");if(n&&n!==__virtualDOM__.getRootNodeId(t)&&(i+=n),Xe[i])return Xe[i].exportContext;var o=new at(e,t,n,r);return Xe[i]=o,o.exportContext}function ut(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="SQ_".concat(t,"_").concat(e);if(Xe[r])return Xe[r].exportContext;var i=new st(e,t,n);return Xe[r]=i,i.exportContext}var lt={},dt=function(e){lt=e},ft={},pt={onLivePlayerEvent:"bindstatechange",onLivePlayerNetStatus:"bindnetstatus",onLivePlayerAudioVolume:"bindaudiovolumenotify",onLivePlayerBackgroundPlaybackChange:"bindbackgroundplaybackchange"},ht={onXWebLivePlayerEvent:"bindstatechange",onXWebLivePlayerNetStatus:"bindnetstatus",onXWebLivePlayerAudioVolume:"bindaudiovolumenotify",onXWebLivePlayerBackgroundPlaybackChange:"bindbackgroundplaybackchange"};function gt(e,t,n){if(t){2004===t.errCode&&He({keepScreenOn:!0});var r=lt[nt(n,t.viewId)],i=r?t.viewId:t.livePlayerId,o=ze["".concat(n,"_").concat(i)],a=r?ht[e]:pt[e],s={};switch(e){case"onLivePlayerEvent":case"onXWebLivePlayerEvent":s.code=t.errCode,s.message=t.errMsg,(0,d.nY)("onLivePlayerStateChange"+t.livePlayerId,{code:t.errCode},[n]);break;case"onLivePlayerNetStatus":case"onXWebLivePlayerNetStatus":t.info=t.info||{},s.info={videoBitrate:t.info.VIDEO_BITRATE,audioBitrate:t.info.AUDIO_BITRATE,videoFPS:t.info.VIDEO_FPS,videoGOP:t.info.VIDEO_GOP,netSpeed:t.info.NET_SPEED,netQualityLevel:t.info.NET_QUALITY_LEVEL,netJitter:t.info.NET_JITTER,videoWidth:t.info.VIDEO_WIDTH,videoHeight:t.info.VIDEO_HEIGHT,videoCache:t.info.VIDEO_CACHE,audioCache:t.info.AUDIO_CACHE,vDecCacheSize:t.info.V_DEC_CACHE_SIZE,vSumCacheSize:t.info.V_SUM_CACHE_SIZE,avPlayInterval:t.info.AV_PLAY_INTERVAL,avRecvInterval:t.info.AV_RECV_INTERVAL,audioCacheThreshold:t.info.AUDIO_CACHE_THRESHOLD},(0,d.nY)("onLivePlayerNetStatusChange"+t.livePlayerId,{info:s.info},[n]);break;case"onLivePlayerAudioVolume":case"onXWebLivePlayerAudioVolume":s.volume=t.volume;break;case"onLivePlayerBackgroundPlaybackChange":case"onXWebLivePlayerBackgroundPlaybackChange":s.playInBackground=t.playInBackground}if(!o)return ft[n]=ft[n]||[],void ft[n].push([e,t,n]);if(r&&("onXWebLivePlayerEvent"===e||"onXWebLivePlayerNetStatus"===e)){var c=E()({},t.info);"onXWebLivePlayerEvent"===e&&(c={code:t.errCode,message:t.errMsg}),(0,d.nY)("xWebLivePlayerStateChange",{type:e,detail:{info:c},viewId:t.viewId},[n])}o.handlers[a]&&"function"==typeof h.Z.webviewEventCallback&&(r&&"onXWebLivePlayerEvent"===e&&t&&-9999999===t.errCode||h.Z.webviewEventCallback({data:{type:a.replace("bind",""),target:o.target,currentTarget:o.target,timeStamp:Date.now()-o.createdTimeStamp,touches:[],detail:s},eventName:o.handlers[a],webviewId:n,nodeId:o.nodeId}))}}var vt;["onLivePlayerEvent","onLivePlayerNetStatus","onLivePlayerAudioVolume","onLivePlayerBackgroundPlaybackChange"].concat(["onXWebLivePlayerEvent","onXWebLivePlayerNetStatus","onXWebLivePlayerAudioVolume","onXWebLivePlayerBackgroundPlaybackChange"]).forEach((function(e){(0,b.n)(e,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;gt(e,t,n)}))})),(0,d.Ld)("xWebLivePlayerFullScreenEvent",(function(e,t){var n=e.viewId,r=e.data,i=ze["".concat(t,"_").concat(n)];i&&i.handlers.bindfullscreenchange&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"fullscreenchange",target:i.target,currentTarget:i.target,timeStamp:Date.now()-i.createdTimeStamp,touches:[],detail:{fullScreen:r.fullScreen,direction:0===r.direction||180===r.direction||"vertical"===r.direction?"vertical":"horizontal"}},eventName:i.handlers.bindfullscreenchange,webviewId:t,nodeId:i.nodeId})})),(0,b.n)("onLivePlayerFullScreenChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;(0,d.nY)("videoFullScreenChange",e,[t]),(0,d.nY)("videoFullScreenChange"+e.livePlayerId,{fullScreen:e.fullScreen},[t]);var n=ze["".concat(t,"_").concat(e.livePlayerId)];n&&n.handlers.bindfullscreenchange&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"fullscreenchange",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{fullScreen:e.fullScreen,direction:0===e.direction||180===e.direction||"vertical"===e.direction?"vertical":"horizontal"}},eventName:n.handlers.bindfullscreenchange,webviewId:t,nodeId:n.nodeId})})),(0,b.n)("onEnterLivePlayerPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ye.webviewId,n=ze["".concat(t,"_").concat(e.livePlayerId)];n&&n.handlers.bindenterpictureinpicture&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"enterpictureinpicture",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindenterpictureinpicture,webviewId:t,nodeId:n.nodeId})})),(0,b.n)("onLeaveLivePlayerPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ye.webviewId,n=ze["".concat(t,"_").concat(e.livePlayerId)];n&&n.handlers.bindleavepictureinpicture&&"function"==typeof h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:"leavepictureinpicture",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindleavepictureinpicture,webviewId:t,nodeId:n.nodeId})}));var _t=fe.Z.useXWebLive,mt=B.wZ&&_t;(0,d.Ld)("xWebLivePusherSupported",(function(e){var t=e.enforcedXWebLive,n=e.canInsert2XWeb;mt=t||n,Pt({enforcedXWebLive:t,canInsert2XWeb:n})}));var yt={},bt={},wt=new y.y,It={},St=Object.assign;function Ct(e){It[e]||(It[e]=!0,(0,L.dq)(e,(function(e){delete It[e],Object.keys(yt).forEach((function(t){new RegExp("^"+e).test(t)&&(delete bt["".concat(e,"_").concat(yt[t])],delete yt[t])})),function(e){delete Nt[e]}(e)})))}function Tt(e,t){var n=this,r="".concat(this.webviewId,"_").concat(this.pluginId);"number"==typeof yt[r]?(mt?t.viewId=yt[r]:t.livePusherId=yt[r],t.type=e,function(e,t,n){if(B.gm)console.warn("开发者工具暂不支持调用 LivePusherContext.".concat(e," 方法"));else{(0,d.qu)(n)(mt?"operateXWebLivePusher":"operateLivePusher",t)}}(e,t,this.pluginId)):wt.once("livePusherInserted",(function(){Tt.call(n,e,t)}))}["xWebLivePusherInserted","livePusherInserted"].forEach((function(e){(0,d.Ld)(e,(function(e,t){var n=e.viewId,r=e.pusherId,i=e.pluginId,o=e.data,a=mt?n:r,s="".concat(t,"_").concat(i);yt[s]=a,bt["".concat(t,"_").concat(a)]=o,wt.emit("livePusherInserted"),Ct(t),function(e){var t=Nt[e];if(Nt[e]=[],!t)return;for(var n=0;n<t.length;n++){var r=t[n];Rt(r[0],r[1],r[2])}}(t)}))})),["xWebLivePusherRemoved","livePusherRemoved"].forEach((function(e){(0,d.Ld)(e,(function(e,t){var n=e.viewId,r=e.pusherId,i=e.pluginId,o=mt?n:r,a="".concat(t,"_").concat(i);delete yt[a],delete bt["".concat(t,"_").concat(o)]}))}));var Et=(vt=function(){function e(t,n){R()(this,e),this.webviewId=t,this.pluginId=n}return P()(e,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"start",e)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"stop",e)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"pause",e)}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"resume",e)}},{key:"switchCamera",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"switchCamera",e)}},{key:"snapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"snapshot",St({quality:"raw"},e))}},{key:"toggleTorch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"toggleTorch",e)}},{key:"playBGM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("LivePusherContext.playBGM",e,{url:""})&&Tt.call(this,"playBGM",e)}},{key:"stopBGM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"stopBGM",e)}},{key:"pauseBGM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"pauseBGM",e)}},{key:"resumeBGM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"resumeBGM",e)}},{key:"setBGMVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("LivePusherContext.setBGMVolume",e,{volume:0})&&Tt.call(this,"setBGMVolume",e)}},{key:"setMICVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("LivePusherContext.setMICVolume",e,{volume:0})&&Tt.call(this,"setMICVolume",e)}},{key:"startPreview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"startPreview",e)}},{key:"stopPreview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"stopPreview",e)}},{key:"sendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt.call(this,"sendMessage",e)}}]),e}(),O()(vt.prototype,"start",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"start"),vt.prototype),O()(vt.prototype,"stop",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"stop"),vt.prototype),O()(vt.prototype,"pause",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"pause"),vt.prototype),O()(vt.prototype,"resume",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"resume"),vt.prototype),O()(vt.prototype,"switchCamera",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"switchCamera"),vt.prototype),O()(vt.prototype,"snapshot",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"snapshot"),vt.prototype),O()(vt.prototype,"toggleTorch",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"toggleTorch"),vt.prototype),O()(vt.prototype,"playBGM",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"playBGM"),vt.prototype),O()(vt.prototype,"stopBGM",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"stopBGM"),vt.prototype),O()(vt.prototype,"pauseBGM",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"pauseBGM"),vt.prototype),O()(vt.prototype,"resumeBGM",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"resumeBGM"),vt.prototype),O()(vt.prototype,"setBGMVolume",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"setBGMVolume"),vt.prototype),O()(vt.prototype,"setMICVolume",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"setMICVolume"),vt.prototype),O()(vt.prototype,"startPreview",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"startPreview"),vt.prototype),O()(vt.prototype,"stopPreview",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"stopPreview"),vt.prototype),O()(vt.prototype,"sendMessage",[M.Qu],Object.getOwnPropertyDescriptor(vt.prototype,"sendMessage"),vt.prototype),vt);function kt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new Et(t,r)}var xt=fe.Z.useXWebLive,At=B.wZ&&xt,Pt=function(e){var t=e.enforcedXWebLive,n=e.canInsert2XWeb;At=t||n},Dt={onLivePusherEvent:"bindstatechange",onLivePusherNetStatus:"bindnetstatus",onLivePusherBGMStart:"bindbgmstart",onLivePusherBGMProgress:"bindbgmprogress",onLivePusherBGMComplete:"bindbgmcomplete",onLivePusherError:"binderror",onLivePusherAudioVolume:"bindaudiovolumenotify"},Ot={onXWebLivePusherEvent:"bindstatechange",onXWebLivePusherNetStatus:"bindnetstatus",onXWebLivePusherBGMStart:"bindbgmstart",onXWebLivePusherBGMProgress:"bindbgmprogress",onXWebLivePusherBGMComplete:"bindbgmcomplete",onXWebLivePusherError:"binderror",onXWebLivePusherAudioVolume:"bindaudiovolumenotify"},Nt={};function Rt(e,t,n){var r=At?t.viewId:t.livePusherId,i=bt["".concat(n,"_").concat(r)],o=At?Ot[e]:Dt[e],a={};switch(e){case"onLivePusherEvent":case"onXWebLivePusherEvent":a.code=t.errCode,a.message=t.errMsg,(0,d.nY)("onLivePusherStateChange"+t.livePusherId,{code:t.errCode},[n]);break;case"onLivePusherNetStatus":case"onXWebLivePusherNetStatus":t.info=t.info||{},a.info={videoBitrate:t.info.VIDEO_BITRATE,audioBitrate:t.info.AUDIO_BITRATE,videoFPS:t.info.VIDEO_FPS,videoGOP:t.info.VIDEO_GOP,netSpeed:t.info.NET_SPEED,netQualityLevel:t.info.NET_QUALITY_LEVEL,netJitter:t.info.NET_JITTER,videoWidth:t.info.VIDEO_WIDTH,videoHeight:t.info.VIDEO_HEIGHT,videoCache:t.info.VIDEO_CACHE,audioCache:t.info.AUDIO_CACHE},(0,d.nY)("onLivePusherNetStatusChagne"+t.livePusherId,{info:a.info},[n]);break;case"onLivePusherBGMProgress":case"onXWebLivePusherBGMProgress":a.progress=t.progress,a.duration=t.duration;break;case"onLivePusherBGMComplete":case"onXWebLivePusherBGMComplete":a.errCode=t.errCode;break;case"onLivePusherError":case"onXWebLivePusherError":a.errCode=t.errCode,a.errMsg=t.errMsg,a.data=t.data,(0,d.nY)("onLivePusherError"+t.livePusherId,{errcode:t.errcode},[n]);break;case"onLivePusherAudioVolume":case"onXWebLivePusherAudioVolume":a.volume=t.volume}if(!i)return Nt[n]=Nt[n]||[],void Nt[n].push([e,t,n]);if(At&&("onXWebLivePusherEvent"===e||"onXWebLivePusherNetStatus"===e)){var s=E()({},t.info);"onXWebLivePusherEvent"===e&&(s={code:t.errCode,message:t.errMsg}),(0,d.nY)("xWebLivePusherStateChange",{type:e,detail:{info:s},viewId:t.viewId},[n])}i.handlers[o]&&"function"==typeof h.Z.webviewEventCallback&&(At&&"onXWebLivePusherEvent"===e&&t&&-9999999===t.errCode||h.Z.webviewEventCallback({data:{type:o.replace("bind",""),target:i.target,currentTarget:i.target,timeStamp:Date.now()-i.createdTimeStamp,touches:[],detail:a},eventName:i.handlers[o],webviewId:n,nodeId:i.nodeId}))}["onLivePusherEvent","onLivePusherNetStatus","onLivePusherBGMStart","onLivePusherBGMProgress","onLivePusherBGMComplete","onLivePusherError","onLivePusherAudioVolume"].concat(["onXWebLivePusherEvent","onXWebLivePusherNetStatus","onXWebLivePusherBGMStart","onXWebLivePusherBGMProgress","onXWebLivePusherBGMComplete","onXWebLivePusherError","onXWebLivePusherAudioVolume"]).forEach((function(e){(0,b.n)(e,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Rt(e,t,n)}))}));var Mt=n(278),Lt={},Bt=new y.y,Ft={};(0,d.Ld)("audioInsert",(function(e,t){var n=e.audioId,r=e.pluginId,i=e.nodeId,o="".concat(t,"_").concat(r,"_").concat(n,"_");i&&i!==__virtualDOM__.getRootNodeId(t)&&(o+=i),Lt[o]=!0,Bt.emit("audioInsert_".concat(o)),function(e){Ft[e]||(Ft[e]=!0,(0,L.dq)(e,(function(e){delete Ft[e],Object.keys(Lt).forEach((function(t){new RegExp("^"+e).test(t)&&delete Lt[t]}))})))}(t)})),(0,d.Ld)("audioRemove",(function(e,t){var n=e.audioId,r=e.pluginId,i=e.nodeId,o="".concat(t,"_").concat(r,"_").concat(n,"_");i&&i!==__virtualDOM__.getRootNodeId(t)&&(o+=i),delete Lt[o]}));var jt=function(){function e(t,n,r,i){if(R()(this,e),"string"!=typeof t)throw new p.iZ("Parameter 1 should be a string");this.audioId=t,this.webviewId=n,this.pluginId=i,this.nodeId=r}return P()(e,[{key:"setSrc",value:function(e){this._sendAction({method:"setSrc",data:e})}},{key:"play",value:function(){this._getAppStatus()===Ge.w$.BACK_GROUND||this._sendAction({method:"play"})}},{key:"pause",value:function(){this._sendAction({method:"pause"})}},{key:"seek",value:function(e){this._sendAction({method:"setCurrentTime",data:e})}},{key:"_ready",value:function(e){var t="".concat(this.webviewId,"_").concat(this.pluginId,"_").concat(this.audioId,"_").concat(this.nodeId);Lt[t]?e():Bt.on("audioInsert_".concat(t),(function(){e()}))}},{key:"_sendAction",value:function(e){var t=this;this._ready((function(){(0,d.nY)("audio_".concat(t.pluginId,"_").concat(t.audioId,"_").concat(t.nodeId,"_actionChanged"),e,[t.webviewId])}))}}]),e}();function Wt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=new jt(e,t,n,r);return i._getAppStatus=function(){return h.Z.appStatus},i._getHanged=function(){return h.Z.hanged},Mt.J.call(this,(function(){i.pause()})),i}var Ut=n(6965),Vt=n(4785),Gt=wxNativeConsole.createLogger("InnerAudioContext"),Ht=function(e){var t,n=(t="object"===c()(e)&&e?e:{async:e}).useWebAudioImplement;return(B.DD||B.Ae)&&Ut.Z.Audio?(Gt.info("using NativeAudio"),new Vt.yN):n&&(0,Vt.f6)()?(Gt.info("using WebAudio"),new Vt.uB):(Gt.info("using AudioJsApi"),new Vt.LU(t))},Zt={},qt={},zt={},Yt={},Kt=1;(0,d.Ld)("editorInsert",(function(e,t){var n=e.domId,r=e.editorId,i=e.pluginId,o=e.nodeId,a="".concat(t,"_").concat(i,"_").concat(n,"_");o&&o!==__virtualDOM__.getRootNodeId(t)&&(a+=o),Zt[a]=r,function(e){zt[e]||(zt[e]=!0,(0,L.dq)(e,(function(e){delete zt[e],Object.keys(Zt).forEach((function(t){new RegExp("^"+e).test(t)&&delete Zt[t]})),Object.keys(qt).forEach((function(t){new RegExp("^api_"+e).test(t)&&delete qt[t]})),Object.keys(qt).forEach((function(t){new RegExp("^SQ_"+e).test(t)&&delete qt[t]}))})))}(t)})),(0,d.Ld)("editorRemoved",(function(e,t){var n=e.domId,r=e.editorId,i=e.pluginId,o=e.nodeId,a="".concat(t,"_").concat(i,"_").concat(n,"_");o&&o!==__virtualDOM__.getRootNodeId(t)&&(a+=o),delete Zt[a];var s="api_".concat(t,"_").concat(i,"_").concat(n,"_").concat(o),c="SQ_".concat(t,"_").concat(r);delete qt[s],delete qt[c]})),(0,d.Ld)("doEditorActionCallback",(function(e){var t=e.callbackId;if(t&&void 0!==Yt[t]){delete e.callbackId;var n=Yt[t];e.errMsg&&(e.errMsg.indexOf("ok")>-1?"function"==typeof n.success&&n.success(e):e.errMsg.indexOf("fail")>-1&&"function"==typeof n.fail&&n.fail(e)),"function"==typeof n.complete&&n.complete(e),delete Yt[t]}}));var Jt=function(){function e(){R()(this,e)}return P()(e,[{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._execCommand("format",{name:e,value:t,needCallBack:!1})}},{key:"scrollIntoView",value:function(){this._execCommand("scrollIntoView",{needCallBack:!1})}},{key:"_execCommandWithId",value:function(e,t,n){if(n.needCallBack){var r={};Object.keys(n).forEach((function(e){"function"==typeof n[e]&&(r[e]=n[e],delete n[e])}));var i="callback".concat(this.webviewId,"_").concat(e,"_").concat(Kt++);Yt[i]=r,n.callbackId=i}delete n.needCallBack,this.action={method:t,args:n},(0,d.nY)("editor_".concat(this.webviewId,"_").concat(e,"_actionChanged"),this.action,[this.webviewId])}}]),e}();["insertDivider","insertImage","insertText","setContents","getContents","clear","removeFormat","undo","redo","blur","getSelectionText"].forEach((function(e){Jt.prototype[e]=(0,M.gA)((function(t){this._execCommand(e,E()(E()({},t),{},{needCallBack:!0}))}))}));var $t=function(e){I()(n,e);var t=C()(n);function n(e,r){var i;return R()(this,n),(i=t.call(this)).editorId=e,i.webviewId=r,i}return P()(n,[{key:"_execCommand",value:function(e,t){this._execCommandWithId(this.editorId,e,t)}}]),n}(Jt);function Xt(e,t){var n="SQ_".concat(t,"_").concat(e);if(qt[n])return qt[n];var r=new $t(e,t);return qt[n]=r,r}var Qt=n(2805),en=function(e){if(""!==h.Z.currentClipBoardData){var t;void 0!==__appServiceEngine__&&(t=__appServiceEngine__.getCurrentPagesByDomain("").find((function(e){return e.__wxWebviewId__===h.Z.currentWebviewId}))||{});var n=[h.Z.currentClipBoardData,t?t.route:"",e?1:0,t?Object.keys(t.options||{}).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t.options[e]))})).join("&"):"",Reporter.getAppType()].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Clipboard",value:n})}},tn=__safeway__.apiSign.makeApiSign;function nn(){var e=tn("getClipboardData",{success:function(e){h.Z.currentClipBoardData=e.data}});rn()&&(0,d.be)("getClipboardData",e)}function rn(){var e=fe.Z.system;return!fe.Z.useClipboardWithPermissionNotify&&(!/^iOS /i.test(e)||parseInt(e.split(" ")[1],10)<14)}fe.Z.onReady(nn),(0,Qt.T)(nn),(0,Mt.J)((function(){var e=tn("getClipboardData",{success:function(e){e.data!==h.Z.currentClipBoardData&&(h.Z.currentClipBoardData=e.data,en(!1))}});rn()&&(0,d.be)("getClipboardData",e)}));var on=n(9307),an=n(5322),sn=n(3704),cn={},un=function(){function e(){R()(this,e),this.listener={},this.emitCache={}}return P()(e,[{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(!this.listener[e])return this.emitCache[e]||(this.emitCache[e]=[]),void this.emitCache[e].push(r);var o=function(){var n,i=l()(t.listener[e]);try{for(i.s();!(n=i.n()).done;){var o,a=n.value;(o=a.fn).call.apply(o,[a.fn].concat(r))}}catch(e){i.e(e)}finally{i.f()}t.listener[e]=t.listener[e].filter((function(e){return"once"!==e.type}))};o.call(this)}},{key:"_clearCache",value:function(e){if(this.emitCache[e])for(;this.emitCache[e].length>0;)this.emit.apply(this,[e].concat(x()(this.emitCache[e].shift())))}},{key:"on",value:function(e,t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at on ".concat(e," callback function"));this._addListener(e,"on",n),this._clearCache(e)}},{key:"once",value:function(e,t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at once ".concat(e," callback function"));this._addListener(e,"once",n),this._clearCache(e)}},{key:"off",value:function(e,t){if(this.listener[e])if(t){var n=t.toString();for(var r in this.listener[e])for(var i=0;!(i>=this.listener[e].length);)n===this.listener[e][i].fn.toString()&&(this.listener[e].splice(i,1),i--),i++}else this.listener[e]=[],delete this.listener[e]}},{key:"_addListener",value:function(e,t,n){this.listener[e]||(this.listener[e]=[]),this.listener[e].push({fn:n,type:t})}}]),e}();var ln=(0,on.s)("AppPerfRouteNavigation");function dn(e,t,n){var r=void 0===n._relativePath?h.Z.lastRoute:n._relativePath;return!(0,p.Bf)(r,t)||/^__wx__\//.test(t)||(0,f.eW)(e,t,n)}function fn(e,t,n){var r=void 0===t._relativePath?h.Z.lastRoute:t._relativePath;try{return(0,p.s$)(r,t.url,!n)}catch(i){if(!(i instanceof p.l0))throw i;if(!n){if(!(0,p.Bf)(r,t.url))return t.url;(0,d.YG)(e,t,i.message)}}return""}function pn(e,t){var n=fn(e,t,!0);if(!n)return!0;var r=(0,sn.ZA)(n),i=sn.n6[(0,Ce.a2)(e).toUpperCase()],o=!0,a="",s=sn.UU.OK;if(r>-1){var c=sn.Jx[r];(a=c.redirect_url)&&1===c.is_valid?((0,d.YG)(e,t,"url has been banned"),(0,an.L)("openUrl",{url:a}),s=sn.UU.BLOCK,o=!1):a&&1!==c.is_valid&&(s=sn.UU.NO_BLOCK)}return"[checkNavigateToUrl] APIName=".concat(e,", blockStatus=").concat(s,", blockScene=").concat(i,", redirectUrl=").concat(a),(0,sn.ye)(e,s,i,a,n),o}var hn,gn,vn,_n=function(e){if((0,d.r3)("redirectTo",e,{url:""})&&pn("redirectTo",e)){var t=fn("redirectTo",e,!1);t&&(e.url=t,e.url=(0,p.yP)(e.url),dn("redirectTo",e.url,e)&&(h.Z.navigatorLock=!0,(0,d.IN)("redirectTo",e,{afterFail:function(){h.Z.navigatorLock=!1}}),ln.emit({type:"redirectTo",start:Date.now()})))}},mn=function(e){if("active"===h.Z.runningStatus||"ios"!==B.iw){if((0,d.r3)("reLaunch",e,{url:""})&&pn("reLaunch",e)){var t=fn("reLaunch",e,!1);t&&(e.url=t,e.url=(0,p.yP)(e.url),dn("reLaunch",e.url,e)&&(h.Z.navigatorLock=!0,(0,d.IN)("reLaunch",e,{afterFail:function(){h.Z.navigatorLock=!1}}),ln.emit({type:"reLaunch",start:Date.now()})))}}else(0,d.YG)("reLaunch",e,"can not invoke reLaunch in background")},yn=function(e){if((0,d.r3)("navigateTo",e,{url:""})&&pn("navigateTo",e)){var t=fn("navigateTo",e,!1);if(t&&(e.url=t,e.url=(0,p.yP)(e.url),dn("navigateTo",e.url,e))){var n=function(){for(var e=new un,t=new un,n={},r=["listener","emit","on","once","off","_addListener"],i=0,o=r;i<o.length;i++){var a=o[i];"emit"===a?n[a]=t[a].bind(t):"function"==typeof e[a]?n[a]=e[a].bind(e):n[a]=e[a]}for(var s=0,c=r;s<c.length;s++){var u=c[s];"emit"===u?cn[u]=e[u].bind(e):"function"==typeof t[u]?cn[u]=t[u].bind(t):cn[u]=t[u]}return n}();if(e.events)for(var r in e.events)n.on(r,e.events[r]);h.Z.navigatorLock=!0,(0,d.IN)("navigateTo",e,{afterFail:function(){h.Z.navigatorLock=!1},beforeSuccess:function(e){e.eventChannel=n}}),ln.emit({type:"navigateTo",start:Date.now()})}}},bn=function(e){__appServiceEngine__.DisplayReporter.setEventRelatedInfo(e._relatedInfo),yn(e)},wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("switchTab",e,{url:""})&&(/\?.*$/.test(e.url)&&(console.warn("wx.switchTab: url 不支持 queryString"),e.url=e.url.replace(/\?.*$/,"")),pn("switchTab",e))){var t=fn("switchTab",e,!1);t&&(e.url=t,e.url=(0,p.yP)(e.url),dn("switchTab",e.url,e)&&(h.Z.navigatorLock=!0,(0,d.IN)("switchTab",e,{afterFail:function(){h.Z.navigatorLock=!1}}),ln.emit({type:"switchTab",start:Date.now()})))}},In=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e=Object.assign({},e))._webviewId;if(void 0!==t){e.delta=void 0;var n=__appServiceEngine__.getPageMetaByWebviewId(t);if(n){var r=n.framesetViewId;e.viewId=r}}if("number"!=typeof e.delta?e.delta=1:(e.delta=parseInt(e.delta,10),e.delta<1&&(e.delta=1)),"function"==typeof __appServiceEngine__.getCurrentPagesByDomain){var i=__appServiceEngine__.getCurrentPagesByDomain("");if(i.length<=1)return void(0,d.YG)("navigateBack",e,"cannot navigate back at first page.")}(0,d.IN)("navigateBack",e),ln.emit({type:"navigateBack",start:Date.now()})},Sn=function(e,t){var n={_relativePath:e,_webviewId:t};return{navigateTo:function(e){yn(Object.assign({},e,n))},redirectTo:function(e){_n(Object.assign({},e,n))},switchTab:function(e){wn(Object.assign({},e,n))},navigateBack:function(e){In(Object.assign({},e,n))},reLaunch:function(e){mn(Object.assign({},e,n))}}},Cn=n(4744),Tn=n(5401),En=n(4675),kn=n(1484),xn=n(3224),An=n(9601),Pn=n(2745),Dn=Pn.Z.pluginInfos,On=[],Nn=(gn=!1,fe.Z.clientVersion>=369431584&&fe.Z.clientVersion<=369432575&&(gn=!0),fe.Z.clientVersion>=637867008&&fe.Z.clientVersion<=637868031&&(gn=!0),function(){return gn}),Rn=function(e){var t=String(e).split(".",3);return t.length<3?-1:Number(1e3*t[0]*1e3+1e3*t[1]+1*t[2])};var Mn=function(e){"android"===fe.Z.platform&&fe.Z.clientVersion<=654315519&&(vn=function(){for(var t=function(t){var n=e[t],r=n.plugin_id,i=Dn[r];if(!i)return{v:void 0};var o=function(e,t){var r=new Set(i.domains[e]);n[t].forEach((function(e){r.add(e)})),i.domains[e]=Array.from(r)};o("request","request_domain"),o("uploadFile","upload_domain"),o("downloadFile","download_domain"),o("connectSocket","wsrequest_domain")},n=0;n<e.length;n++){var r=t(n);if("object"===c()(r))return r.v}Object.keys(Dn).map((function(e){return[e,Dn[e].domains]}))})},Ln=function(e){var t=e.version;return{customVersion:e.customVersion,version:t,domains:{},hostSign:{}}},Bn=n(1029),Fn=!1;fe.Z.onReady((function(){Fn=Fn||1037===(fe.Z.appLaunchInfo||{}).scene})),(0,Qt.T)((function(e){Fn=Fn||1037===e.scene}));var jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";if((0,d.r3)("navigateToDevMiniProgram",e,{appId:""}))if(["undefined","string"].includes(c()(e.relativeURL))){var n=Object.assign({},e);"string"==typeof n.path&&void 0===n.relativeURL&&(n.relativeURL=(0,p.Pp)(n.path)),(0,d.qu)(t)("navigateToDevMiniProgram",n,{})}else(0,d.YG)("navigateToDevMiniProgram",e,"relativeURL should be string or undefined")},Wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("exitMiniProgram",e,{})},Un=n(947),Vn=(0,on.s)("AppHide"),Gn=Vn.onMethod,Hn=Vn.offMethod,Zn=Vn.internalOnMethod;(0,Mt.J)((function(e){Vn.emitInternal(e)}));var qn=(0,on.s)("AppUnhang"),zn=qn.internalOnMethod,Yn=qn.onMethod;(0,d.jQ)("onAppUnhang",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qn.emit(e)})),h.Z.appStatus=Ge.w$.FORE_GROUND,h.Z.hanged=!1,(0,Un.Xb)((function(e){Date.now()})),Zn((function(e){Date.now()})),(0,Qt.T)((function(){h.Z.appStatus=Ge.w$.FORE_GROUND})),(0,Mt.J)((function(e){"hide"===e.mode?h.Z.appStatus=Ge.w$.LOCK:h.Z.appStatus=Ge.w$.BACK_GROUND,"close"===e.mode?h.Z.hanged=!1:"hang"===e.mode&&(h.Z.hanged=!0)})),Yn((function(){h.Z.hanged=!1}));var Kn=n(2984),Jn=n(733),$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.keyPath="WxaAppVersionInfo.AppVersion",(0,d.IN)("getAppContact",e,{beforeSuccess:function(e){e.data=JSON.parse(e.data)}})},Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.keyPath="WxaAppVersionInfo.VersionState",(0,d.IN)("getAppContact",e,{beforeSuccess:function(e){e.data=JSON.parse(e.data),1===e.data&&(e.data=0)}})},Qn=null,er=(0,Ce.Fr)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["release","develop","trial"],n=(0,Kn.Z)("CreateWxaShortLink","webapi_createwxashortlink",{},{},(function(e){return{wxa_appid:e.appid,wxa_path:e.path,page_title:e.title,version:e.version,version_type:t.indexOf(e.envVersion)}}),(function(e){delete e.rawData,e.shortLink=e.short_link,delete e.short_link}));n(e)})),tr=(0,Ce.Fr)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$n({success:function(t){(0,d.FE)({name:"getAppContact",args:e,res:t})},fail:function(t){Xn({success:function(t){(0,d.FE)({name:"getAppContact",args:e,res:t})},fail:function(t){(0,d.FE)({name:"getAppContact",args:e,res:t,success:!1})}})}})})),nr=function(e){return(0,Jn.showToast)({icon:"none",title:e})},rr=new Map,ir="请检查网络后重试",or=0;(0,d.jQ)("onCopyUrl",(function(e){if(!(0,Ce.aI)()&&e.webviewId!==h.Z.currentWebviewId)return console.warn("[onCopyUrl] error: webviewId loss"),void nr("请检查网络后重试");var t=e.shortLinkEnable||!1,n=h.Z.lastRoute,r=h.Z.lastOpenType,i=JSON.parse(JSON.stringify(h.Z.lastRawQuery||{}));if("appLaunch"!==r&&"autoReLaunch"!==r)try{Object.keys(i).forEach((function(e){i[e]=decodeURIComponent(i[e])}))}catch(e){return void nr(ir)}var o=(0,Ce.aI)()?t?"":"index.html":"".concat(n,".html"),a=Object.entries(i).map((function(e){return e.join("=")})).join("&");if(t&&"function"==typeof Qn)try{a=(Qn()||{}).query||""}catch(e){console.warn("[onCopyUrl] error",e)}var s=a?"".concat(o,"?").concat(a):o;if(t){rr.has(or)&&rr.set(or,!1);var c=++or,u=!1;rr.set(c,!0);var l=function(e){!!rr.get(c)&&(nr(e),e===ir&&(0,d.IN)("returnCopyUrl",{url:"",shortLinkEnable:t}),rr.set(c,!1))};setTimeout((function(){u=!0,l(ir)}),1500);var f=fe.Z.page["".concat(n,".html")],p=f&&f.window||{},g=fe.Z.global&&fe.Z.global.window||{},v=p.navigationBarTitleText||g.navigationBarTitleText||"";tr().then((function(e){var n=e.data;return er({appid:fe.Z.accountInfo.appId,envVersion:fe.Z.envVersion,path:s,title:(0,Ce.aI)()?"":v,version:n}).then((function(e){return console.log("createWxaShortLinkAsync, ",e),!!rr.get(c)&&!u&&((0,d.IN)("returnCopyUrl",{url:e.shortLink,shortLinkEnable:t,success:function(){nr("已复制")},fail:function(){nr(ir)}}),rr.set(c,!1)),null})).catch((function(e){l(ir),console.log("[onCopyUrl]:",e)})),null})).catch((function(e){l(ir),console.log("[onCopyUrl]: ",e)}))}else(0,d.IN)("returnCopyUrl",{url:s,shortLinkEnable:t,success:function(){nr("已复制")},fail:function(){nr(ir)}})}));var ar=function(){return{miniProgram:{appId:fe.Z.accountInfo&&fe.Z.accountInfo.appId||"",envVersion:fe.Z.envVersion||"release",version:fe.Z.appContactInfo&&fe.Z.appContactInfo.user_version||""}}},sr=n(4930),cr=(0,on.s)("AppRunningStatusChange");cr.internalOnMethod;(0,d.jQ)("onAppRunningStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.Z.runningStatus=e.status,cr.emit(e)}));var ur=(0,on.s)("AppService-Error"),lr=(0,on.s)("AppService-UnhandledRejection"),dr=ur.onMethod,fr=ur.offMethod,pr=lr.onMethod,hr=lr.offMethod;Reporter.registerThirdErrorListener((function(e){ur.emit(e)})),Reporter.registerThirdUnhandledRejectionListener((function(e,t){lr.emit({reason:e,promise:t})}));var gr=n(1957),vr=n(422),_r=(0,on.s)("AppRouteResized"),mr=_r.internalOnMethod;_r.internalOffMethod;(0,d.jQ)("onAppRouteResized",(function(e){"object"===c()(e)&&null!==e&&(0,vr.Hl)(e),_r.emit({})}));var yr=n(4198),br=n(7587),wr=(0,on.s)("PageNotFound"),Ir=wr.onMethod,Sr=wr.offMethod;function Cr(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i.length>1)try{t[i[0]]=decodeURIComponent(i[1])}catch(e){}}return t}var Tr={page:void 0,time:Date.now(),count:0};(0,d.jQ)("onPageNotFound",(function(){br.s.info("Ignored onPageNotFound.")})),(0,yr.eB)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;br.s.info("Page not found, webviewId=".concat(t)),h.Z.lastRoute="",e&&"string"==typeof e.path&&e.path.endsWith(".html")&&(e.path=(0,p.Z8)(e.path)),e&&"string"==typeof e.query&&(e.query=Cr(e.query)),Tr.page&&Tr.page===e.path?Tr.count++:Tr={page:e.path,time:Date.now(),count:1};var n=!0;Date.now()-Tr.time<=3e3&&Tr.count>3?(n=!1,console.error('onPageNotFound error: page "'.concat(e.path,'" is not found.'))):wr.emit(e);var r=wr.getGlobalListeners().length>0&&n;r||Reporter.thirdErrorReport({error:new Error('onPageNotFound error: page "'.concat(e.path,'" is not found.')),extend:" at onPageNotFound"}),(0,d.IN)("pageNotFoundCallback",{hasHandler:r,webviewId:t})}));var Er=(0,on.s)("ThemeChange"),kr=Er.onMethod,xr=Er.internalOnMethod,Ar=Er.offMethod;(0,d.jQ)("onThemeChange",(function(e){void 0!==fe.Z.theme&&(fe.Z.theme=e.theme,Er.emit({theme:e.theme}))}));var Pr=n(9714),Dr=n(6301),Or=n(999),Nr=n(5770),Rr=n(9624),Mr=0,Lr={};(0,gr.H)((function(e){Lr=e,Mr=e.webviewId}));var Br=Date.now(),Fr=Date.now(),jr=Date.now(),Wr=0;(0,Qt.T)((function(){(Br=Date.now())>Fr&&(Wr+=Br-Fr)})),(0,Mt.J)((function(){Fr=Date.now()})),(0,Se.q)((function(){jr=Date.now()}));var Ur=null,Vr=[];(0,d.Ld)("videoAdPreloadInfoGet",(function(e){Ur=e,Vr.forEach((function(e){e&&e(Ur)})),Vr=[]}));var Gr=null,Hr=new Date,Zr="";fe.Z.onReady((function(){Hr=new Date;var e=(0,Dr.Oo)();Zr=e.model}));var qr={},zr=function(e,t){qr[e]=t},Yr=(0,Nr.Ce)(!1,"operateWXData"),Kr=function(e){var t;t=function(t){var n={};(0,Ce.er)()&&(n.in_3rd_app=1);var r={ad_unit_id:e,pos_id:"7090665964306299",scene_type:t.scene_type,weapp_path:Lr.path,user_agent:t.ua,weapp_extra_data:JSON.stringify({start_ts:Hr.valueOf(),enter_ts:Br,user_duration:Date.now()-jr-Wr,machine_type:Zr,env:fe.Z.host&&fe.Z.host.env,app_appid:fe.Z.host&&fe.Z.host.appId}),ext_slot_custom_comm:JSON.stringify(n)};Yr({apiName:"webapi_getadvert",reqData:r,success:function(t){try{if((t=JSON.parse(t.rawData)).advertisement_num>=1&&t.advertisement_info.length){var n=t.advertisement_info[0];n._preloadTime=+new Date,1515===n.crt_size?function(e,t){try{var n=Date.now();(0,Rr.o)({url:t.video_info.videoUrl,success:function(r){t.video_info.preloadUrl=r.tempFilePath,zr(e,t),(0,Or.r)(80,{costTime:Date.now()-n},{ad_pos_type:6,aid:t.aid,traceid:t.traceid,ad_unit_id:e})},fail:function(r){zr(e,t),(0,Or.r)(81,{costTime:Date.now()-n,e:r},{ad_pos_type:6,aid:t.aid,traceid:t.traceid,ad_unit_id:e})}})}catch(e){}}(e,n):zr(e,n);var r=function(e){var t={};try{e=JSON.parse(e);var n,r=l()(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.hasOwnProperty("exp_para")&&i.exp_para.forEach((function(e){t[e.name]=Number(e.value)}))}}catch(e){r.e(e)}finally{r.f()}return t}catch(e){return{}}}(n.flow_exp_info);void 0!==r.widget_gray_preload_max&&($r=r.widget_gray_preload_max),(0,Or.r)(74,{errMsg:"advertisement success",errCode:t.ret},{ad_pos_type:6,aid:n.aid,traceid:n.traceid,ad_unit_id:e})}else(0,Or.r)(75,{errMsg:"no advertisement",errCode:t.ret},{ad_pos_type:6,ad_unit_id:e})}catch(t){(0,Or.r)(75,{errMsg:"advertisement error"},{ad_pos_type:6,ad_unit_id:e})}},fail:function(){(0,Or.r)(76,{errMsg:"advertisement fail"},{ad_pos_type:6,ad_unit_id:e})}})},Ur?t&&t(Ur):(Gr&&clearTimeout(Gr),Gr=setTimeout((function(){(0,d.nY)("videoAdPreloadInfo",null,[Mr])}),0),Vr.push(t))},Jr=[],$r=5,Xr=function(){return Jr},Qr=n(5223),ei=n(1033),ti=n(1232),ni=(0,Nr.Ce)(!1,"operateWXData"),ri=[],ii={},oi=null,ai=[];(0,d.Ld)("videoAdPreloadInfoGet",(function(e){oi=e,ai.forEach((function(e){null==e||e(oi)})),ai=[]}));var si,ci=null,ui={},li=function(e,t){return new Promise((function(n){var r=Date.now();(0,Rr.o)({url:t.video_info.videoUrl,success:function(i){n(i.tempFilePath),(0,Or.r)(ti.IN.PRELOAD_DOWNLOAD_SUCCESS,{type:e.type,url:t.video_info.videoUrl,costtime:Date.now()-r},{aid:t.aid,traceid:t.traceid,ad_unit_id:e.unitId})},fail:function(){n(""),(0,Or.r)(ti.IN.PRELOAD_DOWNLOAD_ERROR,{type:e.type,url:t.video_info.videoUrl},{aid:t.aid,traceid:t.traceid,ad_unit_id:e.unitId})}})}))},di=(si=ye()(we().mark((function e(t,n){var r,i,o,a,s,c;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!((o=JSON.parse(n.rawData)).advertisement_num>=1&&o.advertisement_info.length)){e.next=14;break}if(s=o.advertisement_info[0],r=s.aid,i=s.traceid,null===(a=s.video_info)||void 0===a||!a.videoUrl){e.next=11;break}return e.next=9,li(t,s);case 9:(c=e.sent)&&(s.video_info.preloadUrl=c);case 11:(0,Or.r)(ti.IN.PRELOAD_LOAD_SUCCESS,{type:t.type},{ad_unit_id:t.unitId,aid:s.aid,traceid:s.traceid}),e.next=16;break;case 14:return(0,Or.r)(ti.IN.PRELOAD_LOAD_ERROR,{errCode:o.ret,errMsg:"no advertisement",type:t.type},{ad_unit_id:t.unitId}),e.abrupt("return");case 16:ui[t.unitId]={data:JSON.stringify(o),_preloadTime:+new Date,_aid:r,_traceid:i},e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),(0,Or.r)(ti.IN.PRELOAD_LOAD_ERROR,{errMsg:"advertisement error",error:null===e.t0||void 0===e.t0?void 0:e.t0.stack,type:t.type},{ad_unit_id:t.unitId});case 22:case"end":return e.stop()}}),e,null,[[0,19]])}))),function(e,t){return si.apply(this,arguments)}),fi=new Set,pi=function(e){var t;fi.has(e.unitId)||(fi.add(e.unitId),t=function(t){var n={pos_id:"",ad_unit_id:e.unitId,scene_type:t.scene_type,weapp_path:Qr.S0.weappPath,user_agent:t.ua,sdk_version:Qr.S3.SDKVersion,appid:Qr.S3.gameAppId,orig_weapp_id:"",weapp_extra_data:JSON.stringify({wxa_start_ts:Qr.S3.startTime.valueOf(),wxa_enter_ts:Qr.S0.enterForegroundTime.valueOf(),start_ts:Qr.S3.startTime.valueOf(),enter_ts:Qr.S0.enterForegroundTime.valueOf(),user_duration:Qr.S0.gameDuration+(Date.now()-Qr.S0.enterForegroundTime.getTime()),machine_type:Qr.S3.model,is_ad_interval:!1,wxa_ext:""}),ext_slot_custom_comm:""},r={is_ad_preload:1};"custom"===e.type?(n.pos_id=ei.DX.customAd,r.is_adunit_tmpl=!0):"banner"===e.type?(n.pos_id=ei.DX.banner,Number(e.adIntervals)>0&&(r.refresh_time=String(e.adIntervals))):"videoPatch"===e.type?n.pos_id=ei.DX.wxAppPreVideoAd:"video"===e.type&&(n.pos_id=ei.DX.wxAppVideo),(0,Ce.er)()&&(r.in_3rd_app=1),n.ext_slot_custom_comm=JSON.stringify(r),ni({apiName:"webapi_getadvert",reqData:n,success:function(t){di(e,t)},fail:function(t){(0,Or.r)(ti.IN.PRELOAD_CALL_ERROR,{error:t,type:e.type},{ad_unit_id:e.unitId})},complete:function(){fi.delete(e.unitId)}})},oi?null==t||t(oi):(ci&&clearTimeout(ci),ci=setTimeout((function(){(0,d.nY)("videoAdPreloadInfo",null,[Qr.S0.currentWebviewId])}),0),ai.push(t)))},hi=function(){return ri},gi=n(7766),vi=n(3451),_i=n.n(vi);function mi(e){var t=fe.Z.accountInfo&&fe.Z.accountInfo.appId||"noAppId";(0,an.L)("getRequestPaymentFromGlobalStorage",{appId:t},void 0,e)}function yi(e,t){var n=fe.Z.accountInfo&&fe.Z.accountInfo.appId||"noAppId";e&&(0,an.L)("setRequestPaymentToGlobalStorage",{requestPayment:e,appId:n},void 0,t)}var bi=n(6315),wi=!1,Ii=500,Si=!1,Ci=function(){return{shouldCheck:wi,timeout:Ii,deprecated:Si}},Ti=function(){var e=ye()(we().mark((function e(t){var n,r,i,o,a;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zi({apiName:"webapi_openproduct_bizaccount",reqData:{path:t.path,query:JSON.stringify(t.query||{})}});case 3:n=e.sent,r=n.respData,void 0!==(i=JSON.parse(r.data)).openproduct_checkticket&&(wi=!!i.openproduct_checkticket),void 0!==i.openproduct_checktickettimeout&&(Ii=parseInt(i.openproduct_checktickettimeout,10)),void 0!==i.openproduct_checkticket_deprecated&&(Si=!!i.openproduct_checkticket_deprecated),void 0!==i.openleague_cookie&&(o=[],(0,xn.jl)(i.openleague_cookie||"",!1,o),(a=(0,xn.zv)({cookies:o}))&&wxNativeConsole.error("[set openleague_cookie]",a)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();fe.Z.onReady((function(){setTimeout((function(){return Ti(fe.Z.appLaunchInfo||{})}),1e3)})),(0,Qt.T)((function(e){(e.reLaunch||e.isLaunch)&&Ti(e)}));var Ei,ki,xi,Ai,Pi,Di,Oi,Ni,Ri,Mi,Li=0,Bi=1,Fi=2,ji=3,Wi=4,Ui=((0,Qt.T)((function(e){Ei=+e.scene||0,ki=e.scene_note||e.sceneNote||"",xi=+e.prescene||0,Ai=e.prescene_note||e.presceneNote||""})),fe.Z.onReady((function(){!function(){var e=fe.Z.appLaunchInfo||{};Ei=e.scene||0,ki=e.scene_note||e.sceneNote||"",xi=e.prescene||0,Ai=e.prescene_note||e.presceneNote||""}()})),function(){return{scene:Ei,scene_note:ki,prescene:xi,prescene_note:Ai}}),Vi=(0,M.NX)("requestPayment",(Pi=ye()(we().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=(0,W.x7)(t,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""}))){e.next=3;break}throw new Error("parameter error: ".concat(n));case 3:if(t=Object.assign({},t),r=Ci(),i=r.deprecated,o=!1,!(o="develop"===fe.Z.envVersion||"trial"===fe.Z.envVersion?fe.Z.usingShopPlugin||!1:Ci().shouldCheck||!1)){e.next=35;break}if(console.log("wx.requestPayment is deprecated for shop plugin. Please use wx.requestOrderPayment."),!i){e.next=11;break}throw new Error("deprecated for shop plugin");case 11:return a=Li,s=t.ticket||"",e.prev=13,c=Ci().timeout||500,e.prev=15,e.next=18,Promise.race([qi(E()({ticket:s,prepay_id:t.package.replace("prepay_id=","")},Ui())),zi("timeout",c)]);case 18:u=e.sent,l=u.is_authorized,"[paymentCheckTicket] isAuthorized=".concat(l),a=l?ji:Wi,e.next=29;break;case 24:e.prev=24,e.t0=e.catch(15),e.t0,wxNativeConsole.error("[paymentCheckTicket] fail",e.t0),a=e.t0&&"timeout"===e.t0.message?Fi:Bi;case 29:if(a!==Wi){e.next=31;break}throw new Error("check ticket rejected");case 31:return e.prev=31,"[paymentCheckTicket] checkTicketStatus=".concat(a),Yi({ticket:s,checkTicketStatus:a}),e.finish(31);case 35:return d=ro.NONE,e.prev=36,e.next=39,Ki(t);case 39:return p=e.sent,d=ro.SUCCESS,e.abrupt("return",p);case 44:throw e.prev=44,e.t1=e.catch(36),d=ro.FAILED,f=e.t1.message,e.t1;case 49:return e.prev=49,o&&oo({prepayId:(t.package||"").replace("prepay_id=",""),requestPaymentStatus:d,requestPaymentErrmsg:f}),e.finish(49);case 52:case"end":return e.stop()}}),e,null,[[13,,31,35],[15,24],[36,44,49,52]])}))),function(e){return Pi.apply(this,arguments)})),Gi=(Di=ye()(we().mark((function e(){var t,n,r,i,o;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){mi((function(t){var n=!1,r="",i=fe.Z&&fe.Z.appContactInfo&&fe.Z.appContactInfo.operationInfo&&fe.Z.appContactInfo.operationInfo.jsonInfo&&fe.Z.appContactInfo.operationInfo.jsonInfo.warning_info&&fe.Z.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];i&&i.forEach((function(e){"requestPayment"===e.jsapi_name&&e.wording&&(n=!0,r=e.wording)})),e({time:t,isRistWarning:n,wording:r})}))}));case 2:if(t=e.sent,n=t.time,r=t.isRistWarning,i=t.wording,o=(+new Date-(n||0))/1e3/60,!(r&&o>30)){e.next=10;break}return e.next=10,new Promise((function(e,t){(0,Jn._showModal)({content:i,confirmText:"继续支付",cancelText:"取消",success:function(n){n.confirm?(yi(+new Date),e()):t(new Error("cancel"))}})}));case 10:case"end":return e.stop()}}),e)}))),function(){return Di.apply(this,arguments)}),Hi=(0,M.Vl)(d.IN.bind(null,"requestPayment")),Zi=(0,M.Vl)(Nr.JM),qi=(Oi=ye()(we().mark((function e(){var t,n,r,i=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,Zi({apiName:"webapi_openproductcheckticket",reqData:E()({},t)});case 3:return n=e.sent,r=n.respData,e.abrupt("return",JSON.parse(r.data));case 6:case"end":return e.stop()}}),e)}))),function(){return Oi.apply(this,arguments)}),zi=function(e,t){return new Promise((function(n,r){return setTimeout((function(){return r(new Error(e))}),t)}))},Yi=function(e){var t=e.ticket,n=e.checkTicketStatus,r=fe.Z.appLaunchInfo||{},i=Ui(),o=[r.sessionid||r.sessionId||"",i.scene,i.scene_note,i.prescene,i.prescene_note,n||0,t||""].join(",");Reporter.reportKeyValue({key:"RequestPaymentCheckTicket",value:o})},Ki=(Ni=ye()(we().mark((function e(t){var n,r,i;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gi();case 2:return n=(0,xn.Zv)(),t.passCookies&&"string"==typeof t.passCookies?t.cookie=n?t.passCookies+";; "+n:t.passCookies:n?t.cookie=n:delete t.cookie,delete t.passCookies,t.cookie,r=(0,bi.I)(),e.next=9,Hi(E()(E()({adUxInfo:r},t),{},{grantMessageQuota:!0}));case 9:return i=e.sent,(0,Nr.JM)({apiName:"webapi_reportpayrecord",reqData:{prepay_id:t.package.replace("prepay_id=","")}}),(0,an.L)("reportPaymentFormId",{packageStr:t.package}),(0,ne.Hk)(),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)}))),function(e){return Ni.apply(this,arguments)}),Ji=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("requestFacetoFacePayment",e)},$i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("requestPersonalPay",e)},Xi=0,Qi=1,eo=2,to=3,no=4,ro={NONE:0,SUCCESS:1,FAILED:2},io=(Ri=ye()(we().mark((function e(){var t,n,r,i,o,a,s,c=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.extUserUin,r=t.prepayId,i=t.orderInfo,o=fe.Z.appLaunchInfo||{},e.next=4,Zi({apiName:"webapi_openproductaddorder",reqData:{ext_info:E()({ext_useruin:n,ext_appid:fe.Z.host&&fe.Z.host.appId,session_id:o.sessionid||o.sessionId||""},Ui()),prepay_id:r,order_info:i}});case 4:return a=e.sent,s=a.respData,e.abrupt("return",JSON.parse(s.data));case 8:case"end":return e.stop()}}),e)}))),function(){return Ri.apply(this,arguments)}),oo=(Mi=ye()(we().mark((function e(t){var n,r,i,o,a,s,c,u,l,d;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.extUserUin,r=t.addOrderStatus,i=t.requestPaymentStatus,o=t.requestPaymentErrmsg,a=t.prepayId,s=t.outOrderId,c=(0,Dr.mw)(),u=fe.Z.appLaunchInfo||{},e.next=5,Zi({apiName:"webapi_openproductreportorder",reqData:{ext_info:E()(E()({ext_useruin:n,ext_appid:fe.Z.host&&fe.Z.host.appId,session_id:u.sessionid||u.sessionId||""},Ui()),{},{add_order_status:r,request_payment_status:i,request_payment_errmsg:o,model:c.model,brand:c.brand,version:c.version,system:c.system,platform:c.platform,sdk_version:c.SDKVersion}),prepay_id:a,order_info:{out_order_id:s}}});case 5:return l=e.sent,d=l.respData,e.abrupt("return",JSON.parse(d.data));case 9:case"end":return e.stop()}}),e)}))),function(e){return Mi.apply(this,arguments)}),ao=(0,M.NX)("requestOrderPayment",ye()(we().mark((function e(){var t,n,r,i,o,a,s,c,u,l,d,f,p,h,g,v,_,m,y,b,w,I=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=I.length>0&&void 0!==I[0]?I[0]:{},!(n=(0,W.x7)(t,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""}))){e.next=4;break}throw new Error("parameter error: ".concat(n));case 4:return r=t.orderInfo,i=void 0===r?{}:r,o=t.extUserUin,a=_i()(t,["orderInfo","extUserUin"]),s=(t.package||"").replace("prepay_id=",""),c=Ci().timeout||500,u=(t.orderInfo||{}).out_order_id,l=Xi,p=ro.NONE,e.prev=10,e.prev=11,e.next=14,Promise.race([io({extUserUin:o,prepayId:s,orderInfo:i}),zi("timeout",c)]);case 14:g=e.sent,v=g.errcode,_=g.errmsg,m=g.cookie,"[addOrder] errcode=".concat(v," errmsg=").concat(_),l=0===v?Qi:no,f=_,d=v,0===v&&void 0!==m&&(y=[],(0,xn.jl)(m||"",!1,y),(b=(0,xn.zv)({cookies:y}))&&wxNativeConsole.error("[set openleague_cookie]",b)),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(11),e.t0,l=e.t0&&"timeout"===e.t0.message?to:eo;case 29:if(l!==no){e.next=31;break}throw new M.SW(f||"addOrder failed",{addOrderErrCode:d});case 31:return e.prev=31,w=(0,xn.tc)({key:"prepay_id",value:s,busid:"mmbiz_wxa_related_order"}),a.passCookies&&"string"==typeof a.passCookies?a.passCookies=w+";;"+a.passCookies:a.passCookies=w,e.next=36,Ki(a);case 36:p=ro.SUCCESS,e.next=44;break;case 39:throw e.prev=39,e.t1=e.catch(31),h=e.t1.message||"unknown",p=ro.FAILED,e.t1;case 44:return e.prev=44,oo({extUserUin:o,addOrderStatus:l,requestPaymentStatus:p,requestPaymentErrmsg:h,prepayId:s,outOrderId:u}),e.finish(44);case 47:case"end":return e.stop()}}),e,null,[[10,,44,47],[11,25],[31,39]])})))),so=n(3618),co=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=so.Z.get(e.shareTicket);t?(0,d.gM)((0,p.f0)({data:{api_name:"webapi_getshareinfo",data:{share_key:t.shareKey,share_name:t.shareName}}},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getShareInfo")},beforeSuccess:function(e){B.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{var t=JSON.parse(e.data.data);t.roomTopic&&(e.roomTopic=t.roomTopic)}catch(e){}e.iv=e.data.iv,e.encryptedData=e.data.encryptedData,e.data.cloud_id&&(e.cloudID=e.data.cloud_id),delete e.data}}):(0,d.YG)("getShareInfo",e,"invalid shareTicket")},uo={showShareAppMessageMenu:!1,showShareTimelineMenu:!1,withShareTicket:!1,isPrivateMessage:!1},lo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Array.isArray(e.menus)?e.menus:["shareAppMessage"],n=[];if(t.includes("shareAppMessage")){uo.showShareAppMessageMenu=!0;var r=new Promise((function(t,n){!0===e.withShareTicket?(uo.withShareTicket=!0,(0,d.IN)("showShareMenuWithShareTicket",{withShareTicket:!0,success:t,fail:n,beforeAll:function(e){e.errMsg=e.errMsg.replace("showShareMenuWithShareTicket","showShareMenu")},beforeFail:function(e){e.errMsg+=", with arg withShareTicket: true"}})):(uo.withShareTicket=!1,(0,d.IN)("showShareMenu",{success:t,fail:n}))}));n.push(r)}if(t.includes("shareAppMessage")&&t.includes("shareTimeline")){uo.showShareTimelineMenu=!0;var i=new Promise((function(e,t){(0,d.IN)("showShareTimelineMenu",{success:e,fail:t})}));n.push(i)}Promise.all(n).then((function(){(0,d.FE)({name:"showShareMenu",args:e})})).catch((function(t){var n=t.errMsg.replace("showShareMenu:fail","").replace("showShareTimelineMenu:fail","");(0,d.YG)("showShareMenu",e,n,t.errCode)}))},fo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Array.isArray(e.menus)?e.menus:["shareAppMessage","shareTimeline"],n=[];function r(){return new Promise((function(e,t){(0,d.IN)("hideShareTimelineMenu",{success:e,fail:t})}))}if(t.includes("shareTimeline")&&(uo.showShareTimelineMenu=!1,n.push(r())),t.includes("shareAppMessage")){uo.showShareAppMessageMenu=!1,0===n.length&&n.push(r());var i=new Promise((function(e,t){(0,d.IN)("hideShareMenu",{success:e,fail:t})}));n.push(i)}Promise.all(n).then((function(){(0,d.FE)({name:"hideShareMenu",args:e})})).catch((function(t){var n=t.errMsg.replace("hideShareMenu:fail","").replace("hideShareTimelineMenu:fail","");(0,d.YG)("hideShareMenu",e,n,t.errCode)}))};function po(e){return new Promise((function(t,n){"boolean"==typeof e.withShareTicket?(0,d.IN)("updateShareMenuShareTicket",{withShareTicket:e.withShareTicket,success:t,fail:n},{beforeAll:function(e){e.errMsg=e.errMsg.replace("updateShareMenuShareTicket","updateShareMenu")},beforeFail:function(e){e.errMsg+=', with arg "withShareTicket": true'}}):t({errMsg:"updateShareMenu:ok"})}))}function ho(e){return new Promise((function(t,n){if("boolean"==typeof e.isUpdatableMessage||"boolean"==typeof e.isPrivateMessage){var r=JSON.stringify({activity_id:e.activityId,template_id:e.templateInfo&&e.templateInfo.templateId,parameter_list:e.templateInfo&&e.templateInfo.parameterList});(0,d.IN)("updateShareMenuUpdatable",{isPrivateMessage:e.isPrivateMessage,updatable:e.isUpdatableMessage,templateId:r,success:t,fail:n}),!0===e.isPrivateMessage?uo.isPrivateMessage=!0:!1===e.isPrivateMessage&&(uo.isPrivateMessage=!1)}else t({errMsg:"updateShareMenu:ok"})}))}function go(e){return new Promise((function(t,n){"string"==typeof e.toDoActivityId?((0,d.IN)("updateShareMenuUpdatable",{updatable:!0,success:function(e){},fail:function(e){wxNativeConsole.error("updateShareMenuToDo updateShareMenuUpdatable fail",e)}}),(0,d.IN)("updateShareMenuShareTicket",{withShareTicket:!0,success:function(e){},fail:function(e){wxNativeConsole.error("updateShareMenuToDo updateShareMenuShareTicket fail",e)}}),(0,d.IN)("updateShareMenuToDo",{toDoActivityId:e.toDoActivityId,isToDoMessage:"boolean"!=typeof e.isToDoMessage||e.isToDoMessage,success:function(e){wxNativeConsole.info("updateShareMenuToDo success",e),t(e)},fail:function(e){wxNativeConsole.error("updateShareMenuToDo fail",e),n(e)}})):t({errMsg:"updateShareMenu:ok"})}))}var vo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wxNativeConsole.info("wx.updateShareMenu",e),Promise.all([po(e),ho(e),go(e)]).then((function(t){"function"==typeof e.success&&__errorTracer__.surroundThirdByTryCatch(e.success,"at api updateShareMenu success callback function")(t[0]),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t[0])})).catch((function(t){void 0===t.errMsg&&(t.errMsg="updateShareMenu:fail "+t.message),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api updateShareMenu fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t)}))},_o=function(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?"".concat(t,"?").concat(n):t},mo=function(e){if(e&&"string"==typeof e)if(/^\w+:\/\//.test(e)){if(!/^wxfile:\/\//.test(e)&&!/^http:\/\/tmp\//.test(e))throw new Error("invalid path")}else if(e)return F(e,!1);return e},yo=(0,M.NX)("shareFileMessage",ye()(we().mark((function e(){var t,n,r=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},(0,d.zy)(t,{filePath:""}),n=mo(t.filePath),e.prev=3,e.next=6,(0,d.bb)("shareFileMessage",E()(E()({},t),{},{filePath:n}));case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),"cancel"===e.t0.message){e.next=12;break}throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[3,8]])})))),bo=(0,M.NX)("shareVideoMessage",ye()(we().mark((function e(){var t,n,r,i=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},(0,d.zy)(t,{videoPath:""}),n=mo(t.videoPath),r=mo(t.thumbPath),"videoPath=".concat(n),"thumbPath=".concat(r),e.prev=6,e.next=9,(0,d.bb)("shareVideoMessage",E()(E()({},t),{},{videoPath:n,thumbPath:r}));case 9:e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(6),"cancel"===e.t0.message){e.next=15;break}throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[6,11]])})))),wo=n(8976),Io="authPrivateMessage",So=(0,Nr.Ce)(!1,Io);var Co=n(8850),To=(0,M.Vl)(Co.FI),Eo=1,ko=3,xo=4,Ao=5,Po=6,Do=7,Oo=function(e){var t=e.action,n=fe.Z.appLaunchInfo||{},r=[fe.Z.appType+1e3,t,n.sessionid||n.sessionId||""].join(",");Reporter.reportKeyValue({key:"ShareImageMenu",value:r})},No=function(){var e=ye()(we().mark((function e(t){var n,r,i,o,a;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return __sclEngine__.initScl((function(t){return e(t.mainRoot)}))}));case 2:return n=e.sent,r=n.append("share-image",{imgPath:t.imgPath,height:t.height,width:t.width,actions:JSON.stringify([{action:"shareToFriend",text:"发送给朋友",imageSrc:"https://res.wx.qq.com/op_res/2uoxkoDR1eSqqVos0C1sjp6O1Y0jhQYHSJZFkNBXZMrA5HaEVtR1iBAEXOejBJxWV-ULARe-VXRVYozusJicDA",imageDarkSrc:"https://res.wx.qq.com/op_res/2uoxkoDR1eSqqVos0C1sjp6O1Y0jhQYHSJZFkNBXZMrA5HaEVtR1iBAEXOejBJxWV-ULARe-VXRVYozusJicDA"},{action:"addToFavorites",text:"收藏",imageSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng",imageDarkSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng"},{action:"saveToAlbum",text:"保存到相册",imageSrc:"https://res.wx.qq.com/op_res/BgIIq_VgA_b30mPKYKb4CmnQemMBJMujsqfe6REw4MSf3i_ql8KU-FywDJLSRGRnxQOWW5VphGdXW0Yr2-Z-0g",imageDarkSrc:"https://res.wx.qq.com/op_res/G0_niEOxSlL24rHxfWQRrYEhHlR548A2lETw0Se_jFtJt3ZpHTIaPZPeINUGM3--cFoO5adG9q8jjhNfUzKUxA"}])}),i=(0,gi.vJ)((function(e){[gi.ML.BottomBackButton,gi.ML.NavigationBackInterceptionType,gi.ML.NavigateBackCall].includes(e.type)&&r.handleClose()})),e.next=7,new Promise((function(e){["shareToFriend","addToFavorites","saveToAlbum","cancel"].forEach((function(t){r.addListener(t,(function(){return e({action:t})}))}))}));case 7:return o=e.sent,a=o.action,(0,gi.J_)(i),e.abrupt("return",{action:a});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ro=(0,M.NX)("showShareImageMenu",ye()(we().mark((function e(){var t,n,r,i,o,a,s,c=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},(0,wo.J)("showShareImageMenu")){e.next=3;break}throw new Error("no permission");case 3:if((0,f.zy)(t,{path:""}),n=t.path,!/^\w+:\/\//.test(n)){e.next=10;break}if(/^wxfile:\/\//.test(n)||/^http:\/\/tmp\//.test(n)){e.next=8;break}throw new Error("invalid path");case 8:e.next=11;break;case 10:n="/"+F(n,!1);case 11:return e.next=13,To({src:n});case 13:return r=e.sent,i=r.height,o=r.width,e.next=18,No({imgPath:n,height:i,width:o});case 18:a=e.sent,s=a.action,Oo({action:Eo}),e.t0=s,e.next="shareToFriend"===e.t0?24:"addToFavorites"===e.t0?37:"saveToAlbum"===e.t0?41:(e.t0,46);break;case 24:return e.prev=24,e.next=27,(0,f.bb)("shareImageMessage",{imagePath:n});case 27:Oo({action:ko}),e.next=36;break;case 30:if(e.prev=30,e.t1=e.catch(24),"cancel"!==e.t1.message){e.next=35;break}return Oo({action:xo}),e.abrupt("return");case 35:throw e.t1;case 36:return e.abrupt("return");case 37:return Oo({action:Ao}),e.next=40,(0,f.bb)("addImageToFavorites",{url:n});case 40:return e.abrupt("return");case 41:return Oo({action:Po}),e.next=44,(0,f.bb)("saveImageToPhotosAlbum",{filePath:n});case 44:return B.cj&&(0,Jn.showToast)({icon:"success",title:"已保存"}),e.abrupt("return");case 46:throw Oo({action:Do}),new Error("cancel");case 48:case"end":return e.stop()}}),e,null,[[24,30]])})))),Mo=!1,Lo=null,Bo=null;(0,gr.H)((function(){Mo=!0})),(0,Se.q)((function(){Mo=!1,Lo&&(jo(Lo),Lo=null),Bo&&(Wo(Bo),Bo=null)}));var Fo,jo=function(e){(0,d.r3)("addCard",e,{cardList:[]})&&(Mo?Lo=e:(0,d.IN)("addCard",e))},Wo=function(e){(0,d.r3)("openCard",e,{cardList:[]})&&(Mo?Bo=e:(0,d.IN)("openCard",e))},Uo="https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket",Vo=function(e){return JSON.stringify({name:e.name,id_card_number:e.idCardNumber,mobile:e.mobile,outer_verify_id:e.outerVerifyId,user_id_key:e.userIdKey})},Go=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i.apiName="webapi_getuserinfo",(0,d.r3)("operateWXData",i,{apiName:""})){var o=wx&&wx.version&&wx.version.version||"",a={api_name:i.apiName,from_component:!0,data:i.reqData||{},operate_directly:e};a.data.version=o,n&&(a.plugin_appid=i.pluginId);var s={data:a,isImportant:!0===r,requestInQueue:!i.hasOwnProperty("requestInQueue")||Boolean(i.requestInQueue)};new Date,new Date,(0,d.gM)(Object.assign({},s,i),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess:function(e){new Date,new Date,B.wZ&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})}}}(!1,void 0,!0),Ho=function(e){(0,d.IN)("openAddress",e,{beforeSuccess:function(e){(0,p.dK)(e,"addressPostalCode","postalCode"),(0,p.dK)(e,"proviceFirstStageName","provinceName"),(0,p.dK)(e,"addressCitySecondStageName","cityName"),(0,p.dK)(e,"addressCountiesThirdStageName","countyName"),(0,p.dK)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddress"),delete e.err_msg}})},Zo=function(e){(0,d.IN)("openAddress",e,{beforeSuccess:function(e){(0,p.dK)(e,"addressPostalCode","postalCode"),(0,p.dK)(e,"proviceFirstStageName","provinceName"),(0,p.dK)(e,"addressCitySecondStageName","cityName"),(0,p.dK)(e,"addressCountiesThirdStageName","countyName"),(0,p.dK)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddressForPlugin"),delete e.err_msg}})},qo=function(e){mi((function(t){var n=(+new Date-(t||0))/1e3/60,r=!1,i="",o=fe.Z&&fe.Z.appContactInfo&&fe.Z.appContactInfo.operationInfo&&fe.Z.appContactInfo.operationInfo.jsonInfo&&fe.Z.appContactInfo.operationInfo.jsonInfo.warning_info&&fe.Z.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];o&&o.forEach((function(e){"requestPayment"===e.jsapi_name&&e.wording&&(r=!0,i=e.wording)})),r&&n>30?(0,Jn._showModal)({content:i,confirmText:"继续支付",cancelText:"取消",success:function(t){t.confirm&&(yi(+new Date),zo(e))}}):zo(e)}))},zo=function(e){if((0,d.r3)("requestPayment",e,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""})){e=Object.assign({},e);var t=(0,xn.Zv)();e.passCookies&&"string"==typeof e.passCookies?e.cookie=t?e.passCookies+";; "+t:e.passCookies:t?e.cookie=t:delete e.cookie,delete e.passCookies,e.cookie,(0,d.IN)("requestPayment",Object.assign({},e,{grantMessageQuota:!0}),{beforeSuccess:function(){(0,an.L)("reportPaymentFormId",{packageStr:e.package}),(0,ne.Hk)()}})}},Yo={SYS_MSG_TYPE_INTERACTIVE:1,SYS_MSG_TYPE_RANK:2},Ko=function(e){var t={};for(var n in e)t[e[n]]=n;return t}(Yo);var Jo=wxNativeConsole.createLogger("getSetting");function $o(e){if(Jo.info("webapi_getuserallappauth res",e),e.auth_item?e.authSetting=e.auth_item.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{}):e.authSetting={},void 0!==e.sub_msg_switch){var t={mainSwitch:1===e.sub_msg_switch};if(e.sub_msg_list){Jo.info("sub_msg_list",e.sub_msg_list);var n=e.sub_msg_list.reduce((function(e,t){var n,r=t.template_id;return t.sys_msg_type>0&&(n=t.sys_msg_type,r=Ko[n]),t.ban_flag?e[r]="ban":(e[r]=t.setting_status?"accept":"reject",t.is_accept_with_audio&&(e[r]="acceptWithAudio")),e}),{});Jo.info("itemSettings",n),t.itemSettings=n,Object.assign(t,n)}e.subscriptionsSetting=t}return delete e.rawData,delete e.signature,delete e.auth_item,delete e.sub_msg_list,delete e.sub_msg_switch,e}var Xo=(0,Kn.Z)("getSetting","webapi_getuserallappauth",{},{},(function(e){var t=wx&&wx.version&&wx.version.version||"",n=Object.assign({with_sub_msg:"boolean"==typeof e.withSubscriptions&&e.withSubscriptions,version:t},e);return delete n.withSubscriptions,n}),$o),Qo=n(6318),ea=function(e){return{2116:"SYS_MSG_TYPE_INTERACTIVE",4668:"SYS_MSG_TYPE_RANK"}[e]},ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openSetting",e,{beforeSuccess:function(e){var t=e.authSetting||[];if(e.authSetting=t.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{}),e.subscriptionsSetting){var n={};if(n.mainSwitch=e.subscriptionsSetting.mainSwitch,e.subscriptionsSetting.templatesInfo){var r=e.subscriptionsSetting.templatesInfo;n.itemSettings=r.reduce((function(e,t){var n=ea(t.tid),r={"-1":"ban",0:"reject",1:"accept"};return n?e[n]=r[t.status]:(e[t.templateId]=r[t.status],t.acceptAudio&&(e[t.templateId]="acceptWithAudio")),e}),{})}e.subscriptionsSetting=n}}})},na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,Qo.S)())return(0,d.YG)("openSetting",e,"not supported"),void(0,Jn.showToast)({icon:"none",title:"暂不支持当前功能"});ta(e)},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openSetting",e,{beforeSuccess:function(e){var t=e.authSetting||[];e.authSetting=t.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{})}})},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("chooseInvoiceTitle",e,{beforeSuccess:function(e){var t=e.invoiceTitleInfo||e.choose_invoice_title_info;if(t)try{var n=JSON.parse(t);delete e.invoiceTitleInfo,delete e.choose_invoice_title_info,e=Object.assign(e,n)}catch(e){}}})},oa=(0,Kn.Z)("getOpenDeviceId","webapi_getdeviceinfo"),aa=((0,Kn.Z)("getUserGameLabel","webapi_getgameplayerlabel",{},{},(function(){}),(function(e){return delete e.rawData,e})),n(9809),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{sport_type_id:e.typeId,sport_time:e.time||0,sport_distance:e.distance||0,sport_number:e.number||0,sport_calorie:e.calorie||0,sport_url:e.url||""}}))}),sa=(0,Ce.Fr)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Kn.Z)("checkWxaSportRecord","webapi_checkwxasportrecord",{},{},(function(e){return{sport_record_list:aa(e.recordList)}}),(function(e){delete e.rawData}));t(e)})),ca=(0,Ce.Fr)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Kn.Z)("reportWxaSportRecord","webapi_reportwxasportrecord",{},{},(function(e){return{sport_record_list:aa(e.recordList)}}),(function(e){delete e.rawData}));t(e)})),ua=function(e){var t=e.show,n=void 0===t?0:t,r=e.statusCancel,i=void 0===r?0:r,o=e.statusConfirm,a=void 0===o?0:o,s=e.clickMoreCount,c=[n,i,a,void 0===s?0:s];Reporter.reportKeyValue({key:"ShareToWeRun",value:c.join(","),immediately:!0})},la=null;kr((function(e){var t=e.theme;la&&la.setData({theme:t})}));var da=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t.forEach((function(t){e.hasOwnProperty(t)&&(n[t]=e[t])})),n},fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=(0,gi.vJ)((function(e){[gi.ML.BottomBackButton,gi.ML.NavigationBackInterceptionType,gi.ML.NavigateBackCall].includes(e.type)&&la&&(la.handleCancel(),la=null)}));__sclEngine__.initScl((function(r){var i=r.mainRoot.append("werun",{input:e});la=i,i.addListener("confirm",(function(e){var r=e.detail.clickMoreCount;ua({show:1,statusCancel:0,statusConfirm:1,clickMoreCount:r}),(0,gi.J_)(n),ca({recordList:t.recordList}).then((function(){return(0,d.FE)({name:"shareToWeRun",args:t})})).catch((function(e){return(0,d.YG)("shareToWeRun",t,e.errMsg,+e.err_code)}))})),i.addListener("cancel",(function(e){var r=e.detail.clickMoreCount;ua({show:1,statusCancel:1,statusConfirm:0,clickMoreCount:r}),(0,d.YG)("shareToWeRun",t,"cancel"),(0,gi.J_)(n)}))}))},pa=((0,Kn.Z)("checkIsUserAdvisedToRest ","webapi_getplaytimelimit",{},{},(function(e){var t=e.todayPlayedTime;return{today_played_seconds:void 0===t?0:t}}),(function(e){e.result=!e.is_healthy,delete e.is_healthy})),parseInt(Date.now()/1e3,10)),ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("chooseInvoice",Object.assign({},e,{timeStamp:pa,nonceStr:pa+""}),{beforeSuccess:function(){}})},ga=(0,Kn.Z)("getWxSecData","getWxSecData",{},{},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}),(function(e){return e})),va=n(9727),_a=n.n(va),ma=n(2115),ya=(0,Nr.Ce)(!1,"requestSubscribeMessage"),ba=!1;(0,gr.H)((function(){ba=!1})),(0,Mt.J)((function(){ba=!1}));var wa=function(e){Reporter.reportIDKey({key:"requestSubscribeMessageWithNative",force:!0});var t=Object.assign({},e);t.tmplIds=Array.from(new Set(e.tmplIds)),(0,d.IN)("requestSubscribeMessage",t,{beforeAll:function(){ba=!1},beforeSuccess:function(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeSuccess",force:!0}),ba=!1},beforeFail:function(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeFail",force:!0})}})},Ia=function(e){var t,n,r=e.tmplIds||[];if(0===r.length?(t="TmplIds can't be empty",n=10001):r.length>=4?(t="Templates count out of max bounds",n=20003):""===r[0]?(t="No template data return, verify the template id exist",n=20001):"string"!=typeof r[0]&&(t="Invalid template id",n=10004),t)return ba=!1,void(0,d.YG)("requestSubscribeMessage",e,t,n);var i=r.map((function(e){return{TemplateId:e}}));ya({apiName:"webapi_subscribe_msg",reqData:{AppId:fe.Z.accountInfo.appId,ActionType:1,ItemList:i},success:function(t){var n=(JSON.parse(t.respData.data).InfoList||[])[0]||{};if(n.TemplateId!==r[0])return ba=!1,void(0,d.FE)({name:"requestSubscribeMessage",args:e,res:_a()({},r[0],"ban")});var i="订阅一次以下消息通知";3===n.TemplateType&&(i="长期订阅以下消息通知"),(0,Jn.showModal)({title:i,content:n.Title||"",confirmText:"允许",cancelText:"取消",success:function(t){ba=!1,Sa(e,t)},fail:function(t){ba=!1,(0,d.YG)("requestSubscribeMessage",e,t.errMsg)}})},fail:function(t){var n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();(0,d.YG)("requestSubscribeMessage",e,n,+t.err_code),ba=!1}})},Sa=function(e,t){var n=e.tmplIds[0];ya({apiName:"webapi_subscribe_msg",reqData:{AppId:fe.Z.accountInfo.appId,ActionType:2,UIData:{OpType:t.confirm?1:2,UIItem:[{TemplateId:n,ChooseStatus:1}]}},success:function(){var r={};r["".concat(n)]="".concat(t.confirm?"accept":"reject"),(0,d.FE)({name:"requestSubscribeMessage",args:e,res:r}),(0,ma.I)({name:"requestSubscribeMessage",data:{templateCount:1,templateType:0,operationType:t.confirm?1:2}})},fail:function(t){var n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();(0,d.YG)("requestSubscribeMessage",e,n,+t.err_code)}})},Ca="";fe.Z.onReady((function(){Ca=fe.Z.appLaunchInfo.chatroomUsername,wxNativeConsole.info("chatroomUsername",Ca)})),(0,b.n)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ca=e.chatroomUsername,wxNativeConsole.info("onAppEnterForeground chatroomUsername",Ca)}));var Ta="getGroupEnterInfo",Ea=(0,Nr.Ce)(!1,Ta),ka=[1011,1025,1047,1124],xa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Pr.rN)(),n=t.scene;ka.indexOf(n)<0&&console.log("enter scene must be one of [1011, 1025, 1047, 1124], current is ".concat(n));var r=Object.assign({},e);if("string"==typeof r.url){var i=fn("publishWeChatState",r,!1);if(!i)return;r.url=i,r.url=(0,p.yP)(r.url)}(0,d.IN)("publishWeChatState",r)},Aa=__safeway__.apiSign.makeApiSign,Pa={setPrivateExtraData:Bn.xH,getCurrentRoute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.success({currentRoute:h.Z.lastRoute})},getRealRouteWithProtocol:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lastRoute,n=void 0===t?h.Z.lastRoute:t,r=e.relativeRoute,i=void 0===r?".":r,o=e.needTrans,a=void 0===o||o;e.success({route:(0,p.s$)(n,i,a)})},setWxInterfaceDisabled:f.AL,navigateTo:yn,navigateToWithRelatedInfo:bn,redirectTo:_n,switchTab:wn,navigateBack:In,reLaunch:mn,getUserCloudStorage:Cn.u,getFriendCloudStorage:Tn.l,getGroupCloudStorage:En.q,reportRecycledAPI:kn.Y,getPassCookieString:xn.KL,getPayCookieString:xn.Zv,getPluginInfo:An.u4,getPluginContactList:function(e){void 0===hn?On.push(e.success):e.success(hn)},_checkBeforeNavigateToMiniProgram:ne.Fl,getVideoAdPreloadData:function(e){var t=e.data.unitId;qr[t]?(e.success&&e.success({adData:qr[t]}),delete qr[t]):e.success&&e.success({adData:null}),-1!==Jr.indexOf(t)&&setTimeout((function(){Kr(t)}),1e3)},getAdPreloadData:function(e){var t=e.data,n=t.ad_unit_id,r=t.appid,i=t.orig_weapp_id,o=t.weapp_extra_data,a=t.pos_id;try{if(r!==Qr.S3.gameAppId)throw new Error("appid Error");if(i)throw new Error("orig_weapp_id Error");var s=JSON.parse(o);if(s.is_ad_interval)throw new Error("is_ad_interval Error");if(s.wxa_ext)throw new Error("wxa_ext Error");var c=ii[n].type;if("banner"===c&&-1===[ei.DX.banner,void 0,""].indexOf(a))throw new Error("pos_id Error");if("custom"===c&&a!==ei.DX.customAd)throw new Error("pos_id Error");if("videoPatch"===c&&a!==ei.DX.wxAppPreVideoAd)throw new Error("pos_id Error");if("video"===c&&a!==ei.DX.wxAppVideo)throw new Error("pos_id Error")}catch(t){var u,l;return null===(u=e.fail)||void 0===u||u.call(e,{errMsg:"getAdData: fail"}),void(0,Or.r)(ti.IN.PRELOAD_USE_ERROR,{type:null===(l=ii[n])||void 0===l?void 0:l.type,error:null==t?void 0:t.message},{ad_unit_id:n})}if(ui[n]){var d,f,p,h;if(Date.now()-ui[n]._preloadTime>6e5)null===(d=e.fail)||void 0===d||d.call(e,{errMsg:"getAdData: fail"}),(0,Or.r)(ti.IN.PRELOAD_USE_ERROR,{type:null===(f=ii[n])||void 0===f?void 0:f.type,error:"time more than 10m"},{ad_unit_id:n});else null===(p=e.success)||void 0===p||p.call(e,{data:ui[n],errMsg:"getAdData: ok from preload"}),(0,Or.r)(ti.IN.PRELOAD_USE_SUCCESS,{type:null===(h=ii[n])||void 0===h?void 0:h.type},{ad_unit_id:n,aid:ui[n]._aid,traceid:ui[n]._traceid});delete ui[n]}else{var g,v;null===(g=e.fail)||void 0===g||g.call(e,{errMsg:"getAdData: fail"}),(0,Or.r)(ti.IN.PRELOAD_USE_ERROR,{type:null===(v=ii[n])||void 0===v?void 0:v.type,error:"has no preload data"},{ad_unit_id:n})}-1===ri.indexOf(n)||fi.has(n)||setTimeout((function(){pi(ii[n])}),1e3)},shareImageMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("shareImageMessage",e,{})},getCloudFileInfo:j.K,_setNavigateBackInterception:gi.tl,_stopNavigateBackInterception:gi.Am,chooseInvoice:ha,chooseInvoiceTitle:ia,checkPermission:wo.P},Da=function(e,t,n,r){(0,d.nY)("callbackAppServiceMethod",{res:e,isSuccess:t,callbackId:n},[r])};(0,d.Ld)("invokeAppServiceMethod",(function(e,t){var n=e.name,r=e.type,i=e.args,o=e.callbackId;try{if("bridge"===r){var a=Aa(n,i);(0,d.dw)(n,a,(function(e){e.errMsg=e.errMsg||"".concat(n,":ok"),-1!==e.errMsg.indexOf("".concat(n,":ok"))?Da(e,!0,o,t):Da(e,!1,o,t)}))}else{i.success=function(e){Da(e,!0,o,t)},i.fail=function(e){Da(e,!1,o,t)};var s=("wx"===r?wx[n]:Pa[n])(i);s instanceof Promise&&s.catch((function(){}))}}catch(e){var c={errMsg:"".concat(n,": fail ").concat(e.message)};Da(c,!1,o,t)}})),(0,d.jQ)("onStartReportPageData",(function(){var e=(void 0!==__appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[]).find((function(e){return e.__wxWebviewId__===h.Z.currentWebviewId}));e&&(0,an.L)("getInnerHTML",{},[h.Z.currentWebviewId],(function(t){var n,r=t.html;try{n=JSON.stringify({html:r,data:e.data})}catch(e){n=""}(0,d.IN)("reportPageData",{isUserReport:!0,pageData:n,pageRoute:e.__route__,complete:function(){}})}))}));var Oa=(0,on.s)("NavigationBarTitleUpdate"),Na=Oa.internalOnMethod,Ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("setNavigationBarTitle",e,{title:""})&&(h.Z.navigationBarTitleMap[h.Z.lastRoute]=e.title,"[setNavigationBarTitle], path=".concat(h.Z.lastRoute,", title=").concat(e.title),(0,d.IN)("setNavigationBarTitle",e,{beforeAll:function(t){Oa.emitInternal(E()({title:e.title},t))}}))},Ma=function(e){(0,d.IN)("showNavigationBarLoading",e)},La=function(e){(0,d.IN)("hideNavigationBarLoading",e)},Ba="#000000",Fa="#ffffff";function ja(e){var t=(fe.Z.appContactInfo||{}).operationInfo||{};if(t.jsonInfo&&t.jsonInfo.op_info&&1===Number(t.jsonInfo.op_info.gray_flag)&&0===fe.Z.appType){var n=/^#([0-9|A-F|a-f]{6})$/.exec(e);if(null!=n){var r=parseInt(n[1].slice(0,2),16),i=parseInt(n[1].slice(2,4),16),o=parseInt(n[1].slice(4),16),a=Math.round(.299*r+.587*i+.114*o).toString(16).toUpperCase();"#".concat(a).concat(a).concat(a),(0,d.IN)("setNavigationBarColor",{frontColor:Fa,backgroundColor:"#".concat(a).concat(a).concat(a)})}}}fe.Z.onReady((function(){(0,gr.H)((function(){if(void 0!==fe.Z&&fe.Z.global&&fe.Z.global.window){var e=fe.Z.global.window;Ba=e.navigationBarBackgroundColor||Ba,Fa="black"===e.navigationBarTextStyle?"#000000":"#ffffff"}var t=h.Z.lastRoute+".html";if(void 0!==fe.Z&&fe.Z.page&&fe.Z.page[t]&&fe.Z.page[t].window){var n=fe.Z.page[t].window;Ba=n.navigationBarBackgroundColor||Ba,Fa="black"===n.navigationBarTextStyle?"#000000":"#ffffff"}ja(Ba)}))}));var Wa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("setNavigationBarColor",e,{frontColor:"",backgroundColor:""}))if(-1!==["#ffffff","#000000"].indexOf(e.frontColor)){"#ffffff"===e.frontColor?(0,d.IN)("setStatusBarStyle",{color:"white"}):"#000000"===e.frontColor&&(0,d.IN)("setStatusBarStyle",{color:"black"});var t=Object.assign({},e);Ba=e.backgroundColor,Fa=e.frontColor,(0,d.IN)("setNavigationBarColor",t),ja(Ba)}else(0,d.YG)("setNavigationBarColor",e,'invalid frontColor "'.concat(e.frontColor,'"'))},Ua=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);t.backgroundColor=Ba,(0,d.IN)("setNavigationBarColor",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setNavigationBarColor","setNavigationBarAlpha")}})},Va=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("setNavigationBarRightButton",e,{hide:!0})&&(0,d.IN)("setNavigationBarRightButton",e,{})},Ga=function(e){(0,d.jQ)("onCustomRightButtonClick",__errorTracer__.surroundThirdByTryCatch(e,"at onTapNavigationBarRightButton callback function"))},Ha=0,Za=L.kQ,qa=L.oZ,za=L.V9,Ya=n(5753);(0,gr.H)((function(e){try{fe.Z.tabBar.list.some((function(t){return t.pagePath.startsWith(e.path)}))}catch(e){}}));var Ka=null;fe.Z.onReady((function(){Ka=fe.Z.tabBar&&fe.Z.tabBar.list||[]}));var Ja=1,$a={};(0,d.Ld)("pageScrollDone",(function(e){if(!(e.callbackId<0||void 0===$a[e.callbackId])){var t=$a[e.callbackId];delete $a[e.callbackId],delete e.callbackId;var n="pageScrollTo";e.errMsg=e.errMsg||"scrollWebviewTo:ok",e.errMsg=e.errMsg.replace("scrollWebviewTo",n);var r=0===e.errMsg.indexOf("".concat(n,":ok")),i=0===e.errMsg.indexOf("".concat(n,":fail"));r?"function"==typeof t.success&&t.success(e):i&&"function"==typeof t.fail&&t.success(e),"function"==typeof t.complete&&t.complete(e)}}));var Xa=function(e){var t=__appServiceEngine__.getCurrentPagesByDomain(""),n=t[t.length-1].__wxWebviewId__;(0,de.n)(e,"page")&&(0,de.n)(e.page,"__wxWebviewId__")&&(n=e.page.__wxWebviewId__);var r={};for(var i in e)"function"==typeof e[i]&&(r[i]=e[i],delete e[i]);e.callbackId=Ja,$a[Ja]=r,Ja++,(0,d.nY)("pageScrollTo",e,[n])},Qa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("startPullDownRefresh",e,{})},es=function(e){(0,d.IN)("stopPullDownRefresh",e)},ts=0,ns={},rs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ns[ts]={success:e.success,fail:e.fail,complete:e.complete},(0,d.nY)("setPageStyle",{callbackId:ts,style:e.style},[h.Z.currentWebviewId]),ts+=1};(0,d.Ld)("callbackSetPageStyle",(function(e){var t=e.res,n=e.callbackId,r=t.errMsg,i=0===r.indexOf("setPageStyle:ok"),o=0===r.indexOf("setPageStyle:fail"),a=ns[n];delete ns[n],"object"===c()(a)&&(i?"function"==typeof a.success&&a.success(t):o&&"function"==typeof a.fail&&a.fail(t),"function"==typeof a.complete&&a.complete(t))}));var is=-1;function os(){return is}(0,d.Ld)("xWebTextareaFocusChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focus,n=arguments.length>1?arguments[1]:void 0;is=t?n:-1}));var as=!1;(0,on.s)("XWebTextareaSupportedEvent").internalOnMethod((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canInsert2XWeb;as=t}));var ss=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,e),this.actions=[],this.currentTransform=[],this.currentStepAnimates=[],this.option={transition:{duration:void 0!==t.duration?t.duration:400,timingFunction:void 0!==t.timingFunction?t.timingFunction:"linear",delay:void 0!==t.delay?t.delay:0},transformOrigin:t.transformOrigin||"50% 50% 0"}}return P()(e,[{key:"export",value:function(){var e=this.actions;return this.actions=[],{actions:e}}},{key:"step",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.currentStepAnimates.forEach((function(t){"style"!==t.type?e.currentTransform[t.type]=t:e.currentTransform["".concat(t.type,".").concat(t.args[0])]=t})),this.actions.push({animates:Object.keys(this.currentTransform).reduce((function(t,n){return[].concat(x()(t),[e.currentTransform[n]])}),[]),option:{transformOrigin:void 0!==t.transformOrigin?t.transformOrigin:this.option.transformOrigin,transition:{duration:void 0!==t.duration?t.duration:this.option.transition.duration,timingFunction:void 0!==t.timingFunction?t.timingFunction:this.option.transition.timingFunction,delay:void 0!==t.delay?t.delay:this.option.transition.delay}}}),this.currentStepAnimates=[],this}},{key:"matrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return this.currentStepAnimates.push({type:"matrix",args:[e,t,n,r,i,o]}),this}},{key:"matrix3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,h=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this.currentStepAnimates.push({type:"matrix3d",args:[e,t,n,r,i,o,a,s,c,u,l,d,f,p,h,g]}),this.stepping=!1,this}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotate",args:[e]}),this}},{key:"rotate3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.currentStepAnimates.push({type:"rotate3d",args:[e,t,n,r]}),this.stepping=!1,this}},{key:"rotateX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotateX",args:[e]}),this.stepping=!1,this}},{key:"rotateY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotateY",args:[e]}),this.stepping=!1,this}},{key:"rotateZ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotateZ",args:[e]}),this.stepping=!1,this}},{key:"scale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return t=void 0!==t?t:e,this.currentStepAnimates.push({type:"scale",args:[e,t]}),this}},{key:"scale3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.currentStepAnimates.push({type:"scale3d",args:[e,t,n]}),this}},{key:"scaleX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentStepAnimates.push({type:"scaleX",args:[e]}),this}},{key:"scaleY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentStepAnimates.push({type:"scaleY",args:[e]}),this}},{key:"scaleZ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentStepAnimates.push({type:"scaleZ",args:[e]}),this}},{key:"skew",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.currentStepAnimates.push({type:"skew",args:[e,t]}),this}},{key:"skewX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"skewX",args:[e]}),this}},{key:"skewY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"skewY",args:[e]}),this}},{key:"translate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.currentStepAnimates.push({type:"translate",args:[e,t]}),this}},{key:"translate3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.currentStepAnimates.push({type:"translate3d",args:[e,t,n]}),this}},{key:"translateX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"translateX",args:[e]}),this}},{key:"translateY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"translateY",args:[e]}),this}},{key:"translateZ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"translateZ",args:[e]}),this}},{key:"opacity",value:function(e){return this.currentStepAnimates.push({type:"style",args:["opacity",e]}),this}},{key:"backgroundColor",value:function(e){return this.currentStepAnimates.push({type:"style",args:["background-color",e]}),this}},{key:"width",value:function(e){return"number"==typeof e&&(e="".concat(e,"px")),this.currentStepAnimates.push({type:"style",args:["width",e]}),this}},{key:"height",value:function(e){return"number"==typeof e&&(e="".concat(e,"px")),this.currentStepAnimates.push({type:"style",args:["height",e]}),this}},{key:"left",value:function(e){return"number"==typeof e&&(e="".concat(e,"px")),this.currentStepAnimates.push({type:"style",args:["left",e]}),this}},{key:"right",value:function(e){return"number"==typeof e&&(e="".concat(e,"px")),this.currentStepAnimates.push({type:"style",args:["right",e]}),this}},{key:"top",value:function(e){return"number"==typeof e&&(e="".concat(e,"px")),this.currentStepAnimates.push({type:"style",args:["top",e]}),this}},{key:"bottom",value:function(e){return"number"==typeof e&&(e="".concat(e,"px")),this.currentStepAnimates.push({type:"style",args:["bottom",e]}),this}}]),e}(),cs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("createAnimation",e,{}))return new ss(e)},us=function(e){(0,d.IN)("setPageOrientation",e)},ls=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)},ds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).backgroundColor&&!ls(e.backgroundColor)&&delete e.backgroundColor,e.backgroundColorTop&&!ls(e.backgroundColorTop)&&delete e.backgroundColorTop,e.backgroundColorBottom&&!ls(e.backgroundColorBottom)&&delete e.backgroundColorBottom,(e.backgroundColor||e.backgroundColorTop||e.backgroundColorBottom)&&(0,d.IN)("setBackgroundColor",e)},fs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};-1!==["dark","light"].indexOf(e.textStyle)?(0,d.IN)("setBackgroundTextStyle",e):(0,d.YG)("setBackgroundTextStyle",e,'invalid textStyle "'.concat(e.textStyle,'"'))},ps=function(){};var hs=function(){var e,t={};if((0,d.IN)("getMenuButtonBoundingClientRect",{success:function(e){Object.assign(t,e),delete t.errMsg},fail:function(t){e=t.errMsg}}),e)throw new p.iZ(e);return t},gs=!1;(0,on.s)("XWebTextareaSupportedEvent").internalOnMethod((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canInsert2XWeb;gs=t}));var vs=0,_s={};(0,d.Ld)("onGetXWebSelectedTextRange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.taskId,n=e.focus,r=e.start,i=e.end,o=_s[t];o&&(n?("function"==typeof o.success&&o.success({errMsg:"getSelectedTextRange:ok",start:r,end:i}),"function"==typeof o.complete&&o.complete({errMsg:"getSelectedTextRange:ok",start:r,end:i})):("function"==typeof o.fail&&o.fail({errMsg:"getSelectedTextRange:fail:no focused input"}),"function"==typeof o.complete&&o.complete({errMsg:"getSelectedTextRange:fail:no focused input"}))),delete _s[t]}));var ms={},ys={};function bs(e,t,n){var r=ys[e];r&&r["bind".concat(t)]&&h.Z.webviewEventCallback&&h.Z.webviewEventCallback({data:{type:t,target:r.target,currentTarget:r.target,timeStamp:Date.now()-r.createdTimestamp,detail:n},eventName:r["bind".concat(t)],webviewId:e,nodeId:r.nodeId})}function ws(e){var t=ms[e];t&&t.length&&bs(e,"message",{data:t})}function Is(e,t){var n=e.name,r=e.arg;!B.wZ||B.qB||B.Ae||(t=h.Z.currentWebviewId),"navigateBack"===n?In({delta:r.delta}):"navigateTo"===n?yn({url:r.url}):"redirectTo"===n?_n({url:r.url}):"reLaunch"===n?mn({url:r.url}):"switchTab"===n?wn({url:r.url}):"error"===n?bs(t,"error",{errMsg:"web-view load failed due to not in domain list",url:r.url}):"postMessage"===n&&ms[t]&&ms[t].push(r)}(0,d.Ld)("webViewInserted",(function(e,t){ys[t]=e,ms[t]=[],L.dq(t,(function(e){ws(e),delete ys[e],delete ms[e]})),L.RK(t,ws),(0,d.IN)("hideShareTimelineMenu")})),(0,d.Ld)("webViewRemoved",(function(e,t){ws(t),delete ys[t],delete ms[t],__appServiceEngine__.showShareTimelineMenuIfNeeded(t)})),(0,d.jQ)("onWebInvokeAppService",Is),(0,d.jQ)("WEB_INVOKE_APPSERVICE",Is),(0,d.jQ)("onBottomBannerButtonClicked",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.currentPath,(0,d.IN)("restart",{url:e.currentPath,scene:1155,fail:function(e){wxNativeConsole.error("restart fail",e)}})}));var Ss=function(e,t,n){setTimeout((function(){(0,d.nY)("callbackMiniProgramFunction",{callbackId:t,argArr:n},[e])}),0)};(0,d.Ld)("callMiniProgramFunction",(function(e,t){var n=e.callbackId,r=e.paths,i=e.funcName,o=e.argArr,a=null;"object"!==c()(r)&&(r=[r]);for(var s=0;s<r.length;s++){var u=r[s];".js"!==u.slice(-3)&&(u+=".js");try{a=requireMiniProgramFile(u)}catch(e){}if(a)break}if(a)if("function"!=typeof a[i]){Ss(t,n,[{errMsg:"callMiniProgramFunction:fail Function not found"}])}else o.push((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];Ss(t,n,r)})),a[i].apply({},o);else{Ss(t,n,[{errMsg:"callMiniProgramFunction:fail File not found"}])}}));var Cs=(0,on.s)("UpdateWXConfig"),Ts=Cs.onMethod;Cs.offMethod;(0,d.jQ)("onUpdateWXConfig",(function(e){wxNativeConsole.info("onUpdateWXConfig",e),Object.keys(e).forEach((function(t){fe.Z[t]=e[t]})),Cs.emit(e)}));var Es=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,d.IN)("getLocation",e,Object.assign({beforeSuccess:function(t){e.altitude||delete t.altitude}},t))},ks=!1;fe.Z.onReady((function(){ks="develop"===fe.Z.envVersion||"trial"===fe.Z.envVersion}));var xs=0,As={wgs84:null,gcj02:null},Ps="频繁调用会增加电量损耗，可考虑使用 wx.onLocationChange 监听地理位置变化";(0,gr.H)((function(){xs=0})),(0,Mt.J)((function(){xs=0}));var Ds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"gcj02"!==e.type&&(e.type="wgs84");var t=Date.now(),n=As[e.type];if(t-xs>=1e4||!ks&&!n)return xs=t,void Es(e,{afterAll:function(t){As[e.type]=t}});if(ks)(0,d.YG)("getLocation",e,Ps);else{var r=0===n.errMsg.indexOf("getLocation:ok");(0,d.FE)({name:"getLocation",success:r,args:e,errMsg:n.errMsg,res:n})}},Os=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("chooseLocation",e)},Ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("choosePoi",e)},Rs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("openLocation",e,{latitude:1,longitude:1})&&(0,d.IN)("openLocation",e)},Ms=(0,on.s)("locationChange"),Ls=Ms.onMethod,Bs=Ms.offMethod;(0,d.jQ)("onLocationChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ms.emit(e)}));var Fs=(0,on.s)("locationChangeError"),js=Fs.onMethod,Ws=Fs.offMethod;(0,d.jQ)("onLocationChangeError",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Fs.emit(e)}));var Us=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={subKey:"",enableIndoor:!1,enable:!0};Object.assign(t,e),(0,d.IN)("enableLocationUpdate",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableLocationUpdate","startLocationUpdate")}})},Vs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.wZ&&fe.Z.clientVersion>=654312704&&fe.Z.clientVersion<654312960?(0,d.IN)("enableLocationUpdate",Object.assign({enable:!1},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableLocationUpdate","stopLocationUpdate")}}):(0,d.IN)("disableLocationUpdate",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("disableLocationUpdate","stopLocationUpdate")}})},Gs=function(){if(!fe.Z.ext)return{};try{return JSON.parse(JSON.stringify(fe.Z.ext))}catch(e){return{}}},Hs={},Zs={},qs={};function zs(e,t){return e+"_"+t}function Ys(){return(B.cj?Number((fe.Z.system||"").replace("iOS","")):0)>=13}function Ks(e){delete Hs[e],delete Zs[e],delete qs[e]}function Js(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=zs(t,e);if(r&&(void 0===Hs[i]||!0!==Hs[i].enhanced))return console.warn("此方法需要 scroll-view 开启 enhanced 属性！"),!1;var o=E()({scrollViewId:e},n),a=Hs[i];return a&&a.fallback?(0,d.nY)("operateWebviewScrollView",o,[t]):(0,d.IN)("operateScrollView",o,{success:function(){}}),!0}function $s(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=zs(e,t);if(r&&(void 0===Hs[i]||!0!==Hs[i].enhanced))return console.warn("此方法需要 scroll-view 开启 enhanced 属性！"),!1;var o=E()({scrollViewId:t},n);return(0,d.nY)("operateXWebScrollView",o,[e]),!0}(0,d.Ld)("enhancedScrollViewReady",(function(e,t){var n=zs(t,e.scrollViewId);Hs[n]={enhanced:!0,data:e.data,fallback:e.fallback}})),(0,d.Ld)("commonScrollViewReady",(function(e,t){var n=zs(t,e.scrollViewId);Hs[n]||(Hs[n]={enhanced:!1});var r=Zs[n];r&&"function"==typeof r&&(r(),delete Zs[n]),(0,L.dq)(t,(function(){Ks(n)}))})),(0,d.Ld)("commonScrollViewDestroyed",(function(e,t){Ks(zs(t,e.scrollViewId))})),(0,d.Ld)("enhancedScrollViewDragEvent",(function(e,t){var n=zs(t,e.scrollViewId),r=Hs[n];if(r&&r.data){var i=r.data,o="",a="";if("dragstart"===e.eventName?(o="dragstart",a=i.handlers.binddragstart):"dragging"===e.eventName?(o="dragging",a=i.handlers.binddragging):"dragend"===e.eventName&&(o="dragend",a=i.handlers.binddragend),a){var s={scrollTop:e.scrollTop,scrollLeft:e.scrollLeft};"dragend"===o&&(s.velocity=e.velocity),h.Z.webviewEventCallback({data:{type:o,target:i.target,currentTarget:i.target,touches:[],detail:s},eventName:a,webviewId:i.webviewId,nodeId:i.nodeId})}}})),(0,d.Ld)("enhancedScrollViewSubscribeEvent",(function(e,t){B.cj&&!Ys()||(e.subscribe?Js(e.scrollViewId,t,{registerDelegate:!0}):Js(e.scrollViewId,t,{removeDelegate:!0}))})),(0,b.n)("onScrollViewWillEndDragging",(function(e){var t=zs(h.Z.currentWebviewId,e.scrollViewId),n=Hs[t];if(n&&n.data){var r=n.data;h.Z.webviewEventCallback({data:{type:"dragend",target:r.target,currentTarget:r.target,touches:[],detail:{scrollTop:e.contentOffset.y,scrollLeft:e.contentOffset.x,velocity:e.velocity}},eventName:r.handlers.binddragend,webviewId:r.webviewId,nodeId:r.nodeId})}}));var Xs=function e(t,n){R()(this,e),this.id=t,this.webviewId=n,this._scrollEnabled=!0,this._bounces=!0,this._showScrollbar=!0,this._pagingEnabled=!1,this._fastDeceleration=!1,this._decelerationDisabled=!1},Qs=function(e){I()(n,e);var t=C()(n);function n(e,r){var i;return R()(this,n),(i=t.call(this,e,r)).uid=zs(r,e),void 0!==Hs[e]&&!0===Hs[e].enhanced&&(i.scrollEnabled=!0),i}return P()(n,[{key:"scrollEnabled",get:function(){return this._scrollEnabled},set:function(e){Js(this.id,this.webviewId,{scrollEnabled:e})&&(this._scrollEnabled=e)}},{key:"bounces",get:function(){return this._bounces},set:function(e){Js(this.id,this.webviewId,{bounces:e})&&(this._bounces=e)}},{key:"showScrollbar",get:function(){return this._showScrollbar},set:function(e){Js(this.id,this.webviewId,{showsVerticalScrollIndicator:e,showsHorizontalScrollIndicator:e})&&(this._showScrollbar=e)}},{key:"pagingEnabled",get:function(){return this._pagingEnabled},set:function(e){Js(this.id,this.webviewId,{pagingEnabled:e})&&(this._pagingEnabled=e)}},{key:"fastDeceleration",get:function(){return this._fastDeceleration},set:function(e){Js(this.id,this.webviewId,{decelerationRate:e?.99:.998})&&(this._fastDeceleration=e)}},{key:"scrollTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.top,n=e.left,r=e.duration,i=e.velocity,o=e.animated,a=void 0!==n?n:0,s=void 0!==t?t:0;if(void 0===r)Js(this.id,this.webviewId,{"setContentOffset:animated":{animated:!!o,contentOffset:{x:a,y:s}}});else{if(B.cj&&!Ys())return;Js(this.id,this.webviewId,{"setContentOffset:springAnimated":{contentOffset:{x:a,y:s},duration:r/1e3,delay:0,damping:1,velocity:i}})}}},{key:"decelerationDisabled",get:function(){return this._decelerationDisabled},set:function(e){B.cj&&!Ys()||Js(this.id,this.webviewId,{customDecelerateEnabled:e})&&(this._decelerationDisabled=e)}},{key:"_onReady",value:function(e){var t=Hs[this.uid],n=function(){"function"==typeof e&&e()};t?n():Zs[this.uid]=function(){n()}}},{key:"scrollIntoView",value:function(e){!function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=zs(t,e);if(r&&(void 0===Hs[i]||!0!==Hs[i].enhanced))return console.warn("此方法需要 scroll-view 开启 enhanced 属性！"),!1;var o=E()({scrollViewId:e},n);(0,d.nY)("operateWebviewScrollView",o,[t])}(this.id,this.webviewId,{scrollIntoView:e},!1)}}]),n}(Xs),ec=function(e){I()(n,e);var t=C()(n);function n(e,r){var i;return R()(this,n),(i=t.call(this,e,r)).uid=zs(r,e),i}return P()(n,[{key:"scrollEnabled",get:function(){return this._scrollEnabled},set:function(e){$s(this.webviewId,this.id,{scrollEnabled:e})&&(this._scrollEnabled=e)}},{key:"bounces",get:function(){return this._bounces},set:function(e){}},{key:"showScrollbar",get:function(){return this._showScrollbar},set:function(e){$s(this.webviewId,this.id,{showScrollbar:e})&&(this._showScrollbar=e)}},{key:"pagingEnabled",get:function(){return this._pagingEnabled},set:function(e){$s(this.webviewId,this.id,{pagingEnabled:e})&&(this._pagingEnabled=e)}},{key:"fastDeceleration",get:function(){return this._fastDeceleration},set:function(e){$s(this.webviewId,this.id,{fastDeceleration:e})&&(this._fastDeceleration=e)}},{key:"scrollTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.top,n=e.left,r=e.duration,i=e.velocity,o=e.animated,a=void 0!==n?n:0,s=void 0!==t?t:0;$s(this.webviewId,this.id,{scrollToWithAnimation:{contentOffset:{x:a,y:s},duration:r,animated:o,velocity:i}})}},{key:"decelerationDisabled",get:function(){return this._decelerationDisabled},set:function(e){}},{key:"_onReady",value:function(e){var t=Hs[this.uid],n=function(){"function"==typeof e&&e()};t?n():Zs[this.uid]=function(){n()}}},{key:"scrollIntoView",value:function(e){$s(this.webviewId,this.id,{scrollIntoView:e},!1)}}]),n}(Xs),tc=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.apply(this,arguments)}return P()(n,[{key:"scrollEnabled",get:function(){return this._scrollEnabled},set:function(e){}},{key:"bounces",get:function(){return this._bounces},set:function(e){}},{key:"showScrollbar",get:function(){return this._showScrollbar},set:function(e){}},{key:"pagingEnabled",get:function(){return this._pagingEnabled},set:function(e){}},{key:"fastDeceleration",get:function(){return this._fastDeceleration},set:function(e){}},{key:"scrollTo",value:function(){}},{key:"decelerationDisabled",get:function(){return this._decelerationDisabled},set:function(e){}},{key:"scrollIntoView",value:function(e){$s(this.webviewId,this.id,{scrollIntoView:e},!1)}}]),n}(Xs);var nc=function e(t,n,r,i){if(t)if(Array.isArray(t))t.forEach((function(t){return e(t,n,r,i)}));else{var o=t.contextIs,a=t.contextId,s=t.contextCanvasId;o&&("wx-video"===o&&(t.context=(0,he.hN)(a,h.Z.currentWebviewId)),"wx-live-player"===o&&(t.context=ut(a,h.Z.currentWebviewId,i)),"wx-map"===o&&(t.context=te(a,h.Z.currentWebviewId)),"wx-canvas"===o&&s&&(t.context=(0,se.createCanvasContext)(s,n)),"wx-editor"===o&&(t.context=Xt(a,h.Z.currentWebviewId)),delete t.contextIs,delete t.contextId,delete t.contextCanvasId);var c=t.nodeIs,u=t.nodeId,l=t.nodeCanvasType,d=t.nodeCanvasId,f=t.nodeNodeId;c&&("wx-canvas"===c&&u&&(t.node=(0,se.createCanvasNode)(u,l,d,f)),"wx-scroll-view"===c&&u&&(t.node=function(e){var t=h.Z.currentWebviewId,n=function(e,t){return"".concat(e,"-").concat(t)}(t,e);return qs[n]||(B.cj?qs[n]=new Qs(e,t):B.wZ?qs[n]=new ec(e,t):qs[n]=new tc(e,t)),qs[n]}(u)),delete t.nodeIs,delete t.nodeId,delete t.nodeCanvasId,delete t.nodeNodeId,t.node&&"function"==typeof t.node._onReady&&r.push(new Promise((function(e){return t.node._onReady(e)}))))}},rc=function(){function e(t,n,r,i){R()(this,e),this._selectorQuery=t,this._component=n,this._selector=r,this._single=i}return P()(e,[{key:"fields",value:function(e,t){return this._selectorQuery._push(this._selector,this._component,this._single,e,t),this._selectorQuery}},{key:"boundingClientRect",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,rect:!0,size:!0},e),this._selectorQuery}},{key:"scrollOffset",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,scrollOffset:!0},e),this._selectorQuery}},{key:"context",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{context:!0},e),this._selectorQuery}},{key:"node",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{node:!0},e),this._selectorQuery}}]),e}(),ic={},oc=function(e){return function(){function t(e){if(R()(this,t),e&&e.page)this._component=this._defaultComponent=e.page,this._webviewId=this._defaultComponent.__wxWebviewId__;else{var n=__appServiceEngine__.getCurrentPagesByDomain("");this._defaultComponent=n[n.length-1],this._component=null,this._webviewId=null}this._queue=[],this._queueCb=[]}return P()(t,[{key:"in",value:function(e){return null===this._webviewId?(this._webviewId=e.__wxWebviewId__,this._component=e):this._webviewId!==e.__wxWebviewId__?console.error("A single SelectorQuery could not work in components in different pages. A SelectorQuery#in call has been ignored."):this._component=e,this}},{key:"select",value:function(e){return new rc(this,this._component,e,!0)}},{key:"selectAll",value:function(e){return new rc(this,this._component,e,!1)}},{key:"selectViewport",value:function(){return new rc(this,0,"",!0)}},{key:"_push",value:function(t,n,r,i,o){null===this._webviewId&&(this._webviewId=this._defaultComponent?this._defaultComponent.__wxWebviewId__:void 0);var a=e?"":__virtualDOM__.getRootNodeId(this._webviewId);this._queue.push({component:null!=n?0===n?0:n.__wxExparserNodeId__:a,selector:t,single:r,fields:i}),this._queueCb.push(o||null)}},{key:"exec",value:function(t){var n=this;!function(e,t,n){if(null!=e)var r=__virtualDOM__.requestViewInfo("selectorQuery",t,e,(function(t){n&&(__virtualDOM__.endViewInfoCallback(e,r),n&&n(t))}));else console.warn("An SelectorQuery call is ignored because no proper page or component is found. Please considering using `SelectorQuery.in` to specify a proper one.")}(this._webviewId,{pluginId:e,queue:this._queue},(function(r){var i=n._queueCb,o=[],a=[];r.forEach((function(t,r){nc(t,n._component,a,e),"function"==typeof i[r]&&o.push(__errorTracer__.surroundThirdByTryCatch((function(){i[r].call(n,t)}),"at SelectorQuery callback function"))})),"function"==typeof t&&o.push(__errorTracer__.surroundThirdByTryCatch((function(){t.call(n,r)}),"at SelectorQuery callback function")),a.length?Promise.all(a).then((function(){o.forEach((function(e){return e()}))})):o.forEach((function(e){return e()}))}))}}]),t}()};function ac(e,t){return ic[t]||(ic[t]=oc(t)),new ic[t](e)}var sc=function(e,t,n){var r=__virtualDOM__.requestViewInfo("intersection",t,e,(function(t){t.reqEnd&&__virtualDOM__.endViewInfoCallback(e,r),n&&(t.reqEnd||n(t))}))},cc={};function uc(e,t,n){return cc[n]||(cc[n]=function(e){return function(){function t(e,n){if(R()(this,t),this._component=e,this._options=n,this._relativeInfo=[],this._observerId=null,this._disconnected=!1,e)this._webviewId=e.__wxWebviewId__;else{var r=__appServiceEngine__.getCurrentPagesByDomain("");r.length&&(this._webviewId=r[r.length-1].__wxWebviewId__)}}return P()(t,[{key:"relativeTo",value:function(e,t){if(null!==this._observerId)throw new Error('Relative nodes cannot be added after "observe" call in IntersectionObserver');return this._relativeInfo.push({selector:e,margins:t}),this}},{key:"relativeToViewport",value:function(e){if(null!==this._observerId)throw new Error('Relative nodes cannot be added after "observe" call in IntersectionObserver');return this._relativeInfo.push({selector:null,margins:e}),this}},{key:"observe",value:function(t,n){var r=this;if(null!==this._observerId)throw new Error('"observe" call can be only called once in IntersectionObserver');this._observerId="";var i=this._component;sc(this._webviewId,{type:"addIntersectionObserver",pluginId:e,nodeId:i?i.__wxExparserNodeId__:__virtualDOM__.getRootNodeId(this._webviewId),targetSelector:t,relativeInfo:this._relativeInfo,options:this._options},(function(e){r._disconnected||(e.observerId&&(r._observerId=e.observerId),e.info&&n.call(r,e.info))}))}},{key:"disconnect",value:function(){sc(this._webviewId,{type:"removeIntersectionObserver",observerId:this._observerId}),this._disconnected=!0}}]),t}()}(n)),new cc[n](e,t)}var lc=function(e,t,n){var r=__virtualDOM__.requestViewInfo("matchMedia",t,e,(function(t){t.reqEnd&&__virtualDOM__.endViewInfoCallback(e,r),n&&(t.reqEnd||n(t))}))},dc={};function fc(e,t,n){return dc[n]||(dc[n]=function(){function e(t,n){R()(this,e),this._component=t,this._options=n,this._relativeInfo=[],this._observerId=null,this._disconnected=!1,this._webviewId=t.__wxWebviewId__}return P()(e,[{key:"observe",value:function(e,t){var n=this;if(null!==this._observerId)throw new Error('"observe" call can be only called once in MediaQueryObserver');this._observerId="",lc(this._webviewId,{type:"addMediaQueryObserver",mediaQueryCond:e},(function(e){n._disconnected||(e.observerId&&(n._observerId=e.observerId),e.info&&t.call(n,e.info))}))}},{key:"disconnect",value:function(){lc(this._webviewId,{type:"removeMediaQueryObserver",observerId:this._observerId}),this._disconnected=!0}}]),e}()),new dc[n](e,t)}var pc=[],hc=null;function gc(){var e=pc;pc=[],hc=null;for(var t=0,n=e.length;t<n;t++){var r=e[t];r&&(r=__errorTracer__.surroundThirdByTryCatch(r,"at api nextTick callback function")),r&&r()}}var vc=function(e){e&&"function"==typeof e&&(pc.push(e),hc||(hc=setTimeout(gc,0)))},_c=new y.Z;(0,d.jQ)("onLoadSubPackageTaskStateChange",(function(e){_c.emit(e.state,e.taskId,e)}));var mc=n(3499),yc={},bc=[],wc=new WeakMap,Ic=new WeakMap,Sc=function(e){return yc[e]},Cc=function(e){var t=Object.assign({},e);return delete t.taskId,delete t.state,delete t.moduleName,t},Tc=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;"string"!=typeof n&&console.error("SubContext onSubPackageReady error: moduleName is empty"),n.endsWith(".js")||(n.endsWith("/")||(n="".concat(n,"/")),n="".concat(n,"game.js"));var r=mc.n.get();if((0,Ce.GO)()&&(0,Ce.aI)()&&!t&&!r)return"__APP__"===e?__subContextEngine__.getGameContext().evaluateScriptFile("game.js"):__subContextEngine__.getGameContext().evaluateScriptFile(n)};_c.on("success",(function(e,t){var n=Sc(e);delete yc[e],Array.isArray(n)&&n.forEach(function(){var e=ye()(we().mark((function e(n){var r,i,o;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.moduleName,i=wc.get(n),o=Cc(t),bc.push(r),e.next=6,Tc(r,t.isMonkeyTest);case 6:o.errMsg="loadSubpackage:ok","function"==typeof i.success&&i.success(o),"function"==typeof i.complete&&i.complete(o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),_c.on("fail",(function(e,t){var n=Sc(e);delete yc[e],Array.isArray(n)&&n.forEach((function(e){var n=wc.get(e),r=Cc(t);r.errMsg="loadSubpackage:fail module not found","function"==typeof n.fail&&n.fail(r),"function"==typeof n.complete&&n.complete(r)}))})),_c.on("progressUpdate",(function(e,t){var n=Sc(e);Array.isArray(n)&&n.forEach((function(e){var n=Ic.get(e),r=Cc(t);"function"==typeof n&&n(r)}))}));var Ec=function(){var e,t=this,n=wc.get(this);if(bc.indexOf(n.name)>=0){var r={errMsg:"loadSubpackage:ok",moduleName:n.name};return"function"==typeof n.success&&n.success(r),void("function"==typeof n.complete&&n.complete(r))}if("__APP__"===n.name&&B.gm&&(0,Ce.GO)()&&(0,Ce.aI)()){bc.push(n.name),Tc(n.name);var i={errMsg:"loadSubpackage:ok"};return"function"==typeof n.success&&n.success(i),void("function"==typeof n.complete&&n.complete(i))}if((0,d.IN)("createLoadSubPackageTask",{moduleName:n.name,success:function(e){void 0===yc[e.loadTaskId]?yc[e.loadTaskId]=[t]:yc[e.loadTaskId].push(t)},fail:function(t){e=t.errMsg,B.cj&&(t.errMsg="loadSubpackage:fail module not found","function"==typeof n.fail&&__errorTracer__.surroundThirdByTryCatch(n.fail)(t),"function"==typeof n.complete&&__errorTracer__.surroundThirdByTryCatch(n.complete)(t))}}),e)throw new Error(e.replace(/createLoadSubPackageTask:fail[ :]/,""))},kc=function(){function e(t){R()(this,e),wc.set(this,t),["success","fail","complete"].forEach((function(e){"function"==typeof t[e]&&(t[e]=__errorTracer__.surroundThirdByTryCatch(t[e],"at api loadSubpackage ".concat(e," callback function")))})),Ec.call(this)}return P()(e,[{key:"onProgressUpdate",value:function(e){Ic.set(this,(function(t){void 0!==t.totalBytesWriten&&(t.totalBytesWritten=t.totalBytesWriten,delete t.totalBytesWriten),"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at LoadTask.onProgressUpdate callback function")(t)}))}}]),e}(),xc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);if((0,d.r3)("loadSubPackage",t,{name:""})){var n=fe.Z.subPackages||fe.Z.subpackages;if(n){n.forEach((function(e){t.name!==e.alias&&t.name!==e.name||(t.name=e.root)}));var r="__APP__"===t.name||"__GAME__"===t.name;r||t.name.startsWith("/")||(t.name="/".concat(t.name)),r||t.name.endsWith(".js")||t.name.endsWith("/")||(t.name="".concat(t.name,"/")),"__GAME__"===t.name&&(t.name="__APP__");try{var i=new kc(t);return i}catch(e){return void(0,d.YG)("loadSubpackage",t,e.message)}}else(0,d.YG)("loadSubpackage",t,"Your subpackages configuration is invalid.")}},Ac=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout((function(){(0,d.IN)("getBatteryInfo",e)}),0)},Pc=function(){var e={level:100,isCharging:!0};if((0,d.IN)("getBatteryInfo",{complete:function(t){return e=t}}),e.errMsg=e.errMsg?e.errMsg.replace("getBatteryInfo","getBatteryInfoSync"):"getBatteryInfoSync:ok",/fail/.test(e.errMsg))throw new Error(e.errMsg);return e},Dc=n(266),Oc=!1,Nc=(0,on.s)("accelerometerChange"),Rc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={fast:0,game:20,ui:60,normal:200},n=void 0!==t[e.interval]?t[e.interval]:t.normal,r=(0,p.f0)(e,{interval:n,enable:!0});(0,d.IN)("enableAccelerometer",r,{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableAccelerometer","startAccelerometer")}}),Oc=!0},Mc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("enableAccelerometer",(0,p.f0)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableAccelerometer","stopAccelerometer")}}),Oc=!1},Lc=Nc.onMethod,Bc=Nc.offMethod,Fc=function(e){Oc||((0,d.IN)("enableAccelerometer",{enable:!0}),Oc=!0),Lc(e)};(0,d.jQ)("onAccelerometerChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fe.Z.clientVersion>=369558016&&fe.Z.clientVersion<369558272&&(e.x&&(e.x/=180/Math.PI),e.y&&(e.y/=180/Math.PI),e.z&&(e.z/=180/Math.PI)),Nc.emit(e)}));var jc=!1,Wc=(0,on.s)("compassChange"),Uc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("enableCompass",(0,p.f0)(e,{enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableCompass","startCompass")}}),jc=!0},Vc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("enableCompass",(0,p.f0)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableCompass","stopCompass")}}),jc=!1},Gc=Wc.onMethod,Hc=Wc.offMethod,Zc=function(e){jc||((0,d.IN)("enableCompass",{enable:!0}),jc=!0),Gc(e)};(0,d.jQ)("onCompassChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Wc.emit(e)}));var qc,zc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("makePhoneCall",e,{phoneNumber:""})&&(0,d.IN)("makePhoneCall",e)},Yc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("makeVoIPCall",(0,p.f0)({allowBackCamera:!1,showOther:!1},e))},Kc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("scanCode",e,{})&&(0,d.IN)("scanCode",e,{beforeSuccess:function(e){"string"==typeof e.path&&(e.path=e.path.replace(/\.html$/,""),e.path=e.path.replace(/\.html\?/,"?"))}})},Jc=(0,Kn.Z)("scanItem","ProductLogic",{},{},(function(e){return{method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})}}),(function(e){delete e.rawData,delete e.errcode,e.products=(e.products||[]).map((function(e){return{info:{title:e.info.title,category:e.info.category.map((function(e){return{name:e.name}}))}}}))})),$c=(0,Kn.Z)("scanItem","ProductLogic",{},{},(function(e){return{method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})}}),(function(e){delete e.rawData,delete e.errcode,e.products=e.products||[]})),Xc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("scanItem",e,{})&&(0,d.IN)("scanItem",E()(E()({},e),{},{data:JSON.stringify({appId:fe.Z.accountInfo.appId,path:h.Z.lastRoute}),success:function(){},fail:function(){},complete:function(t){0!==t.errMsg.indexOf("scanItem:fail")?Jc({reqKey:t.reqKey,success:e.success,fail:e.fail,complete:e.complete}):(0,d.YG)("scanItem",e,t.errMsg.substr(14).trim(),t.errCode)}}))},Qc=__safeway__.apiSign.makeApiSign,eu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.IN)("getClipboardData",Qc("getClipboardData",e)),7!==fe.Z.appType){var t=fe.Z.system,n=fe.Z.accountInfo;if(fe.Z.useClipboardWithPermissionNotify||/^iOS /i.test(t)&&parseInt(t.split(" ")[1],10)>=14){var r=n?n.nickname:"小程序";(0,Jn.showToast)({icon:"none",title:"“".concat(r,"”读取了你的剪切板内容")})}}},tu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("setClipboardData",e,{data:""})){var t=Qc("setClipboardData",e);(0,d.IN)("setClipboardData",t,{beforeSuccess:function(){(0,d.be)("showToast",{duration:1500,title:"内容已复制",icon:"none",mask:!1});try{h.Z.currentClipBoardData=e.data,en(!0)}catch(e){}}})}},nu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.uuids)if(Array.isArray(e.uuids)){if(0!==e.uuids.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=e.uuids.some((function(e){return"string"==typeof e&&t.test(e)}));if(!n)return void(0,d.YG)("startBeaconDiscovery",e,"invalid service uuid")}(0,d.IN)("startBeaconDiscovery",e)}else(0,d.YG)("startBeaconDiscovery",e,"uuid must be an Array");else(0,d.YG)("startBeaconDiscovery",e,"must have uuid")},ru=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("stopBeaconDiscovery",e)},iu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("getBeacons",e)},ou=function(e){(0,d.r3)("onBeaconUpdate",e,M.ZT)&&(0,d.jQ)("onBeaconUpdated",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconUpdate callback function"))},au=function(){(0,d.jQ)("onBeaconUpdated",(function(){}))},su=function(e){(0,d.r3)("onBeaconServiceChange",e,M.ZT)&&(0,d.jQ)("onBeaconServiceChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconServiceChange callback function"))},cu=function(){(0,d.jQ)("onBeaconServiceChanged",(function(){}))},uu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("captureScreen",e,{})},lu=n(5835),du=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("getScreenBrightness",e,{})},fu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("setScreenBrightness",e,{})},pu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);t.style=t.type,(0,d.IN)("vibrateShort",t,{})},hu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("vibrateLong",e,{})},gu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("addPhoneContact",e,{})},vu=(0,M.NX)("searchContacts",ye()(we().mark((function e(){var t,n,r=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},(0,d.zy)(t,{phoneNumber:""}),/^.{8,}$/.test(t.phoneNumber)){e.next=4;break}throw new Error("phoneNumber length is less than 8");case 4:return e.next=6,(0,d.bb)("searchContacts",t,{});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))),_u=vu,mu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openBluetoothAdapter",e,{})},yu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("closeBluetoothAdapter",e,{})},bu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("getBluetoothAdapterState",e,{})},wu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.services){if(!Array.isArray(e.services))return void(0,d.YG)("startBluetoothDevicesDiscovery",{},"services must be an Array");if(0!==e.services.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=e.services.some((function(e){return"string"==typeof e&&t.test(e)}));if(!n)return void(0,d.YG)("startBluetoothDevicesDiscovery",{},"invalid service uuid");e.services=e.services.map((function(e){return B.wZ&&(e=e.toUpperCase()),4===e.length?"0000".concat(e,"-0000-1000-8000-00805F9B34FB"):8===e.length?"".concat(e,"-0000-1000-8000-00805F9B34FB"):e}))}}(0,d.IN)("startBluetoothDevicesDiscovery",e,{})},Iu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("stopBluetoothDevicesDiscovery",e,{})},Su=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("getBluetoothDevices",e,{beforeSuccess:function(e){Array.isArray(e.devices)||(e.devices=[]),e.devices.map((function(e){if(e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=(0,p.RG)(e.advertisData)),e.serviceData){var t=e.serviceData;Object.keys(t).forEach((function(e){t[e]&&(t[e]=(0,p.RG)(t[e]))}))}return e}))}})},Cu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("getBLEDeviceRSSI",e,{deviceId:""})&&(0,d.IN)("getBLEDeviceRSSI",e)},Tu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.services){if(!Array.isArray(e.services))return void(0,d.YG)("getConnectedBluetoothDevices",e,"services must be an Array");if(0!==e.services.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=e.services.some((function(e){return"string"==typeof e&&t.test(e)}));if(!n)return void(0,d.YG)("getConnectedBluetoothDevices",{},"invalid service uuid");e.services=e.services.map((function(e){return B.wZ&&(e=e.toUpperCase()),4===e.length?"0000".concat(e,"-0000-1000-8000-00805F9B34FB"):8===e.length?"".concat(e,"-0000-1000-8000-00805F9B34FB"):e}))}}(0,d.IN)("getConnectedBluetoothDevices",e,{beforeSuccess:function(e){Array.isArray(e.devices)||(e.devices=[]),e.devices=e.devices.map((function(e){return e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=(0,p.RG)(e.advertisData)),e}))}})},Eu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("createBLEConnection",e,{deviceId:""})&&(0,d.IN)("createBLEConnection",e,{})},ku=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("closeBLEConnection",e,{deviceId:""})&&(0,d.IN)("closeBLEConnection",e,{})},xu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("getBLEDeviceServices",e,{deviceId:""})&&(0,d.IN)("getBLEDeviceServices",e,{beforeSuccess:function(e){Array.isArray(e.services)||(e.services=[]),void 0===e.errCode&&(e.errCode=0)}})},Au=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("getBLEDeviceCharacteristics",e,{deviceId:"",serviceId:""})&&(0,d.IN)("getBLEDeviceCharacteristics",Object.assign({},e,{serviceId:B.wZ?e.serviceId.toUpperCase():e.serviceId}),{beforeSuccess:function(e){Array.isArray(e.characteristics)||(e.characteristics=[])}})},Pu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("notifyBLECharacteristicValueChanged",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&(0,d.IN)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:B.wZ?e.serviceId.toUpperCase():e.serviceId,characteristicId:B.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{})},Du=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("notifyBLECharacteristicValueChange",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&(0,d.IN)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:B.wZ?e.serviceId.toUpperCase():e.serviceId,characteristicId:B.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{beforeAll:function(e){void 0!==e.errCode&&(e.errCode=Number(e.errCode)),e.errMsg=e.errMsg.replace("notifyBLECharacteristicValueChanged","notifyBLECharacteristicValueChange")}})},Ou=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("readBLECharacteristicValue",e,{deviceId:"",serviceId:"",characteristicId:""})&&(0,d.IN)("readBLECharacteristicValue",Object.assign({},e,{serviceId:B.wZ?e.serviceId.toUpperCase():e.serviceId,characteristicId:B.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{})},Nu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("writeBLECharacteristicValue",e,{value:new ArrayBuffer(0),deviceId:"",serviceId:"",characteristicId:""})&&(0,d.IN)("writeBLECharacteristicValue",Object.assign({},e,{value:(0,p.sM)(e.value),serviceId:e.serviceId.toUpperCase(),characteristicId:B.wZ?e.characteristicId.toUpperCase():e.characteristicId}),{})},Ru=function(e){(0,d.jQ)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChanged callback function"))},Mu=function(){(0,d.jQ)("onBLEConnectionStateChanged",(function(){}))},Lu=function(e){(0,d.jQ)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChange callback function"))},Bu=function(){(0,d.jQ)("onBLEConnectionStateChanged",(function(){}))},Fu=function(e){(0,d.jQ)("onBLECharacteristicValueChange",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof t.value&&(t.value=(0,p.RG)(t.value)),__errorTracer__.surroundThirdByTryCatch(e,"at onBLECharacteristicValueChange callback function")(t)}))},ju=function(){(0,d.jQ)("onBLECharacteristicValueChange",(function(){}))},Wu=function(e){(0,d.jQ)("onBluetoothDeviceFound",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];Array.isArray(t.devices)?n=t.devices:n.push(t),n=n.map((function(e){try{e.advertisData=(0,p.RG)(e.advertisData)}catch(e){}try{var t=e.serviceData||{};Object.keys(t).forEach((function(e){t[e]&&(t[e]=(0,p.RG)(t[e]))}))}catch(e){}return e})),__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothDeviceFound callback function")({devices:n})}))},Uu=function(){(0,d.jQ)("onBluetoothDeviceFound",(function(){}))},Vu=function(e){(0,d.jQ)("onBluetoothAdapterStateChange",__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothAdapterStateChange callback function"))},Gu=function(){(0,d.jQ)("onBluetoothAdapterStateChange",(function(){}))},Hu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.wZ?(0,d.r3)("setBLEMTU",e,{deviceId:"",mtu:0})&&(0,d.IN)("setBLEMTU",e,{}):(0,d.YG)("setBLEMTU",e,"can only be invoked on android")},Zu=function(e,t){return Object.assign({},e,_a()({},t,(0,p.sM)(e[t])))},qu=new y.Z,zu=new WeakMap,Yu=new WeakMap,Ku=function(e,t){var n="".concat(zu.get(this),"_on").concat(e),r=function(n){__errorTracer__.surroundThirdByTryCatch(t,"at BLEPeripheralServer.on".concat(e," callback function"))(n)};Yu.get(this).set(t,r),qu.on(n,r)},Ju=function(e,t){var n="".concat(zu.get(this),"_on").concat(e),r=Yu.get(this);if((0,W.mf)(t)){var i=r.get(t);(0,W.mf)(i)&&(r.delete(t),qu.off(n,i))}else Yu.set(this,new WeakMap),qu.removeAllListeners(n)},$u=(0,on.s)("CharacteristicReadRequest");$u.onMethod,$u.offMethod;(0,d.jQ)("onCharacteristicReadRequest",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qu.emit("".concat(e.serverId,"_onCharacteristicReadRequest"),e),$u.emit(e)}));var Xu=(0,on.s)("CharacteristicWriteRequest");Xu.onMethod,Xu.offMethod;(0,d.jQ)("onCharacteristicWriteRequest",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof e.value&&(e.value=(0,p.RG)(e.value)),qu.emit("".concat(e.serverId,"_onCharacteristicWriteRequest"),e),Xu.emit(e)}));var Qu=(0,on.s)("CharacteristicSubscribed");Qu.onMethod,Qu.offMethod;(0,d.jQ)("onCharacteristicSubscribed",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qu.emit("".concat(e.serverId,"_onCharacteristicSubscribed"),e),Qu.emit(e)}));var el=(0,on.s)("CharacteristicUnsubscribed");el.onMethod,el.offMethod;(0,d.jQ)("onCharacteristicUnsubscribed",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qu.emit("".concat(e.serverId,"_onCharacteristicUnsubscribed"),e),el.emit(e)}));var tl=(qc=function(){function e(t){var n=this;R()(this,e),this.serverId=t,this.services=[],zu.set(this,t),Yu.set(this,new WeakMap);["CharacteristicReadRequest","CharacteristicWriteRequest","CharacteristicSubscribed","CharacteristicUnsubscribed"].forEach((function(e){n["on".concat(e)]=function(t){Ku.call(n,e,t)},n["off".concat(e)]=function(t){Ju.call(n,e,t)}}))}return P()(e,[{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=Object.assign({},e,{serverId:this.serverId});(0,d.IN)("closeBLEPeripheralServer",n,{beforeSuccess:function(){t.serverId="",zu.delete(t)}})}},{key:"addService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("BLEPeripheralServer.addService",e,{service:{}})){var t=e.service.characteristics||[];t=t.map((function(e){var t=e.descriptors||[];return t=t.map((function(e){return Zu(e,"value")})),Object.assign({},e,{value:(0,p.sM)(e.value),descriptors:t})}));var n=Object.assign({},e,{serverId:this.serverId,service:{uuid:e.service.uuid,characteristics:t}}),r=this;(0,d.IN)("addBLEPeripheralService",n,{beforeSuccess:function(){r.services.push(e.service.uuid)}})}}},{key:"removeService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("BLEPeripheralServer.removeService",e,{serviceId:""})){var t=this,n=Object.assign({},e,{serverId:this.serverId});(0,d.IN)("removeBLEPeripheralService",n,{beforeSuccess:function(){var n=t.services.indexOf(e.serviceId);n>=0&&t.services.splice(n,1)}})}}},{key:"startAdvertising",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.advertiseRequest||{},n=t.manufacturerData||[];n=n.map((function(e){return Zu(e,"manufacturerSpecificData")}));var r=Object.assign({},t,{manufacturerData:n}),i=Object.assign({},e,{serverId:this.serverId,advertiseRequest:r,powerLevel:e.powerLevel||"medium"});(0,d.IN)("startBLEPeripheralAdvertising",i,{})}},{key:"stopAdvertising",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{serverId:this.serverId});(0,d.IN)("stopBLEPeripheralAdvertising",t,{})}},{key:"writeCharacteristicValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{serverId:this.serverId,value:(0,p.sM)(e.value)});(0,d.IN)("writeBLEPeripheralCharacteristicValue",t,{})}}]),e}(),O()(qc.prototype,"close",[M.Qu],Object.getOwnPropertyDescriptor(qc.prototype,"close"),qc.prototype),O()(qc.prototype,"addService",[M.Qu],Object.getOwnPropertyDescriptor(qc.prototype,"addService"),qc.prototype),O()(qc.prototype,"removeService",[M.Qu],Object.getOwnPropertyDescriptor(qc.prototype,"removeService"),qc.prototype),O()(qc.prototype,"startAdvertising",[M.Qu],Object.getOwnPropertyDescriptor(qc.prototype,"startAdvertising"),qc.prototype),O()(qc.prototype,"stopAdvertising",[M.Qu],Object.getOwnPropertyDescriptor(qc.prototype,"stopAdvertising"),qc.prototype),O()(qc.prototype,"writeCharacteristicValue",[M.Qu],Object.getOwnPropertyDescriptor(qc.prototype,"writeCharacteristicValue"),qc.prototype),qc),nl=(0,on.s)("BLEPeripheralConnectionStateChanged"),rl=nl.onMethod,il=nl.offMethod;(0,d.jQ)("onBLEPeripheralConnectionStateChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nl.emit(e)}));var ol=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("makeBluetoothPair",e,{deviceId:""})){var t=Object.assign({},e);(0,W.eP)(e.pin||null)&&(t.pin=(0,p.sM)(e.pin)),(0,d.IN)("makeBluetoothPair",t)}},al=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("startWifi",e,{})},sl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("stopWifi",e,{})},cl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("getWifiList",e,{})},ul=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("getConnectedWifi",e,{})},ll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("connectWifi",e,{SSID:"",password:""})){var t=Object.assign({maunal:!1},e);(0,d.IN)("connectWifi",t,{})}},dl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.cj?(0,d.r3)("presetWifiList",e,{wifiList:[]})&&(0,d.IN)("presetWifiList",e,{}):(0,d.YG)("presetWifiList",e,"presetWifiList must be invoked on iOS platform")},fl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.cj?(0,d.r3)("setWifiList",e,{wifiList:[]})&&(0,d.IN)("setWifiList",e,{}):(0,d.YG)("setWifiList",e,"setWifiList must be invoked on iOS platform")},pl=function(e){(0,d.jQ)("onGetWifiList",__errorTracer__.surroundThirdByTryCatch(e,"at onGetWifiList callback function"))},hl=function(){(0,d.jQ)("onGetWifiList",(function(){}))},gl=function(e){(0,d.jQ)("onWifiConnected",__errorTracer__.surroundThirdByTryCatch(e,"at onWifiConnected callback function"))},vl=function(){(0,d.jQ)("onWifiConnected",(function(){}))},_l=null,ml=["none","low","high"],yl=function(e){"function"==typeof e&&(_l=e)};(0,d.jQ)("onEvaluateWifi",__errorTracer__.surroundThirdByTryCatch((function(e){var t,n={SSID:e.wifi.SSID,BSSID:e.wifi.BSSID,confidence:"none"};if("function"==typeof _l)try{t=_l(e)||{}}finally{ml.find((function(e){return e===t.confidence}))&&(n.confidence=t.confidence),(0,d.IN)("evaluateWifi",n,{})}}),"at onEvaluateWifi callback function"));var bl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("getHCEState",e,{})},wl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("startHCE",e,{})},Il=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("stopHCE",e,{})},Sl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("sendHCEMessage",e,{data:new ArrayBuffer(0)})&&(0,d.IN)("sendHCEMessage",Object.assign({},e,{data:(0,p.sM)(e.data)}),{})},Cl=function(e){(0,d.jQ)("onHCEMessage",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof t.data&&(t.data=(0,p.RG)(t.data)),__errorTracer__.surroundThirdByTryCatch(e,"at onHCEMessage callback function")(t)}))},Tl=function(){(0,d.jQ)("onHCEMessage",(function(){}))},El=function(){},kl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Reporter.surroundThirdByTryCatch(e.success||El,"at api ".concat(t," success callback function")),r=Reporter.surroundThirdByTryCatch(e.fail||El,"at api ".concat(t," fail callback function")),i=Reporter.surroundThirdByTryCatch(e.complete||El,"at api ".concat(t," complete callback function"));return E()(E()({},e),{},{success:n,fail:r,complete:i})},xl=function(e,t,n){var r=void 0===n?{errMsg:t}:{errMsg:t,errCode:n};e.fail(r),e.complete(r)},Al=new WeakMap,Pl=new y.y,Dl="onNFCDiscovered",Ol="onNdefMessageRead";(0,b.n)("onNFCDiscovered",(function(e){Pl.emit(Dl,e)})),(0,b.n)("onNdefMessageRead",(function(e){Pl.emit(Ol,e)}));var Nl={ndef:"NDEF",nfcA:"NFC-A",nfcB:"NFC-B",isoDep:"ISO-DEP",nfcF:"NFC-F",nfcV:"NFC-V",mifareClassic:"MIFARE Classic",mifareUltralight:"MIFARE Ultralight"};function Rl(e,t){if(!this[e]){var n=t();return Object.defineProperty(this,e,{enumerable:!1,configurable:!1,writable:!1,value:n}),n}return this[e]}var Ml=function(){function e(){R()(this,e),this.tech=Nl,Object.defineProperty(this,"_singleton",{enumerable:!1,configurable:!1,writable:!1})}return P()(e,[{key:"startDiscovery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=kl(e,"NFCAdapter#startDiscovery"),B.wZ?(0,d.IN)("isSupportNFC",{success:function(){(0,d.IN)("startNFCDiscovery",{success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("startNFCDiscovery","startDiscovery"))}})},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("isSupportNFC","startDiscovery"))}}):xl(e,"startDiscovery:fail current platform is not supported")}},{key:"stopDiscovery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=kl(e,"NFCAdapter#stopDiscovery"),B.wZ?(0,d.IN)("stopNFCDiscovery",{success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("stopNFCDiscovery","stopDiscovery"))}}):xl(e,"stopDiscovery:fail current platform is not supported")}},{key:"onDiscovered",value:function(e){if("function"==typeof e){var t=Reporter.surroundThirdByTryCatch(e,"at NFCAdapter#onDiscovered callback function"),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.messages&&(0,W.kJ)(e.messages)){for(var n=[],r=e.messages||[],i=0;i<r.length;++i){for(var o={records:[]},a=r[i]||[],s=0;s<a.length;++s){var c="payload-".concat(i,"-").concat(s),u=e[c];delete e[c],a[s].payload=u,a[s].id=(0,p.RG)(a[s].id),a[s].type=(0,p.RG)(a[s].type),o.records.push(a[s])}n.push(o)}e.messages=n}e.id&&"string"==typeof e.id&&(e.id=(0,p.RG)(e.id)),t(e)};Pl.on(Dl,n),Al.set(e,n)}}},{key:"offDiscovered",value:function(e){if("function"==typeof e){var t=Al.get(e);t&&Pl.off(Dl,t)}}},{key:"getNdef",value:function(){return Rl.call(this,"_ndef",(function(){return new Bl}))}},{key:"getNfcA",value:function(){return Rl.call(this,"_nfcA",(function(){return new jl}))}},{key:"getNfcB",value:function(){return Rl.call(this,"_nfcB",(function(){return new Wl}))}},{key:"getIsoDep",value:function(){return Rl.call(this,"_isoDep",(function(){return new Ul}))}},{key:"getNfcF",value:function(){return Rl.call(this,"_nfcF",(function(){return new Vl}))}},{key:"getNfcV",value:function(){return Rl.call(this,"_nfcV",(function(){return new Gl}))}},{key:"getMifareClassic",value:function(){return Rl.call(this,"_mirafeClassic",(function(){return new Hl}))}},{key:"getMifareUltralight",value:function(){return Rl.call(this,"_mifareUltralight",(function(){return new Zl}))}}]),e}(),Ll=function(){function e(t){R()(this,e),this.techType=t}return P()(e,[{key:"connect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=kl(e,"".concat(this.techType,"#connect")),B.wZ?(0,d.IN)("NFCConnect",{tech:this.techType,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCConnect","connect"))}}):xl(e,"connect:fail current platform is not supported")}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=kl(e,"".concat(this.techType,"#close")),B.wZ?(0,d.IN)("NFCClose",{tech:this.techType,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCClose","close"))}}):xl(e,"close:fail current platform is not supported")}},{key:"setTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=kl(e,"".concat(this.techType,"#setTimeout")),B.wZ?e.timeout?(0,d.IN)("NFCSetTimeout",{tech:this.techType,timeout:parseInt(e.timeout,10),success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCSetTimeout","setTimeout"))}}):xl(e,"timeout should be specified"):xl(e,"setTimeout:fail current platform is not supported")}},{key:"isConnected",value:function(e){e=kl(e,"".concat(this.techType,"#isConnected")),B.wZ?(0,d.IN)("isNFCTechConnected",{tech:this.techType,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("isNFCTechConnected","isConnected"))}}):xl(e,"isConnected:fail current platform is not supported")}}]),e}(),Bl=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.call(this,"NDEF")}return P()(n,[{key:"onNdefMessage",value:function(e){if("function"==typeof e){var t=Reporter.surroundThirdByTryCatch(e,"at Ndef#onReadNdefMessage callback function"),n=function(e){for(var n=e.messages||[],r=0;r<n.length;++r)for(var i=n[r]||[],o=0;o<i.length;++o){var a="payload-".concat(r,"-").concat(o),s=e[a];i[o].payload=s,delete e[a]}t(e)};Pl.on(Ol,n),Al.set(e,n)}}},{key:"offNdefMessage",value:function(e){if("function"==typeof e){var t=Al.get(e);t&&Pl.off(Ol,t)}}},{key:"writeNdefMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e=kl(e,"Ndef#writeNdefMessage"),B.wZ){if(e.uris)return(0,W.kJ)(e.uris)?void(0,d.IN)("writeNdefMessage",{uris:e.uris,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("writeNdefMessage","writeNdefMessage"))}}):void xl(e,"writeNdefMessage: urils should be type of Array");if(e.texts)return(0,W.kJ)(e.texts)?void(0,d.IN)("writeNdefMessage",{texts:e.texts,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("writeNdefMessage","writeNdefMessage"))}}):void xl(e,"writeNdefMessage: texts should be type of Array");if(e.records){if(!(0,W.kJ)(e.records))return void xl(e,"writeNdefMessage: records should be type of Array");for(var t={},n=0;n<e.records.length;++n){var r=e.records[n];if(!(0,W.eP)(r.id))return void xl(e,"writeNdefMessage: record.id should be type of ArrayBuffer");if(!(0,W.eP)(r.type))return void xl(e,"writeNdefMessage: record.type should be type of ArrayBuffer");r.id=(0,p.sM)(r.id),r.type=(0,p.sM)(r.type);var i="payload-".concat(n);t[i]=r.payload,delete r.payload}(0,d.IN)("writeNdefMessage",E()(E()({records:e.records},t),{},{success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}}),{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("writeNdefMessage","writeNdefMessage"))}})}else xl(e,"writeNdefMessage: expect parameter contains one of uris, texts, records")}else xl(e,"writeNdefMessage:fail current platform is not supported")}}]),n}(Ll),Fl=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.apply(this,arguments)}return P()(n,[{key:"getMaxTransceiveLength",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=kl(e,"".concat(this.techType,"#getMaxTransceiveLength")),B.wZ?(0,d.IN)("NFCGetMaxTransceiveLength",{tech:this.techType,success:e.success,fail:e.fail,complete:e.complete},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetMaxTransceiveLength","getMaxTransceiveLength"))}}):xl(e,"getMaxTransceiveLength:fail current platform is not supported")}},{key:"transceive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=kl(e,"".concat(this.techType,"#transceive")),B.wZ?e.data?(0,W.eP)(e.data)?(0,d.IN)("NFCTransceive",{tech:this.techType,data:e.data,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCTransceive","transceive"))}}):xl(e,"transceive: data should be type of ArrayBuffer"):xl(e,"transceive: data field is required"):xl(e,"transceive:fail current platform is not supported")}}]),n}(Ll),jl=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.call(this,"NFC-A")}return P()(n,[{key:"getAtqa",value:function(e){e=kl(e,"".concat(this.techType,"#getAtqa")),B.wZ?(0,d.IN)("NFCGetAtqa",{success:function(t){t&&t.atqa?e.success({errMsg:t.errMsg,atqa:(0,p.RG)(t.atqa)}):e.success({errMsg:t.errMsg,atqa:null})},fail:function(t){e.fail(t)},complete:function(t){t&&t.atqa?e.complete({errMsg:t.errMsg,atqa:(0,p.RG)(t.atqa)}):e.complete({errMsg:t.errMsg,atqa:null})}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetAtqa","getAtqa"))}}):xl(e,"getAtqa:fail current platform is not supported")}},{key:"getSak",value:function(e){e=kl(e,"".concat(this.techType,"#getSak")),B.wZ?(0,d.IN)("NFCGetSak",e,{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetSak","getSak"))}}):xl(e,"getSak:fail current platform is not supported")}}]),n}(Fl),Wl=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.call(this,"NFC-B")}return P()(n,[{key:"setTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=kl(e,"".concat(this.techType,"#setTimeout")),xl(e,"setTimeout: function not support",13024)}}]),n}(Fl),Ul=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.call(this,"ISO-DEP")}return P()(n,[{key:"getHistoricalBytes",value:function(e){e=kl(e,"".concat(this.techType,"#getHistoricalBytes")),B.wZ?(0,d.IN)("NFCGetHistoricalBytes",{success:function(t){t&&t.histBytes?e.success({errMsg:t.errMsg,histBytes:(0,p.RG)(t.histBytes)}):e.success({errMsg:t.errMsg,histBytes:null})},fail:function(t){e.fail(t)},complete:function(t){t&&t.histBytes?e.complete({errMsg:t.errMsg,histBytes:(0,p.RG)(t.histBytes)}):e.complete({errMsg:t.errMsg,histBytes:null})}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetHistoricalBytes","getHistoricalBytes"))}}):xl(e,"getHistoricalBytes:fail current platform is not supported")}}]),n}(Fl),Vl=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.call(this,"NFC-F")}return n}(Fl),Gl=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.call(this,"NFC-V")}return P()(n,[{key:"setTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=kl(e,"".concat(this.techType,"#setTimeout")),xl(e,"setTimeout: function not support",13024)}}]),n}(Fl),Hl=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.call(this,"MIFARE Classic")}return n}(Fl),Zl=function(e){I()(n,e);var t=C()(n);function n(){return R()(this,n),t.call(this,"MIFARE Ultralight")}return n}(Fl),ql=null;function zl(){return ql||(ql=new Ml)}var Yl=(0,on.s)("local-service-found"),Kl=(0,on.s)("local-service-lost"),Jl=(0,on.s)("local-service-discovery"),$l=(0,on.s)("local-service-resolve-fail"),Xl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.IN)("operateLocalServicesScan",Object.assign({},e,{action:"start"}),{beforeSuccess:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery")},beforeFail:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery")}})},Ql=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.IN)("operateLocalServicesScan",Object.assign({},e,{action:"stop"}),{beforeSuccess:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery")},beforeFail:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery")}})};(0,f.jQ)("onLocalServiceEvent",(function(e){var t=Object.assign({},e);switch("object"===c()(t.attributes)&&null!==t.attributes&&Object.keys(t.attributes).forEach((function(e){var n=t.attributes[e];t.attributes[e]=(0,p.RG)(n)})),delete t.event,e.event){case"found":Yl.emit(t);break;case"lost":Kl.emit(t);break;case"stopScan":delete t.serviceType,delete t.serviceName,delete t.ip,delete t.port,Jl.emit(t);break;case"resolveFail":delete t.ip,delete t.port,$l.emit(t)}}));var ed=Yl.onMethod,td=Yl.offMethod,nd=Kl.onMethod,rd=Kl.offMethod,id=Jl.onMethod,od=Jl.offMethod,ad=$l.onMethod,sd=$l.offMethod,cd=(0,on.s)("gyroscopeChange"),ud=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;(0,d.IN)("enableGyroscope",(0,p.f0)(e,{interval:n,enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableGyroscope","startGyroscope")}})},ld=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("enableGyroscope",(0,p.f0)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableGyroscope","stopGyroscope")}})},dd=cd.onMethod,fd=cd.offMethod;(0,d.jQ)("onGyroscopeChange",(function(e){cd.emit(e)}));var pd=(0,on.s)("deviceMotionChange"),hd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;(0,d.IN)("enableDeviceMotionChangeListening",(0,p.f0)(e,{interval:n,enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","startDeviceMotionListening")}})},gd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("enableDeviceMotionChangeListening",(0,p.f0)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","stopDeviceMotionListening")}})},vd=pd.onMethod,_d=pd.offMethod;(0,d.jQ)("onDeviceMotionChange",(function(e){pd.emit(e)}));var md=function(e){var t=new Date(1e3*e);return t.setHours(0,0,0),t.valueOf()/1e3},yd=function(e){var t=new Date(1e3*e);return t.setSeconds(0),t.valueOf()/1e3},bd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("addPhoneCalendar",e,{})){var t=e.allDay?md(e.startTime):yd(e.startTime),n=e.endTime?e.allDay?md(e.endTime):yd(e.endTime):void 0;(0,d.IN)("addPhoneCalendar",E()(E()({allDay:!1,alarm:!0},e),{},{startTime:t,endTime:n,repeat:!1}))}},wd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,wo.J)("addPhoneRepeatCalendar");if(t){if((0,d.r3)("addPhoneCalendar",e,{})){var n=e.allDay?md(e.startTime):yd(e.startTime),r=e.endTime?e.allDay?md(e.endTime):yd(e.endTime):void 0;(0,d.IN)("addPhoneCalendar",E()(E()({allDay:!1,alarm:!0,repeatInterval:"month"},e),{},{startTime:n,endTime:r,repeat:!0}))}}else(0,d.YG)("addPhoneCalendar",e,"permission denied")},Id={};function Sd(){return new Promise((function(e,t){var n=Dc._getCurrentNetworkType();n?e(n):Dc.getNetworkType({success:function(n){n.networkType?e(n.networkType):t(new Error("get network type failed."))},fail:t})}))}fe.Z.onReady((function(){(0,Se.q)((function(e){var t=e.path;if(fe.Z.preloadRule&&fe.Z.preloadRule[t])return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Array.isArray(e.packages))return Promise.reject(new Error("packages must be an array."));"all"!==e.network&&(e.network="wifi"),console.info("preloadSubpackages: "+e.packages.join(", "));var t=e.packages.filter((function(e){return!(e in Id)}));return("all"!==e.network?Sd().then((function(e){if("wifi"!==e.toLowerCase())return Promise.reject(new Error("network type does not match, '".concat(e,"' !== 'wifi'")))}),(function(){return Promise.reject(new Error("get network type failed."))})):Promise.resolve()).then((function(){return Promise.all(t.map((function(e){return new Promise((function(n){xc({name:e,success:function(){Id[e]=!0,n(t)},fail:function(t){var r=new Error(t.errMsg.replace("loadSubpackage:fail",""));r.packageName=e,n(r)}})}))}))).then((function(e){if((e=e.filter((function(e){return e instanceof Error}))).length>0){var t=new Error("preload subpackages failed.");return t._detail=e,Promise.reject(t)}}))}))}(fe.Z.preloadRule[t]).then((function(){console.info("preloadSubpackages: success")}),(function(e){e._detail?(console.group("preloadSubpackages fail: ".concat(e.message)),e._detail.forEach((function(e){console.warn("".concat(e.packageName,": ").concat(e.message))})),console.groupEnd()):console.warn("preloadSubpackages fail: ".concat(e.message))}))}))}));var Cd=function(e){_c.on("success",e)},Td=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("uploadToCommonCDN",e,{})},Ed=n(9954),kd=n(6589),xd=[{APINames:[/^connectSocket/],ios:{app:1,game:1},android:{app:1,game:1},version:1},{APINames:[/^request/,/^downloadFile/],ios:{app:"clicfg_wegame_ios_use_cronet_request",game:"clicfg_wegame_ios_use_cronet_request"},android:{app:1,game:1},version:1},{APINames:[/^downloadFile/],ios:{app:"clicfg_appbrand_ios_native_download",game:"clicfg_appbrand_ios_native_download"},android:{app:0,game:0},version:2},{APINames:[/^connectSocket/],ios:{app:"clicfg_appbrand_ios_native_socket_wcwss",game:"clicfg_appbrand_ios_native_socket_wcwss"},android:{app:2,game:2},version:2}];fe.Z.onReady((function(){if((0,Ce.aI)()||(0,Ce.N0)()){var e=(0,Ce.aI)()?"game":"app";xd.forEach((function(t){var n=t.APINames,r=t.version,i=t[B.iw];i&&i[e]&&function(e,t,n){"[getNetworkAPIABTestConfig] experimentId=".concat(e,", APINames=").concat(JSON.stringify(t),", version=").concat(n),"string"==typeof e?(0,Ed.b)({experimentId:e,experimentType:"Expt",success:function(r){var i=r.testConfig;"[getNetworkAPIABTestConfig][success] experimentId=".concat(e,", APINames=").concat(JSON.stringify(t),", version=").concat(n),1===Number(i)&&t.forEach((function(e){"[setAPIVersion]APIName=".concat(e,", version=").concat(n),(0,kd.T)(e,n)}))}}):"number"==typeof e&&t.forEach((function(t){"[setAPIVersion]APIName=".concat(t,", version=").concat(e),(0,kd.T)(t,e)}))}(i[e],n,r)}))}}));var Ad=n(5212),Pd=n(6989);(0,Pd.b)("Upload",{maxTaskCount:10,functionName:"uploadFile"}),fe.Z.onReady((function(){try{"number"==typeof fe.Z.wxAppInfo.maxUploadConcurrent&&(0,Pd.b)("Upload",{maxTaskCount:fe.Z.wxAppInfo.maxUploadConcurrent})}catch(e){}}));const Dd=function(e){I()(n,e);var t=C()(n);function n(e){return R()(this,n),t.call(this,e,{taskType:"Upload",beforeSend:function(t){return t.filePath=e.filePath,t.name=e.name,t.formData=e.formData,t},beforeSuccess:function(e){return e}})}return n}(Pd.o);var Od,Nd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("uploadFile",t,{url:"",filePath:"",name:""})){"object"!==c()(t.header)&&void 0!==t.header&&(console.warn("uploadFile: header must be an object"),delete t.header),"object"!==c()(t.formData)&&void 0!==t.formData&&(console.warn("uploadFile: formData must be an object"),delete t.formData);var n={},r={};t.header&&(n=(0,p.Nf)(t.header)),t.formData&&(r=(0,p.Nf)(t.formData));try{var i=new Dd(Object.assign({},t,{header:n,formData:r,__skipDomainCheck__:e.__skipDomainCheck__}));return i}catch(e){return void(0,d.YG)("uploadFile",t,e.message)}}}},Rd=Nd(),Md=Nd({__skipDomainCheck__:!0}),Ld=n(4657),Bd=n(5405),Fd=0,jd=new WeakMap,Wd=new WeakMap,Ud=new WeakMap,Vd=new WeakMap,Gd={},Hd=new Ld.Q;(0,d.jQ)("onSocketTaskStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=e.socketTaskId,r=Gd[n];if(r){var i=jd.get(r);if(delete e.state,delete e.socketTaskId,r){if("open"===t){r.readyState=r.OPEN;var o=Ud.get(r).url,a=1,s=Date.now()-Vd.get(r),c="",u=e.statusCode,l=Ud.get(r).__skipDomainCheck__,d=0,f=e.profile;(0,Bd.P)("connectSocket",o,a,s,c,u,l,d,0,f)}else"close"!==t&&"error"!==t||(r.readyState=r.CLOSED);"message"!==t&&"onSocketTaskStateChange, state=".concat(t,", socketTaskId=").concat(n),Hd.emit("".concat(i).concat(t),e),Hd.emit("onSocket".concat(t[0].toUpperCase()+t.substr(1)),e,r),"close"===t&&(delete Gd[n],Hd.removeAllListeners("".concat(i,"open")),Hd.removeAllListeners("".concat(i,"close")),Hd.removeAllListeners("".concat(i,"error")),Hd.removeAllListeners("".concat(i,"message")))}}}));var Zd=function(e,t){Hd.on("".concat(jd.get(this)).concat(e),__errorTracer__.surroundThirdByTryCatch(t,"at socketTask.on".concat(e," callback function")))},qd=(Od=function(){function e(t,n){var r=this;R()(this,e),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING;var i,o=Fd++;jd.set(this,o),Ud.set(this,n),Object.defineProperty(this,"__socketInstance__",{value:t,writable:!1,configurable:!1,enumerable:!1}),["success","fail","complete"].forEach((function(e){"function"==typeof n[e]&&(n[e]=__errorTracer__.surroundThirdByTryCatch(n[e],"at api connectSocket ".concat(e," callback function")))})),Vd.set(this,Date.now()),(0,W.hj)(n.timeout)||(n.timeout=0);var a=function(){(0,d.IN)("createSocketTask",n,{beforeAll:function(e){e.errMsg=e.errMsg.replace("createSocketTask","connectSocket")},beforeSuccess:function(e){Wd.set(r,e.socketTaskId),Gd[e.socketTaskId]=r},beforeFail:function(e){var t=n.url,o=Date.now()-Vd.get(r),a=n.__skipDomainCheck__;i=e.errMsg,(0,Bd.P)("connectSocket",t,2,o,i,"",a,0)}}),i&&(r.readyState=r.CLOSED,setTimeout((function(){Hd.emit("".concat(o,"error"),{errMsg:i})}),0))};(0,W.mf)(n.customCheck)?n.customCheck(n,(function(e){e?((0,d.YG)("connectSocket",n,e),r.readyState=r.CLOSED,setTimeout((function(){Hd.emit("".concat(o,"error"),{errMsg:e})}),0)):a()})):a()}return P()(e,[{key:"send",value:function(e){var t=this;if(this.readyState===this.OPEN){var n=Date.now();(0,d.IN)("operateSocketTask",Object.assign({},e,{operationType:"send",socketTaskId:Wd.get(this)}),{beforeAll:function(r){if(r.errMsg=r.errMsg.replace("operateSocketTask","sendSocketMessage"),Math.random()>.99){var i=Ud.get(t).url,o=r.errMsg.indexOf("ok")>-1?1:2,a=Date.now()-n,s=r.errMsg,c=Ud.get(t).__skipDomainCheck__,u=(0,Ce.Y6)(e.data);(0,Bd.P)("sendSocketMessage",i,o,a,s,"",c,u)}}})}else(0,d.YG)("SocketTask.send",e,"SocketTask.readyState is not OPEN")}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("operateSocketTask",Object.assign({code:1e3},e,{operationType:"close",socketTaskId:Wd.get(this)}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateSocketTask","closeSocket")}})}},{key:"onOpen",value:function(e){Zd.call(this,"open",e)}},{key:"onClose",value:function(e){Zd.call(this,"close",e)}},{key:"onMessage",value:function(e){Zd.call(this,"message",e)}},{key:"onError",value:function(e){Zd.call(this,"error",e)}}]),e}(),O()(Od.prototype,"send",[M.Qu],Object.getOwnPropertyDescriptor(Od.prototype,"send"),Od.prototype),O()(Od.prototype,"close",[M.Qu],Object.getOwnPropertyDescriptor(Od.prototype,"close"),Od.prototype),Od),zd=n(8072),Yd=5;fe.Z.onReady((function(){fe.Z.wxAppInfo&&fe.Z.wxAppInfo.maxWebsocketConnect&&(Yd=fe.Z.wxAppInfo.maxWebsocketConnect)}));var Kd=Ut.Z.WSS,Jd=new WeakMap,$d=new WeakMap,Xd=new WeakMap,Qd={},ef=new Ld.Q,tf=0,nf=0;function rf(e,t,n){t.errMsg=t.errMsg||"ok";var r="ok"===t.errMsg;(0,d.FE)({name:e,args:n,success:r,errMsg:t.errMsg})}var of=function(){function e(t,n){var r=this;R()(this,e),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING,Object.defineProperty(this,"__socketInstance__",{value:t,writable:!1,configurable:!1,enumerable:!1});var i=tf++,o=new Kd;Jd.set(this,n),$d.set(this,o),Xd.set(this,i);var a=Date.now();o.onopen=function(e,t){r.readyState!==r.CLOSED&&(nf++,r.readyState=r.OPEN,ef.emit("".concat(i,"open"),{header:e,profile:t}),ef.emit("onSocketOpen",{header:e,profile:t},r),(0,Bd.P)("connectSocket",n.url,1,Date.now()-a,"","",n.__skipDomainCheck__,0,0,t))},o.onclose=function(e,t){"[SocketJSBinding][onclose] code=".concat(e,", reason=").concat(t),nf--,r.readyState=r.CLOSED,ef.emit("".concat(i,"close"),{code:e,reason:t}),ef.emit("onSocketClose",{code:e,reason:t},r)},o.onmessage=function(e){r.readyState!==r.CLOSED&&((0,W.eP)(e)&&(e.__proto__=ArrayBuffer.prototype),ef.emit("".concat(i,"message"),{data:e}),ef.emit("onSocketMessage",{data:e},r))},o.onerror=function(e,t){"[SocketJSBinding][onerror] errCode=".concat(e," errMsg=").concat(t),nf--,r.readyState=r.CLOSED,setTimeout((function(){ef.emit("".concat(i,"error"),{errCode:e,errMsg:t}),ef.emit("onSocketError",{errCode:e,errMsg:t},r)}),0)};var s=function(){var e={errMsg:""};nf>=Yd?("countConnect(".concat(nf,") >= maxWebsocketConnect(").concat(Yd,")"),r.readyState=r.CLOSED,e.errMsg="fail reach max websocket connect count ".concat(Yd)):(e.errMsg=o.connect((0,Ce.v7)(n,["url","header","timeout","protocols","tcpNoDelay","perMessageDeflate","enableProfile"])),"string"==typeof e.errMsg&&""!==e.errMsg||(e.errMsg="ok")),"ws.connect ret=".concat(e.errMsg),"ok"===e.errMsg&&(Qd[i]=r),rf("connectSocket",e,n)};(0,W.mf)(n.customCheck)?n.customCheck(n,(function(e){e?rf("connectSocket",{errMsg:e},n):s()})):(s(),(0,zd.k)({api:"websocket",url:n.url}).then((function(e){if(n.url,!(n.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost))throw new Error("fail:url not in domain list")})).catch((function(e){r.readyState=r.CLOSED;var t=e.message||e.errMsg;ef.emit("".concat(i,"error"),{errMsg:t}),ef.emit("onSocketError",{errMsg:t},r)})))}return P()(e,[{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={errMsg:$d.get(this).send(e.data)};(e.success||e.fail||e.complete)&&rf("sendSocketMessage",t,e)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.readyState;var t={errMsg:$d.get(this).close((0,W.hj)(e.code)?e.code:1e3,e.reason)};rf("closeSocket",t,e)}},{key:"onOpen",value:function(e){ef.on("".concat(Xd.get(this),"open"),__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onOpen callback function"))}},{key:"onClose",value:function(e){ef.on("".concat(Xd.get(this),"close"),__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onClose callback function"))}},{key:"onMessage",value:function(e){ef.on("".concat(Xd.get(this),"message"),__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onMessage callback function"))}},{key:"onError",value:function(e){ef.on("".concat(Xd.get(this),"error"),__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onError callback function"))}}]),e}(),af=qd,sf=Gd;Ut.Z.WSS&&fe.Z.onReady((function(){var e=!1,t=B.cj?"clicfg_appbrand_ios_native_socket_wcwss":1;1===t?e=!0:(0,Ed.b)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&(e=!0)}});var n=(0,wo.J)("bindingWebSocket");e||n?(af=of,sf=Qd,"binding socket, abtest: ".concat(e,", permission: ").concat(n)):"jsapi socket, abtest: ".concat(e,", permission: ").concat(n)}));var cf=new WeakMap,uf={};function lf(e,t){return uf[t]||(uf[t]=new WeakMap,Hd.on("onSocket".concat(t),df(t)),ef.on("onSocket".concat(t),df(t))),function(n){(0,d.r3)("onSocket".concat(t),n,M.ZT)&&uf[t].set(e,n)}}function df(e){return function(t,n){var r=n.__socketInstance__,i=uf[e].get(r),o=cf.get(r);"Message"!==e&&("wx.onSocket".concat(e,".callback"),"socketTask === currentSocketTask: ".concat(n===o)),i&&n===o&&__errorTracer__.surroundThirdByTryCatch(i,"at onSocket".concat(e," callback function"))(t)}}var ff=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({__skipDomainCheck__:!1},e);var t={};return{connectSocket:function(n){if((0,d.r3)("connectSocket",n,{url:""}))if(!1!==(0,p.mQ)(n.url,"websocket")){"object"!==c()(n.header)&&void 0!==n.header&&delete n.header;var r={};n.header&&(r=(0,p.Nf)(n.header)),n.__skipDomainCheck__=e.__skipDomainCheck__;try{var i=cf.get(t),o=new af(t,Object.assign({},n,{header:r}));return i&&i.readyState!==i.CLOSED?i.readyState:cf.set(t,o),o}catch(e){return"wx.connectSocket.fail, errMsg: ".concat(e.message),void(0,d.YG)("connectSocket",n,e.message)}}else(0,d.YG)("request",n,'invalid url "'.concat(n.url,'"'))},closeSocket:function(e){var n=cf.get(t);for(var r in n&&n.readyState!==n.CLOSED?(n.readyState=n.CLOSED,n.close(e)):(0,d.YG)("closeSocket",e,"WebSocket is not connected"),sf){var i=sf[r];i.__socketInstance__===t&&(i.readyState=i.CLOSED,i!==n&&i.close())}},sendSocketMessage:function(e){var n=cf.get(t);n&&n.readyState===n.OPEN?n.send(e):(0,d.YG)("sendSocketMessage",e,"WebSocket is not connected")},onSocketOpen:lf(t,"Open"),onSocketClose:lf(t,"Close"),onSocketMessage:lf(t,"Message"),onSocketError:lf(t,"Error")}},pf=ff(),hf=function(){return ff({__skipDomainCheck__:!0})},gf=new WeakMap,vf=new WeakMap,_f=new y.Z;function mf(e){var t=this,n=e.success,r=e.fail,i=e.complete;(0,d.IN)("addDownloadTaskForNative",Object.assign(e,{success:function(e){delete e.errMsg,t.taskId=e.downloadId,_f.on("".concat(t.taskId,":success"),(function(e){e.errMsg="downloadApp:ok","function"==typeof n&&n(e),"function"==typeof i&&i(e)})),_f.on("".concat(t.taskId,":fail"),(function(e){e.errMsg="downloadFile:fail ".concat(e.errMsg),"function"==typeof r&&r(e),"function"==typeof i&&i(e)}));var o=vf.get(t)||[];gf.set(t,"ready"),o.forEach((function(e){yf.call.apply(yf,[t,e[0]].concat(x()(e[1])))})),_f.emit("".concat(t.taskId,":created"),e)},fail:function(e){"function"==typeof r&&r(e),"function"==typeof i&&i(e)},complete:function(){vf.set(t,[])}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("addDownloadTaskForNative","downloadApp")}})}function yf(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("ready"!==gf.get(this)){var i=vf.get(this)||[];return i.push([e,n]),void vf.set(this,i)}switch(e){case"cancel":(0,d.IN)("cancelDownloadTaskForNative",{downloadIdArray:[this.taskId]});break;case"onProgressUpdate":_f.on("".concat(this.taskId,":progressUpdate"),(function(e){"function"==typeof n[0]&&__errorTracer__.surroundThirdByTryCatch(n[0],"at DownloadAppTask.onProgressUpdate callback function")(e)}));break;case"onCreated":_f.on("".concat(this.taskId,":created"),(function(e){"function"==typeof n[0]&&__errorTracer__.surroundThirdByTryCatch(n[0],"at DownloadAppTask.onCreated callback function")(e)}));break;default:(0,d.IN)("".concat(e,"DownloadTaskForNative"),{downloadId:this.taskId})}}(0,d.jQ)("onDownloadAppStateChangeForNative",(function(e){var t=e.state,n=e.downloadId;switch(delete e.state,delete e.downloadId,delete e.appId,t){case"download_succ":_f.emit("".concat(n,":progressUpdate"),e),_f.emit("".concat(n,":success"),e);break;case"download_failed":_f.emit("".concat(n,":fail"),e);break;case"download_progress_changed":_f.emit("".concat(n,":progressUpdate"),e)}"download_succ"!==t&&"download_failed"!==t||(_f.removeAllListeners("".concat(n,":success")),_f.removeAllListeners("".concat(n,":fail")),_f.removeAllListeners("".concat(n,":progressUpdate")))}));const bf=function(){function e(t){R()(this,e),this.taskId=null,["success","fail","complete"].forEach((function(e){"function"==typeof t[e]&&(t[e]=__errorTracer__.surroundThirdByTryCatch(t[e],"at api downloadApp ".concat(e," callback function")))})),mf.call(this,t)}return P()(e,[{key:"pause",value:function(){yf.call(this,"pause")}},{key:"resume",value:function(){yf.call(this,"resume")}},{key:"cancel",value:function(){yf.call(this,"cancel")}},{key:"install",value:function(){yf.call(this,"install")}},{key:"onCreated",value:function(e){yf.call(this,"onCreated",e)}},{key:"onProgressUpdate",value:function(e){yf.call(this,"onProgressUpdate",e)}}]),e}();var wf=n(7604),If=n(1251),Sf=n(8325),Cf=n(3087),Tf=function(e){I()(n,e);var t=C()(n);function n(e){var r;return R()(this,n),(r=t.call(this,"APP-SERVICE-SDK:".concat(e))).type="AppServiceSdkKnownError",r}return n}(n.n(Cf)()(Error)),Ef=0,kf=function(e){return Array.isArray(e)?e.filter((function(e){return"string"==typeof e&&!e.startsWith("__plugins__")})):[]},xf={setStorage:function(e){if((0,d.r3)("setStorage",e,{key:""}))try{var t=(0,M.op)(e.data),n=t.data,r=t.dataType;(0,d.IN)("setStorage",{key:e.key,data:n,dataType:r,storageId:Ef,success:e.success,fail:e.fail,complete:e.complete})}catch(t){"function"==typeof e.fail&&e.fail({errMsg:"setStorage:fail ".concat(t.message)}),"function"==typeof e.complete&&e.complete({errMsg:"setStorage:fail ".concat(t.message)})}},setStorageSync:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if((0,d.r3)("setStorage",e,"")){var n=B.cj?"setStorage":"setStorageSync",r=(0,M.op)(t),i=r.data,o=r.dataType,a=!1,s="";if((0,d.IN)(n,{key:e,data:i,dataType:o,storageId:Ef,fail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a=!0,s=e.errMsg.replace("setStorage:","setStorageSync:")}}),a)throw new Tf(s)}},getStorage:function(e){(0,d.r3)("getStorage",e,{key:""})&&(0,d.IN)("getStorage",Object.assign({},e,{storageId:Ef}),{beforeSuccess:function(e){e.data=(0,M.Yt)(e.data,e.dataType),delete e.dataType},checkNeedReportFail:function(e){return-1===e.errMsg.indexOf("data not found")}})},getStorageSync:function(e){if((0,W.HD)(e)){var t,n=B.cj?"getStorage":"getStorageSync";return(0,d.IN)(n,{key:e,storageId:Ef},{beforeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=(0,M.Yt)(e.data,e.dataType)},checkNeedReportFail:function(e){return-1===e.errMsg.indexOf("data not found")}}),t}},getStorageInfo:function(e){(0,d.IN)("getStorageInfo",Object.assign({},e,{storageId:Ef}),{beforeAll:function(e){e.keys=kf(e.keys)}})},getStorageInfoSync:function(){var e;return(0,d.IN)("getStorageInfoSync",{storageId:Ef},{beforeAll:function(t){e=t,t.keys=kf(t.keys),delete t.errMsg}}),e},removeStorage:function(e){(0,d.r3)("removeStorage",e,{key:""})&&(0,d.IN)("removeStorage",Object.assign({},e,{storageId:Ef}))},removeStorageSync:function(e){(0,d.r3)("removeStorageSync",e,"")&&(0,d.IN)("removeStorageSync",{key:e,storageId:Ef})},clearStorage:function(e){(0,d.IN)("clearStorage",Object.assign({},e,{storageId:Ef}))},clearStorageSync:function(){var e=B.cj?"clearStorage":"clearStorageSync";(0,d.IN)(e,{storageId:Ef})}},Af={app:0,game:0,opendata:1,singlePage:2},Pf=function(e){var t=Af[e],n={};return Object.keys(xf).forEach((function(e){var r=xf[e];n[e]=function(){return Ef=t,r.apply(void 0,arguments)}})),n};const Df={app:Pf("app"),game:Pf("game"),opendata:Pf("opendata"),singlePage:Pf("singlePage")};var Of=globalThis,Nf={};["setStorage","getStorage","getStorageInfo","removeStorage","clearStorage"].forEach((function(e){Nf[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.key){var n=t.key.toString();if(n.startsWith("__plugins__"))return void(0,d.YG)(e,t,'invalid key "'.concat(t.key,'"'))}var r=Df[(0,Ce.Av)()?"singlePage":"app"];return r["".concat(e)](t)},Nf["".concat(e,"Sync")]=function(t){var n;if(!t||!t.toString().startsWith("__plugins__")){for(var r=Df[(0,Ce.Av)()?"singlePage":"app"],i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(n=r["".concat(e,"Sync")]).call.apply(n,[Of,t].concat(o))}};var t="plugin_".concat(e);Nf[t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.key&&(t.key="__plugins__/".concat(t.key));var n=Df[(0,Ce.Av)()?"singlePage":"app"];return n["".concat(e)](t)},Nf["".concat(t,"Sync")]=function(t){var n;t&&(t="__plugins__/".concat(t));for(var r=Df[(0,Ce.Av)()?"singlePage":"app"],i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return(n=r["".concat(e,"Sync")]).call.apply(n,[Of,t].concat(o))}}));const Rf=Nf;const Mf=JSON.parse('{"ad":{"unit-id":1,"ad-intervals":1,"ad-type":1,"ad-theme":1,"bindload":1,"binderror":1,"bindclose":1},"audio":{"id":1,"src":1,"loop":1,"controls":1,"poster":1,"name":1,"author":1,"binderror":1,"bindplay":1,"bindpause":1,"bindtimeupdate":1,"bindended":1},"button":{"size":["default","mini"],"type":["primary","default","warn"],"plain":1,"disabled":1,"loading":1,"form-type":["submit","reset"],"open-type":["contact","share","getPhoneNumber","getUserInfo","launchApp","openSetting","feedback"],"hover-class":1,"hover-stop-propagation":1,"hover-start-time":1,"hover-stay-time":1,"lang":["en","zh_CN","zh_TW"],"session-from":1,"send-message-title":1,"send-message-path":1,"send-message-img":1,"app-parameter":1,"show-message-card":1,"bindgetuserinfo":1,"bindcontact":1,"bindgetphonenumber":1,"binderror":1,"bindopensetting":1,"bindlaunchapp":1},"camera":{"mode":["normal","scanCode"],"resolution":["low","medium","high"],"device-position":["front","back"],"flash":["auto","on","off","torch"],"frame-size":["small","medium","large"],"bindstop":1,"binderror":1,"bindinitdone":1,"bindscancode":1},"canvas":{"type":1,"canvas-id":1,"disable-scroll":1,"bindtouchstart":1,"bindtouchmove":1,"bindtouchend":1,"bindtouchcancel":1,"bindlongtap":1,"binderror":1},"checkbox":{"value":1,"disabled":1,"checked":1,"color":1},"checkbox-group":{"bindchange":1},"cover-image":{"src":1,"bindload":1,"binderror":1},"cover-view":{"scroll-top":1},"editor":{"read-only":1,"placeholder":1,"show-img-size":1,"show-img-toolbar":1,"show-img-resize":1,"bindready":1,"bindfocus":1,"bindblur":1,"bindinput":1,"bindstatuschange":1},"form":{"report-submit":1,"report-submit-timeout":1,"bindsubmit":1,"bindreset":1},"functional-page-navigator":{"version":["develop","trial","release"],"name":["loginAndGetUserInfo","requestPayment","chooseAddress","chooseInvoice","chooseInvoiceTitle"],"args":1,"bindsuccess":1,"bindfail":1,"bindcancel":1},"icon":{"type":1,"size":1,"color":1},"image":{"src":1,"mode":["scaleToFill","aspectFit","aspectFill","widthFix","heightFix","top","bottom","center","left","right","top left","top right","bottom left","bottom right"],"webp":1,"lazy-load":1,"show-menu-by-longpress":1,"binderror":1,"bindload":1},"input":{"value":1,"type":["text","number","idcard","digit"],"password":1,"placeholder":1,"placeholder-style":1,"placeholder-class":1,"disabled":1,"maxlength":1,"cursor-spacing":1,"auto-focus":1,"focus":1,"confirm-type":["send","search","next","go","done"],"always-embed":1,"confirm-hold":1,"cursor":1,"selection-start":1,"selection-end":1,"adjust-position":1,"hold-keyboard":1,"bindinput":1,"bindfocus":1,"bindblur":1,"bindconfirm":1,"bindkeyboardheightchange":1},"keyboard-accessory":{},"label":{"for":1},"live-player":{"src":1,"mode":["live","RTC"],"autoplay":1,"muted":1,"orientation":["vertical","horizontal"],"object-fit":["contain","fillCrop"],"background-mute":1,"min-cache":1,"max-cache":1,"sound-mode":["speaker","ear"],"auto-pause-if-navigate":1,"auto-pause-if-open-native":1,"picture-in-picture-mode":["[]","push","pop"],"bindstatechange":1,"bindfullscreenchange":1,"bindnetstatus":1,"bindaudiovolumenotify":1,"bindenterpictureinpicture":1,"bindleavepictureinpicture":1},"live-pusher":{"url":1,"mode":1,"autopush":1,"muted":1,"enable-camera":1,"auto-focus":1,"orientation":["vertical","horizontal"],"beauty":1,"whiteness":1,"aspect":1,"min-bitrate":1,"max-bitrate":1,"audio-quality":1,"waiting-image":1,"waiting-image-hash":1,"zoom":1,"device-position":1,"background-mute":1,"mirror":1,"remote-mirror":1,"local-mirror":["auto","enable","disable"],"audio-reverb-type":["0","1","2","3","4","5","6","7"],"enable-mic":1,"enable-agc":1,"enable-ans":1,"audio-volume-type":["auto","media","voicecall"],"video-width":1,"video-height":1,"beauty-style":["smooth","nature"],"filter":["standard","pink","nostalgia","blues","romantic","cool","fresher","solor","aestheticism","whitening","cerisered"],"bindstatechange":1,"bindnetstatus":1,"binderror":1,"bindbgmstart":1,"bindbgmprogress":1,"bindbgmcomplete":1,"bindaudiovolumenotify":1},"map":{"longitude":1,"latitude":1,"scale":1,"min-scale":1,"max-scale":1,"markers":1,"covers":1,"polyline":1,"circles":1,"controls":1,"include-points":1,"show-location":1,"polygons":1,"subkey":1,"layer-style":1,"rotate":1,"skew":1,"enable-3D":1,"show-compass":1,"show-scale":1,"enable-overlooking":1,"enable-zoom":1,"enable-scroll":1,"enable-rotate":1,"enable-satellite":1,"enable-traffic":1,"enable-poi":1,"enable-building":1,"setting":1,"bindtap":1,"bindmarkertap":1,"bindlabeltap":1,"bindcontroltap":1,"bindcallouttap":1,"bindupdated":1,"bindregionchange":1,"bindpoitap":1,"bindanchorpointtap":1},"match-media":{"min-width":1,"max-width":1,"width":1,"min-height":1,"max-height":1,"height":1,"orientation":1},"movable-area":{"scale-area":1},"movable-view":{"direction":1,"inertia":1,"out-of-bounds":1,"x":1,"y":1,"damping":1,"friction":1,"disabled":1,"scale":1,"scale-min":1,"scale-max":1,"scale-value":1,"animation":1,"bindchange":1,"bindscale":1,"htouchmove":1,"vtouchmove":1},"navigation-bar":{"title":1,"loading":1,"front-color":1,"background-color":1,"color-animation-duration":1,"color-animation-timing-func":1},"navigator":{"target":["self","miniProgram"],"url":1,"open-type":["navigate","redirect","switchTab","reLaunch","navigateBack","exit"],"delta":1,"app-id":1,"path":1,"extra-data":1,"version":["develop","trial","release"],"hover-class":1,"hover-stop-propagation":1,"hover-start-time":1,"hover-stay-time":1,"bindsuccess":1,"bindfail":1,"bindcomplete":1},"official-account":{},"open-data":{"type":["groupName","userNickName","userAvatarUrl","userGender","userCity","userProvince","userCountry","userLanguage"],"open-gid":1,"lang":["en","zh_CN","zh_TW"],"default-text":1,"default-avatar":1,"binderror":1},"page-container":{"show":1,"duration":1,"z-index":1,"overlay":1,"position":1,"round":1,"close-on-slideDown":1,"overlay-style":1,"custom-style":1,"bind:beforeenter":1,"bind:enter":1,"bind:afterenter":1,"bind:beforeleave":1,"bind:leave":1,"bind:afterleave":1,"bind:clickoverlay":1},"page-meta":{"background-text-style":1,"background-color":1,"background-color-top":1,"background-color-bottom":1,"root-background-color":1,"scroll-top":1,"scroll-duration":1,"page-style":1,"page-font-size":1,"root-font-size":1,"page-orientation":1,"bindresize":1,"bindscroll":1,"bindscrolldone":1},"picker":{"header-text":1,"mode":["selector","multiSelector","time","date","region"],"disabled":1,"bindcancel":1},"picker-view":{"value":1,"indicator-style":1,"indicator-class":1,"mask-style":1,"mask-class":1,"bindchange":1,"bindpickstart":1,"bindpickend":1},"picker-view-column":{},"progress":{"percent":1,"show-info":1,"border-radius":1,"font-size":1,"stroke-width":1,"color":1,"activeColor":1,"backgroundColor":1,"active":1,"active-mode":1,"duration":1,"bindactiveend":1},"radio":{"value":1,"checked":1,"disabled":1,"color":1},"radio-group":{"bindchange":1},"rich-text":{"nodes":1,"space":["ensp","emsp","nbsp"]},"scroll-view":{"scroll-x":1,"scroll-y":1,"upper-threshold":1,"lower-threshold":1,"scroll-top":1,"scroll-left":1,"scroll-into-view":1,"scroll-with-animation":1,"enable-back-to-top":1,"enable-flex":1,"scroll-anchoring":1,"refresher-enabled":1,"refresher-threshold":1,"refresher-default-style":1,"refresher-background":1,"refresher-triggered":1,"enhanced":1,"bounces":1,"show-scrollbar":1,"paging-enabled":1,"fast-deceleration":1,"binddragstart":1,"binddragging":1,"binddragend":1,"bindscrolltoupper":1,"bindscrolltolower":1,"bindscroll":1,"bindrefresherpulling":1,"bindrefresherrefresh":1,"bindrefresherrestore":1,"bindrefresherabort":1},"share-element":{"key":1,"transform":1,"duration":1,"easing-function":1},"slider":{"min":1,"max":1,"step":1,"disabled":1,"value":1,"color":1,"selected-color":1,"activeColor":1,"backgroundColor":1,"block-size":1,"block-color":1,"show-value":1,"bindchange":1,"bindchanging":1},"swiper":{"indicator-dots":1,"indicator-color":1,"indicator-active-color":1,"autoplay":1,"current":1,"interval":1,"duration":1,"circular":1,"vertical":1,"previous-margin":1,"next-margin":1,"snap-to-edge":1,"display-multiple-items":1,"easing-function":["default","linear","easeInCubic","easeOutCubic","easeInOutCubic"],"bindchange":1,"bindtransition":1,"bindanimationfinish":1},"swiper-item":{"item-id":1,"skip-hidden-item-layout":1},"switch":{"checked":1,"disabled":1,"type":1,"color":1,"bindchange":1},"text":{"selectable":1,"user-select":1,"space":["ensp","emsp","nbsp"],"decode":1},"textarea":{"value":1,"placeholder":1,"placeholder-style":1,"placeholder-class":1,"disabled":1,"maxlength":1,"auto-focus":1,"focus":1,"auto-height":1,"fixed":1,"cursor-spacing":1,"cursor":1,"show-confirm-bar":1,"selection-start":1,"selection-end":1,"adjust-position":1,"hold-keyboard":1,"disable-default-padding":1,"confirm-type":["send","search","next","go","done","return"],"confirm-hold":1,"bindfocus":1,"bindblur":1,"bindlinechange":1,"bindinput":1,"bindconfirm":1,"bindkeyboardheightchange":1},"video":{"src":1,"duration":1,"controls":1,"danmu-list":1,"danmu-btn":1,"enable-danmu":1,"autoplay":1,"loop":1,"muted":1,"initial-time":1,"page-gesture":1,"direction":["0","90","-90"],"show-progress":1,"show-fullscreen-btn":1,"show-play-btn":1,"show-center-play-btn":1,"enable-progress-gesture":1,"object-fit":["contain","fill","cover"],"poster":1,"show-mute-btn":1,"title":1,"play-btn-position":["bottom","center"],"enable-play-gesture":1,"auto-pause-if-navigate":1,"auto-pause-if-open-native":1,"vslide-gesture":1,"vslide-gesture-in-fullscreen":1,"ad-unit-id":1,"poster-for-crawler":1,"show-casting-button":1,"picture-in-picture-mode":["[]","push","pop"],"picture-in-picture-show-progress":1,"enable-auto-rotation":1,"show-screen-lock-button":1,"show-snapshot-button":1,"show-background-playback-button":1,"background-poster":1,"bindplay":1,"bindpause":1,"bindended":1,"bindtimeupdate":1,"bindfullscreenchange":1,"bindwaiting":1,"binderror":1,"bindprogress":1,"bindloadedmetadata":1,"bindcontrolstoggle":1,"bindenterpictureinpicture":1,"bindleavepictureinpicture":1,"bindseekcomplete":1},"view":{"hover-class":1,"hover-stop-propagation":1,"hover-start-time":1,"hover-stay-time":1},"voip-room":{"openid":1,"mode":1,"device-position":1,"binderror":1},"web-view":{"src":1,"bindmessage":1,"bindload":1,"binderror":1},"ad-custom":{"unit-id":1,"ad-intervals":1,"bindload":1,"binderror":1},"aria-component":{},"native-component":{}}');const Lf=JSON.parse('{"class":{"console":["debug","log","info","warn","error","group","groupEnd"],"env":["USER_DATA_PATH"],"CanvasContext":["draw","createLinearGradient","createCircularGradient","createPattern","measureText","save","restore","beginPath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","arc","rect","arcTo","clip","fillRect","strokeRect","clearRect","fill","stroke","closePath","scale","rotate","translate","drawImage","strokeText","transform","setTransform","setFillStyle","setStrokeStyle","setShadow","setGlobalAlpha","setLineWidth","setLineJoin","setLineCap","setLineDash","setMiterLimit","fillText","setFontSize","setTextAlign","setTextBaseline","fillStyle","strokeStyle","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","lineWidth","lineCap","lineJoin","miterLimit","lineDashOffset","font","globalAlpha","globalCompositeOperation"],"CanvasGradient":["addColorStop"],"OffscreenCanvas":["getContext","createImage","width","height"],"Color":[],"EventChannel":["emit","on","once","off"],"IntersectionObserver":["relativeTo","relativeToViewport","observe","disconnect"],"MediaQueryObserver":["observe","disconnect"],"NodesRef":["fields","boundingClientRect","scrollOffset","context","node"],"SelectorQuery":["in","select","selectAll","selectViewport","exec"],"AudioContext":["setSrc","play","pause","seek"],"InnerAudioContext":["play","pause","stop","seek","destroy","onCanplay","offCanplay","onPlay","offPlay","onPause","offPause","onStop","offStop","onEnded","offEnded","onTimeUpdate","offTimeUpdate","onError","offError","onWaiting","offWaiting","onSeeking","offSeeking","onSeeked","offSeeked","src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered"],"CameraContext":["onCameraFrame","takePhoto","setZoom","startRecord","stopRecord"],"CameraFrameListener":["start","stop"],"EditorContext":["format","insertDivider","insertImage","insertText","setContents","getContents","clear","removeFormat","undo","redo","blur","scrollIntoView","getSelectionText"],"LivePlayerContext":["play","stop","mute","pause","resume","requestFullScreen","exitFullScreen","exitPictureInPicture","snapshot","requestPictureInPicture"],"LivePusherContext":["start","stop","pause","resume","switchCamera","snapshot","toggleTorch","playBGM","stopBGM","pauseBGM","resumeBGM","setBGMVolume","setMICVolume","startPreview","stopPreview","sendMessage"],"MapContext":["getCenterLocation","setLocMarkerIcon","moveToLocation","translateMarker","moveAlong","includePoints","getRegion","getRotate","getSkew","getScale","setCenterOffset","removeCustomLayer","addCustomLayer","addGroundOverlay","updateGroundOverlay","removeGroundOverlay","toScreenLocation","fromScreenLocation","openMapApp","addMarkers","removeMarkers","initMarkerCluster","on"],"ScrollViewContext":["scrollTo","scrollIntoView","scrollEnabled","bounces","showScrollbar","pagingEnabled","fastDeceleration","decelerationDisabled"],"VideoContext":["play","pause","stop","seek","sendDanmu","playbackRate","requestFullScreen","exitFullScreen","showStatusBar","hideStatusBar","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback"],"LogManager":["debug","info","log","warn"],"RealtimeLogManager":["info","warn","error","setFilterMsg","addFilterMsg"],"RealtimeTagLogManager":["info","warn","error","setFilterMsg","addFilterMsg"],"IBeaconInfo":["uuid","major","minor","proximity","accuracy","rssi"],"MediaRecorder":["pause","resume","start","stop","requestFrame","on","off","destroy"],"VideoDecoder":["start","seek","stop","remove","getFrameData","on","off"],"MediaTrack":["kind","duration","volume"],"MediaContainer":["extractDataSource","addTrack","removeTrack","export","destroy"],"UserInfo":["nickName","avatarUrl","gender","country","province","city","language"],"EntryList":["getEntries","getEntriesByType","getEntriesByName"],"Performance":["getEntries","getEntriesByType","getEntriesByName","createObserver","setBufferSize"],"PerformanceObserver":["observe","disconnect","supportedEntryTypes"],"Animation":["export","step","matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ","opacity","backgroundColor","width","height","left","right","top","bottom"],"UpdateManager":["applyUpdate","onCheckForUpdate","onUpdateReady","onUpdateFailed"],"Worker":["postMessage","terminate","onMessage","onProcessKilled"],"FileSystemManager":[],"readResult":["bytesRead","arrayBuffer"],"Stats":["isDirectory","isFile","mode","size","lastAccessedTime","lastModifiedTime"],"writeResult":["bytesWritten"],"UDPSocket":["bind","send","connect","write","close","onClose","offClose","onError","offError","onListening","offListening","onMessage","offMessage"],"Canvas":["getContext","createImage","requestAnimationFrame","cancelAnimationFrame","createImageData","createPath2D","toDataURL","width","height"],"RenderingContext":[],"Image":["src","width","height","onload","onerror"],"NFCAdapter":["startDiscovery","stopDiscovery","getNdef","getNfcA","getNfcB","getIsoDep","getNfcF","getNfcV","getMifareClassic","getMifareUltralight","onDiscovered","offDiscovered","tech"],"Ndef":["connect","close","setTimeout","isConnected","onNdefMessage","offNdefMessage","writeNdefMessage"],"NfcA":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive","getAtqa","getSak"],"NfcB":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"IsoDep":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive","getHistoricalBytes"],"NfcF":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"NfcV":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"MifareClassic":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"MifareUltralight":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"WifiInfo":["SSID","BSSID","secure","signalStrength","frequency"],"BackgroundAudioManager":["play","pause","seek","stop","onCanplay","onWaiting","onError","onPlay","onPause","onSeeking","onSeeked","onEnded","onStop","onTimeUpdate","onNext","onPrev","src","startTime","title","epname","singer","coverImgUrl","webUrl","protocol","playbackRate","duration","currentTime","paused","buffered"],"RecorderManager":["start","pause","resume","stop","onStart","onResume","onPause","onStop","onFrameRecorded","onError","onInterruptionBegin","onInterruptionEnd"],"DownloadTask":["abort","onProgressUpdate","offProgressUpdate","onHeadersReceived","offHeadersReceived"],"RequestTask":["abort","onHeadersReceived","offHeadersReceived"],"SocketTask":["send","close","onOpen","onClose","onError","onMessage"],"UploadTask":["abort","onProgressUpdate","offProgressUpdate","onHeadersReceived","offHeadersReceived"],"AuthSetting":["scope.userInfo","scope.userLocation","scope.address","scope.invoiceTitle","scope.invoice","scope.werun","scope.record","scope.writePhotosAlbum","scope.camera"],"SubscriptionsSetting":["mainSwitch","itemSettings"],"ImageData":["width","height","data"],"Path2D":[],"BLEPeripheralServer":["addService","removeService","startAdvertising","stopAdvertising","writeCharacteristicValue","onCharacteristicWriteRequest","offCharacteristicWriteRequest","onCharacteristicReadRequest","offCharacteristicReadRequest","onCharacteristicSubscribed","offCharacteristicSubscribed","onCharacteristicUnsubscribed","offCharacteristicUnsubscribed"],"MediaAudioPlayer":["start","addAudioSource","removeAudioSource","stop","destroy","volume"],"RewardedVideoAd":["load","show","destroy","onLoad","offLoad","onError","offError","onClose","offClose"]},"method":{"arrayBufferToBase64":{},"base64ToArrayBuffer":{},"exitVoIPChat":{"object":{},"success":{}},"joinVoIPChat":{"object":{"roomType":["voice","video"],"signature":1,"nonceStr":1,"timeStamp":1,"groupId":1,"muteConfig":1},"success":{"openIdList":1,"errCode":1,"errMsg":1}},"onVoIPChatInterrupted":{"callback":{"errCode":1,"errMsg":1}},"offVoIPChatInterrupted":{},"onVoIPChatMembersChanged":{"callback":{"openIdList":1,"errCode":1,"errMsg":1}},"offVoIPChatMembersChanged":{},"onVoIPChatSpeakersChanged":{"callback":{"openIdList":1,"errCode":1,"errMsg":1}},"onVoIPChatStateChanged":{"callback":{"code":1,"data":1,"errCode":1,"errMsg":1}},"offVoIPChatStateChanged":{"callback":{}},"onVoIPVideoMembersChanged":{"callback":{"openIdList":1,"errCode":1,"errMsg":1}},"offVoIPVideoMembersChanged":{"callback":{}},"subscribeVoIPVideoMembers":{"object":{"openIdList":1},"success":{}},"updateVoIPChatMuteConfig":{"object":{"muteConfig":1},"success":{}},"getAccountInfoSync":{},"onAppHide":{"callback":{}},"offAppHide":{"callback":{}},"onAppShow":{"callback":{"path":1,"scene":1,"query":1,"shareTicket":1,"referrerInfo":["appId","extraData"],"forwardMaterials":1}},"offAppShow":{"callback":{}},"getEnterOptionsSync":{},"onError":{"callback":{}},"offError":{},"onUnhandledRejection":{"callback":{"reason":1,"promise":1}},"offUnhandledRejection":{"callback":{}},"getLaunchOptionsSync":{},"onCopyUrl":{"callback":{"query":1}},"offCopyUrl":{"callback":{}},"onPageNotFound":{"callback":{"path":1,"query":1,"isEntryPage":1}},"offPageNotFound":{"callback":{}},"onThemeChange":{"callback":{"theme":["dark","light"]}},"offThemeChange":{"callback":{}},"canvasGetImageData":{"object":{"canvasId":1,"x":1,"y":1,"width":1,"height":1},"success":{"width":1,"height":1,"data":1}},"canvasPutImageData":{"object":{"canvasId":1,"data":1,"x":1,"y":1,"width":1,"height":1},"success":{}},"canvasToTempFilePath":{"object":{"x":1,"y":1,"width":1,"height":1,"destWidth":1,"destHeight":1,"canvasId":1,"canvas":1,"fileType":["jpg","png"],"quality":1},"success":{"tempFilePath":1}},"createCanvasContext":{},"createOffscreenCanvas":{"object":{"type":["webgl","2d"],"width":1,"height":1,"compInst":1}},"createIntersectionObserver":{},"nextTick":{},"createSelectorQuery":{},"createAudioContext":{},"createCameraContext":{},"createLivePlayerContext":{},"createLivePusherContext":{},"createMapContext":{},"createVideoContext":{},"createInnerAudioContext":{},"getLogManager":{"object":{"level":1}},"setEnableDebug":{"object":{"enableDebug":1},"success":{}},"getRealtimeLogManager":{},"startAccelerometer":{"object":{"interval":["game","ui","normal"]},"success":{}},"stopAccelerometer":{"object":{},"success":{}},"onAccelerometerChange":{"callback":{"x":1,"y":1,"z":1}},"offAccelerometerChange":{},"checkIsOpenAccessibility":{"object":{},"success":{"open":1}},"getBatteryInfo":{"object":{},"success":{"level":1,"isCharging":1}},"getBatteryInfoSync":{"return":{"level":1,"isCharging":1}},"addPhoneCalendar":{"object":{"title":1,"startTime":1,"allDay":1,"description":1,"location":1,"endTime":1,"alarm":1,"alarmOffset":1},"success":{}},"addPhoneRepeatCalendar":{"object":{"title":1,"startTime":1,"allDay":1,"description":1,"location":1,"endTime":1,"alarm":1,"alarmOffset":1,"repeatInterval":1,"repeatEndTime":1},"success":{}},"getClipboardData":{"object":{},"success":{"data":1}},"setClipboardData":{"object":{"data":1},"success":{}},"startCompass":{"object":{},"success":{}},"stopCompass":{"object":{},"success":{}},"onCompassChange":{"callback":{"direction":1,"accuracy":1}},"offCompassChange":{},"chooseContact":{"object":{},"success":{"phoneNumber":1,"displayName":1,"phoneNumberList":1}},"addPhoneContact":{"object":{"firstName":1,"photoFilePath":1,"nickName":1,"lastName":1,"middleName":1,"remark":1,"mobilePhoneNumber":1,"weChatNumber":1,"addressCountry":1,"addressState":1,"addressCity":1,"addressStreet":1,"addressPostalCode":1,"organization":1,"title":1,"workFaxNumber":1,"workPhoneNumber":1,"hostNumber":1,"email":1,"url":1,"workAddressCountry":1,"workAddressState":1,"workAddressCity":1,"workAddressStreet":1,"workAddressPostalCode":1,"homeFaxNumber":1,"homePhoneNumber":1,"homeAddressCountry":1,"homeAddressState":1,"homeAddressCity":1,"homeAddressStreet":1,"homeAddressPostalCode":1},"success":{}},"searchContacts":{"object":{"phoneNumber":1},"success":{"result":1}},"getRandomValues":{"object":{"length":1},"success":{"randomValues":1}},"startGyroscope":{"object":{"interval":["game","ui","normal"]},"success":{}},"stopGyroscope":{"object":{},"success":{}},"onGyroscopeChange":{"callback":{"x":1,"y":1,"z":1}},"offGyroscopeChange":{},"startBeaconDiscovery":{"object":{"uuids":1,"ignoreBluetoothAvailable":1},"success":{}},"stopBeaconDiscovery":{"object":{},"success":{}},"getBeacons":{"object":{},"success":{"beacons":1}},"onBeaconUpdate":{"callback":{"beacons":1}},"offBeaconUpdate":{"callback":{}},"onBeaconServiceChange":{"callback":{"available":1,"discovering":1}},"offBeaconServiceChange":{"callback":{}},"startLocalServiceDiscovery":{"object":{"serviceType":1},"success":{}},"stopLocalServiceDiscovery":{"object":{},"success":{}},"onLocalServiceFound":{"callback":{"serviceType":1,"serviceName":1,"ip":1,"port":1}},"offLocalServiceFound":{"callback":{}},"onLocalServiceLost":{"callback":{"serviceType":1,"serviceName":1}},"offLocalServiceLost":{"callback":{}},"onLocalServiceDiscoveryStop":{"callback":{}},"offLocalServiceDiscoveryStop":{"callback":{}},"onLocalServiceResolveFail":{"callback":{"serviceType":1,"serviceName":1}},"offLocalServiceResolveFail":{"callback":{}},"startDeviceMotionListening":{"object":{"interval":["game","ui","normal"]},"success":{}},"stopDeviceMotionListening":{"object":{},"success":{}},"onDeviceMotionChange":{"callback":{"alpha":1,"beta":1,"gamma":1}},"offDeviceMotionChange":{},"getNetworkType":{"object":{},"success":{"networkType":["wifi","2g","3g","4g","5g","unknown","none"],"signalStrength":1}},"onNetworkStatusChange":{"callback":{"isConnected":1,"networkType":["wifi","2g","3g","4g","unknown","none"]}},"offNetworkStatusChange":{},"makePhoneCall":{"object":{"phoneNumber":1},"success":{}},"scanCode":{"object":{"onlyFromCamera":1,"scanType":["barCode","qrCode","datamatrix","pdf417"]},"success":{"result":1,"scanType":["QR_CODE","AZTEC","CODABAR","CODE_39","CODE_93","CODE_128","DATA_MATRIX","EAN_8","EAN_13","ITF","MAXICODE","PDF_417","RSS_14","RSS_EXPANDED","UPC_A","UPC_E","UPC_EAN_EXTENSION","WX_CODE","CODE_25"],"charSet":1,"path":1,"rawData":1}},"getSystemInfo":{"object":{},"success":{"brand":1,"model":1,"pixelRatio":1,"screenWidth":1,"screenHeight":1,"windowWidth":1,"windowHeight":1,"statusBarHeight":1,"language":1,"version":1,"system":1,"platform":1,"fontSizeSetting":1,"SDKVersion":1,"benchmarkLevel":1,"albumAuthorized":1,"cameraAuthorized":1,"locationAuthorized":1,"microphoneAuthorized":1,"notificationAuthorized":1,"notificationAlertAuthorized":1,"notificationBadgeAuthorized":1,"notificationSoundAuthorized":1,"bluetoothEnabled":1,"locationEnabled":1,"wifiEnabled":1,"safeArea":["left","right","top","bottom","width","height"],"locationReducedAccuracy":1,"theme":["dark","light"],"host":["appId"],"enableDebug":1,"deviceOrientation":["portrait","landscape"]}},"getSystemInfoSync":{},"getSystemInfoAsync":{"object":{},"success":{"brand":1,"model":1,"pixelRatio":1,"screenWidth":1,"screenHeight":1,"windowWidth":1,"windowHeight":1,"statusBarHeight":1,"language":1,"version":1,"system":1,"platform":1,"fontSizeSetting":1,"SDKVersion":1,"benchmarkLevel":1,"albumAuthorized":1,"cameraAuthorized":1,"locationAuthorized":1,"microphoneAuthorized":1,"notificationAuthorized":1,"notificationAlertAuthorized":1,"notificationBadgeAuthorized":1,"notificationSoundAuthorized":1,"bluetoothEnabled":1,"locationEnabled":1,"wifiEnabled":1,"safeArea":["left","right","top","bottom","width","height"],"locationReducedAccuracy":1,"theme":["dark","light"],"host":["appId"],"enableDebug":1,"deviceOrientation":["portrait","landscape"]}},"vibrateShort":{"object":{"type":1},"success":{}},"vibrateLong":{"object":{},"success":{}},"getExptInfoSync":{"return":{}},"reportEvent":{},"getExtConfig":{"object":{},"success":{"extConfig":1}},"getExtConfigSync":{"return":{}},"chooseLocation":{"object":{"latitude":1,"longitude":1},"success":{"name":1,"address":1,"latitude":1,"longitude":1}},"choosePoi":{"object":{},"success":{"type":1,"city":1,"name":1,"address":1,"latitude":1,"longitude":1}},"getLocation":{"object":{"type":1,"altitude":1,"isHighAccuracy":1,"highAccuracyExpireTime":1},"success":{"latitude":1,"longitude":1,"speed":1,"accuracy":1,"altitude":1,"verticalAccuracy":1,"horizontalAccuracy":1}},"onLocationChange":{"callback":{"latitude":1,"longitude":1,"speed":1,"accuracy":1,"altitude":1,"verticalAccuracy":1,"horizontalAccuracy":1}},"offLocationChange":{"callback":{}},"startLocationUpdateBackground":{"object":{},"success":{}},"startLocationUpdate":{"object":{},"success":{}},"stopLocationUpdate":{"object":{},"success":{}},"openLocation":{"object":{"latitude":1,"longitude":1,"scale":1,"name":1,"address":1},"success":{}},"onAudioInterruptionBegin":{"callback":{}},"offAudioInterruptionBegin":{"callback":{}},"onAudioInterruptionEnd":{"callback":{}},"offAudioInterruptionEnd":{"callback":{}},"chooseMedia":{"object":{"count":1,"mediaType":["image","video"],"sourceType":["album","camera"],"maxDuration":1,"sizeType":1,"camera":["back","front"]},"success":{"tempFiles":1,"type":1}},"chooseMessageFile":{"object":{"count":1,"type":["all","video","image","file"],"extension":1},"success":{"tempFiles":1}},"loadFontFace":{"object":{"global":1,"family":1,"source":1,"desc":["style","weight","variant"],"scopes":1},"success":{"status":1}},"chooseImage":{"object":{"count":1,"sizeType":["original","compressed"],"sourceType":["album","camera"]},"success":{"tempFilePaths":1,"tempFiles":1}},"previewImage":{"object":{"urls":1,"showmenu":1,"current":1},"success":{}},"getImageInfo":{"object":{"src":1},"success":{"width":1,"height":1,"path":1,"orientation":["up","up-mirrored","down","down-mirrored","left-mirrored","right","right-mirrored","left"],"type":1}},"saveImageToPhotosAlbum":{"object":{"filePath":1},"success":{}},"compressImage":{"object":{"src":1,"quality":1},"success":{"tempFilePath":1}},"createMediaRecorder":{},"openVideoEditor":{"object":{"filePath":1},"success":{"duration":1,"size":1,"tempFilePath":1,"tempThumbPath":1}},"previewMedia":{"object":{"sources":1,"current":1,"showmenu":1},"success":{}},"chooseVideo":{"object":{"sourceType":["album","camera"],"compressed":1,"maxDuration":1,"camera":["back","front"]},"success":{"tempFilePath":1,"duration":1,"size":1,"height":1,"width":1}},"saveVideoToPhotosAlbum":{"object":{"filePath":1},"success":{}},"getVideoInfo":{"object":{"src":1},"success":{"orientation":["up","down","left","right","up-mirrored","down-mirrored","left-mirrored","right-mirrored"],"type":1,"duration":1,"size":1,"height":1,"width":1,"fps":1,"bitrate":1}},"compressVideo":{"object":{"src":1,"quality":["low","medium","high"],"bitrate":1,"fps":1,"resolution":1},"success":{"tempFilePath":1,"size":1}},"createVideoDecoder":{},"createMediaContainer":{},"downloadFile":{"object":{"url":1,"header":1,"timeout":1,"filePath":1},"success":{"tempFilePath":1,"filePath":1,"statusCode":1,"profile":1}},"request":{"object":{"url":1,"data":1,"header":1,"timeout":1,"method":["OPTIONS","GET","HEAD","POST","PUT","DELETE","TRACE","CONNECT"],"dataType":["json","其他"],"responseType":["text","arraybuffer"],"enableHttp2":1,"enableQuic":1,"enableCache":1},"success":{"data":1,"statusCode":1,"header":1,"cookies":1,"profile":1}},"uploadFile":{"object":{"url":1,"filePath":1,"name":1,"header":1,"formData":1,"timeout":1},"success":{"data":1,"statusCode":1}},"login":{"object":{"timeout":1},"success":{"code":1}},"checkSession":{"object":{},"success":{}},"chooseAddress":{"object":{},"success":{"userName":1,"postalCode":1,"provinceName":1,"cityName":1,"countyName":1,"detailInfo":1,"nationalCode":1,"telNumber":1,"errMsg":1}},"authorize":{"object":{"scope":1},"success":{}},"addCard":{"object":{"cardList":1},"success":{"cardList":1}},"openCard":{"object":{"cardList":1},"success":{}},"chooseInvoice":{"object":{},"success":{"invoiceInfo":1}},"chooseInvoiceTitle":{"object":{},"success":{"type":["0","1"],"title":1,"taxNumber":1,"companyAddress":1,"telephone":1,"bankName":1,"bankAccount":1,"errMsg":1}},"getGroupEnterInfo":{"object":{},"success":{"errMsg":1,"encryptedData":1,"iv":1,"cloudID":1}},"getUserInfo":{"object":{"withCredentials":1,"lang":["en","zh_CN","zh_TW"]},"success":{"userInfo":1,"rawData":1,"signature":1,"encryptedData":1,"iv":1,"cloudID":1}},"getUserProfile":{"object":{"lang":["en","zh_CN","zh_TW"],"desc":1},"success":{"userInfo":1,"rawData":1,"signature":1,"encryptedData":1,"iv":1,"cloudID":1}},"requestPayment":{"object":{"timeStamp":1,"nonceStr":1,"package":1,"signType":["MD5","HMAC-SHA256","RSA"],"paySign":1},"success":{}},"requestOrderPayment":{},"requestSubscribeMessage":{"object":{"tmplIds":1},"success":{"errMsg":1,"TEMPLATE_ID":1}},"getWeRunData":{"object":{},"success":{"encryptedData":1,"iv":1,"cloudID":1}},"getPerformance":{},"onMemoryWarning":{"callback":{"level":["5","10","15"]}},"offMemoryWarning":{},"reportPerformance":{},"reportAnalytics":{},"reportMonitor":{},"getBackgroundFetchData":{"object":{"fetchType":1},"success":{}},"onBackgroundFetchData":{"callback":{"fetchType":1,"fetchedData":1,"timeStamp":1}},"setBackgroundFetchToken":{"object":{"token":1},"success":{}},"getBackgroundFetchToken":{"object":{},"success":{}},"createAnimation":{"object":{"duration":1,"timingFunction":["linear","ease","ease-in","ease-in-out","ease-out","step-start","step-end"],"delay":1,"transformOrigin":1}},"enableAlertBeforeUnload":{"object":{"message":1},"success":{}},"disableAlertBeforeUnload":{"object":{},"success":{}},"getMenuButtonBoundingClientRect":{},"getSelectedTextRange":{"object":{},"success":{"start":1,"end":1}},"hideKeyboard":{"object":{},"success":{}},"showModal":{"object":{"title":1,"content":1,"showCancel":1,"cancelText":1,"cancelColor":1,"confirmText":1,"confirmColor":1},"success":{"content":1,"confirm":1,"cancel":1}},"showToast":{"object":{"title":1,"icon":["success","error","loading","none"],"image":1,"duration":1,"mask":1},"success":{}},"hideToast":{"object":{},"success":{}},"showLoading":{"object":{"title":1,"mask":1},"success":{}},"hideLoading":{"object":{},"success":{}},"showActionSheet":{"object":{"alertText":1,"itemList":1,"itemColor":1},"success":{"tapIndex":1}},"onKeyboardHeightChange":{"callback":{"height":1}},"offKeyboardHeightChange":{},"pageScrollTo":{"object":{"scrollTop":1,"duration":1,"selector":1},"success":{}},"startPullDownRefresh":{"object":{},"success":{}},"stopPullDownRefresh":{"object":{},"success":{}},"onWindowResize":{"callback":{"size":["windowWidth","windowHeight"]}},"offWindowResize":{"callback":{}},"setBackgroundColor":{"object":{"backgroundColor":1,"backgroundColorTop":1,"backgroundColorBottom":1},"success":{}},"setBackgroundTextStyle":{"object":{"textStyle":["dark","light"]},"success":{}},"setWindowSize":{"object":{"width":1,"height":1},"success":{}},"setTabBarBadge":{"object":{"index":1,"text":1},"success":{}},"removeTabBarBadge":{"object":{"index":1},"success":{}},"showTabBarRedDot":{"object":{"index":1},"success":{}},"hideTabBarRedDot":{"object":{"index":1},"success":{}},"showTabBar":{"object":{"animation":1},"success":{}},"hideTabBar":{"object":{"animation":1},"success":{}},"setTabBarStyle":{"object":{"color":1,"selectedColor":1,"backgroundColor":1,"borderStyle":1},"success":{}},"setTabBarItem":{"object":{"index":1,"text":1,"iconPath":1,"selectedIconPath":1},"success":{}},"setTopBarText":{"object":{"text":1},"success":{}},"getUpdateManager":{},"updateWeChatApp":{"object":{},"success":{}},"createWorker":{},"saveFile":{"object":{"tempFilePath":1},"success":{"savedFilePath":1}},"openDocument":{"object":{"filePath":1,"showMenu":1,"fileType":["doc","docx","xls","xlsx","ppt","pptx","pdf"]},"success":{}},"getSavedFileList":{"object":{},"success":{"fileList":1}},"getSavedFileInfo":{"object":{"filePath":1},"success":{"size":1,"createTime":1}},"removeSavedFile":{"object":{"filePath":1},"success":{}},"getFileInfo":{"object":{"filePath":1,"digestAlgorithm":["md5","sha1"]},"success":{"size":1,"digest":1}},"getFileSystemManager":{},"saveFileToDisk":{"object":{"filePath":1},"success":{}},"getStorage":{"object":{"key":1},"success":{"data":1}},"getStorageSync":{},"setStorage":{"object":{"key":1,"data":1},"success":{}},"setStorageSync":{},"removeStorage":{"object":{"key":1},"success":{}},"removeStorageSync":{},"clearStorage":{"object":{},"success":{}},"clearStorageSync":{},"getStorageInfo":{"object":{},"success":{"keys":1,"currentSize":1,"limitSize":1}},"getStorageInfoSync":{"return":{"keys":1,"currentSize":1,"limitSize":1}},"createUDPSocket":{},"authorizeForMiniProgram":{"object":{"scope":["scope.record","scope.writePhotosAlbum","scope.camera"]},"success":{}},"canIUse":{},"closeBLEConnection":{"object":{"deviceId":1},"success":{}},"closeBluetoothAdapter":{"object":{},"success":{}},"createBLEConnection":{"object":{"deviceId":1,"timeout":1},"success":{}},"getBLEDeviceCharacteristics":{"object":{"deviceId":1,"serviceId":1},"success":{"characteristics":1}},"getBLEDeviceRSSI":{"object":{"deviceId":1},"success":{"RSSI":1}},"getBLEDeviceServices":{"object":{"deviceId":1},"success":{"services":1}},"getBluetoothAdapterState":{"object":{},"success":{"discovering":1,"available":1}},"getBluetoothDevices":{"object":{},"success":{"devices":1}},"getConnectedBluetoothDevices":{"object":{"services":1},"success":{"devices":1}},"makeBluetoothPair":{"object":{"deviceId":1,"pin":1,"timeout":1},"success":{}},"notifyBLECharacteristicValueChange":{"object":{"deviceId":1,"serviceId":1,"characteristicId":1,"state":1},"success":{}},"onBLECharacteristicValueChange":{"callback":{"deviceId":1,"serviceId":1,"characteristicId":1,"value":1}},"offBLECharacteristicValueChange":{},"onBLEConnectionStateChange":{"callback":{"deviceId":1,"connected":1}},"offBLEConnectionStateChange":{},"onBluetoothAdapterStateChange":{"callback":{"available":1,"discovering":1}},"offBluetoothAdapterStateChange":{},"onBluetoothDeviceFound":{"callback":{"devices":1}},"offBluetoothDeviceFound":{},"openBluetoothAdapter":{"object":{"mode":["central","peripheral"]},"success":{}},"readBLECharacteristicValue":{"object":{"deviceId":1,"serviceId":1,"characteristicId":1},"success":{}},"setBLEMTU":{"object":{"deviceId":1,"mtu":1},"success":{}},"startBluetoothDevicesDiscovery":{"object":{"services":1,"allowDuplicatesKey":1,"interval":1,"powerLevel":["low","medium","high"]},"success":{}},"stopBluetoothDevicesDiscovery":{"object":{},"success":{}},"writeBLECharacteristicValue":{"object":{"deviceId":1,"serviceId":1,"characteristicId":1,"value":1},"success":{}},"getHCEState":{"object":{},"success":{}},"getNFCAdapter":{},"onHCEMessage":{"callback":{"messageType":["1","2"],"data":1,"reason":1}},"offHCEMessage":{},"sendHCEMessage":{"object":{"data":1},"success":{}},"startHCE":{"object":{"aid_list":1},"success":{}},"stopHCE":{"object":{},"success":{}},"getScreenBrightness":{"object":{},"success":{"value":1}},"onUserCaptureScreen":{"callback":{}},"offUserCaptureScreen":{},"setKeepScreenOn":{"object":{"keepScreenOn":1},"success":{}},"setScreenBrightness":{"object":{"value":1},"success":{}},"connectWifi":{"object":{"SSID":1,"BSSID":1,"password":1,"maunal":1},"success":{}},"getConnectedWifi":{"object":{},"success":{"wifi":1}},"getWifiList":{"object":{},"success":{}},"onGetWifiList":{"callback":{"wifiList":1}},"offGetWifiList":{},"onWifiConnected":{"callback":{"wifi":1}},"offWifiConnected":{},"setWifiList":{"object":{"wifiList":1},"success":{}},"startWifi":{"object":{},"success":{}},"stopWifi":{"object":{},"success":{}},"getBackgroundAudioManager":{},"getRecorderManager":{},"getBackgroundAudioPlayerState":{"object":{},"success":{"duration":1,"currentPosition":1,"status":["0","1","2"],"downloadPercent":1,"dataUrl":1}},"playBackgroundAudio":{"object":{"dataUrl":1,"title":1,"coverImgUrl":1},"success":{}},"pauseBackgroundAudio":{"object":{},"success":{}},"seekBackgroundAudio":{"object":{"position":1},"success":{}},"stopBackgroundAudio":{"object":{},"success":{}},"onBackgroundAudioPlay":{"callback":{}},"onBackgroundAudioPause":{"callback":{}},"onBackgroundAudioStop":{"callback":{}},"getAvailableAudioSources":{"object":{},"success":{"audioSources":["auto","buildInMic","headsetMic","mic","camcorder","voice_communication","voice_recognition"]}},"startRecord":{"object":{},"success":{"tempFilePath":1}},"stopRecord":{"object":{},"success":{}},"setInnerAudioOption":{"object":{"mixWithOther":1,"obeyMuteSwitch":1,"speakerOn":1},"success":{}},"playVoice":{"object":{"filePath":1,"duration":1},"success":{}},"pauseVoice":{"object":{},"success":{}},"stopVoice":{"object":{},"success":{}},"connectSocket":{"object":{"url":1,"header":1,"protocols":1,"tcpNoDelay":1,"perMessageDeflate":1,"timeout":1},"success":{}},"closeSocket":{"object":{"code":1,"reason":1},"success":{}},"sendSocketMessage":{"object":{"data":1},"success":{}},"onSocketOpen":{"callback":{"header":1}},"onSocketClose":{"callback":{"code":1,"reason":1}},"onSocketMessage":{"callback":{"data":1}},"onSocketError":{"callback":{"errMsg":1}},"addFileToFavorites":{"object":{"filePath":1,"fileName":1},"success":{}},"addVideoToFavorites":{"object":{"videoPath":1,"thumbPath":1},"success":{}},"showRedPackage":{"object":{"url":1},"success":{}},"getSetting":{"object":{"withSubscriptions":1},"success":{"authSetting":1,"subscriptionsSetting":1,"miniprogramAuthSetting":1}},"openSetting":{"object":{"withSubscriptions":1},"success":{"authSetting":1,"subscriptionsSetting":1}},"authPrivateMessage":{"object":{"shareTicket":1},"success":{"errMsg":1,"valid":1,"encryptedData":1,"iv":1}},"getShareInfo":{"object":{"shareTicket":1,"timeout":1},"success":{"errMsg":1,"encryptedData":1,"iv":1,"cloudID":1}},"hideShareMenu":{"object":{"menus":1},"success":{}},"shareFileMessage":{"object":{"filePath":1,"fileName":1},"success":{}},"shareVideoMessage":{"object":{"videoPath":1,"thumbPath":1},"success":{}},"showShareImageMenu":{"object":{"path":1},"success":{}},"showShareMenu":{"object":{"withShareTicket":1,"menus":1},"success":{}},"updateShareMenu":{"object":{"withShareTicket":1,"isUpdatableMessage":1,"activityId":1,"toDoActivityId":1,"templateInfo":1,"isPrivateMessage":1},"success":{}},"checkIsSoterEnrolledInDevice":{"object":{"checkAuthMode":["fingerPrint","facial","speech"]},"success":{"isEnrolled":1,"errMsg":1}},"checkIsSupportSoterAuthentication":{"object":{},"success":{"supportMode":["fingerPrint","facial","speech"]}},"startSoterAuthentication":{"object":{"requestAuthModes":["fingerPrint","facial","speech"],"challenge":1,"authContent":1},"success":{"authMode":1,"resultJSON":1,"resultJSONSignature":1,"errCode":1,"errMsg":1}},"shareToWeRun":{"object":{"recordList":1},"success":{}},"navigateBackMiniProgram":{"object":{"extraData":1},"success":{}},"navigateToMiniProgram":{"object":{"appId":1,"path":1,"extraData":1,"envVersion":["develop","trial","release"]},"success":{}},"setNavigationBarTitle":{"object":{"title":1},"success":{}},"showNavigationBarLoading":{"object":{},"success":{}},"hideNavigationBarLoading":{"object":{},"success":{}},"hideHomeButton":{"object":{},"success":{}},"setNavigationBarColor":{"object":{"frontColor":1,"backgroundColor":1,"animation":["duration","timingFunc"]},"success":{}},"redirectTo":{"object":{"url":1},"success":{}},"reLaunch":{"object":{"url":1},"success":{}},"navigateTo":{"object":{"url":1,"events":1},"success":{"eventChannel":1}},"switchTab":{"object":{"url":1},"success":{}},"navigateBack":{"object":{"delta":1},"success":{}},"createBLEPeripheralServer":{"object":{},"success":{"server":1}},"onBLEPeripheralConnectionStateChanged":{"callback":{"deviceId":1,"serverId":1,"connected":1}},"offBLEPeripheralConnectionStateChanged":{"callback":{}},"createMediaAudioPlayer":{},"createRewardedVideoAd":{"object":{"adUnitId":1,"multiton":1}}}}');function Bf(e,t,n){var r=Mf[e];return!!r&&((!t||t in r)&&!(n&&(!Array.isArray(r[t])||r[t].indexOf(n)<0)))}function Ff(e,t,n,r){var i=Lf.method[e];if(!i)return!1;if(t&&!i[t])return!1;if(n&&!i[t][n])return!1;if(r){var o=i[t][n];if(!Array.isArray(o)||o.indexOf(r)<0)return!1}return!0}function jf(e,t){var n=Lf.class[e];return!!n&&!(t&&n.indexOf(t)<0)}var Wf=n(8250),Uf=(0,Kn.Z)("removeUserCloudStorage","webapi_removeselfuserstorage",{},{},(function(e){return{key:e.keyList}}),(function(e){return delete e.rawData,e})),Vf=(0,Kn.Z)("setUserCloudStorage","webapi_setselfuserstorage",{},{},(function(e){var t=e.KVDataList,n={kv_list:void 0===t?[]:t};return(0,W.jn)(fe.Z.disableSetUserStorageFromMiniProgram)&&(n.disable_set_user_storage_from_miniprogram=fe.Z.disableSetUserStorageFromMiniProgram),n}),(function(e){return delete e.rawData,e})),Gf=n(3383),Hf=n(6903),Zf=function(){var e={};return(0,d.IN)("getPublicLibVersion",{complete:function(t){t.version?e=t.version:delete(e=t).errMsg}}),e},qf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("setEnableDebug",e,{enableDebug:!0})&&((0,d.IN)("setEnableDebug",e,{}),e.enableDebug&&console.warn("已通过 wx.setEnableDebug 打开调试"))},zf=function(){},Yf=function(){},Kf=function(){};fe.Z.onReady((function(){}));var Jf,$f,Xf,Qf="undefined"!=typeof __initHelper&&1===__initHelper,ep=function(){try{return If.cF.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return Kf("accessSync fail",e,arguments),{errMsg:e.message||""}}},tp=function(){try{return If.gj.apply(this,arguments)}catch(e){return Kf("renameSync fail",e,arguments),{errMsg:e.message||""}}},np=function(){try{var e=If.dJ.apply(this,arguments);return{stat:e,errMsg:"statSync:ok"}}catch(e){return Kf("statSync fail",e,arguments),{errMsg:e.message||""}}},rp=function(){try{var e=If.NG.apply(this,arguments);return{data:e,errMsg:"readFileSync:ok"}}catch(e){return Kf("readFileSync fail",e,arguments),{errMsg:e.message||""}}},ip=function(e){return"".concat(e.getFullYear(),"-").concat(e.getMonth()+1,"-").concat(e.getDate()," ").concat(e.getHours(),":").concat(e.getMinutes(),":").concat(e.getSeconds())},op=function(e){"string"!=typeof e&&(e+="");var t,n,r=0;for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<127?r+=1:n>=128&&n<=2047?r+=2:n>=2048&&n<=65535&&(r+=3);return r},ap=!1,sp=102400,cp=[],up={lastLogNum:1,lastLogSize:0},lp=!1,dp=!1,fp=!1,pp={},hp=function(e){return $f+"log"+e},gp=(0,p.Hw)((function(e){return ep(e).errMsg.indexOf("accessSync:ok")>=0})),vp=(0,p.Hw)((function(e){var t=ep(e).errMsg;return t.indexOf("fail")>=0&&(t.indexOf("access denied")>=0||t.indexOf("no permission")>=0)})),_p=(0,p.Hw)((function(e){if(zf("initLog[1][isRemoteDebugMode=".concat(Qf,", wxConfigReady=").concat(ap,", isLogInit=").concat(lp,"]")),Qf||!ap||lp)e&&e();else{if(zf("initLog[2]"),Jf=fe.Z&&"devtools"===fe.Z.platform,$f=(fe.Z&&fe.Z.env.USER_DATA_PATH||(Jf?"http://usr":"wxfile://usr"))+"/miniprogramLog/",!gp($f))return zf("initLog[3][mkdirSync][usrLogDir=".concat($f,"]")),function(){try{If.ho.apply(this,arguments)}catch(e){return Kf("mkdirSync fail",e,arguments),{errMsg:e.message||""}}}($f),lp=!0,fp=vp($f),e&&e(),fp?void Kf("hasNoPermission[1]"):void 0;if(fp=vp($f))return lp=!0,void Kf("hasNoPermission[2]");for(var t=1;t<=5&&gp(hp(t));)pp[t]=!0,up.lastLogNum=t,t++;zf("[before statSync] path=".concat(hp(up.lastLogNum)));var n=np(hp(up.lastLogNum));n.stat&&(up.lastLogSize=n.stat.size),zf("[before isLogInit changeinto true"),lp=!0,e&&e()}})),mp=(0,p.Hw)((function(){_p((function(){if(Yf("[after initLog] isLogInit=".concat(lp,"; isRemoteDebugMode=").concat(Qf,"; hasNoPermission=").concat(fp,"; CACHE_LOG.length=").concat(cp.length,"; needDeleteOldLog=").concat(dp)),lp&&!Qf&&!fp&&cp.length&&!dp){for(var e=[],t=0,n=0;n<cp.length;n++){var r=op(cp[n]);if(Yf("[logItemSize=".concat(r,"][currentSize=").concat(t,"][MAX_LOG_SIZE=").concat(sp,"]")),r>sp)console.warn("[wx.log warn] each log size exceed 100KB will be discard."),Yf("submitLog[3],logItemSize=".concat(r,",MAX_LOG_SIZE=").concat(sp));else{if(t+r>sp)break;t+=r,e.push(cp[n])}}if(Yf("[reportLogList.length=".concat(e.length,"]")),e.length){if(up.lastLogSize+t>1048576){if(up.lastLogNum+1>=6)return dp=!0,Yf("submitLog[4][deleteOldLog]","logConfig=",up,",MAX_FILE_COUNT=",4),void setTimeout((function(){zf("deleteOldLog[1],unlinkSync,logPath(1)=".concat(hp(1))),function(){try{If.yX.apply(this,arguments),zf("unlinkSync success",arguments)}catch(e){return Kf("unlinkSync fail",e,arguments),{errMsg:e.message||""}}}(hp(1));for(var e=2;e<=5;e++)zf("deleteOldLog[2],renameSync,logPath(1)=".concat(hp(1),",logPath(i - 1)=").concat(hp(e-1))),tp(hp(e),hp(e-1));up.lastLogNum=5,pp[up.lastLogNum]=!1,up.lastLogSize=0,dp=!1}),50);up.lastLogNum++,up.lastLogSize=0}n===cp.length?cp=[]:cp.splice(0,n),pp[up.lastLogNum]||gp(hp(up.lastLogNum))?(zf("submitLog[7],before appendFile, filePath=",hp(up.lastLogNum)),(0,If.aW)({filePath:hp(up.lastLogNum),data:(up.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",fail:function(e){Kf("submitLog[7.1], appendFile fail",e)},success:function(e){zf("submitLog[7.2], appendFile success",e)}})):(zf("submitLog[5], before writeFile, filePath=",hp(up.lastLogNum)),(0,If.NC)({filePath:hp(up.lastLogNum),data:(up.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",success:function(e){zf("submitLog[5.1], writeFile success",e)},fail:function(e){console.log("log writeFile err "+e.errMsg),Kf("submitLog[6],writeFile fail",e)}})),up.lastLogSize+=t}}}))}));function yp(){Xf&&clearTimeout(Xf),Xf=setTimeout((function(){mp(),Xf=null,yp()}),2e3)}var bp={logApiInvoke:!0};function wp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"number"==typeof e.level&&(bp.level=e.level),1===bp.level?bp.logApiInvoke=!1:0===bp.level&&(bp.logApiInvoke=!0),bp}["info","debug","log","warn"].forEach((function(e){bp[e]=function(){if(!Qf&&!fp&&ap&&arguments.length&&up){for(var t=[],n=0;n<arguments.length;n++)"number"==typeof arguments[n]||"string"==typeof arguments[n]?t.push(arguments[n]):t.push(JSON.stringify(arguments[n]));t.splice(0,0,ip(new Date),"[".concat(e,"]")),cp.push(t.join(" "))}}})),bp._getUserLog=function(){for(var e={},t=1;t<=5;t++)e["log"+t]=np(hp(t));return e},bp.privateSystemLog=function(){if(ap&&7===fe.Z.appType){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"undefined"!=typeof Reporter&&t&&t.length&&br.s.log.apply(br.s,t)}},fe.Z.onReady((function(){Qf||(ap=!0,(0,p.Hw)(yp)())})),(0,Mt.J)((function(){Qf||mp()}));var Ip=(0,p.Hw)(Hf.Bx),Sp=(0,p.Hw)(Hf.JB);function Cp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(zf("uploadUserLog[1],logConfig.lastLogNum=".concat(up.lastLogNum),",args=",e),!e.index||e.index>up.lastLogNum)return zf("uploadUserLog[2]"),void(e.complete&&e.complete());var t="ios"===fe.Z.platform?1:5,n=e.readFileResp||rp(hp(e.index),"utf8");if(zf("uploadUserLog[3],readFileSync=".concat(n.errMsg,",index=").concat(e.index,",EACH_SLICE=").concat(t)),n.errMsg.indexOf("readFileSync:ok")>=0&&n.data){var r=n.data.length,i=Math.max(parseInt(r/t,10),1),o=(e.slice-1)*i;zf("uploadUserLog[4]","start=",o,"eachLen=",i,"len=",r,n.data.length);var a=n.data.substr(o,i);if(zf("uploadUserLog[5],content.length=",a&&a.length,",logConfig=",up),!a)return zf("uploadUserLog[6],uploadUserLogSliceComplete"),Ip({webviewId:e.webviewId,data:{total:up.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:(0,Dr.m4)()}}),e.index++,e.slice=1,e.readFileResp=null,void Cp(e);zf("uploadUserLog[7], uploadUserLogContent,content.length=",a&&a.length,",logConfig=",up),Ip({webviewId:e.webviewId,data:{type:"uploadUserLogContent",content:a,index:e.index,slice:e.slice||1,total:up.lastLogNum,info:1===e.index&&1===e.slice?(0,Dr.m4)():null},success:function(){zf("uploadUserLog[8] uploadUserLogContent suc, EACH_SLICE=".concat(t,", args.slice=").concat(e.slice,", logConfig.lastLogNum=").concat(up.lastLogNum)),e.slice===t?(Ip({webviewId:e.webviewId,data:{total:up.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:(0,Dr.m4)()}}),e.index++,e.slice=1,e.readFileResp=null,Cp(e)):(e.slice++,e.readFileResp=n,zf("uploadUserLog[9],args=",e),Cp(e))},fail:function(t){Kf("uploadUserLog[10] fail,failResp.errMsg=".concat(t.errMsg,",args.retry=").concat(e.retry)),e.retry?Ip({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:t&&t.errMsg,index:e.index,info:(0,Dr.m4)()}}):(e.retry=!0,Cp(e))}})}else Kf("uploadUserLog[11],readFileSync fail=".concat(n.errMsg,",index=").concat(e.index)),Ip({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:n.errMsg,index:e.index,info:(0,Dr.m4)()}})}Qf||Sp((function(e){zf("onH5Data",e,up),e.data&&"uploadUserLog"===e.data.type&&Cp({index:1,slice:1,webviewId:e.webviewId})}));var Tp=n(2208),Ep=n.n(Tp),kp=[],xp=[],Ap=~~(+new Date/1e3),Pp=0;function Dp(e,t,n,r){var i;i="string"==typeof r?r:r?"high":"low",(0,d.IN)("operateRealtimeData",{type:t,content:n,priority:i,id:e},{beforeSuccess:function(){},beforeFail:function(e){xp.forEach((function(t){return t(e)}))}})}function Op(){var e=kp.shift();"function"==typeof e&&(e(),Pp=+new Date),kp.length&&setTimeout(Op,200)}var Np=function(e,t,n){if(1005===e||!B.gm){var r=+new Date,i=Ap++;return r-Pp>=200&&!kp.length?(Dp(i,e,t,n),Pp=r):(kp.push((function(){Dp(i,e,t,n)})),setTimeout(Op,200)),i}},Rp=function(e){B.gm||"function"==typeof e&&xp.push((0,M.Hw)(e))};(0,d.jQ)("onRealtimeDataResponse",(function(e){xp.forEach((function(t){return t(e)}))}));var Mp,Lp=(0,Ce.Fr)((0,Nr.Ce)(!1,"GetUploadSetting")),Bp=(0,Ce.Fr)((0,Nr.Ce)(!1,"GetUploadSetting",!0)),Fp={};function jp(e){return e?(Fp[e]||(Fp[e]=Bp({apiName:"GetUploadSetting",reqData:{},pluginId:e})),Fp[e]):Mp||(Mp=Lp({apiName:"GetUploadSetting",reqData:{}}))}var Wp=+new Date,Up=function(){return Wp++},Vp=(0,p.Hw)((function(e){return Gp(e).errMsg.indexOf("accessSync:ok")>=0})),Gp=function(){try{return If.cF.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return{errMsg:e.message||""}}},Hp=(0,Ce.Fr)((0,Nr.Ce)(!1,"UploadByApi")),Zp=(0,Ce.Fr)((0,Nr.Ce)(!1,"UploadByApi",!0)),qp={DEBUG:1,INFO:2,WARN:4,ERROR:8},zp=1,Yp=2,Kp=1,Jp="",$p=!1;function Xp(e){$p?e&&e():($p=!0,fe.Z.onReady((function(){Jp=fe.Z.accountInfo.appId,e&&e()})))}var Qp=function(e,t){if("string"!=typeof e)return 0;var n,r,i,o=0;if("utf-16"===(t=t?t.toLowerCase():"utf8")||"utf16"===t)for(r=0,i=e.length;r<i;r++)o+=(n=e.charCodeAt(r))<=65535?2:4;else for(r=0,i=e.length;r<i;r++)o+=(n=e.charCodeAt(r))<=127?1:n<=2047?2:n<=65535?3:4;return o};function eh(){if(void 0!==__appServiceEngine__){var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}if((0,Ce.aI)())return"index"}var th;function nh(){th&&(th=clearTimeout(th))}var rh,ih=!1,oh="",ah=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,e),this.systemInfo=(0,Dr.m4)(),this.opt={},this.opt.level=qp.INFO,this.mode=n.mode||"normal",this.pluginId=n.pluginId,this.pluginVersion=n.pluginVersion,this.timerId=null,this.isExceedTodayUploadLogCount=!1,this.opt.isClientReport=!!n.isClientReport,this.msgList={},this.filterList={},this.kvFilterList={},this.sizeList={},this.levelList={},this._uploadList=[],this._logInfo={},this._logInfo.level=0,this._logInfo.version=2,this._logInfo.source=Kp,this._logInfo.platform="ios"===this.systemInfo.platform?Yp:zp,this._logInfo.libraryVersion=this.systemInfo.SDKVersion,this._logInfo.clientVersion=this.systemInfo.version,this.exceedSizeList={},this.structSizeList={},this.historyLog={},this.retryLogList={},this.MaxSize=10240,this.MaxLogCount=500,this._logCacheBeforeLogConfig=[],setTimeout((function(){B.gm||t._getLogConfig()}),300),Xp((function(){(0,Ce.aI)()&&t.cyclelyUploadInGame()})),this.uploadCount=0,this.failCount=0,this.opt.isClientReport&&(this.MaxSize=5120,this.MaxLogCount=200,(0,Dc.getNetworkType)({success:function(e){oh=e.networkType}}),(0,Dc.onNetworkStatusChange)((function(e){oh=e.networkType})),Rp((function(e){t.onRealtimeDataResponse(e)})))}return P()(e,[{key:"cyclelyUploadInGame",value:function(){var e=this;setTimeout((function(){ph(),e.cyclelyUploadInGame()}),6e5)}},{key:"onRealtimeDataResponse",value:function(e){var t=this;if(this.uploadCount++,0!==e.errcode&&("wifi"!==oh&&"4g"!==oh||(this.failCount++,this.uploadCount>=5&&this.failCount/this.uploadCount>=.6&&(ih=!0,this.failCount=0,this.uploadCount=0,setTimeout((function(){ih=!1}),6e4))),e.idList&&e.idList.length)){var n=!1,r={},i=!1,o={};e.idList.forEach((function(a){var s=t.historyLog[a];s&&(s.id,s.url,Reporter.reportKeyValue({key:"UserLogFail",value:",".concat(oh,",").concat(e.errcode,",").concat(parseInt(Date.now()/1e3,10),",").concat(s.url,",").concat(s.libraryVersion,",").concat(Jp)}),n=!0,delete t.historyLog[a],r[a]=s);var c=t.retryLogList[a];c&&(c.id,c.url,o[a]=c,delete t.retryLogList[a],i=!0)})),n&&(this.retryLogList=r,this.failRetry(r)),i&&this.saveToFile(o)}}},{key:"_getLogConfig",value:function(e,t){var n=this;return jp(this.pluginId).then((function(r){if(r.rawData){try{var i=JSON.parse(r.rawData);n.MaxSize=1024*i.MaxLogSize,i.MaxLogCount&&(n.MaxLogCount=i.MaxLogCount),n._logInfo.id=i.UserUin,i.OpenId&&(n.traceid="".concat(i.OpenId,"_").concat(parseInt(Date.now()/1e3,10))),i.Debug&&i.Debug.MaxSize&&i.Debug.ExpireTime>Date.now()/1e3&&(n.isDebugMode=!0,n.MaxSize=1024*i.Debug.MaxSize,n.opt.level=qp.DEBUG,i.Debug.MaxLogCount&&(n.MaxLogCount=i.Debug.MaxLogCount));var o=n._logCacheBeforeLogConfig||[];n._logCacheBeforeLogConfig=[],o.forEach((function(e){n._baseLog.apply(n,[e.key,e.path].concat(x()(e.args)))})),n._getConfigFail=!1,e&&n.upload(t),(0,Ce.aI)()||(a=i.ReportInterval,nh(),a="number"!=typeof a?3e5:a,(a=Math.max(a,5e3))>0&&function e(){nh(),th=setTimeout((function(){ph(),e()}),a)}())}catch(e){n._hasNoPermission=!0,n._logCacheBeforeLogConfig=[]}setTimeout((function(){n.tryUploadFailLog()}),100)}else n._hasNoPermission=!0,n._logCacheBeforeLogConfig=[];var a})).catch((function(e){e.errMsg&&e.errMsg.indexOf("fail invalid scope")>=0&&(n._hasNoPermission=!0,n._logCacheBeforeLogConfig=[]),n._getConfigFail=!0}))}},{key:"_config",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.mode&&(this.mode=e.mode)}},{key:"_checkSize",value:function(e,t){var n=0;if(!t||!t.length)return!0;if(!(e=this.pluginId||e||eh()))return!0;t.forEach((function(e){n+=Qp(e)})),this.sizeList[e]=this.sizeList[e]||0;var r=this.sizeList[e];return r+n>this.MaxSize?n:(this.sizeList[e]=r+n,!0)}},{key:"_getLogValue",value:function(e){var t,n=c()(e),r="";if("function"===n&&(t="function(){}"),"undefined"===n)t="<Undefined>";else if("object"===n){r=(r=Object.prototype.toString.call(e)).replace(/^\[object |\]$/g,"");try{t="Error"===r?e.stack:JSON.stringify(e)}catch(e){r="Error",t=e.message}}else e+="";return t||e}},{key:"_baseLog",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(r.length&&!this._hasNoPermission)if(this._logInfo.id){var o,a,s,u;"object"===c()(e)?(o=e.id,a=e.name,s=e.level,u=e.time):(o="__DEFAULT__",a="__DEFAULT__",s=e,u=+new Date);var l=qp[s.toUpperCase()]||0;if(!(l<this.opt.level)){var d,f;if(t=this.pluginId||t||eh(),this.structSizeList[t]=this.structSizeList[t]||0,"kv"===this.mode){var p=r[0],h=r[1];if(!p||"string"!=typeof p)return;var g=this._getLogValue(h);f=this._checkSize(t,[p,g]),d=[o,u,a,p,g]}else d=r.map(this._getLogValue),f=this._checkSize(t,d),this.structSizeList[t]+=6+(d.length?3*d.length-1:0);if(!0===f)this._addLogMsg(d,t,l);else{if(this.exceedSizeList[t]=this.exceedSizeList[t]||0,!this.exceedSizeList[t]){var v=["UserLog:fail Log Size ".concat(f," Exceed.")];"kv"===this.mode&&v.unshift("warning"),this._addLogMsg(v,t,qp.WARN)}this.exceedSizeList[t]+=f}}}else this._logCacheBeforeLogConfig.push({key:e,path:t,args:r})}},{key:"_addLogMsg",value:function(e,t,n){if(!this.isExceedTodayUploadLogCount&&n&&(!this._getConfigFail||!this._getConfigRetry)){var r=this.pluginId||t||eh();if(r)if(this.msgList[r]=this.msgList[r]||[],this.msgList[r].length>=this.MaxLogCount)"UserLog:fail log count exceed max count ".concat(this.MaxLogCount);else{var i=this.msgList[r][0];if("kv"===this.mode){var o=Ep()(e,5),a=[n,o[0],o[1],o[2],o[3],o[4]];this.msgList[r].push(a)}else{var s=new Date,c=Math.ceil(+s/1e3),u=[i?c-i[0]:c,e,n,s.getMilliseconds()];if(!this.msgList[r].length){var l=(new Date).getTimezoneOffset();u.push(l)}this.msgList[r].push(u)}this.levelList[r]=this.levelList[r]||0,this.levelList[r]|=n}}}},{key:"OperateWxUploadLog",value:function(e,t){var n=this;if(!this.isExceedTodayUploadLogCount){var r=e.structSize||0;delete e.structSize;var i,o=e.rawSize||0;if(delete e.rawSize,this.opt.isClientReport){var a=this.pluginId?1004:1001;e.url;var s=Np(a,JSON.stringify({interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0,pluginId:this.pluginId||"",pluginVersion:this.pluginVersion||"",appId:Jp}));return this.historyLog[s]=e,Reporter.reportKeyValue({key:"UserLog",value:",".concat(r+o,",").concat(o).concat(e.timestamp,",").concat(e.url,",").concat(e.filter1,",").concat(Jp)}),void(t&&t(!0))}return(i={apiName:"UploadByApi",pluginId:this.pluginId,reqData:{interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0}},i.pluginId?Zp(i):Hp(i)).then((function(){t&&t(!0)})).catch((function(e){e&&1e4==+e.err_code&&(n.isExceedTodayUploadLogCount=!0),t&&t(!1),n.failCount++}))}}},{key:"failRetry",value:function(e){var t=this;this.uploadFailRetryTimerId||(this.uploadFailRetryTimerId=setTimeout((function(){if(e)for(var n in e)t.historyLog.hasOwnProperty(n)&&t.OperateWxUploadLog(t.historyLog[n])}),3e3))}},{key:"stat",value:function(e){return(e=this.pluginId||e||eh())&&this.sizeList[e]||0}},{key:"_hasUploadInterval",value:function(){return!!this.opt.isClientReport||!(this._isUploading||Date.now()-this._lastUploadTime<1e3)}},{key:"upload",value:function(e){var t=this,n=e||eh();if(e=this.pluginId||n){var r=this.msgList[e]||[];if(r&&r.length)if(this._hasUploadInterval()){if(this._getConfigFail||!this._logInfo.id){if(this._getConfigRetry)return;return this._getConfigRetry=!0,void this._getLogConfig(!0,n)}if($p){if(!ih){this.msgList[e]=[];var i=this.levelList[e]||qp.DEBUG;this.levelList[e]=0;var o=this.sizeList[e];this.sizeList[e]=0;var a=this.exceedSizeList[e];this.exceedSizeList[e]=0;var s=this._logInfo;s.level=i,s.rawSize=a+o;var c=this.structSizeList[e]||0;if(s.structSize=c,this.structSizeList[e]=0,this._logInfo.timestamp=Math.ceil(Date.now()/1e3),this._logInfo=Object.assign({},this._logInfo),"kv"===this.mode){var u={},l={};r.forEach((function(e){var t=Ep()(e,6),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=n||qp.DEBUG;l[r]=l[r]||[i,{},c],l[r][1][a]=s,l[r][2]=Math.max(l[r][2],c),u[o]=u[o]||[],-1===u[o].indexOf(l[r])&&u[o].push(l[r])}));var d=this.kvFilterList,f=[];Object.keys(d[e]).forEach((function(t){d[e][t].forEach((function(e){var n=Ep()(e,2),r=n[0],i=n[1];if(l[r]){var o=l[r][1];o.__REALTIME_LOG_TAG__=o.__REALTIME_LOG_TAG__||[],-1===o.__REALTIME_LOG_TAG__.indexOf(i)&&o.__REALTIME_LOG_TAG__.push(i),-1===f.indexOf(i)&&(f.push(i),f.push("".concat(t,"_").concat(i)))}}))})),s.msg=JSON.stringify(u),s.filter1=[].concat(Object.keys(u),f).join(" "),this.kvFilterList[e]=[]}else s.msg=JSON.stringify(r),s.filter1=this.filterList[e]||"",this.filterList[e]="";">>>>>UploadUserLog stat ".concat(e," log full msg size is"),Qp(s.msg),s.appid=Jp,this.pluginId&&(s.pluginid=this.pluginId),this.pluginVersion&&(s.pluginVersion=this.pluginVersion),"kv"===this.mode&&(s.mode=this.mode),s.url=n,this.traceid&&(s.traceid=this.traceid),s.device=this.systemInfo.model+" "+this.systemInfo.system,this._isUploading=!0,this.OperateWxUploadLog(s,(function(e){t._isUploading=!1,t._lastUploadTime=Date.now(),e&&t._uploadList.length&&(t.timerId&&clearTimeout(t.timerId),t.timerId=setTimeout((function(){t.timerId=null,t.upload(t._uploadList.shift())}),1e3))}))}}else Xp((function(){Jp&&t.upload(n)}))}else this._uploadList.indexOf(n)<0&&this._uploadList.push(n)}}},{key:"setFilterMsg",value:function(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),Qp(t)>2048)return!1;if(e=this.pluginId||e||eh(),"kv"===this.mode&&"object"===c()(n)){var r=this.kvFilterList;return r[e]=r[e]||{},r[e][n.name]=[[n.id,t]],!0}return this.filterList[e]=t,!0}},{key:"addFilterMsg",value:function(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),e=this.pluginId||e||eh(),"kv"===this.mode&&"object"===c()(n)){var r=this.kvFilterList;return r[e]=r[e]||{},r[e][n.name]=r[e][n.name]||[],void r[e][n.name].push([n.id,t])}var i=this.filterList[e]||"";this.setFilterMsg(e,i+(i?" ":"")+t)}},{key:"getTraceId",value:function(){return this.traceid||""}},{key:"getFilePath",value:function(){var e=(fe.Z&&fe.Z.env.USER_DATA_PATH||(B.gm?"http://usr":"wxfile://usr"))+"/miniprogramLog/",t=e+"realtime.log";return Vp(e)||function(){try{If.ho.apply(this,arguments)}catch(e){return{errMsg:e.message}}}(e),t}},{key:"getFileContent",value:function(e){var t=function(){try{return{data:If.NG.apply(this,arguments),errMsg:"readFileSync:ok"}}catch(e){return{errMsg:e.message}}}(e,"utf8");try{if(t&&t.data)return t=JSON.parse(t.data)}catch(e){}return null}},{key:"saveToFile",value:function(e){if(e){var t=this.getFilePath();if(Vp(t)){var n=this.getFileContent(t);if(n)for(var r in n)e[r]||(e[r]=n[r])}(0,If.NC)({filePath:t,data:JSON.stringify(e),encoding:"utf8",fail:function(e){e.errMsg},success:function(e){}})}}},{key:"tryUploadFailLog",value:function(){var e=this.getFilePath();if(Vp(e)){var t=this.getFileContent(e);if(!t)return;for(var n in t)t.hasOwnProperty(n)&&this.OperateWxUploadLog(t[n]);(0,If.NC)({filePath:e,data:"{}",encoding:"utf8",fail:function(e){e.errMsg},success:function(e){}})}}}]),e}(),sh=null,ch={},uh=function(e){return e?ch[e]:sh},lh=function(e,t){e?ch[e]=t:sh=t},dh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r="",i={stat:function(){if(!B.gm){var e=uh(t);if(e)return e.stat(r)}},setFilterMsg:function(e){if(!B.gm){var n=uh(t);if(n)return n.setFilterMsg(r,e)}},addFilterMsg:function(e){if(!B.gm){var n=uh(t);if(n)return n.addFilterMsg(r,e)}},in:function(e){(0,Ce.aI)()?r="index":e&&e.route&&(r=e.route)},tag:function(e){var n=Up(),i=+new Date;return{debug:function(o,a){if(!B.gm){var s=uh(t);if(s)return s._baseLog({id:n,name:e,time:i,level:"debug"},r,o,a)}},info:function(o,a){if(!B.gm){var s=uh(t);if(s)return s._baseLog({id:n,name:e,time:i,level:"info"},r,o,a)}},warn:function(o,a){if(!B.gm){var s=uh(t);if(s)return s._baseLog({id:n,name:e,time:i,level:"warn"},r,o,a)}},error:function(o,a){if(!B.gm){var s=uh(t);if(s)return s._baseLog({id:n,name:e,time:i,level:"error"},r,o,a)}},setFilterMsg:function(i){if(!B.gm){var o=uh(t);if(o)return o.setFilterMsg(r,i,{name:e,id:n})}},addFilterMsg:function(i){if(!B.gm){var o=uh(t);if(o)return o.addFilterMsg(r,i,{name:e,id:n})}}}}};return i=t?Object.assign(i,{config:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}}):Object.assign(i,{config:function(e){if(!B.gm&&"object"===c()(e)){var n=uh(t);n&&n._config(e)}},debug:function(){if(!B.gm){var e=uh(t);if(e){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e._baseLog.apply(e,["debug",r].concat(i))}}},info:function(){if(!B.gm){var e=uh(t);if(e){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e._baseLog.apply(e,["info",r].concat(i))}}},warn:function(){if(!B.gm){var e=uh(t);if(e){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e._baseLog.apply(e,["warn",r].concat(i))}}},error:function(){if(!B.gm){var e=uh(t);if(e){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e._baseLog.apply(e,["error",r].concat(i))}}}}),uh(t)||lh(t,new ah({isClientReport:e.isClientReport,pluginId:t,pluginVersion:n,mode:t?"kv":"normal"})),i},fh=function(e,t,n){n=n||{};var r="develop"===fe.Z.envVersion||"trial"===fe.Z.envVersion;return n.isClientReport=!r,dh(n,e,t)},ph=function(e){if(!B.gm){var t,n=(t=[],sh&&t.push(sh),Object.keys(ch).forEach((function(e){return t.push(ch[e])})),t);n.length&&n.forEach((function(t){try{t.upload(e)}catch(e){}}))}};(0,Mt.J)((function(e){B.gm||e&&8===e.targetAction||$p&&(rh&&clearTimeout(rh),rh=setTimeout((function(){void 0!==__appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain("").forEach((function(e){ph(e.route)})):(0,Ce.aI)()&&ph();rh=null}),10))}));var hh,gh=function(e){var t=(0,An.hI)(this);(0,d.qu)(t)("chooseShareGroup",e)},vh=(0,on.s)("memoryWarning"),_h=vh.onMethod,mh=vh.offMethod;(0,d.jQ)("onMemoryWarningReceive",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(B.wZ&&e.level<10)){var t=vh.getGlobalListeners();t.length?vh.emitGlobal(e):"function"==typeof hh&&hh(e)}}));var yh=[],bh="undefined"!=typeof document,wh=!1;void 0!==__wxConfig&&(!__wxConfig.platform&&bh?window.navigator.userAgent.toLowerCase().indexOf("wechatdevtools")>=0&&(wh=!0):"devtools"===__wxConfig.platform&&(wh=!0));var Ih=wh?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={category:e,name:t,timeStamp:"undefined"!=typeof performance&&performance.now?performance.timing.navigationStart+performance.now():Date.now(),phase:"B",args:JSON.stringify(n)};yh.push(r),"undefined"!=typeof WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke&&WeixinJSBridge.invoke("traceEvent",{events:[r]})}:function(){},Sh=wh?function(e){var t=yh.pop();t?(t.args=e?t.args:JSON.stringify(e),t.timeStamp="undefined"!=typeof performance&&performance.now?performance.timing.navigationStart+performance.now():Date.now(),t.phase="E","undefined"!=typeof WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke&&WeixinJSBridge.invoke("traceEvent",{events:[t]})):console.error("[Perf] Call traceBeginEvent() before traceEndEvent().")}:function(){},Ch=null,Th=null,Eh=null,kh=null,xh=new Promise((function(e){kh=e}));fe.Z.onReady((function(){var e=function(e){Th=e,Eh=fe.Z,Ch=(0,Dr.m4)(),kh()};new Promise((function(e,t){(0,Dc.getNetworkType)({success:function(t){e(t.networkType)},fail:function(e){t(e)}})})).then((function(t){e(t)})).catch((function(){e(null)}))}));var Ah,Ph=function(e){Eh?e():xh.then(e)},Dh={enabled:!0,sampleRate:1,batchTime:300,legacyReportEnabled:!0,bufferCapacity:1e3,userUin:0},Oh=!1;function Nh(e,t){if(0===t)return!1;var n=Math.ceil(1/t);return e%n===parseInt(Date.now()/864e5,10)%n}function Rh(){var e=void 0!==__appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],t=Ch&&Ch.brand,n=Ch&&Ch.model,r=Ch&&Ch.platform,i=Ch&&Ch.system,o=Eh&&Eh.appLaunchInfo&&Eh.appLaunchInfo.scene,a=Eh&&fe.Z.envVersion,s=Ch&&Ch.version,c=Ch&&Ch.SDKVersion,u=e.length>0&&e[e.length-1].__route__||"";return{platform:r,system:i,path:u=function(e){if(!e)return"";var t=e.indexOf("?");return t>-1?e.substring(0,t):e}(u),scene:o,brand:t,model:n,networkType:Th,envType:a,clientVersion:s,sdkVersion:c}}var Mh=(0,Ce.Fr)((0,Nr.Ce)(!1,"UploadByApi")),Lh={};function Bh(){var e=Object.keys(Lh);if(!(e.length<=0)&&Dh.enabled&&("release"!==fe.Z.envVersion||1===Dh.sampleRate||!Dh.userUin||Nh(Dh.userUin,Dh.sampleRate)))for(var t="develop"===fe.Z.envVersion||"trial"===fe.Z.envVersion,n=0,r=e;n<r.length;n++){var i=r[n],o=Lh[i],a={key:o.key,value:o.valueSum/o.count,num:o.count},s=o.baseInfo,c=o.dimensions;t?c.length>0?Hh({appId:o.appId,metrics:a,baseInfo:s,interfaces:"log_20004",busid:"b_wxg_wxa_miniprogram_performance",dimensions:c}):Hh({appId:o.appId,metrics:a,baseInfo:s,interfaces:"log_20002",busid:"b_wxg_wxa_miniprogram_performance"}):c.length>0?Gh({appId:o.appId,metrics:a,baseInfo:s,interfaces:"log_20003",busid:"b_wxg_wxa_miniprogram_performance",dimensions:c}):Gh({appId:o.appId,metrics:a,baseInfo:s,interfaces:"log_20001",busid:"b_wxg_wxa_miniprogram_performance"}),delete Lh[i],Reporter.reportKeyValue({key:"PerfReport",value:[o.appId,s.platform,s.scene,s.brand,s.model,s.networkType,s.envType,a.key,a.value,a.num,parseInt(Date.now()/1e3,10)].join(",")})}}var Fh=null;function jh(){var e="develop"===fe.Z.envVersion||"trial"===fe.Z.envVersion?60:Dh.batchTime;Fh&&clearInterval(Fh),Fh=setInterval(Bh,1e3*e)}var Wh=!1;function Uh(){Wh=!0,Ph((function(){setTimeout(Bh,3e4),jh(),(0,Mt.J)((function(){Bh()})),(0,Qt.T)((function(){jh()}))}))}function Vh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,n=e.metrics,r=void 0===n?{}:n,i=e.dimensions,o=void 0===i?[]:i,a="";o.length>0&&(a="_"+o.join("_"));var s=Rh(),c="".concat(r.key,"_").concat(s.networkType,"_").concat(s.scene).concat(a),u=Object.keys(Lh).length;if(!(u>Dh.bufferCapacity)){Lh[c]||(Lh[c]={appId:t,key:r.key,valueSum:0,count:0,baseInfo:s,dimensions:o});var l=Lh[c];l&&(l.valueSum+=r.value,l.count++)}}function Gh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,n=e.metrics,r=void 0===n?{}:n,i=e.baseInfo,o=void 0===i?{}:i,a=e.interfaces,s=void 0===a?"":a,c=e.busid,u=void 0===c?"":c,l=e.dimensions,d=JSON.stringify({appId:t,base:o,metrics:r,dimensions:l,time:parseInt(Date.now()/1e3,10)}),f=JSON.stringify({interface:s,busid:u,data:d});Np(1002,f,!0)}function Hh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,n=e.metrics,r=void 0===n?{}:n,i=e.baseInfo,o=void 0===i?{}:i,a=e.interfaces,s=void 0===a?"":a,c=e.busid,u=void 0===c?"":c,l=e.dimensions;if(Dh.enabled){var d=JSON.stringify({appId:t,base:o,metrics:r,dimensions:l,time:parseInt(Date.now()/1e3,10)});Mh({apiName:"UploadByApi",reqData:{interface:s,busid:u,data:d}}).catch((function(){}))}}var Zh=4294967295;function qh(e,t,n,r){Dh.enabled&&(e||"number"==typeof e||console.warn("[reportPerformance] id can not be empty"),t||"number"==typeof t||console.warn("[reportPerformance] value can not be empty"),e=parseFloat(e),t=parseFloat(t),(Number.isNaN(e)||"number"!=typeof e)&&console.warn("[reportPerformance] id should always be type of Number"),e>=0&&e<=Zh||console.warn("[reportPerformance] id is out of range, will probably cause report failure"),(Number.isNaN(t)||"number"!=typeof t)&&console.warn("[reportPerformance] id should always be type of Number"),t>=0&&t<=Zh?(void 0===n||Array.isArray(n)||(n=[String(n)]),Array.isArray(n)&&(n.length>2&&console.warn("[reportPerformance] expected dimensions length to be less than or equals to 2, but got",n.length),0===(n=n.slice(0,2)).length&&(n[0]="",n[1]=""),1===n.length&&(n[1]=""),n=n.map((function(e){return e?String(e):""})).map((function(e){return e.substring(0,256)}))),n&&Array.isArray(n)||(n=[]),Oh||(Oh=!0,Ah=jp().then((function(e){var t;try{t=JSON.parse(e.rawData)}catch(e){}if(t){var n=t.PerformaceGlobalConf,r=t.PerformacePersonalConf;n&&(void 0!==n.PerformanceOldReportOff&&(Dh.legacyReportEnabled=!(1===n.PerformanceOldReportOff)),void 0!==n.PerformanceReportMaxNum&&(Dh.bufferCapacity=parseInt(n.PerformanceReportMaxNum,10)),void 0!==n.PerformanceMiniprogramlibGatherTime&&(Dh.batchTime=60*parseInt(n.PerformanceMiniprogramlibGatherTime,10))),r&&(void 0!==r.PerformanceMiniprogramlibOff&&(Dh.enabled=!(1===r.PerformanceMiniprogramlibOff)),void 0!==r.PerformanceMiniprogramlibGatherTime&&(Dh.batchTime=60*parseInt(r.PerformanceMiniprogramlibGatherTime,10)),void 0!==r.PerformanceMiniprogramlibSamplingRatio&&(Dh.sampleRate=parseInt(r.PerformanceMiniprogramlibSamplingRatio,10)/100)),Dh.userUin=t.UserUin,300!==Dh.batchTime&&jh()}})).catch((function(e){}))),Wh||Uh(),Ph((function(){"release"===fe.Z.envVersion&&1!==Dh.sampleRate&&Dh.userUin&&!Nh(Dh.userUin,Dh.sampleRate)||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=Object.create(null);i.key=e,i.value=t;var o=Rh(),a="";r?(a=r.pluginId,o.pluginCustomVersion=r.customVersion,o.path=__virtualDOM__.convertRouteToComponentAlias(o.path),o.path.indexOf("plugin")<0&&(o.path="")):a=Eh.accountInfo&&Eh.accountInfo.appId,Vh({appId:a,metrics:i,dimensions:n}),Ah&&Ah.then((function(){"release"===fe.Z.envVersion&&1!==Dh.sampleRate&&Dh.userUin&&!Nh(Dh.userUin,Dh.sampleRate)||Dh.enabled&&Dh.legacyReportEnabled&&Gh({appId:a,metrics:i,baseInfo:o,interfaces:"log_20000_userdefine",busid:"b_wxg_wxa_miniprogram_performance"})}))}(e,t,n,r)}))):console.warn("[reportPerformance] value should be in range of",0," to",Zh))}var zh,Yh=n(3646),Kh=n.n(Yh),Jh=n(862),$h=n.n(Jh),Xh=(0,on.s)("AppPerfRouteNavigation"),Qh=function(e){return e+9782784e5-3600*((new Date).getTimezoneOffset()/60)*1e3},eg=null,tg=new Promise((function(e){eg=e})),ng=new y.y,rg=function e(t,n,r,i){R()(this,e),t&&(this.name=t),n&&(this.entryType=n),r&&(this.startTime=r),i&&(this.duration=i)},ig=function(e){I()(n,e);var t=C()(n);function n(e,r,i,o,a,s,c){var u;return R()(this,n),u=t.call(this,e,r,i,o),s&&(u.navigationType=s),c&&(u.path=c),a&&(u.navigationStart=a),u}return n}(rg),og=function(e){I()(n,e);var t=C()(n);function n(e,r,i,o,a){var s;return R()(this,n),s=t.call(this,e,r,i,o),a&&(s.path=a),s}return n}(rg),ag=function(e){I()(n,e);var t=C()(n);function n(e,r,i,o,a,s){var c;return R()(this,n),c=t.call(this,e,r,i,o),a&&(c.packageName=a),s&&(c.packageSize=s),c}return n}(rg),sg=function(e){I()(n,e);var t=C()(n);function n(e,r,i,o,a,s){var c;return R()(this,n),c=t.call(this,e,r,i,o),a&&(c.moduleName=a),s&&(c.size=s),c}return n}(rg),cg={navigation:"navigation",loadPackage:"loadPackage",render:"render",script:"script"},ug="appLaunch",lg="route",dg="firstRender",fg="downloadPackage",pg="evaluateScript",hg={navigation:"navigation",render:"render"},gg={appLaunch:"appLaunch",route:"route",firstRender:"firstRender"};function vg(e){tg.then((function(){ng.emit(e.entryType,e)}))}function _g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.indexOf("__plugin__")>-1||e.indexOf("plugin-private://")>-1}function mg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.indexOf("__wx__")>-1}void 0!==n.g.performanceChannel&&(n.g.performanceChannel.setReceiver((function(e){if(e&&"evaluateScript"===e.type){var t=e.endTime-e.startTime,n="";n="__APP__/"===e.moduleName?"main":e.moduleName,vg(new sg(pg,cg.script,e.startTime,t,n))}})),delete n.g.performanceChannel),(0,d.jQ)("onNewPerformanceMetric",(function(e){if("$$$loadPackage"===e.name&&!B.gm){var t=e.endTime-e.startTime,n=e.extraInfo&&e.extraInfo.packageName;"__APP__"===n&&(n="main");var r=B.cj?Qh(e.startTime):e.startTime,i=e.extraInfo?e.extraInfo.size:0;vg(new ag(fg,cg.loadPackage,r,t,n,i))}if(B.gm){if("$$$loadPackage"===e.name){var o=e.endTime-e.startTime,a=e.extraInfo&&e.extraInfo.packageName;"__APP__"===a&&(a="main");var s=B.cj?Qh(e.startTime):e.startTime;vg(new ag(fg,cg.loadPackage,s,o,a,0))}if("evaluateJavaScript"===e.name){var c=e.endTime-e.startTime,u="";u=e.moduleName&&e.moduleName.indexOf("__APP__")>-1?"main":e.moduleName,vg(new sg(pg,cg.script,e.startTime,c,u))}if("appLaunch"===e.name){var l=e.startTime,d=e.endTime-l,f=fe.Z.appLaunchInfo;vg(new ig(ug,cg.navigation,l,d,null,"appLaunch",f.path))}}}));var yg={type:"",start:0},bg={time:0,path:""};(0,gr.H)((function(e){bg={time:Date.now(),path:e.path}})),(0,Se.q)((function(e){if(yg&&yg.type&&yg.start){var t=bg.time,n=yg.type,r=Date.now()-yg.start;vg(new ig(lg,cg.navigation,yg.start,r,t,n,e.path))}yg=null,eg()})),Xh.internalOnMethod((function(e){yg=e})),(0,d.Ld)("initReady_getPerformance",(function(e){if(bg.time&&bg.path){var t=e.initReadyTs-bg.time;vg(new og(dg,cg.render,bg.time,t,bg.path))}if(!zh&&!B.gm){zh=e.initReadyTs;var n=fe.Z.appLaunchInfo;if(n.isLaunch){var r,i;B.cj?(r=Qh(n.clickTimestampInMs),i=zh-r):(r=n.clickTimestamp,i=zh-r);var o=new ig(ug,cg.navigation,r,i,null,"appLaunch",n.path);if(7===fe.Z.appType)if(B.wZ)o.preloadType=n.preloadType;else if(B.cj){var a=n.preloadType,s=Math.floor(a%100/10),c=Math.floor(a%10),u=0;0===s&&0===c&&(u=0),1===s&&1===c&&(u=1),2===s&&2===c&&(u=2),0===s&&2===c&&(u=4),2===s&&0===c&&(u=5),o.preloadType=u}vg(o)}}}));var wg=function(){var e;(e=console).warn.apply(e,arguments)},Ig=function(e,t){return e.startTime>=t.startTime},Sg=function(){function e(t){R()(this,e),Object.defineProperty(this,"_list",{value:t,writable:!1,configurable:!1,enumerable:!1})}return P()(e,[{key:"getEntries",value:function(){var e=this._list.slice();return e.sort(Ig),e}},{key:"getEntriesByType",value:function(e){var t=[];if(!e)return wg("entryType is not provided"),t;if(!cg[e])return wg("invalid entryType:",e),t;var n,r=l()(this._list);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.entryType===e&&t.push(i)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getEntriesByName",value:function(e,t){var n=[];if(!e)return wg("getEntriesByName requires name"),n;var r,i=l()(this._list);try{for(i.s();!(r=i.n()).done;){var o=r.value;t&&t!==o.entryType||o.name!==e||n.push(o)}}catch(e){i.e(e)}finally{i.f()}return n}}]),e}(),Cg=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};R()(this,e),this._buffer=[],this._entryList=new Sg(this._buffer),this._bufferSize=30,this._emitter=t,this._internalSubscriptionHandler=function(e){var t;(n._buffer.length>=n._bufferSize&&n._buffer.shift(),0!==n._bufferSize)&&(t=n._buffer).push.apply(t,x()(e.getEntries()))},this._initiateSubscription(r)}return P()(e,[{key:"_initiateSubscription",value:function(){new Tg(this._internalSubscriptionHandler,this._emitter,this._buffer,this._bufferSize).observe({entryTypes:Object.keys(cg)})}},{key:"getEntries",value:function(){return this._entryList.getEntries()}},{key:"getEntriesByType",value:function(e){return this._entryList.getEntriesByType(e)}},{key:"getEntriesByName",value:function(e,t){return this._entryList.getEntriesByName(e,t)}},{key:"createObserver",value:function(e){return new Tg(e,this._emitter,this._buffer,this._bufferSize)}},{key:"setBufferSize",value:function(e){this._bufferSize=e}},{key:"now",value:function(){return Date.now()}}]),e}(),Tg=function(){function e(t,n,r,i){var o=this;R()(this,e),this._emitter=n,this._buffer=r,this._bufferSize=i,this._callback=Reporter.surroundThirdByTryCatch(t,"at api PerformanceObserver callback function"),this._timer=null,this._batchBuffer=[],Object.defineProperty(this,"_observedEntryTypes",{value:[],writable:!1,configurable:!1,enumerable:!1}),this.__handle=function(){return o._handle.apply(o,arguments)}}return P()(e,[{key:"_handle",value:function(e){var t=this;e&&"function"==typeof this._shouldHandle&&this._shouldHandle(e)&&(this._batchBuffer.push(e),null===this._timer&&(this._timer=setTimeout((function(){var e=new Sg(t._batchBuffer);t._callback(e,t),t._batchBuffer=[],t._timer=null}),500)))}},{key:"_shouldHandle",value:function(e){return!e.path||!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return _g(e)||mg(e)}(e.path)}},{key:"observe",value:function(e){if(e)if(this._observedEntryTypes.length>0&&this.disconnect(),e.type||e.entryTypes)if(e.type&&e.entryTypes)wg("observe can only be called with either type or entryTypes, but not both of them");else if(!e.type||cg[e.type]){if(e.entryTypes&&e.entryTypes.forEach((function(e){cg[e]||wg("invalid entry type:",e)})),e.type)this._emitter.on(e.type,this.__handle),this._observedEntryTypes.push(e.type);else if(e.entryTypes){var t,n=l()(e.entryTypes);try{for(n.s();!(t=n.n()).done;){var r=t.value;cg[r]&&(this._emitter.on(r,this.__handle),this._observedEntryTypes.push(r))}}catch(e){n.e(e)}finally{n.f()}}}else wg("invalid entry type:",e.type);else wg("observe can be called with either type or entryTypes provided")}},{key:"disconnect",value:function(){var e,t=l()(this._observedEntryTypes);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._emitter.off(n,this.__handle)}}catch(e){t.e(e)}finally{t.f()}this._observedEntryTypes.splice(0,this._observedEntryTypes.length)}},{key:"supportedEntryTypes",get:function(){return Object.keys(cg)}}]),e}(),Eg=function(e){I()(n,e);var t=C()(n);function n(e,r){var i;return R()(this,n),(i=t.call(this,e,{pluginId:r}))._pluginId=r,i}return P()(n,[{key:"_initiateSubscription",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new kg(this._internalSubscriptionHandler,this._emitter,this._buffer,this._bufferSize,e.pluginId).observe({entryTypes:Object.keys(hg)})}},{key:"createObserver",value:function(e){return new kg(e,this._emitter,this._buffer,this._bufferSize,this._pluginId)}}]),n}(Cg),kg=function(e){I()(n,e);var t=C()(n);function n(e,r,i,o,a){var s;return R()(this,n),(s=t.call(this,e,r,i,o))._pluginId=a,s}return P()(n,[{key:"_handle",value:function(e){return e.path&&(e.path=__virtualDOM__.convertRouteToComponentAlias(e.path)),Kh()($h()(n.prototype),"_handle",this).call(this,e)}},{key:"_shouldHandle",value:function(e){if(!!!(e&&hg[e.entryType]&&gg[e.name]))return!1;if(mg(e.path))return!1;var t,n="plugin-private://".concat(this._pluginId);return!!((e instanceof ig||e instanceof og)&&e.path&&(t=e.path)&&t.indexOf(n)>-1)}},{key:"supportedEntryTypes",get:function(){return Object.keys(hg)}}]),n}(Tg),xg=new Cg(ng);var Ag=new Map;var Pg=new y.Z;(0,d.jQ)("onUpdateStatusChange",(function(e){var t,n=(e.state||"").toLowerCase();e.appContactInfo&&e.appContactInfo.passThroughInfo.forceUpdate||!1?"updateready"===n&&(console.info("[apply update before]"),B.wZ&&fe.Z.clientVersion<=654315263?(0,d.IN)("updateApp",t):(0,Jn._showModal)({content:(0,Qo.S)()?"服务需要重启以使用最新功能":"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete:function(){(0,d.IN)("updateApp",t)}})):(delete e.state,Pg.emit(n,e))}));var Dg,Og=[];Pg.on("updating",(function(){Dg={hasUpdate:!0},Ng()})),Pg.on("noupdate",(function(){Dg={hasUpdate:!1},Ng()}));var Ng=function(){Og.forEach((function(e){"function"==typeof e&&e(Dg)})),Og.length=0},Rg=[],Mg=!1,Lg=!1;Pg.on("updateready",(function(){Mg=!0,Fg()}));var Bg,Fg=function(){Rg.forEach((function(e){"function"==typeof e&&e()})),Rg.length=0},jg=[];Pg.on("updatefailed",(function(){Bg={},Wg()}));var Wg=function(){jg.forEach((function(e){"function"==typeof e&&e(Bg)})),jg.length=0},Ug={onCheckForUpdate:function(e){e=__errorTracer__.surroundThirdByTryCatch(e,"at onCheckForUpdate callback function"),Dg?"function"==typeof e&&e(Dg):Og.push(e)},onUpdateReady:function(e){e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),Mg?"function"==typeof e&&e():Rg.push(e)},onUpdateFailed:function(e){e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),Bg?"function"==typeof e&&e(Bg):jg.push(e)},applyUpdate:function(e){Mg&&Lg?(0,d.YG)("applyUpdate",e,"applyUpdate has been called"):Mg?(Lg=!0,B.wZ&&fe.Z.clientVersion<=654315263?(0,d.IN)("updateApp",e):(0,Jn._showModal)({content:(0,Qo.S)()?"服务需要重启以使用最新功能":"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete:function(){(0,d.IN)("updateApp",e)}})):(0,d.YG)("applyUpdate",e,"update is not ready")}},Vg=n(3541),Gg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(e,{url:"https://support.weixin.qq.com/update/"});(0,Vg.n)(t)},Hg=0,Zg=function(e){Date.now()>Hg&&((0,Jn._showModal)({title:"",content:e,confirmText:"确定",showCancel:!1},50),Hg=Date.now()+6e4)},qg={2:"插件版本过低，无法提供服务"},zg=function(e,t,n){if(!Pn.Z.pluginInfos)return null;var r=Pn.Z.pluginInfos[e];if(!r)return null;var i=r.runningFlag,o=r.banning||{},a=qg[i];return i||o[t]?{all:i,detail:o[t],hint:o.hint||a||n||"由于小程序违规，该服务暂时无法使用"}:null};Pn.Z.emitter.on("pluginInfoFetchDone",(function(){if(void 0!==__virtualDOM__&&__virtualDOM__.initBannedMap){var e={},t=Pn.Z.pluginInfos;for(var n in t)e[n]=zg(n,"components");__virtualDOM__.initBannedMap(e)}}));var Yg,Kg=n(8575),Jg={request:Ad.a,uploadFile:Md,downloadFile:Rr.o,connectSocket:hf().connectSocket},$g={_requestSkipCheckDomain:Ad.a,_uploadFileSkipCheckDomain:Md,_downloadFileSkipCheckDomain:Rr.o,_socketSkipCheckDomainFactory:hf},Xg=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];br.s[e](["[Plugin]"].concat(x()(n.map((function(e){return"string"==typeof e?e:JSON.stringify(e)})))).join(" "))}},Qg=Xg("info"),ev=Xg("warn"),tv=Pn.Z.emitter,nv=Pn.Z.pluginInfos,rv=(Yg={},_a()(Yg,1,!1),_a()(Yg,3,!1),Yg),iv=0,ov=0,av=[10,10,10],sv=!1;Nn()||(rv[2]=!1);var cv=function(e){rv[e]=!0,Object.keys(rv).reduce((function(e,t){return e&&rv[t]}),!0)&&(sv||(Qg("all steps done, emit pluginInfoFetchDone"),tv.emit("pluginInfoFetchDone"),sv=!0),tv.emit("pluginInfoFetchDoneInterval"))},uv=function(e,t){setTimeout((function(){var n=[e,t,__appServiceEngine__.getCurrentRoute(),(0,sr.x)().sessionid||(0,sr.x)().sessionId||"",1,""].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"PluginDisplay",value:n})}),0)},lv=function e(t){Qg("start to invokeGetContact");var n=[],r={};for(var i in nv)n.push(i),r[i]=nv[i].customVersion;0!==n.length?((0,d.IN)("batchGetContact",{appIds:n,success:function(n){var i=n.contactList;if(Qg("batchGetContact result -> ",i),function(e){if(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.appId;if(void 0===n.appId||void 0===n.plugin_list)return;if(!n.plugin_list[0]||!Dn[r])return;var i=n.plugin_list[0].PluginNetWork||{},o=n.plugin_list[0].last_version||{};Dn[r].domains={request:i.RequestDomain||[],uploadFile:i.UploadDomain||[],downloadFile:i.DownloadDomain||[],connectSocket:i.WsRequestDomain||[]},Dn[r].latestCustomVersion=Rn(o.custom_version)}void 0!==vn&&vn(),hn=e,On.forEach((function(e){e(hn)}))}}(i),t>0){var o=!1;if(!o){var a=0;for(var s in nv){if(nv[s].latestCustomVersion>=0&&r[s]>nv[s].latestCustomVersion){Qg("customVersion in code ("+r[s]+") is larger than customVersion in contact info ("+nv[s].latestCustomVersion+"). Retry needed."),o=!0;break}for(var c in nv[s].domains)nv[s].domains[c]&&(a+=nv[s].domains[c].length)}o||a||(Qg("no domains set. Retry needed."),o=!0)}if(o)return void setTimeout((function(){e(t-1)}),1e3)}cv(2)},fail:function(t){ev("batchGetContact failed: "+t.errMsg),iv<1?(Qg("retry to batchGetContact.."),setTimeout(e,0),iv++):cv(2)}}),setTimeout((function(){cv(2)}),12e4)):Qg("appids are empty, skip invokeGetContact.")},dv=null,fv=function(){null!==dv&&(clearTimeout(dv),dv=null,pv())},pv=function e(){Qg("start to invokeVerifyPlugin",Date.now());var t=[];for(var n in nv){var r=nv[n];t.push({provider:n,inner_version:r.version})}0!==t.length?function(e){var t=e.plugins,n=e.success,r=e.fail,i=e.timeout,o=!1,a=setTimeout((function(){o=!0,r({errMsg:"verifyPlugin:fail timeout"})}),1e3*i);(0,d.IN)("verifyPlugin",{data:{plugins:t},success:function(){o||(clearTimeout(a),n.apply(void 0,arguments))},fail:function(){o||(clearTimeout(a),r.apply(void 0,arguments))}})}({plugins:t,timeout:10,success:function(e){var t=e.data;if(void 0!==t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}!function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.plugin_id,i=Dn[r];if(!i)return;i.banning=n.banning,i.runningFlag=n.running_flag_info,i.hostSign={noncestr:n.noncestr||"",timestamp:n.timestamp||"",signature:n.host_sign||""},Nn()&&(i.domains={request:n.request_domain||[],uploadFile:n.upload_domain||[],downloadFile:n.download_domain||[],connectSocket:n.wsrequest_domain||[]})}Mn(e),vn&&vn()}(Array.isArray(t.list)?t.list:[]),Qg("verifyPlugin result -> ",t.list),cv(3),ov=0,dv=setTimeout(fv,6e5)}else ev("Plugin data from backend is not available.")},fail:function(t){var n;ev("invokeVerifyPlugin failed: "+t.errMsg,Date.now()),ov<av.length?n=av[ov]:(rv[3]||cv(3),n=30),Qg("retry invokeVerifyPlugin after ".concat(n,"s..")),setTimeout(e,1e3*n),ov++}}):Qg("plugins is empty, skip invokeVerifyPlugin.")};__safeway__.onSubpackageReady((function(e,t){var n=t.separatedPlugins||[];Qg("onSubpackageReady",n),n.forEach((function(e){nv[e.plugin_id]&&e.custom_version&&(nv[e.plugin_id].customVersion=Rn(e.custom_version))}))}));var hv=function(e,t){var n=zg(e,"domains");if(!n)return!1;if(!n.all){for(var r=n.detail,i=(0,Kg.Qc)(t||""),o=!1,a=0;a<r.length;a++){var s=(0,Kg.Qc)(r[a]||"");if(i.protocol===s.protocol&&i.hostname===s.hostname&&i.port===s.port){o=!0;break}}if(!o)return!1}return Zg(n.hint),!0},gv=function(e,t){var n=t.header||{},r=e.hostSign||{};n["X-WECHAT-HOSTSIGN"]=JSON.stringify(r),wxNativeConsole.info("[Plugin] add host sign: "+JSON.stringify(r)),t.header=n},vv=function(e,t,n){var r=[e,t,__appServiceEngine__.getCurrentRoute(),(0,sr.x)().sessionid||(0,sr.x)().sessionId||"",2,n].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"PluginDisplay",value:r})},_v=!1;fe.Z.onReady((function(){if(B.gm)_v=!1===fe.Z.urlCheck;else{var e=fe.Z.envVersion&&"release"!==fe.Z.envVersion,t=!0===fe.Z.debug;_v=e&&t}}));var mv=function(e,t,n){return new Promise((function(r,i){(0,d.IN)("checkNetworkAPIURL",{api:e,url:t,success:function(e){var o=(0,An.Jv)(t,n)||e.isInLAN&&!e.isLocalHost,a="";o||(a='Url "'.concat(t,"\" not in plugin's domain list."),_v&&console.warn(a+" This network request will be blocked in release version.")),_v||o?r():i(a)},fail:function(e){i(e.errMsg||"check url failed.")}})}))},yv=0,bv=!0,wv=[];Pn.Z.emitter.on("pluginInfoFetchDoneInterval",(function(){for(bv=!1,yv=Date.now();wv.length>0;){wv.shift()()}}));var Iv=function(){return Date.now()-yv>6e5?(bv||fv(),new Promise((function(e){wv.push(e)}))):Promise.resolve()},Sv=Object.assign,Cv={};Object.keys(Jg).forEach((function(e){Cv[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,An.hI)(this),r=Sv({},t);return r.customCheck=function(t,r){var i;Iv().then((function(){var r=(i=Pn.Z.pluginInfos[n]).domains[e],o=e;return"connectSocket"===e&&(o="websocket"),mv(o,t.url,r)})).then((function(){if(hv(n,t.url)){var e='url "'.concat(t.url,'" is temporarily rejected.');r(e)}else vv(n,i.version,t.url),gv(i,t),r(null)})).catch((function(e){var t=(0,W.HD)(e)?e:"check url failed.";r(t)}))},Jg[e](r)}}));const Tv=Cv;var Ev=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(B.cj){var n="preloadWebview:ok preload request ignored in iOS";(0,d.F0)({errMsg:n},"preloadWebview",t,{})}else(0,an.L)("preloadWebview",{pluginId:e},void 0,(function(e){(0,d.F0)(e,"preloadWebview",t,{})}))}},kv=Ev("/"),xv=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,Nr.Ce)(e,t,!0,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,An.hI)(this);r(Object.assign({},e,{pluginId:t}))}},Av=new WeakMap,Pv=function(e,t){var n=zg(e,"apis");return!!n&&(!(!n.all&&n.detail.indexOf(t)<0)&&(Zg(n.hint),!0))},Dv=function(e,t){var n=this,r=function(r){var i=e[r];if("function"==typeof i){var o=n;n[r]=function(e){if((0,f.yR)(r,t)&&!Pv(t,r))return i.apply(o,arguments);if("Sync"===r.slice(-4))throw new p.l0(r+":fail rejected due to no permission currently in plugin");e&&(e.fail||e.complete)&&setTimeout((function(){(0,d.YG)(r,e,"rejected due to no permission currently in plugin")}),0)}}else n[r]=e[r]};for(var i in e)r(i)},Ov=function(e){for(var t in fe.Z.plugins){var n=fe.Z.plugins[t];n.provider===e&&Av.set(this,n.version)}};const Nv=function(){function e(t,n,r){R()(this,e);var i=(0,p.M8)();Pn.Z.puidToPluginWX[i]=this,Pn.Z.pluginIDs[i]=n,Pn.Z.pluginVersions[i]=r;var o=function(e,t,n,r){var i=E()(E()({},$g),{},{_operateWXData:xv(!1)});for(var o in i)i[o]=i[o].bind(e);var a={sdk:i,identifiers:{pluginId:n,pluginVersion:r}};return E()(E()({},t),{},{preloadWebview:Ev(n),cloud:__cloudSDK__.getCloudAPI(a),serviceMarket:__cloudSDK__.getServiceMarketAPI(a)})}(this,t,n,r);Dv.call(this,o,n),Ov.call(this,n)}return P()(e,[{key:"getPluginVersion",value:function(){return Av.get(this)}}]),e}();var Rv={},Mv=function(e,t){var n=(e=e.replace("plugin_","")).endsWith("Sync");Rv[e]=function(e){var r=(0,An.hI)(this);if(n){e&&(e="".concat(r,"/").concat(e));for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return t.apply(void 0,[e].concat(o))}return e.key&&(e.key="".concat(r,"/").concat(e.key)),t(e)}};for(var Lv in Rf)Lv.startsWith("plugin_")&&Mv(Lv,Rf[Lv]);const Bv=Rv;var Fv={createInnerAudioContext:Ht};["createAudioContext","createCameraContext","createMapContext","createVideoContext","createLivePlayerContext","createLivePusherContext"].forEach((function(t){Fv[t]=function(n,r){var i=(0,An.hI)(this),o=(0,An.hb)(this),a=r&&r.__wxExparserNodeId__?r.__wxExparserNodeId__:"";return e[t].call(this,n,h.Z.currentWebviewId,a,"".concat(i,"/").concat(o))}}));const jv=Fv;var Wv={createOffscreenCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="object"===c()(e)?r:{width:e,height:t,compInst:n},i=(0,An.hI)(this);return r.pluginId=i,se.createOffscreenCanvas(r)}},Uv=[];for(var Vv in se)Vv.endsWith("4Plugin")&&Uv.push(Vv);Uv.forEach((function(e){var t=e.replace("4Plugin","");Wv[t]=function(t,n){var r=(0,An.hI)(this),i=(0,An.hb)(this),o=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return se[e].call(this,t,"".concat(r,"/").concat(i),o)}}));const Gv=Wv;var Hv,Zv=n(9567),qv=n(7615),zv=n.n(qv),Yv=n(4642),Kv=n(9583),Jv=n(2186),$v=n(5282),Xv=n(8068),Qv=n(6604),e_=n(4052),t_=n(7937),n_={container:{position:"absolute",hidden:!0,overflow:"hidden"},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},tag:{width:63,height:18,right:0,bottom:0,position:"absolute"},tagView:{hidden:!0,right:0,bottom:0,position:"absolute",flexDirection:"row"},tagBeforeContainer:{width:6,height:18,overflow:"hidden"},tagBefore:{width:12,height:24,borderRadius:6,backgroundColor:"rgba(0, 0, 0, 0.2)"},tagContent:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.2)"},tagMiniapp:{hidden:!0,width:11,height:12,marginRight:1},tagLabel:{height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},r_={container:{flexDirection:"row",justifyContent:"space-between",position:"absolute",hidden:!0,overflow:"hidden",backgroundColor:"#ffffff"},appContainer:{flex:1,flexDirection:"column",backgroundColor:"#ffffff",alignItems:"center",paddingTop:12.5,paddingBottom:12.5},appIcon:{width:37,height:37,borderRadius:18.5},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",justifyContent:"center",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},appName:{height:13,fontSize:11,lineHeight:13,color:"#888888",marginTop:5,marginBottom:15,textAlign:"center"},appButton:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadButton:{width:60,height:27,hidden:!0},downloadButtonText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},i_={1:function(e,t){var n=a_(e.id),r='<text id="{id}" value="{value}" bubble-event="true"></text>';r=s_(r,"id",n),r=s_(r,"value",e.content);var i={};return i[n]={position:"absolute",overflow:"hidden",left:e.left,top:e.top,width:e.width,height:e.height,fontSize:e.font_size,lineHeight:e.line_height,fontWeight:e.font_weight||"normal",color:e.font_color||"#000000",textAlign:e.align||"left",lineBreak:1==e.nowrap?"clip":"break-word"},{widgetTmpl:r,widgetStyle:i,scaleDoms:[n]}},2:function(e,t){var n=a_(e.id),r='<image id="{id}" src="{src}" bubble-event="true"></image>';r=s_(r,"id",n),r=s_(r,"src",e.image_url);var i={};return i[n]={position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height},{widgetTmpl:r,widgetStyle:i,scaleDoms:[n]}},3:function(e,t){},4:function(e,t){var n='\n  <view id="downloadButton" click-state="true">\n    <text id="downloadButtonText" value="{value}" bubble-event="true"></text>\n    <text id="downloadProgress" bubble-event="true">\n      <text id="downloadProgressText" bubble-event="true"></text>\n    </text>\n  </view>\n  <text id="appButton" value="{value}" click-state="true"></text>\n';return{widgetTmpl:n=s_(n,"value",e.title),widgetStyle:{appButton:{position:"absolute",textAlign:"center",left:e.left,top:e.top,width:e.width,height:e.height,lineHeight:e.height,fontSize:e.font_size,color:e.font_color||"#000000",fontWeight:e.font_weight||"normal",backgroundColor:e.background_color||"transparent",borderColor:e.border_color||"transparent",borderWidth:1,borderRadius:e.border_radius},downloadButton:{position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height,hidden:!0},downloadButtonText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:e.font_color||"#04be02",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:"#ffffff",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:e.border_color||"#04be02"}},scaleDoms:["appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]}},5:function(e,t,n){var r=a_(e.id),i=a_(e.id),o=a_(e.id),a='\n  <view id="{wrapId}" bubble-event="true">\n    <image id="{headerId}" src="{header}" bubble-event="true"></image>\n    <text id="{labelId}" value="{label}" bubble-event="true"></text>\n  </view>\n';a=s_(a,"wrapId",r),a=s_(a,"headerId",i),a=s_(a,"header",e.head_url),a=s_(a,"labelId",o),a=s_(a,"label",e.nick_name);var s={},c=120/690*n.width;s[r]={position:"absolute",left:e.left,top:e.top,width:c,overflow:"hidden",flex:1,flexDirection:"column",alignItems:"center"};var u=70/690*n.width;s[i]={width:u,height:u,borderRadius:1==e.head_type?u/5:u/2,marginBottom:10/690*n.width};var l=24/690*n.width;return s[o]={fontSize:l,color:"#888888",width:c,height:l+5,lineHeight:l+5,textAlign:"center",lineBreak:"ellipsis"},{widgetTmpl:a,widgetStyle:s,scaleDoms:[r,i,o]}},6:function(e,t){var n=a_(e.id),r=a_(e.id),i=a_(e.id),o=a_(e.id),a=a_(e.id),s='\n  <view id="{tagViewId}" bubble-event="true">\n    <image id="{tagBeforeId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgm1whMrNszgO3SgLoE6tlNzpKQQm4ubB6PeOLWL30sIWR7Sfsiakp1Ouw/0?wx_fmt=png"></image>\n    <view id="{tagContentId}" bubble-event="true">\n      <image id="{tagMiniappId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgmCKiaGzo9XUvxlDiaibHqzSO9BqvH74E0m5ibptJHaMAxicKvxXmM4LjMicaA/0?wx_fmt=png"></image>\n      <text id="{tagLabelId}" value="{label}" bubble-event="true"></text>\n    </view>\n  </view>\n';s=s_(s,"tagViewId",n),s=s_(s,"tagBeforeId",r),s=s_(s,"tagContentId",i),s=s_(s,"tagMiniappId",o),s=s_(s,"tagLabelId",a),s=s_(s,"label",e.watermark_text);var c={};c[n]={right:0,bottom:0,position:"absolute",flexDirection:"row"},c[r]={width:14,height:18},c[i]={flexDirection:"row",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.6)"},c[o]={hidden:1==e.watermark_icon,width:11,height:12,marginRight:1},c[a]={width:11*e.watermark_text.length+6,height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11};return{widgetTmpl:s,widgetStyle:c,scaleDoms:[]}}},o_=1,a_=function(e){return["wdgt",e,o_++].join("__")},s_=function(e,t,n){return e.replace(RegExp("\\{".concat(t,"\\}"),"gi"),n)},c_=(Hv={adFeedback:{width:46,height:15,backgroundColor:"rgba(40, 40, 40, 0.6)",borderRadius:12,"ios-portrait":{borderRadius:7},"ios-landscape":{borderRadius:7},"iphone x-portrait":{borderRadius:7},"iphone x-landscape":{borderRadius:7},color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:11,left:4,top:1.5,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5},position:"absolute"},rectangle:{top:7,left:32,width:7.2,height:4.2,position:"absolute"},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"}},_a()(Hv,"adCloseBtnLine",{width:134,height:1,backgroundColor:"#E0E0E0"}),_a()(Hv,"adCloseBtnLine0",{width:134,height:1,backgroundColor:"#E0E0E0"}),_a()(Hv,"rectangleClose",{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"}),_a()(Hv,"adCloseTip",{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999}),_a()(Hv,"adCloseTipWrap",{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"}),_a()(Hv,"adCloseTipIcon",{width:48,height:41}),_a()(Hv,"adCloseTipText",{width:200,height:45,marginLeft:8}),_a()(Hv,"adCloseTipTitle",{width:200,height:20,fontSize:18,color:"#3a3a3a"}),_a()(Hv,"adCloseTipContent",{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}),Hv),u_=n(12),l_=u_('\n  <image id="container" click-state="false">\n    <view id="ad-feedback" click-state="true">\n        <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <text id="ad-close-btn" click-state="true" value="关闭"></text>\n      <view id="ad-close-btn-line-dislike"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-affect"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line0"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n    <image id="tag" bubble-event="true"></image>\n    <view id="tagView" bubble-event="true">\n      <view id="tagBeforeContainer">\n        <view id="tagBefore" bubble-event="true"></view>\n      </view>\n      <view id="tagContent" bubble-event="true">\n        <image id="tagMiniapp" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/mini_program_v2.png"></image>\n        <text id="tagLabel" value="" bubble-event="true"></text>\n      </view>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </image>\n').root,d_=(u_('\n  <view id="container" click-state="true">\n    <image id="app-icon" bubble-event="true"></image>\n    <view id="app-information" bubble-event="true">\n      <text id="app-name" bubble-event="true"></text>\n      <text id="app-wording" bubble-event="true"></text>\n    </view>\n    <text id="app-button" click-state="true"></text>\n  </view>\n').root,u_('\n  <view id="container" click-state="false">\n    <image id="image" bubble-event="true">\n        <view id="ad-feedback" click-state="true">\n            <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n            <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n            <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        </view>\n        <view id="ad-feedback-list">\n          <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n          <text id="ad-close-btn" click-state="true" value="关闭"></text>\n          <view id="ad-close-btn-line-dislike"></view>\n          <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n          <view id="ad-close-btn-line-affect"></view>\n          <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n        </view>\n        <view id="ad-feedback-menu">\n          <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n          <view id="ad-close-btn-line"></view>\n          <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n          <view id="ad-close-btn-line0"></view>\n          <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n        </view>\n    </image>\n    <view id="app-container" bubble-event="true">\n      <image id="app-icon" bubble-event="true"></image>\n      <text id="app-name" bubble-event="true"></text>\n      <view id="download-button" click-state="true">\n        <text id="download-button-text" bubble-event="true"></text>\n        <text id="download-progress" bubble-event="true">\n          <text id="download-progress-text" bubble-event="true"></text>\n        </text>\n      </view>\n      <text id="app-button" click-state="true"></text>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n').root),f_=0,p_=0,h_=B.iw,g_=B.cj,v_=B.wZ,__={},m_=[],y_=!0;fe.Z.onReady((function(){var e=(0,Dr.Ew)();if(f_=e.screenWidth,p_=e.screenHeight,y_=(0,Ce.aI)()){var t=n(4853).Z;t.onTouchStart((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&((__={}).touchStartPosX=Math.round(e.changedTouches[0].clientX),__.touchStartPosY=Math.round(e.changedTouches[0].clientY),__.touchEndPosX=0,__.touchEndPosY=0,__.touchStartTime=+new Date,__.touchInterval=0)})),t.onTouchEnd((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&(__.touchEndPosX=Math.round(e.changedTouches[0].clientX),__.touchEndPosY=Math.round(e.changedTouches[0].clientY),__.touchInterval=+new Date-__.touchStartTime,m_.length>=10&&m_.shift(),m_.push(__))}))}}));var b_=1e3,w_=1,I_=2,S_=3,C_=function(e){var t=this;return M_.call(this).then((function(){var n=(0,Qv.Wj)(t),r=n.container.layoutBox,i=r.left,o=r.top,a=(r.width,r.height,{slotid:8040321819858439,ScreenHeight:p_,ScreenWidth:f_,PageY:o,PageX:i,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,TimeMs:+new Date});return e=Object.assign({},a,e),n.adProxy.reportAbnormalDetect(e)}))},T_=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,Qv.Wj)(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&W_.call(this,e,i),r},E_=function(e){var t=(0,Qv.Wj)(this),n=t.container.layoutBox,r=n.left,i=n.top,o=n.width,a=n.height,s=!1,c=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(c=100*(t.data.condition.widget_gray_time_limit||1)),c>0&&+new Date-t.showedExposureTime<c&&(s=!0,t.adProxy.reportAdMonitorData(48));var u=0;t.adProxy.isValidCondition("widget_gray_banner_limit_click")&&(u=100*(t.data.condition.widget_gray_banner_limit_click||5)),u>0&&+new Date-t.lastShowTime<u&&(s=!0,t.adProxy.reportAdMonitorData(155));var l=0;return t.adProxy.isValidCondition("widget_gray_bd_limit")&&(l=t.data.condition.widget_gray_bd_limit||10),e&&l>0&&(e.absoluteEndX-r<l||r+o-e.absoluteEndX<l||e.absoluteEndY-i<l||i+a-e.absoluteEndY<l)&&(s=!0,t.adProxy.reportAdMonitorData(47)),s},k_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,Qv.Wj)(this),r=n.data.antifraudPopup;if(n.clickTime=Date.now(),r)return x_.call(this,e,t);A_.call(this,e,t)},x_=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,Qv.Wj)(this);K_.call(this),(0,Jn._showModal)({content:"即将打开广告详情页",confirmText:"打开",success:function(i){i.confirm?(A_.call(t,e,n,1),U_.call(t,e,{buttonType:1,buttonTime:Date.now()}),r.adProxy.reportAdMonitorData(176)):i.cancel&&(V_.call(t,e,2),U_.call(t,e,{buttonType:2,buttonTime:Date.now()}),Y_.call(t),r.adProxy.reportAdMonitorData(177)),r.adProxy.reportAdMonitorData(174)},fail:function(){A_.call(t,e,n),U_.call(t,e,{buttonType:0,buttonTime:Date.now()}),r.adProxy.reportAdMonitorData(175)}})},A_=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(0,Qv.Wj)(this),o=i.data,a=o.product_type,s=o.button_action.jump_type;g_&&46===a&&6===s?Promise.race([V_.call(this,e,r),(0,Xv.Vs)(500)]).then((function(){Z_.call(t,n)})).catch((function(){Z_.call(t,n)})):(V_.call(this,e,r),Z_.call(this,n))},P_=function(){var e=this,t=(0,Qv.Wj)(this),n=H_.call(this),r=(n.outer,n.inner,n.scale),i=t.data,o=i.crt_size,a=i.use_style_data,s=i.ad_style_data,c=i.dest_type,u=i.product_type;if(a){var l=function(e){var t="",n={container:{hidden:!0,position:"absolute",overflow:"hidden",backgroundColor:e.background_color||"#FFFFFF",width:e.width,height:e.height}},r=[];return t+='<view id="container" click-state="false">',e.widgets.forEach((function(i,o){var a=i_[i.type];if(a){var s=a(i,o,e),c=s.widgetTmpl,u=s.widgetStyle,l=s.scaleDoms;t+=c,n=Object.assign(n,u),r=r.concat(l)}})),t+='\n  <view id="adFeedback" click-state="true">\n    <text id="adText" value="广告" click-state="true" bubble-event="true"></text>\n    <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <text id="ad-close-btn" click-state="true" value="关闭"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    <view id="ad-close-btn-line-affect"></view>\n    <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line0"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="ad-close-tip">\n    <view id="ad-close-tip-wrap">\n      <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n      <view id="ad-close-tip-text" bubble-event="true">\n        <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n        <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n      </view>\n    </view>\n  </view>\n',n=Object.assign(n,c_),{template:t+="</view>",style:n,scaleDoms:r}}(s),d=l.template,f=l.style,p=l.scaleDoms,h=u_(d).root;e_.i.call(this,h,f),t.scaleDoms=p,t.scaleDoms.forEach((function(e){t[e].style.scale=r})),t.appButton&&([12,19].indexOf(u)>-1?O_.call(this):t.appButton.on("click",(function(t){if(T_.call(e,t)&&!E_.call(e,t))return k_.call(e,t,{isButton:!0})}))),t.container.on("click",(function(t){if(T_.call(e,t)&&!E_.call(e,t))return k_.call(e,t)}))}else if([532,608,567].indexOf(o)>-1){e_.i.call(this,l_,n_);var g=t.data,v=g.image,_=v.src,m=(v.width,v.height,g.watermark_text);t.container.src=_,t.tag.style.hidden=!0,t.tagView.style.hidden=!1,t.tagLabel.value=m,t.tagLabel.style.width=11*t.data.watermark_text.length+6,6===t.adProxy.data.dest_type&&(t.tagMiniapp.style.hidden=!1),12===u&&(t.adProxy.setAppInstallState(!1),R_.call(this)),t.container.on("click",(function(t){if(T_.call(e,t)&&!E_.call(e,t))return k_.call(e,t,3===c?{toOfficalAccountDetail:!0}:{})}))}else if(556==o){if([12,19].indexOf(u)>-1){e_.i.call(this,d_,r_);var y=t.data,b=y.width,w=y.image,I=w.src,S=w.width,C=(w.height,y.appInfo),T=C.appName,E=(C.apkName,C.apkUrl,C.appMd5,C.iconUrl);C.urlScheme,C.versionCode,C.channelId;t.image.style.width=239,t.image.style.height=120,t.image.src=I,t.appIcon.src=E,t.appName.value=(0,Xv.$G)(T,16),t.appName.style.width=b-S,t.image.style.scale=r,t.appContainer.style.scale=r,t.appIcon.style.scale=r,t.appIcon.style.borderRadius=4,t.appName.style.scale=r,t.downloadButtonText.style.scale=r,t.downloadProgress.style.scale=r,t.downloadProgressText.style.scale=r,t.downloadButton.style.scale=r,O_.call(this)}else{e_.i.call(this,d_,r_);var k=t.data,x=k.width,A=k.image,P=A.src,D=A.width,O=(A.height,k.app),N=O.icon,R=O.isFollowed,M=O.nickname,L=k.button_action;k.wording;t.image.style.width=239,t.image.style.height=120,t.image.src=P,t.appIcon.src=N,t.appName.value=(0,Xv.$G)(M,16),t.appName.style.width=x-D,t.image.style.scale=r,t.appContainer.style.scale=r,t.appIcon.style.scale=r,t.appName.style.scale=r,t.appButton.style.scale=r,t.appButton.value=23==u&&R?"查看":L.button_text,t.appButton.on("click",(function(t){T_.call(e,t)&&(E_.call(e,t)||(V_.call(e,t),K_.call(e),Z_.call(e,{isButton:!0})))}))}t.container.on("click",(function(t){if(T_.call(e,t)&&!E_.call(e,t))return k_.call(e,t)}))}t.container||t.adProxy.reportAdMonitorData(7)},D_=function(){var e=this,t=(0,Qv.Wj)(this);try{var n=this.style,r=n.left,i=n.top,o=H_.call(this),a=(o.outer,o.inner);o.scale,t.data.type;P_.call(this),t.adFeedback.style.hidden=!1,t.adFeedback.on("click",(function(n){T_.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||F_.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),t.adFeedbackBtn.on("click",(function(n){if(T_.call(e,n,!1)){t.adProxy.openFeedbackUrl(1002);t.adFeedbackList.style.hidden=!0,F_.call(e,{secondGradeId:1,secondGradeDesc:"投诉"})}})),t.adCloseBtn.on("click",(function(n){T_.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,B_.call(e))})),t.adDislikeBtn.on("click",(function(n){T_.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,B_.call(e,2,"不感兴趣"))})),t.adQualityBtn.on("click",(function(n){T_.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,B_.call(e,2,"不感兴趣",4))})),t.adDuplicateBtn.on("click",(function(n){T_.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,B_.call(e,2,"不感兴趣",5))})),t.adDismatchBtn.on("click",(function(n){T_.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,B_.call(e,2,"不感兴趣",1))})),t.adAffectBtn.on("click",(function(n){T_.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,B_.call(e,3,"影响操作"))})),t.adProxy.isValidCondition("widget_gray_close_v2")?(t.adCloseBtnLineDislike.style.hidden=!1,t.adCloseBtnLineAffect.style.hidden=!1,t.adDislikeBtn.style.hidden=!1,t.adAffectBtn.style.hidden=!1,t.rectangle.style.hidden=!1,t.rectangleClose.style.hidden=!0,t.adCloseBtn.style.hidden=!0,L_.call(this)):(t.adFeedbackList.style.height=64,t.adCloseBtnLine.style.hidden=!1,t.adCloseBtn.style.hidden=!1),t.adProxy.preloadLanding(),t.container.style.left=r,t.container.style.top=i,t.container.style.width=a.width,t.container.style.height=a.height,t.adCloseTip.style.width=a.width,t.adCloseTip.style.height=a.height,Kv.uo.add(t.container),t.emitter.emit("load"),t.container.ready().then((function(){(0,Xv.cM)("container 及其子元素 ready"),t.emitter.emit("ready")})).then((function(){C_.call(e,{type:1})}))}catch(e){return t.adProxy.reportAdMonitorData(6,e),Promise.reject({})}},O_=function(){var e=this,t=(0,Qv.Wj)(this),n=t.data.appInfo,r=n.appName,i=n.apkName,o=n.apkUrl,a=n.appMd5,s=(n.iconUrl,n.urlScheme);n.versionCode,n.channelId;t.downloadButton.style.hidden=!1,t.appButton.style.hidden=!0,g_?(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadButton.on("click",(function(t){if(T_.call(e,t)&&!E_.call(e,t))return k_.call(e,t,{isButton:!0})}))):v_&&(t.downloadButtonText.value=t.downloadProgressText.value=t.data.button_action.button_text,R_.call(this),t.downloadButton.on("click",(function(n){if(T_.call(e,n)&&!E_.call(e,n)){V_.call(e,n);var c=t.adProxy.data,u=c.aid,l=c.traceid,d=c.apurl,f=0,p="";if(t.landingCount++,t.lastLandingTime=+new Date,t.lastJsapiStatus=0,t.lastJsapiCostTime=0,4==t.androidAppState)t.adProxy.launchApplication(s).catch((function(e){})),t.lastJsapiName="launchApplication",t.isLandingPage=!0;else if(0==t.androidAppState){var h=[u,l,i.replace(/./g,"_"),0,20,d.indexOf("ad.wx.com")>-1?1:0].join(".");t.adProxy.addDownloadTaskStraight(r,o,a,h).then((function(n){K_.call(e),t.androidDownloadId=n.downloadId,setTimeout(N_.bind(e),b_)})).catch((function(t){Z_.call(e,{isButton:!0})})),t.lastJsapiName="addDownloadTaskStraight",f=4,p="下载"}else t.androidAppState==w_?(t.adProxy.pauseDownloadTask(t.androidDownloadId).catch((function(e){})),t.downloadButtonText.value=t.downloadProgressText.value="继续",t.androidAppState=I_,t.lastJsapiName="pauseDownloadTask",f=5,p="暂停"):t.androidAppState==I_?(t.adProxy.resumeDownloadTask(t.androidDownloadId).then((function(t){setTimeout(N_.bind(e),b_)})).catch((function(e){})),t.downloadButtonText.value=t.downloadProgressText.value="暂停",t.androidAppState=w_,t.lastJsapiName="resumeDownloadTask",f=6,p="继续"):t.androidAppState==S_&&(t.adProxy.installDownloadTask(t.androidDownloadId).catch((function(e){})),t.lastJsapiName="installDownloadTask",f=7,p="安装");f>0&&t.adProxy.reportLandingTime({slotId:8040321819858439,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,openTime:t.lastLandingTime,clickTime:t.lastLandingTime,clkCnt:t.landingCount,jsapiName:t.lastJsapiName,actTypeInt:f,actTypeStr:p})}})))},N_=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=(0,Qv.Wj)(this);r.adProxy.queryDownloadTask(r.androidDownloadId).then((function(n){"download_succ"===n.state?(r.downloadButtonText.value=r.downloadProgressText.value="安装",r.downloadProgress.style.width=r.downloadButton.style.width,r.androidAppState=S_,Y_.call(t)):"downloading"===n.state?(r.downloadButtonText.value=r.downloadProgressText.value="暂停",r.downloadProgress.style.width=r.downloadButton.style.width*parseInt(n.progress)/100,r.androidAppState=w_):"download_fail"===n.state&&(r.downloadButtonText.value=r.downloadProgressText.value=r.data.button_action.button_text,r.downloadProgress.style.width=0,r.androidAppState=0,Y_.call(t)),"downloading"!==n.state&&"default"!==n.state||setTimeout(e.bind(t),b_)})).catch((function(t){n>0&&e(--n)}))},R_=function(){var e=(0,Qv.Wj)(this),t=e.data.appInfo,n=t.apkName,r=t.versionCode,i=t.urlScheme;e.adProxy.getInstallState(n).then((function(t){t.isInstalled&&(void 0===t.versionCode||t.versionCode>=r)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),e.downloadButtonText&&(e.downloadButtonText.value=e.downloadProgressText.value="已安装",i&&i.trim().length>0&&(e.downloadButtonText.value=e.downloadProgressText.value="进入")),e.tagLabel&&i&&i.trim().length>0&&(e.tagLabel.value="进入应用",e.tagLabel.style.width=50))})).catch((function(e){}))},M_=function e(t){var n=this;if(!t||"function"!=typeof t)return new Promise((function(t){return e.call(n,t)}));var r=(0,Qv.Wj)(this);r.isReady?t():r.emitter.on("ready",t)},L_=function(){var e=(0,Qv.Wj)(this),t=H_.call(this),n=(t.inner,t.scale);n=n<.8?.8:n;var r=347/120/(e.adProxy.data.ad_width/e.adProxy.data.ad_height);e.adFeedbackBtn.style.height=e.adDislikeBtn.style.height=e.adAffectBtn.style.height=e.adQualityBtn.style.height=e.adDuplicateBtn.style.height=e.adDismatchBtn.style.height=e.adFeedbackBtn.style.lineHeight=e.adDislikeBtn.style.lineHeight=e.adAffectBtn.style.lineHeight=e.adQualityBtn.style.lineHeight=e.adDuplicateBtn.style.lineHeight=e.adDismatchBtn.style.lineHeight=32*n*r,e.adFeedbackBtn.style.fontSize=e.adDislikeBtn.style.fontSize=e.adAffectBtn.style.fontSize=e.adQualityBtn.style.fontSize=e.adDuplicateBtn.style.fontSize=e.adDismatchBtn.style.fontSize=12*n*r,e.adFeedbackList.style.height=98*n*r,e.adFeedbackMenu.style.height=98*n*r},B_=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(0,Qv.Wj)(this);i.isClosed=!0,i.lastClosedAction="",i.closeAdTime=+new Date,e?(F_.call(this,{secondGradeId:e,secondGradeDesc:t,feedbackReason:r}),(2!==e||r)&&(0,Xv.Vs)(2e3).then((function(){n.hide(),i.emitter.emit("close")}))):(F_.call(this,{firstGradeId:0,firstGradeDesc:""}),this.hide(),i.emitter.emit("close"))},F_=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u,d=(0,Qv.Wj)(this),f=d.container.layoutBox,p=f.left,h=f.top,g=f.width,v=f.height;n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:Math.round(g),adHeight:Math.round(v),adPosX:Math.round(p),adPosY:Math.round(h),expTime:d.showedExposureTime,slotId:8040321819858439,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})},j_=function(){(0,Xv.cM)("开始 update UI");var e=(0,Qv.Wj)(this),t=this.style,n=t.left,r=t.top,i=H_.call(this),o=i.inner,a=i.scale,s=e.data,c=(s.type,s.crt_size),u=s.product_type,l=s.use_style_data;(0,Xv.cM)(this.style.width,this.style.height),(0,Xv.cM)("update UI",o),Object.assign(e.container.style,o,{left:n,top:r});var d=[];return l?d=e.scaleDoms:[532,608,567].indexOf(c)>-1?d=[]:556==c&&23==u?d=["image","appContainer","appIcon","appName","appButton"]:556==c&&[12,19].indexOf(u)>-1&&(d=["image","appContainer","appIcon","appName","appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]),d.forEach((function(t){e[t].style.scale=a})),L_.call(this),e.container.nextUpdate().then((function(){return(0,Xv.cM)("updateUI 完成"),Promise.resolve()}))},W_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,Qv.Wj)(this);if(!X_.call(this)&&n.container&&n.container.layoutBox){var r=n.container.layoutBox,i=r.width,o=r.height,a=0;[0,2,3].includes(t)&&(n.clickCount++,a=n.clickCount);var s={slotid:8040321819858439,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(s)}},U_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,Qv.Wj)(this),r=n.container.layoutBox,i=r.width,o=r.height;return n.adProxy.reportPopupClickAction({buttonType:t.buttonType,buttonTime:t.buttonTime,adClkTime:n.clickTime,adExpTime:n.showedExposureTime,adClkX:parseInt(e.absoluteX,10)||0,adClkY:parseInt(e.absoluteY,10)||0,adWidth:parseInt(i,10)||0,adHeight:parseInt(o,10)||0,isGame:y_?1:0,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2})},V_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,Qv.Wj)(this);if(!X_.call(this)&&n.container&&n.container.layoutBox){var r=n.container.layoutBox,i=r.left,o=r.top,a=r.width,s=r.height,c=Object.keys(__).length?{pos_x:__.touchStartPosX,pos_y:__.touchStartPosY,time:__.touchStartTime}:{pos_x:0,pos_y:0,time:0},u=n.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-i,clickRelativeTop:e.absoluteY-o,pressInterval:e.pressInterval,left:i,top:o,width:a,height:s,weappExtraData:{show_time:n.lastShowTime,last_click:c,popup_click_type:t}});return(0,Xv._u)(u,"banner","点击"),J_.call(this,{stage:1002}),m_=m_.map((function(e){var t=[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval];return"[".concat(t.join(","),"]")})),n.adProxy.reportBannerLastClick({lastClickArr:"[".concat(m_.join(","),"]"),expMs:n.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:i,top:o,width:a,height:s,lastShowTime:n.lastShowTime}),m_=[],u}},G_=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(0,Qv.Wj)(this);if((0,Xv.cM)("检查曝光"),X_.call(this))return(0,Xv.cM)("已经销毁, 不再曝光"),Promise.resolve();if(!r.container.layoutBox)return(0,Xv.cM)("还没经过布局, 下一个 loop 再做"),(0,Xv.Vs)(0).then((function(){return e.call(t,n)}));var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height;if(a>p_-1)return Promise.resolve();var u=!1===r.container.style.hidden;if(r.adProxy.isViewable=!!u,!r.isShowedExposureReported&&u){(0,Xv.cM)("原始曝光"),r.isShowedExposureReported=!0,r.showedExposureTime=+new Date;var l=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"showed"});(0,Xv._u)(l,"banner","原始")}if(a+c/2<=p_&&!r.isViewableExposureReported&&u){if(!n)return(0,Xv.cM)("可视曝光第 1 阶段, 需要 1 秒以后再次检验"),(0,Xv.Vs)(1e3).then((function(){return e.call(t,!0)}));(0,Xv.cM)("可视曝光第 2 阶段"),r.isViewableExposureReported=!0;var d=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"viewable"});(0,Xv._u)(d,"banner","可视")}return Promise.resolve()},H_=function(){var e=(0,Qv.Wj)(this),t=e.data,n=t.width,r=t.height,i=(t.type,t.crt_size),o=t.use_style_data;o?(n=n,r=r):532==i?(n=345,r=99):(608==i||567==i||556==i)&&(n=345,r=120);var a=this.style,s=a.width,c=a.height;o?(s=s||345,c=c||r/n*690/2):(s=s||n,c=c||r);var u=(0,Xv.XS)({outer:{width:s,height:c},inner:{width:n,height:r},minScale:300/n,maxScale:f_/n,side:"width"}),l=e.lastRealWidth!==u.inner.width||e.lastRealHeight!==u.inner.height;return this.style.realWidth=e.lastRealWidth=u.inner.width,this.style.realHeight=e.lastRealHeight=u.inner.height,l&&e.emitter.emit("resize",u.inner),u},Z_=function(e){var t=this,n=(0,Qv.Wj)(this);n.landingCount++,n.landingCount>1&&n.adProxy.reportRepeatClick({slotId:8040321819858439,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,clkCnt:n.landingCount,lastClkPeriod:+new Date-n.lastLandingTime,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,pageStayTime:n.landingPageCostTime,jsapiName:n.lastJsapiName}),n.lastLandingTime=+new Date,n.lastJsapiStatus=2,n.lastJsapiCostTime=0,n.isLandingPage=!1,n.landingPageCostTime=0;var r=n.adProxy.land(e);23==n.data.product_type&&e&&e.isButton&&!n.adProxy.data.biz_info.is_subscribed?(r.then((function(e){var r=/ok/.test(e.errMsg);r&&(n.appButton.value="查看",n.adProxy.data.biz_info&&(n.adProxy.data.biz_info.is_subscribed=1),n.adProxy.reportAdIDKey({key:9})),e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var i=+new Date;n.lastJsapiStatus=0,n.lastJsapiCostTime=i-n.lastLandingTime,"private_addContact"==n.lastJsapiName&&n.adProxy.reportLandingTime({slotId:8040321819858439,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,openTime:n.lastLandingTime,closeTime:i,stayTime:n.lastJsapiCostTime,jsapiName:n.lastJsapiName,clickTime:n.lastLandingTime,clkCnt:n.landingCount,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,actTypeInt:r?2:3,actTypeStr:r?"关注":"取消"}),Y_.call(t)})).catch((function(e){n.lastJsapiStatus=1})),q_.call(this,r)):r.then((function(e){e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==n.lastJsapiName||"navigateToMiniProgram"==n.lastJsapiName||"openADCanvas"==n.lastJsapiName||"launchApplication"==n.lastJsapiName?n.isLandingPage=!0:n.lastJsapiStatus=0,n.lastJsapiCostTime=+new Date-n.lastLandingTime})).catch((function(e){n.lastJsapiStatus=1}))},q_=function(e){var t=(0,Qv.Wj)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(e){return t.adProxy.reportFollow({result:"fail"})}));(0,Xv._u)(n,"banner","关注")},z_=function(e){var t=this;if(!X_.call(this)){var n=(0,Qv.Wj)(this);n.isClosed||n.adProxy.fetch(e).then((function(e){return n.data=e,M_.call(t).then((function(){n.container.style.hidden=!0})).then((function(){return n.isReady=!1,Kv.uo.remove(n.container)})).then((function(){return n.isViewableExposureReported=!1,n.adProxy.isViewable=!1,n.isShowedExposureReported=!1,n.showedExposureTime=0,D_.call(t),M_.call(t)})).then((function(){return X_.call(t)||"hide"===n.lastClosedAction?M_.call(t):n.isHideBYCover?(n.lastDisplayAction="show",M_.call(t)):(n.isShow=!0,J_.call(t,{stage:1001}),Promise.resolve().then((function(){n.container.style.hidden=!1,n.container.nextLayout((function(){return G_.call(t)})),Y_.call(t)})))})).catch((function(e){return n.emitter.emit("_error",e)}))})).catch((function(e){return n.emitter.emit("_error",e)}))}},Y_=function(){var e=this,t=(0,Qv.Wj)(this);if(t.adIntervals>=30&&t.adIntervals<=3600){t.adTimer&&clearTimeout(t.adTimer);var n=1e3*t.adIntervals;t.adTimer=setTimeout((function(){return z_.call(e,!0)}),n)}},K_=function(){if(!X_.call(this)){var e=(0,Qv.Wj)(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)}},J_=function(e){var t={adtype:1,stage:e.stage};(0,Qv.Wj)(this).adProxy.reportADFunnelModel(t)},$_=function(){var e=this;if(!X_.call(this)){var t=(0,Qv.Wj)(this);(0,Xv.cM)("destroy 调用"),K_.call(this),this._destroyed=!0,C_.call(this,{type:2}),M_.call(this).then((function(){return t.updateResult})).then((function(){(0,Xv.cM)("UI update 完成, 正式开始 destroy"),(0,Yv.Tb)(t.checkAdState),(0,Yv.b$)(t.onHide),t.emitter.off("resize"),t.emitter.off("_error"),t.emitter.off("load"),Kv.uo.remove(t.container),(0,Qv.bn)(e)}))}},X_=function(){return this._destroyed},Q_="banner-ad has been destroyed",em=(function(e){I()(n,e);var t=C()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.adUnitId,o=r.style,a=void 0===o?{left:0,top:0,width:0,height:0}:o,s=r.adIntervals,c=void 0===s?0:s;R()(this,n),e=t.call(this);var u=(0,Qv.Wj)(zv()(e));u.emitter=new t_.Z,u.adProxy=new Jv.F({adUnitId:i,adType:"banner"}),u.androidAppState=0,u.androidDownloadId=0,u.clickTime=0,u.clickCount=0,u.landingCount=0,u.lastLandingTime=0,u.lastJsapiName="",u.lastJsapiStatus=0,u.lastJsapiCostTime=0,u.isLandingPage=!1,u.landingPageCostTime=0,u.hideTime=0,u.isShowedExposureReported=!1,u.isViewableExposureReported=!1,u.isReady=!1,u.isShow=!1,u.emitter.on("ready",(function(){return u.isReady=!0})),u.isHideBYCover=!1,u.adCover=new $v.wy({adUnitId:i,adType:"banner"}),u.adIntervals="number"==typeof c?c:0,u.adTimer=null,u.isClosed=!1,u.closeAdTime=0,u.showedExposureTime=0,u.lastShowTime=0,u.clickFirstGradeTime=0,u.adCover.on($v.Xl,(function(){X_.call(zv()(e))||M_.call(zv()(e)).then((function(){u.isShow&&!X_.call(zv()(e))&&(u.container.style.hidden=!0),u.isHideBYCover=!0,u.lastDisplayAction=""})).catch((function(e){}))})),u.adCover.on($v.tn,(function(){X_.call(zv()(e))||M_.call(zv()(e)).then((function(){u.isShow&&!X_.call(zv()(e))&&(u.container.style.hidden=!1),u.isHideBYCover=!1,"show"==u.lastDisplayAction?e.show():"hide"==u.lastDisplayAction&&e.hide()})).catch((function(e){}))})),u.lastRealWidth=0,u.lastRealHeight=0,u.updateResult=Promise.resolve(),e.adUnitId=i,e.style={},e._destroyed=!1;var l=null;Object.keys(a).forEach((function(t){Object.defineProperty(e.style,t,{configurable:!0,enumerable:!0,get:function(){return a[t]},set:function(n){X_.call(zv()(e))||n!==a[t]&&(a[t]=n,u.updateResult=new Promise((function(e){clearTimeout(l),l=setTimeout(e,0)})).then((function(){return M_.call(zv()(e))})).then((function(){return Promise.all([j_.call(zv()(e)),u.container.nextLayout().then((function(){return G_.call(zv()(e))}))])})))}})})),e.style.realWidth=e.style.width,e.style.realHeight=e.style.height;var d=u.adProxy.fetch();return d.catch((function(e){return u.emitter.emit("_error",e)})),u.adFetchResult=d,u.adFetchResult.then((function(t){(u.emitter.emitter._events?Object.keys(u.emitter.emitter._events):[]).includes("_error")||"devtools"!==h_?(u.data=t,D_.call(zv()(e))):console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。")})),u.checkAdState=function(){u.adFetchResult.then((function(){if(u.appButton&&23==u.data.product_type?u.adProxy.checkFollow(u.data.app.uin).then((function(e){var t=u.data.button_action.button_text;u.appButton.value=e?"查看":t,u.adProxy.data.biz_info&&(u.adProxy.data.biz_info.is_subscribed=e?1:0)})):12===u.data.product_type&&R_.call(zv()(e)),u.isLandingPage){u.lastJsapiStatus=0,u.isLandingPage=!1;var t=+new Date;u.landingPageCostTime=t-u.hideTime,u.adProxy.reportLandingTime({slotId:8040321819858439,costType:u.adProxy.data&&u.adProxy.data.is_cpm?1:2,openTime:u.hideTime,closeTime:t,stayTime:u.landingPageCostTime,jsapiName:u.lastJsapiName,clickTime:u.lastLandingTime,clkCnt:u.landingCount,retCode:u.lastJsapiStatus,costTime:u.lastJsapiCostTime,actTypeInt:1})}})).then((function(){!u.isShow||u.adTimer||[w_,I_,S_].includes(u.androidAppState)||Y_.call(zv()(e))})).catch((function(){})),!X_.call(zv()(e))&&u.isClosed&&u.closeAdTime&&+new Date-u.closeAdTime>60*(u.data.condition.widget_gray_close_v2||3)*1e3&&M_.call(zv()(e)).then((function(){u.isClosed=!1,u.closeAdTime=0,z_.call(zv()(e))}))},(0,Yv.dN)(u.checkAdState),u.onHide=function(t){K_.call(zv()(e)),u.hideTime=+new Date},(0,Yv.vv)(u.onHide),e}P()(n,[{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(X_.call(this))return Promise.reject({errMsg:Q_});var i=(0,Qv.Wj)(this);return i.isClosed?(i.lastClosedAction="show",Promise.reject({errMsg:"banner-ad has been closed"})):i.isHideBYCover?(i.lastDisplayAction="show",M_.call(this)):(i.isShow=!0,i.lastShowTime=+new Date,J_.call(this,{stage:1001}),n?i.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):i.adProxy.resetAnalyseBranchInfo(),M_.call(this).then((function(){i.adFeedbackList.style.hidden=!0,i.adFeedbackMenu.style.hidden=!0,i.container.style.hidden=!1,i.container.nextLayout((function(){return G_.call(e)})),Y_.call(e)})))}},{key:"hide",value:function(){var e=this;if(!X_.call(this)){var t=(0,Qv.Wj)(this);return t.isClosed&&(t.lastClosedAction="hide"),t.isHideBYCover?(t.lastDisplayAction="hide",M_.call(this)):(t.isShow=!1,t.adProxy.isViewable=!1,M_.call(this).then((function(){t.container.style.hidden=!0,K_.call(e)})))}}},{key:"destory",value:function(){$_.call(this)}},{key:"destroy",value:function(){$_.call(this)}},{key:"onResize",value:function(e){X_.call(this)||(0,Qv.Wj)(this).emitter.on("resize",e)}},{key:"offResize",value:function(e){X_.call(this)||(0,Qv.Wj)(this).emitter.off("resize",e)}},{key:"onError",value:function(e){X_.call(this)||(0,Qv.Wj)(this).emitter.on("_error",e)}},{key:"offError",value:function(e){X_.call(this)||(0,Qv.Wj)(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){X_.call(this)||(0,Qv.Wj)(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){X_.call(this)||(0,Qv.Wj)(this).emitter.off("load",e)}},{key:"onClose",value:function(e){X_.call(this)||(0,Qv.Wj)(this).emitter.on("close",e)}},{key:"offClose",value:function(e){X_.call(this)||(0,Qv.Wj)(this).emitter.off("close",e)}}])}(Qv.wA),n(7348)),tm=n(7857),nm=n(2395),rm=n(708),im=327,om=249,am=184,sm=140,cm=388,um=308,lm={textAlign:"center",color:"#ffffff",lineBreak:"ellipsis",portrait:{width:247,fontSize:17,height:24,lineHeight:24},landscape:{width:185,fontSize:14,height:20,lineHeight:20}},dm={zIndex:1000009,position:"absolute",top:8,right:6,width:60,height:20,color:"#ffffff",fontSize:11,lineHeight:20,borderRadius:4,textAlign:"center"},fm={body:{zIndex:1000005,position:"absolute",overflow:"visibal",hidden:!0},container:{zIndex:1000005,position:"absolute",overflow:"hidden",opacity:0,hidden:!0,flexDirection:"column",alignItems:"center",justifyContent:"center"},mask:{top:0,left:0,backgroundColor:"#000000",opacity:.7,position:"absolute",overflow:"hidden"},cancelBox:{marginBottom:8,portrait:{width:im,height:36},landscape:{width:om,height:28},flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},cancel:{portrait:{width:36,height:36},landscape:{width:28,height:28}},adContainer:{flexDirection:"column",alignItems:"center",overflow:"hidden",borderRadius:8,portrait:{width:im,height:cm},landscape:{width:om,height:um}},adBackground:{position:"absolute",zIndex:1000006,portrait:{marginTop:90,width:im,height:cm},landscape:{marginTop:70,width:om,height:um},hidden:!0},adMask:{position:"absolute",zIndex:1000007,backgroundColor:"#000000",opacity:.5,borderRadius:8,portrait:{width:im,height:cm},landscape:{width:om,height:um},hidden:!0},adContent:{zIndex:1000008,portrait:{width:im,height:204},landscape:{width:om,height:168},flexDirection:"column",alignItems:"center"},adChannelsLiveReserve:E()(E()({},dm),{},{hidden:!0,backgroundColor:"#959FC1"}),adChannelsLive:E()(E()({},dm),{},{hidden:!0,backgroundColor:"#FF6146",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}),adChannelsLiveIcon:{width:12,height:12,marginRight:4,marginLeft:4},adChannelsLiveText:{width:33,height:20,color:"#ffffff",fontSize:11,lineHeight:20,marginRight:8,textAlign:"center"},adChannelsLiveEnd:E()(E()({},dm),{},{hidden:!0,backgroundColor:"#959FC1"}),adWording:{flexDirection:"column",alignItems:"center",justifyContent:"center",portrait:{marginTop:24,marginBottom:12,height:72},landscape:{marginTop:16,marginBottom:10,height:60}},wordingLine0:lm,wordingLine1:lm,wordingLine2:lm,adButtonGroup:{flexDirection:"column",alignItems:"center",justifyContent:"center"},relationLine:{textAlign:"center",fontSize:12,height:16,lineHeight:16,color:"rgba(0, 0, 0, 0.3)",portrait:{width:247,marginBottom:12},landscape:{width:185,marginBottom:10}},adButton:{borderWidth:1,borderColor:"#ffffff",borderRadius:4,textAlign:"center",color:"#ffffff",portrait:{marginBottom:28,width:184,height:40},landscape:{marginBottom:24,width:184,height:32},flexDirection:"column",alignItems:"center",justifyContent:"center"},adButtonText:{textAlign:"center",color:"#ffffff",letterSpacing:1,fontSize:17,height:24,width:184,lineHeight:24},adFeedbackContainer:{position:"absolute",width:60,height:48,zIndex:1000008,top:0,left:0},adFeedback:{zIndex:1000008,width:35,height:16,marginTop:8,marginLeft:6,position:"absolute"},adFeedbackList:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adFeedbackTitle:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{zIndex:1000008,width:134,hidden:!0,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseTip:{hidden:!0,backgroundColor:"#ffffff",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:1000009,portrait:{width:im,height:400},landscape:{width:om,height:um}},adCloseTipWrap:{width:140,height:200,flex:1,justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:64,height:55},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a",marginTop:20,textAlign:"center"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:10,textAlign:"center"}},pm={adMedia:{zIndex:1000008,portrait:{width:im,height:am},landscape:{width:om,height:sm}},adVideoAudioBox:{zIndex:1000008,position:"absolute",bottom:0,left:0,width:40,height:40},adVideoAudioIcon:{position:"absolute",bottom:8,left:8,width:24,height:24,hidden:!1},adVideoCountDown:{position:"absolute",top:8,right:10,color:"#ffffff",fontSize:12,lineHeight:18,width:24,height:18,textAlign:"right"},adVideoAfter:{position:"absolute",portrait:{width:im,height:am},landscape:{width:om,height:sm},hidden:!0,alignItems:"center",opacity:0},adVideoAfterMask:{position:"absolute",backgroundColor:"#000000",opacity:.7,portrait:{width:im,height:am},landscape:{width:om,height:sm}},adVideoClickMask:{position:"absolute",zIndex:1000008,borderRadius:6,portrait:{width:im,height:am},landscape:{width:om,height:sm}},adVideoAfterIcon:{zIndex:1000008,flexDirection:"row",portrait:{width:48,height:48,marginTop:52,marginBottom:8},landscape:{width:36,height:36,marginTop:44,marginBottom:6},alignSelf:"center",borderRadius:4},adVideoAfterText:{zIndex:1000008,portrait:{fontSize:16,width:im},landscape:{fontSize:11,width:om},lineHeight:22,color:"#ffffff",textAlign:"center",height:22}},hm={adMedia:{zIndex:1000008,portrait:{width:im,height:am},landscape:{width:om,height:sm}}},gm='\n    <view id="ad-feedback-container">\n      <image id="ad-feedback"  bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/adfeedback.png"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  ',vm='\n    <view id="ad-video-container" click-state="true">\n      <video id="ad-media" click-state="true" bubble-event="true" controls="false" muted="true" autoplay="false" object-fit="cover" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad">\n        <view id="ad-video-click-mask" click-state="true" bubble-event="true"></view>\n        '.concat('\n    <text id="ad-video-Count-Down">\n    </text>\n  ',"\n        ").concat('\n    <view id="ad-video-audio-box">\n      <image id="ad-video-audio-icon" bubble-event="true"></image>\n    </view>\n  ',"\n        ").concat('\n    <image id="ad-video-after" click-state="true" bubble-event="true" >\n        <view id="ad-video-after-mask" click-state="true" bubble-event="true"></view>\n        <image id="ad-video-after-icon" click-state="true" bubble-event="true"></image>\n        <text id="ad-video-after-text" click-state="true" bubble-event="true"></text>\n    </image>\n  ',"\n        ").concat(gm,"\n      </video>\n    </view>\n  "),_m='\n    <image id="ad-media">\n      '.concat(gm,"\n    </image>\n  "),mm='\n  <text bubble-event="true"></text>\n',ym=n(12),bm="https://wxa.wxs.qq.com/images/wxapp/new_audio_mute_icon.png",wm=0,Im=0,Sm=B.cj,Cm=B.wZ,Tm="",Em=!0,km="image",xm="video";fe.Z.onReady((function(){Tm=(0,rm._t)();var e=(0,Dr.Ew)();wm=e.screenWidth,Im=e.screenHeight;try{fe.Z.global.window.pageOrientation&&fe.Z.global.window.pageOrientation}catch(e){}Em=(0,Ce.aI)()}));var Am=0xac3cfbe83299d,Pm="interstitial-ad has been destroyed",Dm=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(oy.call(this))return!1;var n=(0,Qv.Wj)(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&Nm.call(this,e,i),r},Om=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(oy.call(this))return!1;var n=(0,Qv.Wj)(this),r=!1,i=0;return n.adProxy.isValidCondition("widget_gray_time_limit_2")&&(i=100*(n.data.condition.widget_gray_time_limit_2||5)),i>0&&(0===n.startExposureTime||+new Date-n.startExposureTime<i)&&(r=!0,n.adProxy.reportAdMonitorData(49,{clickType:t})),n.isShow||(r=!1),r},Nm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!oy.call(this)){var n=(0,Qv.Wj)(this);if(n.container&&n.container.layoutBox){var r=n.container.layoutBox,i=r.width,o=r.height,a=0;[0,2,3].includes(t)&&(n.clickCount++,a=n.clickCount);var s={slotid:Am,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(s)}}},Rm=function(e){if(!oy.call(this)){var t=(0,Qv.Wj)(this);if(t.container&&t.container.layoutBox){var n=t.container.layoutBox,r=n.left,i=n.top,o=n.width,a=n.height,s={currentTime:t.videoCurrentTime,duration:t.videoDuration},c=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-i,pressInterval:e.pressInterval,left:r,top:i,width:o,height:a,videoData:s});return(0,Xv._u)(c,"interstitialAd","点击"),Mm.call(this,{stage:1002}),c}}},Mm=function(e){var t=e.stage;if(!oy.call(this)){var n={adtype:3,stage:t};(0,Qv.Wj)(this).adProxy.reportADFunnelModel(n)}},Lm=function(e){if(!oy.call(this)){var t=(0,Qv.Wj)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(e){return t.adProxy.reportFollow({result:"fail"})}));(0,Xv._u)(n,"interstitialAd","关注")}},Bm=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!oy.call(this)){var r=(0,Qv.Wj)(this);if((0,Xv.cM)("插屏广告 - 检查曝光"),!r.container.layoutBox)return(0,Xv.cM)("插屏广告 - 尚未完成布局，等待下一个loop检查"),(0,Xv.Vs)(0).then((function(){return e.call(t,n)}));var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height,u=!1===r.container.style.hidden;if(!r.isShowedExposureReported&&u){(0,Xv.cM)("插屏广告 - 原始曝光"),r.isShowedExposureReported=!0,r.startExposureTime=+new Date,cy.call(this);var l=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"showed"});(0,Xv._u)(l,"interstitialAd","原始")}if(!r.isViewableExposureReported&&u&&r.ad_type===km){if(!n)return(0,Xv.cM)("可视曝光第 1 阶段, 需等待 1 秒后再检查"),(0,Xv.Vs)(1e3).then((function(){return e.call(t,!0)}));(0,Xv.cM)("插屏广告 - 可视曝光第 2 阶段"),r.isViewableExposureReported=!0,r.adProxy.isViewable=!0;var d=r.adProxy.reportExposure({left:o,top:a,width:s,exposureType:"viewable"});(0,Xv._u)(d,"interstitialAd","可视")}}},Fm=function(e){if(!oy.call(this)){var t=(0,Qv.Wj)(this),n=+new Date,r={slotid:Am,is_game:Em?1:0,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,close_type:e,exposure_duration:n-t.startExposureTime-t.hideDuration,start_time:t.startExposureTime,close_time:n};return t.adProxy.reportCloseAction(r)}},jm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!oy.call(this)){var n=(0,Qv.Wj)(this),r=n.adContainer.style,i=r.width,o=r.height,a={click_button:e,cost_type:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,slotid:Am,is_game:Em?1:0,pageentertime:+new Date(n.adProxy.getProgramStartTime()),ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,clientexptime:n.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:wm,screen_height:Im};return n.adProxy.reportAntifraud(a)}},Wm=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!oy.call(this)){var d=(0,Qv.Wj)(this),f=d.container.layoutBox;f.left,f.top,f.width,f.height;n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:wm,adHeight:Im,adPosX:0,adPosY:0,expTime:d.startExposureTime,slotId:Am,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})}},Um=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!oy.call(this)){var t=(0,Qv.Wj)(this);return Object.assign({autoCloseTime:t.autoCloseTime,launchTime:t.launchTime,frequencyTime:t.frequencyTime},e)}},Vm=function(){if(!oy.call(this)){var e=(0,Dr.xI)();wm=e.screenWidth,Im=e.screenHeight,Tm=wm>Im?"landscape":"portrait"}},Gm=function(){var e=this;if(!oy.call(this)){var t=(0,Qv.Wj)(this),n=t.adProxy.fetch();return n.catch((function(e){return t.emitter.emit("_error",e)})),t.adFetchResult=n,t.adFetchResult.then((function(n){return t.isData=!0,t.data=n||{},t.autoCloseTime=n.card_info&&n.card_info.auto_close_time||15,t.launchTime=n.card_info&&n.card_info.launch_time||15,t.frequencyTime=n.card_info&&n.card_info.frequency_time||15,qm.call(e)})).catch((function(e){return Promise.reject(e)}))}},Hm=function(e){var t=this,n=(0,Qv.Wj)(this),r=function(e){var t="",n="";switch(e){case"image":t=_m,n=E()(E()({},fm),hm);break;case"video":t=vm,n=E()(E()({},fm),pm);break;default:t=_m,n=E()(E()({},fm),hm)}return{template:'\n  <view id="body">\n    <view id="container">\n      <view id="mask" bubble-event="true"></view>\n      <view id="cancel-box">\n        <image id="cancel" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/interstitialClose.jpeg"></image>\n      </view>\n      <view id="ad-container">\n        <image id="ad-background"></image>\n        <view id="ad-mask"></view>\n        '.concat(t,'\n        <text id="ad-channels-live-reserve" value="直播预约"></text>\n        <view id="ad-channels-live">\n          <image id="ad-channels-live-icon" src="https://wxa.wxs.qq.com/images/wxapp/live_icon_1.png"></image>\n          <text id="ad-channels-live-text" value="直播中"></text>\n        </view>\n        <text id="ad-channels-live-end" value="直播结束"></text>\n        <view id="ad-content">\n          <view id="ad-wording">\n          </view>\n          <view id="ad-button-group">\n            <text id="relation-line">placeholder</text>\n            <view id="ad-button" click-state="true">\n              <text id="ad-button-text" click-state="true" bubble-event="true"></text>\n            </view>\n          </view>\n        </view>\n        <view id="ad-close-tip">\n          <view id="ad-close-tip-wrap">\n            <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=b7cf6bfe332cf0a981234fdfd5bde985&filekey=3033020101041f301d02016d040253480410b7cf6bfe332cf0a981234fdfd5bde985020207b7040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353331363030303733623437313336666664393331323630333230613030303030303664&bizid=1023"></image>\n            <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n            <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n  '),style:n}}(n.ad_type),i=r.template,o=r.style;n.cardStyle=o,n.cardXOM=ym(i).root,e_.i.call(this,n.cardXOM,o),Kv.uo.add(n.body),n.container.on("click",(function(e){if(Dm.call(t,e,!1)&&!n.isShowCloseTip&&!Om.call(t,e,4)){if(n.isClosing)return Promise.resolve();ty.call(t,1),jm.call(t,4,e)}})),n.cancelBox.on("click",(function(e){if(n.isShow||n.adProxy.reportAdMonitorData(124,{isClosing:n.isClosing}),Dm.call(t,e,!1)&&!n.isShowCloseTip&&!Om.call(t,e,3)){if(n.isClosing)return Promise.resolve();ty.call(t,0),jm.call(t,3,e)}})),n.adFeedbackContainer.on("click",(function(e){Dm.call(t,e,!1)&&(Om.call(t,e)||(n.adFeedbackList.style.hidden=!n.adFeedbackMenu.style.hidden||!n.adFeedbackList.style.hidden,n.adFeedbackMenu.style.hidden=!0,n.adFeedbackList.style.hidden||Wm.call(t,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),n.adFeedbackBtn.on("click",(function(e){Dm.call(t,e,!1)&&(Om.call(t,e)||(n.adProxy.openFeedbackUrl(Em?1007:1006),n.adFeedbackList.style.hidden=!0,Wm.call(t,{secondGradeId:1,secondGradeDesc:"投诉"})))})),n.adDislikeBtn.on("click",(function(e){Dm.call(t,e,!1)&&(Om.call(t,e)||(n.adFeedbackList.style.hidden=!0,n.adFeedbackMenu.style.hidden=!1,Wm.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),n.adQualityBtn.on("click",(function(e){Dm.call(t,e,!1)&&(Om.call(t,e)||(n.adFeedbackMenu.style.hidden=!0,Wm.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),ty.call(t,7),jm.call(t,8,e)))})),n.adDuplicateBtn.on("click",(function(e){Dm.call(t,e,!1)&&(Om.call(t,e)||(n.adFeedbackMenu.style.hidden=!0,Wm.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),ty.call(t,7),jm.call(t,8,e)))})),n.adDismatchBtn.on("click",(function(e){Dm.call(t,e,!1)&&(Om.call(t,e)||(n.adFeedbackMenu.style.hidden=!0,Wm.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),ty.call(t,7),jm.call(t,8,e)))})),n.adButton.on("click",(function(e){Dm.call(t,e)&&(Om.call(t,e,1)||ny.call(t,e,1))})),n.adWording.on("click",(function(e){jm.call(t,5,e)})),n.ad_type===km&&n.adMedia.on("click",(function(e){n.adProxy.isValidCondition("widget_gray_optimizedstyle")?Dm.call(t,e)&&(Om.call(t,e,2)||ny.call(t,e,2)):jm.call(t,2,e)})),n.ad_type===xm&&(n.adVideoClickMask.on("click",(function(e){Dm.call(t,e)&&(Om.call(t,e,2)||ny.call(t,e,2))})),n.adVideoAfter.on("click",(function(e){Dm.call(t,e)&&(Om.call(t,e,2)||ny.call(t,e,2))})),n.adVideoAudioBox.on("click",(function(e){Dm.call(t,e,!1)&&(Om.call(t,e,1)||(n.adMedia.muted=!n.adMedia.muted,n.adVideoAudioIcon.src=n.adMedia.muted?bm:"https://wxa.wxs.qq.com/images/wxapp/new_audio_icon.png"))})),n.adMedia.onTimeUpdate((function(e){var r=e.duration,i=e.position;if(!oy.call(t)){if(ay.call(t),n.adMedia.autoplay=!1,i>0&&(n.videoCurrentTime=1e3*i),n.isFirstPlay){n.adProxy.setTimePoint("p21",{time:Date.now()-1e3*i});var o=0;n.showTime>n.videoFirstPlayTime&&(o=n.showTime-n.videoFirstPlayTime),n.adProxy.reportVideoLoadTime({beginTime:n.videoFirstPlayTime,endTime:(new Date).getTime()-parseInt(1e3*i),departureTime:o,reportType:1,preloadVideo:n.preloadVideo?1:0,preloadVideoSuccess:n.preloadVideoSuccess?1:0}),n.isFirstPlay=!1,Mm.call(t,{stage:1004}),n.isFirstPlaySuccess=!0,n.adProxy.reportAdIDKey({key:103})}if(i>=1&&!n.isViewableExposureReported){var a=n.adMedia.style,s=a.width,c=a.height;n.isViewableExposureReported=!0,n.adProxy.isViewable=!0;var u=n.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:s,height:c});(0,Xv._u)(u,"插屏视频","播放曝光")}var l=Math.ceil(r-i);n.adVideoCountDown.value="".concat(l.toString(),"s"),Sm&&r-i<.6&&n.adVideoAfter.style.hidden&&(n.adVideoAfter.style.hidden=!1,n.adVideoAfter.animate({opacity:1,duration:350}),n.adVideoAudioBox.style.hidden=!0,n.adVideoCountDown.style.hidden=!0),n.videoDuration=1e3*r}})),n.adMedia.onEnded((function(){n.videoCurrentTime=n.videoDuration,n.isEnded=!0,n.isPlaying=!1,sy.call(t);var e=n.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted});(0,Xv._u)(e,"插屏视频","播放完成"),n.adVideoAfter.style.hidden=!1,n.adVideoAudioBox.style.hidden=!0,n.adVideoCountDown.style.hidden=!0,Cm&&n.adVideoAfter.animate({opacity:1,duration:300}),n.adProxy.reportAdMonitorData({key:104})})),n.adMedia.onError((function(e){sy.call(t),n.adProxy.reportAdMonitorData(101,e)})))},Zm=function(){if(!oy.call(this)){var e=(0,Qv.Wj)(this),t=e.data,n=t.width,r=t.height,i="portrait"===Tm?im/n:om/n,o="portrait"===Tm?cm/r:um/r,a="portrait"===Tm?wm/375:Im/375;e.adMedia.scale=i;var s=Object.keys(e.cardStyle);s.forEach((function(t){if(e.cardStyle[t].hasOwnProperty(Tm)){var n=e.cardStyle[t][Tm];Object.keys(n).forEach((function(r){e[t]&&(e[t].style[r]=n[r],e.cardStyle[t][r]=n[r])}))}})),e.adBackground.scale=o;var c=n*o;e.adBackground.style.width=e.cardStyle.adBackground.width=c,"portrait"===Tm?(e.adMedia.style.width=e.cardStyle.adMedia.width=im,e.adMedia.style.height=e.cardStyle.adMedia.height=am,e.adBackground.style.height=e.cardStyle.adBackground.height=cm,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(c-im)/2):"landscape"===Tm&&(e.adMedia.style.width=e.cardStyle.adMedia.width=om,e.adMedia.style.height=e.cardStyle.adMedia.height=sm,e.adBackground.style.height=e.cardStyle.adBackground.height=um,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(c-om)/2);var u=["width","height","fontSize","lineHeight","borderRadius"];return s.forEach((function(t){if(!["container","mask","body"].includes(t))if(u.forEach((function(n){e[t]&&e[t].style.hasOwnProperty(n)&&(e[t].style[n]=e.cardStyle[t][n]*a)})),"adWording"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*a;else if("adButton"===t)e[t].style.marginBottom=e.cardStyle[t].marginBottom*a;else if("adVideoAfterIcon"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*a,e[t].style.marginBottom=e.cardStyle[t].marginBottom*a;else if(0===t.indexOf("wordingLine")){var n="portrait"===Tm?im:om;e[t]&&e[t].style&&(e[t].style.width=n*a)}})),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedbackList.style.height=98,e.adFeedbackBtn.style.height=32,e.adDislikeBtn.style.height=32,e.adCloseBtnLineDislike0.style.hidden=!1,e.adCloseBtnLineDislike1.style.hidden=!1,e.adCloseBtnLineDislike2.style.hidden=!1,e.adCloseBtnLineDislike3.style.hidden=!1,e.adDislikeBtn.style.hidden=!1),e.container.style.width=wm,e.container.style.height=Im,e.body.style.width=wm,e.body.style.height=Im,e.mask.style.width=wm,e.mask.style.height=Im,e.container.nextLayout().then((function(){return(0,Xv.cM)("updateUI 完成"),!Em&&Sm?e.container.forceUpdate():Promise.resolve()}))}},qm=function(){var e=this;if(!oy.call(this)){var t=(0,Qv.Wj)(this);try{var n,r=t.data,i=r.app,o=r.appInfo,a=(o.apkName,o.channelId,o.urlScheme,r.product_type),s=(r.dest_type,r.crt_size),c=r.crtInfo,u=r.button_action,l=r.image_url,d=r.card_info,f=d.bg_color,p=d.font_color,h=d.bg_img,g=d.desc,v=d.thumb,_=d.title,m=r.condition,y=r.extBackComm,b=c&&c[0]&&c[0].card_info&&c[0].card_info.mp_tag_type;switch(s){case 701:t.ad_type=km;break;case 913:t.ad_type=xm;break;default:t.ad_type=km}if(t.body&&Kv.uo.remove(t.body),Hm.call(this),t.body.fullscreen=!0,Em||(t.body.style.fixed=!0),t.ad_type===xm){var w=t.data.short_video,I=w.thumb_url,S=w.video_url,C=w.video_duration;t.adMask.style.hidden=!0,t.adBackground.style.hidden=!0,t.adVideoAfter.style.hidden=!0,t.adVideoAudioIcon.src=bm,t.adVideoAfter.src=h,t.adVideoAfterIcon.src=v,t.adVideoAfterText.value=_,t.videoDuration=1e3*C,t.adMedia.autoplay=!1,Sm&&t.adMedia.src==S&&t.adMedia.seek(0),Sm?(t.adMedia.poster=I,(0,Xv.Vs)(500).then((function(){t.adMedia.src=S,t.adProxy.setTimePoint("p8")}))):(t.adProxy.setTimePoint("p8"),t.adMedia.src=S,t.adMedia.poster=I),Cm&&(t.preloadVideo=!0,t.preloadVideoSuccess=!1,t.adProxy.preloadVideo([S]).catch((function(e){t.adProxy.reportAdMonitorData(107,e)}))),t.adProxy.reportVideoLoadTime({beginTime:t.fetchBeginTime,endTime:(new Date).getTime(),reportType:2}),t.adProxy.reportAdIDKey({key:98})}else t.ad_type===km&&(t.adMedia.src=l,t.adMask.style.hidden=!1,t.adBackground.style.hidden=!1,t.adProxy.reportAdIDKey({key:100}));if(f?(t.adMask.style.opacity=1,t.adMask.style.backgroundColor=f,n=p,t.relationLine.style.color=p,t.adButton.style.color=p,t.adButton.style.borderColor=p,t.adButtonText.style.color=p,t.adBackground.style.hidden=!0):t.adProxy.isValidCondition("widget_gray_optimizedstyle")?(t.adContainer.style.borderRadius=8,t.adContent.style.backgroundColor="#ffffff",n="#000000",t.relationLine.style.color="#b3b3b3",t.adButton.style.color="#ffffff",t.adButton.style.borderColor="#07c160",t.adButton.style.backgroundColor="#07c160",t.adButtonText.style.color="#ffffff",t.adBackground.style.hidden=t.ad_type===xm):(t.adMask.style.opacity=.5,t.adMask.style.backgroundColor="#000000",n="#ffffff",t.relationLine.style.color="#ffffff",t.adButton.style.color="#ffffff",t.adButton.style.borderColor="#ffffff",t.adButtonText.style.color="#ffffff",t.adBackground.style.hidden=t.ad_type===xm,t.adBackground.src=h),g.forEach((function(r,i){var o="wordingLine".concat(i),a=ym(mm).root;a.attributes.id=o;var s=Qv.Ue.call(e,a);s.value=r,s.style.color=n,t.adWording.add(s)})),t.adButtonText.value=u.button_text,m.widget_gray_interstitialAd_insurance_tips&&21474837086===y.ams_second_industry_id&&(t.adButtonText.value="点击跳转广告详情页",t.adButtonText.style.width=218,t.adButton.style.width=218),t.buttonTextType=u.text_type||0,8===b){var T=+new Date;(0,nm.uQ)({buttonText:u.button_text,aid:t.adProxy.data.aid}).then((function(e){var n=+new Date;if(t.adProxy.reportRelationFetchDuration({startTime:T,endTime:n,showTime:t.showDetailTime||0}),e){var r=e.count,i=e.descText,o="— 最近已有".concat(r,"人").concat(i," —");t.relationLine.value=o}else t.relationLine.value=""})).catch((function(e){t.relationLine.value="",t.adProxy.reportAdMonitorData(116,e)}))}12===a?(t.adProxy.setAppInstallState(!1),Km.call(this)):23===a&&i.isFollowed&&0===t.buttonTextType&&(t.adButtonText.value="查看公众号"),t.adProxy.preloadLanding(),t.emitter.emit("load"),t.container.ready().then((function(){(0,Xv.cM)("interstitialAd container 及其子元素 ready"),t.emitter.emit("ready")})),t.adProxy.reportAdIDKey({key:108})}catch(e){return t.adProxy.reportAdIDKey({key:110}),t.adProxy.reportAdMonitorData(40,e),t.adProxy.reportAdIDKey({key:109}),Promise.reject(e)}}},zm=function(e){var t=this;if(!oy.call(this)){var n=(0,Qv.Wj)(this);n.clickCount>1&&n.adProxy.reportRepeatClick({slotId:Am,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,clkCnt:n.clickCount,lastClkPeriod:+new Date-n.lastLandingTime,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,pageStayTime:n.landingPageCostTime,jsapiName:n.lastJsapiName});var r=n.adProxy.land(e);if(23===n.data.product_type&&e&&e.isButton&&!n.adProxy.data.biz_info.is_subscribed?(r.then((function(e){var t=/ok/.test(e.errMsg);t&&0===n.buttonTextType&&(n.adButtonText.value="查看公众号",n.adProxy.data.biz_info&&(n.adProxy.data.biz_info.is_subscribed=1),n.adProxy.reportAdIDKey({key:41})),e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var r=+new Date;n.lastJsapiStatus=0,n.lastJsapiCostTime=r-n.lastLandingTime,"private_addContact"==n.lastJsapiName&&n.adProxy.reportLandingTime({slotId:Am,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,openTime:n.lastLandingTime,closeTime:r,stayTime:n.lastJsapiCostTime,jsapiName:n.lastJsapiName,clickTime:n.lastLandingTime,clkCnt:n.clickCount,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,actTypeInt:t?2:3,actTypeStr:t?"关注":"取消"})})).catch((function(e){n.lastJsapiStatus=1})),Lm.call(this,r)):r.then((function(e){e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==n.lastJsapiName||"navigateToMiniProgram"==n.lastJsapiName||"openADCanvas"==n.lastJsapiName||"launchApplication"==n.lastJsapiName?(n.isLandingPage=!0,sy.call(t)):n.lastJsapiStatus=0,n.lastJsapiCostTime=+new Date-n.lastLandingTime})).catch((function(e){n.lastJsapiStatus=1})),n.ad_type===xm){var i=n.adProxy.reportVideo({playType:n.isPlaying?"partial":"complete",conditionType:"land",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted});(0,Xv._u)(i,"插屏视频","跳转")}}},Ym=function(){var e=this;if(!oy.call(this)){var t=(0,Qv.Wj)(this);return(0,Xv.Vs)(10).then((function(){return t.adFetchResult.then((function(){if(t.isLandingPage){t.lastJsapiStatus=0,t.isLandingPage=!1;var n=+new Date;t.landingPageCostTime=n-t.hideTime,t.adProxy.reportLandingTime({slotId:Am,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,openTime:t.hideTime,closeTime:n,stayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:1}),ty.call(e,3)}t.adButton&&23===t.data.product_type?t.adProxy.checkFollow(t.data.app.uin).then((function(e){0===t.buttonTextType&&(t.adButtonText.value=e?"查看公众号":t.data.button_action.button_text),t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=e?1:0)})):12===t.data.product_type&&Km.call(e)})).catch((function(){}))}))}},Km=function(){if(!oy.call(this)){var e=(0,Qv.Wj)(this);if(e.data){var t=e.data.appInfo,n=t.apkName,r=t.versionCode,i=t.urlScheme;e.adProxy.getInstallState(n).then((function(t){t.isInstalled&&(void 0===t.versionCode||t.versionCode>=r)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),i&&i.trim().length>0?e.adButtonText.value="进入应用":e.adButtonText.value="查看应用",1===e.buttonTextType&&(e.adButtonText.value=e.data.button_action.button_text))})).catch((function(e){}))}}},Jm=function e(t){var n=this;if(!t||"function"!=typeof t)return new Promise((function(t){return e.call(n,t)}));var r=(0,Qv.Wj)(this);r.isReady?t():r.emitter.on("ready",t)},$m=function(){var e=this;if(oy.call(this))return Promise.reject({errMsg:Pm});var t=(0,Qv.Wj)(this);return t.onceSwitched=!1,t.startShow=+new Date,t.body.style.width=wm,t.body.style.height=Im,!Em&&Sm&&(t.body.style.hidden=!1),Promise.resolve().then((function(){if(Vm.call(e),oy.call(e))return Promise.reject({errMsg:Pm});if(t.isShow=!0,t.isShowCloseTip=!1,t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!0,t.ad_type===xm){t.videoFirstPlayTime=(new Date).getTime(),t.adProxy.setTimePoint("p20"),ay.call(e),t.adMedia.play(),t.adMedia.autoplay=!0,t.isFirstPlay=!0;var n=t.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:t.videoDuration,muted:t.adMedia.muted});t.adProxy.reportAdIDKey({key:99}),(0,Xv._u)(n,"插屏视频","开始播放")}return Zm.call(e).then((function(){return t.body.style.hidden&&(t.body.style.hidden=!1),t.container.style.hidden=!1,t.isSwitched?ty.call(e,6):t.container.animate({opacity:1,duration:300}).then((function(){return t.showDetailTime=+new Date,t.container.nextLayout((function(){return Bm.call(e)}))})).catch((function(n){var r={errMsg:n,isSwitched:t.isSwitched,onceSwitched:t.onceSwitched,startShow:t.startShow,enterRoute:t.enterRoute,enterTime:t.enterTime,outRoute:t.outRoute,outTime:t.outTime,lastRoute:t.lastRoute};return t.adProxy.reportAdMonitorData(36,r),ty.call(e,6).then((function(){return Promise.reject({errCode:2004,errMsg:"广告渲染失败，或因小程序页面切换导致广告渲染失败"})}))}))}))}))},Xm=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(oy.call(this))return Promise.reject({errMsg:Pm});var i=(0,Qv.Wj)(this),o=(0,tm.hz)()||0;if(1===o)return i.adProxy.reportAdMonitorData(44,Um.call(this)),Promise.reject({errCode:2003,errMsg:"当前正在播放激励视频广告或者插屏广告，不允许再次展示插屏广告"});var a=i.adProxy.getWebviewInfo(),s=a.createWebviewId,c=a.currentWebviewId;return s!==c?(i.adProxy.reportAdMonitorData(45,Um.call(this)),Promise.reject({errCode:2005,errMsg:"插屏广告并非当前页面调用，不允许展示插屏广告"})):(i.adProxy.setTimePoint("p19"),i.isSwitched=!1,(0,tm.q3)("show",i.adType,1),i.showTime=+new Date,i.fetchBeginTime=(new Date).getTime(),n?i.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):i.adProxy.resetAnalyseBranchInfo(),i.adFetchResult.catch((function(){return Promise.reject({errMsg:"no ad data"})})).then((function(){var t=+new Date-+new Date(i.adProxy.getProgramStartTime());if(t<=1e3*i.launchTime)return i.adProxy.reportAdMonitorData(42,Um.call(e,{startInterval:t})),Promise.reject({errCode:2001,errMsg:"小程序启动一定时间内不允许展示插屏广告"});var n=(0,tm.aE)()||0,r=+new Date-n;return r<=1e3*i.frequencyTime?(i.adProxy.reportAdMonitorData(43,Um.call(e,{closeInterval:r})),Promise.reject({errCode:2002,errMsg:"距离小程序插屏广告或者激励视频广告上次播放时间间隔不足，不允许展示插屏广告"})):(Mm.call(e,{stage:1001}),Jm.call(e).then((function(){return $m.call(e)})).then((function(){i.adProxy.reportAdMonitorData(46,Um.call(e))})))})).catch((function(e){return(0,tm.q3)("show",i.adType,0),Promise.reject(e)})))},Qm=function(){if(!oy.call(this)){var e=(0,Qv.Wj)(this);e.androidAppState=0,e.isData=!1,e.isShow=!1,e.startExposureTime=0,e.isShowedExposureReported=!1,e.isViewableExposureReported=!1,e.adProxy.isViewable=!1,e.lastCloseTime=0,e.buttonTextType=0,e.startExposureTime=0,e.clickCount=0,e.lastLandingTime=0,e.lastJsapiName="",e.lastJsapiStatus=0,e.lastJsapiCostTime=0,e.isLandingPage=!1,e.landingPageCostTime=0,e.hideTime=0,e.hideDuration=0,e.body.style.hidden=!0,e.container.style.hidden=!0,e.isReady=!1,e.videoFirstPlayTime=0,e.isEnded=!1,e.fetchBeginTime=0,e.videoCurrentTime=0,e.videoDuration=0,e.isPlaying=!1,e.isFirstPlay=!1,e.isFirstPlaySuccess=!1,e.isSwitched=!1,e.onceSwitched=!1,e.startShow=0,e.showDetailTime=0,e.isEnded?Mm.call(this,{stage:1005}):Mm.call(this,{stage:1006}),(0,tm.q3)("show",e.adType,0),(0,tm.q3)("close",e.adType,+new Date),uy.call(this,"none"),!Em&&Sm?(0,Xv.Vs)(100).then((function(){e.emitter.emit("close")})):e.emitter.emit("close"),e.adProxy.reset()}},ey=function(e){var t=this;if(!oy.call(this)){var n=(0,Qv.Wj)(this);return n.adProxy.reportTimePoints({slotid:Am,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,extInfo:{preloadVideoSuccess:n.preloadVideoSuccess?1:0}}),Promise.resolve().then((function(){return[4,6].includes(e)?Promise.resolve():n.container.animate({opacity:0,duration:300})})).then((function(){return Fm.call(t,e),2===e?jm.call(t,6):3===e&&jm.call(t,7),Qm.call(t),4===e?Promise.resolve():Gm.call(t)}))}},ty=function(e){var t=this;if(!oy.call(this)){var n=(0,Qv.Wj)(this);return n.isClosing?Promise.resolve():n.container?(n.isClosing=!0,n.ad_type===xm&&(n.adProxy.reportVideo({playType:n.isEnded?"complete":"partial",conditionType:"close",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted}),n.adMedia.autoplay=!1,n.adMedia.pause(),sy.call(this),n.adMedia.muted=!0,n.adVideoAfter.style.opacity=0),n.container.ready().then((function(){return ey.call(t,e)})).then((function(){return n.isClosing=!1})).catch((function(e){n.isClosing=!1,n.adProxy.reportAdMonitorData(126,e)}))):(n.adProxy.reportAdIDKey({key:125}),Promise.resolve())}},ny=function(e,t){var n=this,r=(0,Qv.Wj)(this);if(r.isShow||r.adProxy.reportAdMonitorData(123,t),!oy.call(this)){var i=r.data,o=i.appInfo,a=(o.apkName,o.channelId,o.urlScheme),s=i.product_type,c=i.dest_type;12===s&&Cm&&4===r.androidAppState&&a&&a.trim().length>0?(Rm.call(this,e),jm.call(this,t,e),r.adProxy.launchApplication(a).catch((function(e){})),r.lastJsapiName="launchApplication",r.isLandingPage=!0):Sm&&46===s&&6===c?Promise.race([Rm.call(this,e),(0,Xv.Vs)(500)]).then((function(){jm.call(n,t,e),zm.call(n)})).catch((function(){jm.call(n,t,e),zm.call(n)})):(Rm.call(this,e),jm.call(this,t,e),zm.call(this))}},ry=function(){var e=(0,Qv.Wj)(this);(0,Yv.Tb)(e.handleEnterForeground),(0,Yv.b$)(e.handleEnterBackground),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),Kv.uo.remove(e.body),(0,Qv.bn)(this)},iy=function(){var e=this;oy.call(this)||(Jm.call(this).then((function(){var t=(0,Qv.Wj)(e);t.isShow&&((0,tm.q3)("show",t.adType,0),(0,tm.q3)("close",t.adType,+new Date)),ry.call(e)})),this._destroyed=!0)},oy=function(){return this._destroyed},ay=function(){var e=(0,Qv.Wj)(this);sy.call(this),e.keepAliveTimer=setTimeout((function(){e.adProxy.reportAdMonitorData(153,{currentTime:e.videoCurrentTime,duration:e.videoDuration,src:e.adMedia.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},sy=function(){var e=(0,Qv.Wj)(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},cy=function(){var e=this,t=(0,Qv.Wj)(this);t.ad_type===km&&t.adProxy.getChannelsLiveStatus().then((function(t){uy.call(e,t)}))},uy=function(e){var t=(0,Qv.Wj)(this),n={adChannelsLiveReserve:!1,adChannelsLive:!1,adChannelsLiveEnd:!1};"onlive"===e?n.adChannelsLive=!0:"end"===e?n.adChannelsLiveEnd=!0:"reserve"===e&&(n.adChannelsLiveReserve=!0);for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r];t[o]&&t[o].style&&(t[o].style.hidden=!n[o])}},ly=function(e){I()(n,e);var t=C()(n);function n(e){var r,i=e.adUnitId,o=e.pluginId,a=void 0===o?"":o;R()(this,n),r=t.call(this);var s=(0,Qv.Wj)(zv()(r));s.adUnitId=i,s.adType="interstitialAd",s.cardXOM="",s.cardStyle="",s.ad_type="",s.emitter=new t_.Z,s.adProxy=new Jv.F({adUnitId:i,adType:"interstitialAd",pluginAppid:a}),s.androidAppState=0,s.isShowedExposureReported=!1,s.isViewableExposureReported=!1,s.isReady=!1,s.isShow=!1,s.emitter.on("ready",(function(){return s.isReady=!0})),s.lastCloseTime=0,s.autoCloseTime=15,s.launchTime=15,s.frequencyTime=15,s.startExposureTime=0,s.clickCount=0,s.lastLandingTime=0,s.lastJsapiName="",s.lastJsapiStatus=0,s.lastJsapiCostTime=0,s.isLandingPage=!1,s.landingPageCostTime=0,s.hideTime=0,s.showTime=0,s.hideDuration=0,s.isClosing=!1,s.isShowCloseTip=!1,s.clickFirstGradeTime=0,s.videoFirstPlayTime=0,s.isEnded=!1,s.fetchBeginTime=0,s.videoCurrentTime=0,s.videoDuration=0,s.isPlaying=!1,s.isFirstPlay=!1,s.preloadVideo=!1,s.preloadVideoSuccess=!1,s.keepAliveTimer=null,s.isData=!1,r._destroyed=!1,s.updateResult=Promise.resolve(),s.isSwitched=!1,s.onceSwitched=!1,s.startShow=0;var c=s.adProxy.getWebviewInfo(),u=c.openType,l=c.createWebviewId,f=c.lastWebviewId,p=c.currentWebviewId,h=[u,f,p,l];return s.outRoute="",s.lastRoute="",s.enterTime=0,s.outTime=0,l===p&&(s.enterRoute=h.join("|"),s.enterTime=+new Date,s.lastRoute="enter"),l===f&&(s.outRoute=h.join("|"),s.outTime=+new Date,s.lastRoute="out"),Gm.call(zv()(r)),Em||((0,gr.H)((function(e){if(!oy.call(zv()(r))){var t=s.adProxy.getWebviewInfo(),n=t.createWebviewId,i=t.lastWebviewId,o=t.currentWebviewId,a=[e.openType,i,o,n];n===o&&(s.enterRoute=a.join("|"),s.enterTime=+new Date,s.onceSwitched=!0,s.lastRoute="enter"),n===i&&(s.outRoute=a.join("|"),s.outTime=+new Date,s.onceSwitched=!0,s.lastRoute="out")}})),(0,Se.q)((function(){if(!oy.call(zv()(r))){var e=s.adProxy.getWebviewInfo(),t=e.openType,n=e.createWebviewId,i=e.currentWebviewId;["navigateTo","navigateBack","switchTab"].includes(t)&&n===i&&(s.isSwitched=!0,s.isShow&&ty.call(zv()(r),4))}})),(0,vr.KN)((function(e){!oy.call(zv()(r))&&s.isShow&&e.size&&(Im=e.size.screenHeight,wm=e.size.screenWidth,Tm=e.deviceOrientation,Zm.call(zv()(r)))}))),s.handleEnterForeground=function(){if(!oy.call(zv()(r))){s.ad_type===xm&&s.isShow&&ay.call(zv()(r));var e=Tm;Vm.call(zv()(r)),e!==Tm&&s.isShow&&Zm.call(zv()(r)),s.hideTime>0&&s.isShow&&(s.hideDuration+=+new Date-s.hideTime),Ym.call(zv()(r))}},s.handleEnterBackground=function(){if(!oy.call(zv()(r))&&s.isShow&&(s.hideTime=+new Date,s.ad_type===xm)){sy.call(zv()(r));var e=s.adProxy.reportVideo({playType:s.isPlaying?"partial":"complete",conditionType:"exit",playDuration:s.videoCurrentTime,videoDuration:s.videoDuration,muted:s.adMedia.muted});(0,Xv._u)(e,"插屏广告","退出")}},(0,Yv.dN)(s.handleEnterForeground),(0,Yv.vv)(s.handleEnterBackground),(0,d.jQ)("onVideoResourceLoad",(function(e){!s.isShow&&s.ad_type===xm&&s.adMedia&&s.adMedia.src==e.resource&&(s.adProxy.reportAdIDKey({key:106}),s.preloadVideoSuccess=!0,s.adMedia.src=e.resource)})),r}return P()(n,[{key:"load",value:function(){if(oy.call(this))return Promise.reject({errMsg:Pm});var e=(0,Qv.Wj)(this);return e.isShow?Promise.reject({errMsg:"can't invoke load() while interstitial-ad is showed"}):e.isData?Promise.resolve():Gm.call(this)}},{key:"show",value:function(e){return oy.call(this)?Promise.reject({errMsg:Pm}):Xm.call(this,e)}},{key:"destory",value:function(){iy.call(this)}},{key:"destroy",value:function(){iy.call(this)}},{key:"onError",value:function(e){oy.call(this)||(0,Qv.Wj)(this).emitter.on("_error",e)}},{key:"offError",value:function(e){oy.call(this)||(0,Qv.Wj)(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){oy.call(this)||(0,Qv.Wj)(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){oy.call(this)||(0,Qv.Wj)(this).emitter.off("load",e)}},{key:"onClose",value:function(e){oy.call(this)||(0,Qv.Wj)(this).emitter.on("close",e)}},{key:"offClose",value:function(e){oy.call(this)||(0,Qv.Wj)(this).emitter.off("close",e)}},{key:"getSplashAdShowStatus",value:function(){return(0,Qv.Wj)(this).adProxy.getSplashAdShowStatus()}}]),n}(Qv.wA),dy=n(2958),fy=n(7581),py=n(9627),hy=n(6842),gy=function(e){return!(e.isDestroyed()||!(0,py.U2)(e,["rootElement","layoutBox"]))},vy=function(){function e(t){var n=this,r=t.manager,i=t.adProxy,o=t.emitter;R()(this,e),this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.exposureTimer=null,this.clickFirstGradeTime=0,this.adProxy=void 0,this.manager=void 0,this.emitter=void 0,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set,this.hasEmitShowHalf=!1,this.landManager=void 0,this.handleEnterForeground=function(){var e=n.manager.rootComponent;!n.manager.isDestroyed()&&e&&(e.isShow()&&(e.emitComponentEvent(dy._d.SHOWHALF),e.emitAdCustomEvent(dy.A$.ADSHOWHALF)))},this.handleEnterBackground=function(){var e=n.manager.rootComponent;!n.manager.isDestroyed()&&e&&(e.isShow()&&(e.emitComponentEvent(dy._d.HIDEHALF),e.emitAdCustomEvent(dy.A$.ADHIDEHALF)))},this.handleAdCustomEvent=function(e){switch(e.action){case dy.A$.ADVIDEOPLAY:n.checkVideoViewableExposure(!0);break;case dy.A$.ADVIDEOPAUSE:n.checkVideoViewableExposure(!1);break;case dy.A$.REPORTVIDEOPLAY:n.reportVideoPlay(e.value.playType,e.value.conditionType,e.value.videoInfo);break;case dy.A$.FEEDBACKREPORT:n.reportAdFeedbackData(e.value);break;case dy.A$.REPORTENDPAGE:n.reportEndPage(e.value.data);break;case dy.A$.REPORTMMDATA:e.value.id&&e.value.data&&n.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case dy.A$.BTNTAP:n.manager.rootComponent&&n.manager.rootComponent.emitComponentEvent(dy._d.ADBUTTONTAP),n.handleClick(e.value.event,1,!0);break;case dy.A$.CHANGEMULTISHOW:n.multiShowList=e.value.list,n.checkExposure()}},this.manager=r,this.adProxy=i,this.emitter=o,this.bindEvent()}var t,n,r;return P()(e,[{key:"setMultiShowList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.multiShowList=x()(e)}},{key:"destroy",value:function(){this.unbindEvent()}},{key:"reset",value:function(){this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.hasEmitShowHalf=!1,this.adProxy.isViewable=!1,this.exposureTimer&&clearTimeout(this.exposureTimer),this.exposureTimer=null,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set}},{key:"bindEvent",value:function(){this.emitter.on("adCustomEvent",this.handleAdCustomEvent),(0,Yv.dN)(this.handleEnterForeground),(0,Yv.vv)(this.handleEnterBackground)}},{key:"unbindEvent",value:function(){this.emitter.off("adCustomEvent",this.handleAdCustomEvent),(0,Yv.Tb)(this.handleEnterForeground),(0,Yv.b$)(this.handleEnterBackground)}},{key:"judgeTriggerClick",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.manager.isDestroyed())return!1;var n=this.adProxy.isTriggerClick(e),r=n?0:1;return t&&this.reportTouchClick(e,r),n}},{key:"reportTouchClick",value:function(e,t){if(gy(this.manager)){var n=this.manager.rootElement.layoutBox,r=n.width,i=n.height,o=0;[0,2,3].includes(t)&&(this.clickCount+=1,o=this.clickCount),this.adProxy.reportTouchClick({slotid:this.manager.getSlotId(),costtype:(0,py.U2)(this.adProxy,["adData","data","is_cpm"])?1:2,click_time:Date.now(),click_cnt:o,start_posx:Math.round(e.relativeX||0),start_posy:Math.round(e.relativeY||0),end_posx:Math.round(e.relativeEndX||0),end_posy:Math.round(e.relativeEndY||0),ad_width:r||0,ad_height:i||0,press_interval:e.pressInterval,block_click:t})}}},{key:"handleClick",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.manager.isDestroyed()&&this.manager.adData){var i=this.manager.adData,o=i.appInfo.urlScheme,a=i.product_type,s=i.dest_type;this.manager.clearAdTimer(),a===ei.fY.OPEN_PLATFORM_APP_MOB&&B.wZ&&this.landManager.downloadState===dy.JF.INSTALLED&&o&&o.trim().length>0?(this.reportClick(e),this.reportAntifraud(t,e),this.adProxy.launchApplication(o).catch((function(){})),this.manager.landManager.lastJsapiName="launchApplication",this.manager.landManager.isLandingPage=!0):B.cj&&a===Jv.ProductType.MINI_GAME&&6===s?Promise.race([this.reportClick(e),(0,py.Vs)(500)]).then((function(){n.reportAntifraud(t,e),n.manager.landManager.landing({isButton:r})})).catch((function(){n.reportAntifraud(t,e),n.manager.landManager.landing({isButton:r})})):(this.reportClick(e),this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:r}))}}},{key:"reportClick",value:function(e){if(gy(this.manager)){var t=this.manager.rootElement.layoutBox,n=t.left,r=t.top,i=t.width,o=t.height,a=this.manager.adCustomId,s=(0,hy.f)(a);this.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-n,clickRelativeTop:e.absoluteY-r,pressInterval:e.pressInterval,isMulti:this.manager.isMulti,left:n,top:r,width:i,height:o,videoData:s})}}},{key:"isClickLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.adProxy,r=this.manager.rootElement;if(!r)return!1;var i=r.layoutBox,o=i.width,a=i.height,s=r.getAbsolutePosition(),c=s.left,u=s.top,l=!1,d=0;n.isValidCondition("widget_gray_time_limit")&&(d=100*(this.manager.adData.condition.widget_gray_time_limit||1)),d>0&&Date.now()-this.showedExposureTime<d&&(l=!0,n.reportAdMonitorData(dy.IN.AD_LIMIT_TIME,{clickType:t}));var f=0;return n.isValidCondition("widget_gray_bd_limit")&&(f=this.manager.adData.condition.widget_gray_bd_limit||0),"devtools"!==B.iw&&e&&f>0&&(e.absoluteEndX-c<f||c+o-e.absoluteEndX<f||e.absoluteEndY-u<f||u+a-e.absoluteEndY<f)&&(l=!0,n.reportAdMonitorData(dy.IN.AD_LIMIT_BOUNDARY)),l}},{key:"reportExposure",value:(r=ye()(we().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.isViewable,gy(this.manager)){e.next=3;break}return e.abrupt("return");case 3:if(r=this.manager,i=r.rootElement,o=r.rootComponent,a=r.isMulti,s=i.layoutBox,c=s.left,u=s.top,l=s.width,d=s.height,f={left:c,top:u,width:l,height:d},a){e.next=12;break}return n?o.emitComponentEvent(dy._d.VIEWABLEEXPOSURE):o.emitComponentEvent(dy._d.EXPOSURE),e.next=10,this.adProxy.reportExposure(E()(E()({},f),{},{exposureType:n?"viewable":"showed"}));case 10:e.next=19;break;case 12:if(p=n?this.multiViewableExposureList:this.multiExposureList,!(h=this.multiShowList.filter((function(e){return!p.has(e)}))).length){e.next=19;break}return h.forEach(p.add,p),o.emitComponentEvent(n?dy._d.VIEWABLEEXPOSURE:dy._d.EXPOSURE,{exposureList:h}),e.next=19,this.adProxy.reportExposure(E()(E()({},f),{},{multiList:h,isMulti:a,exposureType:n?"viewable":"showed"}));case 19:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"checkExposure",value:(n=ye()(we().mark((function e(){var t,n,r,i,o,a=this;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.manager.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:if(gy(this.manager)){e.next=8;break}return e.next=5,(0,py.Vs)(0);case 5:return e.next=7,this.checkExposure();case 7:return e.abrupt("return");case 8:if(t=this.manager,n=t.rootComponent,r=t.isMulti,i=n.isShow(),o=n.exposureUntilVideoPlay,(r||!this.isExposured&&i)&&(this.isExposured=!0,this.showedExposureTime=Date.now(),this.reportExposure({isViewable:!1})),i&&!this.hasEmitShowHalf?(this.hasEmitShowHalf=!0,n.emitComponentEvent(dy._d.SHOWHALF),n.emitAdCustomEvent(dy.A$.ADSHOWHALF)):i||(this.hasEmitShowHalf=!1,n.emitComponentEvent(dy._d.HIDEHALF),n.emitAdCustomEvent(dy.A$.ADHIDEHALF)),!o){e.next=15;break}return e.abrupt("return");case 15:i?this.exposureTimer=setTimeout((function(){var e=n.isShow();(r||!a.isViewableExposured&&e)&&(a.isViewableExposured=!0,a.adProxy.isViewable=!0,a.reportExposure({isViewable:!0}))}),1e3):this.exposureTimer&&clearTimeout(this.exposureTimer);case 16:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"checkVideoViewableExposure",value:function(e){var t=this,n=this.manager,r=n.rootElement,i=n.rootComponent;if(!this.manager.isDestroyed()&&r&&i){var o=i.isShow(),a=i.exposureUntilVideoPlay,s=r.layoutBox,c=s.left,u=s.top,l=s.width,d=s.height;a&&(o&&e?this.exposureTimer=setTimeout((function(){t.isViewableExposured||(t.isViewableExposured=!0,t.adProxy.isViewable=!0,t.adProxy.reportExposure({left:c,top:u,width:l,height:d,exposureType:"viewable"}),i.emitComponentEvent(dy._d.VIEWABLEEXPOSURE))}),0):this.exposureTimer&&clearTimeout(this.exposureTimer))}}},{key:"reportAntifraud",value:(t=ye()(we().mark((function e(t,n){var r,i,o,a;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.manager.ready();case 2:if(gy(this.manager)){e.next=4;break}return e.abrupt("return");case 4:i=this.manager.rootElement.layoutBox,o=i.width,a=i.height,this.adProxy.reportAntifraud({click_button:t,cost_type:null!==(r=this.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,slotid:this.manager.getSlotId(),is_game:fy.S.isWaGame?1:0,pageentertime:+new Date(this.adProxy.getProgramStartTime()),ad_width:o||0,ad_height:a||0,clientexptime:this.showedExposureTime,clientclktime:+new Date,pressinterval:n.pressInterval,pos_x:Math.round(n.absoluteX||0),pos_y:Math.round(n.absoluteY||0),screen_width:fy.S.screenWidth,screen_height:fy.S.screenHeight});case 6:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"reportCloseAction",value:function(e){if(!this.manager.isDestroyed()){var t=Date.now();this.adProxy.reportCloseAction({slotid:this.manager.getSlotId(),is_game:fy.S.isWaGame?1:0,costtype:(0,py.U2)(this.adProxy,["data","is_cpm"])?1:2,close_type:e,exposure_duration:t-this.showedExposureTime-this.hideDuration,start_time:this.showedExposureTime,close_time:t})}}},{key:"reportAdFeedbackData",value:function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;this.manager.isDestroyed()||(n&&!a&&(this.clickFirstGradeTime=Date.now()),this.adProxy.reportAdFeedbackData({adWidth:fy.S.screenWidth,adHeight:fy.S.screenHeight,adPosX:0,adPosY:0,expTime:this.showedExposureTime,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?this.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?Date.now():0,feedbackReason:l}))}},{key:"reportFollow",value:function(e){var t=this;if(!this.manager.isDestroyed())return e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}))}},{key:"reportVideoPlay",value:function(e,t,n){var r=n.playDuration,i=n.isMuted,o=n.videoDuration;this.adProxy.reportVideo({playType:e,conditionType:t,playDuration:r,videoDuration:o,muted:i})}},{key:"reportEndPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ace_type,n=e.exposure_duration,r=void 0===n?0:n;this.adProxy.reportEndPage({slotid:this.manager.getSlotId(),costtype:(0,py.U2)(this.adProxy,["adData","data","is_cpm"])?1:2,posType:this.adProxy.data.pos_type,isGame:fy.S.isWaGame?1:0,ace_type:t,exposure_duration:r})}},{key:"reportTimePoints",value:function(){this.adProxy.reportTimePoints({slotid:this.manager.getSlotId(),costtype:(0,py.U2)(this.adProxy,["adData","data","is_cpm"])?1:2})}}]),e}(),_y=function(){function e(t){var n=t.manager,r=t.reporter;R()(this,e),this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.hideTime=null,this.isLandingPage=!1,this.landingPageCostTime=0,this.downloadState=dy.JF.DEFAULT,this.downloadProgress=0,this.manager=void 0,this.reporter=void 0,this.adProxy=void 0,this.manager=n,this.adProxy=n.adProxy,this.reporter=r}var t,n,r;return P()(e,[{key:"reset",value:function(){this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.isLandingPage=!1,this.landingPageCostTime=0}},{key:"checkAdState",value:(r=ye()(we().mark((function e(){var t,n;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.manager.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,Xv.Vs)(10);case 4:this.isLandingPage&&(this.adProxy.setTimePoint("p11"),this.lastJsapiStatus=0,this.isLandingPage=!1,n=Date.now(),this.landingPageCostTime=this.hideTime?n-this.hideTime:0,this.adProxy.reportLandingTime({slotId:this.manager.getSlotId(),costType:(0,rm.U2)(this.adProxy,["adData","data","is_cpm"])?1:2,openTime:this.hideTime,closeTime:n,stayTime:this.landingPageCostTime,jsapiName:this.lastJsapiName,clickTime:this.lastLandingTime,clkCnt:this.reporter.clickCount,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,actTypeInt:1}),null!==(t=this.manager.rootComponent)&&void 0!==t&&t.hideAfterLanding&&this.manager.hide()),this.manager.isShow&&this.manager.setAdTimer();case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"checkFollow",value:(n=ye()(we().mark((function e(){var t,n,r;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.manager.adData,n=(0,rm.U2)(t,["button_action","text_type"],0),e.next=4,this.adProxy.checkFollow(t.app.uin);case 4:r=e.sent,0===n&&this.manager.updateButtonText({text:r?"查看":t.button_action.button_text}),this.adProxy.data.biz_info&&(this.adProxy.data.biz_info.is_subscribed=r?1:0);case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"checkAppInstallState",value:(t=ye()(we().mark((function e(){var t,n,r,i,o;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.manager.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:return t=this.manager.adData.appInfo,n=t.apkName,r=t.versionCode,i=t.urlScheme,e.prev=3,e.next=6,this.adProxy.getInstallState(n);case 6:(o=e.sent).isInstalled&&(void 0===o.versionCode||o.versionCode>=r)&&(this.downloadState=dy.JF.INSTALLED,this.downloadProgress=0,this.adProxy.setAppInstallState(!0),i&&i.trim().length>0?this.manager.updateButtonText({text:"进入应用"}):this.manager.updateButtonText({text:"查看应用"})),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:case"end":return e.stop()}}),e,this,[[3,10]])}))),function(){return t.apply(this,arguments)})},{key:"landing",value:function(e){var t=this;if(!this.manager.isDestroyed()){this.reporter.clickCount>1&&this.adProxy.reportRepeatClick({slotId:this.manager.getSlotId(),costType:(0,rm.U2)(this.adProxy,["data","is_cpm"])?1:2,clkCnt:this.reporter.clickCount,lastClkPeriod:Date.now()-this.lastLandingTime,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,pageStayTime:this.landingPageCostTime,jsapiName:this.lastJsapiName});var n=this.adProxy.land(e),r=(0,rm.U2)(this.adProxy,["data","button_action","text_type"],0);this.adProxy.data.product_type===ei.fY.WECHAT&&(0,rm.U2)(e,["isButton"])&&!this.adProxy.data.biz_info.is_subscribed?(n.then((function(e){var n=/ok/.test(e.errMsg);n&&0===r&&(t.manager.updateButtonText({text:"查看公众号"}),t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),t.adProxy.reportAdIDKey({key:dy.IN.FOLLOW_SUCCESS})),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var i,o=Date.now();(t.lastJsapiStatus=0,t.lastJsapiCostTime=o-t.lastLandingTime,"private_addContact"===t.lastJsapiName)&&t.adProxy.reportLandingTime({slotId:t.manager.getSlotId(),costType:null!==(i=t.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,openTime:t.lastLandingTime,closeTime:o,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.reporter.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"});t.manager.isShow&&t.manager.setAdTimer()})).catch((function(){t.lastJsapiStatus=1})),this.reporter.reportFollow(n)):n.then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),["private_openUrl","navigateToMiniProgram","openADCanvas","launchApplication"].includes(t.lastJsapiName)?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=Date.now()-t.lastLandingTime})).catch((function(){t.lastJsapiStatus=1}))}}}]),e}(),my=n(8612),yy=n(1279),by=n.n(yy),wy=new WeakMap,Iy=function(e){return wy.get(e)},Sy=n(5889),Cy=n(8794),Ty=n(7871),Ey="customAd has been destroyed",ky=1,xy=function(){function e(t){var n=this,r=t.adUnitId,i=t.adIntervals,o=void 0===i?0:i,a=t.left,s=t.top,u=t.width,d=t.height,f=t.fixed,p=t.style;if(R()(this,e),this.adUnitId=void 0,this.adCustomId=void 0,this.adProxy=void 0,this.reporter=void 0,this.landManager=void 0,this.isShow=!1,this.rootElement=null,this.rootComponent=null,this.systemInfo=null,this.adData=null,this.adDatas=[],this.showDetailTime=0,this.callbacks={load:[],error:[],close:[],hide:[]},this.adType="customAd",this.emitter=new Ty.v,this.isReady=!1,this.isDestroy=!1,this.isShowing=!1,this.isHiding=!1,this.fetchedError=null,this.template=null,this.tplConfig=null,this.slotId=void 0,this.adIntervals=void 0,this.adTimer=null,this.readyResolve=new Set,this.adPosition=void 0,this.isMulti=!1,this.handleReady=function(){if(!n.isReady){var e,t=l()(n.readyResolve);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(e){t.e(e)}finally{t.f()}n.readyResolve.clear(),n.isReady=!0}},this.handleEnterBackground=function(){n.landManager.hideTime=Date.now(),n.clearAdTimer()},this.handleEnterForeground=function(){n.landManager.checkAdState(),n.landManager.hideTime&&(n.reporter.hideDuration+=Date.now()-n.landManager.hideTime)},this.handleAdCustomEvent=function(e){var t;switch(e.action){case dy.A$.TRIGGEREVENT:["error","videodislike"].includes(e.value.eventName)&&n.emitter.emit(e.value.eventName,e.value.detail||{});break;case dy.A$.SHOWFEEDBACK:null===(t=n.rootComponent)||void 0===t||t.showFeedback();break;case dy.A$.FEEDBACKBTNTAP:n.adProxy.openFeedbackUrl(Qr.S3.isWaGame?1003:1005);break;case dy.A$.HIDEAD:n.hide();break;case dy.A$.REPORTTIMEPOINT:e.value.key&&n.adProxy.setTimePoint(e.value.key);break;case dy.A$.ADSHOWHALF:n.isShow=!0;break;case dy.A$.ADHIDEHALF:n.isShow=!1;break;case dy.A$.CHECKEXPOSURE:n.reporter.checkExposure();break;case dy.A$.LANDAD:var r=e.value,i=r.index,o=r.event;if(n.reporter.isClickLimit(o))return;n.isMulti&&n.adProxy.setCurrentData(i),n.reporter.handleClick(o,1,!1)}},this.handleLoad=function(e){return n.emitCallback("load",e)},this.handleError=function(e){return n.emitCallback("error",e)},this.handleClose=function(){return n.emitCallback("close")},this.handleHide=function(){return n.emitCallback("hide")},this.handleVideoDislike=function(){return n.emitCallback("videodislike")},this.onLoad=function(e){return n.callbacks.load.push(e)},this.onError=function(e){return n.callbacks.error.push(e)},this.onClose=function(e){return n.callbacks.close.push(e)},this.onHide=function(e){return n.callbacks.hide.push(e)},this.onVideoDislike=function(e){return n.callbacks.videoDislike.push(e)},this.offLoad=function(e){return n.removeCallback("load",e)},this.offError=function(e){return n.removeCallback("error",e)},this.offClose=function(e){return n.removeCallback("close",e)},this.offHide=function(e){return n.removeCallback("hide",e)},this.offVideoDislike=function(e){return n.removeCallback("videodislike",e)},r||console.error("广告单元 id(unit-id) 为空, 请先在 'https://mp.weixin.qq.com' 上创建广告单元"),this.adUnitId=r,this.slotId="4071202390577885",this.adCustomId="AD_CUSTOM_".concat(ky),ky+=1,this.adPosition={left:a,top:s,width:u,height:d,fixed:f},p&&"object"===c()(p))for(var h=0,g=["left","top","width","height","fixed"];h<g.length;h++){var v=g[h];null!=p[v]&&(this.adPosition[v]=p[v])}(0,Ce.aI)()&&delete this.adPosition.fixed,this.adProxy=new Jv.F({adUnitId:r,adType:this.adType}),this.reporter=new vy({manager:this,adProxy:this.adProxy,emitter:this.emitter}),this.landManager=new _y({manager:this,reporter:this.reporter}),this.adIntervals="number"==typeof o?o:0,this.reporter.landManager=this.landManager,this.bindEvent(),this.fetchAndRender()}var t,n,r;return P()(e,[{key:"getSlotId",value:function(){return this.slotId}},{key:"bindEvent",value:function(){this.emitter.on("load",this.handleLoad),this.emitter.on("error",this.handleError),this.emitter.on("videoDislike",this.handleVideoDislike),this.emitter.on("close",this.handleClose),this.emitter.on("hide",this.handleHide),this.emitter.on("adCustomEvent",this.handleAdCustomEvent),this.onLoad(this.handleReady),this.onError(this.handleReady),(0,Yv.dN)(this.handleEnterForeground),(0,Yv.vv)(this.handleEnterBackground)}},{key:"unbindEvent",value:function(){this.emitter.off("load",this.handleLoad),this.emitter.off("error",this.handleError),this.emitter.off("videoDislike",this.handleVideoDislike),this.emitter.off("close",this.handleClose),this.emitter.off("hide",this.handleHide),this.emitter.off("adCustomEvent",this.handleAdCustomEvent),this.offLoad(this.handleReady),this.offError(this.handleReady),(0,Yv.Tb)(this.handleEnterForeground),(0,Yv.b$)(this.handleEnterBackground)}},{key:"fetchAndRender",value:(r=ye()(we().mark((function e(){var t,n,r,i,o,a,s,c,u,l,d,f,p,h=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},n=t.isAdInterval,r=void 0!==n&&n,i=t.autoUnmount,o=void 0!==i&&i,e.prev=1,e.next=4,Promise.all([this.adProxy.fetch(r),this.getSystemInfo(),(0,fy.g)()]);case 4:return c=e.sent,u=Ep()(c,2),l=u[0],d=u[1],o&&this.resetState(),this.systemInfo=d,this.adData=l,this.adDatas=this.adProxy.datas||[],this.template=this.getTemplateFromAdData(l),this.tplConfig=(null===(a=this.template)||void 0===a?void 0:a.tplConfig)||{},this.checkSize(),e.next=17,this.render();case 17:this.adProxy.reportAdMonitorData(dy.IN.RENDER_SUCCESS),f={errMsg:"load advertisement success"},null!==(s=this.rootComponent)&&void 0!==s&&s.exportAid&&(f.aid=this.adData.aid),this.emitter.emit("load",f),this.fetchedError=null,this.adProxy.preloadLanding(),e.next=31;break;case 25:e.prev=25,e.t0=e.catch(1),this.adProxy.reportAdMonitorData(dy.IN.RENDER_FAILED,e.t0),p=null!==e.t0&&void 0!==e.t0&&e.t0.errCode?e.t0:{errCode:dy.Bq.ERR_RENDER,errMsg:"customAd render failed"},this.fetchedError=p,this.emitter.emit("error",p);case 31:case"end":return e.stop()}}),e,this,[[1,25]])}))),function(){return r.apply(this,arguments)})},{key:"getTemplateFromAdData",value:function(e){return e.template}},{key:"checkSize",value:function(){if(this.tplConfig){var e=this.tplConfig,t=this.adPosition.width;null==t&&(t=Qr.S3.screenWidth),t=Number(t);var n=e.minWidth||0,r=e.maxWidth||0,i=e.baseWidth||375,o=Math.min(Qr.S3.screenWidth,Math.max(n,t));r&&(o=Math.min(o,r)),0===o&&(this.adProxy.reportAdMonitorData(dy.IN.WIDTH_GET_ERROR,{unitId:this.adUnitId}),(0,my.FB)(i,i)),this.adPosition.width=o,(0,my.FB)(o,i)}}},{key:"reload",value:function(){}},{key:"updateButtonText",value:function(e){var t,n=e.text,r=e.progress;null===(t=this.rootComponent)||void 0===t||t.emitAdCustomEvent(dy.A$.CHANGEADBTNTEXT,{text:n||"",progress:r||0})}},{key:"getSystemInfo",value:function(){return Qr.S3}},{key:"ready",value:function(){var e=this;return new Promise((function(t,n){var r=function(){e.fetchedError?n(e.fetchedError):t()};e.isReady?r():e.readyResolve.add(r)}))}},{key:"removeCallback",value:function(e,t){this.callbacks[e]&&(this.callbacks[e]=t?this.callbacks[e].filter((function(e){return e!==t})):[])}},{key:"emitCallback",value:function(e,t){if(this.callbacks[e]){var n,r=l()(this.callbacks[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;"function"==typeof i&&i(t)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"show",value:function(){var e=ye()(we().mark((function e(){var t,n,r,i=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.branchId,r=t.branchDim,!this.isDestroyed()){e.next=3;break}throw{errMsg:Ey};case 3:if(!this.isShow&&!this.isShowing){e.next=5;break}throw{errMsg:"the advertisement has shown"};case 5:return this.isShowing=!0,n?this.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):this.adProxy.resetAnalyseBranchInfo(),e.prev=7,e.next=10,this.ready();case 10:this.rootComponent&&this.rootComponent.show(),this.setAdTimer();case 12:return e.prev=12,this.isShowing=!1,e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[7,,12,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"setAdTimer",value:function(){var e,t,n=this;this.rootComponent&&!this.rootComponent.enableTimer||(t=this.adIntervals>=30&&this.adIntervals<=3600?1e3*this.adIntervals:null!==(e=this.adData)&&void 0!==e&&e.refreshTime?1e3*this.adData.refreshTime:null)&&(this.adTimer&&clearTimeout(this.adTimer),this.adTimer=setTimeout((function(){return n.refetch(!0)}),t))}},{key:"clearAdTimer",value:function(){this.isDestroyed()||this.adTimer&&(clearTimeout(this.adTimer),this.adTimer=null)}},{key:"refetch",value:(n=ye()(we().mark((function e(){var t,n,r=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],!this.isDestroyed()&&this.isShow){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,this.fetchAndRender({isAdInterval:t,autoUnmount:!0});case 6:return e.next=8,this.show();case 8:if(this.adProxy.reportAdMonitorData(dy.IN.REFETCH_SUCCESS),!this.rootElement){e.next=13;break}return e.next=12,this.rootElement.nextLayout();case 12:this.reporter.checkExposure();case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(3),this.adProxy.reportAdMonitorData(dy.IN.REFETCH_FAILED,e.t0),n={errCode:dy.Bq.ERR_RENDER,errMsg:"customAd render failed"},this.emitter.emit("error",n);case 20:case"end":return e.stop()}}),e,this,[[3,15]])}))),function(){return n.apply(this,arguments)})},{key:"hide",value:(t=ye()(we().mark((function e(){var t,n,r,i=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>0&&void 0!==i[0]&&i[0],!this.isDestroyed()){e.next=3;break}throw{errMsg:Ey};case 3:if(this.isShow&&!this.isHiding){e.next=5;break}return e.abrupt("return");case 5:if(this.isHiding=!0,null===(t=this.rootComponent)||void 0===t||t.hide(),this.clearAdTimer(),n){e.next=26;break}if(this.isReady=!1,this.emitter.emit("close"),this.resetState(),this.adProxy.setTimePoint("p14"),this.reporter.reportTimePoints(),r=!1,this.rootComponent&&(r=this.rootComponent.getRootData("refetchable")),!r){e.next=22;break}return this.unmount(),e.next=20,this.fetchAndRender();case 20:e.next=24;break;case 22:return e.next=24,this.destroy();case 24:e.next=27;break;case 26:this.emitter.emit("hide");case 27:this.isHiding=!1;case 28:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"destroy",value:function(){var e=ye()(we().mark((function e(){return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:return this.isDestroy=!0,e.prev=3,e.next=6,this.ready();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:this.clearAdTimer(),this.unbindEvent(),this.resetState(),this.callbacks={load:[],error:[],close:[]},this.reporter.destroy();case 15:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"isDestroyed",value:function(){return this.isDestroy}},{key:"canHideAd",value:function(){return!!this.rootComponent&&this.rootComponent.getRootData("hidable")}},{key:"resetState",value:function(){this.unmount(),this.rootComponent=null,this.rootElement=null,this.isReady=!1,this.isShow=!1,this.isMulti=!1,this.adData=null,this.adDatas=[],this.reporter.reset(),this.landManager.reset()}},{key:"emitRender",value:function(e){return this.rootComponent?((0,Sy.updateRender)(this.rootComponent,e),this.rootComponent):(0,Sy.render)(Cy.ZP,e)}},{key:"render",value:function(){return this.adProxy.setTimePoint("p4"),this.template?(this.rootComponent=this.emitRender({manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy,template:this.template,systemInfo:this.systemInfo,adData:this.adProxy.data,adDatas:this.adProxy.datas,adCustomId:this.adCustomId,adPosition:this.adPosition,isEmpty:!1}),this.initialMultiLists(),this.rootElement=this.rootComponent.getRootElement(),this.adProxy.reportAdMonitorData(dy.IN.TPL_RENDER_SUCCESS),this.adProxy.setTimePoint("p5"),this.rootElement.ready()):this.renderEmpty()}},{key:"initialMultiLists",value:function(){if(this.rootComponent&&(this.isMulti=this.rootComponent.isMulti&&this.adProxy.isMulti,this.isMulti)){var e=this.rootComponent.multiShowList;e&&Array.isArray(e)?this.reporter.setMultiShowList(e):this.reporter.setMultiShowList(Object.keys(this.adDatas).map((function(e){return+e})))}}},{key:"unmount",value:function(){this.rootComponent&&((0,Sy.unmount)(this.rootComponent),this.rootElement=null,this.rootComponent=null)}},{key:"renderEmpty",value:function(){return this.rootComponent=this.emitRender({isEmpty:!0,manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy}),this.rootElement=this.rootComponent.getRootElement(),Sy.A.nextLayout()}}]),e}(),Ay=function(e){return Iy(e)},Py=function(e){I()(i,e);var t,n,r=C()(i);function i(e){var t;return R()(this,i),(t=r.call(this,xy,e)).isDestroy=!1,t}return P()(i,[{key:"destroy",value:(n=ye()(we().mark((function e(){return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroy){e.next=5;break}return e.next=3,Ay(this).destroy();case 3:t=this,wy.delete(t),this.isDestroy=!0;case 5:case"end":return e.stop()}var t}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"hide",value:(t=ye()(we().mark((function e(){var t;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Ay(this)).canHideAd()){e.next=6;break}return e.next=4,t.hide(!0);case 4:e.next=7;break;case 6:throw{errMsg:"the advertisement don't support hide"};case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isShow",value:function(){return Ay(this).isShow}}]),i}((function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];R()(this,e);var o=by()(t,r);wy.set(this,o)}));!function(e,t){var n,r=l()(t);try{var i=function(){var t=n.value;e.prototype[t]=function(){var e;return(e=Iy(this))[t].apply(e,arguments)}};for(r.s();!(n=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}(Py,["show","isDestroyed","onLoad","onError","onClose","onHide","offLoad","offError","offClose","offHide"]);var Dy=n(8382),Oy=n.n(Dy),Ny=n(12),Ry=0,My=0,Ly=B.iw,By=B.cj,Fy=(B.wZ,{}),jy=[],Wy=!0,Uy=7070083760581921;fe.Z.onReady((function(){var e=(0,Dr.Ew)();if(Ry=e.screenWidth,My=e.screenHeight,Wy=(0,Ce.aI)()){var t=n(4853).Z;t.onTouchStart((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&((Fy={}).touchStartPosX=Math.round(e.changedTouches[0].clientX),Fy.touchStartPosY=Math.round(e.changedTouches[0].clientY),Fy.touchEndPosX=0,Fy.touchEndPosY=0,Fy.touchStartTime=+new Date,Fy.touchInterval=0)})),t.onTouchEnd((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&(Fy.touchEndPosX=Math.round(e.changedTouches[0].clientX),Fy.touchEndPosY=Math.round(e.changedTouches[0].clientY),Fy.touchInterval=+new Date-Fy.touchStartTime,jy.length>=10&&jy.shift(),jy.push(Fy))}))}}));var Vy,Gy=5,Hy=8,Zy=function(e){var t=this;return Qy.call(this).then((function(){var n=(0,Qv.Wj)(t),r=n.container.layoutBox,i=r.left,o=r.top,a=(r.width,r.height,{slotid:Uy,ScreenHeight:My,ScreenWidth:Ry,PageY:o,PageX:i,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,TimeMs:+new Date});return e=Object.assign({},a,e),n.adProxy.reportAbnormalDetect(e)}))},qy=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,Qv.Wj)(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&nb.call(this,e,i),r},zy=function(e){var t=(0,Qv.Wj)(this),n=t.container.layoutBox,r=n.left,i=n.top,o=n.width,a=n.height,s=!1,c=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(c=100*(t.data.condition.widget_gray_time_limit||1)),c>0&&+new Date-t.showedExposureTime<c&&(s=!0,t.adProxy.reportAdMonitorData(48,{slotid:Uy}));var u=0;return t.adProxy.isValidCondition("widget_gray_bd_limit")&&(u=t.data.condition.widget_gray_bd_limit||10),e&&u>0&&(e.absoluteEndX-r<u||r+o-e.absoluteEndX<u||e.absoluteEndY-i<u||i+a-e.absoluteEndY<u)&&(s=!0,t.adProxy.reportAdMonitorData(47,{slotid:Uy})),s},Yy=function(e,t,n){for(var r=(0,Qv.Wj)(this),i=0;i<r.gridCount;i++)"item"===e?r["gridItem".concat(i)].style[t]=n:"icon"===e?r["gridItemIcon".concat(i)].style[t]=n:"name"===e&&(r["gridItemName".concat(i)].style[t]=n)},Ky=function(){var e=(0,Qv.Wj)(this);return Promise.resolve().then((function(){e.animateDoms.forEach((function(t){e[t].animate({scaleWidth:1,scaleHeight:1,duration:400}).catch((function(n){e[t].style.scaleWidth=1,e[t].style.scaleHeight=1}))}))}))},Jy=function(e,t){var n=this;return function(r){var i=(0,Qv.Wj)(n);if(i.adProxy.setCurrentData(e),qy.call(n,r)&&!zy.call(n,r)){var o=i.adProxy.data,a=o.product_type,s=o.dest_type;By&&46===a&&6===s?Promise.race([ib.call(n,r,e,t),(0,Xv.Vs)(500)]).then((function(){ub.call(n)})).catch((function(){ub.call(n)})):(ib.call(n,r,e,t),ub.call(n))}}},$y=function(){var e=this,t=(0,Qv.Wj)(this),n=cb.call(this),r=(n.outer,n.inner,n.scale),i=t.datas.map((function(e,t){var n=e.weapp_info||{};return{name:(0,py.$G)(n.nick_name,10),url:n.head_img||""}})),o=function(e,t){var n={container:{position:"absolute",overflow:"hidden",borderRadius:8,hidden:!0},topContainer:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",height:24,paddingLeft:12,paddingRight:12,paddingTop:8},gridTitle1:{width:36,height:16,lineHeight:16,fontSize:12},gridTitle2:{width:24,height:16,lineHeight:16,fontSize:12},gridTitleSplitLine:{width:2,height:16,lineHeight:16,fontSize:10,textAlign:"center",paddingRight:8,paddingLeft:8},gridContentContainerMask:{position:"absolute",top:0,left:0,right:0,bottom:0},gridFeedbackIconWarp:{display:"flex",height:8,width:16,flexDirection:"row",justifyContent:"center",alignItems:"center"},gridFeedbackIcon:{width:10,height:6},gridFeedbackArea:{display:"flex",height:16,width:50,flexDirection:"row",justifyContent:"start",alignItems:"center"},adFeedbackList:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adAffectBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:92,height:1,backgroundColor:"#E0E0E0"}},r=[],i=[],o=[],a=function(t,a){r.push('<view id="grid-item'.concat(t,'">\n        <image src="').concat(a.url,'" id="grid-item-icon').concat(t,'"></image>\n        <text id="grid-item-name').concat(t,'" value="').concat(a.name,'"></text>\n      </view>')),o.push("gridItem".concat(t)),o.push("gridItemIcon".concat(t)),o.push("gridItemName".concat(t)),i.push("gridItem".concat(t)),i.push("gridItemIcon".concat(t)),i.push("gridItemName".concat(t)),n["gridItem".concat(t)]={display:"flex",flexDirection:"column",alignItems:"center",width:5===e?60:70},n["gridItemIcon".concat(t)]={width:48,height:48,borderRadius:6},n["gridItemName".concat(t)]={marginTop:5===e?8:6,fontSize:5===e?12:14,lineHeight:5===e?16:18,height:5===e?16:18,width:5===e?60:70,textAlign:"center",overflow:"hidden"}};if(r.push('<view id="container" click-state="false">'),r.push('<view id="grid-content-container-mask"></view>'),r.push('<view id="top-container" bubble-event="true">\n                      <text id="grid-title1" value="小游戏"></text>\n                      <text id="grid-title-split-line" value="|"></view>\n                      <view id="grid-feedback-area">\n                        <text id="grid-title2" value="广告" bubble-event="true"></text>\n                        <view id="grid-feedback-icon-warp" bubble-event="true">\n                          <image id="grid-feedback-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon.png"></image>\n                        </view>\n                      </view>\n                    </view>'),i.push("topContainer"),i.push("gridTitle1"),i.push("gridTitle2"),i.push("gridTitleSplitLine"),i.push("gridFeedbackIconWarp"),i.push("gridFeedbackArea"),i=[].concat(x()(i),["adFeedbackMenu","adDislikeBtn","adFeedbackBtn","adAffectBtn","adFeedbackList","adDismatchBtn","adDuplicateBtn","adQualityBtn"]),5===e){r.push('<view id="grid-content-container">'),n.gridContentContainer={position:"relative",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:12,paddingLeft:10.5,paddingRight:10.5,paddingBottom:12},i.push("gridContentContainer");for(var s=0;s<e;s++)a(s,t[s]);r.push("</view>")}else if(8===e){r.push('<view id="grid-content-container">'),n.gridContentContainer={position:"relative",paddingTop:16,paddingLeft:14,paddingRight:14,paddingBottom:16};for(var c=0;c<2;c++){r.push('<view id="grid-count8-line'.concat(c,'">')),n["gridCount8Line".concat(c)]={display:"flex",flexDirection:"row",justifyContent:"space-between"};for(var u=0;u<4;u++){var l=4*c+u;a(l,t[l])}r.push("</view>")}n.gridCount8Line0.marginBottom=16,i.push("gridCount8Line0"),r.push("</view>")}return r.push('\n     <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  '),r.push("</view>"),{template:r.join(""),style:n,scaleDoms:i,animateDoms:o}}(t.gridCount,i),a=o.template,s=o.style,c=o.scaleDoms,u=o.animateDoms,l=Ny(a).root;e_.i.call(this,l,s),"white"===this.adTheme?(t.gridContentContainerMask.style.backgroundColor="#ffffff",t.gridTitle1.style.color="#7F7F7F",t.gridTitle2.style.color="#7F7F7F",t.gridTitleSplitLine.style.color="#7F7F7F",Yy.call(this,"name","color","#191919")):"black"===this.adTheme&&(t.gridContentContainerMask.style.backgroundColor="#1A1A1A",t.gridTitle1.style.color="#8c8c8c",t.gridTitle2.style.color="#8c8c8c",t.gridTitleSplitLine.style.color="#8c8c8c",t.gridFeedbackIcon.src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon_white.png",Yy.call(this,"name","color","#FFFFFF")),t.scaleDoms=c,t.scaleDoms.forEach((function(e){t[e].style.scale=r})),t.animateDoms=u,t.animateDoms.forEach((function(e){t[e].style.scaleWidth=.7,t[e].style.scaleHeight=.7})),t.container.on("click",(function(e){}));for(var d=0;d<t.gridCount;d++)t["gridItemIcon".concat(d)]&&t["gridItemIcon".concat(d)].on("click",Jy.call(this,d,"icon")),t["gridItemName".concat(d)]&&t["gridItemName".concat(d)].on("click",Jy.call(this,d,"name"));t.gridFeedbackArea.on("click",(function(n){qy.call(e,n,!1)&&(zy.call(e,n)||(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||ab.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),t.adFeedbackBtn.on("click",(function(n){qy.call(e,n,!1)&&(zy.call(e,n)||(t.adProxy.openFeedbackUrl(Wy?1007:1006),t.adFeedbackList.style.hidden=!0,ab.call(e,{secondGradeId:1,secondGradeDesc:"投诉"})))})),t.adDislikeBtn.on("click",(function(n){qy.call(e,n,!1)&&(zy.call(e,n)||(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,ab.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),t.adQualityBtn.on("click",(function(n){qy.call(e,n,!1)&&(zy.call(e,n)||(t.adFeedbackMenu.style.hidden=!0,ab.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),ob.call(e)))})),t.adDuplicateBtn.on("click",(function(n){qy.call(e,n,!1)&&(zy.call(e,n)||(t.adFeedbackMenu.style.hidden=!0,ab.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),ob.call(e)))})),t.adDismatchBtn.on("click",(function(n){qy.call(e,n,!1)&&(zy.call(e,n)||(t.adFeedbackMenu.style.hidden=!0,ab.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),ob.call(e)))})),t.adAffectBtn.on("click",(function(n){qy.call(e,n,!1)&&(zy.call(e,n)||(t.adFeedbackList.style.hidden=!0,ab.call(e,{secondGradeId:3,secondGradeDesc:"影响操作"}),ob.call(e)))})),t.container||t.adProxy.reportAdMonitorData(92),t.adProxy.setSlotData({gridScale:r})},Xy=function(){var e=this,t=(0,Qv.Wj)(this);try{var n=this.style,r=n.left,i=n.top,o=cb.call(this),a=(o.outer,o.inner);o.scale,t.data.type;$y.call(this),t.adProxy.preloadLanding(),t.container.style.left=r,t.container.style.top=i,t.container.style.width=a.width,t.container.style.height=a.height,eb.call(this),Kv.uo.add(t.container),t.emitter.emit("load"),t.container.ready().then((function(){(0,Xv.cM)("container 及其子元素 ready"),t.emitter.emit("ready")})).then((function(){Zy.call(e,{type:1})}))}catch(e){return t.adProxy.reportAdMonitorData(91,e),Promise.reject({})}},Qy=function e(t){var n=this;if(!t||"function"!=typeof t)return new Promise((function(t){return e.call(n,t)}));var r=(0,Qv.Wj)(this);r.isReady?t():r.emitter.on("ready",t)},eb=function(){var e=(0,Qv.Wj)(this),t=this.style.opacity;.5<=t&&t<=1?(this.style.opacity=t,e.gridContentContainerMask.style.opacity=t,e.gridFeedbackIcon.style.opacity=t):this.style.opacity=1},tb=function(){(0,Xv.cM)("开始 update UI");var e=(0,Qv.Wj)(this),t=this.style,n=t.left,r=t.top,i=cb.call(this),o=i.inner,a=i.scale,s=e.data;s.type,s.crt_size,s.product_type,s.use_style_data;return(0,Xv.cM)(this.style.width,this.style.height),(0,Xv.cM)("update UI",o),Object.assign(e.container.style,o,{left:n,top:r}),e.scaleDoms.forEach((function(t){e[t].style.scale=a})),eb.call(this),e.container.nextUpdate().then((function(){return(0,Xv.cM)("updateUI 完成"),Promise.resolve()}))},nb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(0,Qv.Wj)(this);if(!gb.call(this)&&n.container&&n.container.layoutBox){var r=n.container.layoutBox,i=r.width,o=r.height,a=0;[0,2,3].includes(t)&&(n.clickCount++,a=n.clickCount);var s={slotid:Uy,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(s)}},rb=function(e){var t=0,n=0,r=(0,Qv.Wj)(this).adProxy.slotData;try{if(5===r.gridCount)t=Math.round((61*e+40.5)*r.gridScale),n=Math.round(60*r.gridScale);else if(8===r.gridCount){var i=Math.floor(e/4),o=e%4;t=Math.round((77*o+44)*r.gridScale),n=Math.round((64+88*i)*r.gridScale)}}catch(e){}return{x:t,y:n}},ib=function(e,t,n){var r=(0,Qv.Wj)(this);if(!gb.call(this)&&r.container&&r.container.layoutBox){var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height,u=rb.call(this,t),l=r.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-o,clickRelativeTop:e.absoluteY-a,pressInterval:e.pressInterval,left:o,top:a,width:s,height:c,clickAdIndex:t,clickAdPos:n,weappExtraData:{box_center_x:u.x,box_center_y:u.y,box_aid_list:r.adProxy.datas.map((function(e){return e.aid})),click_pos:n}});return(0,Xv._u)(l,"grid","点击"),pb.call(this,{stage:1002}),jy=jy.map((function(e){var t=[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval];return"[".concat(t.join(","),"]")})),r.adProxy.reportBannerLastClick({lastClickArr:"[".concat(jy.join(","),"]"),expMs:r.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:o,top:a,width:s,height:c}),jy=[],l}},ob=function(){this.hide(),_private.emitter.emit("close")},ab=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!gb.call(this)){var d=(0,Qv.Wj)(this),f=d.container.layoutBox;f.left,f.top,f.width,f.height;n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:Ry,adHeight:My,adPosX:0,adPosY:0,expTime:d.showedExposureTime,slotId:Uy,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})}},sb=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(0,Qv.Wj)(this);if((0,Xv.cM)("检查曝光"),gb.call(this))return(0,Xv.cM)("已经销毁, 不再曝光"),Promise.resolve();if(!r.container.layoutBox)return(0,Xv.cM)("还没经过布局, 下一个 loop 再做"),(0,Xv.Vs)(0).then((function(){return e.call(t,n)}));var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height;if(a>My-1)return Promise.resolve();var u=!1===r.container.style.hidden;if(r.adProxy.isViewable=!!u,!r.isShowedExposureReported&&u){(0,Xv.cM)("原始曝光"),r.isShowedExposureReported=!0,r.showedExposureTime=+new Date;var l=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,isMulti:!0,multiList:Object.keys(r.datas).map((function(e){return+e})),exposureType:"showed"});(0,Xv._u)(l,"banner","原始"),Ky.call(this)}if(a+c/2<=My&&!r.isViewableExposureReported&&u){if(!n)return(0,Xv.cM)("可视曝光第 1 阶段, 需要 1 秒以后再次检验"),(0,Xv.Vs)(1e3).then((function(){return e.call(t,!0)}));(0,Xv.cM)("可视曝光第 2 阶段"),r.isViewableExposureReported=!0;var d=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,isMulti:!0,multiList:Object.keys(r.datas).map((function(e){return+e})),exposureType:"viewable"});(0,Xv._u)(d,"banner","可视")}return Promise.resolve()},cb=function(){var e,t,n=(0,Qv.Wj)(this);n.gridCount===Gy?t=(e=Math.min(345,Ry))/345*120:n.gridCount===Hy&&(t=(e=Math.min(343,Ry))/343*216);var r=this.style,i=r.width,o=r.height;i=i||e,o=o||t;var a=(0,Xv.XS)({outer:{width:i,height:o},inner:{width:e,height:t},minScale:.8,maxScale:Ry/e,side:"width"}),s=n.lastRealWidth!==a.inner.width||n.lastRealHeight!==a.inner.height;return this.style.realWidth=n.lastRealWidth=a.inner.width,this.style.realHeight=n.lastRealHeight=a.inner.height,s&&n.emitter.emit("resize",a.inner),a},ub=function(e){var t=(0,Qv.Wj)(this);t.landingCount++,t.landingCount>1&&t.adProxy.reportRepeatClick({slotId:Uy,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,clkCnt:t.landingCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName}),t.lastLandingTime=+new Date,t.lastJsapiStatus=2,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.adProxy.land(e).then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==t.lastJsapiName||"navigateToMiniProgram"==t.lastJsapiName||"openADCanvas"==t.lastJsapiName||"launchApplication"==t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((function(e){t.lastJsapiStatus=1}))},lb=function(e){var t=this;if(!gb.call(this)){var n=(0,Qv.Wj)(this);n.isClosed||n.adProxy.fetch(e).then((function(e){return n.datas=e,n.data=n.adProxy.data,Qy.call(t).then((function(){n.container.style.hidden=!0})).then((function(){return n.isReady=!1,Kv.uo.remove(n.container)})).then((function(){return n.isViewableExposureReported=!1,n.isShowedExposureReported=!1,n.showedExposureTime=0,n.adProxy.isViewable=!1,Xy.call(t),Qy.call(t)})).then((function(){return gb.call(t)?Qy.call(t):n.isHideBYCover?(n.lastDisplayAction="show",Qy.call(t)):(n.isShow=!0,pb.call(t,{stage:1001}),Promise.resolve().then((function(){n.container.style.hidden=!1,n.container.nextLayout((function(){return sb.call(t)})),db.call(t)})))})).catch((function(e){return n.emitter.emit("_error",e)}))})).catch((function(e){return n.emitter.emit("_error",e)}))}},db=function(){var e=this,t=(0,Qv.Wj)(this);if(t.adIntervals>=30&&t.adIntervals<=3600){t.adTimer&&clearTimeout(t.adTimer);var n=1e3*t.adIntervals;t.adTimer=setTimeout((function(){return lb.call(e,!0)}),n)}},fb=function(){if(!gb.call(this)){var e=(0,Qv.Wj)(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)}},pb=function(e){var t={adtype:4,stage:e.stage};(0,Qv.Wj)(this).adProxy.reportADFunnelModel(t)},hb=function(){var e=this;if(!gb.call(this)){var t=(0,Qv.Wj)(this);(0,Xv.cM)("destroy 调用"),fb.call(this),this._destroyed=!0,Zy.call(this,{type:2}),Qy.call(this).then((function(){return t.updateResult})).then((function(){(0,Xv.cM)("UI update 完成, 正式开始 destroy"),(0,Yv.Tb)(t.checkAdState),(0,Yv.b$)(t.onHide),t.emitter.off("resize"),t.emitter.off("_error"),t.emitter.off("load"),Kv.uo.remove(t.container),(0,Qv.bn)(e)}))}},gb=function(){return this._destroyed},vb="grid-ad has been destroyed",_b=(function(e){I()(n,e);var t=C()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.adUnitId,o=r.style,a=void 0===o?{left:0,top:0,width:0,height:0,opacity:1}:o,s=r.adIntervals,c=void 0===s?0:s,u=r.adTheme,l=void 0===u?"white":u,d=r.gridCount,f=void 0===d?5:d;R()(this,n),e=t.call(this),console.warn("格子广告位计划在2021年5月内下线，请尽快接入原生模板广告位替换，详情可查看MP流量主公告消息。");var p=(0,Qv.Wj)(zv()(e));if(p.emitter=new t_.Z,p.adProxy=new Jv.F({adUnitId:i,adType:"grid"}),p.clickCount=0,p.landingCount=0,p.lastLandingTime=0,p.lastJsapiName="",p.lastJsapiStatus=0,p.lastJsapiCostTime=0,p.isLandingPage=!1,p.landingPageCostTime=0,p.hideTime=0,p.isShowedExposureReported=!1,p.isViewableExposureReported=!1,p.isReady=!1,p.isShow=!1,p.emitter.on("ready",(function(){return p.isReady=!0})),p.isHideBYCover=!1,p.adCover=new $v.wy({adUnitId:i,adType:"grid"}),p.adIntervals="number"==typeof c?c:0,p.adTimer=null,p.showedExposureTime=0,p.clickFirstGradeTime=0,p.adCover.on($v.Xl,(function(){gb.call(zv()(e))||Qy.call(zv()(e)).then((function(){p.isShow&&!gb.call(zv()(e))&&(p.container.style.hidden=!0),p.isHideBYCover=!0,p.lastDisplayAction=""})).catch((function(e){}))})),p.adCover.on($v.tn,(function(){gb.call(zv()(e))||Qy.call(zv()(e)).then((function(){p.isShow&&!gb.call(zv()(e))&&(p.container.style.hidden=!1),p.isHideBYCover=!1,"show"==p.lastDisplayAction?e.show():"hide"==p.lastDisplayAction&&e.hide()})).catch((function(e){}))})),p.lastRealWidth=0,p.lastRealHeight=0,p.updateResult=Promise.resolve(),e.adUnitId=i,-1===[Gy,Hy].indexOf(f))return console.error("您设置的gridCount参数有误"),Oy()(e);if(p.gridCount=f,-1===["white","black"].indexOf(l))return console.error("您设置的adTheme参数有误"),Oy()(e);e.adTheme=l,e.style={},e._destroyed=!1;var h=null;Object.keys(a).forEach((function(t){Object.defineProperty(e.style,t,{configurable:!0,enumerable:!0,get:function(){return a[t]},set:function(n){gb.call(zv()(e))||n!==a[t]&&(a[t]=n,p.updateResult=new Promise((function(e){clearTimeout(h),h=setTimeout(e,0)})).then((function(){return Qy.call(zv()(e))})).then((function(){return Promise.all([tb.call(zv()(e)),p.container.nextLayout().then((function(){return sb.call(zv()(e))}))])})))}})})),e.style.realWidth=e.style.width,e.style.realHeight=e.style.height,p.adProxy.setSlotData({gridCount:f,adTheme:l,gridOpacity:e.style.opacity});var g=p.adProxy.fetch();return g.catch((function(e){return p.emitter.emit("_error",e)})),p.adFetchResult=g,p.adFetchResult.then((function(t){(p.emitter.emitter._events?Object.keys(p.emitter.emitter._events):[]).includes("_error")||"devtools"!==Ly?(p.datas=t,p.data=p.adProxy.data,Xy.call(zv()(e))):console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。")})),p.checkAdState=function(){p.adFetchResult.then((function(){if(p.isLandingPage){p.lastJsapiStatus=0,p.isLandingPage=!1;var e=+new Date;p.landingPageCostTime=e-p.hideTime,p.adProxy.reportLandingTime({slotId:Uy,costType:p.adProxy.data&&p.adProxy.data.is_cpm?1:2,openTime:p.hideTime,closeTime:e,stayTime:p.landingPageCostTime,jsapiName:p.lastJsapiName,clickTime:p.lastLandingTime,clkCnt:p.landingCount,retCode:p.lastJsapiStatus,costTime:p.lastJsapiCostTime,actTypeInt:1})}})).then((function(){p.isShow&&!p.adTimer&&db.call(zv()(e))})).catch((function(){}))},(0,Yv.dN)(p.checkAdState),p.onHide=function(t){fb.call(zv()(e)),p.hideTime=+new Date},(0,Yv.vv)(p.onHide),e}P()(n,[{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(gb.call(this))return Promise.reject({errMsg:vb});var i=(0,Qv.Wj)(this);return i.isHideBYCover?(i.lastDisplayAction="show",Qy.call(this)):(i.isShow=!0,pb.call(this,{stage:1001}),n?i.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):i.adProxy.resetAnalyseBranchInfo(),Qy.call(this).then((function(){i.container.style.hidden=!1,i.container.nextLayout((function(){return sb.call(e)})),db.call(e)})))}},{key:"hide",value:function(){var e=this;if(!gb.call(this)){var t=(0,Qv.Wj)(this);return t.isHideBYCover?(t.lastDisplayAction="hide",Qy.call(this)):(t.isShow=!1,t.adProxy.isViewable=!1,Qy.call(this).then((function(){t.container.style.hidden=!0,fb.call(e)})))}}},{key:"destory",value:function(){hb.call(this)}},{key:"destroy",value:function(){hb.call(this)}},{key:"onResize",value:function(e){gb.call(this)||(0,Qv.Wj)(this).emitter.on("resize",e)}},{key:"offResize",value:function(e){gb.call(this)||(0,Qv.Wj)(this).emitter.off("resize",e)}},{key:"onError",value:function(e){gb.call(this)||(0,Qv.Wj)(this).emitter.on("_error",e)}},{key:"offError",value:function(e){gb.call(this)||(0,Qv.Wj)(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){gb.call(this)||(0,Qv.Wj)(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){gb.call(this)||(0,Qv.Wj)(this).emitter.off("load",e)}}])}(Qv.wA),n(12)),mb=n.n(_b),yb=n(7733),bb=n(9883),wb=n(9831),Ib=n(6878),Sb={container:{zIndex:1000005,top:0,left:0,overflow:"hidden",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column"},adMaterialBg:{position:"absolute",hidden:!1,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"}},Cb=Object.assign({},{container:{zIndex:1000005,top:0,left:0,position:"absolute",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",overflow:"hidden",backgroundColor:"#ffffff"},navigator:{hidden:!0,height:72,width:"100%",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column",overflow:"hidden"},adMaterialBg:{position:"absolute",hidden:!0,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"},adMaterialContainer:{hidden:!0,position:"absolute",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0,width:"100%"},adMaterialLandscape:{width:311,height:175,marginLeft:32,marginRight:32,borderRadius:8},adCardInfo:{flexDirection:"column",marginTop:32,width:311,height:150},adHeadInfo:{width:311,height:28,flexDirection:"row",alignItems:"center"},adHeadIcon:{width:16,height:16,marginRight:6,borderRadius:8},adversName:{width:88,height:28,lineHeight:28,fontSize:14,lineBreak:"ellipsis",color:"#ffffff",opacity:.6},adTitle:{marginTop:18,height:28,width:216,fontSize:24,color:"#ffffff"},appInfo:{flexDirection:"column",alignItems:"center",width:"100%",height:160,backgroundColor:"#ffffff"},appIcon:{borderRadius:24,marginTop:16,marginBottom:8,width:48,height:48},appName:{width:"100%",height:24,textAlign:"center",lineHeight:24,fontSize:17,color:"#000000"}},{adFeedbackList:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}},{topBar:{position:"absolute",justifyContent:"flex-start",flexDirection:"row",alignItems:"flex-start",left:0,top:40},adFeedback:{hidden:!1,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:2.5},splitLineLeft:{width:1,height:18.5,marginLeft:8.5,marginRight:8.5,backgroundColor:"rgba(255, 255, 255, 0.25)"},count:{marginLeft:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:9,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{width:15,height:32,lineHeight:32,color:"#ffffff",fontSize:14}},{card:{backgroundColor:"#ffffff",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:84,width:"100%"},adIcon:{borderRadius:20,opacity:.95,width:40,height:40,marginRight:8,marginBottom:12,marginLeft:16},adInformation:{marginBottom:12,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},adName:{height:24,lineHeight:24,fontSize:17,lineBreak:"ellipsis",color:"#000000",marginBottom:2},adWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:14},buttonContainer:{marginBottom:12,flex:1,flexDirection:"row",justifyContent:"flex-end",marginRight:16,marginLeft:12,overflow:"hidden"},button:{height:32,lineHeight:32,width:88,textAlign:"center",lineBreak:"ellipsis",fontSize:16,color:"#ffffff",backgroundColor:"#07c160",borderWidth:1,borderColor:"#07c160",borderRadius:3,marginRight:10,marginLeft:10}},{closeContainer:{flexDirection:"column",justifyContent:"flex-end",alignSelf:"flex-end",marginBottom:16,height:54},close:{height:32,lineHeight:32,width:60,marginLeft:12,marginRight:12,textAlign:"center",lineBreak:"ellipsis",fontSize:14,color:"#ffffff",borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"}},{tipsContainer:{marginTop:12,flex:1,height:32,width:"100%",flexDirection:"column",justifyContent:"center",overflow:"hidden"},tipsLineOne:{height:16,textAlign:"center",lineHeight:16,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11},tipsLineTwo:{height:16,lineHeight:16,textAlign:"center",lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11}},{adCloseTips:{hidden:!0,position:"absolute",overflow:"hidden",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0},adCloseTipsWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipsContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{mediaBottom:{backgroundColor:"#ffffff",borderRadius:8,height:24,width:"100%",alignSelf:"flex-end"}},{adButtonContainer:{width:375,height:64,overflow:"hidden",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.15)",borderRadius:2},adButton:{marginLeft:32,flex:1,height:28,lineHeight:28,lineBreak:"ellipsis",fontSize:17,color:"#ffffff",opacity:.9,borderRadius:3},actionIconContainer:{marginRight:32,flexDirection:"row",justifyContent:"center",alignItems:"center",width:12,height:14},actionIconWrap1:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},actionIconWrap2:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},iconArrow1:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow2:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5},iconArrow3:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow4:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5}}),Tb={card:'\n  <view id="card">\n    <image id="ad-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/raphael/icon.png"></image>\n    <view id="ad-information" bubble-event="true">\n      <text id="ad-name" bubble-event="true" value="微信广告"></text>\n      <text id="ad-wording" bubble-event="true" value="本次封面广告赞助"></text>\n    </view>\n    <view id="button-container">\n      <text id="button" click-state="true" bubble-event="true" value="查看详情"></text>\n    </view>\n  </view>\n',appInfo:'\n  <view id="app-info">\n    <image id="app-icon"></image>\n    <text id="app-name"></text>\n  </view>\n',feedbackContent:'\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n',feedbackMenu:'\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n',topBar:'\n  <view id="top-bar">\n    <view id="count">\n      <view id="ad-feedback">\n        <text id="ad-text" value="广告" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n        <view id="split-line-left" bubble-event="true"></view>\n      </view>\n      <text id="count-down" value="5"></text>\n      <text id="count-down-append" value="秒"></text>\n    </view>\n  </view>\n',close:'\n  <view id="close-container">\n    <text id="close" click-state="true" bubble-event="true" value="跳过"></text>\n  </view>\n',gameTips:'\n  <view id="tips-container">\n    <text id="tips-line-one" value="抵制不良游戏，拒绝盗版游戏。 注意自我保护，谨慎受骗上当。"></text>\n    <text id="tips-line-two" value="适度游戏益脑，沉迷游戏伤身。 合理安排时间，享受健康生活。"></text>\n  </view>\n',closeTips:'\n  <view id="ad-close-tips">\n    <view id="ad-close-tips-wrap">\n      <text id="ad-close-tips-content" bubble-event="true" value="感谢你的反馈"></text>\n    </view>\n  </view>\n',mediaBottom:'\n  <view id="media-bottom">\n  </view>\n',adHeadInfo:'\n  <view id="ad-head-info" bubble-event="true">\n    <image id="ad-head-icon" bubble-event="true" src=""></image>\n    <text id="advers-name" value="" bubble-event="true"></text>\n  </view>\n',adTitle:'\n  <text id="ad-title" value="" bubble-event="true"></text>\n',adButtonContainer:'\n  <view id="ad-button-container">\n    <text id="ad-button" bubble-event="true" value=""></text>\n    <view id="action-icon-container">\n      <view id="action-icon-wrap-1">\n        <view id="icon-arrow-1"></view>\n        <view id="icon-arrow-2"></view>\n      </view>\n      <view id="action-icon-wrap-2">\n        <view id="icon-arrow-3"></view>\n        <view id="icon-arrow-4"></view>\n      </view>\n    </view>\n  </view>\n'},Eb=function(){return Xv._u.apply(void 0,arguments)},kb=mb()('\n  <view id="container">\n    <view id="navigator"></view>\n    <view id="ad-media">\n      <image id="ad-material-bg"></image>\n      <image id="ad-material" bubble-event="true"></image>\n      <view id="ad-material-container" bubble-event="true">\n        <image id="ad-material-landscape" bubble-event="true"></image>\n        <view id="ad-card-info" bubble-event="true"></view>\n      </view>\n    </view>\n  </view>\n').root,xb=0,Ab=0,Pb=0,Db=0,Ob=0,Nb=0,Rb=0,Mb=0,Lb=!1,Bb=!1,Fb=!1,jb="",Wb="",Ub="",Vb="",Gb="".concat(ei.Lq,"/adinfos.txt"),Hb=B.wZ?200:400,Zb=2e3,qb=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,Qv.Wj)(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&zb.call(this,e,i),r},zb=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(0,Qv.Wj)(this);if(r.container&&r.container.layoutBox){var i=r.container.layoutBox,o=i.width,a=i.height,s=0;[0,2,3].includes(n)&&(r.clickCount+=1,s=r.clickCount);var c={slotid:ei.DX[r.adType],costtype:null!==(t=r.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,click_time:Date.now(),click_cnt:s,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(o,10)||0,ad_height:parseInt(a,10)||0,press_interval:e.pressInterval,block_click:n};return r.adProxy.reportTouchClick(c)}},Yb=function(){var e=(0,Qv.Wj)(this),t=!1;return(0===e.startExposureTime||+new Date-e.startExposureTime<1e3)&&(t=!0),t},Kb=function(e,t){var n,r=(0,Qv.Wj)(this),i=r.container.style,o=i.width,a=i.height,s={click_button:e,cost_type:null!==(n=r.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,slotid:ei.DX[r.adType],is_game:Lb?1:0,pageentertime:+new Date(r.adProxy.getProgramStartTime()),ad_width:parseInt(o,10)||0,ad_height:parseInt(a,10)||0,clientexptime:r.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:xb,screen_height:Ab};return r.adProxy.reportAntifraud(s)},Jb=function(e){var t=(0,Qv.Wj)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}));Eb(n,"splashAd","关注")},$b=function(e){var t,n=(0,Qv.Wj)(this),r=+new Date,i={slotid:ei.DX[n.adType],is_game:Lb?1:0,costtype:null!==(t=n.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,close_type:e,exposure_duration:r-n.startExposureTime-n.hideDuration,start_time:n.startExposureTime,close_time:r};return n.adProxy.reportCloseAction(i)},Xb=function(e){var t,n=(0,Qv.Wj)(this),r={slotid:ei.DX[n.adType],is_game:Lb?1:0,costtype:null!==(t=n.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,button_type:e};return n.adProxy.reportAdEntranceExposure(r)},Qb=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u,d=(0,Qv.Wj)(this);n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:xb,adHeight:Ab,adPosX:0,adPosY:0,expTime:d.startExposureTime,slotId:ei.DX[d.adType],firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})},ew=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(0,Qv.Wj)(this);if(!r.isShowed)return Promise.resolve();if(!r.data||!r.container.layoutBox)return(0,Xv.Vs)(100).then((function(){return e.call(t,n)}));var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height;if(!r.isShowedExposureReported){r.isShowedExposureReported=!0,r.startExposureTime=+new Date,r.adProxy.setTimePoint("p6");var u=fe.Z.onReady((function(){r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"showed",source:r.source});var e="launch"===r.source?ei.ET.firstShowSuccess:ei.ET.secondShowSuccess;r.adProxy.reportAdMonitorData(e),r.adProxy.setSplashAdShowStatus()}));Eb(u,"splashAd","原始")}if(!r.isViewableExposureReported){if(!n)return(0,Xv.Vs)(1e3).then((function(){return e.call(t,!0)}));r.adProxy.setTimePoint("p7"),r.isViewableExposureReported=!0,r.adProxy.isViewable=!0;var l=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"viewable",source:r.source});Eb(l,"splashAd","可视")}return Promise.resolve()},tw=function(e){var t=(0,Qv.Wj)(this);if(t.container&&t.container.layoutBox){var n=t.container.layoutBox,r=n.left,i=n.top,o=n.width,a=n.height,s=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-i,pressInterval:e.pressInterval,left:r,top:i,width:o,height:a,source:t.source});return Eb(s,"splashAd","点击"),s}},nw=function(e,t){var n=this,r=(0,Qv.Wj)(this),i=r.data,o=i.appInfo,a=o.apkName,s=o.channelId,c=o.urlScheme,u=i.product_type,l=i.dest_type;if(12===u&&B.wZ&&4===r.androidAppState&&c&&c.trim().length>0)tw.call(this,e),Kb.call(this,t,e),r.adProxy.launchApplication(c).catch((function(){})),r.lastJsapiName="launchApplication",r.isLandingPage=!0;else if(12===u&&B.wZ&&r.isYYBInstalled){tw.call(this,e),Kb.call(this,t,e);var d=r.adProxy.data,f=d.aid,p=d.traceid,h=d.apurl,g=["ANDROIDWX.YYB.WX.ADVERTISE",p,f,a.replace(/\./g,"_"),"0",15,h.indexOf("ad.wx.com")>-1?1:0].join("."),v="tmast://download?oplist=1,2&pname=".concat(a,"&channelid=").concat(s,"&via=").concat(g);r.adProxy.launchApplication(v).catch((function(){rw.call(n)})),r.lastJsapiName="launchApplication",r.isLandingPage=!0}else B.cj&&46===u&&6===l?Promise.race([tw.call(this,e),(0,Xv.Vs)(500)]).then((function(){Kb.call(n,t,e),rw.call(n)})).catch((function(){Kb.call(n,t,e),rw.call(n)})):(tw.call(this,e),Kb.call(this,t,e),rw.call(this))},rw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Qv.Wj)(this),n=t.adProxy.land(e);return 23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(n.then((function(e){var n=/ok/.test(e.errMsg);n&&t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var r,i=+new Date;(t.lastJsapiStatus=0,t.lastJsapiCostTime=i-t.lastLandingTime,"private_addContact"===t.lastJsapiName)&&t.adProxy.reportLandingTime({slotId:ei.DX[t.adType],costType:null!==(r=t.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,openTime:t.lastLandingTime,closeTime:i,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:n?2:3,actTypeStr:n?"关注":"取消"})})).catch((function(){t.lastJsapiStatus=1})),Jb.call(this,n)):n.then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((function(e){t.lastJsapiStatus=1,t.adProxy.reportAdMonitorData(ei.ET.landingPageFail,{source:t.source,msg:e})})),n},iw=function(e){var t,n=(0,Qv.Wj)(this),r=l()(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i]&&clearTimeout(n[i])}}catch(e){r.e(e)}finally{r.f()}},ow=function(){var e,t=(0,Qv.Wj)(this);t.eventsMap={},null!==(e=t.appInfo)&&void 0!==e&&e.style&&(t.appInfo.style.top=16),t.componentsRenderred=!1,t.firstInserted=!1,t.adFeedbackInserted=!1,t.isDynamic=!1,t.isShowedExposureReported=!1,t.startExposureTime=0,t.isViewableExposureReported=!1,t.isShowed=!1,t.adProxy.isViewable=!1,t.isCheckAdRequest=!0,t.clickCount=0,t.lastLandingTime=0,t.lastJsapiName="",t.lastJsapiStatus=0,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.hideTime=0,t.hideDuration=0,t.isClosing=!1,t.isShowCloseTip=!1,t.clickFirstGradeTime=0,t.source="",iw.call(this,["countTimer"]),fe.Z.onReady((function(){var e,n,r;t.adProxy.reportTimePoints({slotid:ei.DX[t.adType],costtype:null!==(e=t.adProxy.data)&&void 0!==e&&e.is_cpm?1:2,splash_instance_id:null===(n=t.showInfo)||void 0===n?void 0:n.instanceId,scene:null===(r=t.showInfo)||void 0===r?void 0:r.scene,extInfo:{adInfos:t.adInfos}})}))},aw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t&&$b.call(this,t),(0,wb.R0)(e)},sw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,Qv.Wj)(this);return n.adProxy.fetch(!1,e,t)},cw=function(){var e=(0,Qv.Wj)(this);if((B.wZ||B.cj)&&!Fb)try{e.adFetchResult=sw.call(this).catch((function(){})),e.adProxy.reportAdMonitorData(ei.ET.OTHER_ADS_EMIT_FETCH)}catch(e){}},uw=function(){var e,t=(0,Qv.Wj)(this).data||{},n={};if(null!==(e=t.crtInfo)&&void 0!==e&&e.card_info)n=t.crtInfo.card_info;else if(t.crtInfo&&t.crtInfo.length>0){var r=t.crtInfo?t.crtInfo[0]:{};n=null!=r&&r.card_info?r.card_info:{}}return n},lw=function e(){var t,n,r=this,i=(0,Qv.Wj)(this),o=+new Date-i.startExposureTime-i.hideDuration,a=5e3;(null==i||null===(t=i.data)||void 0===t||null===(n=t.condition)||void 0===n?void 0:n.widget_gray_splashad_show_duration)>=a&&(a=i.data.condition.widget_gray_splashad_show_duration);var s=a-o;if(s>=0){var c=Math.ceil(s/1e3).toString();i.countDown&&(i.countDown.value=c),i.tplComponent&&i.tplComponent.emitAdCustomEvent(yb.A.CHANGECOUNTDOWN,{value:c}),i.countTimer&&clearTimeout(i.countTimer),i.countTimer=setTimeout((function(){e.call(r)}),1e3)}else"launch"===i.source&&i.isShowedExposureReported&&(i.isDynamic&&i.tplComponent.hide(),aw.call(this,{source:i.source,animated:!0},12))},dw=function(){var e=(0,Qv.Wj)(this);if("launch"===e.source)e.topBar&&Db&&(e.topBar.style.top=Db,e.adFeedbackMenu.style.top=Db+34,e.adFeedbackList.style.top=Db+34),e.closeContainer&&(e.closeContainer.style.marginTop=Ob-68),e.appInfo&&(e.appInfo.style.height=Nb,e.appInfo.style.width=xb,e.isDarkMode&&(e.appInfo.style.backgroundColor="#191919",e.container.style.backgroundColor="#191919")),e.appIcon&&(e.appIcon.src=e.showInfo.appIcon,e.appIcon.style.marginTop=Lb?16:28),e.appName&&(e.appName.value=e.showInfo.appName,e.appName.style.width=xb,e.appName.style.color=e.isDarkMode?"#ffffff":"#000000"),e.tipsContainer&&(e.tipsContainer.style.height=32,e.tipsContainer.style.width=xb,e.tipsLineOne.style.width=xb,e.tipsLineOne.style.color=e.isDarkMode?"#ffffff":"#000000",e.tipsLineTwo.style.color=e.isDarkMode?"#ffffff":"#000000"),e.adCloseTips&&(e.adCloseTips.style.height=Ab-Nb,e.adCloseTips.style.width=xb);else if("menu"===e.source){var t;if(!e.data)return;var n=e.data,r=uw.call(this),i=(0,Dr.xI)();e.adIcon.src=r.thumb,e.adName.value=r.title,null!==(t=n.button_action)&&void 0!==t&&t.button_text&&(e.button.value=n.button_action.button_text),i.screenTop&&i.screenTop>0?Pb=i.screenTop:Pb&&0!==Pb||(Pb=88*Ab/812),e.navigator.style.height=Pb,e.navigator.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff",e.card.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff",e.card.style.width=xb,e.card.style.height=Nb-Pb,e.adName.style.color=e.isDarkMode?"#ffffff":"#000000",e.adWording.style.color=e.isDarkMode?"#ffffff":"#000000",e.mediaBottom&&(e.mediaBottom.style.marginTop=Ob-12,e.mediaBottom.style.width=xb,e.mediaBottom.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff")}if("landscape"===e.crtOrientation){var o=e.data||{},a=uw.call(this);if(a&&e.adHeadInfo&&(e.adHeadIcon.src=a.thumb||"",e.adversName.value=a.title||"",e.adHeadInfo.style.width=xb/375*311,e.adversName.style.width=xb/375*311),o.hint_txt&&e.adTitle&&o.crt_size!==ei.vK.CRT_SIZE_BIG_PIC?(e.adTitle.value=o.hint_txt,e.adTitle.style.width=xb/375*311):a.description&&e.adTitle?(e.adTitle.value=a.description,e.adTitle.style.width=xb/375*311):e.adTitle&&o.product_type&&ei.sl[o.product_type]&&(e.adTitle.value="今日".concat(ei.sl[o.product_type],"推荐"),e.adTitle.style.width=xb/375*311),o.button_action&&e.adButtonContainer){e.adButton.value=o.button_action.button_text,e.adButtonContainer.style.width=xb,e.closeContainer&&(e.closeContainer.style.marginTop=Ob-132);var s={text:o.button_action.button_text,fontSize:17},c=(0,py.X1)(s)||80;e.adButton.style.width=c+8,e.adButton.style.width+12>100&&(e.adButton.style.width=e.adButton.style.width+12)}}},fw=function(e){var t=(0,Qv.Wj)(this);if(t.dynamicElems||(t.dynamicElems={}),t.dynamicEmitter||_w.call(this),!t.dynamicElems.root){var n=t.data.adDynamicList,r=hw.call(this,{tpl:n,source:e}),i=r.getRootElement();t.dynamicElems.root=i,t.container.add(t.dynamicElems.root),r.show(),t.tplComponent=r,t.tplComponent.emitComponentEvent(bb._d.SPLASHADFIRSTRENDER)}},pw=function(){var e="",t=(0,Qv.Wj)(this).adProxy.data,n=uw.call(this);return t.hint_txt&&t.crt_size!==ei.vK.CRT_SIZE_BIG_PIC?e=t.hint_txt:n.description?e=n.description:t.product_type&&ei.sl[t.product_type]&&(e="今日".concat(ei.sl[t.product_type],"推荐")),e},hw=function(e){var t=e.tpl,n=e.source,r=(0,Qv.Wj)(this),i=r.adProxy.data,o=pw.call(this),a=uw.call(this);return(0,Sy.render)(Cy.Mp,{manager:null,reporter:null,emitter:r.dynamicEmitter,adProxy:r.adProxy,template:t,systemInfo:{screenWidth:xb,screenHeight:Ab},adData:i,adCustomId:"dynamic",isEmpty:!1,scope:{rightButtonTop:Db||40,source:n,screenTop:Pb||88*Ab/812,isDarkMode:r.isDarkMode,adTitle:o||"",cardInfo:a,materialFile:jb,materialBgFile:Ub,materialBlurFile:Vb,private:r,appIcon:r.showInfo.appIcon,appName:r.showInfo.appName}},!1)},gw=function(e){var t=(0,Qv.Wj)(this);qb.call(this,e,!1)&&(Yb.call(this)||"launch"===t.source&&aw.call(this,{source:t.source,animated:!0},11))},vw=function(e){var t=this,n=(0,Qv.Wj)(this);switch(e.action){case yb.A.LANDAD:var r=e.value,i=r.event,o=r.index;if(!qb.call(this,i,13===o))return;13===o&&nw.call(this,i,o),aw.call(this,{source:n.source,animated:!1},o),16===o&&(n.isLandingPage=!0,(0,Xv.Vs)(Hb).then((function(){return nw.call(t,i,o)})));break;case yb.A.CHECKEXPOSURE:n.dynamicRendered=!0,n.isShowedExposureReported||ew.call(this),n.countTimer||lw.call(this);break;case yb.A.FEEDBACKREPORT:Qb.call(this,e.value);break;case yb.A.FEEDBACKBTNTAP:n.data&&n.adProxy.openFeedbackUrl(1014);break;case yb.A.REPORTMMDATA:e.value.id&&e.value.data&&n.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case yb.A.SPLASHSKIPAD:var a=e.value.event;gw.call(this,a);break;case yb.A.REPORTADMONITORDATA:var s=null==e?void 0:e.value,c=s.id,u=s.key,l=s.extInfo,d=c?{idKeyGroup:c,idKey:u}:u;n.adProxy.reportAdMonitorData(d,l)}},_w=function(){var e=this,t=(0,Qv.Wj)(this);t.dynamicEmitter=new Ty.v,t.dynamicEmitter.on("adCustomEvent",(function(t){vw.call(e,t)}))},mw=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,Qv.Wj)(this);e.forEach((function(e){var n=mb()(Tb[e.name]).root,i=Qv.Ue.call(t,n);r[e.parent].add(i)})),r.componentsRenderred=!0,dw.call(this),n&&yw.call(this)},yw=function(){var e=this,t=(0,Qv.Wj)(this);t.adFeedback&&!t.eventsMap.adFeedback&&t.adFeedback.on("click",(function(n){qb.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||Qb.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),t.adFeedbackBtn&&!t.eventsMap.adFeedbackBtn&&t.adFeedbackBtn.on("click",(function(n){qb.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,Qb.call(e,{secondGradeId:1,secondGradeDesc:"投诉"}),"launch"===t.source&&aw.call(e,{source:t.source,animated:!0},17),t.data&&t.adProxy.openFeedbackUrl(1014))})),t.adDislikeBtn&&!t.eventsMap.adDislikeBtn&&t.adDislikeBtn.on("click",(function(n){qb.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,Qb.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣"}))})),t.adQualityBtn&&!t.eventsMap.adQualityBtn&&t.adQualityBtn.on("click",(function(n){qb.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,Qb.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),"launch"===t.source&&aw.call(e,{source:t.source,animated:!0},17))})),t.adDuplicateBtn&&!t.eventsMap.adDuplicateBtn&&t.adDuplicateBtn.on("click",(function(n){qb.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,Qb.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),"launch"===t.source&&aw.call(e,{source:t.source,animated:!0},17))})),t.adDismatchBtn&&!t.eventsMap.adDismatchBtn&&t.adDismatchBtn.on("click",(function(n){qb.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,Qb.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),"launch"===t.source&&aw.call(e,{source:t.source,animated:!0},17))})),t.closeContainer&&!t.eventsMap.closeContainer&&t.closeContainer.on("click",(function(n){qb.call(e,n,!1)&&(Yb.call(e)||"launch"===t.source&&aw.call(e,{source:t.source,animated:!0},11))})),t.adMedia&&!t.eventsMap.adMedia&&t.adMedia.on("click",(function(t){bw.call(e,t,"adMedia")})),t.adButtonContainer&&!t.eventsMap.adButtonContainer&&t.adButtonContainer.on("click",(function(t){bw.call(e,t,"button")})),t.buttonContainer&&!t.eventsMap.buttonContainer&&t.buttonContainer.on("click",(function(n){if(qb.call(e,n,!1))return t.data?(aw.call(e,{source:t.source,animated:!1},16),t.isLandingPage=!0,(0,Xv.Vs)(Hb).then((function(){return nw.call(e,n,16)}))):void 0}));for(var n=0,r=["adFeedback","adFeedbackBtn","adDislikeBtn","adQualityBtn","adDuplicateBtn","adDismatchBtn","closeContainer","adMedia","buttonContainer","adButtonContainer"];n<r.length;n++){var i=r[n];t[i]&&!t.eventsMap[i]&&(t.eventsMap[i]=!0)}},bw=function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=(0,Qv.Wj)(this),a=(null==o||null===(t=o.data)||void 0===t||null===(n=t.condition)||void 0===n?void 0:n.widget_gray_splash_click_area_switch)||0;if((!a||"button"===i)&&qb.call(this,e,!1))return o.data&&"launch"===o.source?!Lb||B.wZ?(nw.call(this,e,13),(0,Xv.Vs)(200).then((function(){return aw.call(r,{source:o.source,animated:!1},13)}))):(aw.call(this,{source:o.source,animated:!1},13),nw.call(this,e,13)):void 0},ww=function(){var e=(0,Qv.Wj)(this);if(e.data){var t=uw.call(this);t&&"launch"===e.source&&(0,wb.yw)({showMenu:!0,title:t.title,icon:t.thumb,success:function(){e.adProxy.reportAdMonitorData(ei.ET.showSplashAdMenuSuccess)},fail:function(t){e.adProxy.reportAdMonitorData(ei.ET.showSplashAdMenuFail,{msg:t})}})}},Iw=function(){var e=(0,Qv.Wj)(this);try{var t,n=(null===(t=e.data)||void 0===t?void 0:t.aid)||"";e.adProxy.data&&e.adInfos&&e.adInfos.waidMap&&(e.adProxy.data.waid=e.adInfos.waidMap[n])}catch(e){}},Sw=function(){var e=(0,Qv.Wj)(this);if(!e.data||""===e.data||"object"!==c()(e.data)){var t=wb.fs.readFileSync(Wb,"utf-8");try{var n=JSON.parse(t);e.data=n,e.adProxy.data=n}catch(t){fe.Z.onReady((function(){e.adProxy.reportAdMonitorData(ei.ET.readFileDataFail,{source:e.source,msg:t})}))}}},Cw=function(){var e=(0,Qv.Wj)(this);if("launch"===e.source){mw.call(this,[{parent:"adMedia",name:"topBar"}],!0),e.adFeedbackInserted=!0}},Tw=function(){var e=(0,Qv.Wj)(this);if("launch"===e.source){var t=[{parent:"container",name:"appInfo"},{parent:"adMedia",name:"feedbackContent"},{parent:"adMedia",name:"feedbackMenu"},{parent:"adMedia",name:"close"},{parent:"container",name:"closeTips"}];"landscape"===e.crtOrientation&&(t=t.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"},{parent:"adMedia",name:"adButtonContainer"}])),(B.wZ||Db>0)&&(t.push({parent:"adMedia",name:"topBar"}),e.adFeedbackInserted=!0),e.showInfo.isGame&&t.push({parent:"appInfo",name:"gameTips"}),mw.call(this,t,!0),(0,wb.fy)({state:0}),Kv._w.layout().then((function(){(0,wb.fy)({state:1}),Kv._w.auto=!0})).catch((function(t){fe.Z.onReady((function(){e.adProxy.reportAdMonitorData(ei.ET.secondInsertFail,{source:e.source,msg:t})}))}))}},Ew=function(){var e=(0,Qv.Wj)(this);Nb=Math.max(160,160*Ab/812),Ob=Ab-Nb,e.adMedia.style.width=xb,e.adMedia.style.height=Ob;var t=9*Ab/16;e.adMaterial.style.width=t,e.adMaterial.style.height=Ab,e.adMaterial.style.left=t>xb?(xb-t)/2:0,"portrait"===e.crtOrientation?e.adMaterial.src=jb:"landscape"===e.crtOrientation&&(e.adMaterialBg.style.hidden=!1,e.adMaterialContainer.style.hidden=!1,e.adMaterial.style.width=xb,e.adMaterial.style.height=Ob,e.adMaterial.style.left=0,e.adMaterialContainer.style.width=xb,e.adMaterialContainer.style.height=Ob,e.adMaterial.src=Ub,e.adMaterialBg.style.width=.45*Ab*16/9,e.adMaterialBg.style.height=.45*Ab,e.adMaterialBg.style.left=-(.45*Ab*16/9-xb)/2,e.adMaterialLandscape.style.width=xb/375*311,e.adMaterialLandscape.style.height=xb/375*175,e.adMaterialBg.src=jb,e.adMaterialLandscape.src=jb,e.adCardInfo.style.width=xb/375*311,e.adCardInfo.style.marginLeft=8),e.adMaterial.scale=Ab/1920},kw=function(e){var t,n=this,r=(0,Qv.Wj)(this);if(r.showInfo=e,r.source=e.source,r.isDarkMode=e.isDarkMode||!1,e.isGame&&(Lb=e.isGame),xb=e.screenWidth,Ab=e.screenHeight,null!=r&&null!==(t=r.data)&&void 0!==t&&t.adDynamicList){var i=mb()('\n  <view id="container">\n  </view>\n').root;e_.i.call(this,i,Sb),r.isDynamic=!0,fw.call(this,e.source)}else e_.i.call(this,kb,Cb),Ew.call(this);if(r.container.style.width=xb,r.container.style.height=Ab,r.container.style.backgroundColor=r.isDarkMode?"#191919":"#ffffff",Kv._w.add(r.container),!r.isDynamic)try{wb.fs.access({path:Vb,success:function(){r.adMaterialBg.src=Vb}})}catch(e){}var o=[];"menu"!==r.source||r.isDynamic||(Sw.call(this),o=[{parent:"container",name:"card"},{parent:"adMedia",name:"mediaBottom"}],"landscape"===r.crtOrientation&&(o=o.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"}])),r.navigator.style.hidden=!1,mw.call(this,o,!0)),(0,wb.Ae)({state:0}),Kv._w.layout().then((function(){if(r.firstInserted=!0,r.isShowed=!0,(0,wb.Ae)({state:1}),"launch"!==r.source||r.isDynamic)Kv._w.auto=!0,r.container.requestLayout();else try{Tw.call(n)}catch(e){fe.Z.onReady((function(){r.adProxy.reportAdMonitorData(ei.ET.secondRenderFail,{source:r.source,msg:e})}))}})).catch((function(e){fe.Z.onReady((function(){r.adProxy.reportAdMonitorData(ei.ET.firstInsertFail,{source:r.source,msg:e})}))}))},xw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=(0,Qv.Wj)(this),o=Mb+ei.c3[r],a=ei.ET[r];return fe.Z.onReady((function(){var n;i.adProxy.reportAdMonitorData(a,t),i.adProxy.reportTimePoints({slotid:ei.DX[i.adType],costtype:null!==(n=i.adProxy.data)&&void 0!==n&&n.is_cpm?1:2,splash_instance_id:e.instanceId,errCode:o,scene:e.scene,extInfo:t})})),(0,wb.mQ)({adCallTime:Date.now(),errCode:o,show:!1,eventReceivedTime:n.startInit,cgiFetchStart:n.startFetchTime||0,cgiFetchCallBack:n.fetchCallbackTime||0})},Aw=function(e){I()(r,e);var t,n=C()(r);function r(){var e;R()(this,r),e=n.call(this);var t=(0,Qv.Wj)(zv()(e));return t.canShowed=!1,t.today=(0,py.Cy)(),t.countTimer=null,t.componentsRenderred=!1,t.isShowed=!1,t.firstInserted=!1,t.adFeedbackInserted=!1,t.isDynamic=!1,t.isShowedExposureReported=!1,t.startExposureTime=0,t.isViewableExposureReported=!1,t.isCheckAdRequest=!0,t.clickCount=0,t.lastLandingTime=0,t.lastJsapiName="",t.lastJsapiStatus=0,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.hideTime=0,t.hideDuration=0,t.isClosing=!1,t.isShowCloseTip=!1,t.clickFirstGradeTime=0,t.eventsMap={},t.source="",t.crtOrientation="portrait",t.adType="splashAd",t.adProxy=new Jv.F({adUnitId:"",adType:t.adType}),t.dynamicElems={},t.dynamicEmitter=null,t.tplComponent=null,(0,Ib.vl)((function(n){"close"===n.buttonType&&"launch"===n.source?($b.call(zv()(e),10),iw.call(zv()(e),["countTimer"])):"close"===n.buttonType&&"menu"===n.source?$b.call(zv()(e),14):"back"!==n.buttonType||"menu"!==n.source||t.isLandingPage?"menu"===n.buttonType&&Xb.call(zv()(e),1):$b.call(zv()(e),15)})),(0,Ib.vj)((function(n){if(n.menuViewFrame&&("launch"===n.source?(Db=n.menuViewFrame.y||0,t.dynamicEmitter&&t.isDynamic&&t.tplComponent&&Db&&t.tplComponent.emitComponentEvent(bb._d.SPLASHADMENUVIEW,{countdownTop:Db})):"menu"===n.source&&(Pb=n.menuViewFrame.height||0,t.dynamicEmitter&&t.isDynamic&&t.tplComponent&&Pb&&t.tplComponent.emitComponentEvent(bb._d.SPLASHADMENUVIEW,{navHeight:Pb,menuHeight:172-Pb})),B.cj&&t.firstInserted&&!t.adFeedbackInserted))try{Cw.call(zv()(e))}catch(e){fe.Z.onReady((function(){t.adProxy.reportAdMonitorData(ei.ET.iosThirdInsertFail,{source:t.source,msg:e})}))}})),(0,Ib.Pp)((function(){t.adProxy.setTimePoint("p5"),"launch"!==t.source||t.isDynamic||(Sw.call(zv()(e)),dw.call(zv()(e))),ww.call(zv()(e)),Iw.call(zv()(e)),t.hideTime>0&&(t.hideDuration=+new Date-t.hideTime),ew.call(zv()(e)),"launch"===t.source&&t.isShowedExposureReported&&lw.call(zv()(e)),t.isLandingPage&&(t.isLandingPage=!1)})),(0,Ib.EJ)((function(){t.hideTime=+new Date,iw.call(zv()(e),["countTimer"])})),(0,Ib.BZ)((function(){Bb||(Bb=!0),B.cj&&t.startExposureTime>0&&+new Date-t.startExposureTime>1e3&&ew.call(zv()(e),!0),t.container&&(t.isDynamic&&(t.tplComponent&&(0,Sy.unmount)(t.tplComponent),t.dynamicElems={},t.dynamicEmitter=null,t.tplComponent=null),Kv._w.remove(t.container)),ow.call(zv()(e))})),e}return P()(r,[{key:"otherAdsEmitFetch",value:function(){cw.call(this)}},{key:"show",value:function(e){var t=this;Fb=!0;var n=(0,Qv.Wj)(this);n.showInfo=e,n.adProxy.scene=e.scene,n.adProxy.setTimePoint("p14");var r=n.adProxy.getTimePoint("p14");if(fe.Z.onReady((function(){setTimeout((function(){var t="launch"===e.source?ei.ET.launchAcceptShouldShow:ei.ET.menuAcceptShouldShow;n.adProxy.reportAdMonitorData(t)}),Zb)})),"launch"!==e.source)return this.showDetail(e);var i={};try{var o=wb.fs.readFileSync(Gb,"utf-8");i.adInfos=o||{},n.adInfos=JSON.parse(o)}catch(e){n.adInfos={},i.errMsg=n.adProxy.processStackMsg(e),i.fileName=Gb}if(0===Object.keys(n.adInfos).length)Mb=1e4,Rb=ei.c3.NO_ADINFOS,this.showAdByRealtimeFetch(e,r);else{var a;fe.Z.onReady((function(){setTimeout((function(){n.isCheckAdRequest&&(n.adFetchResult=sw.call(t).catch((function(){})))}),Zb)}));var s=n.adInfos.ads||[];(null===(a=n.adInfos)||void 0===a?void 0:a.isCheckAndFetch)||0?(Mb=2e4,this.showAdByRealtimeFetch(e,r,s)):this.showAdByCheckAdsOnline(e,r),n.adDatas={};var c,u=l()(s);try{for(u.s();!(c=u.n()).done;){var d=c.value;try{var f="".concat(ei.Lq,"/").concat(d.aid,".txt"),p=wb.fs.readFileSync(f,"utf-8"),h=JSON.parse(p);n.adDatas[d.aid]=h}catch(e){}}}catch(e){u.e(e)}finally{u.f()}}try{var g,v=(null===(g=n.adInfos)||void 0===g?void 0:g.deviceInfo)||{};n.adProxy.setDeviceInfo(v)}catch(e){}}},{key:"showAdByRealtimeFetch",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=(0,Qv.Wj)(this),o={gameAppId:e.appId,deviceOrientation:e.screenHeight>e.screenWidth?"portrait":"landscape",screenWidth:e.screenWidth,screenHeight:e.screenHeight,systemVersion:e.osVersion,wechatVersion:e.weixinVersion,SDKVersion:Zv.c,envVersion:e.osVersion,model:e.model,platform:e.osType,isWaGame:e.isGame,isIOS:B.cj,isAndroid:B.wZ,adNetworkType:e.networkType},a={weappEnterScene:e.scene,requestType:2,preloadAds:r};return i.adProxy.setTimePoint("p15"),fe.Z.onReady((function(){setTimeout((function(){i.adProxy.reportAdMonitorData(ei.ET.START_CHECK_AD_STATUS)}),Zb)})),sw.call(this,o,a).then((function(t){fe.Z.onReady((function(){setTimeout((function(){i.adProxy.reportAdMonitorData(ei.ET.CHECK_AD_STATUS_SUCCESS)}),Zb)})),i.adProxy.setTimePoint("p16");var r=!1;"fetch"===i.adProxy.lastAdRespone&&(i.isCheckAdRequest=!1,i.data=t,i.adProxy.data=t,r=!0,Mb=1e4===Mb?1e4:3e4),n.showDetail(e,{aid:Number(t.aid)},r)})).catch((function(r){return i.adProxy.setTimePoint("p16"),xw.call(n,e,{msg:r},{startInit:t},"CHECK_AD_STATUS_ERROR")}))}},{key:"showAdByCheckAdsOnline",value:function(e,t){var n=this,r=(0,Qv.Wj)(this),i=r.adInfos.requestInQueue&&"true"===r.adInfos.requestInQueue,o=JSON.stringify({weapp_enter_scene:e.scene||0}),a={slot_id:ei.DX[r.adType],publisher_appid:e.appId,network_type:ei.MC[e.networkType]||0,app_service_type:e.isGame?2:1,sdk_version:Zv.c,weixin_version:e.weixinVersion,os_version:e.osVersion,os_type:e.osType,model:e.model,ads:r.adInfos.ads||[],ext_check_ads_weapp:o};r.adProxy.setTimePoint("p15"),fe.Z.onReady((function(){setTimeout((function(){r.adProxy.reportAdMonitorData(ei.ET.START_CHECK_AD_STATUS)}),1500)})),(0,nm.G_)(a,i).then((function(t){fe.Z.onReady((function(){setTimeout((function(){r.adProxy.reportAdMonitorData(ei.ET.CHECK_AD_STATUS_SUCCESS)}),1500)})),r.adProxy.setTimePoint("p16");var i=JSON.parse(t.rawData);n.showDetail(e,i)})).catch((function(i){return r.adProxy.setTimePoint("p16"),xw.call(n,e,{msg:i},{startInit:t},"CHECK_AD_STATUS_ERROR")}))}},{key:"showDetail",value:(t=ye()(we().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h,g,v,_,m,y,b,w,I,S,C,T,E=this,k=arguments;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=k.length>1&&void 0!==k[1]?k[1]:{aid:0},r=k.length>2&&void 0!==k[2]&&k[2],Kv._w.style.width=t.screenWidth,Kv._w.style.height=t.screenHeight,Kv._w.auto=!1,i=(0,Qv.Wj)(this),o={startInit:i.adProxy.getTimePoint("p14"),startFetchTime:i.adProxy.getTimePoint("p15"),fetchCallbackTime:i.adProxy.getTimePoint("p16")},a=[],s=n.aid,"launch"!==t.source||!r){e.next=21;break}d=(null==i||null===(c=i.data)||void 0===c||null===(u=c.rerankingExtInfo)||void 0===u?void 0:u.material_hash)||"",jb="".concat(ei.Lq,"/").concat(s,"_").concat(d,".png"),Ub="".concat(ei.Lq,"/").concat(s,"_").concat(d,"_pure_color.png"),Vb="".concat(ei.Lq,"/").concat(s,"_").concat(d,"_blur.png"),a.push(jb),i.crtOrientation="portrait",f=(null==i||null===(l=i.data)||void 0===l?void 0:l.crtInfo[0])||{},Object.keys(f).length>0&&(p=f.width,h=f.height,i.crtOrientation=p>h?"landscape":"portrait"),"landscape"===i.crtOrientation&&a.push(Ub),e.next=39;break;case 21:if("launch"!==t.source||r){e.next=38;break}if(s&&"0"!==s){e.next=24;break}return e.abrupt("return",xw.call(this,t,{adInfos:i.adInfos,checkAdStatus:n},o,"NO_AID"));case 24:if(s&&null!=i&&null!==(g=i.adDatas)&&void 0!==g&&g[s]&&(i.data=i.adDatas[s],i.adProxy.data=i.adDatas[s]),i.crtOrientation=s?null==i||null===(v=i.adInfos)||void 0===v||null===(_=v.crtSizeMap)||void 0===_?void 0:_[s]:"",i.crtOrientation){e.next=28;break}return e.abrupt("return",xw.call(this,t,{adInfos:i.adInfos,checkAdStatus:n},o,"CRT_ORIENTATION_NOT_SURE"));case 28:y=s?null==i||null===(m=i.adInfos)||void 0===m?void 0:m.materialHashMap[s]:"",Wb="".concat(ei.Lq,"/").concat(s,".txt"),jb="".concat(ei.Lq,"/").concat(s,"_").concat(y,".png"),Ub="".concat(ei.Lq,"/").concat(s,"_").concat(y,"_pure_color.png"),Vb="".concat(ei.Lq,"/").concat(s,"_").concat(y,"_blur.png"),a.push(Wb),a.push(jb),"landscape"===i.crtOrientation&&a.push(Ub),e.next=39;break;case 38:"menu"===t.source&&(I={},null!==(b=i.data)&&void 0!==b&&b.crtInfo&&i.data.crtInfo.length>0?(S=Ep()(i.data.crtInfo,1),I=S[0]):null!==(w=i.data)&&void 0!==w&&w.crtInfo&&(I=i.data.crtInfo),Object.keys(I).length>0&&!i.crtOrientation&&(i.crtOrientation=i.data.crtInfo.width>i.data.crtInfo.height?"landscape":"portrait"),Xb.call(this,2));case 39:e.prev=39,"launch"===t.source&&a.forEach((function(e){wb.fs.accessSync(e)})),e.next=59;break;case 43:if(e.prev=43,e.t0=e.catch(39),Rb=ei.c3.MATERIAL_NOT_READY,C=i.adProxy.processStackMsg(e.t0),T=!1,!i.data){e.next=57;break}return e.prev=49,e.next=52,i.adProxy.handleBulkSaveMaterials(i.data);case 52:T=!0,e.next=57;break;case 55:e.prev=55,e.t1=e.catch(49);case 57:if(T){e.next=59;break}return e.abrupt("return",xw.call(this,t,{adInfos:i.adInfos,checkAdStatus:n,msg:C},o,"MATERIAL_NOT_READY"));case 59:i.adProxy.setTimePoint("p17"),"launch"===t.source&&(0,wb.mQ)({showMenu:!0,show:!0,errCode:Rb+Mb,adCallTime:i.adProxy.getTimePoint("p17"),eventReceivedTime:o.startInit,cgiFetchStart:o.startFetchTime,cgiFetchCallBack:o.fetchCallbackTime,success:function(){i.adProxy.setTimePoint("p18"),fe.Z.onReady((function(){i.adProxy.reportAdMonitorData(ei.ET.launchShowSplashAdSuccess)}))},fail:function(e){i.adProxy.setTimePoint("p18"),fe.Z.onReady((function(){i.adProxy.reportAdMonitorData(ei.ET.showSplashAdFail,{adInfos:i.adInfos,checkAdStatus:n,msg:e})})),ow.call(E),i.container&&Kv._w.remove(i.container)}});try{i.adProxy.setTimePoint("p4"),kw.call(this,t)}catch(e){aw.call(this,{source:t.source,animated:!1},19),ow.call(this),fe.Z.onReady((function(){i.adProxy.reportAdMonitorData(ei.ET.firstRenderFail,{adInfos:i.adInfos,source:t.source,msg:e})}))}case 62:case"end":return e.stop()}}),e,this,[[39,43],[49,55]])}))),function(e){return t.apply(this,arguments)})}]),r}(Qv.wA),Pw=n(3123);Vy||(Vy=new Aw),(0,Ib.Ug)((function(e){Vy||(Vy=new Aw),Vy.show(e)})),(0,Ib.S4)((function(){Vy||(Vy=new Aw),Vy.otherAdsEmitFetch()}));var Dw={},Ow={},Nw=0;(0,gr.H)((function(e){var t=e.webviewId;Nw=t,Ow[t]||(Ow[t]=!0,(0,L.dq)(t,(function(e){delete Ow[e],delete Dw[e]})))}));var Rw=function(e){return e&&!0===e.multiton?new em.C$(e):(Dw[Nw]||(Dw[Nw]=new em.C$(e)),Dw[Nw])};var Mw={};function Lw(e,t){var n,r="";if(e===xn.Dk&&(r="setCookies"),e===xn.KC&&(r="getCookies"),r){var i=(0,An.hI)(this);Mw[i]=Mw[i]||(n={},_a()(n,xn.Dk,null),_a()(n,xn.KC,null),n),__safeway__.pluginPermissionBytes.ifIs(i,r,1,(function(n){Mw[i][e]=n,t()}))}}function Bw(e,t){var n=(0,An.hI)(this);B.gm?t(!0):Mw[n]&&null!==Mw[n][e]?t(!!Mw[n][e]):Lw.call(this,e,(function(){return t(!!Mw[n][e])}))}var Fw={muteMicrophone:!1,muteEarphone:!1};function jw(e){return(0,W.Kn)(e)?((0,W.jn)(e.muteMicrophone)&&(Fw.muteMicrophone=e.muteMicrophone),(0,W.jn)(e.muteEarphone)&&(Fw.muteEarphone=e.muteEarphone),Fw):Fw}var Ww=function(e){if((0,d.r3)("joinVoIPChat",e,{signature:"",nonceStr:"",timeStamp:0,groupId:""})){var t="video"===e.roomType?1:2,n=Object.assign({},e,{muteConfig:jw(e.muteConfig),handsFree:!(0,W.jn)(e.handsFree)||e.handsFree,roomType:t}),r=(0,An.hI)(this);(0,d.qu)(r)("joinVoIPChat",n,{beforeSuccess:function(e){(0,d.nY)("joinVoIPChat",{}),e.errCode=0},beforeFail:function(e){void 0===e.errCode&&(e.errCode=function(e){var t=new RegExp(/^joinVoIPChat:(?:fail )?fail: (-?[0-9]+?), (-?[0-9]+?), .*/).exec(e);if(!t)return-1e3;var n=parseInt(t[1],10),r=parseInt(t[2],10);if(-10086!==n&&-10087!==n)return-1e3;switch(r){case 0:return 0;case-1:return-1;case-7:return-2;default:return-1e3}}(e.errMsg))}})}},Uw=function(e){try{var t=(0,An.hI)(this);(0,d.qu)(t)("exitVoIPChat",Object.assign({},e,{success:function(t){var n=t.errMsg||"ok";(0,d.nY)("exitVoIPChat",{}),(0,d.FE)({name:"exitVoIPChat",args:e,errMsg:n,errCode:0,res:t})},fail:function(t){var n=t.errCode||-1,r=t.errMsg||"unknown error";(0,d.FE)({name:"exitVoIPChat",args:e,success:!1,errMsg:r,errCode:n,res:t})},complete:function(){}}))}catch(t){"function"==typeof e.fail&&e.fail({errCode:-1,errMsg:"exitVoIPChat:fail ".concat(t.message)}),"function"==typeof e.complete&&e.complete({errCode:-1,errMsg:"exitVoIPChat:complete ".concat(t.message)})}},Vw=function(e){if((0,d.r3)("updateVoIPChatMuteConfig",e,{muteConfig:{}})){var t=(0,An.hI)(this);(0,d.qu)(t)("updateVoIPChatMuteConfig",Object.assign({},e,{muteConfig:jw(e.muteConfig),handsFree:!(0,W.jn)(e.handsFree)||e.handsFree}))}},Gw=(0,on.s)("voIPChatMembersChanged"),Hw=Gw.onMethod,Zw=Gw.offMethod;(0,d.jQ)("onVoIPChatMembersChanged",(function(e){e.errCode=0,e.errMsg=e.errMsg||"ok",Gw.emit(e)}));var qw=function(e){try{(0,d.jQ)("onVoIPChatSpeakersChanged",(function(t){t.errCode=0,t.errMsg=t.errMsg||"ok","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}))}catch(t){t.errCode=t.errCode||-1,t.errMsg=t.errMsg||"unknown error","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}},zw=function(){(0,d.jQ)("onVoIPChatSpeakersChanged",(function(){}))},Yw=(0,on.s)("VoIPChatInterrupted"),Kw=function(e){e.errCode||(e.errCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("current mini app entered background")?-1:e.includes("in comming call")?-2:-1e3}(e.reason)),Yw.emit(e)};(0,d.jQ)("onVoIPChatInterrupted",(function(e){Kw(e)})),(0,d.jQ)("onVoIPChatInterruptedJsEvent",(function(e){Kw(e)}));var Jw=Yw.onMethod,$w=Yw.offMethod,Xw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("subscribeVoIPVideoMembers",e,{openIdList:[]})&&(0,d.IN)("subscribeVoIPMembers",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("subscribeVoIPMembers","subscribeVoIPVideoMembers")}})},Qw=(0,on.s)("VoIPVideoMembersChanged"),eI=Qw.onMethod,tI=Qw.offMethod;(0,d.jQ)("onVoIPVideoMembersChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qw.emit(e)}));var nI=(0,on.s)("voIPChatStateChanged"),rI=nI.onMethod,iI=nI.offMethod;(0,d.jQ)("onVoIPChatStateChanged",(function(e){e.errCode=e.errCode||0,e.errMsg=e.errMsg||"ok",nI.emit(e)}));var oI=xv(!1,"login"),aI=xv(!1,"getUserInfo",!0),sI=["scope.record","scope.writePhotosAlbum","scope.camera"],cI=xv(!1,"getSetting"),uI=n(1562),lI=n(5817),dI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("saveFileToDisk",e,{})},fI=1;fe.Z.onReady((function(){["close","error","listening","message"].forEach((function(e){(0,d.jQ)("onUDPSocket".concat((0,Ce.fm)(e)),(function(t){var n=t.socketId;delete t.socketId,"[onSocket".concat((0,Ce.fm)(e),"]socketId=").concat(n),(0,on.s)("jsapi-udp-".concat(n,"-").concat(e)).emit(t)}))}))}));var pI=function(){function e(t){var n,r=this;if(R()(this,e),this._id=fI++,(0,d.IN)("createUDPSocket",{socketId:this._id,type:"udp6"===t?"IPv6":"IPv4",fail:function(e){"[createUDPSocket][fail]errMsg=".concat(e.errMsg),n=e.errMsg}}),n)throw new Error(n);["close","error","listening","message"].forEach((function(e){var t=(0,on.s)("jsapi-udp-".concat(r._id,"-").concat(e));r["on".concat((0,Ce.fm)(e))]=t.onMethod,r["off".concat((0,Ce.fm)(e))]=t.offMethod}))}return P()(e,[{key:"bind",value:function(e){var t,n;if((0,d.IN)("bindUDPSocket",{port:e,socketId:this._id,success:function(e){t=e.port},fail:function(e){n=e.errMsg,"[bindUDPSocket][fail] errMsg=".concat(n)}}),n)throw new Error(n);return t}},{key:"setTTL",value:function(e){var t;if((0,d.IN)("setUDPSocketTTL",{ttl:e,socketId:this._id,fail:function(e){t=e.errMsg,"[bindUDPSocket][fail] errMsg=".concat(t)}}),t)throw new Error(t)}},{key:"send",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=ArrayBuffer.isView(n.message)?n.message.buffer:n.message,(0,d.IN)("sendUDPSocketMessage",Object.assign({},n,{socketId:this._id,message:e,success:function(e){},fail:function(e){var n=e.errMsg;"[sendUDPSocketMessage][fail] errMsg=".concat(n),(0,on.s)("jsapi-udp-".concat(t._id,"-error")).emit({errMsg:"send: fail ".concat(n)})}}))}},{key:"connect",value:function(){}},{key:"write",value:function(e){this.send(e)}},{key:"close",value:function(){var e;if((0,d.IN)("closeUDPSocket",{socketId:this._id,fail:function(t){e=t.errMsg}}),e)throw new Error(e)}}]),e}(),hI=Ut.Z.UDP,gI=new WeakMap,vI=new WeakMap,_I=new WeakMap,mI=1,yI=function(){function e(t){var n=this;if(R()(this,e),!hI)return null;var r=new hI;if(null===r)return null;var i=mI++;["close","error","listening","message"].forEach((function(e){var t=(0,on.s)("jsbinding-udp-".concat(i,"-").concat(e));r["on".concat(e)]=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];"message"===e&&r[0].remoteInfo&&(r[0].localInfo={address:r[0].remoteInfo.localaddress,family:r[0].remoteInfo.localfamily,port:r[0].remoteInfo.localport},delete r[0].remoteInfo.localaddress,delete r[0].remoteInfo.localfamily,delete r[0].remoteInfo.localport),t.emit.apply(t,r),"error"===e?Reporter.reportIDKey({key:"UDPError"}):"message"===e&&Reporter.reportIDKey({key:"receiveUDPMessage"})},n["on".concat((0,Ce.fm)(e))]=t.onMethod,n["off".concat((0,Ce.fm)(e))]=t.offMethod})),gI.set(this,r),vI.set(this,i),_I.set(this,"udp6"===t?"IPv6":"IPv4")}return P()(e,[{key:"bind",value:function(e){return(0,Bd.P)("bindUDP","",1,0,"","",!1,0),Reporter.reportIDKey({key:"bindUDP"}),gI.get(this).bind({port:e,type:_I.get(this)})}},{key:"setTTL",value:function(e){if(Number.isNaN(Number(e))){(0,on.s)("jsbinding-udp-".concat(vI.get(this),"-error")).emit({errMsg:"set ttl fail: ttl must be a number.",errCode:-4})}else{var t=gI.get(this);"IPv6"===_I.get(this)?(t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_UNICAST_HOPS"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_RECVHOPLIMIT"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_RECVPKTINFO"),optionval:1})):t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_TTL"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_PKTINFO"),optionval:1}),t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_RECVTTL"),optionval:Number(e)})}}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,wo.J)("UDP")){var t,n="udp://".concat(e.address);t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,gI.get(this).send(Object.assign({},e,{message:t})),Math.random()>.99&&(0,Bd.P)("sendUDP",n,1,0,"","",!1,(0,Ce.Y6)(e.message)),Reporter.reportIDKey({key:"sendUDPMessage"})}else{var r=(0,on.s)("jsbinding-udp-".concat(vI.get(this),"-error"));r.emit({errMsg:"send socket fail: no permission",errCode:-3})}}},{key:"connect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=gI.get(this);"function"==typeof t.connect&&t.connect(e)}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,wo.J)("UDP")){var t;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;var n=gI.get(this);"function"==typeof n.write?n.write(Object.assign({},e,{message:t})):this.send(e)}else{var r=(0,on.s)("jsbinding-udp-".concat(vI.get(this),"-error"));r.emit({errMsg:"write socket fail: no permission",errCode:-3})}}},{key:"onConnect",value:function(e){gI.get(this).onconnect=e}},{key:"close",value:function(){return gI.get(this).close()}}]),e}(),bI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"udp4";return B.gm?new pI(e):new yI(e)},wI=[1,7,9,11,13,15,17,19,20,21,22,23,25,37,42,43,53,69,77,79,87,95,101,102,103,104,109,110,111,113,115,117,119,123,135,137,139,143,161,179,389,427,465,512,513,514,515,526,530,531,532,540,548,554,556,563,587,601,636,993,995,1719,1720,1723,2049,3659,4045,5060,5061,6e3,6566,6665,6666,6667,6668,6669,6697,10080,1099,1433,1521,2375,3128,3306,3389,5432,5984,6379,7001,7002,8443,8888,9200,9300,10051,11211,27017,27018,27019];function II(e){return e<=1024||(e>=8e3&&e<=8100||wI.indexOf(e)>-1)}var SI=new WeakMap,CI=1,TI=[],EI=function(){function e(t){var n=this;R()(this,e),SI.set(this,t),["close","connect","error","message"].forEach((function(e){var r=(0,on.s)("jsapi-tcp-".concat(t,"-").concat(e));n["on".concat((0,Ce.fm)(e))]=r.onMethod,n["off".concat((0,Ce.fm)(e))]=r.offMethod}))}return P()(e,[{key:"connect",value:function(e){var t,n=this,r=(0,on.s)("jsbinding-tcp-".concat(SI.get(this),"-error"));(0,zd.k)({api:"tcp",url:"tcp://".concat(e.address)}).then((function(i){if(!i.isInLAN||i.isLocalHost||II(Number(e.port)))r.emit({errMsg:"connect fail: invalid address ".concat(e.address,":").concat(e.port),errCode:-4});else if((0,d.IN)("connectTCPSocket",{id:SI.get(n),address:e.address,port:e.port,fail:function(e){"[TCPSocket.connect][fail]errMsg=".concat(e.errMsg),t=e.errMsg}}),t)throw new p.iZ(t)})).catch((function(e){r.emit({errMsg:"connect fail: ".concat(e.message||e.errMsg),errCode:-4})}))}},{key:"write",value:function(e){ArrayBuffer.isView(e)&&(e=e.buffer);var t,n={message:e};if((0,d.IN)("writeTCPSocket",{id:SI.get(this),message:n.message,fail:function(e){"[TCPSocket.write][fail]errMsg=".concat(e.errMsg),t=e.errMsg}}),t)throw new p.iZ(t)}},{key:"close",value:function(){var e;if((0,d.IN)("closeTCP",{id:SI.get(this),fail:function(t){e=t.errMsg}}),e)throw new p.iZ(e)}}]),e}(),kI=function(e){I()(n,e);var t=C()(n);function n(){R()(this,n);var e=TI[TI.length-1];if(e&&Date.now()-e<3e5)throw new p.iZ("[TCPSocket] created too much.");TI.push(Date.now());var r,i=CI++;if((0,d.IN)("createTCPSocket",{id:i,fail:function(e){"[createTCPSocket][fail]errMsg=".concat(e.errMsg),r=e.errMsg}}),r)throw new p.iZ(r);return t.call(this,i)}return n}(EI),xI=function(){function e(){var t=this;R()(this,e);var n,r=CI++;if(SI.set(this,r),(0,d.IN)("createTCPServer",{id:r,fail:function(e){"[createTCPServer][fail]errMsg=".concat(e.errMsg),n=e.errMsg}}),n)throw new p.iZ(n);["close","connection","error","listening"].forEach((function(e){var n=(0,on.s)("jsapi-tcp-".concat(r,"-").concat(e));t["on".concat((0,Ce.fm)(e))]=n.onMethod,t["off".concat((0,Ce.fm)(e))]=n.offMethod}))}return P()(e,[{key:"listen",value:function(e){var t,n;if((0,d.IN)("listenTCPServer",{id:SI.get(this),port:e.port,fail:function(e){t=e.port,n=e.errMsg}}),n)throw new p.iZ(n);return t}},{key:"close",value:function(){var e;if((0,d.IN)("closeTCP",{id:SI.get(this),fail:function(t){e=t.errMsg}}),e)throw new p.iZ(e)}}]),e}();fe.Z.onReady((function(){["close","connect","connection","error","listening","message"].forEach((function(e){(0,d.jQ)("onTCP".concat((0,Ce.fm)(e)),(function(t){var n=t.id;delete t.id,"[onSocket".concat((0,Ce.fm)(e),"]id=").concat(n);var r=(0,on.s)("jsapi-tcp-".concat(n,"-").concat(e));"connection"===e?r.emit(new EI(t.socketId)):r.emit(t)}))}))}));var AI=Ut.Z.TCP,PI=new WeakMap,DI=new WeakMap,OI=new WeakMap,NI=1,RI=[],MI=function(){function e(t,n){var r=this;R()(this,e);var i=NI++;["close","error","connect","message"].forEach((function(e){var o=(0,on.s)("jsbinding-tcp-".concat(i,"-").concat(e));r["on".concat((0,Ce.fm)(e))]=o.onMethod,r["off".concat((0,Ce.fm)(e))]=o.offMethod,(!n||"close"!==e&&"error"!==e)&&(t["on".concat(e)]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];"message"===e&&n[0].remoteInfo&&(n[0]={message:n[0].message,size:n[0].size,remoteInfo:{address:n[0].remoteInfo.address,family:n[0].remoteInfo.family,port:n[0].remoteInfo.port},localInfo:{address:n[0].remoteInfo.localaddress,family:n[0].remoteInfo.localfamily,port:n[0].remoteInfo.localport}}),o.emit.apply(o,n)})})),PI.set(this,t),OI.set(this,n),DI.set(this,i)}return P()(e,[{key:"connect",value:function(e){var t=this,n=(0,on.s)("jsbinding-tcp-".concat(DI.get(this),"-error"));(0,wo.J)("TCP")?(0,zd.k)({api:"tcp",url:"tcp://".concat(e.address,":").concat(e.port)}).then((function(r){(r.isInLAN&&!r.isLocalHost||r.isInDomainList)&&!II(Number(e.port))?PI.get(t).connect(e):n.emit({errMsg:"connect fail: invalid address ".concat(e.address,":").concat(e.port),errCode:-4})})).catch((function(e){n.emit({errMsg:"connect fail: ".concat(e.message||e.errMsg),errCode:-4})})):n.emit({errMsg:"connect fail: no permission",errCode:-3})}},{key:"write",value:function(e){if((0,wo.J)("TCP")){ArrayBuffer.isView(e)&&(e=e.buffer);var t={message:e};OI.get(this)&&(t.socketfd=OI.get(this)),PI.get(this).send(t)}else{(0,on.s)("jsbinding-tcp-".concat(DI.get(this),"-error")).emit({errMsg:"write socket fail: no permission",errCode:-3})}}},{key:"close",value:function(){OI.get(this)?PI.get(this).close(OI.get(this)):PI.get(this).close()}}]),e}(),LI=function(e){I()(n,e);var t=C()(n);function n(){var e;if(R()(this,n),!AI)return Oy()(e,null);var r=RI[RI.length-20];if(r&&Date.now()-r<3e5)throw new p.iZ("[TCPSocket] created too much.");RI.push(Date.now());var i=new AI;return null===i?Oy()(e,null):t.call(this,i)}return n}(MI),BI=function(){function e(){var t=this;if(R()(this,e),!AI)return null;var n=new AI;if(null===n)return null;var r=NI++,i={};["close","connection","error","listening"].forEach((function(e){var o=(0,on.s)("jsbinding-tcp-".concat(r,"-").concat(e));"connection"===e?n.onaccept=function(e){var t=new MI(n,e);i[e]=t,o.emit(t),n.recv(e)}:n["on".concat(e)]=function(){if("close"===e){var t=arguments.length<=0?void 0:arguments[0];if(i[t]){var r=DI.get(i[t]);return(0,on.s)("jsbinding-tcp-".concat(r,"-").concat(e)).emit(),void delete i[t]}}o.emit.apply(o,arguments),"listening"===e&&n.accept()},t["on".concat((0,Ce.fm)(e))]=o.onMethod,t["off".concat((0,Ce.fm)(e))]=o.offMethod})),PI.set(this,n)}return P()(e,[{key:"listen",value:function(e){var t=PI.get(this);return t.onbind=function(){t.listen(10)},t.bind(e)}},{key:"close",value:function(){PI.get(this).close()}}]),e}(),FI=function(){return B.gm?new kI:new LI},jI=function(){return B.gm?new xI:new BI},WI=n(1553),UI=n(3624);var VI,GI=n(1570),HI="webapi_getenteroptions_sensitivetype",ZI=function(e){return wxNativeConsole.info(HI+" "+e)},qI=(0,Nr.Ce)(!1,"getInnerEnterOptions",!0),zI=function(e,t,n){var r={app_info_list:[{appid:e,scene:t}]};ZI("reqData="+JSON.stringify(r)),qI({pluginId:e,apiName:HI,reqData:r,complete:function(e){ZI("respData="+JSON.stringify(e))},fail:function(e){n(e.errmsg)},success:function(r){var i;try{i=JSON.parse(r.respData.data)}catch(e){return void n("system error")}var o=(i.sensitive_type_data_list||[]).find((function(n){return n.appid===e&&n.scene===t})),a=o?o.sensitive_type_list:[],s=a.indexOf("sessionId");-1!==s&&(a[s]="sessionid"),n(null,a||[])}})},YI=Object.prototype.hasOwnProperty,KI=Object.assign,JI=[{name:"chooseAddressForPlugin",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Zo(e)}},permissionBytes:["chooseAddressForPlugin"],copyToWx:!0},{name:"openSettingForPlugin",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ra(e)}},permissionBytes:["openSettingForPlugin"],copyToWx:!0},{name:"requestPaymentForPlugin",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qo(e)}},permissionBytes:["requestPaymentForPlugin"],copyToWx:!0},{name:"chooseAddressDirectly",factory:function(e){return function(t){!function(e,t){(0,Nr.KS)({pluginId:e,apiName:"GetPluginAuthScope",reqData:{scope_list:["scope.eCommercePluginAuths"]},fail:function(){t(!1)},success:function(e){var n=JSON.parse(e.respData.data).auth_item_list.find((function(e){return"scope.eCommercePluginAuths"===e.scope}));t(!!n&&n.state&&1===n.state)}})}(e,(function(e){e?(0,an.L)("chooseAddressDirectly",{},void 0,(function(e){0===e.errMsg.indexOf("chooseAddressDirectly:ok")?t.success&&t.success(e):t.fail&&t.fail(e),t.complete&&t.complete(e)})):(0,f.YG)("chooseAddressDirectly",t,"no permission")}))}},permissionBytes:[],copyToWx:!0},{name:"enterContactForPlugin",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.permissionBytes=[1,1,1],(0,an.L)("appServiceEnterContact",e,void 0,(function(t){t.errMsg&&(t.errMsg=t.errMsg.replace("enterContact","enterContactForPlugin")),0===t.errMsg.indexOf("enterContactForPlugin:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))}},permissionBytes:["enterContactForPlugin"],copyToWx:!0},{name:"openUrl",factory:function(){return function(e){e.isNativeStyle=!0,(0,d.IN)("private_openUrl",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","openUrl")}})}},permissionBytes:["openUrlForPlugin"],copyToWx:!0},{name:"setLoginAuth",factory:function(e){return function(t){t.pluginId=e,t.appId=fe.Z.accountInfo.appId,(0,an.L)("setPluginLoginAuth",t,void 0,(function(e){0===e.errMsg.indexOf("setLoginAuth:ok")?t.success&&t.success(e):t.fail&&t.fail(e),t.complete&&t.complete(e)}))}},permissionBytes:["setLoginAuthForPlugin"],copyToWx:!0},{name:"navigateBackNative",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="";(0,W.Kn)(t.extraData)&&(n=JSON.stringify(t.extraData)),(0,d.qu)(e)("navigateBackNative",Object.assign({},t,{extraData:n}))}},permissionBytes:["navigateBackNative"],copyToWx:!0},{name:"setNavigationBarRightButton",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("setNavigationBarRightButton",t,{hide:!0})&&(0,d.qu)(e)("setNavigationBarRightButton",t,{})}},permissionBytes:["setNavigationBarRightButton"],copyToWx:!0},{name:"openAddressWithLightMode",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.qu)(e)("openAddressWithLightMode",t,{beforeSuccess:function(e){(0,p.dK)(e,"addressPostalCode","postalCode"),(0,p.dK)(e,"proviceFirstStageName","provinceName"),(0,p.dK)(e,"addressCitySecondStageName","cityName"),(0,p.dK)(e,"addressCountiesThirdStageName","countyName"),(0,p.dK)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){delete e.err_msg}})}},permissionBytes:["openAddressWithLightMode"],copyToWx:!0},{name:"editTextWithPopForm",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.qu)(e)("editTextWithPopForm",t,{})}},permissionBytes:["editTextWithPopForm"],copyToWx:!0},{name:"navigateToMiniProgramDirectly",factory:function(){return function(e){(0,ne.iy)(e,e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("navigateToMiniProgram","navigateToMiniProgramDirectly")}})}},permissionBytes:["navigateToMiniProgramDirectly"],copyToWx:!0},{name:"getInnerEnterOptions",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,Pr._X)();n.sessionid=n.sessionid||n.sessionId,delete n.sessionId,zI(e,n.scene,(function(e,r){var i={};e||(i=KI(n.__public),r.forEach((function(e){YI.call(n,e)&&(i[e]=n[e])}))),(0,f.FE)({name:"getInnerEnterOptions",args:t,success:!e,errMsg:e,res:i})}))}},permissionBytes:["private_getEnterOptions"],copyToWx:!1},{name:"chooseInvoiceTitleDirectly",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ia((0,An.qS)(e,"chooseInvoiceTitle","chooseInvoiceTitleDirectly"))}},permissionBytes:["private_chooseInvoiceTitleDirectly"],copyToWx:!1},{name:"getPhoneNumberDirectly",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,an.L)("getPhoneNumber",Object.assign({permissionBytes:[1,1,1]},e),void 0,(function(t){"string"==typeof t.public.errMsg&&(t.public.errMsg=t.public.errMsg.replace(/^getPhoneNumber:/,"getPhoneNumberDirectly:")),(0,GI.F0)(t.public,"getPhoneNumberDirectly",e,{})}))}},permissionBytes:["private_getPhoneNumberDirectly"],copyToWx:!1},{name:"openCardDirectly",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Wo((0,An.qS)(e,"openCard","openCardDirectly"))}},permissionBytes:["private_openCardDirectly"],copyToWx:!1},{name:"launchTrialMiniProgram",factory:function(){return function(e){var t=(0,Kg.Qc)("https://open.weixin.qq.com/sns/checktpbetaplugintoken");t.query={appid:String(e.appid),token:String(e.token)},e.extraData&&(t.query.extraData=JSON.stringify(e.extraData));var n={url:t.format(),isNativeStyle:!0};(0,d.IN)("private_openUrl",n,{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","launchTrialMiniProgram")}})}},permissionBytes:["private_launchTrialMiniProgram"],copyToWx:!1},{name:"navigateToDevMiniProgram",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};jn(t,e)}},permissionBytes:[],copyToWx:!1},{name:"createTCPServer",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=jI();e.success&&e.success(t),e.complete&&e.complete(t)}},permissionBytes:["TCPServer"],copyToWx:!1}],$I=function(e,t,n){var r=__safeway__.pluginPermissionBytes.ifIsNot;Promise.all((t||[]).map((function(t){return function(t){return new Promise((function(n){return r(e,t,0,n)}))}(t)}))).then((function(e){n(e.every((function(e){return e})))}))},XI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("getRandomValues",e,{length:0})&&((!Number.isInteger(e.length)||e.length<=0||e.length>1048576)&&(0,d.YG)("getRandomValues",e,"invalid length"),(0,d.IN)("getRandomValues",e))},QI=uu,eS=lu.oK,tS=lu.j8,nS=He,rS=fu,iS=du,oS=pu,aS=hu,sS=wf.BH.I9,cS=wf.BH.EO,uS=wf.BH.zU,lS=wf.BH.FE,dS=wf.BH.hv,fS=wf.IM.yb,pS=wf.IM.F2,hS=wf.IM.gS,gS=wf.Rk.Dk,vS=wf.Rk.xW,_S=wf.iR.ew,mS=wf.iR.cC,yS=wf.iR.RC,bS=gu,wS=wf.pk.sI,IS=wf.pk.BI,SS=wf.pk.rw,CS=wf.pk.wT,TS=wf.pk.s$,ES=wf.pk.Hw,kS=wf.pk.i5,xS=wf.pk.GO,AS=Jn.hideToast,PS=Jn.showLoading,DS=Jn.hideLoading,OS=Jn.showModal,NS=Jn.showActionSheet,RS=Ra,MS=Ma,LS=La,BS=Wa,FS=Ua,jS=Va,WS=Ga,US=co,VS=lo,GS=fo,HS=vo,ZS=Ro,qS=yn,zS=_n,YS=In,KS=wn,JS=mn,$S={getAccountInfoSync:function(){var e,t,n=ar(),r=(0,An.hI)(this);return n.plugin={appId:r||"",version:(e=Pn.Z.pluginInfos[r].customVersion,t=Number(e),[Math.floor(t/1e6),Math.floor(t/1e3)%1e3,t%1e3].join("."))},n},request:Tv.request,uploadFile:Tv.uploadFile,downloadFile:Tv.downloadFile,connectSocket:Tv.connectSocket,getStorage:Bv.getStorage,getStorageSync:Bv.getStorageSync,removeStorage:Bv.removeStorage,removeStorageSync:Bv.removeStorageSync,setStorage:Bv.setStorage,setStorageSync:Bv.setStorageSync,createAudioContext:jv.createAudioContext,createCameraContext:jv.createCameraContext,createMapContext:jv.createMapContext,createVideoContext:jv.createVideoContext,createInnerAudioContext:jv.createInnerAudioContext,createLivePlayerContext:jv.createLivePlayerContext,createLivePusherContext:jv.createLivePusherContext,createSelectorQuery:function(e){return ac(e,(0,An.hI)(this))},createIntersectionObserver:function(e,t){return uc(e,t,(0,An.hI)(this))},createMediaQueryObserver:function(e,t){return fc(e,t,(0,An.hI)(this))},nextTick:function(e){return vc(e)},createCanvasContext:Gv.createCanvasContext,createOffscreenCanvas:Gv.createOffscreenCanvas,drawCanvas:Gv.drawCanvas,canvasToTempFilePath:Gv.canvasToTempFilePath,canvasGetImageData:Gv.canvasGetImageData,canvasPutImageData:Gv.canvasPutImageData,createAnimation:cs,reportAnalytics:function(e,t){var n={business:"mmbizwxaanalytics",eventID:e,data:t||{},uid:Date.now().toString(16)+Math.random().toString(16).substr(2),type:1,version:Zv.c,pluginId:(0,An.hI)(this),pluginVersion:(0,An.hb)(this)};(0,d.IN)("reportRealtimeAction",{actionData:JSON.stringify(n)})},chooseImage:sS,chooseMedia:lI.K,previewImage:cS,getImageInfo:function(e){return uS(e,Tv.downloadFile.bind(this))},saveImageToPhotosAlbum:lS,compressImage:dS,startRecord:fS,stopRecord:pS,getRecorderManager:hS,playVoice:_S,pauseVoice:mS,stopVoice:yS,getBackgroundAudioManager:wf.pk.uR,setInnerAudioOption:wf.nN,chooseVideo:gS,saveVideoToPhotosAlbum:vS,createMediaContainer:wf.We,createMediaRecorder:wf.tX,createVideoDecoder:wf.fF,createMediaAudioPlayer:wf.G_,getLocation:Ds,openLocation:Rs,chooseLocation:Os,choosePoi:Ns,onLocationChange:Ls,offLocationChange:Bs,onLocationChangeError:js,offLocationChangeError:Ws,startLocationUpdate:Us,stopLocationUpdate:Vs,getNetworkType:Dc.getNetworkType,onNetworkStatusChange:Dc.onNetworkStatusChange,offNetworkStatusChange:Dc.offNetworkStatusChange,getSystemInfo:Dr.So,getSystemInfoSync:Dr.xI,startAccelerometer:Rc,stopAccelerometer:Mc,onAccelerometerChange:Fc,offAccelerometerChange:Bc,startCompass:Uc,stopCompass:Vc,onCompassChange:Zc,offCompassChange:Hc,getClipboardData:eu,setClipboardData:tu,makePhoneCall:zc,makeVoIPCall:Yc,startGyroscope:ud,stopGyroscope:ld,onGyroscopeChange:dd,offGyroscopeChange:fd,startDeviceMotionListening:hd,stopDeviceMotionListening:gd,onDeviceMotionChange:vd,offDeviceMotionChange:_d,scanCode:Kc,scanItem:Xc,makeBluetoothPair:ol,openBluetoothAdapter:mu,closeBluetoothAdapter:yu,getBluetoothAdapterState:bu,onBluetoothAdapterStateChange:Vu,offBluetoothAdapterStateChange:Gu,startBluetoothDevicesDiscovery:wu,stopBluetoothDevicesDiscovery:Iu,getBluetoothDevices:Su,getConnectedBluetoothDevices:Tu,createBLEConnection:Eu,closeBLEConnection:ku,getBLEDeviceServices:xu,getBLEDeviceCharacteristics:Au,getBLEDeviceRSSI:Cu,setBLEMTU:Hu,getHCEState:bl,startHCE:wl,stopHCE:Il,sendHCEMessage:Sl,onHCEMessage:Cl,offHCEMessage:Tl,getNFCAdapter:zl,notifyBLECharacteristicValueChanged:Pu,notifyBLECharacteristicValueChange:Du,readBLECharacteristicValue:Ou,writeBLECharacteristicValue:Nu,onBluetoothDeviceFound:Wu,offBluetoothDeviceFound:Uu,onBLEConnectionStateChanged:Ru,offBLEConnectionStateChanged:Mu,onBLEConnectionStateChange:Lu,offBLEConnectionStateChange:Bu,onBLECharacteristicValueChange:Fu,offBLECharacteristicValueChange:ju,startBeaconDiscovery:nu,stopBeaconDiscovery:ru,getBeacons:iu,onBeaconUpdate:ou,offBeaconUpdate:au,onBeaconServiceChange:su,offBeaconServiceChange:cu,startWifi:al,stopWifi:sl,getWifiList:cl,getConnectedWifi:ul,connectWifi:ll,presetWifiList:dl,setWifiList:fl,onGetWifiList:pl,onWifiConnected:gl,offGetWifiList:hl,offWifiConnected:vl,onEvaluateWifi:yl,addPhoneCalendar:bd,addPhoneRepeatCalendar:wd,getRandomValues:XI,captureScreen:QI,onUserCaptureScreen:eS,offUserCaptureScreen:tS,setKeepScreenOn:nS,setScreenBrightness:rS,getScreenBrightness:iS,vibrateShort:oS,vibrateLong:aS,addPhoneContact:bS,login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{miniprogram_appid:fe.Z.accountInfo.appId});oI.call(this,{apiName:"webapi_plugin_login",reqData:t,success:function(t){Object.assign(t,JSON.parse(t.respData.data)),delete t.respData,"function"==typeof e.success&&e.success(t)},fail:e.fail,complete:e.complete})},getUserInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{miniprogram_appid:fe.Z.accountInfo.appId});aI.call(this,{apiName:"webapi_plugin_getuserinfo",reqData:t,success:function(t){t.userInfo=JSON.parse(t.respData.data),t.iv=t.respData.iv,t.signature=t.respData.signature,delete t.respData,"function"==typeof e.success&&e.success(t)},fail:e.fail,complete:e.complete})},getNativeUserInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,An.hI)(this);e.pluginId=t,Go(e)},openSetting:na,getSetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{miniprogram_appid:fe.Z.accountInfo.appId,filter_auth_status:1,with_app_auth:!0});cI.call(this,{apiName:"webapi_getwxapluginuserscope",reqData:t,success:function(t){var n=JSON.parse(t.respData.data),r={errMsg:"getSetting:ok"};r.authSetting=(n.auth_item||[]).reduce((function(e,t){return e[t.scope]=1===t.auth_status,e}),{}),n.user_all_app_auth&&(r.miniprogramAuthSetting=$o(n.user_all_app_auth).authSetting||{}),"function"==typeof e.success&&e.success(r),"function"==typeof e.complete&&e.complete(r)},fail:function(t){var n={errMsg:t.errMsg||"getSetting:fail"};"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}})},operateWXData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,An.hI)(this);e.pluginId=t,(0,Nr.KS)(e)},requestFacetoFacePayment:Ji,requestPersonalPay:$i,showModal:OS,showToast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.image){if(0!==e.image.indexOf("/"))return void(0,d.YG)("showToast",e,"parameter 'image' must be begin with '/'");var t=(0,An.hI)(this);e=Object.assign({},e,{image:__virtualDOM__.getPluginRoutePrefix(t)+e.image.substr(1)})}Jn.showToast(e)},hideToast:AS,showLoading:PS,hideLoading:DS,showActionSheet:NS,pageScrollTo:Xa,setPageStyle:rs,setPageOrientation:us,startPullDownRefresh:Qa,stopPullDownRefresh:es,setNavigationBarTitle:RS,showNavigationBarLoading:MS,hideNavigationBarLoading:LS,setNavigationBarColor:BS,setNavigationBarAlpha:FS,setNavigationBarRightButton:jS,onTapNavigationBarRightButton:WS,getShareInfo:US,showShareMenu:VS,hideShareMenu:GS,updateShareMenu:HS,showShareImageMenu:ZS,setBackgroundColor:ds,setBackgroundTextStyle:fs,navigateTo:qS,redirectTo:zS,navigateBack:YS,switchTab:KS,reLaunch:JS,getBackgroundAudioPlayerState:wS,playBackgroundAudio:IS,pauseBackgroundAudio:SS,seekBackgroundAudio:CS,stopBackgroundAudio:TS,onBackgroundAudioPlay:ES,onBackgroundAudioPause:kS,onBackgroundAudioStop:xS,setCookies:function(e){Bw.call(this,xn.Dk,(function(t){var n="setCookies:ok";if(t){var r=(0,xn.zv)(e);r?(n=r,"function"==typeof e.fail&&e.fail({errMsg:n})):"function"==typeof e.success&&e.success({errMsg:n})}else n="setCookies:fail has no permission for setCookies API","function"==typeof e.fail&&e.fail({errMsg:n});"function"==typeof e.complete&&e.complete({errMsg:n})}))},getCookies:function(e){Bw.call(this,xn.KC,(function(t){var n="getCookies:ok";if(t){var r=(0,xn.AJ)(e);"function"==typeof e.success&&e.success({errMsg:n,cookies:r})}else n="getCookies:fail has no permission for getCookies API","function"==typeof e.fail&&e.fail({errMsg:n});"function"==typeof e.complete&&e.complete({errMsg:n})}))},chooseShareGroup:gh,arrayBufferToBase64:__errorTracer__.surroundThirdByTryCatch(p.sM),base64ToArrayBuffer:__errorTracer__.surroundThirdByTryCatch(p.RG),openBusinessView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("openBusinessView",e,{businessType:""})){var t=Object.assign({},e);delete t.sourcetype,delete t.preScene,delete t.preSceneNote,delete t.agentId,delete t.privateExtraData,delete t.scene,delete t.sceneNote,t.privateExtraData={__pluginAppId:(0,An.hI)(this)},(0,d.IN)("openBusinessView",t)}},joinVoIPChat:Ww,exitVoIPChat:Uw,updateVoIPChatMuteConfig:Vw,onVoIPChatMembersChanged:Hw,offVoIPChatMembersChanged:Zw,onVoIPChatSpeakersChanged:qw,offVoIPChatSpeakersChanged:zw,onVoIPChatInterrupted:Jw,offVoIPChatInterrupted:$w,subscribeVoIPVideoMembers:Xw,onVoIPVideoMembersChanged:eI,offVoIPVideoMembersChanged:tI,onVoIPChatStateChanged:rI,offVoIPChatStateChanged:iI,createRewardedVideoAd:function(e){var t=(0,An.hI)(this);return Rw(E()(E()({},e),{},{pluginId:t}))},createInterstitialAd:function(e){var t=(0,An.hI)(this);return function(e){return new ly(e)}(E()(E()({},e),{},{pluginId:t}))},updateWeChatApp:Gg,reportPerformance:function(e,t,n){var r=(0,An.hI)(this),i=(0,An.MX)(this);!function(e,t,n,r){qh(e,t,n,r)}(e,t,n,{pluginId:r,customVersion:i?i.customVersion:""})},getPerformance:function(){return function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pluginId;return Ag.has(e)||Ag.set(e,new Eg(ng,e)),Ag.get(e)}({pluginId:(0,An.hI)(this)})},getLaunchOptionsSync:sr.I,getEnterOptionsSync:Pr.rN,onThemeChange:kr,offThemeChange:Ar,getVideoInfo:uI.$p,compressVideo:uI.Lv,createUDPSocket:bI,createTCPSocket:FI,getRealtimeLogManager:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fh.apply(void 0,[(0,An.hI)(this),(0,An.hb)(this)].concat(t))},authorizeForMiniProgram:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.r3)("authorizeForMiniProgram",e,{scope:""})&&(sI.includes(e.scope)?Ae({args:(0,An.qS)(e,"authorize","authorizeForMiniProgram")}):(0,f.YG)("authorizeForMiniProgram",e,'scope "'.concat(e.scope,'" is not supported to be authorized by plugin.')))},getPublicLibVersion:Zf,startLocalServiceDiscovery:Xl,stopLocalServiceDiscovery:Ql,onLocalServiceFound:ed,offLocalServiceFound:td,onLocalServiceLost:nd,offLocalServiceLost:rd,onLocalServiceDiscoveryStop:id,offLocalServiceDiscoveryStop:od,onLocalServiceResolveFail:ad,offLocalServiceResolveFail:sd,loadFontFace:wf.jN.nH,getBatteryInfo:Ac,getBatteryInfoSync:Pc,getAvailableAudioSources:wf.Qh,onAudioInterruptionBegin:WI.p$,offAudioInterruptionBegin:WI.hA,onAudioInterruptionEnd:WI.aS,offAudioInterruptionEnd:WI.xJ,previewMedia:wf.gG,openVideoEditor:wf.JS,saveFileToDisk:dI,openDocument:If.KK,getMenuButtonBoundingClientRect:hs,version:"undefined"==typeof __libVersionInfo__?{version:"9.9.9"}:JSON.parse(JSON.stringify(__libVersionInfo__)),chooseAddress:Ho,chooseInvoice:ha,chooseInvoiceTitle:ia,publishWeChatState:xa},XS=(VI={},JI.forEach((function(e){e.copyToWx&&(VI[e.name]=function(t){var n=(0,An.hI)(this);!function(e,t){var n=!0===fe.Z.debug,r="devtools"===fe.Z.platform;(n||r)&&console.warn("wx.".concat(e," is deprecated, and will be removed in future.")),"report deprecate private api ".concat(e," (").concat(t,")"),(0,UI.v)("".concat(e," (").concat(t,")"))}(e.name,n),$I(n,e.permissionBytes,(function(r){r?e.factory(n)(t):(0,f.YG)(e.name,t,"no permission")}))})})),VI);Object.keys(XS).forEach((function(e){$S[e]=XS[e]}));var QS=function(e,t){return new Nv($S,e,t)},eC=function(){return"undefined"==typeof BaseConsole?new __appServiceConsole__.BaseConsole:new BaseConsole};fe.Z.onReady((function(){!function(){if(Qg("start to invokeGetPluginList"),fe.Z.appContactInfo&&fe.Z.appContactInfo.call_plugin_info)for(var e=fe.Z.appContactInfo.call_plugin_info,t=0;t<e.length;t++){var n=e[t],r=n.plugin_id;nv[r]=Ln({version:n.inner_version,customVersion:n.plugin_version||""}),uv(r,n.inner_version)}else if(fe.Z.plugins)for(var i in fe.Z.plugins){var o=fe.Z.plugins[i],a=o.provider;nv[a]=Ln({version:0,customVersion:o.version||""}),uv(a,0)}cv(1),Qg("invokeGetPluginList -> ",nv)}(),Nn()||lv(5),pv()}));var tC=Pn.Z.pluginInfos,nC={};fe.Z.onReady((function(){"object"===c()(fe.Z.env)&&(nC.USER_DATA_PATH=fe.Z.env.USER_DATA_PATH)}));const rC=nC;var iC=n(7147),oC=n(1890),aC=1;fe.Z.onReady((function(){try{"number"==typeof fe.Z.wxAppInfo.maxWorkerConcurrent&&(aC=fe.Z.wxAppInfo.maxWorkerConcurrent)}catch(e){}}));var sC=["app-service.js","game.js","subContext.js"],cC=n(9588),uC=function(e,t,n){for(var r in t){if("exportToAppServiceSDK"===r)return;e[r]=t[r]}["onPageReload"].forEach((function(r){t[r]&&(e[r]=function(e){t[r].call(n,e)})}))};function lC(){return fe.Z.subpackages||fe.Z.subPackages||[]}function dC(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=lC(),n=0;n<t.length;n++){var r=t[n];if(0===e.indexOf(r.root))return r}return null}function fC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=dC(e);return!!(t&&t.independent&&t.isolated)}var pC={};(0,d.Ld)("media_banned",(function(e){var t=e.index,n=e.permissionByte;pC[t]=n}));var hC=function(){return pC},gC=n(9706),vC=null,_C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("showAuthorize",e,{apply:""})){var t=fe.Z.accountInfo.nickname,n=fe.Z.accountInfo.icon,r=JSON.stringify({nickname:t,icon:n,apply:e.apply,overlay:e.overlay}),i=(0,gi.vJ)((function(e){[gi.ML.BottomBackButton,gi.ML.NavigationBackInterceptionType,gi.ML.NavigateBackCall].includes(e.type)&&vC&&(vC.handleCancel(),vC=null)}));__sclEngine__.initScl((function(t){(vC=t.mainRoot.append("authorize",{input:r})).addListener("confirm",(function(){(0,gi.J_)(i),(0,d.FE)({name:"showAuthorize",args:e})})),vC.addListener("cancel",(function(){(0,gi.J_)(i),(0,d.YG)("showAuthorize",e,"cancel")}))}))}},mC=null;function yC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(mC)return t&&t(mC);var n=hs(),r=n.right,i=n.bottom,o=fe.Z.screenWidth-r,a=i+36,s=JSON.stringify(e);__sclEngine__.initScl((function(e){(mC=e.mainRoot.append("verify-tip",{top:a,right:o,info:s})).addListener("destroy",(function(){mC=null})),t&&t(mC)}))}function bC(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Reporter.reportKeyValue({key:"Handoff",value:[fe.Z.appType+1e3,fe.Z.appLaunchInfo.scene,e,t,n,r,(0,Dc._getCurrentNetworkType)(),""].join(",")})}var wC=function(e){(0,d.IN)("checkHandoffEnabled",e)},IC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.fromButton;n?(0,wo.J)("handoff")?wC({success:function(e){var n=e.isEnabled,r=e.errCode;n?(bC(2,2,2),_C({apply:"在电脑端微信打开小程序",success:function(){bC(2,2,1),(0,d.IN)("startHandoff",{path:t,actionId:2},{beforeSuccess:function(){return bC(2,1,1)},beforeFail:function(e){return bC(2,1,0,e.errCode)}})},fail:function(){bC(2,2,0)}})):bC(2,1,0,r)}}):console.warn("startHandOff:fail no permission"):(0,d.IN)("startHandoff",{path:t,actionId:1},{beforeSuccess:function(){return bC(1,1,1)},beforeFail:function(e){return bC(1,1,0,e.errCode)}})},SC=function(e,t){(0,d.IN)("getAppConfig",e,t)},CC=function(e){(0,d.jQ)("onAppConfig",e)},TC=function(e){(0,d.jQ)("onPullDownRefresh",e)},EC=function(e){(0,d.jQ)("onShareAppMessage",e)},kC=function(e){(0,d.jQ)("onAddToFavorites",e)},xC=function(e){(0,d.jQ)("onStartHandoff",e)},AC=function(e,t){(0,d.IN)("addToFavorites",e,t)},PC=function(e){(0,d.jQ)("onTabItemTap",e)},DC=function(e,t){(0,d.nY)("analyticsConfig",e,t)},OC=function(e,t){(0,d.IN)("reportRealtimeAction",e,t)},NC=function(e,t){(0,d.IN)("shareAppMessage",e,t)},RC=function(e,t){(0,d.IN)("shareAppMessageDirectly",e,t)},MC=function(e,t){(0,d.IN)("shareAppMessageToSpecificContactDirectly",e,t)},LC=function(e,t){(0,d.IN)("shareAppMessageForFakeNative",e,t)},BC=function(e,t){(0,d.IN)("shareAppMessageToSpecificContactForFakeNativeDirectly",e,t)},FC=function(e,t){(0,d.IN)("checkHandoffEnabled",e,t)},jC=function(e){(0,d.Ld)("analyticsReport",e)},WC=function(e){(0,d.Ld)("recycleStatistics",e)},UC=function(e){(0,d.Ld)("savePageState",e)},VC=function(e){(0,d.Ld)("tapShareButton",e)},GC=function(e){(0,d.Ld)("tapHandoffButton",e)},HC=function(e){(0,d.Ld)("tapShareTimeLineButton",e)},ZC=function(e,t){(0,d.IN)("showUpdatableMessageSubscribeButton",e,t)},qC=function(e){return(0,d.jQ)("onShareTimeline",e)},zC=function(e,t){return(0,d.IN)("shareTimeline",e,t)},YC=function(e){return(0,d.IN)("showShareTimelineMenu",e)},KC=Pr._X,JC=zn,$C=Ir,XC=xr,QC=Qt.T,eT=Mt.J,tT=Un.Xb,nT=Zn,rT=dr,iT=pr,oT=sr.x,aT=Un.yc,sT=function(){Vn.emitGlobal()},cT=Na,uT=lo,lT=uo,dT=so.Z,fT=qa,pT=za,hT=gr.H,gT=Se.q,vT=function(e){Za.call(this,e)},_T=Ya.Z,mT=function(e,t){(0,d.nY)("functionalPage",e,t)},yT=function(e,t){(0,d.nY)("pageScrollTo",e,t)},bT=function(e,t){(0,d.nY)("telecontrol",e,t)},wT=function(e,t){(0,d.nY)("__updateAppData",e,t)},IT=function(e){(0,d.Ld)("checkWebviewAliveOk",e)},ST=function(e,t){(0,d.nY)("checkWebviewAlive",e,t)},CT=function(e){(0,d.Ld)("subjectChangeInfo",e)},TT=function(e){(0,d.gM)({data:{api_name:"webapi_report_data",data:e}})},ET=function(e){(0,d.Ld)("vdCallComponentMethodForWxs",e)},kT=function(){return fe.Z.subPackages||fe.Z.subpackages},xT=function(e){var t=/^rgba?\((.+)\)/.exec(e);if(!t)return e;var n=t[1].split(",").map((function(e,t){return e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e="0".concat(e)),e})).join("");return n="#".concat(n)},AT=function(e){e.type=e.type||"play",(0,d.IN)("operateCallTone",e)},PT=function(e){(0,d.IN)("hasJoinVoIPChat",e)},DT={voip1v1:1},OT={};Object.keys(DT).forEach((function(e){OT[DT[e]]=e}));var NT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(DT[e.msgType]){var t=(0,Kn.Z)("sendChannelMessage","webapi_sendwxachannelmsg",{},{},(function(e){return{msg_type:DT[e.msgType],receiver_openid:e.receiver,msg_content:JSON.stringify(e.data||{})}}),(function(e){delete e.rawData,e.msgId=e.msg_id,delete e.msg_id}));t(e)}else(0,d.YG)("sendChannelMessage",e,"lock of message type")},RT=(0,on.s)("receiveMsgChannel"),MT=RT.onMethod;RT.offMethod;(0,d.jQ)("onReceiveMsgChannel",(function(e){e.msgType=OT[e.msgType],e.data=JSON.parse(e.msgContent),delete e.msgContent,RT.emit(e)}));var LT=["对方版本暂不支持发起视频通话","对方可能不在小程序内，建议稍后再次尝试","对方未接听","已接通","通话已取消","对方拒绝了您的视频通话请求","对方正在通话中，请稍后再播"],BT=["已接通","对方已挂断，通话结束","已拒绝，通话结束"],FT=["当前通话对方网络不佳","当前通话你的网络不佳","连接中断，通话结束","网络异常，通话结束","对方已挂断，通话结束","通话结束","对方已切换到语音通话，请使用听筒接听","已切换到语音通话，请使用听筒接听"],jT=["对方版本暂不支持发起语音通话","对方可能不在小程序内，建议稍后再次尝试","对方未接听","已接通","通话已取消","对方拒绝了您的语音通话请求","对方正在通话中，请稍后再播","对方设备未开启通话选项"],WT=["已接通，请使用听筒接听","对方已挂断，通话结束","已拒绝，通话结束"],UT=["当前通话对方网络不佳","当前通话你的网络不佳","连接中断，通话结束","网络异常，通话结束","对方已挂断，通话结束","通话结束","声音将通过扬声器播放","声音将通过听筒播放"],VT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,W.Kn)(e)&&(e=Object.keys(e));var n={};return e.forEach((function(e){e in t&&void 0!==t[e]&&(n[e]=t[e])})),n},GT=new y.Z({maxListeners:2e5}),HT={onTextViewClick:"click",onImageViewClick:"click",onTextViewDrag:"drag",onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchCancel:"touchcancel"};Object.keys(HT).forEach((function(e){(0,b.n)(e,(function(t){var n=HT[e],r=JSON.parse(t.data).id;GT.emit("".concat(n,"-").concat(r),t)}))}));var ZT,qT,zT,YT,KT=32768,JT=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,e);var n=t.props,r=void 0===n?{}:n,i=t.style,o=void 0===i?{}:i,a=t.position,s=void 0===a?{}:a,c=t.dataset,u=void 0===c?{}:c;this.parent=null,this.parentId=0,this.children={},this.events=[],this.id=++KT,this.props=r,this.style=o,this.position=s,this.dataset=u,this.bubbleHandler()}return P()(e,[{key:"bubbleHandler",value:function(){var e=this;["touchstart","touchmove","touchend","touchcancel","click"].forEach((function(t){e.on(t,(function(n){if(e.props.bubbles&&e.parent&&!e.parent.props.transEvt){var r=e.position.left,i=e.position.top;if("click"===t){if(!e.parent.props.clickable)return;e.parent.emit(t)}else if("touchstart"===t||"touchend"===t){if(!e.parent.props.gesture)return;var o=Object.assign({},n.touch);o.x+=r,o.y+=i,o.id=e.parent.id,e.parent.emit(t,{viewId:e.parent.id,touch:o})}else{if(!e.parent.props.gesture)return;var a=n.touches.map((function(t){return{x:t.x+r,y:t.y+i,id:e.parent.id}}));e.parent.emit(t,{viewId:e.parent.id,touches:a})}}}))}))}},{key:"getAbsolutePositon",value:function(){if(!this.parent)return{left:0,top:0};var e=this.parent.getAbsolutePositon(),t=this.position,n=t.left,r=t.top;return{left:n+e.left,top:r+e.top}}},{key:"hide",value:function(){return this.props.hide=!0,this.update()}},{key:"show",value:function(){return this.props.hide=!1,this.update()}},{key:"insert",value:function(){var e=this,t=this.insertView(),n=[];return Object.keys(this.children).forEach((function(t){var r=e.children[t];n.push(r.insert())})),Promise.all([t].concat(n)).then((function(){e.emit("ready")}),(function(t){e.emit("ready")}))}},{key:"update",value:function(){return this.updateView()}},{key:"remove",value:function(){var e=this;this.parent&&this.parent.removeChild(this);var t=[];Object.keys(this.children).forEach((function(n){var r=e.children[n];e.removeChild(r),t.push(r.remove())})),this.removeListeners();var n=this.removeView();return Promise.all([n].concat(t)).catch((function(e){}))}},{key:"insertView",value:function(){return Promise.resolve()}},{key:"updateView",value:function(){return Promise.resolve()}},{key:"removeView",value:function(){return Promise.resolve()}},{key:"removeListeners",value:function(){var e=this;this.events.forEach((function(t){GT.removeAllListeners("".concat(t,"-").concat(e.id))}))}},{key:"appendChild",value:function(e){e.parent=this,e.parentId=this.id,this.props.independent&&(e.props.independent=!0),this.children[e.id]=e}},{key:"empty",value:function(){var e=this;Object.keys(this.children).forEach((function(t){var n=e.children[t];e.removeChild(n),n.remove()}))}},{key:"removeChild",value:function(e){delete this.children[e.id],e.parent=null,e.parentId=0}},{key:"emit",value:function(e,t){GT.emit("".concat(e,"-").concat(this.id),t)}},{key:"on",value:function(e,t){GT.on("".concat(e,"-").concat(this.id),t)}},{key:"off",value:function(e,t){GT.off("".concat(e,"-").concat(this.id),t)}},{key:"once",value:function(e,t){GT.once("".concat(e,"-").concat(this.id),t)}}]),e}(),$T=(ZT=function(e){I()(n,e);var t=C()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,n);var i=(e=t.call(this,r)).getDefaultProps(),o=e.getDefaultLabel(),a=e.getDefaultStyle();e.events=["click","drag","touchstart","touchmove","touchend","ready"],e.style.backgroundColor&&(e.style.bgColor=e.style.backgroundColor);var s=e.props.label;return e.style=Object.assign(a,VT(a,e.style)),e.props=Object.assign(i,VT(i,e.props)),e.label=Object.assign(o,VT(o,s)),e.label.lineHeight=e.label.lineHeight||1.2*e.label.fontSize,e}return P()(n,[{key:"getDefaultProps",value:function(){return{hide:!1,clickable:!1,gesture:!1,transEvt:!1,sendTo:"appservice",fullscreen:!1,independent:!1,bubbles:!1,draggable:!1,dragConfig:{}}}},{key:"getDefaultLabel",value:function(){return{content:"",color:"#000000",fontSize:12,textAlign:"left",fontWeight:"normal",lineHeight:0,lineBreak:"clip",whiteSpace:"nowrap"}}},{key:"getDefaultStyle",value:function(){return{bgColor:"#ffffff00",borderRadius:0,borderWidth:0,borderColor:"#000000",padding:[0,0,0,0],opacity:1,overflow:"hidden",rotate:0,scaleX:1,scaleY:1,zIndex:0,fixed:!1}}},{key:"insertView",value:function(e){var t={parentId:this.parentId,viewId:this.id,position:this.position,hide:this.props.hide,draggable:this.props.draggable,dragConfig:this.props.dragConfig,clickable:this.props.clickable,gesture:this.props.gesture,transEvt:this.props.transEvt,sendTo:this.props.sendTo,data:JSON.stringify({id:this.id}),label:this.label,fullscreen:this.props.fullscreen,independent:this.props.independent,zIndex:this.style.zIndex,fixed:this.style.fixed,style:this.style,notCoverRect:!0};Object.assign(t,e),(0,d.IN)("insertTextView",t)}},{key:"updateView",value:function(e){var t={viewId:this.id,position:this.position,hide:this.props.hide,label:this.label,independent:this.props.independent,style:this.style,fixed:this.style.fixed,zIndex:this.style.zIndex,notCoverRect:!0,draggable:this.props.draggable,dragConfig:this.props.dragConfig};Object.assign(t,e);(0,d.IN)("updateTextView",t,{beforeFail:function(e){}})}},{key:"removeView",value:function(e){var t=Object.assign({independent:this.props.independent,viewId:this.id},e);(0,d.IN)("removeTextView",t,{beforeFail:function(e){}})}},{key:"animate",value:function(e){var t=this,n={duration:300,easing:"linear",viewId:this.id,finalStyle:{},independent:this.props.independent},r=Object.assign(n,e);(0,d.IN)("animateCoverView",r,{beforeSuccess:function(){Object.keys(r.finalStyle).forEach((function(e){e in t.position?t.position[e]=r.finalStyle[e]:e in t.style&&(t.style[e]=r.finalStyle[e])}))},beforeFail:function(e){wxNativeConsole.error("animateView fail",t.id,r,e)}})}},{key:"measureText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n={text:e,fontSize:this.label.fontSize,fontWeight:this.label.fontWeight,fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t=e.width||0}};return(0,d.IN)("measureText",n),t}},{key:"fadeIn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear";return this.show().then((function(){return e.animate({finalStyle:{opacity:1},duration:t,easing:n})}))}},{key:"fadeOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear";return this.animate({finalStyle:{opacity:0},duration:t,easing:n}).then((function(){return e.hide()}))}},{key:"fadeTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear";return this.animate({finalStyle:{opacity:e},duration:t,easing:n})}},{key:"slideUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear";return this.animate({finalStyle:{height:0},duration:e,easing:t})}},{key:"slideDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n=this.position.height;return this.position.height=0,this.update(),this.animate({finalStyle:{height:n},duration:e,easing:t})}}]),n}(JT),O()(ZT.prototype,"insertView",[M.Qu],Object.getOwnPropertyDescriptor(ZT.prototype,"insertView"),ZT.prototype),O()(ZT.prototype,"updateView",[M.Qu],Object.getOwnPropertyDescriptor(ZT.prototype,"updateView"),ZT.prototype),O()(ZT.prototype,"removeView",[M.Qu],Object.getOwnPropertyDescriptor(ZT.prototype,"removeView"),ZT.prototype),O()(ZT.prototype,"animate",[M.Qu],Object.getOwnPropertyDescriptor(ZT.prototype,"animate"),ZT.prototype),ZT),XT=(qT=function(e){I()(n,e);var t=C()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,n);var i=(e=t.call(this,r)).getDefaultProps(),o=e.getDefaultStyle();return e.events=["click","touchstart","touchmove","touchend","ready"],e.style.backgroundColor&&(e.style.bgColor=e.style.backgroundColor),e.style=Object.assign(o,VT(o,e.style)),e.props=Object.assign(i,VT(i,e.props)),e}return P()(n,[{key:"getDefaultProps",value:function(){return{hide:!1,iconPath:"",clickable:!1,gesture:!1,transEvt:!1,bubbles:!1,sendTo:"appservice",independent:!1}}},{key:"getDefaultStyle",value:function(){return{bgColor:"#ffffff00",borderRadius:0,borderWidth:0,borderColor:"#000000",padding:[0,0,0,0],opacity:1,zIndex:0,fixed:!1}}},{key:"insertView",value:function(e){var t={parentId:this.parentId,viewId:this.id,position:this.position,hide:this.props.hide,iconPath:this.props.iconPath,clickable:this.props.clickable,gesture:this.props.gesture,transEvt:this.props.transEvt,sendTo:this.props.sendTo,independent:this.props.independent,data:JSON.stringify({id:this.id}),style:this.style,zIndex:this.style.zIndex,fixed:this.style.fixed,notCoverRect:!0};Object.assign(t,e),(0,d.IN)("insertImageView",t)}},{key:"updateView",value:function(e){var t={viewId:this.id,position:this.position,iconPath:this.props.iconPath,hide:this.props.hide,style:this.style,zIndex:this.style.zIndex,fixed:this.style.fixed,independent:this.props.independent,notCoverRect:!0};Object.assign(t,e),(0,d.IN)("updateImageView",t)}},{key:"removeView",value:function(e){var t=Object.assign({independent:this.props.independent,viewId:this.id},e);(0,d.IN)("removeImageView",t)}}]),n}(JT),O()(qT.prototype,"insertView",[M.Qu],Object.getOwnPropertyDescriptor(qT.prototype,"insertView"),qT.prototype),O()(qT.prototype,"updateView",[M.Qu],Object.getOwnPropertyDescriptor(qT.prototype,"updateView"),qT.prototype),O()(qT.prototype,"removeView",[M.Qu],Object.getOwnPropertyDescriptor(qT.prototype,"removeView"),qT.prototype),qT),QT=(zT=function(e){I()(n,e);var t=C()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,n);var i=(e=t.call(this,r)).getDefaultProps();return e.events=["ready"],e.props=Object.assign(i,VT(i,e.props)),e}return P()(n,[{key:"getDefaultProps",value:function(){return{independent:!1,mode:"normal",devicePosition:"front",resolution:"medium",hide:!1}}},{key:"insertView",value:function(e){var t={parentId:this.parentId,cameraId:this.id,position:this.position,independent:this.props.independent,mode:this.props.mode,devicePosition:this.props.devicePosition,resolution:this.props.resolution,hide:this.props.hide};Object.assign(t,e),(0,d.IN)("insertCamera",t)}},{key:"updateView",value:function(e){var t={cameraId:this.id,position:this.position,independent:this.props.independent,mode:this.props.mode,devicePosition:this.props.devicePosition,hide:this.props.hide};Object.assign(t,e),(0,d.IN)("updateCamera",t)}},{key:"removeView",value:function(e){var t=Object.assign({cameraId:this.id,independent:this.props.independent},e);(0,d.IN)("removeCamera",t)}}]),n}(JT),O()(zT.prototype,"insertView",[M.Qu],Object.getOwnPropertyDescriptor(zT.prototype,"insertView"),zT.prototype),O()(zT.prototype,"updateView",[M.Qu],Object.getOwnPropertyDescriptor(zT.prototype,"updateView"),zT.prototype),O()(zT.prototype,"removeView",[M.Qu],Object.getOwnPropertyDescriptor(zT.prototype,"removeView"),zT.prototype),zT),eE=(YT=function(e){I()(n,e);var t=C()(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R()(this,n);var i=(e=t.call(this,r)).getDefaultProps();return e.events=["ready"],e.props=Object.assign(i,VT(i,e.props)),e}return P()(n,[{key:"getDefaultProps",value:function(){return{independent:!1,self:!0,configCamera:"front",openid:""}}},{key:"insertView",value:function(e){var t={parentId:this.parentId,viewId:this.id,position:this.position,type:this.props.self?"camera":"video",openId:this.props.openid,config:{camera:this.props.configCamera},independent:this.props.independent};Object.assign(t,e),(0,d.IN)("insertVoIPView",t)}},{key:"updateView",value:function(e){var t={viewId:this.id,position:this.position,type:this.props.self?"camera":"video",openId:this.props.openid,config:{camera:this.props.configCamera},independent:this.props.independent};Object.assign(t,e),(0,d.IN)("updateVoIPView",t)}},{key:"removeView",value:function(e){var t=Object.assign({viewId:this.id,independent:this.props.independent,openId:this.props.openid},e);(0,d.IN)("removeVoIPView",t)}}]),n}(JT),O()(YT.prototype,"insertView",[M.Qu],Object.getOwnPropertyDescriptor(YT.prototype,"insertView"),YT.prototype),O()(YT.prototype,"updateView",[M.Qu],Object.getOwnPropertyDescriptor(YT.prototype,"updateView"),YT.prototype),O()(YT.prototype,"removeView",[M.Qu],Object.getOwnPropertyDescriptor(YT.prototype,"removeView"),YT.prototype),YT),tE=n(9062),nE=n(12),rE={view:$T,image:XT,voip:eE,camera:QT},iE=function(){function e(t,n){R()(this,e),this.elementClassMap={},this.root=null;var r=nE(t).root;this.addStyle(r,n),(0,tE.Z)(r),this.root=this.compose(r)}return P()(e,[{key:"querySelector",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.querySelectorAll(e)[0]||null}},{key:"querySelectorAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e.startsWith("."))return null;var t=this.elementClassMap[e.slice(1)];return t||[]}},{key:"addStyle",value:function(e,t){var n=this,r=e.attributes,i={},o=["id","class","name"];e.tagName=e.name,Object.keys(r).forEach((function(n){var a=r[n];if(""===a||"true"===a?r[n]=!0:"false"===a&&(r[n]=!1),n.startsWith("data-")){o.push(n);var s=n.slice(5);i[s]=r[n]}"class"===n&&(e.class=a&&a.trim().split(/\s+/)||[],e.style=e.class.reduce((function(e,n){var r=t[n]||{};return Object.assign(e,r)}),{}))})),o.forEach((function(e){return delete r[e]})),e.dataset=i,e.children.forEach((function(e){n.addStyle(e,t)}))}},{key:"compose",value:function(e){var t=this,n=e.tagName,r=rE[n],i=e.layout,o=e.attributes,a=e.dataset,s=e.content,c=e.style;if(o.hidden)return null;"view"===n&&(o.label=c,o.label.content=s,o.label.padding=c.labelPadding);var u=new r({position:i,props:o,dataset:a,style:c});return e.class.forEach((function(e){t.elementClassMap[e]||(t.elementClassMap[e]=[]),t.elementClassMap[e].push(u)})),e.children.forEach((function(n){e.attributes.independent&&(n.attributes.independent=!0);var r=t.compose(n);r&&u.appendChild(r)})),u}}]),e}(),oE="https://res.wx.qq.com/op_res/uv-tkcFVNYmjSLo8oYLi6eHVUT_JFSWYhjoYd77-hNkfpHKJrm4qL1nTZBE7JdfM",aE="https://res.wx.qq.com/op_res/eG0naaMvi5-ResXXogaG1JfWqr7axjp_DgJu1Q-Al-_KPOFwDImGlDAd1y8rHxv2",sE="https://res.wx.qq.com/op_res/abRQv44fOA20modJp4dTaplyqzBvee7vYikt8Um1XjPwg4gGibt6kvjqG_ZgN4tl",cE="https://res.wx.qq.com/op_res/Wvt127UTzax9olBJldzRshntgwJBswVtASV7AoLiSSsx85W_g2Umr33qRtOElgvD",uE="https://res.wx.qq.com/op_res/ZjsLKqozyScMcOTIqmL1LHdV6M95Hz9luJu65Tf4jmzrYgBPKFKxKxDGw6GAaki9";var lE=0,dE=1,fE=2,pE=3,hE=4,gE=5,vE=6,_E=7,mE=8,yE=10,bE=11,wE=12,IE="voip1v1",SE=function e(t){R()(this,e);var n=t.roomType,r=void 0===n?"video":n,i=t.roomId,o=void 0===i?"":i,a=t.groupId,s=void 0===a?0:a,c=t.disableSwitchVoice,u=void 0!==c&&c,l=t.command,d=void 0===l?-1:l,f=t.caller,p=void 0===f?{}:f,h=t.listener,g=void 0===h?{}:h,v=t.sender,_=void 0===v?"":v;this.roomType=r,this.roomId=o,this.groupId=s,this.disableSwitchVoice=u,this.command=d,this.caller=p,this.listener=g,this.sender=_};var CE={};fe.Z.onReady((function(){var e=function(){var e=(0,Dr.mw)(),t=e.screenWidth,n=e.screenHeight,r=e.statusBarHeight,i=B.cj?44:46,o=r+i+12,a=n-o,s=t-32,c=s-32-24,u=n-105,l=n-226,d=t-151,f={left:t-87,top:24,width:75,height:162},p={left:0,top:0,width:t,height:a};return{styleTree:{container:{width:t,height:n,zIndex:(fe.Z.menuButtonInfo&&fe.Z.menuButtonInfo.zIndex||1e3)-1},overlay:{position:"absolute",left:0,top:0,width:t,height:n,backgroundColor:"#000000",opacity:0},navigationBar:{marginTop:r,width:t,height:i,color:"#ffffff",lineHeight:i,fontSize:17,textAlign:"center",opacity:0},maxWindow:{position:"absolute",left:0,top:n,width:t,height:a+16,borderRadius:16,backgroundColor:xT("rgba(38,41,48,0.7)")},cameraContainer:{position:"absolute",left:0,top:0,width:t,height:a},camera:{position:"absolute",left:0,top:0,width:t,height:a},voipContainer:{position:"absolute",left:0,top:0,width:t,height:a},mainContainer:{position:"absolute",left:0,top:0,width:t,height:a},videoAreaContainer:{position:"absolute",left:0,top:0,width:t,height:a},voiceAreaContainer:{position:"absolute",left:0,top:0,width:t,height:a},previewWindow:{width:t,height:a},scaleBtn:{position:"absolute",left:0,top:0,width:60,height:60},scaleBtnIcon:{position:"absolute",left:16,top:24,width:24,height:24},videoInfoWindow:{flexDirection:"row",justifyContent:"flex-end",position:"absolute",right:12,top:24,height:48,width:c},videoInfoWindowNicknameCenter:{position:"absolute",textAlign:"center",color:"#ffffff",lineHeight:20,fontSize:14,height:20,width:t,top:24,left:0},voiceInfoWindow:{position:"absolute",top:234,left:0,width:t,height:200,alignItems:"center"},voiceInfoWindowHeadImage:{width:96,height:96,borderRadius:16,marginBottom:8},voiceInfoWindowNickname:{width:t,height:30,color:"#ffffff",lineHeight:30,fontSize:22,textAlign:"center"},voiceInfoWindowTips:{marginTop:4,width:t,height:20,color:xT("rgba(255,255,255,0.9)"),lineHeight:20,fontSize:14,textAlign:"center"},duration:{position:"absolute",bottom:177,width:t,height:16,color:"#ffffff",lineHeight:16,fontSize:14,textAlign:"center"},tips:{position:"absolute",left:t/2-33,bottom:225,width:66,labelPadding:[0,12,0,12],height:28,color:"#ffffff",lineHeight:28,fontSize:14,textAlign:"center",backgroundColor:xT("rgba(0,0,0,0.5)"),borderRadius:6},operationContainer:{position:"absolute",flexDirection:"row",justifyContent:"space-between",bottom:0,width:t,height:149,paddingLeft:38,paddingRight:38},operationItemContainer:{width:84,height:149,alignItems:"center"},listenItemContainer:{height:235},listenArea:{height:235},callItemContainer:{height:235},callArea:{height:235,justifyContent:"center"},switchVoiceText:{marginTop:8},operationItemTop:{width:84,height:57,alignItems:"center"},operationItemBottom:{position:"absolute",bottom:0,left:0,width:84,height:149,alignItems:"center"},callBtnArea:{position:"absolute",bottom:0,left:0,width:t,height:149,alignItems:"center"},operationItemBtn:{borderRadius:32,justifyContent:"center",alignItems:"center",width:64,height:64},operationItemIcon:{width:64,height:64},switchVoiceIcon:{width:32,height:32},operationItemText:{marginTop:16,color:"#ffffffe5",lineHeight:17,fontSize:12,textAlign:"center",width:104,height:17,overflow:"visible"},videoInfoWindowInfo:{width:c-60,height:48},videoInfoWindowTips:{marginTop:4,width:c-60,height:20,color:xT("rgba(255, 255, 255, 0.7)"),lineHeight:20,fontSize:14,textAlign:"right"},videoInfoWindowNickname:{width:c-60,height:24,color:"#ffffff",lineHeight:24,fontSize:17,textAlign:"right"},videoInfoWindowHeadImage:{marginLeft:12,width:48,height:48,borderRadius:8},minPreviewWindowMask:E()({position:"absolute"},f),previewWindowSelfContainer:E()(E()({position:"absolute"},f),{},{zIndex:2}),previewWindowOtherContainer:E()(E()({position:"absolute"},p),{},{zIndex:1}),maskTop:{position:"absolute",left:0,top:0,width:t,height:145},maskBottom:{position:"absolute",left:0,top:a-201,width:t,height:201}},minWindowStyle1:{minWindow:{flexDirection:"row",alignItems:"center",position:"absolute",left:16,top:u,height:72,width:s,backgroundColor:xT("rgba(38,41,48,0.70)"),borderRadius:9.6,borderWidth:1,borderColor:"#ffffff7f"},minWindowLeft:{flexDirection:"row",paddingLeft:16,paddingRight:16,height:48,width:c},minWindowVoipContainer:{paddingRight:16,width:64,height:48,borderRadius:6},minWindowHeadImage:{width:48,height:48,borderRadius:6},minWindowVoip:{position:"absolute",left:0,top:0,width:48,height:48,borderRadius:6},minWindowInfo:{width:c-64,height:48},minWindowNickname:{width:c-64,height:24,color:"#ffffff",lineHeight:24,fontSize:17},minWindowDuration:{marginTop:4,width:c-64,height:20,color:xT("rgba(255, 255, 255, 0.7)"),lineHeight:20,fontSize:14},minWindowRight:{width:32,height:51},minWindowHangupIcon:{width:32,height:32},minWindowHangupText:{marginTop:2,width:32,height:17,color:xT("rgba(255, 255, 255, 0.9)"),lineHeight:17,fontSize:12,textAlign:"center"}},minWindowStyle2:{minWindow:{flexDirection:"row",alignItems:"center",position:"absolute",top:l,left:d,height:64,width:135,backgroundColor:xT("rgba(44,44,44,0.70)"),borderRadius:9.6,borderWidth:1,borderColor:"#ffffff7f"},minWindowVoipContainer:{paddingLeft:12,paddingRight:12,width:64,height:40},minWindowHeadImage:{width:40,height:40,borderRadius:4},minWindowVoip:{position:"absolute",left:12,top:0,width:40,height:40,borderRadius:4},minWindowInfo:{width:59,height:43},minWindowNickname:{width:59,height:24,color:"#ffffff",lineHeight:24,fontSize:17},minWindowDuration:{marginTop:3,width:59,height:16,color:xT("rgba(255, 255, 255, 0.7)"),lineHeight:16,fontSize:14}},maxPreviewWindowPosition:p,minPreviewWindowPosition:f,minPreviewWindowVoipPosition:{left:0,top:0,width:75,height:162},screenWidth:t,minWindowLeft2:d,maxWindowTop:o,maxWindowHeight:a}}();Object.assign(CE,e)}));var TE=globalThis,EE=(0,Ce.Fr)(Xo),kE=(0,Ce.Fr)(xe),xE=(0,Ce.Fr)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("join1v1VoIPChat",e,{roomId:0,sessionKey:"",lifespan:0})){var t="video"===e.roomType?1:2,n=Object.assign({},e,{muteConfig:jw(e.muteConfig),handsFree:!!(0,W.jn)(e.handsFree)&&e.handsFree,roomType:t}),r=(0,An.hI)(this);(0,d.qu)(r)("join1v1VoIPChat",n)}})),AE=(0,Ce.Fr)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Kn.Z)("generateRoomId","webapi_join1v1voiproom",{},{},(function(e){return{use_pluginid:void 0!==e.pluginId,groupid:e.groupId,room_type:"join"===e.type?2:1,target_openid:e.targetOpenid||""}}),(function(e){e.targetSupport=0===e.target_version,delete e.target_version,e.roomId=e.imroomid,delete e.imroomid,e.groupId=e.groupid,delete e.groupid}));e.pluginId=(0,An.hI)(TE),t(e)})),PE=(0,Ce.Fr)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Kn.Z)("getCloudSession","webapi_getcloudimsession",{},{},(function(e){return{use_pluginid:void 0!==e.pluginId}}),(function(e){delete e.rawData,e.sessionKey=e.session_key,delete e.session_key}));e.pluginId=(0,An.hI)(TE),t(e)})),DE={enable:!1,ignoreSelfVersion:!1,minWindowType:1,popupDuration:300,userSessionInfo:{},widget:null,occupied:!1},OE=function(e,t){var n=e.sender,r=DE.userSessionInfo.openid,i=Object.assign({},e,{sender:r,command:t});NT({msgType:IE,receiver:n,data:i,complete:function(e){"[1v1 voip] sendChannelMessage ".concat(t)}})},NE=function(){return!(B.wZ&&fe.Z.clientVersion>=654315520)};MT((function(e){e.data.command;var t=e.msgType,n=e.data,r=DE.widget;t===IE&&(r?n.sender===r.sessionInfo.otherOpenid?r.handleReceiveMessage(n.command):r.sendMessage(mE):n.command===lE&&LE().then((function(){NE()&&!DE.ignoreSelfVersion?OE(n,bE):DE.enable?PT({complete:function(e){DE.occupied=e.join,DE.occupied?OE(n,mE):DE.widget=new RE(E()({role:"listener",minWindowType:DE.minWindowType},n))}}):OE(n,wE)})))})),(0,Dc.onNetworkStatusChange)((function(e){DE.widget&&DE.widget.onNetworkStatusChange(e)})),Jw((function(e){DE.widget&&DE.widget.onVoIPChatInterrupted(e)})),Hw((function(e){DE.widget&&DE.widget.onVoIPChatMembersChanged(e)}));var RE=function(){function e(t){var n=this;R()(this,e),this.node={container:null,overlay:null,navigationBar:null,maxWindow:null,scaleBtn:null,hangupBtns:null,muteBtn:null,handsFreeBtn:null,cancelBtn:null,refuseBtn:null,listenBtn:null,switchVoiceBtns:null,switchCameraBtn:null,cameraContainer:null,voipContainer:null,videoOperationArea:null,voiceOperationArea:null,videoInfoWindow:null,voiceInfoWindow:null,videoInfoWindowNicknameCenter:null,callArea:null,listenArea:null,minPreviewWindowMask:null,previewWindowSelfContainer:null,previewWindowOtherContainer:null,previewWindowSelf:null,previewWindowOther:null,tips:null,camera:null,duration:null,minWindow:null,minWindowLeft:null,minWindowInfo:null,minWindowHangupBtn:null,minWindowDuration:null,minWindowVoipContainer:null,minWindowVoip:null,minWindowHeadImage:null,videoInfoWindowTips:null,voiceInfoWindowTips:null,maskBottom:null,maskTop:null,callSwitchVoiceBtn:null,mainContainer:null};var r={};r.roomType=t.roomType||"video",r.isVoiceRoom="voice"===t.roomType,r.isCaller="caller"===t.role,r.groupId=t.groupId,r.roomId=t.roomId,r.disableSwitchVoice=t.disableSwitchVoice||!1,r.minWindowType=t.minWindowType||1,r.caller=t.caller,r.listener=t.listener,r.lifespan=DE.userSessionInfo.lifespan,r.sessionKey=DE.userSessionInfo.sessionKey,r.createSessionTime=DE.userSessionInfo.createSessionTime,r.handsFree=!1,r.muteConfig={muteMicrophone:!1,muteEarphone:!1},this.statistics={videoStartTime:0,videoEndTime:0,voiceStartTime:0,voiceEndTime:0},this.callback={success:t.success,fail:t.fail,complete:t.complete},r.isCaller?(r.selfOpenid=t.caller.openid,r.otherOpenid=t.listener.openid):(r.otherOpenid=t.caller.openid,r.selfOpenid=t.listener.openid),this.sessionInfo=r,this.isPreviewWindowOtherMax=!0,this.hasOtherReceiveCall=!1,this.showMinWindow=!1,this.onDraging=!1,this.onCalling=!1,this.destoryed=!1,this.hasJoinVoIPChat=!1,this.startChatTime=0;var i=this.compileTemplate(r),o=i.maxWindowTemplate,a=i.minWIndowTemplate,s=new iE(o,CE.styleTree),c=this.isMinWindowTypeMax()?CE.minWindowStyle1:CE.minWindowStyle2,u=new iE(a,c);Object.keys(this.node).forEach((function(e){n.node[e]=s.querySelector(".".concat(e))}));["minWindow","minWindowLeft","minWindowRight","minWindowHangupBtn","minWindowDuration","minWindowInfo","minWindowVoipContainer","minWindowHeadImage","minWindowVoip"].forEach((function(e){n.node[e]=u.querySelector(".".concat(e))})),this.node.hangupBtns=s.querySelectorAll(".hangupBtn"),this.node.switchVoiceBtns=s.querySelectorAll(".switchVoiceBtn"),this.bindEvent(),this.node.container.insert(),this.node.minWindow.insert(),this.startWaitAnimation(),r.isCaller||(this.startVibrateLong(),this.sendMessage(_E)),r.isCaller&&(setTimeout((function(){n.destoryed||n.onCalling||n.showMinWindow||n.showTips(LT[1],2e4)}),2e4),setTimeout((function(){n.destoryed||n.onCalling||(n.sendMessage(dE),n.showTipsThenDestory(LT[2]))}),6e4),this.call())}return P()(e,[{key:"bindEvent",value:function(){var e=this,t=this.node,n=t.container,r=t.overlay,i=t.navigationBar,o=t.scaleBtn,a=t.maxWindow,s=t.minWindow,c=t.minWindowLeft,u=t.minWindowInfo,l=t.minWindowHangupBtn,d=t.cancelBtn,f=t.refuseBtn,p=t.listenBtn,h=t.muteBtn,g=t.handsFreeBtn,v=t.minPreviewWindowMask,_=t.switchCameraBtn,m=t.hangupBtns,y=t.switchVoiceBtns,b=t.minWindowVoipContainer,w=t.mainContainer;n.on("ready",(function(){e.popupMaxWindow(),i.fadeTo(.9,DE.popupDuration),r.fadeTo(.87,DE.popupDuration),e.changeStatusBarColor()})),o&&o.on("click",(function(){e.resetStatusBarColor(),e.showMinWindow=!0;var t=e.sessionInfo.isVoiceRoom;i.hide(),r.hide(),w.hide(),e.popDownMaxWindow().then((function(){n.hide(),!t&&e.onCalling&&(e.hideOtherVoipPreviewWindow(),e.showMinWindowVoipPreviewWindow())})),s.fadeIn()}));var I=function(){var t=e.onCalling?FT[5]:LT[4],n=e.onCalling?fE:dE;e.sendMessage(n),e.showTipsThenDestory(t,0)},S=function(){e.onDraging||(e.showMinWindow=!1,!e.sessionInfo.isVoiceRoom&&e.onCalling&&(e.hideMinWindowVoipPreviewWindow(),e.showOtherVoipPreviewWindow()),s.hide(),n.show(),e.popupMaxWindow().then((function(){r.show(),i.show(),w.show()})),e.changeStatusBarColor())};l&&l.on("click",(function(){I()})),c&&c.on("click",(function(){S()})),u&&u.on("click",(function(){e.isMinWindowTypeMax()||S()})),b&&b.on("click",(function(){var t=e.sessionInfo.isVoiceRoom;e.isMinWindowTypeMax()||(t?I():S())})),s&&s.on("drag",(function(t){var n=s.position.width/2,r=CE.screenWidth/2,i=t.stage,o=t.drag;"dragging"===i&&(e.onDraging=!0),"end"===i&&e.onDraging&&(e.onDraging=!1,s.position.left=16,o.left+n>r&&!e.isMinWindowTypeMax()&&(s.position.left=CE.minWindowLeft2),s.position.top=o.top,s.animate({finalStyle:E()({},s.position),duration:100}),a.position=Object.assign({},s.position),a.update())})),h&&h.on("click",(function(){var t=e.sessionInfo.muteConfig,n=!t.muteMicrophone;t.muteMicrophone=n,Vw({muteConfig:{muteMicrophone:n}});var r=n?"https://res.wx.qq.com/op_res/tqnj65wMmdaQDVBAia5726VAaVtTVOcFF9PgeVrkis1gJWt_C2k7pHYWC_pjaGjR":cE;h.props.iconPath=r,h.update()})),g&&g.on("click",(function(){var t=!e.sessionInfo.handsFree;e.showTips(UT[t?6:7]),e.sessionInfo.handsFree=t,Vw({muteConfig:e.sessionInfo.muteConfig,handsFree:t});var n=t?"https://res.wx.qq.com/op_res/7f8h7wvyZo92NU4yaA3Kwp4yXLkdgj8jsA4GFUO7G6r3rBObYxqqEeDP9pgm1O2k":uE;g.props.iconPath=n,g.update()})),d&&d.on("click",(function(){e.sendMessage(dE),e.showTipsThenDestory(LT[4])})),f&&f.on("click",(function(){e.stopVibrateLong(),e.sendMessage(hE),e.showTipsThenDestory(BT[2])})),m.forEach((function(t){t.on("click",(function(){e.showTipsThenDestory(FT[5])}))})),y.forEach((function(t){t.on("click",(function(){var t=e.sessionInfo.isCaller;e.sessionInfo.roomType="voice",e.sessionInfo.isVoiceRoom=!0,e.onCalling?(e.switchToVoiceCall(),e.sendMessage(pE)):t?(e.switchToVoiceCall(),e.showTips(FT[7]),e.sendMessage(pE)):(e.stopVibrateLong(),e.listenerJoinVoIPChat().then((function(){e.onCalling=!0,e.stopWaitAnimation(),e.pullUpCallingInterface(),e.showTips(FT[7]),e.sendMessage(vE),e.showDuration()})))}))})),p&&p.on("click",(function(){e.stopVibrateLong(),e.listenerJoinVoIPChat().then((function(){var t=e.sessionInfo.isVoiceRoom?WT[0]:BT[0];e.onCalling=!0,e.stopWaitAnimation(),e.showTips(t),e.showDuration(),e.pullUpCallingInterface(),e.sendMessage(gE)}))})),_&&_.on("click",(function(){var t=e.node.previewWindowSelf,n="front"===t.props.configCamera?"back":"front";t.props.configCamera=n,t.update()})),v&&v.on("click",(function(){e.switchVoipPreviewWindow()}))}},{key:"isMinWindowTypeMax",value:function(){return 1===this.sessionInfo.minWindowType}},{key:"call",value:function(){var e=this,t=this.callback;Date.now();AE({type:"create",targetOpenid:this.sessionInfo.otherOpenid}).then((function(n){Date.now();e.sessionInfo.groupId=n.groupId,e.sessionInfo.roomId=n.roomId,xE(E()({},e.sessionInfo)).then((function(n){e.hasJoinVoIPChat=!0,e.playCallTone();Date.now();e.sendMessage(lE);var r="join1v1Chat:ok";t.success&&t.success({errMsg:r,errCode:0}),t.complete&&t.complete({errMsg:r,errCode:0})})).catch((function(n){e.showTipsThenDestory("呼叫失败");var r=n.errMsg.replace("join1v1VoIPChat","join1v1Chat");t.fail&&t.fail({errMsg:r,errCode:n.errCode}),t.complete&&t.complete({errMsg:r,errCode:n.errCode})}))}))}},{key:"listenerJoinVoIPChat",value:function(){var e=this;return AE({type:"join",groupId:this.sessionInfo.groupId}).then((function(t){return e.sessionInfo.groupId=t.groupId,e.sessionInfo.roomId=t.roomId,xE(E()({},e.sessionInfo)).then((function(t){e.hasJoinVoIPChat=!0})).catch((function(t){e.showTipsThenDestory("接听失败"),wxNativeConsole.error(t)}))}))}},{key:"onVoIPChatInterrupted",value:function(){this.showTipsThenDestory(FT[4])}},{key:"onVoIPChatMembersChanged",value:function(e){var t=e.openIdList,n=this.sessionInfo,r=n.selfOpenid,i=n.isCaller,o=this.node.callSwitchVoiceBtn;2===t.length&&i&&(o&&o.hide(),this.showDuration()),this.onCalling&&1===t.length&&t[0]===r&&this.showTipsThenDestory(FT[4])}},{key:"sendMessage",value:function(e){if(!this.destoryed){var t=this.sessionInfo,n=t.otherOpenid,r=t.selfOpenid,i=new SE(E()(E()({},this.sessionInfo),{},{sender:r,command:e}));NT({msgType:IE,receiver:n,data:i,complete:function(t){"[1v1 voip] sendMessage ".concat(e)}})}}},{key:"handleReceiveMessage",value:function(e){var t=this.sessionInfo.isVoiceRoom;switch(e){case gE:this.stopCallTone(),this.onCalling=!0,this.stopWaitAnimation(),this.pullUpCallingInterface(),!t&&this.showMinWindow&&(this.hideOtherVoipPreviewWindow(),this.showMinWindowVoipPreviewWindow()),this.showTips(LT[3]);break;case pE:this.sessionInfo.roomType="voice",this.sessionInfo.isVoiceRoom=!0,this.switchToVoiceCall(),this.showTips(FT[6]);break;case vE:this.stopCallTone(),this.onCalling=!0,this.stopWaitAnimation(),this.sessionInfo.roomType="voice",this.sessionInfo.isVoiceRoom=!0,this.pullUpCallingInterface(),this.showTips(FT[6]);break;case _E:this.hasOtherReceiveCall=!0;break;case dE:this.showTipsThenDestory(BT[1]);break;case hE:var n=t?jT[5]:LT[5];this.showTipsThenDestory(n);break;case fE:break;case yE:this.showTips(FT[0]);break;case mE:this.showTipsThenDestory(LT[6]);break;case bE:this.showTipsThenDestory(jT[0]);break;case wE:this.showTipsThenDestory(jT[7])}}},{key:"onNetworkStatusChange",value:function(e){var t=e.isConnected,n=e.networkType,r=this.sessionInfo.isVoiceRoom;t?("2g"===n||!r&&"3g"===n)&&(this.sendMessage(yE),this.showTips(FT[1])):this.showTipsThenDestory(FT[3])}},{key:"switchToVoiceCall",value:function(){var e=this.node,t=e.videoInfoWindowNicknameCenter,n=e.voipContainer,r=e.cameraContainer,i=e.switchVoiceBtns,o=e.videoInfoWindow,a=e.voiceInfoWindow,s=e.voiceInfoWindowTips,c=e.videoOperationArea,u=e.voiceOperationArea,l=e.minWindowVoipContainer,d=e.minWindowInfo,f=e.minWindowHeadImage,p=e.maskBottom,h=e.maskTop,g=this.sessionInfo.isCaller;p&&p.hide(),h&&h.hide(),this.isMinWindowTypeMax()?(l&&l.remove(),d.position=Object.assign({},d.position,{left:16,top:0}),d.update()):(f.props.iconPath=sE,f.update()),this.onCalling?(g||(this.statistics.videoEndTime=Date.now(),this.statistics.voiceStartTime=Date.now()),n&&n.remove(),this.node.voipContainer=null,t.hide(),s.hide(),a.show(),c.hide(),u.show()):(r&&r.remove(),this.node.cameraContainer=null,o.hide(),a.show(),i.forEach((function(e){return e.hide()})))}},{key:"pullUpCallingInterface",value:function(){if(this.onCalling){var e=this.sessionInfo.isVoiceRoom,t=this.node,n=t.videoInfoWindow,r=t.videoOperationArea,i=t.listenArea,o=t.callArea,a=t.videoInfoWindowNicknameCenter,s=t.voiceInfoWindow,c=t.voiceInfoWindowTips,u=t.voiceOperationArea,l=t.cameraContainer,d=t.minWindowVoipContainer,f=t.minWindowInfo,p=t.minWindowHeadImage,h=t.maskTop,g=t.maskBottom;o&&o.hide(),i&&i.hide(),n&&n.hide(),l&&l.remove(),this.node.cameraContainer=null,e?(g&&g.hide(),h&&h.hide(),s.show(),c.hide(),u.show(),this.isMinWindowTypeMax()?(d&&d.remove(),f.position=Object.assign({},f.position,{left:16,top:0}),f.update()):(p.props.iconPath=sE,p.update())):(this.showVoipPreViewWindow(),s&&s.hide(),a.show(),r.show(),this.showMinWindow&&(this.hideOtherVoipPreviewWindow(),this.showMinWindowVoipPreviewWindow()))}}},{key:"destory",value:function(){this.hideDuration(),this.resetStatusBarColor(),this.stopWaitAnimation(),this.onCalling=!1,this.destoryed=!0,this.hasJoinVoIPChat&&Uw(),this.node.container.remove(),this.node.minWindow.remove(),DE.widget=null}},{key:"showTipsThenDestory",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;this.stopCallTone(),this.stopVibrateLong(),0===n?this.destory():this.showTips(e,n).then((function(){return t.destory()}))}},{key:"showTips",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;if(this.showTipsTimier&&clearTimeout(this.showTipsTimier),this.showMinWindow)return(0,Jn.showToast)({title:e,icon:"none",duration:n}),new Promise((function(e){setTimeout((function(){e()}),n)}));var r=this.node.tips,i=r.measureText(e),o=i+28,a=(CE.screenWidth-o)/2;return r.label.content=e,r.position.left=a,r.position.width=o,r.props.hide=!1,r.update(),new Promise((function(e){t.showTipsTimier=setTimeout((function(){t.destoryed||r.hide(),e()}),n)}))}},{key:"changeStatusBarColor",value:function(){(0,d.IN)("setStatusBarStyle",{color:"white"})}},{key:"resetStatusBarColor",value:function(){var e={backgroundColor:Ba,frontColor:Fa}.frontColor;(0,d.IN)("setStatusBarStyle",{color:"#ffffff"===e?"white":"black"})}},{key:"showVoipPreViewWindow",value:function(){var e=this.sessionInfo,t=e.otherOpenid,n=e.selfOpenid;this.createVoipPreviewWindow({self:!1,openid:t,size:"max"}),this.createVoipPreviewWindow({self:!0,openid:n,size:"min"})}},{key:"showOtherVoipPreviewWindow",value:function(){var e=this.sessionInfo.otherOpenid,t=this.isPreviewWindowOtherMax?"max":"min";this.createVoipPreviewWindow({self:!1,openid:e,size:t})}},{key:"hideOtherVoipPreviewWindow",value:function(){var e=this.node.previewWindowOther;e&&e.remove()}},{key:"showMinWindowVoipPreviewWindow",value:function(){var e=this.sessionInfo.otherOpenid,t=this.node.minWindowVoip,n=this.isMinWindowTypeMax()?48:40,r=this.isMinWindowTypeMax()?48:40,i=new eE({position:{left:0,top:0,width:r,height:n},props:{independent:!0,self:!1,openid:e}});t.appendChild(i),i.insert()}},{key:"hideMinWindowVoipPreviewWindow",value:function(){var e=this.node.minWindowVoip;e&&e.empty()}},{key:"switchVoipPreviewWindow",value:function(){var e=this.node,t=e.previewWindowOther,n=e.previewWindowSelf;if(n&&t){var r=this.isPreviewWindowOtherMax?"max":"min",i=this.isPreviewWindowOtherMax?"min":"max";this.adjustVoipPreviewWindow(n,r),this.adjustVoipPreviewWindow(t,i),this.isPreviewWindowOtherMax=!this.isPreviewWindowOtherMax}}},{key:"adjustVoipPreviewWindow",value:function(e,t){var n="max"===t,r=e.parent,i=n?CE.maxPreviewWindowPosition:CE.minPreviewWindowPosition,o=n?CE.maxPreviewWindowPosition:CE.minPreviewWindowVoipPosition,a=n?1:2;r.position=i,e.position=o,r.style.zIndex=a,r.update(),e.update()}},{key:"createVoipPreviewWindow",value:function(e){var t=e.size,n=e.self,r=e.openid,i=this.node,o=i.previewWindowSelfContainer,a=i.previewWindowOtherContainer,s=n?o:a,c=new eE({position:"max"===t?CE.maxPreviewWindowPosition:CE.minPreviewWindowVoipPosition,props:{independent:!0,self:n,openid:r}});this.node[n?"previewWindowSelf":"previewWindowOther"]=c,s.appendChild(c),c.insert()}},{key:"startWaitAnimation",value:function(){var e=this;this.sessionInfo.isCaller&&(this.waitCount=0,this.waitTimer=setInterval((function(){var t=e.node,n=t.voiceInfoWindowTips,r=t.videoInfoWindowTips,i=new Array(++e.waitCount).fill("."),o="正在等待对方接收邀请".concat(i.join(""));e.waitCount%=3,r&&(r.label.content=o,r.update()),n&&(n.label.content=o,n.update())}),800))}},{key:"stopWaitAnimation",value:function(){clearInterval(this.waitTimer)}},{key:"playCallTone",value:function(){AT({type:"play"})}},{key:"stopCallTone",value:function(){AT({type:"stop"})}},{key:"startVibrateLong",value:function(){this.vibrateLongTimer=setInterval((function(){hu()}),2e3)}},{key:"stopVibrateLong",value:function(){clearInterval(this.vibrateLongTimer)}},{key:"showDuration",value:function(){var e=this,t=this.node,n=t.duration,r=t.minWindowDuration,i=this.sessionInfo,o=i.isVoiceRoom;i.isCaller||(o?this.statistics.voiceStartTime=Date.now():this.statistics.videoStartTime=Date.now()),this.startChatTime||(this.startChatTime=Date.now()),n.show(),this.durationTimer=setInterval((function(){if(!e.destoryed){var t=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%3600-60*n;n<10&&(n="0".concat(n)),r<10&&(r="0".concat(r));var i="".concat(n,":").concat(r);return t>0&&(i="".concat(t,":").concat(i)),i}(Math.ceil((Date.now()-e.startChatTime)/1e3));n.label.content=t,n.update();var i=e.isMinWindowTypeMax()?o?"音频通话中 ".concat(t):"通话中 ".concat(t):t;r.label.content=i,r.update()}}),1e3)}},{key:"hideDuration",value:function(){var e=this.sessionInfo,t=e.isCaller,n=e.isVoiceRoom,r=e.caller,i=e.listener;if(this.onCalling&&!t){n?this.statistics.voiceEndTime=Date.now():this.statistics.videoEndTime=Date.now();var o=this.statistics,a=o.videoEndTime,s=o.videoStartTime,c=o.voiceEndTime,u=o.voiceStartTime,l=Math.ceil((a-s)/1e3),d=Math.ceil((c-u)/1e3);!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Kn.Z)("setVoIPChatRecord","webapi_set1v1voipcallrecord",{},{},(function(e){return{use_pluginid:void 0!==e.pluginId,caller_openid:e.callerOpenid,receiver_openid:e.listenerOpenid,video_time:e.videoTime||0,voice_time:e.voiceTime||0}}),(function(){}));e.pluginId=(0,An.hI)(TE),t(e)}({callerOpenid:r.openid,listenerOpenid:i.openid,videoTime:l,voiceTime:d,complete:function(e){}})}clearInterval(this.durationTimer)}},{key:"popupMaxWindow",value:function(){return this.node.maxWindow.animate({finalStyle:{top:CE.maxWindowTop,left:0,width:CE.screenWidth,height:CE.maxWindowHeight,opacity:1},duration:DE.popupDuration})}},{key:"popDownMaxWindow",value:function(){var e=this.node.minWindow;return this.node.maxWindow.animate({finalStyle:E()(E()({},e.position),{},{opacity:0}),duration:DE.popupDuration})}},{key:"compileTemplate",value:function(){var e=this.sessionInfo,t=e.isCaller?e.listener:e.caller;return function(e){var t='\n    <view class="container" independent="true" clickable="true">\n      <view class="overlay"></view>\n      <view class="navigationBar" clickable="true">'.concat(e.title,'</view>\n\n      <view class="maxWindow"> \n        <view class="cameraContainer" hidden="').concat(e.isVoiceRoom,'">\n          <camera class="camera"></camera>\n        </view>\n        <view class="voipContainer" hidden="').concat(e.isVoiceRoom,'">\n          <view class="previewWindowSelfContainer"></view>\n          <view class="previewWindowOtherContainer"></view>\n        </view>\n\n        <image class="maskBottom" hidden="').concat(e.isVoiceRoom,'" iconPath="').concat("https://res.wx.qq.com/op_res/TnkjDXCOtdoxzei_oGVMdSiYu-0a3TBEgas1qwql8YYMyn8zwsFMDB0W272fSFZk",'"></image>\n        <image class="maskTop" hidden="').concat(e.isVoiceRoom,'" iconPath="').concat("https://res.wx.qq.com/op_res/XWPIP9W-ZHRXSdZMoQH_RzjZ2msJo3gNU7H9HkkV8ect4MGc6KJmXRjwBqr01Mb1",'"></image>\n\n        <view class="mainContainer">\n          <view class="videoInfoWindowNicknameCenter" hide="true" hidden="').concat(e.isVoiceRoom,'">').concat(e.nickname,'</view>\n          <view class="videoInfoWindow" hidden="').concat(e.isVoiceRoom,'">\n            <view class="videoInfoWindowInfo">\n              <view class="videoInfoWindowNickname">').concat(e.nickname,'</view>\n              <view class="videoInfoWindowTips">').concat(e.isCaller?"正在等待对方接收邀请":"邀请你视频通话","</view>\n            </view>\n            ").concat(e.headImage?'<image class="videoInfoWindowHeadImage" iconPath="'.concat(e.headImage,'"></image>'):"",'\n          </view>\n\n          <view class="operationContainer videoOperationArea" hide="true" hidden="').concat(e.isVoiceRoom,'">\n            <view class="operationItemContainer">\n              <view class="operationItemBtn" >\n                <image class="operationItemIcon switchVoiceBtn" iconPath="').concat("https://res.wx.qq.com/op_res/MMZ7ikr1yDWDciblT6cTjGEYi5X7nUBkmxeFiAYY6pTrTZTcVWlcLB8_CsIP---k",'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">切到语音通话</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon hangupBtn" iconPath="').concat(aE,'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">挂断</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon switchCameraBtn" iconPath="').concat("https://res.wx.qq.com/op_res/QTADvaCvE516_xRgOJ7MxnMeM_I-9bk-ngeQrOE4O6SjCk0zj-YeAVwoWDzJEFsA",'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">切换摄像头</view>\n            </view>\n          </view>\n\n          <view class="voiceInfoWindow" hide="').concat(!e.isVoiceRoom,'" hidden="').concat(e.disableSwitchVoice,'">\n            ').concat(e.headImage?'<image class="voiceInfoWindowHeadImage" iconPath="'.concat(e.headImage,'"></image>'):"",'\n            <view class="voiceInfoWindowNickname">').concat(e.nickname,'</view>\n            <view class="voiceInfoWindowTips">').concat(e.isCaller?"正在等待对方接收邀请":"邀请你语音通话",'</view>\n          </view>\n\n          <view class="operationContainer voiceOperationArea" hide="true" hidden="').concat(e.disableSwitchVoice,'">\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon muteBtn" iconPath="').concat(cE,'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">静音</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon hangupBtn" iconPath="').concat(aE,'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">挂断</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn" >\n                <image class="operationItemIcon handsFreeBtn" iconPath="').concat(uE,'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">免提</view>\n            </view>\n          </view>\n\n          <view class="operationContainer callArea" hidden="').concat(!e.isCaller,'">\n            <view class="operationItemContainer callItemContainer">\n              <view class="operationItemTop switchVoiceBtn callSwitchVoiceBtn" hidden="').concat(e.isVoiceRoom||e.disableSwitchVoice,'" clickable="true">\n                <image class="operationItemIcon switchVoiceIcon" iconPath="').concat(oE,'" clickable="true" bubbles="true"></image>\n                <view class="operationItemText switchVoiceText">切到语音通话</view>\n              </view>\n              <view class="operationItemBottom">\n                <view class="operationItemBtn">\n                  <image class="operationItemIcon cancelBtn" iconPath="').concat(aE,'" clickable="true"></image>\n                </view>\n                <view class="operationItemText">取消</view>\n              </view>\n            </view>\n          </view>\n          \n          <view class="operationContainer listenArea" hidden="').concat(e.isCaller,'">\n            <view class="operationItemContainer listenItemContainer">\n              <view class="operationItemTop"></view>\n              <view class="operationItemBottom">\n                <view class="operationItemBtn">\n                  <image class="operationItemIcon refuseBtn" iconPath="').concat(aE,'" clickable="true"></image>\n                </view>\n                <view class="operationItemText">拒绝</view>\n              </view>\n            </view>\n            <view class="operationItemContainer listenItemContainer"></view>\n            <view class="operationItemContainer listenItemContainer">\n              <view class="operationItemTop switchVoiceBtn" hidden="').concat(e.isVoiceRoom||e.disableSwitchVoice,'" clickable="true">\n                <image class="operationItemIcon switchVoiceIcon" iconPath="').concat(oE,'" clickable="true" bubbles="true"></image>\n                <view class="operationItemText switchVoiceText">切到语音通话</view>\n              </view>\n              <view class="operationItemBottom">\n                <view class="operationItemBtn">\n                  <image class="operationItemIcon listenBtn" iconPath="').concat("https://res.wx.qq.com/op_res/VgAFtpPeKJeLoWBJ0QXzjP7ebzWqPqfVnfKclugzcpfp6_PkGC12B-uwBakQhvhP",'" clickable="true"></image>\n                </view>\n                <view class="operationItemText">接听</view>\n              </view>\n            </view>\n          </view>\n          \n          <view class="tips" hide="true">已接通</view>\n          <view class="duration" hide="true">00:01</view>\n          <view class="minPreviewWindowMask" clickable="true"></view>\n\n          <view class="scaleBtn" clickable="true">\n            <image class="scaleBtnIcon" iconPath="').concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAABPFJREFUeAHtnF2IVkUYx/e1NI3AMrpSaI2UMkKwi6AgQRCCLtILwaSL8sIiwUTrRvrQoAgqPyD6EDQvVMyr8FaI9sLwQr0QK7WgJKKLvlZsdXNb335/nFme9+y++75zOrPvHJ0H/jzPzJkz88z/fWbOzJyz29eXJTOQGcgMZAYyA3VloFHG8WazOZ37NoA1YCG4HUwDVUmzooqGqOcHcADsajQaI6H1BhPkyDlKQ0tDG+tx+QHaXx5KUplfXZFTN3L028hn+R4kZSLoJC0sca1cRX8BLrp0amo2Dq0AM5xjp4igR6I6yRC7BLwcjtpYBZXj6OfeWfSl0CrLDDFNyF4GvZGwttFtfe/K5TIE2Xuqetp05WwFhazvXVUXfENXtd5AhTJBHX7MTFAvCOJp0Q8Ogn3gng4+JH351kjefUy9T7q6F0DSE6w/RiO1FbXaWENMezUvj2Fs9Ym66VgEvQER/xoythBFddyeVLoDH+OD4fQ1iW1jGdd3+vshaY7Jq4UZK4LU+XfAVzKczEPv9QmvIe0ZcBl8C/p9fm01nbDy6WQdoeBc8Lu9Afslfw/2NGD3du/6a1Vp6t8NxiS03pgR1MdQ+wWH1hac+gBvH3Z589F3mOv/GDsJMypB6iEkHUF9aHo7E/sQJM1CP2DyZX5XSPc8GZ0g18NX0adNbxdh7wAPmjyZZwvpnidjLRRbOkYUDRMxq8k8AfyRwwvYOi/2opOBcz6Rip6qCNJQ0/DZWOj4/SZ9gTJXTDoJMxpBRMw8cAb8AY6Dz+ix1kE/tul5cvOP/Iw5xLQOesiR8ShamEySm3/kbLQIou4Lk7ExwbWbLoLehIS/wDKgp1U/aPeDaILW9iQ5iTbEmHCv0dvtDn3MQVr/LARa+4gwr2/D1lvPb9DJSTSCij2FgGHytBay66FiseTS7UI+OUd75VAmqAPzmaBMUAcGOlzOEdSBoCl7inXwY9xllgUvkvky0BmRFpFaaXt93j0VyYorSRIEOdqifAQarvuLCzRco8xP5ImwL8FOt+7CrFaSJIguPg48ORP1WFPDfQ5Poe8Cr4PKJdU5SKvsELk3pHBI2VQjqHjS6PukoxK9KBCBgrYuv4ItIIqkSlC7CJoPC4PMN89HYWOCSpMbYky+OpK1Q+b7gt87KKMz7SmR5Aii1xo2doLeTfoTw8YsbL0VmWnyopkpElScf/Qo3wTscYjeq70fjRVTcYoEFeefs8w5V/B5NRg2vq8nip426ShmigTpAM3L3xh6cumtyBnUZtlG9kDSXJOu3EyRIM03GlaKmnV2hYyt1bU+XPdyN4a+GkmnHzhjRWuSKRUanwN+tk5gv9bOCa6l+/FCO6f/Tz5R9Cf3Pwt05u1lK0ToS7bKJZ3QDOgaJA1Q/G1zyy3Yb5l0ZWYtCXK934Y+ZpgYMXZlZqpbjY4dJIpGGVYrKfgemAGi7MdqS5AYhKTfUM/JjiV1HmKxOGmpNxPUQsf4RCZoPCctOWUIsusPu+tuqTjRRDPUrzIEXTaNzDZ2qqb1cSjUyTJPsfM0ssQ1tIJH7WFs/Wlm8K/j6oilFN13Arvjt99EdtVuGYIOUrMnSOuPVV21lEahA6FuBM8hRMx0GjkKloY21uPyA7Qf/x8LsDjTkn45eAWcAjqzsRM3ySREPsk3+Shfg8nhniyZgcxAZiAzkBmoMQP/Af+8lwiMNw+aAAAAAElFTkSuQmCC",'" clickable="true" bubbles="true"></image>\n          </view>\n        </view>\n      </view>\n    </view>\n  '),n='\n    <view class="minWindow" draggable="true" hide="true" independent="true" clickable="true">\n      <view class="minWindowLeft" clickable="true">\n        '.concat(e.isVoiceRoom?"":'<view class="minWindowVoipContainer" transEvt="true">\n            <image class="minWindowHeadImage" iconPath="'.concat(e.headImage,'"></image>\n            <view class="minWindowVoip"></view>\n          </view>'),'\n        <view class="minWindowInfo" transEvt="true">\n          <view class="minWindowNickname">').concat(e.nickname,'</view>\n          <view class="minWindowDuration">等待接听</view>\n        </view> \n      </view>\n      <view class="minWindowRight minWindowHangupBtn" clickable="true">\n        <image class="minWindowHangupIcon" iconPath="').concat(sE,'" clickable="true" bubbles="true"></image>\n        <view class="minWindowHangupText" transEvt="true">挂断</view>\n      </view>\n    </view>\n  ');return 2===e.minWindowType&&(n='\n      <view class="minWindow" draggable="true" hide="true" independent="true" clickable="true">\n        <view class="minWindowVoipContainer" clickable="true">\n          '.concat(e.isVoiceRoom?'<image class="minWindowHeadImage" iconPath="'.concat(sE,'" clickable="true" bubbles="true"></image>'):'<image class="minWindowHeadImage" iconPath="'.concat(e.headImage,'" clickable="true" bubbles="true"></image>\n          <view class="minWindowVoip" transEvt="true"></view>'),'\n        </view>\n        <view class="minWindowInfo" clickable="true">\n          <view class="minWindowNickname" transEvt="true">').concat(e.nickname,'</view>\n          <view class="minWindowDuration" transEvt="true">等待接听</view>\n        </view>\n      </view>\n    ')),{maxWindowTemplate:t,minWIndowTemplate:n}}({title:fe.Z.accountInfo.nickname,nickname:t.nickname,headImage:t.headImage,disableSwitchVoice:e.disableSwitchVoice,isVoiceRoom:e.isVoiceRoom,isCaller:e.isCaller,minWindowType:e.minWindowType})}}]),e}(),ME=["on call","wechat has no camera authorization","wechat has no record authorization","miniprogram has no record authorization","miniprogram has no camera authorization","device not support","not open 1v1 Chat","system error","occupied by other miniprogram"],LE=function(){var e=Math.ceil(Date.now()/1e3),t=DE.userSessionInfo,n=t.lifespan,r=t.createSessionTime;return r&&n&&e<r+n?Promise.resolve():PE().then((function(t){Object.assign(DE.userSessionInfo,{openid:t.openid,lifespan:t.lifespan,sessionKey:t.sessionKey,createSessionTime:e-3600})}),(function(e){}))},BE=!1;fe.Z.onReady((function(){BE=BE||1055===(fe.Z.appLaunchInfo||{}).scene})),(0,Qt.T)((function(e){BE=BE||1055===e.scene}));var FE=__safeway__.apiSign.makeApiSign,jE=(0,Ce.Fr)((0,Nr.Ce)(!1,"getSubjectalterInfo")),WE=function(e){return new Promise((function(t){return setTimeout(t,e)}))},UE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];R()(this,e);var r=286,i=38;this.orientation=t,this.animating=!1;var o=(0,Dr.xI)(),a=o.screenWidth,s=parseInt(32767*Math.random(),10)+32767;this.isFullScreen=n;var c=new Kv.G7({id:s,style:{position:"absolute",left:(a-r)/2,top:this.getTop(),width:r,height:i,backgroundColor:"#000000",opacity:0,zIndex:1000001,borderRadius:5,fixed:!(0,Ce.aI)()}}),u=new Kv.xv({id:s+1,style:{left:0,top:0,width:r,height:i,textAlign:"center",lineHeight:i,fontSize:15,color:"#ffffff"},value:"该".concat((0,Ce.aI)()?"小游戏":"小程序","业务及数据已由新开发者承接")});c.add(u),Kv.uo.add(c),this.banner=c,this.bannerWidth=r}return P()(e,[{key:"show",value:function(){var e=this;this.banner.ready().then((function(){return e.animating=!0,e.banner.animate({top:e.getTop(),opacity:.7,duration:300})})).then((function(){return e.animating=!1,WE(5e3)})).then((function(){return e.animating=!0,e.banner.animate({top:e.getTop()-14,opacity:0,duration:300})})).then((function(){return WE(3e3)})).then((function(){return Kv.uo.remove(e.banner)})).catch((function(){}))}},{key:"getTop",value:function(){var e=(0,Dr.xI)().screenHeight;return this.isFullScreen?"portrait"===this.orientation?e/8:e/6:16}},{key:"setOrientation",value:function(e){if(!this.animating){this.orientation=e;var t=(0,Dr.xI)().screenWidth;this.banner.style.left=(t-this.bannerWidth)/2,this.banner.style.top=this.getTop()}}}]),e}(),VE=function(e,t){return jE({apiName:"getSubjectalterInfo",reqData:{}}).then((function(n){var r=JSON.parse(n.rawData);if(r.need_show){var i=new UE(e,t);return i.show(),i}})).catch((function(){}))},GE=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];R()(this,e),this.orientation=n,this.animating=!1;var o=(0,Dr.xI)(),a=o.screenWidth,s=parseInt(32767*Math.random(),10)+32767;this.isFullScreen=i;var c=a-30,u=38,l=30,d=new Kv.G7({id:s,style:{display:"flex",alignItems:"center",position:"fixed",left:(a-c)/2,top:this.getTop(),width:c,height:u,backgroundColor:"#FA5151",opacity:0,zIndex:1000001,borderRadius:5,fixed:!0}}),f=new Kv.xv({id:s+1,style:{width:c-l,height:u,lineHeight:u,textAlign:"center",fontSize:13,color:"#ffffff"},value:t,bubbleEvent:!1,clickState:!1}),p=new Kv.xv({id:s+2,style:{position:"absolute",left:c-44,top:-2,width:l,height:u,lineHeight:u,fontSize:18,color:"#ffffff"},value:"×",eventType:"touch",bubbleEvent:!0,clickState:!0});f.add(p),d.add(f),Kv.uo.add(d),d.on("touchstart",(function(){r.hide()})),this.banner=d,this.bannerWidth=c}return P()(e,[{key:"show",value:function(){var e=this;this.banner.ready().then((function(){return e.animating=!0,e.banner.animate({top:e.getTop(),opacity:.9,duration:300})})).then((function(){e.animating=!1})).catch((function(){}))}},{key:"hide",value:function(){var e,t,n,r=this;e=+new Date,n=fe.Z.accountInfo&&fe.Z.accountInfo.appId||"noAppId",e&&(0,an.L)("setRiskWarningToGlobalStorage",{riskWarning:e,appId:n},void 0,t),this.banner.ready().then((function(){return r.animating=!0,r.banner.animate({top:r.getTop()-14,opacity:0,duration:300})})).then((function(){return e=3e3,new Promise((function(t){return setTimeout(t,e)}));var e})).then((function(){return Kv.uo.remove(r.banner)})).catch((function(){}))}},{key:"getTop",value:function(){var e=(0,Dr.xI)().screenHeight;return this.isFullScreen?"portrait"===this.orientation?e/8:e/6:16}},{key:"setOrientation",value:function(e){if(!this.animating){this.orientation=e;var t=(0,Dr.xI)().screenWidth;this.banner.style.left=(t-this.bannerWidth)/2,this.banner.style.top=this.getTop()}}}]),e}(),HE=function(e,t){var n,r;n=function(n){var r=(+new Date-(n||0))/1e3/60,i=fe.Z&&fe.Z.appContactInfo&&fe.Z.appContactInfo.operationInfo&&fe.Z.appContactInfo.operationInfo.jsonInfo&&fe.Z.appContactInfo.operationInfo.jsonInfo.warning_info&&fe.Z.appContactInfo.operationInfo.jsonInfo.warning_info.top_banner&&fe.Z.appContactInfo.operationInfo.jsonInfo.warning_info.top_banner.wording||"";if(!(0,Ce.aI)()&&i&&r>30){var o=new GE(i,e,t);return o.show(),o}},r=fe.Z.accountInfo&&fe.Z.accountInfo.appId||"noAppId",(0,an.L)("getRiskWarningFromGlobalStorage",{appId:r},void 0,n)},ZE=wxNativeConsole.createLogger("common reportUserBehavior"),qE=(0,Ce.Fr)(Jn._showModal),zE=!1,YE=null,KE=null,JE=new Ld.Q("Verify",!0);function $E(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&(KE=null),YE&&(YE.destroy(),YE=null)}function XE(e){if(KE){var t=KE.urlInfo,n=t.url,r=t.weapp;r?(0,ne.iy)({appId:r.appid,path:r.path,extraData:r.extraData,success:e}):(0,Vg.n)({url:n,isNativeStyle:!0,success:e}),$E()}}function QE(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Reporter.reportKeyValue({key:"GameAdsSkipCard",value:[(0,Dc._getCurrentNetworkType)(),fe.Z.appLaunchInfo.scene,0,15,e,t,n,"",0,"",r,0,"","",0,"",100*i].join(",")})}fe.Z.onReady((function(){var e,t=(0,Ce.Fr)((0,Nr.Ce)(!1,"reportUserBehavior")),n=fe.Z.appLaunchInfo,r=0,i=null,o=0,a="",s="",c={},u=!1,l=!1,d=!1,f=!1,p=0,h=3e5;try{fe.Z.appContactInfo&&fe.Z.appContactInfo.operationInfo&&fe.Z.appContactInfo.operationInfo.jsonInfo&&fe.Z.appContactInfo.operationInfo.jsonInfo.op_info&&(d=1===Number(fe.Z.appContactInfo.operationInfo.jsonInfo.op_info.adult_only),f=1===Number(fe.Z.appContactInfo.operationInfo.jsonInfo.op_info.grow_protect))}catch(e){ZE.error("get op_info fail",e.message)}var g=(0,Ce.aI)()||f,v=(0,Ce.aI)()||f,_=(0,Ce.aI)()||f||d,m=function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.coldBoot;p=Date.now();var f={onShow:1,heartbeat:2,onHide:3,retryLogin:4};return zE?g().then(v).catch((function(e){ZE.error("report fail",e)})):tk.then(g).then(v).catch((function(e){ZE.error("report fail",e)}));function g(){var i={version:1,callbackData:e,type:f[n],duration:r/1e3,scene_note:s,scene:o,referrerInfo:{appId:a,extraData:c},appServiceType:fe.Z.appType};return(0,Ce.aI)()||(i.isWxaAdultOnly=d),t({apiName:"jsapi_reportuserbehav",reqData:i})}function v(t){var n=JSON.parse(t.rawData),r=n.action,i=n.alertMsg,o=n.heartbeatInterval;switch(e=n.callbackData,o!==h&&o>=1e4&&(h=o,y()),r){case 1:break;case 2:qE({title:"提示",content:i,showCancel:!1});break;case 3:qE({title:"提示",content:i,showCancel:!1}).then(Wn);break;case 4:var a=n.urlInfo,s=a.url,c=a.name;!l&&i&&s&&c&&(l=!0,QE(1504,0,1,1),(0,Jn._showModal)({title:"提示",content:i,confirmText:c,cancelText:"退出游戏",success:function(e){e.confirm?(QE(1504,1,2,1),KE=n,XE((function(){u=!0}))):e.cancel&&(QE(1504,2,2,1),ZE.info("modal cancel"),Wn()),l=!1},fail:function(e){ZE.error("show modal fail=",e),Wn(),l=!1}}));break;case 5:var d=n.urlInfo.name;QE(1505,0,1,1),l||(0,Jn._showModal)({title:"提示",content:i,confirmText:d,cancelText:"继续游戏",success:function(e){var t=e.confirm;KE=n,t&&QE(1505,1,2,1),t||QE(1505,2,2,1),t&&XE((function(){u=!0}))},complete:function(){l=!1}}),l=!0;break;case 6:var f,p;KE=n,n.isSoftAlert&&JE.emit("notify",{alertMsg:n.alertMsg,remainSeconds:n.remainSeconds,doVerify:function(){return XE()}}),YE?null===(f=(p=YE).setData)||void 0===f||f.call(p,n):(YE=!0,setTimeout((function(){return yC(n,(function(e){YE=e,QE(1501,0,1,2),setTimeout((function(){return YE&&QE(1502,0,1,2)}),1e4),YE.addListener("stop",(function(){return $E()})),YE.addListener("click",(function(){var e=YE.data;QE(e.showSeconds?1502:1501,1,2,2,e.remainSeconds),XE((function(){u=!0}))}))}))}),B.cj?2e3:0))}}},y=function(){null!==i&&(clearInterval(i),w())},w=function(){i=setInterval((function(){r=Date.now()-p,g&&m("heartbeat",r)}),h)},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.coldBoot,i=void 0!==n&&n;s=e.scene_note||"",r=0,o=e.scene,e.referrerInfo&&(a=e.referrerInfo.appId,c=e.referrerInfo.extraData),w(),u?(m("retryLogin",r),u=!1):_&&m("onShow",r,{coldBoot:i})},S=function(){r=Date.now()-p,clearInterval(i),i=null,v&&m("onHide",r)};I(n,{coldBoot:!0}),(0,b.n)("onAppEnterForeground",(function(e){I(n=e)})),(0,b.n)("onAppEnterBackground",(function(){S()})),(0,b.n)("onAppRoute",(function(e){ZE.log("onAppRoute",e),"autoReLaunch"===e.openType&&(l=!1,S(),setTimeout((function(){I(n)}),1e3))}))}));var ek=function(){},tk=new Promise((function(e){ek=e}));fe.Z.onReady((function(){var e="",t=setInterval((function(){e&&(e&&clearInterval(t),n(e))}),1e3),n=function e(t){var n=Object.keys(fe.Z.page).find((function(e){return e.startsWith(t)})),r=fe.Z.page[n];if(n&&r&&r.window){var i=r.window.pageOrientation,o=!1;try{var a=r.window.navigationStyle||fe.Z.global.window.navigationStyle;o="custom"===a}catch(e){}if("landscape"===i){var s=!1;mr((function(){s||(VE(i,o),HE(i,o),s=!0)}))}else{var c=VE("portrait",o),u=HE(i,o);"auto"===i&&(0,vr.KN)((function(e){var t=e.windowWidth>e.windowHeight?"landscape":"portrait";c.then((function(e){e&&e.setOrientation&&e.setOrientation(t)})),u&&u.then((function(e){e&&e.setOrientation&&e.setOrientation(t)}))}))}(0,Se.n)(e)}};(0,Se.q)((function(t){e=t.path})),zE=!0,ek()}));var nk=n(1983),rk=!1,ik=!1,ok=!1,ak=function(){if(!rk)return rk=!0,{invokeMethod:d.IN,onMethod:d.jQ,subscribe:d.Ld,publish:d.nY,beforeInvokeFail:d.YG,beforeInvokeCallback:d.FE}};function sk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openWCPayLQTDetail",e)}function ck(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openWCPayLQTSave",e)}function uk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openWCPayLQTDepositPlan",e)}function lk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openWCPayLQTDepositPlanAdd",e)}fe.Z.onReady((function(){ok=fe.Z.exportBaseMethods}));const dk=["canvasGetImageData","canvasPutImageData","canvasToTempFilePath","setEnableDebug","startAccelerometer","stopAccelerometer","getBatteryInfo","getClipboardData","setClipboardData","startCompass","stopCompass","addPhoneContact","startGyroscope","stopGyroscope","startBeaconDiscovery","stopBeaconDiscovery","getBeacons","startLocalServiceDiscovery","stopLocalServiceDiscovery","startDeviceMotionListening","stopDeviceMotionListening","getNetworkType","makePhoneCall","scanCode","scanItem","getSystemInfo","vibrateShort","vibrateLong","getExtConfig","chooseLocation","choosePoi","getLocation","startLocationUpdateBackground","startLocationUpdate","stopLocationUpdate","openLocation","chooseMessageFile","loadFontFace","chooseImage","previewImage","getImageInfo","saveImageToPhotosAlbum","compressImage","chooseVideo","saveVideoToPhotosAlbum","checkSession","chooseAddress","authorize","addCard","openCard","chooseInvoice","chooseInvoiceTitle","requestFacetoFacePayment","requestPayment","requestPersonalPay","requestSubscribeMessage","requestOrderPayment","getBackgroundFetchData","setBackgroundFetchToken","getBackgroundFetchToken","getSelectedTextRange","hideKeyboard","showModal","showToast","hideToast","showLoading","hideLoading","showActionSheet","pageScrollTo","startPullDownRefresh","stopPullDownRefresh","setBackgroundColor","setBackgroundTextStyle","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","showTabBar","hideTabBar","setTabBarStyle","setTabBarItem","setTopBarText","saveFile","openDocument","getSavedFileList","getSavedFileInfo","removeSavedFile","getFileInfo","getStorage","setStorage","removeStorage","clearStorage","getStorageInfo","closeBLEConnection","closeBluetoothAdapter","createBLEConnection","getBLEDeviceCharacteristics","getBLEDeviceServices","getBluetoothAdapterState","getBluetoothDevices","getConnectedBluetoothDevices","notifyBLECharacteristicValueChange","openBluetoothAdapter","readBLECharacteristicValue","startBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","writeBLECharacteristicValue","getHCEState","sendHCEMessage","startHCE","stopHCE","getScreenBrightness","setKeepScreenOn","setScreenBrightness","connectWifi","getConnectedWifi","getWifiList","setWifiList","startWifi","stopWifi","getBackgroundAudioPlayerState","playBackgroundAudio","pauseBackgroundAudio","seekBackgroundAudio","stopBackgroundAudio","getAvailableAudioSources","startRecord","stopRecord","setInnerAudioOption","playVoice","pauseVoice","stopVoice","closeSocket","sendSocketMessage","hideShareMenu","showShareMenu","updateShareMenu","getSetting","openSetting","checkIsSoterEnrolledInDevice","checkIsSupportSoterAuthentication","startSoterAuthentication","navigateBackMiniProgram","navigateToMiniProgram","setNavigationBarTitle","showNavigationBarLoading","hideNavigationBarLoading","hideHomeButton","setNavigationBarColor","redirectTo","reLaunch","navigateTo","switchTab","navigateBack","checkIsUserAdvisedToRest","getUserGameLabel","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getUserCloudStorage","getUserInteractiveStorage","modifyFriendInteractiveStorage","removeUserCloudStorage","setUserCloudStorage","exitVoIPChat","joinVoIPChat","updateVoIPChatMuteConfig","showKeyboard","updateKeyboard","openCustomerServiceConversation","setMenuStyle","setStatusBarStyle","exitMiniProgram","requestMidasPayment","showRedPackage","chooseMedia","requestSubscribeSystemMessage","getGroupInfo","getBLEDeviceRSSI","createBLEPeripheralServer","subscribeVoIPVideoMembers","previewMedia","makeBluetoothPair","setBLEMTU","getVideoInfo","compressVideo","checkIsOpenAccessibility","requestFacetoFacePayment","updateWeChatApp","join1v1Chat","setEnable1v1Chat","shareToWeRun","addPhoneCalendar","addPhoneRepeatCalendar","getRandomValues","showShareImageMenu","shareFileMessage","shareVideoMessage","addFileToFavorites","addVideoToFavorites","getUserProfile","searchContacts","publishWeChatState"];n(7783);var fk=[{name:"quicklyAddBrandContact",permissionByte:"quicklyAddBrandContact"},{name:"privateScanItem",permissionByte:"privateScanItem"},{name:"privateSearchContacts",permissionByte:"privateSearchContacts"},{name:"setNavigateBackInterception",permissionByte:"private_setNavigateBackInterception"},{name:"stopNavigateBackInterception",permissionByte:"private_stopNavigateBackInterception"}],pk=function(e){var t=!0===fe.Z.debug,n="devtools"===fe.Z.platform;(t||n)&&console.warn("wx.".concat(e," is deprecated, and will be removed in future.")),(0,UI.v)("wx.".concat(e))};var hk,gk,vk=Ut.Z.createBufferURL||function(){return""},_k=Ut.Z.revokeBufferURL||function(){return!1},mk=Ut.Z.createSignal||function(){return null},yk=!1,bk={},wk=JSON.parse,Ik="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",Sk="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function Ck(){if("string"==typeof fe.Z.opConfig){var e;try{e=wk(fe.Z.opConfig)}catch(e){}return e&&e.expt_info}return fe.Z.opConfig&&fe.Z.opConfig.expt_info}function Tk(){var e,t=Ck();return t&&yk?(e=1,hk=t,Reporter.reportIDKey({key:"useLaunchExptInfo"})):t?(e=2,hk=t,Reporter.reportIDKey({key:"useLaunchExptInfo"}),Reporter.reportIDKey({key:"useOriginLaunchExptInfo"})):(e=0,Reporter.reportIDKey({key:"useContactExptInfo"})),{exptInfo:hk,jsDataType:e}}function Ek(){if(void 0===__appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}"string"==typeof Ik&&(Ik=Ik.replace(" ","")),"string"==typeof Sk&&(Sk=Sk.replace(" ","-")),(0,b.n)("onAppEnterForeground",(function(e){Object.assign(bk,e),gk=bk.sessionId})),Ts((function(e){Ck()&&(yk=!0)})),fe.Z.onReady((function(){Object.assign(bk,fe.Z.appLaunchInfo);var e=Ck();e?hk=e:fe.Z.appContactInfo&&fe.Z.appContactInfo.passThroughInfo&&(hk=fe.Z.appContactInfo.passThroughInfo.expt_info)}));var kk=(0,Kn.Z)("getExptInfo","webapi_wxaexpt_hit",{},{},(function(e){return{param_name_list:e.keyList}}),(function(e){return e.list={},Array.isArray(e.hit_list)&&e.hit_list.forEach((function(t){e.list[t.param_name]=t.param_value})),delete e.base_resp,delete e.hit_list,delete e.rawData,e}));function xk(e,t){var n=2,r=fe.Z||{},i=r.accountInfo,o=r.envVersion,a=i?i.appId:"";"release"===o?n=1:"trial"===o&&(n=3);var s=(0,Dr.mw)();bk.sessionId||(bk.sessionId=bk.sessionid),bk.usedState||(bk.usedState=bk.usedstate),Np(1005,JSON.stringify({appid:a,app_state:n,appversion:ar().miniProgram.version,enter_scene:bk.scene,scene_note:bk.scene_note||bk.sceneNote,prescene:bk.prescene,prescene_note:bk.prescene_note||bk.presceneNote,sessionid:bk.sessionId,add_state:bk.usedState,page_path:Ek()||bk.path,page_query:JSON.stringify(bk.query||{}),referpagepath:bk.referpagepath,isentrance:gk||gk===bk.sessionId?0:1,event_time:Date.now(),sdk_version:Zv.c,devicemodel:s.model,devicebrand:s.brand,os_name:s.platform,os_version:s.system,language_version:s.language,networktype:(0,Dc._getCurrentNetworkType)(),event_name:e,event_value:JSON.stringify(t),unique_id:String(Date.now()+Math.random()),screen_width:fe.Z.screenWidth,screen_height:fe.Z.screenHeight,open_source:fe.Z.host&&fe.Z.host.appId?2:1,host_appid:fe.Z.host?fe.Z.host.appId:""}),"immediate")}var Ak=n(5987);function Pk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;__sclEngine__.initScl((function(n){var r=n.mainRoot.append("toast",e);"function"==typeof t&&t(r)}))}var Dk="https://mp.weixin.qq.com/intp/jump";var Ok=n(1886),Nk=n.n(Ok);function Rk(e){for(var t="",n=0;n<e.length;){var r=e[n],i=0;r>>>7==0?(t+=String.fromCharCode(e[n]),n+=1):252==(252&r)?(i=(3&e[n])<<30,i|=(63&e[n+1])<<24,i|=(63&e[n+2])<<18,i|=(63&e[n+3])<<12,i|=(63&e[n+4])<<6,i|=63&e[n+5],t+=String.fromCharCode(i),n+=6):248==(248&r)?(i=(7&e[n])<<24,i|=(63&e[n+1])<<18,i|=(63&e[n+2])<<12,i|=(63&e[n+3])<<6,i|=63&e[n+4],t+=String.fromCharCode(i),n+=5):240==(240&r)?(i=(15&e[n])<<18,i|=(63&e[n+1])<<12,i|=(63&e[n+2])<<6,i|=63&e[n+3],t+=String.fromCharCode(i),n+=4):224==(224&r)?(i=(31&e[n])<<12,i|=(63&e[n+1])<<6,i|=63&e[n+2],t+=String.fromCharCode(i),n+=3):192==(192&r)?(i=(63&e[n])<<6,i|=63&e[n+1],t+=String.fromCharCode(i),n+=2):(t+=String.fromCharCode(e[n]),n+=1)}return t}function Mk(e){for(var t,n=[],r=e.length,i=0;i<r;i++)(t=e.charCodeAt(i))>=65536&&t<=1114111?(n.push(t>>18&7|240),n.push(t>>12&63|128),n.push(t>>6&63|128),n.push(63&t|128)):t>=2048&&t<=65535?(n.push(t>>12&15|224),n.push(t>>6&63|128),n.push(63&t|128)):t>=128&&t<=2047?(n.push(t>>6&31|192),n.push(63&t|128)):n.push(255&t);for(var o=new Int8Array(n.length),a=0;a<n.length;a++)o[a]=n[a];return o.buffer}var Lk="STOP_CPU_PROFILE",Bk="TAKE_HEAP_SNAPSHOT",Fk="PERFDOG_METHOD",jk="PERFDOG_METHOD_CALLBACK",Wk="LAN_DEBUG_GET_DEVICE_INFO",Uk="LAN_DEBUG_PLUGIN_GET_DEVICE_INFO",Vk="OPEN",Gk="CLOSED",Hk="ERROR",Zk="CONNECTING",qk="LAN_DEBUG_STATUS_CHANGE",zk=null,Yk=!1,Kk=function(){return!0===Yk||("function"!=typeof getProfiler?(void 0!==Ut.Z.Profiler&&(zk=Ut.Z.Profiler,Yk=!0),!0):((zk=getProfiler())&&(Yk=!0),!0))},Jk=!1,$k=!1;function Xk(e,t){var n=(0,Dr.Oo)(),r=n.model,i=n.version,o=n.system,a=n.SDKVersion,s=fe.Z.accountInfo,c=fe.Z.isDevEdition,u={model:r,wechatVersion:i,system:o,SDKVersion:a,appId:s.appId,nickname:s.nickname,isDevEdition:!!c};t(e,JSON.stringify(u))}function Qk(e,t,r){$k||($k=!0,function(e){var t=n.g.LanDebug;t&&(Ce.aI||delete n.g.LanDebug,t.registerCallback?t.registerCallback(Fk,(function(t,n){e(jk,n)})):t.registerCallback)}(t),e(Wk,(function(){Xk(Wk,t)})),e(Uk,(function(){Xk(Uk,t)})),e(Fk,(function(e){var n="undefined"!=typeof getPerfDog?getPerfDog():void 0,r="PerfDog not found";n&&n.handle&&(r=n.handle(Fk,e)),t(jk,r)})),e("START_CPU_PROFILE",(function(){Kk(),zk&&(Jk||(Jk=!0,zk.startCpuProfiling()))})),e(Lk,(function(){var e=function(){if(Kk(),!zk)return null;if(Jk){return Jk=!1,zk.stopCpuProfiling()}return null}();B.wZ&&e&&(e.constructor.toString().includes("ArrayBuffer")?e=Rk(new Uint8Array(e)):"object"===c()(e)&&(e=JSON.stringify(e))),t(Lk,e||"")})),e(Bk,(function(){setTimeout((function(){var e=(Kk(),zk?zk.takeHeapSnapshot():null);if(t("".concat(Bk,":PROGRESS"),JSON.stringify({data:"start"})),!e)return t(Bk,""),t("".concat(Bk,":PROGRESS"),JSON.stringify({data:"error"})),!1;if(e.on){var n=r(Bk),i=!1;e.on("data",(function(e){i||(t("".concat(Bk,":PROGRESS"),JSON.stringify({data:"data"})),i=!0),n.send(e.slice())})),e.on("end",(function(){t("".concat(Bk,":PROGRESS"),JSON.stringify({data:"end"})),n.end(new ArrayBuffer(0))})),e.on("error",(function(e){t("".concat(Bk,":PROGRESS"),JSON.stringify({data:"error"})),n.end(new ArrayBuffer(0))})),e.flush()}return!0}),100)})))}var ex=0,tx=hf(),nx=null,rx=function(){return nx||(nx=Nk()("\n  message LanDebugHeader {\n    required int32 version = 0;         // 版本，用于升级时兼容用\n    required string method = 1;         // 命令字，代表该包行为\n    required int32 id = 2;              // 命令序号，client端每次给server发命令可以弄一个自增序号，这样方便server处理isEnd。\n    required bool isString = 3;         // 若开发者传输的原始数据是string，需要标识，用于服务端处理\n    required string clientId = 4;       // 客户端会唯一生成一个ID\n    optional bool notEnd = 5;           // 若isEnd为true，代表这次命令已经发送完毕\n    optional string options = 6;        // 预留字段，后续可能会有一些用\n  }\n"))},ix=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;(e>=13||e<0)&&(e=13);for(var t="".concat(Date.now()).slice(-e).split(""),n="abcdefghij",r=0;r<Math.floor(e/2);r++){var i=Math.floor(10*Math.random());t[r]=n[i]}return t.join("")}(),ox=new y.Z,ax=null,sx=Gk,cx="",ux=-1,lx=!1,dx=null,fx=null,px=[],hx=[],gx=[];function vx(e){var t;try{if("object"!==c()(e))return Promise.resolve(!1);if("string"!=typeof e.ip||"string"!=typeof e.token)return Promise.resolve(!1);t=e}catch(e){return Promise.resolve(!1)}if(sx===Vk&&fx)return Promise.resolve(fx);if(sx===Zk)return ax;var n=t,r=n.ip,i=n.port,o=n.token,a=n.useStaticServer,s=void 0!==a&&a,u=n.mode;lx=s,cx=r,ux=i,sx=Zk;var l="mpHelper"===u?"MPHELPER":"LANDEBUG",d=(0,Dr.Oo)();return Qk(Ix,yx,bx),ax=new Promise((function(e){(fx=tx.connectSocket({url:"ws://".concat(r,":").concat(i),protocols:["".concat(encodeURI("".concat(l,"#").concat(d.system,"_v").concat(d.version,"_").concat(ix)),"||").concat(o)]})).onOpen((function(){fx.send({data:"ping",success:function(){px.forEach((function(e){Sx(e)}))},fail:function(e){}}),sx=Vk,ox.emit(qk,sx),e(fx)})),fx.onMessage((function(e){if(e.data&&"pong"===e.data)return wxConsole.info("[LAN DEBUG] hand shake success");if(!(e.data.length<4||"string"==typeof e.data)){var t,n=new Uint8Array(e.data),r=n.slice(0,4),i=new Uint32Array(r)[0],o=n.slice(4,4+i);try{t=rx().LanDebugHeader.decode(o)}catch(e){return e.message,void e.stack}var a,s=t,c=s.isString,u=s.method;if(c)a=Rk(n.slice(4+i));else a=n.slice(4+i).buffer;ox.emit(u,a)}})),fx.onClose((function(){_x(Gk),gx.forEach((function(e){Tx(e)}))})),fx.onError((function(e){_x(Hk),dx=e,hx.forEach((function(e){Cx(e)}))}))}))}function _x(e){sx=e,ox.emit(qk,sx),cx="",ux=-1,lx=!1,fx=null}function mx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;if(void 0===n||"string"!=typeof n&&!n.constructor.toString().includes("ArrayBuffer"))return!1;var i=!1;return ax?("string"==typeof n&&(i=!0,n=Mk(n)),ax.then((function(o){return new Promise((function(a){if(!o)return a({errMsg:"sendSocketMessage:fail no client"});var s=rx().LanDebugHeader.encode(Object.assign({version:2,method:t,id:e,isString:i,clientId:ix,options:JSON.stringify({isDevEdition:fe.Z.isDevEdition})},r?{notEnd:!0}:{})),c=new Uint32Array([s.length]);o.send({data:new Uint8Array([].concat(x()(new Uint8Array(c.buffer)),x()(new Uint8Array(s.buffer)),x()(new Uint8Array(n)))).buffer,success:function(e){a(e)},fail:function(e){a(e)}})}))}))):Promise.resolve({errMsg:"sendSocketMessage:failed"})}var yx=function(e,t){return mx(ex++,e,t)},bx=function(e){var t=ex++;return{send:function(n){return mx(t,e,n,!0)},end:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ArrayBuffer(0);return mx(t,e,n)}}},Ix=function(e,t){ox.on(e,t)},Sx=function(e){try{e()}catch(e){"[LAN DEBUG] onReady callback error: ".concat(e.message," \n ").concat(e.stack)}},Cx=function(e){try{e(dx)}catch(e){"[LAN DEBUG] onError callback error: ".concat(e.message," \n ").concat(e.stack)}},Tx=function(e){try{e(dx)}catch(e){"[LAN DEBUG] onClose callback error: ".concat(e.message," \n ").concat(e.stack)}},Ex={sendPackage:yx,sendStream:bx,onMessage:Ix,offMessage:function(e,t){ox.off(e,t)},onReady:function(e){"function"==typeof e&&(sx===Vk?Sx(e):px.push(e))},onError:function(e){"function"==typeof e&&(sx===Hk?Cx(e):hx.push(e))},onClose:function(e){"function"==typeof e&&(sx===Hk?Tx(e):gx.push(e))},get status(){return sx},get ip(){return cx},get port(){return ux},get useStaticServer(){return lx}};Object.defineProperty(Ex,"_start",{get:function(){return function(){return vx.apply(void 0,arguments)}}});fe.Z.onReady((function(){(0,Ce.aI)()||(0,Un.Xb)((function(){!function(e){setTimeout((function(){var t=(e.debugLaunchInfo||{}).lanDebugInfo||{},n=t.ip,r=t.port,i=t.token,o=t.useStaticServer,a=t.useLanDebug;if((e.isDevEdition||a)&&(e.debugLaunchInfo,e.isDevEdition,n&&r&&i))return vx({ip:n,port:r,token:i,useStaticServer:o})}),500)}(fe.Z)}))}));var kx=(0,Ce.Fr)((0,Nr.Ce)(!1,"getLatestUserKey")),xx="getLatestUserKey",Ax={},Px=null;var Dx={getLatestUserKey:function(e){(Ax.expireTime&&Ax.expireTime<Date.now()?Promise.resolve(Ax):Px||(Px=kx({apiName:"webapi_getuserencryptkey",reqData:{}}).then((function(e){var t=e=JSON.parse(e.rawData),n=t.encrypt_key,r=t.version,i=t.expire_in,o=t.iv;return Ax={encryptKey:n,version:r,expireTime:Date.now()+1e3*i,iv:o},Px=null,Ax})).catch((function(e){throw Px=null,e})))).then((function(t){return(0,f.FE)({name:xx,args:e,res:t}),null})).catch((function(t){(0,f.YG)(xx,e,t.message)}))},getRandomValues:XI},Ox=n(347),Nx=n.n(Ox),Rx=function(){return Math.floor(Date.now()/1e3)},Mx=function(){var e="0123456789abcdef",t=function(t){for(var n="";t--;)n+=e[Math.floor(Math.random()*e.length)];return n};return"".concat(t(8),"-").concat(t(4),"-4").concat(t(3),"-8").concat(t(3),"-").concat(t(8))},Lx=function(e,t){var n=t.map((function(t){return"".concat(t,"=").concat(e[t])})).join("&");return Nx()(n).toUpperCase()},Bx=Df.app,Fx="_private_@@financial_applet_events@@",jx="https://zlpoc.fdep.cn",Wx="/api/v1/mop/runtime/external/check/app-packages",Ux="applet_start",Vx={applet_start:"小程序启动",data_disclosure:"数据泄露",applet_crash:"小程序崩溃",sandbox_crash:"安全沙箱崩溃",operation_exception:"运维异常",access_exception:"无法访问业务内容",start_fail:"启动失败"},Gx=new Promise((function(e){return fe.Z.onReady(e)})),Hx=function(){var e=ye()(we().mark((function e(){var t,n,r;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gx;case 2:if(r=null===fe.Z||void 0===fe.Z||null===(t=fe.Z.appContactInfo)||void 0===t||null===(n=t.passThroughInfo)||void 0===n?void 0:n.finance_app_info){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",{appId:r.finance_appid,sdkFingerprint:r.finance_sdk_fingerprint,sdkKey:r.finance_sdk_key,sdkSecret:r.finance_sdk_secret,sdkBundleId:r.finance_sdk_bundleid,sdkVersion:r.finance_sdk_version,appPkgList:r.finance_app_pkg_list,appSequence:r.finance_app_seq,appVersion:r.finance_app_version,organId:r.finance_organ_id,encryptionType:r.finance_encryption_type,isGray:r.is_gray,shouldCheck:r.should_check});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Zx=function(){var e=ye()(we().mark((function e(t){var n,r,i,o,a,s,c,u,l,d,f,p,h,g,v,_,m,y;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u="wechat",l="sha256",d=Math.floor(Date.now()/1e3),f=Mx(),p=t.appPkgList.filter((function(e){return 16===e.pkg_type}))[0].pkg_sha256,h={source:u,identityType:l,apps:[{appId:t.appId,identity:p}],timestamp:d,uuid:f,sign:Lx({timestamp:d,uuid:f,source:u,identityType:l,secret:t.sdkSecret},["identityType","source","timestamp","uuid","secret"])},g={"mop-sdk-key":t.sdkKey,"mop-encryption-type":t.encryptionType,"mop-sdk-fingerprint":t.sdkFingerprint},"".concat(jx).concat(Wx),e.next=10,new Promise((function(e,t){(0,Ad.a)({method:"POST",url:"".concat(jx).concat(Wx),header:g,data:h,success:e,fail:t})}));case 10:if(v=e.sent,wxNativeConsole.info("[mop verify response] errcode=".concat(null==v||null===(n=v.data)||void 0===n?void 0:n.errcode," error=").concat(null==v||null===(r=v.data)||void 0===r?void 0:r.error)),"OK"===(null==v||null===(i=v.data)||void 0===i?void 0:i.errcode)){e.next=15;break}throw new Error((null==v||null===(_=v.data)||void 0===_?void 0:_.error)||"mop verify failed");case 15:if(m=null==v||null===(o=v.data)||void 0===o||null===(a=o.data)||void 0===a||null===(s=a.appList)||void 0===s?void 0:s[0]){e.next=18;break}throw new Error("cannot find app data in appList");case 18:return y="OK"===(null==m?void 0:m.errcode)&&!0===(null==m||null===(c=m.data)||void 0===c?void 0:c.identityValid),e.abrupt("return",y);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qx=function(){var e=ye()(we().mark((function e(t,n){var r,i,o,a,s,c,u,l,d,f;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={applet_id:t.appId,applet_ver:t.appVersion,applet_sequence:t.appSequence,event_name:Vx[n],event_type:n,is_gray:t.isGray,organ_id:t.organId,basic_pack_version:fe.Z.SDKVersion,payload:{},timestamp:Rx()},i=Bx.getStorageSync(Fx),(i=Array.isArray(i)?i:[]).push(r),Bx.setStorageSync(Fx,i),t.shouldCheck){e.next=7;break}return e.abrupt("return");case 7:return o=Mx(),a=Rx(),s={data:{app_info:{app_id:t.sdkBundleId,app_version:fe.Z.host.version+"",name:fe.Z.host.env,sdk_key:t.sdkKey,sdk_version:t.sdkVersion,finger:t.sdkFingerprint},device_info:{brand:fe.Z.brand,device_id:null,model:fe.Z.model,os:fe.Z.platform,os_version:fe.Z.system,screen_size:"".concat(fe.Z.screenHeight,"*").concat(fe.Z.screenWidth)},events:i},exp:{},timestamp:a,uuid:o,sign:Lx({timestamp:a,uuid:o,secret:t.sdkSecret},["timestamp","uuid","secret"])},c={"mop-sdk-key":t.sdkKey,"mop-encryption-type":t.encryptionType,"mop-sdk-fingerprint":t.sdkFingerprint},"".concat(jx).concat(Wx),e.prev=12,e.next=15,new Promise((function(e,t){(0,Ad.a)({method:"POST",url:"".concat(jx).concat("/api/v1/mop/runtime/data-report/apm/private"),header:c,data:s,success:e,fail:t})}));case 15:if("OK"===(null==(l=e.sent)||null===(u=l.data)||void 0===u?void 0:u.errcode)){e.next=19;break}throw new Error((null==l||null===(d=l.data)||void 0===d?void 0:d.error)||"report failed");case 19:f=Bx.getStorageSync(Fx),f=(f=Array.isArray(f)?f:[]).slice(i.length),Bx.setStorageSync(Fx,f),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(12),e.t0;case 28:case"end":return e.stop()}}),e,null,[[12,25]])})));return function(t,n){return e.apply(this,arguments)}}();Protect.hijack(),Protect.hijackWasm(),(0,xn.DW)(),fe.Z.onReady(ye()(we().mark((function e(){var t,n;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,0)}));case 2:return e.next=4,Hx();case 4:if((t=e.sent)&&t.appId){e.next=7;break}return e.abrupt("return");case 7:if(n="initial",e.prev=8,!t.shouldCheck){e.next=28;break}return e.prev=10,e.next=13,Zx(t);case 13:if(e.sent){e.next=18;break}return r=fe.Z.accountInfo.appId,(0,d.IN)("private_openUrl",{url:"https://mp.weixin.qq.com/mp/waerrpage?appid=".concat(r,"&type=offshelf&offshelf_type=0#wechat_redirect"),isNativeStyle:!0}),(0,Qt.T)((function(){Wn()})),n="rejected",e.abrupt("return");case 18:n="passed",e.next=26;break;case 21:e.prev=21,e.t0=e.catch(10),n="failed",e.t0,wxNativeConsole.error("[mop verify error]",e.t0);case 26:e.next=29;break;case 28:n="skipped";case 29:qx(t,Ux).catch((function(e){wxNativeConsole.error("[mop report error]",e)})),e.next=36;break;case 32:e.prev=32,e.t1=e.catch(8),e.t1,wxNativeConsole.error("[init financial app error]",e.t1);case 36:return e.prev=36,wxNativeConsole.info("[financial check status]",n),e.finish(36);case 40:case"end":return e.stop()}var r}),e,null,[[8,32,36,40],[10,21]])}))));var zx,Yx=pf.connectSocket,Kx=pf.closeSocket,Jx=pf.sendSocketMessage,$x=pf.onSocketOpen,Xx=pf.onSocketClose,Qx=pf.onSocketMessage,eA=pf.onSocketError,tA=wf.BH.I9,nA=wf.BH.EO,rA=wf.BH.FI,iA=wf.BH.FE,oA=wf.BH.hv,aA=wf.IM.yb,sA=wf.IM.F2,cA=wf.Rk.Dk,uA=wf.Rk.xW,lA=wf.Rk.$p,dA=wf.Rk.Lv,fA=wf.iR.ew,pA=wf.iR.cC,hA=wf.iR.RC,gA=wf.iR.Sf,vA=wf.jN.nH,_A=wf.pk.sI,mA=wf.pk.BI,yA=wf.pk.rw,bA=wf.pk.wT,wA=wf.pk.s$,IA=wf.pk.Hw,SA=wf.pk.i5,CA=wf.pk.GO,TA=Ww,EA=Uw,kA=Vw,xA=Hw,AA=qw,PA=Jw,DA=Zw,OA=zw,NA=$w,RA=Xw,MA=eI,LA=tI,BA=rI,FA=iI,jA=function e(t){var n="ok",r=0;if(NE()&&!t.ignoreSelfVersion?(r=-20001,n=ME[5]):DE.widget?(r=-20002,n=ME[0]):DE.occupied&&(r=-20003,n=ME[8]),"ok"===n){var i=(0,Dr.xI)(),o=i.cameraAuthorized,a=i.microphoneAuthorized;if(!o||!a)return o||(n=ME[1],r=-30001),a||(n=ME[2],r=-30002),void(0,Jn.showModal)({title:"",content:"请在“设置-隐私”选项中，允许微信访问你的摄像头和麦克风",showCancel:!1,complete:function(){(0,d.YG)("join1v1Chat",t,n,r)}});EE().then((function(i){var o=i.authSetting["scope.camera"],a=i.authSetting["scope.record"];o&&a?LE().then((function(){PT({complete:function(e){if(DE.occupied=e.join,DE.occupied)n=ME[8],r=-20003,(0,d.YG)("join1v1Chat",t,n,r);else{var i=Object.assign({role:"caller"},t);i.caller.openid=DE.userSessionInfo.openid,DE.widget=new RE(i)}}})}),(function(){n=ME[7],r=-3e4,(0,d.YG)("join1v1Chat",t,n,r)})):a?o||kE({scope:"scope.camera"}).then((function(){e(t)}),(function(){n=ME[4],r=-30004,(0,d.YG)("join1v1Chat",t,n,r)})):kE({scope:"scope.record"}).then((function(){e(t)}),(function(){n=ME[3],r=-30003,(0,d.YG)("join1v1Chat",t,n,r)}))}))}else(0,d.YG)("join1v1Chat",t,n,r)},WA=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("setEnable1v1Chat",t,{enable:!0})){LE();var n="ok",r=0;if(NE()&&!t.ignoreSelfVersion)return r=-20001,n=ME[5],void(0,d.YG)("setEnable1v1Chat",t,n,r);if(!t.enable)return DE.enable=!1,DE.ignoreSelfVersion=t.ignoreSelfVersion||!1,void(0,d.FE)({name:"setEnable1v1Chat",args:t});var i=(0,Dr.xI)(),o=i.cameraAuthorized,a=i.microphoneAuthorized;if(!o||!a)return o||(r=-30001,n=ME[1]),a||(r=-30002,n=ME[2]),void(0,Jn.showModal)({title:"",content:"请在“设置-隐私”选项中，允许微信访问你的摄像头和麦克风",showCancel:!1,complete:function(){(0,d.YG)("setEnable1v1Chat",t,n,r)}});EE().then((function(i){var o=i.authSetting["scope.camera"],a=i.authSetting["scope.record"];o&&a?(DE.enable=!0,DE.ignoreSelfVersion=t.ignoreSelfVersion||!1,DE.minWindowType=W.hj(t.minWindowType)?t.minWindowType:1,(0,d.FE)({name:"setEnable1v1Chat",args:t})):a?o||kE({scope:"scope.camera"}).then((function(){e(t)}),(function(){r=-30004,n=ME[4],(0,d.YG)("setEnable1v1Chat",t,n,r)})):kE({scope:"scope.record"}).then((function(){e(t)}),(function(){r=-30003,n=ME[3],(0,d.YG)("setEnable1v1Chat",t,n,r)}))}))}},UA=uu,VA=lu.oK,GA=lu.j8,HA=He,ZA=fu,qA=du,zA=pu,YA=hu,KA=function(e){(0,d.IN)("chooseContact",e)},JA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("chooseWeChatContact",e)},$A=gu,XA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,an.V)("quicklyAddBrandContact",e,{})},QA=vu,eP=_u,tP=Jn.showToast,nP=Jn.hideToast,rP=Jn.showLoading,iP=Jn.hideLoading,oP=Jn.showModal,aP=Jn.showActionSheet,sP=Jn.showShareActionSheet,cP=Ra,uP=Ma,lP=La,dP=Wa,fP=Ua,pP=Va,hP=Ga,gP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(B.wZ&&fe.Z.clientVersion<654313216||B.cj&&fe.Z.clientVersion<385877760){var t={errMsg:"hideHomeButton:ok"};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}else(0,d.IN)("hideHomeButton",e,{})},vP=co,_P=lo,mP=fo,yP=vo,bP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("shareAppMessageForFakeNative",e,{title:"",bizType:0})){var t=Object.assign({useDefaultSnapshot:!0,disableForward:!1},e);if(e.path&&"string"==typeof e.path)t.path=_o(__appServiceEngine__.convertComponentAliasToRoute(e.path));else{var n=Object.keys(h.Z.query).map((function(e){return"".concat(e,"=").concat(h.Z.query[e])})).join("&"),r="".concat(h.Z.lastRoute,"?").concat(n);t.path=_o(__appServiceEngine__.convertComponentAliasToRoute(r))}e.imageUrl&&"string"==typeof e.imageUrl&&(/^(http|https|wxfile):\/\//.test(e.imageUrl)?t.imageUrl=e.imageUrl:t.imageUrl=F(e.imageUrl,!1));var i=fe.Z.accountInfo.appId;"wx60422b707e49ff2e"!==i&&(delete t.bizSourceName,delete t.bizSourceIconUrl),(0,d.IN)("shareAppMessageForFakeNative",t)}},wP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=so.Z.get(e.shareTicket);t&&t.shareKey?(0,wo.J)("authShareRelationship")?So({apiName:"webapi_authmgr",reqData:{share_key:t.shareKey},success:function(t){wxNativeConsole.info("webapi_authmgr res",t);var n=JSON.parse(t.respData.data),r={};r.iv=n.iv,r.encryptedData=n.encrypt_activity_id,r.valid=1===n.res,(0,d.FE)({name:Io,args:e,res:r})},fail:e.fail,complete:e.complete}):(0,d.YG)(Io,e,"no permission"):(0,d.YG)(Io,e,"invalid shareTicket")},IP=Ro,SP=yo,CP=bo,TP=Rf.clearStorage,EP=Rf.clearStorageSync,kP=Rf.getStorage,xP=Rf.getStorageInfo,AP=Rf.getStorageInfoSync,PP=Rf.getStorageSync,DP=Rf.removeStorage,OP=Rf.removeStorageSync,NP=Rf.setStorage,RP=Rf.setStorageSync,MP=function(e){if((0,f.r3)("getBackgroundFetchData",e,{fetchType:""}))if("pre"===e.fetchType||"periodic"===e.fetchType)try{(0,f.IN)("getBackgroundFetchData",{fetchType:e.fetchType,success:function(t){(0,f.FE)({name:"getBackgroundFetchData",args:e,res:t})},fail:function(t){(0,f.FE)({name:"getBackgroundFetchData",args:e,success:!1,errMsg:t.errMsg,res:t})},complete:function(){}})}catch(t){"function"==typeof e.fail&&e.fail({errMsg:"getBackgroundFetchData:fail ".concat(t.message)}),"function"==typeof e.complete&&e.complete({errMsg:"getBackgroundFetchData:fail ".concat(t.message)})}else(0,f.YG)("getBackgroundFetchData",e,"invalid fetchType")},LP=function(e){try{(0,f.jQ)("onBackgroundFetchData",(function(t){t.errMsg="onBackgroundFetchData:ok","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundFetchData callback function")(t)}))}catch(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundFetchData callback function")(t)}},BP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.r3)("setBackgroundFetchToken",e,{token:""})&&(0,f.IN)("setBackgroundFetchToken",e)},FP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.IN)("getBackgroundFetchToken",e)},jP={},WP={drawCanvas:se.drawCanvas,createContext:se.createContext,createCanvasContext:se.createCanvasContext,canvasToTempFilePath:se.canvasToTempFilePath,canvasGetImageData:se.canvasGetImageData,canvasPutImageData:se.canvasPutImageData,createOffscreenCanvas:se.createOffscreenCanvas,getAccountInfoSync:ar,getShareInfo:vP,authPrivateMessage:wP,pageScrollTo:Xa,chooseInvoiceTitle:ia,chooseInvoice:ha,arrayBufferToBase64:__errorTracer__.surroundThirdByTryCatch(p.sM),base64ToArrayBuffer:__errorTracer__.surroundThirdByTryCatch(p.RG),openSetting:na,getExtConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout((function(){var t={errMsg:"getExtConfig: ok",extConfig:Gs()};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}),0)},chooseMedia:wf.Ke,previewMedia:wf.gG,chooseMultiMedia:wf.vX,chooseMessageFile:wf.KL,chooseWeChatContact:JA,uploadEncryptedFileToCDN:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("uploadEncryptedFileToCDN",e,{})},onUploadEncryptedFileToCDNProgress:function(e){(0,d.jQ)("onUploadEncryptedFileToCDNProgress",e)},uploadToCommonCDN:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,wo.J)("uploadToCommonCDN"))(0,d.IN)("uploadToCommonCDN",e,{});else{var t="uploadToCommonCDN:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},getExtConfigSync:Gs,showShareMenu:_P,hideShareMenu:mP,updateShareMenu:yP,shareAppMessageForFakeNative:bP,openUrl:Hf.Yo,setNavigationBarColor:dP,setNavigationBarAlpha:fP,showShareImageMenu:IP,shareFileMessage:SP,shareVideoMessage:CP,vibrateShort:zA,vibrateLong:YA,getSetting:Xo,checkIsSupportFacialRecognition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("checkIsSupportFacialRecognition",e,{})},startFacialRecognitionVerify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Vo(e);(0,d.IN)("startFacialRecognitionVerify",(0,p.f0)(e,{requestVerifyPreInfo:t}),{})},startFacialRecognitionVerifyAndUploadVideo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Vo(e);(0,d.IN)("startFacialRecognitionVerifyAndUploadVideo",(0,p.f0)(e,{requestVerifyPreInfo:t}),{})},startCustomFacialRecognitionVerify:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Vo(e);(0,d.IN)("startCustomFacialRecognitionVerify",(0,p.f0)(e,{requestVerifyPreInfo:t}),{})},startCustomFacialRecognitionVerifyAndUploadVideo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Vo(e);(0,d.IN)("startCustomFacialRecognitionVerifyAndUploadVideo",(0,p.f0)(e,{requestVerifyPreInfo:t}),{})},sendBizRedPacket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,wo.J)("sendBizRedPacketForOpen")){var t=(0,Pr.rN)().scene;if(1047!==t&&1124!==t&&1011!==t&&1025!==t){var n="sendBizRedPacket:fail scene ".concat(t," not support.");return e.fail&&e.fail({errMsg:n}),void(e.complete&&e.complete({errMsg:n}))}}(0,d.IN)("sendBizRedPacket",e,{})},sendGoldenRedPacket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("sendGoldenRedPacket",e,{})},openGoldenRedPacketDetail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openGoldenRedPacketDetail",e,{})},showRedPackage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("showRedPackage",e,{url:""}))if(0===e.url.indexOf(Uo)){var t=Object.assign({isNativeStyle:!0},e);(0,d.IN)("private_openUrl",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","showRedPackage")}})}else(0,d.YG)("showRedPackage",e,"url is invalid")},addPhoneContact:$A,quicklyAddBrandContact:XA,searchContacts:QA,privateSearchContacts:eP,setScreenBrightness:ZA,getScreenBrightness:qA,shareToWeRun:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("shareToWeRun",e,{recordList:[]})&&((0,wo.J)("shareDataToWeRun")?sa({recordList:e.recordList}).then((function(t){var n=t.wording||{},r=da(n,["title","sport_name","note_title","note_detail"]);r.theme=(0,Dr.xI)().theme||"light";var i=JSON.stringify(r);fa(i,e)}),(function(t){ua({show:0,statusCancel:0,statusConfirm:0,clickMoreCount:0}),(0,d.YG)("shareToWeRun",e,t.errMsg,+t.err_code)})):(0,d.YG)("shareToWeRun",e,"has no permission",-100004))},getWeRunData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openWeRunSetting",{checkSupport:!0,success:function(){(0,d.gM)((0,p.f0)({data:{api_name:"webapi_getwerunstep_history"}},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getWeRunData")},beforeSuccess:function(e){B.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","getWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api getWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api getWeRunData fail callback function")(t)}})},uploadWeRunData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"!=typeof e.step||e.step<0?(0,d.YG)("uploadWeRunData",e,"parameter error: step should be number and greater or equal to 0"):(0,d.IN)("openWeRunSetting",{checkSupport:!1,success:function(){(0,d.IN)("uploadWeRunData",e,{})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","uploadWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api uploadWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api uploadWeRunData fail callback function")(t)}})},addWeRunData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"!=typeof e.step||e.step<0?(0,d.YG)("addWeRunData",e,"parameter error: step should be number and greater or equal to 0"):(0,d.IN)("openWeRunSetting",{checkSupport:!1,success:function(){(0,d.IN)("addWeRunData",e,{})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","addWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api addWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api addWeRunData fail callback function")(t)}})},canIUse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e)throw new p.l0("canIUse: schema should be a string");var t=e.split(".");return!!Bf.apply(void 0,x()(t))||(!!jf.apply(void 0,x()(t))||!!Ff.apply(void 0,x()(t)))},setPageStyle:rs,triggerGettingWidgetData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("triggerGettingWidgetData",e,{cacheKey:""})&&(0,d.IN)("triggerGettingWidgetData",e,{})},navigateToMiniProgram:ne.Be,navigateToMiniProgramDirectly:ne.t4,navigateToDevMiniProgram:function(e){jn(e,"/")},navigateBackMiniProgram:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Fn?(0,d.IN)("navigateBackMiniProgram",e,{}):(0,d.YG)("navigateBackMiniProgram",e,"not MiniProgram can navigate back.")},launchMiniProgram:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);t.path&&(t.path=(0,p.Pp)(t.path)),(0,d.IN)("launchMiniProgram",t)},launchDevMiniProgram:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("launchDevMiniProgram",e,{appId:""})){var t=Object.assign({},e);t.path=(0,p.Pp)(t.path),"string"==typeof t.path&&void 0===t.relativeURL&&(t.relativeURL=t.path),(0,d.IN)("launchDevMiniProgram",t,{})}},exitMiniProgram:Wn,launchApplicationDirectly:Gf.dx,launchApplicationForNative:Gf.oM,setNavigationBarRightButton:pP,onTapNavigationBarRightButton:hP,setTopBarText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.text?Date.now()-Ha<5e3?(0,d.YG)("setTopBarText",e,"invoke too frequently"):(0,d.IN)("setTopBarText",e,{beforeSuccess:function(){Ha=Date.now()}}):(0,d.YG)("setTopBarText",e,"invalid text")},setTabBarBadge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("setTabBarBadge",e,{index:0,text:""})){var t=Object.assign({},e);t.badgeValue=t.text,t.type="text",n(t.badgeValue)>4&&(t.badgeValue="..."),(0,d.IN)("setTabBarBadge",t)}function n(e){return null==e?0:("string"!=typeof e&&(e+=""),e.replace(/[^\x00-\xff]/g,"01").length)}},removeTabBarBadge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("setTabBarBadge",e,{index:0})){var t=Object.assign({},e);t.type="none",(0,d.IN)("setTabBarBadge",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setTabBarBadge","removeTabBarBadge")}})}},showTabBarRedDot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("setTabBarBadge",e,{index:0})){var t=Object.assign({},e);t.type="redDot",(0,d.IN)("setTabBarBadge",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setTabBarBadge","showTabBarRedDot")}})}},hideTabBarRedDot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("setTabBarBadge",e,{index:0})){var t=Object.assign({},e);t.type="none",(0,d.IN)("setTabBarBadge",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setTabBarBadge","hideTabBarRedDot")}})}},showTabBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===e.animation&&(e.animation=!1),(0,d.r3)("showTabBar",e,{animation:!0})&&(0,d.IN)("showTabBar",e,{beforeSuccess:function(){return!0}})},hideTabBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===e.animation&&(e.animation=!1),(0,d.r3)("hideTabBar",e,{animation:!0})&&(0,d.IN)("hideTabBar",e,{beforeSuccess:function(){return!1}})},setTabBarStyle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("setTabBarStyle",e)},setTabBarItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("setTabBarItem",e,{index:0}))if(0!==(e.iconPath||"").indexOf("."))if(0!==(e.selectedIconPath||"").indexOf(".")){try{(0,de.n)(e,"text")||(e.text=Ka[e.index].text||""),Ka[e.index].text=e.text}catch(e){"setTabBarItem invalid, errMsg: ".concat(e.message)}(0,d.IN)("setTabBarItem",e)}else(0,d.YG)("setTabBarItem",e,"selectedIconPath invalid, require absolute path");else(0,d.YG)("setTabBarItem",e,"iconPath invalid, require absolute path")},setBackgroundColor:ds,setBackgroundTextStyle:fs,setEnableDebug:qf,captureScreen:UA,onUserCaptureScreen:VA,offUserCaptureScreen:GA,setKeepScreenOn:HA,checkIsSupportSoterAuthentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("checkIsSupportSoterAuthentication",e,{})},startSoterAuthentication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("startSoterAuthentication",e,{challenge:""})){var t=e.success;(0,d.IN)("startSoterAuthentication",Object.assign({},e,{success:function(n){0!==n.errCode?"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api startSoterAuthentication fail callback function")(n):"function"==typeof t&&__errorTracer__.surroundThirdByTryCatch(t,"at api startSoterAuthentication success callback function")(n)}}),{beforeSuccess:function(e){"number"==typeof e.errCode&&0!==e.errCode&&(e.errMsg="startSoterAuthentication:fail")}})}},checkIsSoterEnrolledInDevice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("checkIsSoterEnrolledInDevice",e,{checkAuthMode:""})&&(0,d.IN)("checkIsSoterEnrolledInDevice",e,{})},openDeliveryList:Hf.vS,navigateBackH5:function(e){BE?(0,d.IN)("navigateBackH5",e):(0,d.YG)("navigateBackH5",e,"not HTML5 page can navigate back.")},openBusinessView:function(e){if((0,d.r3)("openBusinessView",e,{businessType:""})){var t=Object.assign({},e);delete t.sourcetype,delete t.preScene,delete t.preSceneNote,delete t.agentId,delete t.privateExtraData,delete t.scene,delete t.sceneNote,(0,d.IN)("openBusinessView",t)}},navigateBackApplication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(7===fe.Z.appType){var t="";(0,W.Kn)(e.extraData)&&(t=JSON.stringify(e.extraData));var n=FE("navigateBackApplication",Object.assign({},e,{extraData:t}));(0,d.IN)("navigateBackApplication",n)}else(0,d.YG)(e,"permission denied",1)},navigateBackNative:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";(0,W.Kn)(e.extraData)&&(t=JSON.stringify(e.extraData)),B.cj&&fe.Z.clientVersion<=385877035||B.wZ&&fe.Z.clientVersion<=654312491?(0,d.YG)("navigateBackNative",e,"does not exist."):(0,d.IN)("navigateBackNative",Object.assign({},e,{extraData:t}))},reportIDKey:function(){},reportKeyValue:function(){},setWindowSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.YG)("setWindowSize",e,"deprecated")},setNavigationBarTitle:cP,showNavigationBarLoading:uP,hideNavigationBarLoading:lP,hideHomeButton:gP,startPullDownRefresh:Qa,stopPullDownRefresh:es,operateWXData:Nr.Lo,getOpenDeviceId:oa,getMenuButtonBoundingClientRect:hs,getSelectedTextRange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=os();if(B.wZ&&gs&&t===h.Z.currentWebviewId)return(0,d.nY)("xWebGetSelectedTextRange",{taskId:vs}),void(_s[vs++]=e);(0,an.L)("getSelectedTextRange",{},[h.Z.currentWebviewId],(function(t){0===t.errMsg.indexOf("getSelectedTextRange:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))},enableAlertBeforeUnload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="enableAlertBeforeUnload",n=Reporter.surroundThirdByTryCatch(e.success||ps,"at api ".concat(t," success callback function")),r=Reporter.surroundThirdByTryCatch(e.fail||ps,"at api ".concat(t," fail callback function")),i=Reporter.surroundThirdByTryCatch(e.complete||ps,"at api ".concat(t," complete callback function")),o="string"==typeof e.message?e.message:void 0;(0,d.IN)("setNavigateBackConfirmDialog",{enable:!0,content:o,success:n,fail:r,complete:i},{beforeSuccess:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)},beforeFail:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)}})},disableAlertBeforeUnload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="disableAlertBeforeUnload",n=Reporter.surroundThirdByTryCatch(e.success||ps,"at api ".concat(t," success callback function")),r=Reporter.surroundThirdByTryCatch(e.fail||ps,"at api ".concat(t," fail callback function")),i=Reporter.surroundThirdByTryCatch(e.complete||ps,"at api ".concat(t," complete callback function"));(0,d.IN)("setNavigateBackConfirmDialog",{enable:!1,success:n,fail:r,complete:i},{beforeSuccess:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)},beforeFail:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)}})},setNavigateBackInterception:gi.vJ,stopNavigateBackInterception:gi.J_,makeBluetoothPair:ol,openBluetoothAdapter:mu,closeBluetoothAdapter:yu,getBluetoothAdapterState:bu,onBluetoothAdapterStateChange:Vu,offBluetoothAdapterStateChange:Gu,startBluetoothDevicesDiscovery:wu,stopBluetoothDevicesDiscovery:Iu,getBluetoothDevices:Su,getConnectedBluetoothDevices:Tu,createBLEConnection:Eu,setBLEMTU:Hu,closeBLEConnection:ku,getBLEDeviceServices:xu,getBLEDeviceRSSI:Cu,getBLEDeviceCharacteristics:Au,createBLEPeripheralServer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("createBLEPeripheralServer",e,{beforeSuccess:function(e){var t=e.serverId,n=new tl(t);delete e.serverId,e.server=n}})},onBLEPeripheralConnectionStateChanged:rl,offBLEPeripheralConnectionStateChanged:il,notifyBLECharacteristicValueChanged:Pu,notifyBLECharacteristicValueChange:Du,readBLECharacteristicValue:Ou,writeBLECharacteristicValue:Nu,onBluetoothDeviceFound:Wu,offBluetoothDeviceFound:Uu,onBLEConnectionStateChanged:Ru,onBLEConnectionStateChange:Lu,onBLECharacteristicValueChange:Fu,offBLEConnectionStateChanged:Mu,offBLEConnectionStateChange:Bu,offBLECharacteristicValueChange:ju,startBeaconDiscovery:nu,stopBeaconDiscovery:ru,getBeacons:iu,onBeaconUpdate:ou,offBeaconUpdate:au,onBeaconServiceChange:su,offBeaconServiceChange:cu,startWifi:al,stopWifi:sl,getWifiList:cl,getConnectedWifi:ul,connectWifi:ll,presetWifiList:dl,setWifiList:fl,onGetWifiList:pl,onWifiConnected:gl,offGetWifiList:hl,offWifiConnected:vl,onEvaluateWifi:yl,getHCEState:bl,startHCE:wl,stopHCE:Il,sendHCEMessage:Sl,onHCEMessage:Cl,offHCEMessage:Tl,getNFCAdapter:zl,startLocalServiceDiscovery:Xl,stopLocalServiceDiscovery:Ql,onLocalServiceFound:ed,offLocalServiceFound:td,onLocalServiceLost:nd,offLocalServiceLost:rd,onLocalServiceDiscoveryStop:id,offLocalServiceDiscoveryStop:od,onLocalServiceResolveFail:ad,offLocalServiceResolveFail:sd,redirectTo:_n,reLaunch:mn,navigateTo:yn,switchTab:wn,navigateBack:In,onAppShow:Un.av,offAppShow:Un.GB,onAppHide:Gn,offAppHide:Hn,onError:dr,offError:fr,onUnhandledRejection:pr,offUnhandledRejection:hr,getLaunchOptionsSync:sr.I,getEnterOptionsSync:Pr.rN,onWindowResize:vr.KN,offWindowResize:vr.rD,setPageOrientation:us,getStorage:kP,getStorageSync:PP,setStorage:NP,setStorageSync:RP,removeStorage:DP,removeStorageSync:OP,clearStorage:TP,clearStorageSync:EP,getStorageInfo:xP,getStorageInfoSync:AP,getBackgroundFetchData:MP,onBackgroundFetchData:LP,setBackgroundFetchToken:BP,getBackgroundFetchToken:FP,request:Ad.W,connectSocket:Yx,closeSocket:Kx,sendSocketMessage:Jx,onSocketOpen:$x,onSocketClose:Xx,onSocketMessage:Qx,onSocketError:eA,uploadFile:Rd,downloadFile:Rr.S,addNativeDownloadTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.cj?(0,d.YG)("addNativeDownloadTask",e,"iOS not supported"):(0,d.IN)("addNativeDownloadTask",e,{})},downloadApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(B.cj)(0,d.YG)("downloadApp",e,"iOS not supported");else{if(!(0,d.r3)("downloadApp",e,{taskName:"",taskUrl:"",fileMd5:""}))return null;e.fileType=e.fileType||1;try{var t=new bf(e);return t}catch(t){return(0,d.YG)("downloadApp",e,t.message),null}}},installDownloadApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.cj?(0,d.YG)("installDownloadApp",e,"iOS not supported"):(0,d.r3)("installDownloadApp",e,{downloadId:""})&&(0,d.IN)("installDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("installDownloadTaskForNative","installDownloadApp")}})},getAppInstallState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.cj?(0,d.YG)("getAppInstallState",e,"iOS not supported"):e.packageName||e.packageNameArray?(0,d.IN)("getInstallStateForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("getInstallStateForNative","getAppInstallState")}}):(0,d.YG)("getAppInstallState",e,"parameter error: require packageName or packageNameArray")},queryDownloadAppTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.cj?(0,d.YG)("queryDownloadAppTask",e,"iOS not supported"):e.downloadId||e.downloadIdArray||e.appIdArray?(0,d.IN)("queryDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("queryDownloadTaskForNative","queryDownloadAppTask"),"download_succ"===e.state&&(e.progress=100),(e.result||[]).forEach((function(e){"download_succ"===e.state&&(e.progress=100)}))}}):(0,d.YG)("queryDownloadAppTask",e,"parameter error: require downloadId or downloadIdArray or appIdArray")},cancelDownloadAppTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.cj?(0,d.YG)("cancelDownloadAppTask",e,"iOS not supported"):(0,d.r3)("cancelDownloadAppTask",e,{downloadIdArray:[]})&&(0,d.IN)("cancelDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("cancelDownloadTaskForNative","cancelDownloadAppTask")}})},resumeDownloadAppTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.cj?(0,d.YG)("resumeDownloadAppTask",e,"iOS not supported"):(0,d.r3)("resumeDownloadAppTask",e,{downloadId:""})&&(0,d.IN)("resumeDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("resumeDownloadTaskForNative","resumeDownloadAppTask")}})},pauseDownloadAppTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.cj?(0,d.YG)("pauseDownloadAppTask",e,"iOS not supported"):(0,d.r3)("pauseDownloadAppTask",e,{downloadId:""})&&(0,d.IN)("pauseDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("pauseDownloadTaskForNative","pauseDownloadAppTask")}})},onDownloadAppStateChange:function(e){(0,d.jQ)("onDownloadAppStateChangeForNative",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};__errorTracer__.surroundThirdByTryCatch(e,"at onDownloadAppStateChange callback function")(t)}))},downloadAppForIOS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!B.wZ)return(0,d.r3)("downloadAppForIOS",e,{appUrl:""})?((0,d.IN)("downloadAppInternalForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("downloadAppInternalForNative","downloadAppForIOS")}}),null):null;(0,d.YG)("downloadAppForIOS",e,"android not supported")},calRqt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("calRqt",e,{rqt:""})&&(0,d.IN)("calRqt",e)},secureTunnel:function(e){(0,d.IN)("secureTunnel",e)},chooseImage:tA,previewImage:nA,getImageInfo:rA,saveImageToPhotosAlbum:iA,compressImage:oA,startRecord:aA,stopRecord:sA,playVoice:fA,pauseVoice:pA,stopVoice:hA,onVoicePlayEnd:gA,chooseVideo:cA,saveVideoToPhotosAlbum:uA,getVideoInfo:lA,compressVideo:dA,loadFontFace:vA,createMediaContainer:wf.We,createMediaRecorder:wf.tX,createVideoDecoder:wf.fF,openVideoEditor:wf.JS,createMediaAudioPlayer:wf.G_,createWebAudioContext:wf.b4,getLocation:Ds,openLocation:Rs,chooseLocation:Os,choosePoi:Ns,onLocationChange:Ls,offLocationChange:Bs,onLocationChangeError:js,offLocationChangeError:Ws,startLocationUpdateBackground:function(e){var t={subKey:"",enableIndoor:!1};Object.assign(t,e),(0,d.IN)("enableLocationUpdateBackground",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableLocationUpdateBackground","startLocationUpdateBackground")}})},startLocationUpdate:Us,stopLocationUpdate:Vs,getNetworkType:Dc.getNetworkType,onNetworkStatusChange:Dc.onNetworkStatusChange,offNetworkStatusChange:Dc.offNetworkStatusChange,getSystemInfo:Dr.So,getSystemInfoSync:Dr.xI,getSystemInfoAsync:Dr.jC,getBatteryInfo:Ac,getBatteryInfoSync:Pc,startAccelerometer:Rc,stopAccelerometer:Mc,onAccelerometerChange:Fc,offAccelerometerChange:Bc,startCompass:Uc,stopCompass:Vc,onCompassChange:Zc,offCompassChange:Hc,startDeviceMotionListening:hd,stopDeviceMotionListening:gd,onDeviceMotionChange:vd,offDeviceMotionChange:_d,startGyroscope:ud,stopGyroscope:ld,onGyroscopeChange:dd,offGyroscopeChange:fd,checkIsOpenAccessibility:function(e){(0,d.IN)("checkIsOpenAccessibility",e)},addPhoneCalendar:bd,addPhoneRepeatCalendar:wd,getRandomValues:XI,reportAction:function(e){(0,d.IN)("reportAction",e)},getBackgroundAudioManager:wf.pk.uR,getRecorderManager:wf.IM.gS,getBackgroundAudioPlayerState:_A,playBackgroundAudio:mA,pauseBackgroundAudio:yA,seekBackgroundAudio:bA,stopBackgroundAudio:wA,onBackgroundAudioPlay:IA,onBackgroundAudioPause:SA,onBackgroundAudioStop:CA,joinVoIPChat:TA,exitVoIPChat:EA,updateVoIPChatMuteConfig:kA,onVoIPChatMembersChanged:xA,onVoIPChatSpeakersChanged:AA,onVoIPChatInterrupted:PA,offVoIPChatMembersChanged:DA,offVoIPChatSpeakersChanged:OA,offVoIPChatInterrupted:NA,subscribeVoIPVideoMembers:RA,onVoIPVideoMembersChanged:MA,offVoIPVideoMembersChanged:LA,onVoIPChatStateChanged:BA,offVoIPChatStateChanged:FA,join1v1Chat:jA,setEnable1v1Chat:WA,requestSubscribeMessage:function(e){if(ba)(0,d.YG)("requestSubscribeMessage",e,"last call has not ended");else{if(!(0,d.r3)("requestSubscribeMessage",e,{tmplIds:[]}))return;ba=!0,B.cj&&fe.Z.clientVersion<385877504||B.wZ&&fe.Z.clientVersion<654313216||B.gm?Ia(e):wa(e)}},getUserCryptoManager:function(){return Dx},login:function(e){(0,d.IN)("login",(0,p.f0)(e,{requestInQueue:!1}))},logout:function(){(0,d.IN)("logout",{})},checkSession:function(e){Fo&&clearTimeout(Fo),(0,d.IN)("refreshSession",e,{beforeSuccess:function(e){Fo=setTimeout((function(){(0,d.IN)("refreshSession")}),1e3*e.expireIn),delete e.err_code,delete e.expireIn},beforeAll:function(e){e.errMsg=e.errMsg.replace("refreshSession","checkSession")}})},authorize:xe,getUserInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=wx&&wx.version&&wx.version.version||"",n=!0===(0,Ce.KU)("getUserInfo")||"unknown"===(0,Ce.KU)("getUserInfo");(0,d.gM)((0,p.f0)({},e,{isImportant:!0,data:{api_name:"webapi_getuserinfo",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",version:t}}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getUserInfo"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:function(e){B.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})},getUserProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("getUserProfile",e,{desc:""})){var t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)(0,d.YG)("getUserProfile",e,"desc length does not meet the requirements");else{var n=!0===(0,Ce.KU)("getUserProfile")||"unknown"===(0,Ce.KU)("getUserProfile");(0,d.gM)((0,p.f0)({},e,{isImportant:!0,data:{api_name:"webapi_getuserprofile",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",desc:e.desc}}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getUserProfile"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:function(e){B.wZ&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})}}},requestPayment:Vi,verifyPaymentPassword:function(e){(0,d.IN)("verifyPaymentPassword",e)},bindPaymentCard:function(e){(0,d.IN)("bindPaymentCard",e)},requestPaymentToBank:function(e){(0,d.IN)("requestPaymentToBank",e)},requestVirtualPayment:function(e){(0,d.IN)("requestVirtualPayment",e)},openOfflinePayView:function(e){(0,d.IN)("openOfflinePayView",e)},openWCPayCardList:function(e){(0,d.IN)("openWCPayCardList",e)},requestMallPayment:function(e){(0,d.IN)("requestMallPayment",e)},setCurrentPaySpeech:function(e){(0,d.IN)("setCurrentPaySpeech",e)},loadPaySpeechDialectConfig:function(e){(0,d.IN)("loadPaySpeechDialectConfig",e)},requestJointPayment:function(e){(0,d.IN)("requestJointPayment",e)},getWCPayOverseaPrepayRequest:function(e){(0,d.IN)("getWCPayOverseaPrepayRequest",e)},requestH5Transaction:function(e){(0,d.IN)("requestH5Transaction",e)},openWCPayOverseaPaymentReceive:function(e){(0,d.IN)("openWCPayOverseaPaymentReceive",e)},handleWCPayOverseaWalletBuffer:function(e){(0,d.IN)("handleWCPayOverseaWalletBuffer",e)},requestVerifyUserIdentity:function(e){(0,d.IN)("requestVerifyUserIdentity",e)},requestPersonalPay:$i,phoneBindCardVerifySms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.wZ&&(0,Ce.Cb)(fe.Z.clientVersion,"7.0.15")>=0||B.cj&&(0,Ce.Cb)(fe.Z.clientVersion,"7.0.13")>=0?(0,d.IN)("phoneBindCardVerifySms",e):(0,d.YG)("phoneBindCardVerifySms",e,"not yet supported")},faceVerifyForPay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("faceVerifyForPay",e)},openOfficialAccountProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{scene:151});delete t.profileReportInfo,(0,d.IN)("openBizProfile",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("openBizProfile","openOfficialAccountProfile")}})},openUserProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);delete t.profileReportInfo,(0,d.IN)("openUserProfile",t)},requestBizSplitBillPayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.r3)("requestBizSplitBillPayment",e,{orderNo:""})&&(0,f.IN)("requestBizSplitBillPayment",e)},openSelectPayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openSelectPayment",e)},requestEntrustAuthorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("requestEntrustAuthorization",e)},requestFacetoFacePayment:Ji,requestQueryCashier:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("requestQueryCashier",e,{timeStamp:0,nonceStr:"",package:"",signType:"",paySign:""})&&(0,d.IN)("requestQueryCashier",e)},requestOrderPayment:ao,openMiniProgramProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openWeAppProfile",e)},openMiniProgramSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openWeAppSearch",e)},openMiniProgramHistoryList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openWeAppHistoryList",e)},openMiniProgramStarList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("openWeAppStarList",e)},batchGetContactDirectly:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,wo.J)("batchGetContactDirectly"))(0,d.IN)("batchGetContact",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("batchGetContact","batchGetContactDirectly")}});else{var t="batchGetContactDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},preloadMiniProgramEnvDirectly:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,wo.J)("preloadMiniProgramEnvDirectly"))(0,d.IN)("preloadMiniProgramEnv",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("preloadMiniProgramEnv","preloadMiniProgramEnvDirectly")}});else{var t="preloadMiniProgramEnvDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},predownloadMiniProgramPackageDirectly:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,wo.J)("predownloadMiniProgramPackageDirectly"))(0,d.IN)("predownloadMiniProgramPackage",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("predownloadMiniProgramPackage","predownloadMiniProgramPackageDirectly")}});else{var t="predownloadMiniProgramPackageDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},preventApplePayUI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,f.IN)("preventApplePayUI",e)},getWxSecData:ga,addCard:jo,openCard:Wo,checkTrafficCardConditions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.wZ&&(0,Ce.Cb)(fe.Z.clientVersion,"7.0.18")>=0?(0,d.IN)("checkTrafficCardConditions",e):(0,d.YG)("checkTrafficCardConditions",e,"not yet supported")},queryTrafficCardInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.wZ&&(0,Ce.Cb)(fe.Z.clientVersion,"7.0.18")>=0?(0,d.IN)("queryTrafficCardInfo",e):(0,d.YG)("queryTrafficCardInfo",e,"not yet supported")},issueTrafficCard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.wZ&&(0,Ce.Cb)(fe.Z.clientVersion,"7.0.18")>=0?(0,d.IN)("issueTrafficCard",e):(0,d.YG)("issueTrafficCard",e,"not yet supported")},rechargeTrafficCard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.wZ&&(0,Ce.Cb)(fe.Z.clientVersion,"7.0.18")>=0?(0,d.IN)("rechargeTrafficCard",e):(0,d.YG)("rechargeTrafficCard",e,"not yet supported")},setDefaultTrafficCard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.wZ&&(0,Ce.Cb)(fe.Z.clientVersion,"7.0.18")>=0?(0,d.IN)("setDefaultTrafficCard",e):(0,d.YG)("setDefaultTrafficCard",e,"not yet supported")},addFileToFavorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("addFileToFavorites",e,{filePath:""})){var t=mo(e.filePath);(0,d.IN)("addFileToFavorites",E()(E()({},e),{},{filePath:t}))}},addVideoToFavorites:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,d.r3)("addVideoToFavorites",e,{videoPath:""})){var t=mo(e.videoPath),n=mo(e.thumbPath);(0,d.IN)("addVideoToFavorites",E()(E()({},e),{},{videoPath:t,thumbPath:n}))}},scanCode:Kc,openQRCode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("openQRCode",e,{})&&(0,d.IN)("openQRCode",e)},scanItem:Xc,privateScanItem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("scanItem",e,{})&&(0,d.IN)("scanItem",E()(E()({},e),{},{data:JSON.stringify({appId:fe.Z.accountInfo.appId,path:h.Z.lastRoute}),success:function(){},fail:function(){},complete:function(t){0!==t.errMsg.indexOf("scanItem:fail")?$c({reqKey:t.reqKey,success:e.success,fail:e.fail,complete:e.complete}):(0,d.YG)("scanItem",e,t.errMsg.substr(14).trim(),t.errCode)}}))},chooseAddress:Ho,saveFile:If.yH,openDocument:If.KK,getSavedFileList:If.rW,getSavedFileInfo:If.vL,getFileInfo:If.hr,removeSavedFile:If.bh,getFileSystemManager:function(){return Sf.ZP.app},saveFileToDisk:dI,getABTestConfig:Ed._,chooseContact:KA,removeUserCloudStorage:function(e){var t=(0,Wf.M)(e.keyList);t?(0,d.YG)("removeUserCloudStorage",e,t):Uf(e)},setUserCloudStorage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(e.KVDataList)?0!==e.KVDataList.length?e.KVDataList.some((function(e){if("object"!==c()(e)||"string"!=typeof e.key||"string"!=typeof e.value)return!0}))?(0,d.YG)("setUserCloudStorage",e,"invalid KVData item"):Vf(e):(0,d.YG)("setUserCloudStorage",e,"KVDataList.length must greater than 0"):(0,d.YG)("setUserCloudStorage",e,"KVDataList must be an Array")},makePhoneCall:zc,makeVoIPCall:Yc,onAppRoute:gr.H,onAppRouteDone:Se.q,onAppEnterBackground:Mt.J,onAppEnterForeground:Qt.T,onAppUnhang:Yn,onPageReload:function(e){Za.call(WP,e)},onPageNotFound:Ir,offPageNotFound:Sr,onThemeChange:kr,offThemeChange:Ar,onCopyUrl:function(e){Qn=e},offCopyUrl:function(){Qn=null},createAnimation:cs,createInnerAudioContext:Ht,getAvailableAudioSources:wf.Qh,onAudioInterruptionBegin:WI.p$,offAudioInterruptionBegin:WI.hA,onAudioInterruptionEnd:WI.aS,offAudioInterruptionEnd:WI.xJ,setInnerAudioOption:wf.nN,createAudioContext:function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(h.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return Wt.call(WP,e,h.Z.currentWebviewId,n)},createVideoContext:function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(h.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return he.Au.call(WP,e,h.Z.currentWebviewId,n)},createMapContext:function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(h.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return ee.call(WP,e,h.Z.currentWebviewId,n)},createCameraContext:function(){return Ue.call(WP,null,h.Z.currentWebviewId)},createLivePlayerContext:function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(h.Z.currentWebviewId)?t.__wxExparserNodeId__:"";return ct.call(WP,e,h.Z.currentWebviewId,n)},createLivePusherContext:function(){return kt.call(WP,null,h.Z.currentWebviewId)},onWebviewEvent:Ya.Z,onNativeEvent:function(e){["onCanvasTouchStart","onCanvasTouchMove","onCanvasTouchEnd"].forEach((function(t){(0,d.jQ)(t,(function(n,r){e({data:n,eventName:t,webviewId:r})}))}))},hideKeyboard:function(e){if(B.gm||B.qB||B.Ae)(0,d.nY)("hideKeyboard",{});else{var t=os();B.wZ&&as&&t===h.Z.currentWebviewId?((0,d.nY)("hideXWebKeyboard",{},[t]),e&&"function"==typeof e.success&&e.success({errMsg:"hideKeyboard:ok"}),e&&"function"==typeof e.complete&&e.complete({errMsg:"hideKeyboard:ok"})):(0,d.IN)("hideKeyboard",e)}},onKeyboardHeightChange:function(e){(0,d.jQ)("onKeyboardHeightChange",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};__errorTracer__.surroundThirdByTryCatch(e,"at onKeyboardHeightChange callback function")(t)}))},offKeyboardHeightChange:function(){(0,d.jQ)("onKeyboardHeightChange",(function(){}))},getPublicLibVersion:Zf,showModal:oP,showToast:tP,hideToast:nP,showLoading:rP,hideLoading:iP,showActionSheet:aP,showShareActionSheet:sP,reportAnalytics:function(e,t){var n=void 0!==__appServiceEngine__&&void 0!==__appServiceEngine__.getCurrentPagesByDomain&&__appServiceEngine__.getCurrentPagesByDomain(""),r=n&&n.pop&&n.pop(),i={business:"mmbizwxaanalytics",eventID:e,data:t||{},page:r&&r.__route__,uid:Date.now().toString(16)+Math.random().toString(16).substr(2),type:1,version:wx&&wx.version&&wx.version.version||0};B.gm||(console.info("[自定义分析] 上报成功"),console.info(i)),(0,d.IN)("reportRealtimeAction",{actionData:JSON.stringify(i)})},reportMonitor:function(e,t){if(e)if(void 0===t&&(t=1),"number"==typeof t){var n=JSON.stringify({business:"mmbizwxamonitor",name:e,value:t,timeStamp:Date.now()});(0,d.IN)("reportRealtimeAction",{actionData:n})}else console.error("wx.reportMonitor: 'value' argument must be a Number.");else console.error("wx.reportMonitor: require 'name' argument.")},getClipboardData:eu,setClipboardData:tu,createSelectorQuery:function(e){return ac(e,"")},createIntersectionObserver:function(e,t){return uc(e,t,"")},createMediaQueryObserver:function(e,t){return fc(e,t,"")},nextTick:vc,updatePerfData:function(e){(0,d.IN)("updatePerfData",e)},traceEvent:function(e){(0,d.IN)("traceEvent",e)},onMemoryWarning:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?hh=e:_h(e)},offMemoryWarning:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?hh=null:mh(e)},reportPerformance:function(e,t,n){qh(e,t,n)},getPerformance:function(){return xg},getUpdateManager:function(){return Ug},updateWeChatApp:Gg,createWorker:function(e,t){var n=Object.assign({workerUrl:e,appid:fe.Z.accountInfo.appId,useExperimentalWorker:!1},t);if(n.useExperimentalWorker=n.useExperimentalWorker&&(0,wo.J)("WeAppWorker"),function(e){for(var t=0;t<sC.length;t++)if(e===sC[t])return!0;return!1}(e))throw new Error('createWorker: Worker "'.concat(e,'" hit black list'));if(oC.Z.size>=aC)throw new Error("createWorker: exceed max concurrent workers limit.");var r=__safeway__.worker.create("workers.js",n),i=r.workerId,o=r.useWKWorker;if(setTimeout((function(){Reporter.reportIDKey({key:o?"createWKWorker":"createNormalWorker"})}),0),i>0)return new iC.Z(i,e,{useWKWorker:o});throw-1===i?new Error('createWorker: Worker "'.concat(e,'" does not exists.')):new Error("createWorker: unknown error.")},voiceSplitJoint:wf.TP,uploadSilkVoice:wf.OP,downloadSilkVoice:wf.FS,getResPath:wf.Jy,setResPath:wf.LU,setCookies:xn.lE,getCookies:xn.$1,faceDetect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("faceDetect",e)},initFaceDetect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("faceProcessInit",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"initFaceDetect:$2")}})},stopFaceDetect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("faceProcessStop",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"stopFaceDetect:$2")}})},createBufferURL:vk,revokeBufferURL:_k,createSignal:mk,bindGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("bindGroup",e)},joinGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B.wZ&&fe.Z.clientVersion<654316032||B.cj?(0,Nr.JM)({apiName:"wxaapi_wxajoinchatroom",reqData:{groupid:e.groupId,nonce_str:e.nonceStr,signature:e.signature},success:function(e){var t=JSON.parse(e.rawData);(0,d.IN)("private_openUrl",{url:t.join_chatroom_url,isNativeStyle:!0})},fail:function(e){var t=e.errMsg;(0,Jn.showToast)({title:t.replace(/^\w+:fail\s+/,""),icon:"none"})},complete:function(){(0,d.FE)({name:"joinGroup",args:e})}}):(0,d.IN)("joinGroup",e)},getLabInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("getLabInfo",e,{labId:""})&&(0,d.IN)("getLabInfo",e)},setLabInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.r3)("setLabInfo",e,{labId:"",enabled:Boolean()})&&(0,d.IN)("setLabInfo",e)},createUDPSocket:bI,createTCPSocket:FI,env:rC,error:nk.vU,isSystemError:nk.g0,isSDKError:nk.Ob,isThirdError:nk.PB,createRewardedVideoAd:function(e){var t=E()({},e);return delete t.pluginId,Rw(t)},createInterstitialAd:function(e){var t=E()({},e);return delete t.pluginId,new ly(t)},createCustomAd:function(e){var t=E()({},e);return delete t.pluginId,new Py(t)},preloadVideoAd:function(e){if(console.warn("注意：wx.preloadVideoAd接口即将下线，请使用wx.preloadAd替换。"),Array.isArray(e))for(var t=0,n=e.length;t<n;t++){var r=e[t];-1===Jr.indexOf(r)?Jr.length>=$r?console.warn("preloadVideoAd最多预加载".concat($r,"个广告单元,").concat(r,"将不被预加载")):(Jr.push(r),Kr(r)):console.warn("preloadVideoAd已预加载过".concat(r,"这个广告单元,请勿重复调用"))}else console.warn("preloadVideoAd参数应为数组")},preloadAd:function(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;t++){var r=e[t],i=r.unitId,o=r.type;-1!==["banner","custom","videoPatch","video"].indexOf(o)?-1===ri.indexOf(i)?(ri.push(i),ii[i]=r,pi(r)):console.warn("preloadAd已预加载过".concat(i,"这个广告单元,请勿重复调用")):console.warn("wx.preloadAd参数有误，请检查type类型")}else console.warn("preloadAd参数应为数组")},getLogManager:wp,getRealtimeLogManager:function(e){e=e||{};var t="develop"===fe.Z.envVersion||"trial"===fe.Z.envVersion;return e.isClientReport=!t,dh(e)},getExptInfo:kk,getExptInfoSync:function(e){var t={},n=Tk(),r=n.exptInfo,i=n.jsDataType;return r&&Array.isArray(r.expt_param_list)&&(Array.isArray(e)||(e=r.expt_param_list.map((function(e){return e.param_name}))),r.expt_param_list.forEach((function(n){-1!==e.indexOf(n.param_name)&&(t[n.param_name]=n.param_value,function(e,t,n){Reporter.reportKeyValue({key:"ExptHit",value:[Ik,Sk,e,encodeURIComponent(JSON.stringify(t)),0,"",n].join(",")})}(n.expt_group_id,n,i))}))),t},reportEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};setTimeout((function(){return xk(e,t)}))},getChannelsLiveInfo:Ak.tT,openChannelsLive:Ak.Xo,openChannelsActivity:Ak.LE,openChannelsUserProfile:Ak.jL,openPublicServicePayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.jumpToken,n=e.destUrl,r=e.openId;if(t&&n&&r){var i="?appid=".concat(fe.Z.accountInfo.appId);i+="&jump_token=".concat(encodeURIComponent(t)),i+="&dest_url=".concat(encodeURIComponent(n)),i+="&openid=".concat(encodeURIComponent(r)),Pk({loading:!0,title:"政务民生缴费"},(function(t){setTimeout((function(){t.close(),(0,d.IN)("private_openUrl",Object.assign({},e,{url:Dk+i,isNativeStyle:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","openPublicServicePayment")}})}),1e3)}))}else(0,d.YG)("openPublicServicePayment",e,"missing arguments")},cloud:__cloudSDK__.getCloudAPI(),serviceMarket:__cloudSDK__.getServiceMarketAPI(),version:"undefined"==typeof __libVersionInfo__?{version:"9.9.9"}:JSON.parse(JSON.stringify(__libVersionInfo__)),chooseShareGroup:gh,enterContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};fe.Z.onReady((function(){if(2!==fe.Z.appType&&7!==fe.Z.appType){var t={errMsg:"enterContact:fail no permission"};return e.fail&&e.fail(t),void(e.complete&&e.complete(t))}e.privateEnterContact=!0,(0,an.L)("appServiceEnterContact",e,[h.Z.currentWebviewId],(function(t){t.errMsg&&(t.errMsg=t.errMsg.replace("privateEnterContact","enterContact")),0===t.errMsg.indexOf("enterContact:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))}))},getGroupEnterInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ca?(0,wo.J)("getGroupToolbarInfo")?Ea({apiName:"webapi_swapopengid",reqData:{chatroom_name:Ca},success:function(t){wxNativeConsole.info("webapi_swapopengid res",t);var n=t.respData,r={};r.iv=n.iv,r.encryptedData=n.encryptedData,n.cloud_id&&(r.cloudID=n.cloud_id),(0,d.FE)({name:Ta,args:e,res:r})},fail:e.fail}):(0,d.YG)(Ta,e,"no permission"):(0,d.YG)(Ta,e,"invalid scene")},preloadWebview:kv,publishWeChatState:xa,lanDebug:Ex},UP=l()(dk);try{for(UP.s();!(zx=UP.n()).done;){var VP=zx.value;if("function"==typeof WP[VP]){var GP=WP[VP];WP[VP]=(0,M.gA)(GP)}}}catch(e){UP.e(e)}finally{UP.f()}function HP(e){jP.__defineGetter__(e,(function(){ma.z.indexOf(e)>=0&&(0,ma.I)({name:e});var t=WP[e],n=this;if("function"==typeof t)return(0,p.Hw)((function(r){if((0,f.yR)(e,""))return zP(e,(0,f.g9)(e,t)).apply(n,arguments);if("Sync"===e.slice(-4))throw new p.l0(e+":fail rejected due to no permission currently");r&&(r.fail||r.complete)&&setTimeout((function(){(0,d.YG)(e,r,"rejected due to no permission currently")}),0)})," at wx.".concat(e));if(!(0,f.yR)(e,""))throw new p.l0(e+":fail rejected due to no permission currently");return t}))}fe.Z.onReady((function(){7===fe.Z.appType&&(jP.openWCPayLQTDetail=sk,jP.openWCPayLQTSave=ck,jP.openWCPayLQTDepositPlan=uk,jP.openWCPayLQTDepositPlanAdd=lk,Object.defineProperty(jP,"reportIDKey",{get:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,d.IN)("reportIDKey",e)}},configurable:!0}))})),["login","getUserInfo","getUserProfile","getShareInfo","getWeRunData"].forEach((function(e){var t=WP[e];WP[e]=(0,M.gA)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,Ce.Vs)(t,e)}))})),(0,kd.X)(WP),(0,d.Ld)("INVOKE_METHOD",(function(e){var t=e.name,n=e.args;WP[t](n,!0)})),(0,d.Ld)("WEBVIEW_ERROR_MSG",(function(e){var t=e.msg;Reporter.triggerErrorMessage(t)}));var ZP=wp(),qP=new WeakMap;function zP(e,t){var n=(0,cC.Tp)(e,"log");if(!n)return t;var r=0,i="request"===e;return function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];Ih("API","wx.".concat(e));var u=i?" with seq ".concat(r):"";r++;var l=a[0];if(1===n&&l&&"object"===c()(l)){if(["success","fail"].forEach((function(t){var n=l[t];"function"==typeof n&&(l[t]=function(r){Ih("API","wx.".concat(e," ").concat(t," callback")),"function"==typeof n&&n.apply(void 0,arguments),ZP&&ZP.logApiInvoke&&ZP.log("wx.".concat(e," ").concat(t," callback")+(r&&r.errMsg?" with msg "+r.errMsg:" ")+u),Sh()})})),"function"==typeof l.complete){var d=l.complete;l.complete=function(){Ih("API","wx.".concat(e," complete callback"));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];d.apply(null,n),Sh()}}}else 3===n&&"function"==typeof l&&(/^off/.test(e)&&qP.has(l)?a[0]=qP.get(l):a[0]=function(){Ih("API","wx.".concat(e," callback"));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l.apply(null,n),Sh()},/^on/.test(e)&&qP.set(l,a[0]));ZP&&ZP.logApiInvoke&&ZP.log("wx.".concat(e," api invoke").concat(u));var f=t.apply(WP,a);return 2===n&&ZP&&ZP.logApiInvoke&&ZP.log("wx.".concat(e," return")),Sh(),f}}for(var YP in WP)HP(YP);!function(e){var t={};fk.forEach((function(n){var r=n.name,i=n.permissionByte,o=e[r];t[r]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(0,wo.J)(i)?o.call.apply(o,[e].concat(n)):(0,d.YG)(r,n[0],"no permission")}.bind(e),n.deprecate?e[r]=function(e,t,n){return function(){pk(e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(n,i)}}(r,t[r],e):delete e[r]})),function(e){var t=__wxLibrary,n=t.onEnd||function(){};t.onEnd=function(){n&&n(),defineMiniProgramFile("__wx__/private-api",(function(t,n){n.exports=e}))}}(t)}(jP),function(e){ik||(ik=!0,e.__defineGetter__("getBaseMethods",(function(){if(ok)return ak})))}(jP);var KP,JP,$P={wx:jP,createPluginWX:QS,buildPluginPrivateApi:function(e){var t={};return JI.forEach((function(n){var r=n.factory(e);t[n.name]=function(t){$I(e,n.permissionBytes,(function(e){e?r(t):(0,f.YG)(n.name,t,"no permission")}))}})),t},createPluginConsole:eC,onAppRouteResized:mr,showShareMenu:_P,setWxInterfaceDisabled:f.AL,setWxInterfaceIsInvokeInTap:f.kV,unsetWxInterfaceIsInvokeInTap:f.JF,_setWxIsInvokeInTapForNavToMiniProgram:ne.Hk,_createSelectorQuery:ac,_createIntersectionObserver:uc,_createMediaQueryObserver:fc,_getOpenerEventChannel:function(){var e=cn;return cn={},e},pluginInfos:tC,_virtualDOMTunnel:(KP=d.nY,JP=d.Ld,{vdSync:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.splice(0,0,"vdSync"),KP.apply(void 0,t)},vdSyncBatch:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.splice(0,0,"vdSyncBatch"),KP.apply(void 0,t)},onVdSync:function(e){JP("vdSync",e)},onVdSyncBatch:function(e){JP("vdSyncBatch",e)}}),traceBeginEvent:Ih,traceEndEvent:Sh,saveExitState:function(e,t,n){var r=fe.Z.global&&fe.Z.global.window&&fe.Z.global.window.restartStrategy,i=fe.Z.page&&fe.Z.page[e+".html"]&&fe.Z.page[e+".html"].window&&fe.Z.page[e+".html"].window.restartStrategy,o=String(i||r||"");if(o){var a={type:o,path:t,extraData:n?n.data:void 0,expireTimeStamp:(n?n.expireTimeStamp:0)||Date.now()+864e5};fe.Z.accountInfo.appId,(0,an.L)("saveExitState",{appId:fe.Z.accountInfo.appId,data:a},[h.Z.currentWebviewId],(function(e){}))}},loadExitState:function(e){(0,an.L)("loadExitState",{appId:fe.Z.accountInfo.appId},[h.Z.currentWebviewId],(function(t){return t&&t.expireTimeStamp>Date.now()?e(t.type,t.path,t.extraData):e()}))},createRouter:Sn,setEnableDebug:qf,_apiData:Lf,loadSubpackage:xc};uC($P,i,WP),uC($P,o,WP),uC($P,a,WP);const XP=$P})(),__appServiceSDK__=r.default})();var wx=__appServiceSDK__.wx;"undefined"!=typeof __exportGlobal__&&(__exportGlobal__.wx=wx);var exparser=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(1),i=n(3),o=n(5),a=n(6),s=n(7),c=n(8),u=n(9),l=n(15),d=n(12),f=n(17),p=n(18),h=n(19),g=n(16),v=n(10),_=n(20),m=n(14),y=n(4),b=n(13),w=n(21);t.FreeTmpl=w,t.precompileTemplate=w.precompiler?w.precompiler.compile:null,t.precompiler=w.precompiler?w.precompiler:null,t.HtmlLLParser=w.htmlParser?w.htmlParser:null,t.LLParser=r,t.dataPath=s,t.dataUtils=o,t.Event=a,t.Element=u,t.TextNode=d,t.NativeNode=f,t.VirtualNode=p,t.ShadowRoot=h,t.Behavior=c,t.Component=l,t.Observer=v,t.DataGroup=g,t.ElementIterator=_,t.FakeDomElement=m,t.registerBehavior=c.create,t.registerElement=l.register,t.createElement=l.create,t.createTextNode=d.create,t.createVirtualNode=p.create,t.appendChild=u.appendChild,t.insertBefore=u.insertBefore,t.removeChild=u.removeChild,t.replaceChild=u.replaceChild,t.addListenerToElement=a.addListenerToElement,t.removeListenerFromElement=a.removeListenerFromElement,t.triggerEvent=a.triggerEvent,t.safeCallback=i.safeCallback,t.addGlobalErrorListener=i.addGlobalErrorListener,t.removeGlobalErrorListener=i.removeGlobalErrorListener,t.globalOptions=y,t.globalState=b,l._setDefaultTemplateEngine(w),(t.updateDefaultComponent=function(){delete l._list[""],l.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})})();var I=function(e){var t="";if(e instanceof exparser.Element&&(e.id&&(t+=' id="'+e.id+'"'),e.slot&&(t+=' slot="'+e.slot+'"'),e.__slotName&&(t+=' name="'+e.__slotName+'"'),e.classList&&(t+=' class="'+e.class+'"'),e.$$&&e.$$.getAttribute("style")&&(t+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof exparser.VirtualNode)return t;if(e instanceof exparser.Component)return l.listPublicProperties(e).forEach((function(n){t+=" "+n+"="+JSON.stringify(e[n])})),t;for(var n=e.attributes,r=0;r<n.length;r++)t+=" "+n[r].name+'="'+n[r].value+'"';return t},S=t.dumpElementToString=function(e,t,n){var r=null;y.hasDOMBackend&&(r=window);var i=0,o="";for(i=n=n||0;i;i--)o+="  ";var a="";if(e instanceof exparser.Element)a+=o+"<"+(e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+I(e)+">",a+=e instanceof exparser.VirtualNode?" [Exp-Virtual]":e instanceof exparser.NativeNode?" [Exp-Native]":" [Exp-Component]",a+="\n"+S(t?e.__wxSlotChildren:e.childNodes,t,n+1);else if(e instanceof exparser.TextNode)a+=o+e.textContent+" [Exp-Text]\n";else if(r&&r.HTMLElement&&e instanceof r.HTMLElement)a+=o+"<"+e.tagName.toLowerCase()+I(e)+"> [DOM-Element]",a+="\n"+S(t&&e.__wxSlotChildren||e.childNodes,t,n+1);else if(r&&r.Text&&e instanceof r.Text)a+=o+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(i=0;i<e.length;i++)a+=S(e[i],t,n);else a=o+"[unknown node]\n";return a};t.dumpElement=function(e,t){console.log(S(e,t))}},function(e,t,n){var r=null,i=function(){},o=i.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return r.llparser_create_descriptor(e,1)},s=function(e,t){var n=r.llparser_create_descriptor(e,0),i=!1;"^"===t[0]&&(i=!0);for(var o=i?1:0;o<t.length;o++){var a=t.charCodeAt(o);if("-"===t[o+1]){var s=t.charCodeAt(o+2);a<=s?(r.llparser_descriptor_add_range(n,a,s),o+=2):r.llparser_descriptor_add_char(n,a)}else r.llparser_descriptor_add_char(n,a)}return i&&r.llparser_descriptor_revert(n),n};i.create=function(e,t,o){r||(r=n(2));var c=new i;o=o||16384;var u=c._llp=r.llparser_create(o,128,128),l={},d={},f="";for(f in l.ALL=r.llparser_create_descriptor(u,0),r.llparser_descriptor_set_all(l.ALL),l.NULL=r.llparser_create_descriptor(u,0),r.llparser_descriptor_set_nil(l.NULL),e)l[f]=a(u);for(f in e)for(var p=e[f],h=l[f],g=0;g<p.length;g++){for(var v=p[g].id,_=p[g].states,m=[],y=0;y<_.length;y++){var b=_[y];l[b]||(l[b]=s(u,b)),m.push(l[b])}var w=0;"_raw"===v?w=1:"_jump"===v?w=65536:"_blank"===v&&(w=65537);var I=r.llparser_add_rule(u,w,h,m.length,m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7]);0===w&&(d[I]=t[v])}return r.llparser_prepare(u),c._inputPtr=r.llparser_get_input_buffer(u),c._resultPtr=r.llparser_get_result(u),c._stateIdMap=l,c._ruleCbMap=d,c._charCountLimit=o,c};i.prototype.parse=function(e,t){var n=Date.now();(function(e,t,n,r){for(var i=r>e.length?e.length:r,o=0;o<i;o++)t[n+o]=e.charCodeAt(o);t[n+i]=0})(t,new Uint16Array(r.memory.buffer),this._inputPtr>>1,this._charCountLimit),o.copyIn=o.copyIn+Date.now()-n,n=Date.now();var i=r.llparser_parse(this._llp,this._stateIdMap[e]);if(o.parse=o.parse+Date.now()-n,n=Date.now(),i)throw new Error("Parsing failed at character position "+(i-1)+' near "'+t.slice(i-20,i)+'"');var a=function(e,t,n,r,i){for(var o=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,c=i.pos,u=!1,l=!1,d=!1;;){var f=t[c],p=t[c+1];if(p<0?(l=!0,p=-p-1):l=!1,f>=0){d=!0;var h=n.slice(f,p);s.c.push(h),u=l}else{if(-1===f&&0===p)break;d=!1;var g=-f,v=p,_={i:s.c.length-(u?1:0),r:g,n:l,cc:v,c:[]};if(u){var m=s.c.length-1,y=s.c[m];_.c.push(y),s.c[m]=_}else s.c.push(_);o.push(s),s=_,u=!1}if(!d||!u)for(;s.c.length===s.cc;){u=s.n;var b=o.pop();if(b.c[s.i]=r[s.r].call(e,s.c),s=b,u)break}c+=2}return a.c[0]}(this,new Int32Array(r.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return o.constructOut=o.constructOut+Date.now()-n,a},i.prototype.destroy=function(){r.llparser_destroy(this._llp)},e.exports=i},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t,n){return _.llparser_create(e,t,n)}function i(e){_.llparser_destroy(e)}function o(e,t){return _.llparser_create_descriptor(e,t)}function a(e){_.llparser_descriptor_set_all(e)}function s(e){_.llparser_descriptor_set_nil(e)}function c(e,t){_.llparser_descriptor_add_char(e,t)}function u(e,t,n){_.llparser_descriptor_add_range(e,t,n)}function l(e){_.llparser_descriptor_revert(e)}function d(e,t,n,r,i,o,a,s,c,u,l,d){return _.llparser_add_rule(e,t,n,r,i,o,a,s,c,u,l,d)}function f(e){_.llparser_prepare(e)}function p(e,t){return _.llparser_parse(e,t)}function h(e){return _.llparser_get_input_buffer(e)}function g(e){return _.llparser_get_result(e)}function v(){_.wasm_main()}n.r(t),n.d(t,"llparser_create",(function(){return r})),n.d(t,"llparser_destroy",(function(){return i})),n.d(t,"llparser_create_descriptor",(function(){return o})),n.d(t,"llparser_descriptor_set_all",(function(){return a})),n.d(t,"llparser_descriptor_set_nil",(function(){return s})),n.d(t,"llparser_descriptor_add_char",(function(){return c})),n.d(t,"llparser_descriptor_add_range",(function(){return u})),n.d(t,"llparser_descriptor_revert",(function(){return l})),n.d(t,"llparser_add_rule",(function(){return d})),n.d(t,"llparser_prepare",(function(){return f})),n.d(t,"llparser_parse",(function(){return p})),n.d(t,"llparser_get_input_buffer",(function(){return h})),n.d(t,"llparser_get_result",(function(){return g})),n.d(t,"wasm_main",(function(){return v})),n.d(t,"memory",(function(){return m}));var _=n(1),m=_.memory;_.__wbindgen_start()},function(e,t,n){"use strict";n.r(t),n.d(t,"memory",(function(){return o})),n.d(t,"rust_calloc",(function(){return a})),n.d(t,"rust_free",(function(){return s})),n.d(t,"llparser_create",(function(){return c})),n.d(t,"llparser_destroy",(function(){return u})),n.d(t,"llparser_create_descriptor",(function(){return l})),n.d(t,"llparser_descriptor_set_all",(function(){return d})),n.d(t,"llparser_descriptor_set_nil",(function(){return f})),n.d(t,"llparser_descriptor_add_char",(function(){return p})),n.d(t,"llparser_descriptor_add_range",(function(){return h})),n.d(t,"llparser_descriptor_revert",(function(){return g})),n.d(t,"llparser_add_rule",(function(){return v})),n.d(t,"llparser_prepare",(function(){return _})),n.d(t,"llparser_parse",(function(){return m})),n.d(t,"llparser_get_input_buffer",(function(){return y})),n.d(t,"llparser_get_result",(function(){return b})),n.d(t,"wasm_main",(function(){return w})),n.d(t,"__wbindgen_start",(function(){return I}));var r=new ArrayBuffer(1114112),i=function(e,t,n){function r(e){var t=0,n=0,r=0,i=0,o=0,c=0,u=0;n=(t=e+-8|0)+(e=-8&(i=h[e+-4>>2]))|0;e:{t:{n:{r:{i:if(!(1&i)){if(!(3&i))break r;if(e=(i=h[t>>2])+e|0,(0|(t=t-i|0))==h[262246]){if(3!=(3&h[n+4>>2]))break i;return h[262244]=e,h[n+4>>2]=-2&h[n+4>>2],h[t+4>>2]=1|e,void(h[e+t>>2]=e)}i>>>0>=256?s(t):(0|(r=h[t+8>>2]))==(0|(o=h[t+12>>2]))?(c=1048576,u=h[262144]&d(i>>>3),h[c>>2]=u):(h[r+12>>2]=o,h[o+8>>2]=r)}if(2&(i=h[n+4>>2]))h[n+4>>2]=-2&i,h[t+4>>2]=1|e,h[e+t>>2]=e;else{i:{if(h[262247]!=(0|n)){if((0|n)!=h[262246])break i;return h[262246]=t,e=h[262244]+e|0,h[262244]=e,h[t+4>>2]=1|e,void(h[e+t>>2]=e)}if(h[262247]=t,e=h[262245]+e|0,h[262245]=e,h[t+4>>2]=1|e,(0|t)==h[262246]&&(h[262244]=0,h[262246]=0),(n=h[262254])>>>0>=e>>>0)break r;if(!(e=h[262247]))break r;o:if(!((i=h[262245])>>>0<41))for(t=1049e3;;){if((r=h[t>>2])+h[t+4>>2]>>>0>e>>>0&&r>>>0<=e>>>0)break o;if(!(t=h[t+8>>2]))break}if(r=4095,e=h[262252]){for(t=0;t=t+1|0,e=h[e+8>>2];);r=t>>>0>4095?t:4095}if(h[262256]=r,i>>>0<=n>>>0)break r;return void(h[262254]=-1)}if(e=(r=-8&i)+e|0,r>>>0>=256?s(n):(0|(r=h[n+12>>2]))==(0|(n=h[n+8>>2]))?(c=1048576,u=h[262144]&d(i>>>3),h[c>>2]=u):(h[n+12>>2]=r,h[r+8>>2]=n),h[t+4>>2]=1|e,h[e+t>>2]=e,h[262246]==(0|t)){h[262244]=e;break r}}if(e>>>0<256)break n;if(a(t,e),e=h[262256]+-1|0,h[262256]=e,!e){if(e=h[262252])break t;e=4095;break e}}return}return e=1048584+((n=e>>>3)<<3)|0,i=h[262144],n=1<<(31&n),r=h[e+8>>2],i&n||(h[262144]=n|i,r=e),n=r,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,void(h[t+8>>2]=n)}for(t=0;t=t+1|0,e=h[e+8>>2];);e=t>>>0>4095?t:4095}h[262256]=e}function i(e,t,n,r,o){var a;if(b=a=b-48|0,h[a+44>>2]=e,h[a+40>>2]=t,h[a+36>>2]=n,h[a+32>>2]=r,h[a+28>>2]=o,h[h[a+40>>2]>>2]!=h[a+36>>2])for(h[h[a+40>>2]>>2]=h[a+36>>2],h[a+24>>2]=h[h[a+40>>2]+136>>2],h[a+20>>2]=1&(0!=h[a+28>>2]^-1^-1);h[a+24>>2];){for(h[a+20>>2]||(h[a+28>>2]=h[a+24>>2]),h[a+16>>2]=h[h[h[a+24>>2]>>2]+8>>2],1==h[h[a+16>>2]+4>>2]&&i(h[a+44>>2],h[a+16>>2],h[a+36>>2],h[a+32>>2],h[a+28>>2]),h[a+12>>2]=0;!(h[a+12>>2]>=128);)g[h[a+12>>2]+(h[a+16>>2]+8|0)|0]&&(_[h[a+28>>2]>>2]>=_[h[a+32>>2]+(h[a+12>>2]<<2)>>2]&&h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]||(h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]=h[h[a+28>>2]>>2])),h[a+12>>2]=h[a+12>>2]+1;h[a+24>>2]=h[h[a+24>>2]+4>>2]}b=a+48|0}function o(e,t,n,r){var i;for(h[44+(i=b-48|0)>>2]=e,h[i+40>>2]=t,h[i+36>>2]=n,h[i+32>>2]=r,h[i+28>>2]=h[h[i+40>>2]+136>>2];h[i+28>>2];){if(h[i+24>>2]=h[h[h[i+28>>2]>>2]+8>>2],h[i+24>>2]==h[i+40>>2])for(h[i+20>>2]=h[h[h[i+28>>2]>>2]+12>>2],h[i+16>>2]=0;!(h[i+16>>2]>=128);){e:{if(1!=h[h[i+20>>2]+4>>2]){if(!g[h[i+16>>2]+(h[i+20>>2]+8|0)|0])break e}else if(h[i+12>>2]=h[h[i+44>>2]+32>>2]+((h[i+20>>2]-h[h[i+44>>2]+24>>2]|0)/140<<9),!h[h[i+12>>2]+(h[i+16>>2]<<2)>>2])break e;_[h[i+28>>2]>>2]>=_[h[i+32>>2]+(h[i+16>>2]<<2)>>2]&&h[h[i+32>>2]+(h[i+16>>2]<<2)>>2]||(h[h[i+32>>2]+(h[i+16>>2]<<2)>>2]=h[h[i+28>>2]>>2])}h[i+16>>2]=h[i+16>>2]+1}h[i+28>>2]=h[h[i+28>>2]+4>>2]}}function a(e,t){var n=0,r=0,i=0,o=0;h[e+16>>2]=0,h[e+20>>2]=0,i=e,n=0,(r=t>>>8)&&(n=31,t>>>0>16777215||(n=62+((t>>>(6-(r=y(r))&31)&1)-(r<<1)|0)|0)),h[i+28>>2]=n,i=1048848+(n<<2)|0;e:{t:{n:{r:{if((o=h[262145])&(r=1<<(31&n))){if(r=h[i>>2],(-8&h[r+4>>2])!=(0|t))break r;n=r;break n}h[262145]=r|o,h[i>>2]=e,h[e+24>>2]=i;break e}for(i=t<<(31==(0|n)?0:25-(n>>>1)&31);;){if(!(n=h[(o=16+((i>>>29&4)+r|0)|0)>>2]))break t;if(i<<=1,r=n,(-8&h[n+4>>2])==(0|t))break}}return t=h[n+8>>2],h[t+12>>2]=e,h[n+8>>2]=e,h[e+24>>2]=0,h[e+12>>2]=n,void(h[e+8>>2]=t)}h[o>>2]=e,h[e+24>>2]=r}h[e+12>>2]=e,h[e+8>>2]=e}function s(e){var t,n=0,r=0,i=0,o=0,a=0,s=0;t=h[e+24>>2];e:{t:{if((0|e)==(0|(n=h[e+12>>2]))){if(i=h[(n=e+20|0)>>2],r=h[(i?20:16)+e>>2])break t;n=0;break e}r=h[e+8>>2],h[r+12>>2]=n,h[n+8>>2]=r;break e}for(i=i?n:e+16|0;o=i,(r=h[(i=(n=r)+20|0)>>2])||(i=n+16|0,r=h[n+16>>2]),r;);h[o>>2]=0}e:if(t){r=1048848+(h[e+28>>2]<<2)|0;t:{if((0|e)==h[r>>2]){if(h[r>>2]=n,n)break t;return a=1048580,s=h[262145]&d(h[e+28>>2]),void(h[a>>2]=s)}if(h[(h[t+16>>2]==(0|e)?16:20)+t>>2]=n,!n)break e}h[n+24>>2]=t,(r=h[e+16>>2])&&(h[n+16>>2]=r,h[r+24>>2]=n),(e=h[e+20>>2])&&(h[n+20>>2]=e,h[e+24>>2]=n)}}function c(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,n=0,r=0,i=0,o=0,c=0,u=0,p=0,g=0,v=0,m=0;e:{t:{n:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(i=-8&(e=e+11|0),!(p=h[262145]))break n;n=0-i|0,u=0,(e>>>=8)&&(u=31,i>>>0>16777215||(u=62+((i>>>(6-(e=y(e))&31)&1)-(e<<1)|0)|0));r:{i:{if(e=h[1048848+(u<<2)>>2]){for(o=i<<(31==(0|u)?0:25-(u>>>1)&31);;){if(!((c=-8&h[e+4>>2])>>>0<i>>>0||(c=c-i|0)>>>0>=n>>>0||(r=e,n=c))){n=0;break i}if(c=h[e+20>>2],e=h[16+((o>>>29&4)+e|0)>>2],t=c&&(0|c)!=(0|e)?c:t,o<<=1,!e)break}if(t){e=t;break i}if(r)break r}if(r=0,!(e=(0-(e=2<<(31&u))|e)&p))break n;if(!(e=h[1048848+(l(e&0-e)<<2)>>2]))break n}for(;r=(c=(o=(t=-8&h[e+4>>2])-i|0)>>>0<n>>>0&t>>>0>=i>>>0)?e:r,n=c?o:n,e=(t=h[e+16>>2])||h[e+20>>2];);if(!r)break n}if(n>>>0>=(e=h[262244])-i>>>0&&e>>>0>=i>>>0)break n;s(r);r:if(n>>>0>=16){if(h[r+4>>2]=3|i,h[4+(t=r+i|0)>>2]=1|n,h[t+n>>2]=n,n>>>0>=256){a(t,n);break r}e=1048584+((n>>>=3)<<3)|0,o=h[262144],n=1<<(31&n),u=h[e+8>>2],o&n||(h[262144]=n|o,u=e),n=u,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=n}else e=n+i|0,h[r+4>>2]=3|e,h[4+(e=e+r|0)>>2]=1|h[e+4>>2];return r+8|0}r:{i:{if(!(3&(e=(t=h[262144])>>>(r=31&(n=(i=e>>>0<11?16:e+11&-8)>>>3))))){if(i>>>0<=_[262244])break n;if(e)break i;if(!(e=h[262145]))break n;for(t=h[1048848+(l(e&0-e)<<2)>>2],n=(-8&h[t+4>>2])-i|0,o=t;;){if(!(e=h[t+16>>2])&&!(e=h[t+20>>2]))break r;n=(t=(r=(-8&h[e+4>>2])-i|0)>>>0<n>>>0)?r:n,o=t?e:o,t=e}}n=(e=h[1048592+(c=(r=n+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(o=h[e+8>>2]))==(0|(c=c+1048584|0))?(v=1048576,m=d(r)&t,h[v>>2]=m):(h[o+12>>2]=c,h[c+8>>2]=o),t=r<<3,h[e+4>>2]=3|t,h[4+(e=e+t|0)>>2]=1|h[e+4>>2];break t}return r=l(0-(e=(n=e<<r)&(0-(e=2<<r)|e))&e),e=h[1048592+(o=r<<3)>>2],(0|(n=h[e+8>>2]))==(0|(o=o+1048584|0))?(v=1048576,m=d(r)&t,h[v>>2]=m):(h[n+12>>2]=o,h[o+8>>2]=n),o=e+8|0,h[e+4>>2]=3|i,n=(t=r<<3)-i|0,h[4+(c=e+i|0)>>2]=1|n,h[e+t>>2]=n,(e=h[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=h[262246],i=h[262144],r=1<<(31&r),u=h[e+8>>2],i&r||(h[262144]=r|i,u=e),r=u,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=r),h[262246]=c,h[262244]=n,o}return s(o),n>>>0>=16?(h[o+4>>2]=3|i,h[4+(c=i+o|0)>>2]=1|n,h[n+c>>2]=n,(e=h[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=h[262246],i=h[262144],r=1<<(31&r),u=h[e+8>>2],i&r||(h[262144]=r|i,u=e),r=u,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=r),h[262246]=c,h[262244]=n):(e=n+i|0,h[o+4>>2]=3|e,h[4+(e=e+o|0)>>2]=1|h[e+4>>2]),o+8|0}n:{r:{i:{o:{if((t=h[262244])>>>0<i>>>0){if((e=h[262245])>>>0>i>>>0)break e;if(n=0,-1==(0|(t=f((e=i+65583|0)>>>16))))break t;if(!(r=t<<16))break t;if(e=(o=-65536&e)+h[262248]|0,h[262248]=e,t=h[262249],h[262249]=t>>>0>e>>>0?t:e,!(n=h[262247]))break o;for(e=1049e3;;){if((0|r)==((t=h[e>>2])+(c=h[e+4>>2])|0))break i;if(!(e=h[e+8>>2]))break}break r}return e=h[262246],(r=t-i|0)>>>0<=15?(h[262246]=0,h[262244]=0,h[e+4>>2]=3|t,i=4+(t=e+t|0)|0,n=1|h[t+4>>2]):(h[262244]=r,n=e+i|0,h[262246]=n,h[n+4>>2]=1|r,h[e+t>>2]=r,n=3|i,i=e+4|0),h[i>>2]=n,e+8|0}for((e=h[262255])>>>0<=r>>>0&&e||(h[262255]=r),e=0,h[262256]=4095,h[262251]=o,h[262250]=r,h[262253]=0;t=e+1048584|0,h[e+1048592>>2]=t,h[e+1048596>>2]=t,256!=(0|(e=e+8|0)););h[262247]=r,e=o+-40|0,h[262245]=e,h[r+4>>2]=1|e,h[4+(e+r|0)>>2]=40,h[262254]=2097152;break n}if(!(h[e+12>>2]|r>>>0<=n>>>0|t>>>0>n>>>0)){h[e+4>>2]=o+c,t=(e=h[262247])+15&-8,h[262247]=t+-8,n=8+((r=o+h[262245]|0)+(e-t|0)|0)|0,h[262245]=n,h[t+-4>>2]=1|n,h[4+(e+r|0)>>2]=40,h[262254]=2097152;break n}}e=h[262255],h[262255]=e>>>0<r>>>0?e:r,t=r+o|0,e=1049e3;r:{for(;;){if((0|t)!=h[e>>2]){if(e=h[e+8>>2])continue;break r}break}if(!h[e+12>>2]){h[e>>2]=r,h[e+4>>2]=o+h[e+4>>2],h[r+4>>2]=3|i,o=r+i|0,i=(t-r|0)-i|0;i:{o:{if((0|t)!=h[262247]){if(h[262246]==(0|t))break o;if(1==(3&(e=h[t+4>>2]))&&((n=-8&e)>>>0>=256?s(t):(0|(c=h[t+12>>2]))==(0|(u=h[t+8>>2]))?(v=1048576,m=h[262144]&d(e>>>3),h[v>>2]=m):(h[u+12>>2]=c,h[c+8>>2]=u),i=n+i|0,t=t+n|0),h[t+4>>2]=-2&h[t+4>>2],h[o+4>>2]=1|i,h[i+o>>2]=i,i>>>0>=256){a(o,i);break i}e=1048584+((t=i>>>3)<<3)|0,n=h[262144],t=1<<(31&t),u=h[e+8>>2],n&t||(h[262144]=t|n,u=e),n=u,h[e+8>>2]=o,h[n+12>>2]=o,h[o+12>>2]=e,h[o+8>>2]=n;break i}h[262247]=o,e=h[262245]+i|0,h[262245]=e,h[o+4>>2]=1|e;break i}h[262246]=o,e=h[262244]+i|0,h[262244]=e,h[o+4>>2]=1|e,h[e+o>>2]=e}return r+8|0}}for(e=1049e3;!((t=h[e>>2])>>>0<=n>>>0&&(c=t+h[e+4>>2]|0)>>>0>n>>>0);)e=h[e+8>>2];for(h[262247]=r,e=o+-40|0,h[262245]=e,h[r+4>>2]=1|e,h[4+(e+r|0)>>2]=40,h[262254]=2097152,h[(t=(e=(c+-32&-8)-8|0)>>>0<n+16>>>0?n:e)+4>>2]=27,e=h[262250],u=h[262251],g=h[262253],h[(p=t+16|0)>>2]=h[262252],h[p+4>>2]=g,h[t+8>>2]=e,h[t+12>>2]=u,h[262251]=o,h[262250]=r,h[262252]=t+8,h[262253]=0,e=t+28|0;h[e>>2]=7,c>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|n)&&(h[t+4>>2]=-2&h[t+4>>2],e=t-n|0,h[n+4>>2]=1|e,h[t>>2]=e,e>>>0>=256?a(n,e):(e=1048584+((t=e>>>3)<<3)|0,r=h[262144],t=1<<(31&t),u=h[e+8>>2],r&t||(h[262144]=t|r,u=e),t=u,h[e+8>>2]=n,h[t+12>>2]=n,h[n+12>>2]=e,h[n+8>>2]=t))}if(n=0,!((e=h[262245])>>>0<=i>>>0))break e}return n}return t=e-i|0,h[262245]=t,r=(e=h[262247])+i|0,h[262247]=r,h[r+4>>2]=1|t,h[e+4>>2]=3|i,e+8|0}(e))|!(3&g[t+-4|0])||function(e,t){if(t)for(;p[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(m(e|=0,t|=0))}function u(){}function l(e){return e?31-y(e+-1^e)|0:32}function d(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function f(t){t|=0;var r=0|n.byteLength/65536,i=r+t|0;if(r<i&&i<65536){var o=new ArrayBuffer(m(i,65536)),a=new e.Int8Array(o);a.set(p),p=a,p=new e.Int8Array(o),new e.Int16Array(o),h=new e.Int32Array(o),g=new e.Uint8Array(o),v=new e.Uint16Array(o),_=new e.Uint32Array(o),new e.Float32Array(o),new e.Float64Array(o),n=o}return r}var p=new e.Int8Array(n),h=(new e.Int16Array(n),new e.Int32Array(n)),g=new e.Uint8Array(n),v=new e.Uint16Array(n),_=new e.Uint32Array(n),m=(new e.Float32Array(n),new e.Float64Array(n),e.Math.imul),y=(e.Math.fround,e.Math.abs,e.Math.clz32),b=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);return{memory:Object.create(Object.prototype,{grow:{value:f},buffer:{get:function(){return n}}}),rust_calloc:c,rust_free:function(e){r(e|=0)},llparser_create:function(e,t,n){return 0|function(e,t,n){var r,i,o;return b=r=b-32|0,h[r+28>>2]=e,h[r+24>>2]=t,h[r+20>>2]=n,e=r,t=h[r+28>>2]?h[r+28>>2]:256,h[e+28>>2]=t,e=r,t=h[r+24>>2]?h[r+24>>2]:256,h[e+24>>2]=t,e=r,t=h[r+20>>2]?h[r+20>>2]:256,h[e+20>>2]=t,i=r,o=c(((((((m(h[r+24>>2],140)+52|0)+m(h[r+20>>2],44)|0)+(h[r+24>>2]<<9)|0)+(h[r+24>>2]<<9)|0)+m(h[r+20>>2],h[r+24>>2]<<3)|0)+(h[r+28>>2]<<1)|0)+(h[r+28>>2]<<3)|0,1),h[i+16>>2]=o,h[h[r+16>>2]+12>>2]=h[r+28>>2],h[h[r+16>>2]+16>>2]=h[r+24>>2],h[h[r+16>>2]+20>>2]=h[r+20>>2],h[h[r+16>>2]+4>>2]=0,h[h[r+16>>2]>>2]=0,h[h[r+16>>2]+8>>2]=0,h[r+12>>2]=h[r+16>>2]+52,h[h[r+16>>2]+24>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+m(h[r+24>>2],140),h[h[r+16>>2]+28>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+m(h[r+20>>2],44),h[h[r+16>>2]+32>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+(h[r+24>>2]<<9),h[h[r+16>>2]+36>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+(h[r+24>>2]<<9),h[h[r+16>>2]+40>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+m(h[r+20>>2],h[r+24>>2]<<3),h[h[r+16>>2]+44>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+(h[r+28>>2]<<1),h[h[r+16>>2]+48>>2]=h[r+12>>2],b=r+32|0,h[r+16>>2]}(e|=0,t|=0,n|=0)},llparser_destroy:function(e){!function(e){var t;b=t=b-16|0,h[t+12>>2]=e,r(h[t+12>>2]),b=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var n,r;return h[12+(n=b-16|0)>>2]=e,h[n+8>>2]=t,t=h[h[n+12>>2]+24>>2],r=h[n+12>>2],e=h[r+4>>2],h[r+4>>2]=e+1,h[n+4>>2]=t+m(e,140),h[h[n+4>>2]+4>>2]=h[n+8>>2]?1:0,h[n+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-1,p[h[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-2,p[h[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var n;h[12+(n=b-16|0)>>2]=e,h[n+8>>2]=t,p[h[n+8>>2]+(h[n+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,n){!function(e,t,n){var r;for(h[12+(r=b-16|0)>>2]=e,h[r+8>>2]=t,h[r+4>>2]=n,h[r>>2]=h[r+8>>2];!(h[r>>2]>h[r+4>>2]);)p[h[r>>2]+(h[r+12>>2]+8|0)|0]=1,h[r>>2]=h[r>>2]+1}(e|=0,t|=0,n|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(h[12+(t=b-16|0)>>2]=e,h[t+8>>2]=1;!(h[t+8>>2]>=127);)p[h[t+8>>2]+(h[t+12>>2]+8|0)|0]=1&(0!=g[h[t+8>>2]+(h[t+12>>2]+8|0)|0]^-1),h[t+8>>2]=h[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,n,r,i,o,a,s,c,u,l,d){return 0|function(e,t,n,r,i,o,a,s,c,u,l,d){var f;return b=f=b+-64|0,h[f+60>>2]=e,h[f+56>>2]=t,h[f+52>>2]=n,h[f+48>>2]=r,h[f+44>>2]=i,h[f+40>>2]=o,h[f+36>>2]=a,h[f+32>>2]=s,h[f+28>>2]=c,h[f+24>>2]=u,h[f+20>>2]=l,h[f+16>>2]=d,t=h[h[f+60>>2]+28>>2],n=h[f+60>>2],e=h[n>>2],h[n>>2]=e+1,h[f+12>>2]=t+m(e,44),h[h[f+12>>2]>>2]=h[f+52>>2],h[h[f+12>>2]+4>>2]=h[f+48>>2],h[f+48>>2]>0&&(h[h[f+12>>2]+8>>2]=h[f+44>>2]),h[f+48>>2]>1&&(h[h[f+12>>2]+12>>2]=h[f+40>>2]),h[f+48>>2]>2&&(h[h[f+12>>2]+16>>2]=h[f+36>>2]),h[f+48>>2]>3&&(h[h[f+12>>2]+20>>2]=h[f+32>>2]),h[f+48>>2]>4&&(h[h[f+12>>2]+24>>2]=h[f+28>>2]),h[f+48>>2]>5&&(h[h[f+12>>2]+28>>2]=h[f+24>>2]),h[f+48>>2]>6&&(h[h[f+12>>2]+32>>2]=h[f+20>>2]),h[f+48>>2]>7&&(h[h[f+12>>2]+36>>2]=h[f+16>>2]),h[h[f+12>>2]+40>>2]=h[f+56>>2],h[f+48>>2]>0&&function(e,t,n){var r;h[28+(r=b-32|0)>>2]=e,h[r+24>>2]=t,h[r+20>>2]=n,h[r+16>>2]=(h[r+20>>2]-h[h[r+28>>2]+24>>2]|0)/140,1==h[h[r+20>>2]+4>>2]&&(t=h[h[r+28>>2]+40>>2],n=h[r+28>>2],e=h[n+8>>2],h[n+8>>2]=e+1,h[r+12>>2]=t+(e<<3),h[h[r+12>>2]>>2]=h[r+24>>2],h[h[r+12>>2]+4>>2]=h[h[r+20>>2]+136>>2],h[h[r+20>>2]+136>>2]=h[r+12>>2])}(h[f+60>>2],h[f+12>>2],h[f+52>>2]),b=f- -64|0,h[f+12>>2]}(e|=0,t|=0,n|=0,r|=0,i|=0,o|=0,a|=0,s|=0,c|=0,u|=0,l|=0,d|=0)},llparser_prepare:function(e){!function(e){var t;for(b=t=b-32|0,h[t+28>>2]=e,h[t+24>>2]=0;!(h[t+24>>2]>=h[h[t+28>>2]+4>>2]);)h[t+20>>2]=h[h[t+28>>2]+24>>2]+m(h[t+24>>2],140),1==h[h[t+20>>2]+4>>2]&&i(h[t+28>>2],h[t+20>>2],h[t+20>>2],h[h[t+28>>2]+32>>2]+(h[t+24>>2]<<9)|0,0),h[t+24>>2]=h[t+24>>2]+1;for(h[t+16>>2]=0;!(h[t+16>>2]>=h[h[t+28>>2]+4>>2]);)h[t+12>>2]=h[h[t+28>>2]+24>>2]+m(h[t+16>>2],140),1==h[h[t+12>>2]+4>>2]&&(h[h[t+12>>2]>>2]=0,o(h[t+28>>2],h[t+12>>2],h[t+12>>2],h[h[t+28>>2]+36>>2]+(h[t+16>>2]<<9)|0)),h[t+16>>2]=h[t+16>>2]+1;b=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var n,r,i;return b=n=b-32|0,h[n+24>>2]=e,h[n+20>>2]=t,h[n+16>>2]=0,h[n+12>>2]=0,r=n,i=function e(t,n,r,i,o,a,s){var c,u=0,l=0;b=c=b-96|0,h[c+88>>2]=t,h[c+84>>2]=n,h[c+80>>2]=r,h[c+76>>2]=i,h[c+72>>2]=o,h[c+68>>2]=a,h[c+64>>2]=s,h[c+60>>2]=v[h[c+80>>2]+(h[h[c+76>>2]>>2]<<1)>>1],_[c+60>>2]>=128&&(h[c+60>>2]=1);e:if(h[h[c+72>>2]>>2]>(h[c+64>>2]-4|0))h[c+92>>2]=-1;else if(1==h[h[c+84>>2]+4>>2])if(h[c+56>>2]=h[h[c+76>>2]>>2],h[c+52>>2]=h[h[c+72>>2]>>2],h[c+48>>2]=0,h[c+44>>2]=0,h[c+40>>2]=h[h[c+88>>2]+32>>2]+((h[c+84>>2]-h[h[c+88>>2]+24>>2]|0)/140<<9),h[c+36>>2]=0,!h[h[c+40>>2]+(h[c+60>>2]<<2)>>2]|_[c+60>>2]<=0|_[c+60>>2]>=127?!h[c+60>>2]|!h[h[c+40>>2]+508>>2]?h[h[c+40>>2]>>2]&&(h[c+36>>2]=h[h[c+40>>2]>>2]):h[c+36>>2]=h[h[c+40>>2]+508>>2]:h[c+36>>2]=h[h[c+40>>2]+(h[c+60>>2]<<2)>>2],h[c+36>>2]){for(h[c+68>>2]||h[h[c+36>>2]+40>>2]||(h[c+48>>2]=h[h[c+72>>2]>>2],t=h[c+72>>2],h[t>>2]=h[t>>2]+2),h[c+32>>2]=0;h[c+32>>2]<h[h[c+36>>2]+4>>2];){if(h[c+28>>2]=h[c+68>>2],h[c+68>>2]||!h[h[c+36>>2]+40>>2]|h[h[c+36>>2]+40>>2]==(h[c+32>>2]+65536|0)||(h[c+28>>2]=1),u=c,l=e(h[c+88>>2],h[(h[c+36>>2]+8|0)+(h[c+32>>2]<<2)>>2],h[c+80>>2],h[c+76>>2],h[c+72>>2],h[c+28>>2],h[c+64>>2]),h[u+24>>2]=l,h[c+24>>2]<0){h[c+92>>2]=-1;break e}h[c+68>>2]|h[h[c+36>>2]+40>>2]!=(h[c+32>>2]+65536|0)||(h[c+44>>2]=h[c+24>>2]),h[c+32>>2]=h[c+32>>2]+1}for(h[c+68>>2]||(h[h[c+36>>2]+40>>2]?1==h[h[c+36>>2]+40>>2]&&(n=h[c+56>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n,h[c+44>>2]=h[h[c+72>>2]>>2],n=h[h[c+76>>2]>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n):(h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]<<2)>>2]=0-h[c+36>>2],h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]+1<<2)>>2]=h[h[c+36>>2]+4>>2],h[c+44>>2]=h[c+48>>2]+1));;){if(h[h[c+72>>2]>>2]>(h[c+64>>2]-4|0)){h[c+92>>2]=-1;break e}if(h[c+20>>2]=h[h[c+88>>2]+36>>2]+((h[c+84>>2]-h[h[c+88>>2]+24>>2]|0)/140<<9),h[c+16>>2]=0,h[c+60>>2]=v[h[c+80>>2]+(h[h[c+76>>2]>>2]<<1)>>1],_[c+60>>2]>=128&&(h[c+60>>2]=1),!h[h[c+20>>2]+(h[c+60>>2]<<2)>>2]|_[c+60>>2]<=0|_[c+60>>2]>=127?!h[c+60>>2]|!h[h[c+20>>2]+508>>2]||(h[c+16>>2]=h[h[c+20>>2]+508>>2]):h[c+16>>2]=h[h[c+20>>2]+(h[c+60>>2]<<2)>>2],!h[c+16>>2])break;for(h[c+68>>2]||(h[h[c+16>>2]+40>>2]?65536!=h[h[c+16>>2]+40>>2]&&(h[h[c+72>>2]>>2]=h[c+52>>2]):(h[h[h[c+88>>2]+48>>2]+(h[c+44>>2]<<2)>>2]=(0-h[h[h[c+88>>2]+48>>2]+(h[c+44>>2]<<2)>>2]|0)-1,h[c+48>>2]=h[h[c+72>>2]>>2],t=h[c+72>>2],h[t>>2]=h[t>>2]+2)),h[c+12>>2]=1;h[c+12>>2]<h[h[c+16>>2]+4>>2];){if(h[c+8>>2]=h[c+68>>2],h[c+68>>2]||!h[h[c+16>>2]+40>>2]|h[h[c+16>>2]+40>>2]==(h[c+12>>2]+65536|0)||(h[c+8>>2]=1),u=c,l=e(h[c+88>>2],h[(h[c+16>>2]+8|0)+(h[c+12>>2]<<2)>>2],h[c+80>>2],h[c+76>>2],h[c+72>>2],h[c+8>>2],h[c+64>>2]),h[u+4>>2]=l,h[c+4>>2]<0){h[c+92>>2]=-1;break e}h[c+68>>2]|h[h[c+16>>2]+40>>2]!=(h[c+12>>2]+65536|0)||(h[c+44>>2]=h[c+4>>2]),h[c+12>>2]=h[c+12>>2]+1}h[c+68>>2]||(h[h[c+16>>2]+40>>2]?1==h[h[c+16>>2]+40>>2]&&(n=h[c+56>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n,h[c+44>>2]=h[h[c+72>>2]>>2],n=h[h[c+76>>2]>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n):(h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]<<2)>>2]=0-h[c+16>>2],h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]+1<<2)>>2]=h[h[c+16>>2]+4>>2],h[c+44>>2]=h[c+48>>2]+1))}h[c+92>>2]=h[c+44>>2]}else h[c+92>>2]=-1;else{if(h[c+60>>2]&&(-1==h[h[c+84>>2]+4>>2]&&(t=h[c+76>>2],h[t>>2]=h[t>>2]+1),!h[h[c+84>>2]+4>>2])){if(!g[h[c+60>>2]+(h[c+84>>2]+8|0)|0]){h[c+92>>2]=-1;break e}t=h[c+76>>2],h[t>>2]=h[t>>2]+1}h[c+68>>2]||(n=h[h[c+76>>2]>>2],r=h[h[c+84>>2]+4>>2],i=h[h[c+88>>2]+48>>2],o=h[c+72>>2],t=h[o>>2],h[o>>2]=t+1,h[i+(t<<2)>>2]=n-(-2==(0|r)?0:1),n=h[h[c+76>>2]>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n),h[c+92>>2]=h[h[c+72>>2]>>2]-1}return b=c+96|0,h[c+92>>2]}(h[n+24>>2],h[n+20>>2],h[h[n+24>>2]+44>>2],n+12|0,n+16|0,0,h[h[n+24>>2]+12>>2]<<1),h[r+8>>2]=i,e=h[h[n+24>>2]+48>>2],t=h[n+16>>2],h[n+16>>2]=t+1,h[e+(t<<2)>>2]=-1,e=h[h[n+24>>2]+48>>2],t=h[n+16>>2],h[n+16>>2]=t+1,h[e+(t<<2)>>2]=0,v[h[h[n+24>>2]+44>>2]+(h[n+12>>2]<<1)>>1]|h[n+8>>2]<0?h[n+28>>2]=h[n+12>>2]+1:h[n+28>>2]=0,b=n+32|0,h[n+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+48>>2]},wasm_main:u,__wbindgen_start:u}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,r),o=i.memory,a=i.rust_calloc,s=i.rust_free,c=i.llparser_create,u=i.llparser_destroy,l=i.llparser_create_descriptor,d=i.llparser_descriptor_set_all,f=i.llparser_descriptor_set_nil,p=i.llparser_descriptor_add_char,h=i.llparser_descriptor_add_range,g=i.llparser_descriptor_revert,v=i.llparser_add_rule,_=i.llparser_prepare,m=i.llparser_parse,y=i.llparser_get_input_buffer,b=i.llparser_get_result,w=i.wasm_main,I=i.__wbindgen_start}])},function(e,t,n){var r=n(4),i=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};i.create=function(e){return new i(e)},i.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},i.prototype.remove=function(e){var t=this._arr,n=0;if("function"==typeof e)for(n=0;n<t.length;n++){var r=t[n].func;if(r===e)return t.splice(n,1),this.empty=!t.length,r}else for(n=0;n<t.length;n++)if(t[n].id===e){var i=t[n].func;return t.splice(n,1),this.empty=!t.length,i}return null},i.prototype.call=function(e,t,n){for(var r=this._arr,i=!1,o=0;o<r.length;o++){!1===a(this._type,r[o].func,e,t,n)&&(i=!0)}if(i)return!1};var o=function(e,t){if(!t.type||!1!==s.call(null,[e,t])){if(r.throwGlobalError)throw e;console.error(e.stack)}},a=i.safeCallback=function(e,t,n,r,i){try{return t.apply(n,r)}catch(s){var a="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";n&&n.is&&(a+=n.is),a+="#"+(t.name||"(anonymous)"),i&&i.triggerLifeTime("error",[s]),o(s,{message:a,type:e,element:n,method:t,args:r})}},s=i.create();i.addGlobalErrorListener=function(e){return s.add(e)},i.removeGlobalErrorListener=function(e){return s.remove(e)},e.exports=i},function(e,t){var n={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document)};e.exports=n},function(e,t){var n=Object.prototype.hasOwnProperty,r=function(e,t){var i=typeof e;if("object"===i&&null!==e){var o=t?t.get(e):void 0;if(void 0!==o)return o;if(e instanceof Array){o=[],t&&t.set(e,o);for(var a=0;a<e.length;a++)o[a]=r(e[a],t)}else for(var s in o={},t&&t.set(e,o),e)n.call(e,s)&&(o[s]=r(e[s],t));return o}if("symbol"!==i)return e};t.deepCopy=function(e,t){var n=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return r(e,n)}},function(e,t,n){var r=n(3),i=(Object.prototype.hasOwnProperty,function(){});i.prototype=Object.create(Object.prototype,{constructor:{value:i,writable:!0,configurable:!0}});var o=null;i._setElementSystem=function(e){o=e,i._setElementSystem=null};var a=null;i._setComponent=function(e){a=e,i._setComponent=null};var s=Date.now();i.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},i.getInitTimeStamp=function(e){return s},i.create=function(e,t,n){var r=(n=n||{}).originalEvent,o=n.extraFields||{},a=Date.now()-s,c=new i;for(var u in c.currentTarget=null,c.type=e,c.timeStamp=a,c.mark=null,c.detail=t,c.bubbles=!!n.bubbles,c.composed=!!n.composed,c.__originalEvent=r,c.__hasCapture=!!n.capturePhase,c.__stopped=!1,c.__dispatched=!1,o)c[u]=o[u];return c},i.prototype.preventDefault=function(){this.__originalEvent&&this.__originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.__stopped=!0},i.prototype.isStopped=function(){return!!this.__stopped},i.prototype.markMutated=function(){this.__mutatedMarked=!0},i.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var c=function(e,t,n,r){for(var i=e,a=e instanceof o?e.collectMarks():{},s=[],c=[],u=e;u;){if(i!==u&&(s.push(e),e=u,c.push(a),a=e instanceof o?e.collectMarks():{}),i=u.parentNode,!1===r(u,e,a))return;if(u.__wxHost){if(n)break;e=s.pop()||u.__wxHost,a=c.pop()||(e instanceof o?e.collectMarks():{}),i=u=u.__wxHost}else{var l=!0;u instanceof o&&(l=!1),u=l||n?u.parentNode:u.__wxSlotParent}}};i.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&((e=e.__wxElement).shadowRoot instanceof o&&(e=e.shadowRoot)),t.target=e instanceof o?e.__methodCaller:e;var n=function(e,n,r){if(!(n&&n.length&&t.mutatedMarked())){var i=t.currentTarget=r instanceof o?r.__methodCaller:r,s=e.call(i,[t],r instanceof a?r:void 0);n&&n.length&&t.markMutated(),!1===s&&(t.__originalEvent&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},r=t.type,i=!t.composed;if(t.__hasCapture){var s=[];c(e,0,i,(function(e,t,n){return e.__wxCaptureEvents&&e.__wxCaptureEvents[r]&&s.push([e,t,n]),!0}));for(var u=s.length-1;u>=0;u--){var l=s[u],d=l[0],f=l[1];t.target=f instanceof o?f.__methodCaller:f,t.mark=l[2];var p=d.__wxCaptureMutated&&d.__wxCaptureMutated[r];if(n(d.__wxCaptureEvents[r],p,d),t.__stopped)break}}if(t.target=e instanceof o?e.__methodCaller:e,!t.__stopped){var h=!t.bubbles;c(e,0,i,(function(e,i,a){t.target=i instanceof o?i.__methodCaller:i,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[r];return e.__wxEvents&&e.__wxEvents[r]&&n(e.__wxEvents[r],s,e),!h&&!t.__stopped}))}}},i.triggerEvent=function(e,t,n,r){var o=i.create(t,n,r);i.dispatchEvent(e,o)},i.addListenerToElement=function(e,t,n,i){var o=i&&i.mutated;if(o){var s=n;n=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var c=void 0;return i&&(i.useCapture||i.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=r.create("Event Listener")),c=e.__wxCaptureEvents[t].add(n),o&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(c))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=r.create("Event Listener")),c=e.__wxEvents[t].add(n),o&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(c))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,n,i]),c},i.removeListenerFromElement=function(e,t,n,r){var i=null;if(r&&(r.useCapture||r.capture))e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(i=e.__wxCaptureEvents[t].remove(n)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(o=e.__wxCaptureMutated[t].indexOf(n))&&e.__wxCaptureMutated[t].splice(o,1);else if(e.__wxEvents&&e.__wxEvents[t]&&(i=e.__wxEvents[t].remove(n)),e.__wxMutated&&e.__wxMutated[t]){var o;-1!==(o=e.__wxMutated[t].indexOf(n))&&e.__wxMutated[t].splice(o,1)}i&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,i,r])},e.exports=i},function(e,t,n){var r=n(1),i=" \n\r\t\f",o=null;t.parseMultiPaths=function(e){return o||(o=r.create({MULTIPLE_PATHS:[{id:"arrayConcat",states:["MULTIPLE_PATHS",",","SINGLE_PATH"]},{id:"array",states:["SINGLE_PATH"]}],SINGLE_PATH:[{id:"arrayConcat",states:["SINGLE_PATH",".","VAR_NAME"]},{id:"arrayConcat",states:["SINGLE_PATH","[","INT","]"]},{id:"array",states:["VAR_NAME"]},{id:"_jump",states:["SINGLE_PATH",i]}],VAR_NAME:[{id:"_blank",states:[i,"VAR_NAME"]},{id:"_jump",states:["VAR_NAME",i]},{id:"_raw",states:["*","*"]},{id:"_raw",states:["_a-zA-Z$","VAR_NAME_AFTER"]}],VAR_NAME_AFTER:[{id:"_raw",states:["_a-zA-Z0-9$","VAR_NAME_AFTER"]},{id:"_raw",states:["NULL"]}],INT:[{id:"_blank",states:[i,"INT"]},{id:"_jump",states:["INT",i]},{id:"toNumber",states:["0-9","INT_AFTER"]}],INT_AFTER:[{id:"_raw",states:["0-9","INT_AFTER"]},{id:"_raw",states:["NULL"]}]},{arrayConcat:function(e){return e[0].push(e[2]),e[0]},array:function(e){return e},toNumber:function(e){return parseInt(e[0]+e[1],10)}})),o.parse("MULTIPLE_PATHS",e)},t.parseSinglePath=function(e){for(var t=e.length,n=[],r="",i=0,o=!1,a=!1,s=0;s<t;s++){var c=e[s];if("\\"===c)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1]||"\\"===e[s+1])?(r+=e[s+1],s++):r+="\\";else if("."===c)r&&(n.push(r),r="");else if("["===c){if(r&&(n.push(r),r=""),0===n.length)throw new Error("The path string should not start with []: "+e);a=!0,o=!1}else if("]"===c){if(!o)throw new Error("There should be digits inside [] in the path string: "+e);a=!1,n.push(i),i=0}else if(a){if(c<"0"||c>"9")throw new Error("Only digits (0-9) can be put inside [] in the path string: "+e);o=!0,i=10*i+c.charCodeAt(0)-48}else r+=c}if(r&&n.push(r),0===t)throw new Error("The path string should not be empty");return n}},function(e,t,n){var r=n(3),i=n(4),o=n(7),a=["created","ready","cacheAttached","attached","moved","detached","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],c=function(){},u=o.parseMultiPaths,l=function(){},d=(l.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0},function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t}),f=function(e){var t={};for(var n in e)t[n]=e[n];return t},p=function(e,t){for(var n in t)hasOwnProperty.call(e,n)?"object"!=typeof e[n]||"object"!=typeof t[n]||null===t[n]||t[n]instanceof Array?e[n]=t[n]:(e[n]instanceof Array?e[n]=d(e[n]):e[n]=f(e[n]),p(e[n],t[n])):e[n]=t[n]};l.create=function(e){var t=new l;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.placeholder=e.placeholder||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:i.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:i.lazyRegistration)||l.prepare(t),e.is&&(l._list[e.is]=t),t},l.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.ancestors,r="",i=0;for(i=0;i<(t.behaviors||[]).length;i++){var o=t.behaviors[i],d=o;for(r in"string"==typeof d&&(d=l._list[o]),d._unprepared&&l.prepare(d),"object"==typeof d.data&&(null===e.data?e.data=d.data:p(e.data,d.data)),d.generics){var f=d.generics[r];"object"!=typeof f&&(f={}),e.generics[r]={default:f.default}}for(r in d.properties)e.properties[r]=d.properties[r];for(r in d.relations)e.relations[r]=d.relations[r];for(r in d.methods)e.methods[r]=d.methods[r];for(var h=0;h<d.ancestors.length;h++)n.indexOf(d.ancestors[h])<0&&n.push(d.ancestors[h])}for(r in"object"==typeof t.data&&(null===e.data?e.data=t.data:p(e.data,t.data)),t.properties){var g=t.properties[r];s.indexOf(g)>=0?g={type:g}:s.indexOf(g.type)<0&&g.optionalTypes&&g.optionalTypes.length>0&&(g.type=g.optionalTypes[0]),void 0===g.value&&(g.type===String?g.value="":g.type===Number?g.value=0:g.type===Boolean?g.value=!1:g.type===Array?g.value=[]:g.value=null),e.properties[r]={type:g.type,optionalTypes:g.optionalTypes,value:g.value,filter:g.filter,observer:g.observer,public:!!(void 0===g.public?e.options.publicProperties:g.public),availability:g.availability,observeAssignments:!!g.observeAssignments}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(r in t.lifetimes)e.lifetimes[r]=t.lifetimes[r];for(i=0;i<a.length;i++)void 0===e.lifetimes[a[i]]&&(e.lifetimes[a[i]]=t[a[i]]);for(r in t.listeners)e.listeners[r]=t.listeners[r];var v=t.observers;if(v instanceof Array)for(i=0;i<v.length;i++){var _=v[i];e.observers.push({paths:u(_.fields||"**"),observer:_.observer})}else for(r in v)e.observers.push({paths:u(r),observer:v[r]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(r in t.pageLifetimes)e.pageLifetimes[r]=t.pageLifetimes[r];for(r in t.relations){var m=t.relations[r];e.relations[r]={target:m.target||r,type:m.type,linked:m.linked||c,linkChanged:m.linkChanged||c,unlinked:m.unlinked||c,linkFailed:m.linkFailed||c}}for(r in t.methods)"function"==typeof t.methods[r]&&(e.methods[r]=t.methods[r]);n.push(e)}},l._list=Object.create(null),l.prototype.hasBehavior=function(e){this._unprepared&&l.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof l){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===l._list[e])return!0;return!1},l.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var r=this.ancestors[n];for(var i in r.listeners)Object.prototype.hasOwnProperty.call(e,i)?e[i].push(r.listeners[i]):e[i]=[r.listeners[i]]}return e},l.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,n=0;n<t.length;n++)for(var r=this.ancestors[n].observers,i=0;i<r.length;i++){var o=r[i];e.addObserver(o.observer,o.paths)}},l.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=r.create("Lifetime Method")}));for(var n=0;n<t.length;n++){var i=t[n];for(var o in i.lifetimes)i.lifetimes[o]&&(e[o]||(e[o]=r.create("Lifetime Method")),e[o].add(i.lifetimes[o]))}return e},l.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var i=t[n];for(var o in i.pageLifetimes)i.pageLifetimes[o]&&(e[o]||(e[o]=r.create("Page Lifetime Method")),e[o].add(i.pageLifetimes[o]))}return e},l.callDefinitionFilter=function(e){var t=e.definitionFilter,n=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?l._list[t]:t)&&t.definitionFilter&&(n.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,n)}:null},e.exports=l},function(e,t,n){var r=n(6),i=n(10),o=n(11),a=n(12),s=n(14),c=n(4),u=n(13),l=function(e){d(this,e||null)};l.prototype=Object.create(Object.prototype,{constructor:{value:l,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var n=this.ownerShadowRoot.__wxHost;n.__idCacheDirty=!0,this.__domElement&&n.__componentOptions.writeIdToDOM&&(this.__domElement.id=t)}c.writeExtraInfoToAttr&&this.__domElement&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){e=String(e),this.__slot!==e&&(this.__inheritSlots||(this.__slot=e,b(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})))},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return x.call(this,e)},configurable:!0}}),r._setElementSystem(l),o._setElementSystem(l);var d=l.initialize=function(e,t,n){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=u.backendExtractedDefault,e.__domElement=t,e.$$=t,t&&(t.__wxElement=e)};l._clone=function(e,t,n,r){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var i in t.__marks)e.__marks[i]=t.__marks[i];for(var o in e.__attributes=Object.create(null),t.__attributes)e.__attributes[o]=t.__attributes[o];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=u.backendExtractedDefault,e.__domElement=n,e.$$=n,n&&(n.__wxElement=e)};var f=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof l){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof l&&t(e.shadowRoot);for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r])}};t(e)}},p=function(e){if(e.__attached){var t=function(e){if(e instanceof l){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof l&&t(e.shadowRoot),e.__attached=!1,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&i._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}};t(e)}},h=function(e){if(!e.__attached)return f(e);var t=function(e){if(e instanceof l){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof l&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)},g=function(e,t,n){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var r,o=[n];r="add"===t?{type:"childList",target:e,addedNodes:o}:"remove"===t?{type:"childList",target:e,removedNodes:o}:{type:"childList",target:e,addedNodes:o,removedNodes:o},i._callObservers(e,"__childObservers",r)}},v=function(e,t){if(e instanceof l&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var n=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var r=e.childNodes,i=0;i<r.length;i++){var o=r[i];o instanceof l&&n(o)}};n(e)}};l._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var n=e.__idCache=Object.create(null),r=function(e){e.__id&&(n[e.__id]||(n[e.__id]=e));for(var t=e.childNodes,i=0;i<t.length;i++)t[i]instanceof l&&r(t[i])};r(t)}};var _=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,n=e.__wxHost,r=Object.create(null);t=void 0!==n.__singleSlot?{"":n.__singleSlot}:n.__slots;var i=function(e){void 0!==e.__slotName&&(r[e.__slotName]||(r[e.__slotName]=e));for(var t=e.childNodes,n=0;n<t.length;n++)t[n]instanceof l&&i(t[n])};i(e),void 0!==n.__singleSlot?n.__singleSlot!==r[""]&&(r[""]&&(r[""].__wxSlotChildren=n.childNodes),m(n,r,t,!0),n.__singleSlot&&(n.__singleSlot.__wxSlotChildren=[]),n.__singleSlot=r[""]||null):(m(n,r,t,!1),n.__slots=r)}},m=function(e,t,n,r){var i=e.childNodes,o=0;if(r){var a=t[""];if(a)for(;o<i.length;o++)w(a,i[o],null,!1,!1,!1,-1);else if(a=n[""])for(;o<i.length;o++)w(a,null,i[o],!0,!1,!1,o)}else{var s=function(e){for(var r=0;r<e.length;r++){var i=e[r],o=i.__slot||"",a=t[o];a?w(a,i,null,!1,!0,!0):(a=n[o])&&w(a,null,i,!0,!0,!0),i.__inheritSlots&&s(i.childNodes)}};s(i)}},y=function(e,t,n,r){for(var i=function(e,t,r){var o=e.childNodes,a=0;for(t&&(a=o.indexOf(t)+(r?0:1));a<o.length;a++){var s=o[a];if(s.__slot===n)return s;if(s.__inheritSlots){var c=i(s,null,!1);if(c)return c}}return null};t!==e;t=t.parentNode){var o=i(t.parentNode,t,r);if(o)return o;r=!1}return null},b=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var n=e.__slot||"",r=t.__slots[n];if(r){var i=y(t,e,n,!1);w(r,e,i,!1,!0,!0)}else(r=e.__wxSlotParent)&&w(r,null,e,!0,!0,!0)}},w=function(e,t,n,r,i,o,a){if(r&&(n.__wxSlotParent=null),i&&(a=e.__wxSlotChildren.indexOf(n)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&o){var u=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(u,1),s===e&&u<a&&a--}}var d=!1;(t&&t.__backendExtracted||n&&n.__backendExtracted)&&(d=!0),d||function(e,t,n,r,i){var o=e;if(o instanceof l){for(;o.__virtual;){var a=o.__wxSlotParent;if(!a){o=null;break}if(t&&!n){var s=a.__wxSlotChildren.indexOf(o);n=a.__wxSlotChildren[s+1]}o=a}o instanceof l&&(o=o.__domElement)}if(o){var c=r,u=null,d=null;if(t)if(t.__virtual){var f=document.createDocumentFragment(),p=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?p(n):f.appendChild(n.__domElement)}};p(t),u=f}else u=t.__domElement;if(n)if(n.__virtual){var h=e,g=0;if(r){var v=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?v(n):o.removeChild(n.__domElement)}};v(n),c=!1,g=i+1}else h=n.__wxSlotParent,g=n===t?i:h.__wxSlotChildren.indexOf(n);if(t){var _=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];if(!n.__virtual)return n;var r=_(n,0);if(r)return r}};n=null;for(var m=h;!(n=_(m,g))&&m.__virtual;m=m.__wxSlotParent)g=m.__wxSlotParent.__wxSlotChildren.indexOf(m)+1;n&&(d=n.__domElement)}}else d=n.__domElement;c?u?o.replaceChild(u,d):o.removeChild(d):u&&(d?o.insertBefore(u,d):o.appendChild(u))}else if(t&&t.__wxSlotParent){var y=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)y(e.__wxSlotChildren[t]);else{var n=e.__domElement;n&&n.parentNode&&n.parentNode.removeChild(n)}};y(t)}}(e,t,n,r,a),c.writeExtraInfoToAttr&&(r&&n instanceof l&&n.__domElement&&n.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof l&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),i&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,r?1:0,t):e.__wxSlotChildren.splice(a,r?1:0))},I=function(e,t){for(var n=e.childNodes,r=0;r<n.length;r++){var i=n[r];t(e,i),i.__inheritSlots&&I(i,t)}},S=l.insertChildToElement=function(e,t,n,r){if(void 0!==e.__slotName)return!1;var o=n>=0?e.childNodes[n]:null;r&&t===o&&(r=!1);var a=null,s=e,c=e;if(t){a=t.parentNode,t.parentNode=e;var u=e.__subtreeObserversCount;if(a){var l=a.childNodes.indexOf(t);a.childNodes.splice(l,1),a===e&&l<n&&n--,u-=a.__subtreeObserversCount}u&&i._updateSubtreeCaches(t,u)}for(var d=e;d&&d.__inheritSlots;)d=d.parentNode;for(var m=!d||!d.__slots,b=!m||e.__inheritSlots,S=a;S&&S.__inheritSlots;)S=S.parentNode;var C=!S||!S.__slots,T=!C||a&&a.__inheritSlots;if(m)void 0!==e.__singleSlot&&(s=c=e.__singleSlot),s?w(s,t,o,r,b,T,n):t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,T,!1),t&&!C&&t.__inheritSlots&&I(t,(function(e,t){w(e,t,null,!1,!0,!0,-1)}));else{var E="";if(t&&(E=t.__slot||"",s=d.__slots[E]||null),o&&(c=d.__slots[o.__slot||""]||null),o&&c&&r&&w(c,null,o,r,!0,!1),t)if(s){var k=o?y(d,o,E,!r):y(d,e,E,!1);w(s,t,k,!1,!0,T)}else t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,T,!1);o&&r&&o.__inheritSlots&&I(o,(function(e,t){w(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&I(t,(function(t,n){var i=n.__slot||"",a=d.__slots[i]||null;if(a){var s=o?y(d,o,i,!r):y(d,e,i,!1);w(a,n,s,!1,!0,!0)}else n.__wxSlotParent&&w(n.__wxSlotParent,null,n,!0,!0,!1)}))}return r&&(e.__subtreeObserversCount&&i._updateSubtreeCaches(o,-e.__subtreeObserversCount),o.parentNode=null),-1===n&&(n=e.childNodes.length),t?e.childNodes.splice(n,r?1:0,t):e.childNodes.splice(n,r?1:0),e.ownerShadowRoot&&(r&&v(o,e.ownerShadowRoot),t&&v(t,e.ownerShadowRoot),_(e.ownerShadowRoot)),r&&(p(o),g(e,"remove",o)),t&&(a?h(t):f(t),a===e?g(e,"move",t):(a&&g(a,"remove",t),g(e,"add",t))),!0},C=function(e,t,n,r){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var i=r?n:t,o=-1;return n&&(o=e.childNodes.indexOf(n))<0?null:S(e,t,o,r)?i:null};l._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],w(t,e,null,!1,!1,0),e.__hostAssociated=!0,_(e)},l.appendChild=function(e,t){return C(e,t,null,!1)},l.insertBefore=function(e,t,n){return C(e,t,n,!1)},l.removeChild=function(e,t){return C(e,null,t,!0)},l.replaceChild=function(e,t,n){return C(e,t,n,!0)},l.prototype.appendChild=function(e){return C(this,e,null,!1)},l.prototype.insertBefore=function(e,t){return C(this,e,t,!1)},l.prototype.removeChild=function(e){return C(this,null,e,!0)},l.prototype.replaceChild=function(e,t){return C(this,e,t,!0)};var T=function(e){var t=!0,n=!0;if(e instanceof l?(e.__backendExtracted=!0,e.$$=e.__domElement=null,n=!1):e instanceof a&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,n=!1),t&&e.__wxSlotChildren)for(var r=0;r<e.__wxSlotChildren.length;r++){var i=e.__wxSlotChildren[r];T(i)}else if(n&&e.childNodes)for(var o=0;o<e.childNodes.length;o++)T(e.childNodes[o])};l.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return T(e),t};var E=function(e,t){if(!t){var n=s.toElement(e.__domElement);return e.$$=e.__domElement=n,n}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var r=s.toElement(e.__domElement);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null},k=function(e,t,n){var r=e instanceof l&&e.__virtual,i=t?t.childNodes[n]:void 0,o=!0,s=!0,c=null;if(e instanceof l)e.__backendExtracted=!1,r||(c=E(e,i)),s=!1;else if(e instanceof a)e.__backendExtracted=!1,c=function(e,t){if(!t){var n=document.createTextNode(e.textContent);return e.$$=e.__domElement=n,n}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var r=document.createTextNode(e.textContent);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null}(e,i),o=!1,s=!1;else{var u=document.createDocumentFragment();if(u.__wxSlotChildren=e.__wxSlotChildren,i&&i.childNodes)for(;i.childNodes.length;)u.appendChild(i.childNodes[0]);c=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,i),e=u}c?(t.appendChild(c),i=c):i=t?t.childNodes[n]:void 0;var d=0;if(o&&e.__wxSlotChildren)for(var f=0;f<e.__wxSlotChildren.length;f++){var p=e.__wxSlotChildren[f];if(r)n=k(p,t,n);else if(p.asShadowRoot){for(var h=0;h<p.asShadowRoot.childNodes.length;h++)d=k(p.asShadowRoot.childNodes[h],i,d);e.shadowRoot=i,i.__wxHost=e,e.__wxSlotChildren[0]=i,i.__wxSlotParent=e,e.__singleSlot===p&&(e.__singleSlot=i)}else d=k(p,i,d)}else if(s&&e.childNodes)for(var g=0;g<e.childNodes.length;g++)d=k(e.childNodes[g],i,d);if(r)return n;for(;i.childNodes.length>d;)i.removeChild(i.childNodes[d]);return n+1};l.injectBackend=function(e,t){if(e.__backendExtracted){var n=document.createDocumentFragment();n.appendChild(t),k(e,n,0)}},l.prototype.triggerEvent=function(e,t,n){r.triggerEvent(this,e,t,n)},l.prototype.dispatchEvent=function(e){r.dispatchEvent(this,e)},l.prototype.addListener=function(e,t,n){r.addListenerToElement(this,e,t,n)},l.prototype.removeListener=function(e,t,n){r.removeListenerFromElement(this,e,t,n)},l.setMethodCaller=function(e,t){e.__methodCaller=t},l.getMethodCaller=function(e){return e.__methodCaller},l.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},l.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute(e,t)},l.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&this.__domElement.removeAttribute(e))},l.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},l.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var n in t.__marks)hasOwnProperty.call(e,n)||(e[n]=t.__marks[n]);return e};var x=l.prototype.setNodeStyle=function(e,t){this.__styleSegments[t||0]=e;var n=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var r=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof r)return void this.__domElement.setAttribute("style",r.call(this,n))}this.__domElement&&this.__domElement.setAttribute("style",n),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&i._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})};l.replaceDocumentElement=function(e,t){e.__attached||(t.parentNode.replaceChild(e.__domElement,t),f(e))},l.pretendAttached=function(e){e.__attached||f(e)},l.pretendDetached=function(e){e.__attached&&p(e)},l.isAttached=function(e){return e.__attached},l.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,_(e.ownerShadowRoot))},l.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},l.getInheritSlots=function(e){return e.__inheritSlots};var A=function(e,t){var n=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!n)return null;var r=n[1].slice(1),i=n[2].split(".");return i.shift(),r||i.length?{id:r,classes:i,relation:t||""}:null},P=l.parseSelector=function(e){for(var t=String(e||"").split(","),n=[],r=!1,i=0;i<t.length;i++){for(var o=t[i].split(/( |\t|>+)/g),a=[],s="",c=0;c<o.length;c++){var u=o[c];if(u&&" "!==u&&"\t"!==u)if(">"!==u[0]){var l=A(u,s);if(s="",!l)break;a.push(l)}else{if(""!==s)break;s=u,">>>"===u&&(r=!0)}}c===o.length&&a.length&&n.push(a)}return n.length?{crossShadow:r,union:n}:null},D=function(e,t,n,r,i){if(t===e)return!1;var o=n[r],a=!0;o.id&&o.id!==t.__id&&(a=!1);for(var s=o.classes,c=0;a&&c<s.length;c++)t.classList.contains(s[c])||(a=!1);if(!a&&">"===i)return!1;var u=t;if(a&&0===r){if(null===e)return!0;for(u=u.parentNode;u;u=u.parentNode)if(u===e)return!0;if(">>>"!==i)return!1;u=t,a=!1}var l=a?o.relation:i;do{u.parentNode?u=u.parentNode:">>>"===l?u=u.__wxHost:">>>"===i?(a=!1,u=u.__wxHost):u=null,u===e&&(u=null)}while(u&&u.__virtual);if(!u)return!1;if(a){if(D(e,u,n,r-1,l))return!0;if(">>>"!==i)return!1}return D(e,u,n,r,i)},O=function(e,t,n){if(n.__virtual)return!1;for(var r=e.union,i=0;i<r.length;i++){var o=r[i];if(D(t,n,o,o.length-1,">"))return!0}return!1},N=function(e,t,n,r,i){if(O(t,n,r)&&(e.push(r),i))return!0;if(r.shadowRoot&&t.crossShadow&&((r.ownerShadowRoot?r.ownerShadowRoot.__wxHost.__componentOptions.domain:c.domain)===r.__componentOptions.domain&&N(e,t,n,r.shadowRoot,i)&&i))return!0;for(var o=r.childNodes,a=0;a<o.length;a++)if(o[a]instanceof l&&N(e,t,n,o[a],i)&&i)return!0;return!1};l.prototype.querySelector=function(e){var t="object"==typeof e?e:P(e);if(!t)return null;var n=[];return N(n,t,this,this,!0),n[0]||null},l.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:P(e),n=[];return t?(N(n,t,this,this,!1),n):[]},l.matchSelector=function(e,t){var n="object"==typeof e?e:P(e);return!!n&&O(n,null,t)},l.prototype.matchSelector=function(e,t){var n="object"==typeof e?e:P(e);return!!n&&O(n,this,t)},e.exports=l},function(e,t,n){var r=n(3),i=function(){};i.prototype=Object.create(Object.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),i.create=function(e){var t=new i;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},i.prototype.observe=function(e,t){var n=0,i=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(i),subtree:t.subtree?e:null}),n++),t.childList&&(e.__childObservers||(e.__childObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(i),subtree:t.subtree?e:null}),n++),t.characterData&&(e.__textObservers||(e.__textObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(i),subtree:t.subtree?e:null}),n++),t.subtree&&o(e,n),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(i),subtree:null}))},i.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var n=e[t];n.funcArr.remove(n.id),n.subtree&&o(n.subtree,-1)}this._binded=[]};var o=i._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var n=e.childNodes;if(n)for(var r=0;r<n.length;r++)o(n[r],t)};i._callObservers=function(e,t,n){do{e[t]&&e[t].call(e,[n]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},i._callSingleObserver=function(e,t,n){e[t]&&e[t].call(e,[n])},e.exports=i},function(e,t){var n=function(){},r=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,i=null;n._setElementSystem=function(e){i=e,n._setElementSystem=null};var o=Object.prototype.hasOwnProperty;n.create=function(e,t){var r=new n;for(var i in r._prefix="",r._addOriginalClass=!1,r._alias=t,r._resolvedAlias={},t)r._resolvedAlias[i]="";return r._rawNames=[],r._elem=e,r._owner=null,r};var a=function(e){var t="",n=e._rawNames,r=e._prefix,i=e._owner?e._owner._resolvedAlias:null,a=e._addOriginalClass;r&&(r+="--");for(var s=0;s<n.length;s++){var c=n[s];if(s&&(t+=" "),i&&o.call(i,c))t+=i[c];else if("~"===c[0])t+=c.slice(1);else if("^"===c[0]){c=c.slice(1);for(var u=e._owner||null;"^"===c[0];)c=c.slice(1),u=u?u._owner:null;var l=u?u._prefix:"";l&&(l+="--"),t+=l+c}else a&&(t+=c+" "),t+=r+c}return t},s=function(e){var t=e._elem.__domElement;if(t){var n=a(e);n?t.setAttribute("class",n):t.removeAttribute("class")}},c=function(e){var t=e.classList;t instanceof n&&(t._alias&&u(t),s(t));for(var r=e.childNodes,o=0;o<r.length;o++)r[o]instanceof i&&c(r[o])},u=function(e){var t=e._owner;if(!t)return!1;var n=!1;for(var r in e._alias){var a=e._alias[r],s=[];if(a)for(var u=0;u<a.length;u++){var l=a[u];if(o.call(t._alias,l)){var d=t._resolvedAlias[l];s.push(d)}else{var f=e._prefix&&l?e._prefix+"--"+l:l;s.push(f)}}var p=s.join(" ");e._resolvedAlias[r]!==p&&(n=!0,e._resolvedAlias[r]=p)}n&&e._elem.shadowRoot instanceof i&&c(e._elem.shadowRoot)};n.prototype.toggle=function(e,t){var n=this._rawNames.indexOf(e);void 0===t&&(t=n<0),t?n<0&&(this._rawNames.push(e),s(this)):n>=0&&(this._rawNames.splice(n,1),s(this))},n.prototype.contains=function(e){for(var t=this._rawNames,n=0;n<t.length;n++){var r=t[n];if("~"===r[0]){if(r.slice(1)===e)return!0}else if("^"===r[0]){for(var i=1;"^"===r[i];)i++;if(r.slice(i)===e)return!0}else if(r===e)return!0}return!1},n.prototype._setOwnerOptions=function(e,t,n){var r=this._prefix;this._prefix=t,r!==t&&(this._addOriginalClass=n,this._owner=e,this._alias&&u(this),s(this))},n.prototype._setAlias=function(e,t){var n=this._owner,i=String(t).match(r);this._alias[e]=i;var a=[];if(i)for(var s=0;s<i.length;s++){var u=i[s];n&&o.call(n._alias,u)?a.push(n._resolvedAlias[u]):a.push(this._prefix?this._prefix+"--"+u:u)}this._resolvedAlias[e]=a.join(" "),c(this._elem.shadowRoot)},n.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(r)||[],s(this)},n.prototype.getClassNames=function(){return a(this)},n.prototype.getPrefix=function(){return this._prefix},n.prototype.getAddOriginalClass=function(){return this._addOriginalClass},n.prototype.getRawNames=function(){return this._rawNames},e.exports=n},function(e,t,n){var r=n(10),i=n(4),o=n(13),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t){var n=new a;n.__slot="";var r=null;return o.backendExtractedDefault||"dom"!==i.documentBackend?n.__textContent=e:(r=document.createTextNode(e||"")).__wxElement=n,n.$$=n.__domElement=r,n.__backendExtracted=o.backendExtractedDefault,n.__subtreeObserversCount=0,n.parentNode=null,n.ownerShadowRoot=t,n};a.create=function(e){return s(e,null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){this.__domElement?this.__domElement.textContent=e:this.__textContent=String(e),(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&r._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=a},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var n=function(e){this.tagName=e,this.id="",this.attrs={}};n.toElement=function(e){var t=document.createElement(e.tagName);for(var n in e.id&&(t.id=e.id),e.attrs)t.setAttribute(n,e.attrs[n]);return t},n.fromElement=function(e){var t=new n(e.tagName);t.id=e.id;for(var r=e.attributes,i=0;i<r.length;i++)t.attrs[r[i].name]=r[i].value;return t},n.prototype.cloneNode=function(){var e=new n;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},n.prototype.removeAttribute=function(e,t){delete this.attrs[e]},n.prototype.setAttribute=function(e,t){this.attrs[e]=t},n.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=n},function(e,t,n){var r=n(3),i=n(5),o=n(16),a=n(6),s=n(8),c=n(9),u=n(17),l=n(10),d=n(11),f=n(14),p=n(4),h=n(13),g=n(7),v=a.addListenerToElement,_=g.parseSinglePath,m=i.deepCopy,y=function(){};y.prototype=Object.create(c.prototype,{constructor:{value:y,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace([n],e[n]);t.doUpdates()},configurable:!0},$:{get:function(){return c._updateIdMap(this),this.__idCache},set:function(){}}});var b=function(){};b.prototype=Object.create(Object.prototype),a._setComponent(y);var w=null;y._setDefaultTemplateEngine=function(e){w=e,y._setDefaultTemplateEngine=null};var I=function(e,t,n){if(n)for(var r=0;r<n.length;r++)if(s.matchTypeWithValue(n[r],e))return e;return t===String?null==e?"":String(e):t===Number?isFinite(e)?Number(e):0:t===Boolean?!!e:t===Array?e instanceof Array?e:[]:t===Object?"object"==typeof e?e:null:void 0===e?null:e};o.setPropUpdater((function(e,t,n,i){var o=e[0],a=this.__propData[o];if(n=I(n,t.type,t.optionalTypes),!(!t.availability||function(e,t,n,i){var o=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,i?void 0:n];return!!r.safeCallback("Availablity Controller",t,e.__methodCaller,o,e)}(this,t.availability,n,i)))return a;if(t.filter){var s=r.safeCallback("Property Filter",t.filter,this.__methodCaller,i?[]:[n,a,e],this);void 0!==s&&(n=s)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[o]&&function(e,t,n){var r=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),i=typeof n;"boolean"===i?n?e.__domElement.setAttribute(r,""):e.__domElement.removeAttribute(r):"object"===i?e.__domElement.setAttribute(r,JSON.stringify(n)):e.__domElement.setAttribute(r,n)}(this,o,n),n})),o.setPropObserver((function(e,t,n,i,o,a){if(i.observeAssignments||e!==t){var s=n[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&r.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),i.observer&&r.safeCallback("Property Observer",i.observer,this.__methodCaller,o?[]:[e,t,n],this),i.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&l._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var S=function(e,t,n){t.__relationLinks||(t.__relationLinks={});for(var r=t.__relationLinks[n]=[],i=0;i<e.length;i++)r.push(null)},C=function(e,t,n,i,o){for(var a=y.prototype.hasBehavior,c="parent"===i,u="shadowHost"===i,l=0;l<e.length;l++){var d,f=e[l];if(d="object"!=typeof f.target?s._list[f.target]:f.target){var p=t[l],h=null;if(!o)for(var g=u?n.ownerShadowRoot&&n.ownerShadowRoot.__wxHost:n.parentNode;g;g=u?g.ownerShadowRoot&&g.ownerShadowRoot.__wxHost:g.parentNode)if(!g.__virtual){if(a.call(g,d)){var v;v=c?g.__relationMap.child:u?g.__relationMap.shadowContent:g.__relationMap.descendant;for(var _=0;_<v.length;_++){var m,b=v[_];if((m="object"!=typeof b.target?s._list[b.target]:b.target)&&a.call(n,m)){h={parent:g,relation:b};break}}}if(c||h)break}t[l]=h,!p||h&&p.parent===h.parent||(r.safeCallback("Relation Unlinked Callback",p.relation.unlinked,p.parent.__methodCaller,[n.__methodCaller],p.parent),r.safeCallback("Relation Unlinked Callback",f.unlinked,n.__methodCaller,[p.parent.__methodCaller],n)),!h||p&&p.parent===h.parent||(r.safeCallback("Relation Linked Callback",h.relation.linked,h.parent.__methodCaller,[n.__methodCaller],h.parent),r.safeCallback("Relation Linked Callback",f.linked,n.__methodCaller,[h.parent.__methodCaller],n)),p&&h&&p.parent===h.parent&&(r.safeCallback("Relation Link Changed Callback",h.relation.linkChanged,h.parent.__methodCaller,[n.__methodCaller],h.parent),r.safeCallback("Relation Link Changed Callback",f.linkChanged,n.__methodCaller,[h.parent.__methodCaller],n)),o||h||r.safeCallback("Relation Link Failed Callback",f.linkFailed,n.__methodCaller,[],n)}}},T=function(e,t,n){if(e instanceof c){var r=0,i=null;if(e instanceof y){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,n||[]),i=e.childNodes,r=0;r<i.length;r++)T(i[r],t,n);e=e.shadowRoot}for(i=e.childNodes,r=0;r<i.length;r++)T(i[r],t,n)}};y._list={},y.register=function(e){var t=e.options||{},n=s.create(e),r=void 0!==t.classPrefix?t.classPrefix:p.classPrefix;null!=r||(r=n.is||"");var i=new b;return i._unprepared=n,i.is=e.is||"",i.behavior=n,i.protoFunc=null,i.props=null,i.template=null,i.innerEvents=null,i.generics=n.generics,i.placeholder=n.placeholder,i.initiator=n.initiator||null,i.options={availability:t.availability||p.availability,domain:t.domain||p.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:p.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:p.allowInWriteOnly),classPrefix:r,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:p.addGlobalClass),templateEngine:t.templateEngine||p.templateEngine||w,renderingMode:t.renderingMode||p.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:p.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:p.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:p.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:p.writeIdToDOM),separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:p.separateInnerData),innerDataExclude:t.innerDataExclude||p.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:p.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:p.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:p.virtualHost)},n._unprepared||y.prepare(i),void 0!==e.is&&(y._list[n.is]=i),i},y.isPrepared=function(e){return!e._unprepared},y.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.options,r={};t._unprepared&&s.prepare(t),n.writeOnly&&(r.data={value:null});var i=e.props={};Object.keys(t.properties).forEach((function(e){var o=t.properties[e];i[e]={type:o.type,optionalTypes:o.optionalTypes,value:o.value,filter:"function"==typeof o.filter?o.filter:null==o.filter?null:t.methods[o.filter],observer:"function"==typeof o.observer?o.observer:null==o.observer?null:t.methods[o.observer],public:o.public,availability:o.availability,observeAssignments:o.observeAssignments},n.writeFieldsToNode&&(r[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var n=this.__dataProxy;n.scheduleReplace([e],t),n.doUpdates()}})}));var a=function(){};e.protoFunc=a;var c=a.prototype=Object.create(y.prototype,r);if(c.is=e.is,c.__componentOptions=n,c.__using=t.using,e.dataGroupObserverTree=o._createObserverTree(i),t._addObserversToDataProxy(e.dataGroupObserverTree),c.__behavior=t,n.writeFieldsToNode)for(var u in t.methods)c[u]=t.methods[u];c.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),c.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var l=t.relations,d=c.__relationMap={};for(var f in l){var p=l[f],h=p.type;d[h]?d[h].push(p):d[h]=[p]}var g=[];d.parent&&g.push((function(e){C(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),d.ancestor&&g.push((function(e){C(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),d.shadowHost&&g.push((function(e){C(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<g.length;t++)g[t].call(this,e)};var v={},_={},m=t.data,b="";for(b in m)_[b]=m[b];for(b in i){var w=i[b];_[b]=w.value,v[b]=w.public}var I=_,S=n.separateInnerData,T=n.innerDataExclude;if(T){for(var E in I={},_)T.test(E)||(I[E]=_[E]);S||(_=I)}var k=n.templateEngine;e.template=k.create(t,_,I,n),c.__propPublic=v;var x=t._getAllListeners(),A=e.innerEvents=[];for(var P in x){for(var D=x[P],O=P.indexOf("."),N=P.slice(O+1),R=O<1?"":P.slice(0,O),M=[],L=0;L<D.length;L++){var B=D[L];"function"!=typeof B&&(B=null==B?null:t.methods[B]),M.push(B)}A.push({id:R,name:N,funcs:M})}}};var E=1,k=Object.prototype.hasOwnProperty,x=function(e,t){return function(n){return e.call(t.__methodCaller,n,t)}},A=function(e,t,n){var r={};for(var i in e){var o=e[i],a=t[i];"object"!=typeof a&&k.call(y._list,a)&&(a=y._list[a]),"object"!=typeof a&&null!=o.default&&(a=y._list[o.default]),a&&(r[i]=a)}return r},P=y._advancedCreate=function(e,t,n,i,a,s){var u=t;u._unprepared&&y.prepare(u);var l=u.options;!l.availability||function(e,t,n){var i=[t?t.__wxHost.__componentOptions.domain:void 0];return!!r.safeCallback("Availablity Controller",n,e,i)}(u,n,l.availability)||(u=y._list[""]);var g=new(0,u.protoFunc);g.__placeholder=function(e,t){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}(a,u.placeholder);var _=u.generics;g.__generics=_?A(_,i||{}):{};var b=null,w=p.documentBackend;if(l.virtualHost){b=null;"dom"===p.documentBackend&&(b=void 0),c.initialize(g,b,n),g.__virtual=!0}else"dom"===w?(b=h.backendExtractedDefault?new f(e):document.createElement(e),c.initialize(g,b,n)):c.initialize(g,null,n);var I=0,C=g.__externalClassAlias={};if(u.behavior.externalClasses){var T=u.behavior.externalClasses;for(I=0;I<T.length;I++)C[T[I]]=null}if(g.classList=d.create(g,C),n){var k=n.__wxHost;g.classList._setOwnerOptions(k.classList,k.__componentOptions.classPrefix,k.__componentOptions.addGlobalClass),p.writeExtraInfoToAttr&&b&&b.setAttribute("exparser:info-class-prefix",k.__componentOptions.classPrefix&&k.__componentOptions.classPrefix+"--")}p.writeExtraInfoToAttr&&b&&(g.__componentInstanceId=E++,b.setAttribute("exparser:info-component-id",g.__componentInstanceId));var P=g.__templateInstance=u.template.createInstance(g,s);g.__propData=P.data;var D=l.separateInnerData;g.__innerData=D?m(g.__propData):null;var O=l.innerDataExclude;if(D&&O){var N={};for(var R in g.__innerData)O.test(R)||(N[R]=g.__innerData[R]);g.__innerData=N}g.__dataProxy=o._advancedCreate(g,g.__propData,g.__innerData,O,u.dataGroupObserverTree,(function(e,t,n,r){g.__templateInstance.updateValues(g,D?g.__innerData:g.__propData,e,t,n,r)})),P.beforeMergeValues&&g.__dataProxy.setBeforeMergeCb((function(e,t,n){g.__templateInstance.beforeMergeValues(e,t,n)})),P.beforeUpdateValues&&g.__dataProxy.setBeforeUpdateCb((function(e){g.__templateInstance.beforeUpdateValues(g,D?g.__innerData:g.__propData,e)})),l.writeOnly&&g.__dataProxy.setHidingValue(!0),g.__idCacheDirty=!1,g.__idCache=P.idMap,null===P.slots[""]&&(P.slots[""]=b),u.options.multipleSlots?g.__slots=P.slots:(g.__singleSlot=P.slots[""]||null,g.__singleSlot&&(g.__singleSlot.__wxSlotChildren=g.childNodes)),P.shadowRoot instanceof c?(g.shadowRoot=P.shadowRoot,c._attachShadowRoot(P.shadowRoot)):b instanceof f?(g.shadowRoot=b,b.__wxHost=g,g.__domElement.asShadowRoot=P.shadowRoot,g.__wxSlotChildren=[b],b.__wxSlotParent=g):(g.shadowRoot=b,b.__wxHost=g,g.__domElement.appendChild(P.shadowRoot),g.__wxSlotChildren=[b],b.__wxSlotParent=g);for(var M=P.listeners,L=0;L<M.length;L++){var B=M[L];v(B.target,B.name,x(B.func,g))}var F=u.innerEvents;for(I=0;I<F.length;I++){var j=F[I],W=j.id?"this"===j.id?g:g.__idCache[j.id]:g.shadowRoot;if(W)for(var U=j.name,V=j.funcs,G=0;G<V.length;G++)v(W,U,x(V[G],g))}var H=g.__relationMap;return H.parent&&(S(H.parent,g,"parent"),g.__relationHandler=u.relationHandler),H.ancestor&&(S(H.ancestor,g,"ancestor"),g.__relationHandler=u.relationHandler),H.shadowHost&&(S(H.shadowHost,g,"shadowHost"),g.__relationHandler=u.relationHandler),g.__propertyChangeListeners=null,u.initiator&&r.safeCallback("Component Initiator",u.initiator,g.__methodCaller,[],g),g.__lifeTimeFuncs.created.call(g.__methodCaller,[],g),g};y.createWithGenerics=function(e,t,n,r){return"object"==typeof e?P(e.is,e,null,n,null,r):e?e.indexOf("-")<0&&!t?u.create(e):P(e.toLowerCase(),t||k.call(y._list,e)&&y._list[e]||y._list[""],null,n,null,r):P("virtual",y._list[""],null,n,null,r)},y.create=function(e,t,n){return y.createWithGenerics(e,t,null,n)},y.listProperties=function(e){var t=[];for(var n in e.__propPublic)void 0!==e.__propPublic[n]&&t.push(n);return t},y.listPublicProperties=function(e){var t=[];for(var n in e.__propPublic)!0===e.__propPublic[n]&&t.push(n);return t},y.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},y.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},y.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},y.getMethod=function(e,t){return e.__behavior.methods[t]},y.getComponentOptions=function(e){return e.__componentOptions},y.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},y.prototype.triggerPageLifeTime=function(e,t){T(this,e,t)},y.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},y.prototype.getRootBehavior=function(){return this.__behavior},y.prototype.getPlaceholder=function(e){return this.__placeholder[e]},y.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var n=this.__relationMap[t.type],r=0;r<n.length&&n[r]!==t;r++);return this.__relationLinks[t.type][r]?[this.__relationLinks[t.type][r].parent]:[]}return function(e,t){var n=[],r=t.type,i="child"===r,o="shadowContent"===r,a=function(r){for(var s=r.childNodes,u=0;u<s.length;u++){var l=s[u];if(l instanceof c)if(l.__virtual)a(l);else{var d;if(l.__relationLinks)if(d=i?l.__relationLinks.parent:o?l.__relationLinks.shadowHost:l.__relationLinks.ancestor)for(var f=0;f<d.length;f++){var p=d[f];if(p&&p.parent===e&&p.relation===t){n.push(l);break}}o&&l instanceof y&&a(l.shadowRoot),i||a(l)}}};return a(o?e.shadowRoot:e),n}(this,t)},y.prototype.hasExternalClass=function(e){return k.call(this.__externalClassAlias,e)},y.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},y.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},y.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},y.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},y.getInnerData=function(e){return e.__innerData},y.getDataProxy=function(e){return e.__dataProxy},y.replaceWholeData=function(e,t,n){e.__propData=t,e.__dataProxy.replaceWholeData(t,n)},y.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},y.prototype.setData=function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace(_(n),e[n]);t.doUpdates()},e.exports=y},function(e,t,n){var r=n(3),i=n(5),o=null,a=null,s=Object.prototype.hasOwnProperty,c=i.deepCopy,u=function(e,t,n,r,i,o){this._data=t,this._innerData=n,this._innerDataExclude=r,this._comp=e,this._updateCb=o,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=i._propFields,this._observers=i._observers,this._observerTree=i._observerTree,this._relatedObserverTreeObj=i,this._observerStatus=[]};u._advancedCreate=function(e,t,n,r,i,o){return new u(e,t,n,r,i,o)};var l=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};u._createObserverTree=function(e){return new l(e)},u.create=function(e,t,n){var r=new l({});return new u({__methodCaller:e},t,null,null,r,n)},u.setPropUpdater=function(e){o=e},u.setPropObserver=function(e){a=e},u.prototype.replaceWholeData=function(e,t){this._data=e},u.prototype.setHidingValue=function(e){this._hidingValue=!!e},u.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},u.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var d=function(e,t,n){for(var r=e,i=0;i<t.length;i++){var o=t[i];if("**"===o)return r["**"]||(r["**"]=[]),void r["**"].push(n);r[o]||(r[o]={}),r=r[o]}r["~"]||(r["~"]=[]),r["~"].push(n)},f=function(e,t,n){for(var r=0;r<t.length;r++)d(e,t[r],n)},p=function(e,t,n){for(var r=e,i=0,o="";i<t.length&&"**"!==(o=t[i]);i++){if(!r)return;r=r[o]}var a="**"===o?r["**"]:r["~"];if(a)for(i=0;i<a.length;i++)if(a[i]===n){a.splice(i,1);break}},h=function(e,t,n){for(var r=0;r<t.length;r++)p(e,t[r],n)};l.prototype.addObserver=function(e,t){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},f(this._observerTree,t,n),n},l.prototype.removeObserver=function(e){var t=this._observers[e];h(this._observerTree,t.pathObj,e),this._observers[e]=null},l.prototype.moveObserver=function(e,t){var n=this._observers[e];h(this._observerTree,n.pathObj,e),n.pathObj=t,f(this._observerTree,t,e)},u.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var g=function(e,t,n){for(var i=[],o=n.pathObj,a=0;a<o.length;a++){for(var s=o[a],c=t,u=0;u<s.length;u++){var l=s[u];if("**"===l)break;if("object"!=typeof c){c=void 0;break}c=c[l]}i[a]=c}r.safeCallback("Data Observer",n.func,e.__methodCaller,i,e)},v=function(e,t){var n=null,r=0;for(var i in e)if("~"!==i)if("**"!==i)v(e[i],t);else for(n=e["**"],r=0;r<n.length;r++)t[n[r]]=!0;else for(n=e["~"],r=0;r<n.length;r++)t[n[r]]=!0},_=function(e,t,n){for(var r=e,i=0;i<n.length;i++){if(r["**"])for(var o=r["**"],a=0;a<o.length;a++){t[o[a]]=!0}var c=n[i];if("number"==typeof c){if(!s.call(r,c)){r=null;break}}else if(!/^[_a-zA-Z]/.test(c)||!s.call(r,c)){r=null;break}r=r[c]}r&&v(r,t)},m=function(e,t,n,r,i){for(var o=0;o<e.length;o++){var a=e[o],s=t[o];s&&s&&(t[o]=!1,g(n,i?void 0:r,a))}};u.prototype.scheduleReplace=function(e,t,n){this._changes.push([e,t,n])},u.prototype.setChanges=function(e){this._changes=e},u.prototype.getChanges=function(){return this._changes},u.prototype.doUpdates=function(e,t){var n=this._propFields,r=this._comp,i=this._hidingValue,u=this._innerDataExclude,l=!!this._doingUpdates,d=this._relatedObserverTreeObj._observerIdInc,f=null,p=null,h=null;d?(l||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),f=this._doingUpdates.changedPaths,p=this._doingUpdates.changedValues,h=this._doingUpdates.combinedChanges):(f=[],p=[],h=[]);var g=this._changes;this._changes=[];var v=[];this._beforeMergeCb&&this._beforeMergeCb(g,v,e);for(var y=0;y<g.length;y++){var b=g[y],w=b[0],I=b[1],S=I,C=void 0,T=w[0],E=!!u&&u.test(T),k=n[T];if(k&&1===w.length)C=this._data[T],I=o.call(this._comp,w,k,I,this._hidingValue),E||(this._innerData?(S=c(I),v[y]||(this._innerData[T]=S)):S=I,b[1]=S),E&&!this._innerData||(this._data[T]=I);else{var x=this._data,A=T,P=null,D=1;if(!E||this._innerData){for(;D<w.length;D++)"number"==typeof(P=w[D])&&isFinite(P)?s.call(x,A)&&x[A]instanceof Array||(x[A]=[]):(!s.call(x,A)||null===x[A]||"object"!=typeof x[A]||x[A]instanceof Array)&&(x[A]={}),x=x[A],A=P;x[A]=I}if(this._innerData&&(x=this._innerData,A=T,!E)){for(D=1;D<w.length;D++)"number"==typeof(P=w[D])&&isFinite(P)?s.call(x,A)&&x[A]instanceof Array||(x[A]=[]):(!s.call(x,A)||null===x[A]||"object"!=typeof x[A]||x[A]instanceof Array)&&(x[A]={}),x=x[A],A=P;S=c(I),v[y]||(x[A]=S),b[1]=S}}_(this._observerTree,this._observerStatus,w),E||(f.push(w),p.push([S,C,I]),h.push(b)),d&&(this._doingUpdates.changesTotal+=1)}if(!l){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),d){var O=0;do{O=this._doingUpdates.changesTotal,m(this._observers,this._observerStatus,r,this._data,i)}while(O!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(f,p,h,e);for(var N=0;N<p.length;N++){var R=p[N];if(R){var M=f[N],L=n[M[0]];L&&a.call(r,R[2],R[1],M,L,i,t)}}}},e.exports=u},function(e,t,n){var r=n(9),i=n(11),o=n(14),a=n(4),s=n(13),c=function(){};c.prototype=Object.create(r.prototype,{constructor:{value:c,writable:!0,configurable:!0}});var u=c._advancedCreate=function(e,t){var n=new c;n.is=e.toLowerCase();var u=null;if("dom"===a.documentBackend&&(u=s.backendExtractedDefault?new o(e):document.createElement(e)),r.initialize(n,u,t),n.classList=i.create(n,null),t){var l=t.__wxHost;n.classList._setOwnerOptions(l.classList,l.__componentOptions.classPrefix,l.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",l.__componentOptions.classPrefix&&l.__componentOptions.classPrefix+"--")}return n};c.create=function(e){return u(e,null)};var l=c._advancedClone=function(e,t){var n=new c;n.is=e.is;var u=null;if(e.__domElement&&(u=e.__domElement instanceof o?s.backendExtractedDefault?e.__domElement.cloneNode():o.toElement(e.__domElement):s.backendExtractedDefault?o.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1)),r._clone(n,e,u,t),n.classList=i.create(n,null),t){var l=t.__wxHost;n.classList._setOwnerOptions(l.classList,l.__componentOptions.classPrefix,l.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",l.__componentOptions.classPrefix&&l.__componentOptions.classPrefix+"--")}return n};c.cloneNode=function(e){return l(e,null)},e.exports=c},function(e,t,n){var r=n(9),i=n(4),o=function(e,t){a(this,e,t)};o.prototype=Object.create(r.prototype);var a=o.initialize=function(e,t,n){e.is=t||"";var o=null;"dom"===i.documentBackend&&(o=void 0),r.initialize(e,o,n),e.__virtual=!0};o._advancedCreate=function(e,t){return new o(e,t)},o.create=function(e){return new o(e,null)},e.exports=o},function(e,t,n){var r=n(9),i=n(15),o=n(18),a=n(17),s=n(12),c=Object.prototype.hasOwnProperty,u=function(e){o.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};u.prototype=Object.create(o.prototype),u.create=function(e){var t=new u(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var n in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[n]||(t.__childrenPropsFilter[n]=e.ownerShadowRoot.__childrenPropsFilter[n]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};u.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},u.prototype.createNativeNode=function(e){return a._advancedCreate(e,this)},u.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},u.prototype.createVirtualNode=function(e){return o._advancedCreate(e,this)},u.prototype.getCompDefByTagName=function(e){var t=this.__wxHost;return c.call(t.__using,e)?t.__using[e]:c.call(t.__generics,e)?t.__generics[e]:e},u.prototype.createComponent=function(e,t,n,r){var o=null;o=void 0===t?e:t;var a=this.__wxHost;"object"!=typeof o&&("object"!=typeof(o=this.getCompDefByTagName(o))&&(o=i._list[o]||i._list[""]));var s=function(e,t){var n={};for(var r in e){var o=e[r];"object"!=typeof o&&c.call(t.__placeholder,o)&&(o=t.__placeholder[o],c.call(t.__using,o)?o=t.__using[o]:c.call(t.__generics,o)&&(o=t.__generics[o]||i._list[""]),n[r]=o)}return n}(n,a);return n&&(n=function(e,t){var n={};for(var r in e){var o=e[r];"object"!=typeof o&&(c.call(t.__using,o)?o=t.__using[o]:c.call(t.__generics,o)&&(o=t.__generics[o]||i._list[""]),n[r]=o)}return n}(n,a)),"object"==typeof e&&(e=o.is),a.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",n=0;n<8;n++){var r=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[r]}return t}()),a.__componentOptions.writeOnly&&!o.options.allowInWriteOnly&&(o=i._list[""]),i._advancedCreate(e,o,this,n,s,r)},u.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!(c.call(t.__using,e)||c.call(t.__placeholder,e)||c.call(t.__generics,e)||c.call(t.__placeholder,e))},u.prototype.getHostNode=function(){return this.__wxHost},u.prototype.getElementById=function(e){return r._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=u},function(e,t,n){var r=n(9),i=n(12),o=function(){};o.create=function(e,t,n){var a=new o;if(!(e instanceof r||e instanceof i))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=n||r;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,n,r,i){if(r<0&&e instanceof t&&!1===i(e))return!1;var o=n&&e.__wxSlotChildren||e.childNodes;if(o)for(var s=0;s<o.length;s++)if(!1===a(o[s],t,n,r,i))return!1;return!(r>0&&e instanceof t&&!1===i(e))};o.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,n,r){for(;e;e=n&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===r(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=o},function(e,t,n){(function(t){var r=n(4),i=n(3),o=n(9),a=n(17),s=n(12),c=n(19),u=n(15),l=n(23),d=n(24),f=function(){};f.prototype=Object.create(Object.prototype,{constructor:{value:f,writable:!0,configurable:!0}});var p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var h=null;f.precompiler=h,f.htmlParser=null;var g=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},v=Object.prototype.hasOwnProperty,_=function(e,t){if(null!==e&&"object"==typeof e&&v.call(e,t))return e[t]},m=function(e,t,n,r){if(v.call(t,n)){var o=t[n];if("function"==typeof o)return i.safeCallback("Template Method",o,e,r)}},y=function(e,t){return[{t:1,n:"slot",a:[],c:[],p:null}]},b={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},w=function(e,t,n){e.classList.toggle(t,!!n)},I=function(e,t,n){e[t]=n},S=function(e,t,n){var r=e.__dataProxy;r.scheduleReplace([t],n),r.doUpdates()},C=function(e,t,n){e.class=n},T=function(e,t,n){e.setAttribute("style",n)},E=function(e,t,n){e.setAttribute("class",n)},k=function(e,t,n){e.textContent=n},x=function(e,t,n){e.dataset||(e.dataset={}),e.dataset[t]=n},A={$:function(e,t,n){!0===n?e.setAttribute(t,""):!1===n||null==n?e.removeAttribute(t):e.setAttribute(t,n)},":":I,c:w,s:function(e,t,n){var r=e.style;r&&(r[t]=n)},d:x},P=function(e,t,n){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};f.create=function(e,n,r,i){var o=void 0===e.template?P:e.template,a=o;"function"!=typeof o&&(a=void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node?f.precompileAndGetCreator(o):y);var s=Object.create(f.prototype);return s._initValuesJSON=JSON.stringify(r),s._dataJSON=n!==r?JSON.stringify(n):null,s._tagTreeRoot=D(a,r,e.methods,i),s._renderingMode=i.renderingMode,s};var D=function(e,t,n,i){var o="native"===i.renderingMode,s=o,c=!1,u=Object.create(null);o&&!r.hasDOMBackend&&(e=y);var l={},f=e(_,m,n),p=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(3!==r.t){var i=r.n,u=!(o||"string"==typeof i&&i.indexOf("-")<0);"slot"===i&&""===r.sn&&(c=!0),r.n=i;var f=r.st;f&&f.e&&(f.o=T,s&&(f.v=f.e(t,l,null)));var h=r.cl;h&&h.e&&(h.o=o?E:C,s&&(h.v=h.e(t,l,null)));var v=null;u||(r.p=v=o?document.createElement(r.n):a.create(r.n),f&&void 0!==f.v&&v.setAttribute("style",f.v),o&&h&&void 0!==h.v&&v.setAttribute("class",h.v));for(var _=r.a,m=0;m<_.length;m++){var y=_[m];if(y.d)o||d[y.n].register(y.n,y,r);else{o||("bind"===y.n.slice(0,4)?(y.evCatch=!1,y.ev=g(y.n.slice(4)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))):"catch"===y.n.slice(0,5)&&(y.evCatch=!0,y.ev=g(y.n.slice(5)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))));var b=y.o;if(u)b?y.o="&"===b?A[":"]:A[b]:(y.o=A[":"],y.n=g(y.n)),y.o===I&&(y.o=S),s&&y.e&&(y.v=y.e(t,l,null));else if(!y.ev){var x=A;y.o=b?"&"===b?x[":"]:x[b]:x.$,s?(y.e&&(y.v=y.e(t,l,null)),(y.o!==w||o)&&y.o(v,y.n,y.v)):y.e||y.o(v,y.n,y.v)}}}p(r.c),o&&(1!==r.c.length||void 0===r.c[0].sn||r.c[0].compressed||(r.sn=r.c[0].sn,r.compressed=!0,r.c.pop()))}else r.e&&(r.o=k,r.c=s?r.e(t,l,null):"")}};return p(f,u,!0),o&&(c||f.push(b),1!==f.length||""!==f[0].sn||f[0].compressed||f.pop()),f},O=function(e,t){return function(n){if(this[e](n),t)return!1}},N=function(e,t,n,r,i,a,s,c){for(var f=null,p=0,h=null,g=0;g<e.length;g++){var v=s,_=e[g];if(3===_.t)f=_.e?t.createTextNode(_.e(r,i,null)):t.createTextNode(_.c),_.e&&l.addBindings(a,v,_.b,f,_),o.appendChild(n,f);else{var m=_.cl,y=_.st,b=_.a,C=!1;for(p=0;p<b.length;p++)if((h=b[p]).d){var T=d[h.n].create(h.n,h,_,r,i,a,v,c,t,N,n);if(d[h.n].requireBlock){f=T,o.appendChild(n,f),C=!0;break}}if(C)continue;if(_.v)f=t.createVirtualNode(_.n);else if(_.p){for(f=t.cloneNativeNode(_.p),p=0;p<b.length;p++)(h=b[p]).d||(h.ev?c(f,h.ev,h.v,h.evCatch):h.o===I?f.__domElement&&(h.o(f.__domElement,h.n,h.e(r,i,null)),l.addBindings(a,v,h.b,f.__domElement,h)):(h.e&&h.o(f,h.n,h.e(r,i,null)),(h.e||h.o===w||h.o===x)&&l.addBindings(a,v,h.b,f,h)));y&&y.e&&(f.setAttribute("style",y.e(r,i,null)),l.addBindings(a,v,y.b,f,y))}else{if(_.cpf){var E={},k=t.__wxHost;for(var A in _.cpf)!function(e){var t=_.cpf[e];E[e]=k.__behavior.methods[t]}(A);t.__childrenPropsFilter=E}for(f=t.createComponent(_.n,void 0,_.g,void 0),p=0;p<b.length;p++)if(!(h=b[p]).d){var P=h.v;h.o===S&&u.hasPublicProperty(f,h.n)?(h.e&&(P=h.e(r,i,null),l.addBindings(a,v,h.b,f,h)),h.e?S(f,h.n,P):f.__behavior.properties[h.n].type===Boolean?S(f,h.n,!0):S(f,h.n,P)):h.ev?c(f,h.ev,P,h.evCatch):h.o!==S&&(h.e&&(P=h.e(r,i,null),l.addBindings(a,v,h.b,f,h)),h.o(f,h.n,P))}y&&(y.e?(f.__domElement.setAttribute("style",y.e(r,i,null)),l.addBindings(a,v,y.b,f.__domElement,y)):f.__domElement.setAttribute("style",y.v))}_.id&&(f.id=_.id),m&&(m.e?f.class=m.e(r,i,null):f.class=m.v,m.o&&l.addBindings(a,v,m.b,f,m)),_.sl&&(f.slot=_.sl),void 0!==_.sn&&o.setSlotName(f,_.sn),o.appendChild(n,f),N(_.c,t,f,r,i,a,v,c)}}},R=function(e,t,n){for(var r=e.childNodes,i=0;i<r.length;i++){var o=r[i];o instanceof s||(o.__id&&(t[o.__id]=o),void 0!==o.__slotName&&(n[o.__slotName]=o),R(o,t,n))}},M=function(e,t,n,r,i,o){for(var a=null,s=0,c=null,u=0;u<e.length;u++){var d=e[u];if(void 0===d.n)a=document.createTextNode(d.c),d.e&&l.addBindings(i,o,d.b,a,d),t.appendChild(a);else{var f=d.cl,p=d.st,h=d.a;for(a=d.v?document.createElement("virtual"):document.importNode?document.importNode(d.p,!1):d.p.cloneNode(!1),s=0;s<h.length;s++)(c=h[s]).e&&l.addBindings(i,o,c.b,a,c);t.appendChild(a),d.id&&(n[d.id]=a),f&&f.e&&l.addBindings(i,o,f.b,a,f),p&&p.e&&l.addBindings(i,o,p.b,a,p),void 0!==d.sn&&(r[d.sn]=a),M(d.c,a,n,r,i,o)}}};f.prototype.createInstance=function(e){var t=Object.create(p.prototype),n=JSON.parse(this._initValuesJSON),i=null===this._dataJSON?n:JSON.parse(this._dataJSON),o=Object.create(null),a=Object.create(null),s=[],u=l.create("",null,null,null,null,[],(function(e,t){})),d=null;if("native"===this._renderingMode)"dom"===r.documentBackend&&(d=document.createDocumentFragment()),M(this._tagTreeRoot,d,o,a,u,{}),a[""]||(a[""]=null);else{if(d=c.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(d.__childrenPropsFilter)for(var f in e.ownerShadowRoot.__childrenPropsFilter)d.__childrenPropsFilter[f]||(d.__childrenPropsFilter[f]=e.ownerShadowRoot.__childrenPropsFilter[f]);else d.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;N(this._tagTreeRoot,d,d,n,{},u,{},(function(e,t,n,r){d.__wxHost?e.addListener(t,O(n,r).bind(d.__wxHost)):s.push({target:e,name:t,func:O(n,r)})})),R(d,o,a)}return t.data=i,t.shadowRoot=d,t.idMap=o,t.slots=a,t.listeners=s,t._topScope=u,t},p.prototype.updateValues=function(e,t,n){for(var r=o.getMethodCaller(e),i=0;i<n.length;i++){var a=n[i];l.updateBinding(this._topScope,a,t,{},r)}},e.exports=f}).call(t,n(22))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(){h&&f&&(h=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!h){var e=i(o);h=!0;for(var t=p.length;t;){for(f=p,p=[];++g<t;)f&&f[g].run();g=-1,t=p.length}f=null,h=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var u,l,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var f,p=[],h=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||h||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){var n={create:function(e,t,n,i,o,a,s){for(var c={inc:1,name:e,exp:i,lp:o,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},u=0;u<a.length;u++){var l=a[u];null===l[0]?r(t,l,null,c):r(n[l[0]],l,null,c)}return c},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return r(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var n in e)t[n]={inc:1,linked:e[n],scopes:{},targets:{},children:null,__scopeBinded:[]},r(e[n],[null],null,t[n]);return t}},r=n.addBinding=function(e,t,n,r){for(var i=e,o=1;o<t.length;o++){var a=t[o];i.children||(i.children=Object.create(null));var s=i.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),i=s[a]}var c=e.inc++;return n?i.targets[c]=[n,r]:(i.scopes[c]=r,r.__scopeBinded.push([i,c])),c};n.addBindings=function(e,t,n,i,o){for(var a=0;a<n.length;a++){var s=n[a];s[0]?r(t[s[0]],s,i,o):r(e,s,i,o)}},n.updateLvaluePath=function(e,t){e.lp=t},n.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,n=0;n<t.length;n++){var r=t[n];delete r[0].scopes[r[1]]}};var i=function(e,t,n,r,i){if(e.linked)o(e,t,n,r,i);else{var a=r[e.name];r[e.name]=e.exp(n,r,i),o(e,t,n,r,i),r[e.name]=a}},o=n.updateBinding=function(e,t,n,r,o){for(var a=e,s=0,c=0;c<t.length;c++){for(s in a.scopes)i(a.scopes[s],t,n,r,o);var u=t[c];if(!a.children)return;var l=a.children;if(!l[u])return;a=l[u]}var d=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(n,r,o))}for(s in e.scopes)i(e.scopes[s],[],n,r,o);for(s in e.children)d(e.children[s])};d(a)};e.exports=n},function(e,t,n){e.exports={if:n(25),elif:n(25),else:n(25),for:n(27),key:n(28),"for-index":n(29),"for-item":n(30),alias:n(31)}},function(e,t,n){var r=n(23),i=n(26).RUNTIME_NAMES;i.TOP_SCOPE,i.SUB_SCOPE,i.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,i,o,a,s,c,u,l,d){var f=u.createVirtualNode("wx:"+e);f.__wxIfCondValue=!0,f.__wxIfNextNode=null,f.__wxIfHasTrueCond=!0;var p=null;"if"!==e&&("wx:if"!==(p=d.childNodes[d.childNodes.length-1]).is&&"wx:elif"!==p.is?p=null:p.__wxIfNextNode=f),n.id&&(f.id=n.id);var h=f.__wxIfUpdateNode=function(){var e=f.__wxIfCondValue;if(p&&p.__wxIfHasTrueCond&&(e=!1),e&&!f.childNodes.length){var t=r.proxyTopScope(a),d=r.proxySubScopes(s);f.__wxTopScope=t,f.__wxSubScopes=d,l(n.c,u,f,i,o,t,d,c)}else if(!e&&f.childNodes.length){for(var h in r.removeBindingsForScope(f.__wxTopScope),f.__wxSubScopes)r.removeBindingsForScope(f.__wxSubScopes[h]);for(;f.childNodes.length;)f.removeChild(f.childNodes[0])}f.__wxIfNextNode&&f.__wxIfNextNode.__wxIfUpdateNode()},g=function(e){f.__wxIfCondValue=!!e,f.__wxIfHasTrueCond=f.__wxIfCondValue||p&&p.__wxIfHasTrueCond,h()};return"else"===e?g(!0):(r.addBindings(a,s,t.b,f,{e:t.d,o:function(e,t,n){g(n)}}),g(t.d(i,o,null))),f}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var n=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},r=t.STRING_ESCAPE_MAP={},i="";for(var o in n)r[n[o]]=o,i+=n[o];t.STRING_ESCAPE_REGEXP=new RegExp("["+i+"]","g")},function(e,t,n){var r=(n(18),n(23)),i=n(26).RUNTIME_NAMES;i.TOP_SCOPE,i.SUB_SCOPE,i.CALLER,e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],register:function(e,t,n){},create:function(e,t,n,i,o,a,s,c,u,l){var d=n._wxForIndex||"index",f=n._wxForItem||"item",p=n._wxKey,h=u.createVirtualNode("wx:for:list");n.id&&(h.id=n.id),r.create("",a,s,(function(e,n,r){var i=t.d(e,n,null);return y(i,e,n,r),i}),t.l,t.b);var g=function(e,t,i,o,p){var g=u.createVirtualNode("wx:for:item"),v=r.proxyTopScope(a),_=r.proxySubScopes(s);g.__wxTopScope=v,g.__wxSubScopes=_,g.__wxForToRemove=!1,g.__wxForKeyStr="";var m=r.create(d,v,_,null,null,[]),y=r.create(f,v,_,null,[i],[]);return _[d]=m,_[f]=y,t[d]=i,t[f]=o,l(n.c,u,g,e,t,v,_,c),void 0===p?h.appendChild(g):h.insertBefore(g,p),g},v=function(e,t,n,o,a,s){var c=e.__wxSubScopes[f];r.updateLvaluePath(c,[o]),a&&(s?h.insertBefore(e,s):h.appendChild(e));var u=e.__wxSubScopes[d];n[d]=o,r.updateBinding(u,[],i,n,t)},_=function(e,t,n,i,o,a){i[f]=o,r.updateBinding(e.__wxSubScopes[f],t,n,i,a)},m=function(e){for(var t in r.removeBindingsForScope(e.__wxTopScope),h.__wxSubScopes)r.removeBindingsForScope(e.__wxSubScopes[t]);h.removeChild(e)},y=function(e,t,n,r){var i="",o=e;"object"==typeof e&&null!==e||(o=[]);var a={};for(i in n)a[i]=n[i];var s=0;if(p){var c=[],u=e instanceof Array,l=[];if(!u){var d=o;for(i in o=[],d)o.push(d[i]),l.push(i)}for(s=0;s<o.length;s++)c.push(String(o[s][p]));if(0===o.length)for(;h.childNodes.length;)m(h.childNodes[0]);else{var f=Object.create(null),y=Object.create(null),b=h.childNodes,w=null,I="";for(s=0;s<b.length;s++)f[I=(w=b[s]).__wxForKeyStr]>=0?(m(w),s--):(f[I]=s,y[I]=w,w.__wxForToRemove=!0);var S=-1,C=0,T=1,E=[];for((C=f[o[0][p]])>=0||(C=-1),b[C]&&(b[C].__wxForToRemove=!1),s=1;s<o.length;s++)(T=f[o[s][p]])>=0&&(S<C&&(C<T||S>T)&&(E.push(b[C]),S=C),b[C=T]&&(b[C].__wxForToRemove=!1));for(S<C&&E.push(b[C]),s=0;s<b.length;s++)(w=b[s]).__wxForToRemove&&(m(w),s--);var k=E.shift(),x=0;for(s=0;s<o.length;s++){var A=o[s],P=y[A[p]];if(y[A[p]]=null,P){var D=!0;if(P===k){for(;b[x]!==k;)x++;x++,k=E.shift(),D=!1}v(w=P,r,a,u?s:l[s],D,b[x]),D&&b[x]===w&&x++,_(w,[],t,a,o[s],r)}else w=g(t,a,u?s:l[s],o[s],b[x]),x++,w.__wxForKeyStr=String(A[p])}}}else{for(;h.childNodes.length;)m(h.childNodes[0]);if(e instanceof Array)for(s=0;s<o.length;s++)g(t,a,s,o[s]);else for(i in o)g(t,a,i,o[i])}};return y(t.d(i,o,null),i,o,null),h}}},function(e,t){e.exports={attachedToBlock:!0,register:function(e,t,n){n._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForItem=t.d},create:function(){}}},function(e,t,n){var r=n(23),i=n(26).RUNTIME_NAMES;i.TOP_SCOPE,i.SUB_SCOPE,i.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,i,o,a,s,c,u,l){var d=t.s[0],f=r.create(d,a,s,t.d,t.l,t.b),p={},h="";for(h in s)p[h]=s[h];p[d]=f;var g={};for(h in o)g[h]=o[h];g[d]=t.d(i,o,null);var v=u.createVirtualNode("wx:alias");return n.id&&(v.id=n.id),l(n.c,u,v,i,g,a,p,c),v}}}]),__virtualDOM__,__appServiceEngine__;(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{Behavior:()=>Ui,Component:()=>$i,CustomComponent:()=>zi,Page:()=>Xi,addView:()=>To,attachView:()=>Eo,beginTapMark:()=>Pn,checkTapMark:()=>On,componentAliases:()=>Yr,componentPathToAlias:()=>Kr,convertComponentAliasToRoute:()=>kr,convertRouteToComponentAlias:()=>Er,doDataThreadReplacePlaceholder:()=>Mi,enableUpdateWxAppCode:()=>Fo,endTapMark:()=>An,endViewInfoCallback:()=>si,getDomainByPluginId:()=>Jr,getEntryFile:()=>Mr,getGenericsByPath:()=>ki,getNodeById:()=>Mo,getNodeId:()=>Lo,getOwnerPluginAppId:()=>Li,getPlaceholderByPath:()=>xi,getPluginRoutePrefix:()=>Ar,getPluginSubPackagePrefix:()=>xr,getRootNodeId:()=>Bo,getUsingByPath:()=>Ti,initBannedMap:()=>ne,initViewThread:()=>ro,isLazyLoad:()=>Pi,isSubPackageIndependent:()=>Or,matchSubPackageName:()=>Dr,mergeData:()=>Uo,onComponentDef:()=>ao,onMainPageFrameReady:()=>di,publishDomainComponents:()=>Xr,removeView:()=>ko,requestViewInfo:()=>ai,restoreView:()=>qr,runComponentDef:()=>fo,saveView:()=>Zr,sendTabBarCreationRequest:()=>mo,setModelValueData:()=>Ai,updateWxAppCode:()=>jo,wrapTapMark:()=>Dn});const n=BabelRuntimeHelpers.typeof;var r=e.n(n),i=void 0!==exparser?exparser:{};"undefined"!=typeof __useSclExparser__&&__useSclExparser__&&"undefined"!=typeof __exparserSclEngine__&&(i=__exparserSclEngine__.exparser||i||{});var o=function(){return i},a=o();const s=BabelRuntimeHelpers.defineProperty;var c=e.n(s),u={},l=-1,d=null,f=!1,p=function(){return f},h=null,g=[],v=null,_=null,m=!1,y=function(e,t){var n=e.shift();if(""===n)return l=t,void(d&&d(t));var r=null;u[t=t||0]&&(r=u[t][n]),!r&&u.$GLOBAL&&(r=u.$GLOBAL[n]),r&&r(e,n,t)},b=function(){_&&(_=clearTimeout(_)),g.length&&h.vdSyncBatch(g,v&&[v]),v=null,g.length=0,m=!1},w=function(e,t,n,r){if(t=[e].concat(t),!m||r)return b(),m=!0,void h.vdSync(t,n&&[n]);v!==n&&b(),v=n,g.push(t),m=!0,_||(_=setTimeout((function(){_=null,b()}),15))},I=function(){(h=__appServiceSDK__._virtualDOMTunnel).onVdSync((function(e,t){y(e,t)})),h.onVdSyncBatch((function(e,t){for(var n=0;n<e.length;n++)y(e[n],t)}))};"undefined"!=typeof __clientsubcontext&&__clientsubcontext?__subContextEngine__.onInitReady(I):I();var S=function(e,t,n){if(""===e)return d=t,void(l>=0&&d(l));u[n=n||0]||(u[n]={}),u[n][e]=t},C=function(e){if(0===e.length)return 0;var t=Date.now();return __subContextEngine__.loadJsFiles(e),Date.now()-t},T=(new Set,function(e,t){wxNativeConsole.info("[VD] injectSubPackages: "+e.join(", ")),WeixinJSBridge.invoke("injectSubPackages",{subPackages:e},t)}),E=function(e,t){if(0===e.length)return t(0),0;var n=Date.now();return WeixinJSBridge.invoke("loadComponents",{comps:e},(function(){})),Date.now()-n};const k=BabelRuntimeHelpers.classCallCheck;var x=e.n(k);const A=BabelRuntimeHelpers.createClass;var P=e.n(A),D=o(),O=/^[-+a-z]+:\/\//i,N=function(e,t){if(O.test(t))return t;var n=e.match(O),r="";n&&(r=n[0],e=e.slice(r.length)),0===t.indexOf("/")&&(e="");var i=e.split("/");i.pop();for(var o=t.split("/");o.length;){var a=o.shift();""!==a&&"."!==a&&(".."!==a?i.push(a):i.pop())}return r+i.join("/")},R=function(t){var n=("undefined"==typeof window?e.g:window).__wcc_version_info__;if(n)return n[t]},M=function(){return Math.floor(4294967296*(1+Math.random())).toString(16).slice(1)},L=function(e){return Object.keys(e).map((function(t){return e[t]}))},B=function e(t,n,r){t instanceof D.Component&&(n>0&&r(t),n&&t.shadowRoot instanceof D.Element&&e(t.shadowRoot,n,r),n<0&&r(t));for(var i=t.childNodes,o=0;o<i.length;o++)i[o]instanceof D.Element&&e(i[o],n,r)},F=function(e){var t={};return e.forEach((function(e){t[e]={ok:!1,callbacks:[]}})),{notify:function(e){t[e]&&(t[e].ok=!0,t[e].callbacks.forEach((function(e){return e()})),t[e].callbacks=[])},on:function(e,n){t[e]&&(t[e].ok?n():t[e].callbacks.push(n))}}},j=o();const W=function(){function e(){x()(this,e),this._idNodeMap={}}return P()(e,[{key:"getAll",value:function(){return this._idNodeMap}},{key:"getNodeById",value:function(e){return this._idNodeMap[e]}},{key:"getNodeId",value:function(e){return e.__wxTmplId}},{key:"allocNodeId",value:function(e,t){var n=t||M();return e.__wxTmplId=n,this._idNodeMap[e.__wxTmplId]=e,n}},{key:"addNode",value:function(){}},{key:"removeNode",value:function(e){if(e.__wxTmplId&&delete this._idNodeMap[e.__wxTmplId],e.childNodes)for(var t=0;t<e.childNodes.length;t++)this.removeNode(e.childNodes[t]);e.shadowRoot instanceof j.Element&&this.removeNode(e.shadowRoot)}}]),e}(),U=BabelRuntimeHelpers.slicedToArray;var V=e.n(U),G={WX_EVENT:11,REQUEST_SAVE:12,COMPONENT_DEF:21,SAVE_STATE:22,RESTORE_STATE:23,FLOW_INITIAL_RENDERING_CACHE:24,FLOW_CLEAR_INITIAL_RENDERING_CACHE:25,FLOW_SET_SUBPACKAGE_LOADED:26,SET_DATA_CALLBACK:32,FLOW_SET_DATA:33,FLUSH_BLOCKED:43,FLOW_GROUP:41,FLOW_GROUP_END:42,FLOW_DEPTH:2,FLOW_INITIAL_CREATION:3,FLOW_UPDATE:6,FLOW_DATA_OBSERVER:8,FLOW_APPLY_PROPERTY:4,FLOW_MINIPULATE_CHILD:7,FLOW_CREATE_NODE:5,FLOW_REPEAT:9,FLOW_VIEW_INFO:63,REQUEST_TAB:51,COMPONENT_DEF_TAB:52,FLOW_CREATE_TAB:53,DESTROY_TAB:54,REQUEST_BROADCAST_VIEW_ID:61,RESPONSE_BROADCAST_VIEW_ID:62,BANNING_MAP:90,PERFORMANCE_DATA:91,CALL_METHOD_FROM_WXS:50,RESPONSE_VIEW_INFO:64,MODEL_VALUE_CHANGE:65,FLOW_SET_NODE_ANIMATION_INFO:100,ANIMATION_TRANSITION_END:101,FLOW_CLEAR_NODE_ANIMATION_INFO:102,CLEAR_ANIMATION_COMPLETE:103,FLOW_SET_NODE_NEXT_ANIMATION_INFO:104,LOAD_COMPONENT_DEF:110,FLOW_WAIT_COMPONENT:112,FLOW_REPLACE_PLACEHOLDER:113,FLOW_COMPONENT_DEF_ADD:120,FLOW_INJECT_SUBPACKAGE:121,FLOW_INJECT_COMPONENT:122,FLOW_HOT_UPDATE:900,FLOW_HOT_UPDATE_CHILD:901,FLOW_HOT_UPDATE_RESET:902,UPDATE_COMPONENT_DEF:903,UPDATE_PERFORMANCE_STAT:800,ENABLE_UPDATE_PERFORMANCE_STAT:801,DISABLE_UPDATE_PERFORMANCE_STAT:802},H={};Object.keys(G).forEach((function(e){H[G[e]]=e}));var Z=function(e){return H[e]||"UNKNOWN_EVENT_".concat(e)},q=0,z=1,Y=2,K=o(),J={},$=1,X=function(e,t,n){void 0===e.__resizers?(e.__resizers=[],function(e){var t=$++;J[t]=e,K.Observer.create((function(e){"detached"===e.status&&delete J[t]})).observe(e,{attachStatus:!0})}(e),e.__resizers[t]=n):e.__resizers[t]=n},Q=function(e,t){void 0!==e.__resizers&&(e.__resizers[t]=void 0)},ee=o(),te=null,ne=function(e){0!==Object.keys(e).length&&(te=e,Ro.listViewId().forEach((function(t){w(G.BANNING_MAP,[e],t)})))},re=function(e){e.$$.style.display="none"},ie=function(e){!function e(t){t instanceof ee.Component?re(t):t instanceof ee.VirtualNode?t.childNodes.forEach((function(t){e(t)})):t instanceof ee.TextNode&&(t.textContent=""),t.__banned=!0}(e)},oe={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},ae={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},se=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],ce={CSS:{},springs:{}};function ue(e,t,n){return Math.min(Math.max(e,t),n)}function le(e,t){return e.indexOf(t)>-1}function de(e,t){return e.apply(null,t)}var fe={arr:function(e){return Array.isArray(e)},obj:function(e){return le(Object.prototype.toString.call(e),"Object")},pth:function(e){return fe.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||fe.svg(e)||e.$$},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return fe.hex(e)||fe.rgb(e)||fe.hsl(e)},key:function(e){return!oe.hasOwnProperty(e)&&!ae.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function pe(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function he(e,t){var n=pe(e),r=ue(fe.und(n[0])?1:n[0],.1,100),i=ue(fe.und(n[1])?100:n[1],.1,100),o=ue(fe.und(n[2])?10:n[2],.1,100),a=ue(fe.und(n[3])?0:n[3],.1,100),s=Math.sqrt(i/r),c=o/(2*Math.sqrt(i*r)),u=c<1?s*Math.sqrt(1-c*c):0,l=c<1?(c*s-a)/u:-a+s;function d(e){var n=t?t*e/1e3:e;return n=c<1?Math.exp(-n*c*s)*(1*Math.cos(u*n)+l*Math.sin(u*n)):(1+l*n)*Math.exp(-n*s),0===e||1===e?e:1-n}return t?d:function(){var t=ce.springs[e];if(t)return t;for(var n=1/6,r=0,i=0;;)if(1===d(r+=n)){if(++i>=16)break}else i=0;var o=r*n*1e3;return ce.springs[e]=o,o}}function ge(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var ve,_e,me=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function i(e,i,o){return((t(i,o)*e+n(i,o))*e+r(i))*e}function o(e,i,o){return 3*t(i,o)*e*e+2*n(i,o)*e+r(i)}return function(t,n,r,a){if(0<=t&&t<=1&&0<=r&&r<=1){var s=new Float32Array(11);if(t!==n||r!==a)for(var c=0;c<11;++c)s[c]=i(c*e,t,r);return function(e){return t===n&&r===a||0===e||1===e?e:i(u(e),n,a)}}function u(n){for(var a=0,c=1;10!==c&&s[c]<=n;++c)a+=e;--c;var u=a+(n-s[c])/(s[c+1]-s[c])*e,l=o(u,t,r);return l>=.001?function(e,t,n,r){for(var a=0;a<4;++a){var s=o(t,n,r);if(0===s)return t;t-=(i(t,n,r)-e)/s}return t}(n,u,t,r):0===l?u:function(e,t,n,r,o){var a,s,c=0;do{(a=i(s=t+(n-t)/2,r,o)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++c<10);return s}(n,a,a+e,t,r)}}}(),ye=(ve={linear:function(){return function(e){return e}}},_e={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=ue(e,1,10),r=ue(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){_e[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(_e).forEach((function(e){var t=_e[e];ve["easeIn"+e]=t,ve["easeOut"+e]=function(e,n){return function(r){return 1-t(e,n)(1-r)}},ve["easeInOut"+e]=function(e,n){return function(r){return r<.5?t(e,n)(2*r)/2:1-t(e,n)(-2*r+2)/2}}})),ve);function be(e,t){if(fe.fnc(e))return e;var n=e.split("(")[0],r=ye[n],i=pe(e);switch(n){case"spring":return he(e,t);case"cubicBezier":return de(me,i);case"steps":return de(ge,i);default:return de(r,i)}}function we(e){try{return document.querySelectorAll(e)}catch(e){return}}function Ie(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,i=[],o=0;o<n;o++)if(o in e){var a=e[o];t.call(r,a,o,e)&&i.push(a)}return i}function Se(e){return e.reduce((function(e,t){return e.concat(fe.arr(t)?Se(t):t)}),[])}function Ce(e){return fe.arr(e)?e:(fe.str(e)&&(e=we(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function Te(e,t){return e.some((function(e){return e===t}))}function Ee(e){var t={};for(var n in e)t[n]=e[n];return t}function ke(e,t){var n=Ee(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function xe(e,t){var n=Ee(e);for(var r in t)n[r]=fe.und(e[r])?t[r]:e[r];return n}function Ae(e){return fe.rgb(e)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+n[1]+",1)":t:fe.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):fe.hsl(e)?function(e){var t,n,r,i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),o=parseInt(i[1],10)/360,a=parseInt(i[2],10)/100,s=parseInt(i[3],10)/100,c=i[4]||1;function u(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=r=s;else{var l=s<.5?s*(1+a):s+a-s*a,d=2*s-l;t=u(d,l,o+1/3),n=u(d,l,o),r=u(d,l,o-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+c+")"}(e):void 0;var t,n}function Pe(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function De(e,t){return fe.fnc(e)?e(t.target,t.id,t.total):e}function Oe(e,t){return e.getAttribute(t)}function Ne(e,t,n){if(e=e.$$||e,Te([n,"deg","rad","turn"],Pe(t)))return t;var r=ce.CSS[t+n];if(!fe.und(r))return r;var i=document.createElement(e.tagName),o=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;o.appendChild(i),i.style.position="absolute",i.style.width=100+n;var a=100/i.offsetWidth;o.removeChild(i);var s=a*parseFloat(t);return ce.CSS[t+n]=s,s}function Re(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),i=e.style[t]||getComputedStyle(e.$$||e).getPropertyValue(r)||"0";return n?Ne(e,i,n):i}}function Me(e,t){return fe.dom(e)&&!fe.inp(e)&&(Oe(e,t)||fe.svg(e)&&e[t])?"attribute":fe.dom(e)&&Te(se,t)?"transform":fe.dom(e)&&"transform"!==t&&Re(e,t)?"css":null!=e[t]?"object":void 0}function Le(e){if(fe.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map;t=r.exec(n);)i.set(t[1],t[2]);return i}}function Be(e,t,n,r){var i=le(t,"scale")?1:0+function(e){return le(e,"translate")||"perspective"===e?"px":le(e,"rotate")||le(e,"skew")?"deg":void 0}(t),o=Le(e).get(t)||i;return n&&(n.transforms.list.set(t,o),n.transforms.last=t),r?Ne(e,o,r):o}function Fe(e,t,n,r){switch(Me(e,t)){case"transform":return Be(e,t,r,n);case"css":return Re(e,t,n);case"attribute":return Oe(e,t);default:return e[t]||0}}function je(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=Pe(e)||0,i=parseFloat(t),o=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return i+o+r;case"-":return i-o+r;case"*":return i*o+r}}function We(e,t){if(fe.col(e))return Ae(e);if(/\s/g.test(e))return e;var n=Pe(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function Ue(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Ve(e){for(var t,n=e.points,r=0,i=0;i<n.numberOfItems;i++){var o=n.getItem(i);i>0&&(r+=Ue(t,o)),t=o}return r}function Ge(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*Oe(e,"r")}(e);case"rect":return function(e){return 2*Oe(e,"width")+2*Oe(e,"height")}(e);case"line":return function(e){return Ue({x:Oe(e,"x1"),y:Oe(e,"y1")},{x:Oe(e,"x2"),y:Oe(e,"y2")})}(e);case"polyline":return Ve(e);case"polygon":return function(e){var t=e.points;return Ve(e)+Ue(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function He(e,t){var n=t||{},r=n.el||function(e){for(var t=e.parentNode;fe.svg(t)&&fe.svg(t.parentNode);)t=t.parentNode;return t}(e),i=r.getBoundingClientRect(),o=Oe(r,"viewBox"),a=i.width,s=i.height,c=n.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:r,viewBox:c,x:c[0]/1,y:c[1]/1,w:a/c[2],h:s/c[3]}}function Ze(e,t){function n(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var r=He(e.el,e.svg),i=n(),o=n(-1),a=n(1);switch(e.property){case"x":return(i.x-r.x)*r.w;case"y":return(i.y-r.y)*r.h;case"angle":return 180*Math.atan2(a.y-o.y,a.x-o.x)/Math.PI}}function qe(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=We(fe.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:fe.str(e)||t?r.split(n):[]}}function ze(e){return Ie(e?Se(fe.arr(e)?e.map(Ce):Ce(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function Ye(e){var t=ze(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:Le(e)}}}))}function Ke(e,t){var n=Ee(t);if(/^spring/.test(n.easing)&&(n.duration=he(n.easing)),fe.arr(e)){var r=e.length;2===r&&!fe.obj(e[0])?e={value:e}:fe.fnc(t.duration)||(n.duration=t.duration/r)}var i=fe.arr(e)?e:[e];return i.map((function(e,n){var r=fe.obj(e)&&!fe.pth(e)?e:{value:e};return fe.und(r.delay)&&(r.delay=n?0:t.delay),fe.und(r.endDelay)&&(r.endDelay=n===i.length-1?t.endDelay:0),r})).map((function(e){return xe(e,n)}))}function Je(e,t){var n=[],r=t.keyframes;for(var i in r&&(t=xe(function(e){for(var t=Ie(Se(e.map((function(e){return Object.keys(e)}))),(function(e){return fe.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var i=t[r];n[i]=e.map((function(e){var t={};for(var n in e)fe.key(n)?n==i&&(t.value=e[n]):t[n]=e[n];return t}))},i=0;i<t.length;i++)r(i);return n}(r),t)),t)fe.key(i)&&n.push({name:i,tweens:Ke(t[i],e)});return n}function $e(e,t){var n;return e.tweens.map((function(r){var i=function(e,t){var n={};for(var r in e){var i=De(e[r],t);fe.arr(i)&&1===(i=i.map((function(e){return De(e,t)}))).length&&(i=i[0]),n[r]=i}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,t),o=i.value,a=fe.arr(o)?o[1]:o,s=Pe(a),c=Fe(t.target,e.name,s,t),u=n?n.to.original:c,l=fe.arr(o)?o[0]:u,d=Pe(l)||Pe(c),f=s||d;return fe.und(a)&&(a=u),i.from=qe(l,f),i.to=qe(je(a,l),f),i.start=n?n.end:0,i.end=i.start+i.delay+i.duration+i.endDelay,i.easing=be(i.easing,i.duration),i.isPath=fe.pth(o),i.isColor=fe.col(i.from.original),i.isColor&&(i.round=1),n=i,i}))}var Xe={css:function(e,t,n){if(e.$$)return"".concat(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),":").concat(wx.transformRpx(" "+n),";");e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,i){if(r.list.set(t,n),t===r.last||i){var o="";if(r.list.forEach((function(e,t){o+=t+"("+e+") "})),e.$$)return"transform:".concat(wx.transformRpx(" "+o),";");e.style.transform=o}return""}};function Qe(e,t){Ye(e).forEach((function(e){for(var n in t){var r=De(t[n],e),i=e.target,o=Pe(r),a=Fe(i,n,o,e),s=je(We(r,o||Pe(a)),a),c=Me(i,n);Xe[c](i,n,s,e.transforms,!0)}}))}function et(e,t){return Ie(Se(e.map((function(e){return t.map((function(t){return function(e,t){var n=Me(e.target,t.name);if(n){var r=$e(t,e),i=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:i.end,delay:r[0].delay,endDelay:i.endDelay}}}(e,t)}))}))),(function(e){return!fe.und(e)}))}function tt(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},i={};return i.duration=n?Math.max.apply(Math,e.map((function(e){return r(e)+e.duration}))):t.duration,i.delay=n?Math.min.apply(Math,e.map((function(e){return r(e)+e.delay}))):t.delay,i.endDelay=n?i.duration-Math.max.apply(Math,e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,i}var nt=0;var rt,it=[],ot=function(){function e(){rt=requestAnimationFrame(t)}function t(t){var n=it.length;if(n){for(var r=0;r<n;){var i=it[r];if(i.paused){var o=it.indexOf(i);o>-1&&(it.splice(o,1),n=it.length)}else i.tick(t);r++}e()}else rt=cancelAnimationFrame(rt)}return e}();function at(e){void 0===e&&(e={});var t,n=0,r=0,i=0,o=0,a=null;function s(e){var t=window.Promise&&new Promise((function(e){return a=e}));return e.finished=t,t}var c=function(e){var t=ke(oe,e),n=ke(ae,e),r=Je(n,e),i=Ye(e.targets),o=et(i,r),a=tt(o,n),s=nt;return nt++,xe(t,{id:s,children:[],animatables:i,animations:o,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}(e);s(c);function u(){var e=c.direction;"alternate"!==e&&(c.direction="normal"!==e?"normal":"reverse"),c.reversed=!c.reversed,t.forEach((function(e){return e.reversed=c.reversed}))}function l(e){return c.reversed?c.duration-e:e}function d(){n=0,r=l(c.currentTime)*(1/at.speed)}function f(e,t){t&&t.seek(e-t.timelineOffset)}function p(e){for(var t=0,n=c.animations,r=n.length,i=[];t<r;){var o=n[t],a=o.animatable,s=o.tweens,u=s.length-1,l=s[u];u&&(l=Ie(s,(function(t){return e<t.end}))[0]||l);for(var d=ue(e-l.start-l.delay,0,l.duration)/l.duration,f=isNaN(d)?1:l.easing(d),p=l.to.strings,h=l.round,g=[],v=l.to.numbers.length,_=void 0,m=0;m<v;m++){var y=void 0,b=l.to.numbers[m],w=l.from.numbers[m]||0;y=l.isPath?Ze(l.value,f*b):w+f*(b-w),h&&(l.isColor&&m>2||(y=Math.round(y*h)/h)),g.push(y)}var I=p.length;if(I){_=p[0];for(var S=0;S<I;S++){p[S];var C=p[S+1],T=g[S];isNaN(T)||(_+=C?T+C:T+" ")}}else _=g[0];var E=Xe[o.type](a.target,o.property,_,a.transforms);i.push(E),o.currentValue=_,t++}1===c.animatables.length&&c.animatables[0].target.$$&&c.animatables[0].target.setNodeStyle(i.join(" "),z)}function h(e){c[e]&&!c.passThrough&&c[e](c)}function g(e){var d=c.duration,g=c.delay,v=d-c.endDelay,_=l(e);c.progress=ue(_/d*100,0,100),c.reversePlayback=_<c.currentTime,t&&function(e){if(c.reversePlayback)for(var n=o;n--;)f(e,t[n]);else for(var r=0;r<o;r++)f(e,t[r])}(_),!c.began&&c.currentTime>0&&(c.began=!0,h("begin")),!c.loopBegan&&c.currentTime>0&&(c.loopBegan=!0,h("loopBegin")),_<=g&&0!==c.currentTime&&p(0),(_>=v&&c.currentTime!==d||!d)&&p(d),_>g&&_<v?(c.changeBegan||(c.changeBegan=!0,c.changeCompleted=!1,h("changeBegin")),h("change"),p(_)):c.changeBegan&&(c.changeCompleted=!0,c.changeBegan=!1,h("changeComplete")),c.currentTime=ue(_,0,d),c.began&&h("update"),e>=d&&(r=0,c.remaining&&!0!==c.remaining&&c.remaining--,c.remaining?(n=i,h("loopComplete"),c.loopBegan=!1,"alternate"===c.direction&&u()):(c.paused=!0,c.completed||(c.completed=!0,h("loopComplete"),h("complete"),!c.passThrough&&"Promise"in window&&(a(),s(c)))))}return c.reset=function(){var e=c.direction;c.passThrough=!1,c.currentTime=0,c.progress=0,c.paused=!0,c.began=!1,c.loopBegan=!1,c.changeBegan=!1,c.completed=!1,c.changeCompleted=!1,c.reversePlayback=!1,c.reversed="reverse"===e,c.remaining=c.loop,t=c.children;for(var n=o=t.length;n--;)c.children[n].reset();(c.reversed&&!0!==c.loop||"alternate"===e&&1===c.loop)&&c.remaining++,p(c.reversed?c.duration:0)},c.set=function(e,t){return Qe(e,t),c},c.tick=function(e){i=e,n||(n=i),g((i+(r-n))*at.speed)},c.seek=function(e){g(l(e))},c.pause=function(){c.paused=!0,d()},c.play=function(){c.paused&&(c.completed&&c.reset(),c.paused=!1,it.push(c),d(),rt||ot())},c.reverse=function(){u(),d()},c.restart=function(){c.reset(),c.play()},c.reset(),c.autoplay&&c.play(),c}function st(e,t){for(var n=t.length;n--;)Te(e,t[n].animatable.target)&&t.splice(n,1)}at.version="3.1.0",at.speed=1,at.running=it,at.remove=function(e){for(var t=ze(e),n=it.length;n--;){var r=it[n],i=r.animations,o=r.children;st(t,i);for(var a=o.length;a--;){var s=o[a],c=s.animations;st(t,c),c.length||s.children.length||o.splice(a,1)}i.length||o.length||r.pause()}},at.get=Fe,at.set=Qe,at.convertPx=Ne,at.path=function(e,t){var n=fe.str(e)?we(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:He(n),totalLength:Ge(n)*(r/100)}}},at.setDashoffset=function(e){var t=Ge(e);return e.setAttribute("stroke-dasharray",t),t},at.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?be(t.easing):null,i=t.grid,o=t.axis,a=t.from||0,s="first"===a,c="center"===a,u="last"===a,l=fe.arr(e),d=l?parseFloat(e[0]):parseFloat(e),f=l?parseFloat(e[1]):0,p=Pe(l?e[1]:e)||0,h=t.start||0+(l?d:0),g=[],v=0;return function(e,t,_){if(s&&(a=0),c&&(a=(_-1)/2),u&&(a=_-1),!g.length){for(var m=0;m<_;m++){if(i){var y=c?(i[0]-1)/2:a%i[0],b=c?(i[1]-1)/2:Math.floor(a/i[0]),w=y-m%i[0],I=b-Math.floor(m/i[0]),S=Math.sqrt(w*w+I*I);"x"===o&&(S=-w),"y"===o&&(S=-I),g.push(S)}else g.push(Math.abs(a-m));v=Math.max.apply(Math,g)}r&&(g=g.map((function(e){return r(e/v)*v}))),"reverse"===n&&(g=g.map((function(e){return o?e<0?-1*e:-e:Math.abs(v-e)})))}return h+(l?(f-d)/v:d)*(Math.round(100*g[t])/100)+p}},at.timeline=function(e){void 0===e&&(e={});var t=at(e);return t.duration=0,t.add=function(n,r){var i=it.indexOf(t),o=t.children;function a(e){e.passThrough=!0}i>-1&&it.splice(i,1);for(var s=0;s<o.length;s++)a(o[s]);var c=xe(n,ke(ae,e));c.targets=c.targets||e.targets;var u=t.duration;c.autoplay=!1,c.direction=t.direction,c.timelineOffset=fe.und(r)?u:je(r,u),a(t),t.seek(c.timelineOffset);var l=at(c);a(l),o.push(l);var d=tt(o,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},at.easing=be,at.penner=ye,at.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const ct=at;var ut=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom","borderRadius"],lt=([].concat(ut,["duration","direction","loop","delay","endDelay","easing","keyframes","value","round"]),["easeInElastic","easeOutElastic","easeInOutElastic","easeSpringElastic"]),dt=Object.assign,ft=Object.keys,pt=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","delay","duration","offset","easing"],ht=["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier","steps"],gt=function(e,t){return e=__webViewSDK__.predefinedColor[e]||e,t?[e,e]:e},vt=function(e,t){var n=e.length,r=0;return e.map((function(e,i){var o,a={};o="offset"in e?e.offset:1===n?1:i/(n-1);var s=r===o;return ft(e).forEach((function(t){pt.indexOf(t)>-1||("transform"!==t?a[t]=gt(e[t],s):dt(a,function(e,t){if("none"===(e=e.toLowerCase().trim()))return{};for(var n,r={},i=pt.map((function(e){return e.toLowerCase()})),o={scale3d:"AAA",translate:"Aa",translate3d:"AAA",rotate3d:"AAAA",matrix3d:"AAAAAA",matrix:"AAAAAAAAAAAAAAAA"},a=["rotate3d","matrix","matrix3d"],s=/\s*(\w+)\(([^)]*)\)/g,c=0;n=s.exec(e);){if(n.index!==c)return{};c=n.index+n[0].length;var u=n[1],l=n[2].split(",");if(i.indexOf(u)>-1)r[u.replace(/(x|y|z)$/,(function(e){return e.toUpperCase()}))]=gt(l.join(" "),t);else{if(!(ft(o).indexOf(u)>-1))return{};var d=o[u];if(l.length>d.length)return{};for(var f=d.length-1;f>=0;f--){var p=d[f];if("a"!==p||l[f]){if("A"===p&&!l[f])return{};-1===a.indexOf(u)&&(r[u.replace("3d","")+String.fromCharCode(88+f)]=gt(l[f].trim(),t))}}}}return r}(e[t],s)))})),s?a.duration=0:(a.duration=(o-r)*t,r=o),a}))},_t=function(e){for(var t=0;t<ht.length&&0!==e.indexOf(ht[t]);t++);if(t===ht.length)return"linear";switch(e){case"ease":return"cubicBezier(0.25, 0.1, 0.25, 1)";case"ease-in":return"cubicBezier(0.42, 0, 1, 1)";case"ease-out":return"cubicBezier(0, 0, 0.58, 1)";case"ease-in-out":return"cubicBezier(0.42, 0, 0.58, 1)";default:return e.replace(/^cubic-bezier/,"cubicBezier")}},mt=function(){function e(t,n){x()(this,e),this._nativeSupported="function"==typeof HTMLElement.prototype.animate;var r=t.keyframeOptions,i=this.direction=r.direction;if(this.timeline=n,this._nativeSupported){var o=function(e,t){var n=t.easing;return delete t.easing,e.map((function(e){return e.easing=n,e}))}(t.keyframeSet,r);this._inst=t.element.$$.animate(o,dt(r,{fill:"both"})),this._inst.pause()}else this._inst=ct({targets:t.element,keyframes:vt(t.keyframeSet,r.duration),autoplay:!1,loop:r.iterations===1/0||r.iterations,easing:_t(r.easing),direction:"normal",delay:"reverse"===i?r.endDelay:r.delay,endDelay:"reverse"===i?r.delay:r.endDelay});n._driven(this)}return P()(e,[{key:"currentTime",set:function(e){if(!isNaN(e)){var t=this._inst;this._nativeSupported?t.currentTime=e:"reverse"===this.direction?t.seek(t.duration-e):t.seek(e)}}},{key:"cancel",value:function(){this._nativeSupported?this._inst.cancel():this._inst.reset(),this.timeline._destroy(),this._inst=null}}]),e}(),yt=function(){function e(t,n){if(x()(this,e),n.scrollSource){if(this._scrollNode=window.__DOMTree__.shadowRoot.querySelector(n.scrollSource),this._scrollNode||(this._scrollNode=t&&t.querySelector(n.scrollSource)),!this._scrollNode)throw new Error("Cannot find scroll source by ".concat(n.scrollSource," selector."))}else this._scrollNode=window.__DOMTree__;this.orientation=n.orientation||"vertical",this.startScrollOffset=n.startScrollOffset,this.endScrollOffset=n.endScrollOffset,this.timeRange=n.timeRange,this.fill=n.fill||"both",this._scroll=this._scroll.bind(this)}return P()(e,[{key:"_calcCurrentTime",value:function(e,t){var n=this.startScrollOffset,r=this.endScrollOffset,i=this.fill,o=this.timeRange,a=e.scrollTop,s=e.scrollHeight-t.$$.offsetHeight;return"horizontal"===this.orientation&&(a=e.scrollLeft,s=e.scrollWidth-t.$$.offsetWidth),a<n?"none"===i||"forwards"===i?NaN:0:a>=r?r<s&&("none"===i||"backwards"===i)?NaN:o:n>=r?NaN:(a-n)/(r-n)*o}},{key:"_scroll",value:function(){var e=this._calcCurrentTime(this._scrollNode===window.__DOMTree__?window.__DOMTree__.$$:this._scrollNode.getScrollPosition(),this._scrollNode);this._animation.currentTime=e}},{key:"_driven",value:function(e){this._animation=e,this._scrollNode===window.__DOMTree__?document.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}),this._scroll()}},{key:"_destroy",value:function(){this._scrollNode===window.__DOMTree__?document.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0})}}]),e}(),bt=function(e,t,n,r,i){var o={element:t,keyframeSet:n,keyframeOptions:{delay:r.delay||0,direction:r.direction||"normal",duration:r.duration||0,easing:r.easing||"linear",endDelay:r.endDelay||0,iterations:1}},a=new yt(e,i);t.__scrollAnimations=t.__scrollAnimations||[],t.__scrollAnimations.push(new mt(o,a))},wt=function(e,t){for(var n=e.nodeId,r=e.selector,i=e.options,o=e.duration,a=e.timeline,s=t.nodeId.getNodeById(n),c=(s=s?s.shadowRoot:window.__DOMTree__?window.__DOMTree__.shadowRoot:null)?s.querySelectorAll(r):[],u=0;u<c.length;u++)bt(s,c[u],i,{duration:o},a)},It=function(e,t){for(var n=[],r=0;r<e.length;++r)n.push(Object.assign({},e[r]));n[0].offset=0,n[n.length-1].offset=1;for(var i=function(e){n[e].offset=function(e,t){if("number"==typeof t[e].offset)return t[e].offset;for(var n=e+1;n<t.length;++n)if(t[n].offset)return(t[n].offset-t[e-1].offset)/(n-e+1)+t[e-1].offset;return 0}(e,n),n[e].duration=0===e?0:(n[e].offset-n[e-1].offset)*t,lt.some((function(t){return n[e].ease&&n[e].ease.startsWith(t)}))&&(n[e].type="animeJS")},o=0;o<n.length;++o)i(o);return n},St=o(),Ct=void 0!==wx&&wx.transformRpx,Tt={},Et={},kt=0,xt=1,At=2,Pt=function(e){return Object.keys(e).filter((function(t){return!(/transform|transition/i.test(t)&&""===e[t]||""===t.trim()||void 0===e[t]||""===e[t]||!isNaN(parseInt(t,10)))})).map((function(t){var n=t.replace(/([A-Z]{1})/g,(function(e){return"-".concat(e.toLowerCase())}));return"".concat(n,":").concat(e[t])})).join(";")},Dt=function e(t,n){var r=t.nodeId,i=t.webviewId,o=t.options,a=t.selector,s=t.reqId,c=t.hasCallback,u=t.fromWxs,l=Mo(r,i);if(l){var d=l.shadowRoot,f=n||d.querySelectorAll(a);if(n){var p=function(){if(u){var e=Ro.instance,t=e.clearAnimationCbMap[s];"function"==typeof t&&(delete e.clearAnimationCbMap[s],St.safeCallback("Clear Animation",t,null,[]))}else w(G.CLEAR_ANIMATION_COMPLETE,{reqId:s})};if(function(e){(e.__scrollAnimations||[]).forEach((function(e){e.cancel()})),e.__scrollAnimations=[]}(f),!o||"function"==typeof o||!f.__styleObj)return f.__animeOptions&&(f.__animeOptions.forEach((function(e){return"function"==typeof e.reset&&e.reset()})),f.__animeOptions=[]),f.setNodeStyle("",z),Q(f,z),f.__styleObj=null,f.__animateStatus=kt,f.__animationPendingQueue=[],void p();var h=f.__styleObj.transform.split(" ");for(var g in o)if(o[g])if(f.__styleObj["backgroundColor"===g?"background-color":g])delete f.__styleObj["backgroundColor"===g?"background-color":g];else for(var v=0;v<h.length;++v)h[v].indexOf(g)>=0&&h.splice(v,1);f.__styleObj.transform=h.join(" "),f.__styleObj["-webkit-transform"]=h.join(" "),f.__styleObj.transition="unset",f.__styleObj.transitionProperty="unset",f.__styleObj["-webkit-transition"]="unset",f.__styleObj["-webkit-transition-property"]="unset";var _=function(e){f.setNodeStyle(Ct(e,!0),z)};_(Pt(f.__styleObj)),X(f,z,_),f.__animateStatus=kt,--Et[s],0===Et[s]&&c&&p()}else{Et[s]=f.length;for(var m=0;m<f.length;++m)e(t,f[m])}}},Ot=function e(t,n){var r=t.nodeId,i=t.webviewId,o=t.selector,a=Mo(r,i);if(a){var s=a.shadowRoot,c=n||s.querySelectorAll(o);if(n)c.__animationPendingQueue&&c.__animationPendingQueue.length>0&&setTimeout((function(){c.__animateStatus=At,Nt(c.__animationPendingQueue.shift(),c,!0)}),32);else for(var u=0;u<c.length;++u)e(JSON.parse(JSON.stringify(t)),c[u])}},Nt=function e(t,n,i){wx.nextTick((function(){var o=t.nodeId,a=t.webviewId,s=t.options,c=t.selector,u=t.reqId,l=t.hasCallback,d=t.type,f=t.isLastAnimation,p=t.fromWxs,h=Mo(o,a);if(h){var g=h.shadowRoot,v=n||g.querySelectorAll(c);if(n){if(v.__animateStatus===xt||v.__animateStatus===At&&!i)return v.__animationPendingQueue||(v.__animationPendingQueue=[]),void v.__animationPendingQueue.push(JSON.parse(JSON.stringify(t)));v.__hasCallback=l,v.__reqId=u,v.__args=JSON.stringify(t);var _=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom"],m=["opacity","backgroundColor","width","height","left","top","bottom"],y=["rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ"],b="animeJS"===d,I=function(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(v.__animateStatus===xt){if(--Tt[v.__reqId],v.__animationPendingQueue&&v.__animationPendingQueue.length>0&&!v.__hasCallback?(v.__animateStatus=At,e(v.__animationPendingQueue.shift(),v,!0)):v.__animateStatus=kt,"function"==typeof n){v.__styleObj.transition="unset",v.__styleObj.transitionProperty="unset",v.__styleObj["-webkit-transition"]="unset",v.__styleObj["-webkit-transition-property"]="unset";var i=Pt(v.__styleObj);n(i)}if(0===Tt[v.__reqId]&&v.__hasCallback&&r)if(p){var o=Ro.instance,a=o.applyAnimationCbMap[v.__reqId];"function"==typeof a&&(delete o.applyAnimationCbMap[v.__reqId],St.safeCallback("Animation",a,null,[])),Ot(t)}else w(G.ANIMATION_TRANSITION_END,{reqId:v.__reqId,args:v.__args})}},S=[];for(var C in s)_.indexOf(C)>=0&&(m.indexOf(C)>=0?S.push({type:"style",args:["backgroundColor"===C?"background-color":C,s[C]]}):y.indexOf(C)>=0?S.push({type:C,args:[s[C]]}):S.push({type:C,args:s[C]}));var T={transition:{delay:s.delay||0,duration:s.duration||0,timingFunction:s.ease||"linear"},transformOrigin:s.transformOrigin||"50% 50% 0"},E={option:T,animates:S},k=wx.animationToStyle(E),x=k.transition,A=k.transitionProperty,P=k.transform,D=k.transformOrigin,O=k.style,N=v.__styleObj?Object.assign({},v.__styleObj,{transition:x,transform:P,transitionProperty:A,transformOrigin:D}):{transition:x,transform:P,transitionProperty:A,transformOrigin:D};for(var R in N["-webkit-transition"]=N.transition,N["-webkit-transform"]=N.transform,N["-webkit-transition-property"]=N.transitionProperty,N["-webkit-transform-origin"]=N.transformOrigin,O)N[R]=O[R];if(v.__styleObj&&N.transform===v.__styleObj.transform){var M=!0;for(var L in N)m.indexOf(L)>=0&&v.__styleObj[L]!==N[L]&&(M=!1);if(M)return void setTimeout((function(){v.__animationPendingQueue&&v.__animationPendingQueue.length>0&&e(v.__animationPendingQueue.shift(),v,!0)}),T.duration)}if(0===T.transition.duration?(N.transition="unset",N.transitionProperty="unset",N["-webkit-transition"]="unset",N["-webkit-transition-property"]="unset"):v.__animateStatus=xt,v.__styleObj=N,b){s.targets=v,s.ease&&(s.easing=s.ease,delete s.ease),function(e){Object.keys(e).forEach((function(t){if(ut.includes(t)){var n=e[t];"string"==typeof n?e[t]=wx.transformRpx(e[t],!0):"object"===r()(n)&&"string"==typeof n.value?e[t].value=wx.transformRpx(e[t].value,!0):Array.isArray(n)&&n.map((function(e){if("string"==typeof e.value)e.value=wx.transformRpx(e.value,!0);else if("string"==typeof e)return wx.transformRpx(e,!0);return e}))}}))}(s),v.__animateStatus=xt,v.__banned&&re(v);var B=s.complete;s.complete=function(){I(void 0,f),"function"==typeof B&&B.apply(void 0,arguments)};var F=ct(s);v.__animeOptions||(v.__animeOptions=[]),v.__animeOptions.push(F)}else{var j=Pt(N),W=function(e){var t=function(){v.setNodeStyle(Ct(e,!0),z)};t(),X(v,z,t)};0===T.transition.duration?W(j):setTimeout((function(){W(j)}),32),v.__banned&&re(v),v.__animationListener||(v.addListener("transitionend",(function(){I(W)})),v.__animationListener=!0),0===T.transition.duration&&(v.__animationPendingQueue&&v.__animationPendingQueue.length>0?(v.__animateStatus=At,e(v.__animationPendingQueue.shift(),v,!0)):v.__animateStatus=kt)}}else{Tt[u]=v.length;for(var U=0;U<v.length;++U)e(JSON.parse(JSON.stringify(t)),v[U])}}}))},Rt=function(e,t){var n=e.$$,r={};if(t.id&&(r.id=e.id||""),t.dataset&&(r.dataset=e.dataset||{}),t.mark&&(r.mark=e.collectMarks()||{}),t.rect||t.size){var i=n.getBoundingClientRect();t.rect&&(r.left=i.left,r.right=i.right,r.top=i.top,r.bottom=i.bottom),t.size&&(r.width=i.width,r.height=i.height)}if(t.properties&&t.properties.forEach((function(t){var n=t.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));St.Component.hasPublicProperty(e,n)&&(r[n]=e[n])})),t.scrollOffset)if(e.hasBehavior("wx-positioning-container")){var o=e.getScrollPosition();r.scrollLeft=o.scrollLeft,r.scrollTop=o.scrollTop,r.scrollWidth=o.scrollWidth,r.scrollHeight=o.scrollHeight}else r.scrollLeft=0,r.scrollTop=0,r.scrollWidth=0,r.scrollHeight=0;if(t.computedStyle&&t.computedStyle.length)for(var a=window.getComputedStyle(n),s=0,c=t.computedStyle.length;s<c;s++){var u=t.computedStyle[s];u&&void 0!==a[u]&&(r[u]=a[u])}return t.context&&(r.contextIs=e.is,r.contextId="function"==typeof e.getContextId&&e.getContextId(),r.contextCanvasId=e.canvasId||""),t.node&&(r.nodeIs=e.is,r.nodeId="function"==typeof e.getContextId&&e.getContextId(),r.nodeCanvasId=e.canvasId||"",r.nodeCanvasType=e.type||"",r.nodeNodeId=e.getNodeId()),r},Mt=function(e,t){var n=[],r=e.pluginId;return e.queue.forEach((function(e){var i=e.component,o=e.selector,a=e.single,s=e.fields,c=null;if(0===i)c=function(e){var t={};return e.id&&(t.id=""),e.dataset&&(t.dataset={}),e.mark&&(t.mark={}),e.rect&&(t.left=0,t.right=0,t.top=0,t.bottom=0),e.size&&(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight),e.scrollOffset&&(t.scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft||0,t.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||0,t.scrollWidth=document.documentElement.scrollWidth||document.body.scrollWidth||0,t.scrollHeight=document.documentElement.scrollHeight||document.body.scrollHeight||0),t}(s);else{var u=t.nodeId.getNodeById(i),l=!1;if(u?(St.Component.getComponentOptions(u).writeOnly&&(l=!0),u=u.shadowRoot):r||(u=window.__DOMTree__?window.__DOMTree__.shadowRoot:null),a){var d=u&&!l?u.querySelector(o):null;c=d?Rt(d,s):null}else{var f=u&&!l?u.querySelectorAll(o):[];c=[];for(var p=0;p<f.length;p++)c.push(Rt(f[p],s))}}n.push(c)})),n},Lt=o(),Bt={},Ft={},jt={},Wt=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},Ut=function(e,t){var n={left:e.left<t.left?t.left:e.left,top:e.top<t.top?t.top:e.top,right:e.right>t.right?t.right:e.right,bottom:e.bottom>t.bottom?t.bottom:e.bottom,width:0,height:0};return n.right>n.left?n.width=n.right-n.left:n.right=n.left=n.bottom=n.top=0,n.bottom>n.top?n.height=n.bottom-n.top:n.right=n.left=n.bottom=n.top=0,n},Vt=function(e){var t=e.targetNode,n=e.relatives,r=e.thresholds,i=e.minWidthOrHeight,o=e.cb,a=e.currentRatio,s=function(e){for(var t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,r=null,i=0;i<e.length;i++){var o=e[i],a=o.node,s=o.margins,c=a?a.$$.getBoundingClientRect():{left:0,top:0,right:t,bottom:n,width:t,height:n},u={left:c.left-s.left,top:c.top-s.top,right:c.right+s.right,bottom:c.bottom+s.bottom};r=r?Ut(r,u):u}return r}(n),c=Wt(t.$$.getBoundingClientRect());c.right-c.left<i&&(c.right=c.left+i,c.width=i),c.bottom-c.top<i&&(c.bottom=c.top+i,c.height=i);var u=Ut(s,c),l=c.width*c.height,d=l?u.width*u.height/l:0;e.currentRatio=d;var f=void 0===a;d!==a&&r.forEach((function(e){if(f)return!1;(d<=e&&a>=e||d>=e&&a<=e)&&(f=!0)})),f&&o.call(t,{id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:c,intersectionRatio:d,intersectionRect:Wt(u),relativeRect:s})},Gt=function(e){return{left:(e=e||{}).left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}},Ht=function(e,t,n,r,i){var o=null;if((r=r||{}).observeAll)o=e.querySelectorAll(t);else{var a=e.querySelector(t);o=a?[a]:[]}o.length||console.warn('For developer:Node "'+t+'" is not found. Intersection observer will not trigger.');var s=[];return n.forEach((function(t){var n=t.selector,r=t.margins,i=null==n?null:e.querySelector(n);i||null==n?s.push({node:i,margins:Gt(r)}):console.warn('For developer:Node "'+n+'" is not found. The relative node for intersection observer will be ignored.')})),s.length||console.warn("For developer:Intersection observer will be ignored because no relative nodes are found."),function(e,t,n,r,i,o){var a=M();if(!e.length||!t.length)return a;var s=e.length;return jt[a]=s,e.forEach((function(e,c){var u=a+"#"+c,l={targetNode:e,relatives:t,thresholds:n,currentRatio:r,minWidthOrHeight:i,cb:o},d=Lt.Observer.create((function(e){"attached"===e.status?(Bt[u]=l,requestAnimationFrame((function(){Vt(l)}))):"detached"===e.status&&(delete Bt[u],d.disconnect(),delete Ft[u],--s||delete jt[a])}));Ft[u]=d,d.observe(e,{attachStatus:!0}),Lt.Element.isAttached(e)&&(Bt[u]=l,requestAnimationFrame((function(){Vt(l)})))})),a}(o,s,r.thresholds||[0],r.initialRatio||0,r.minWidthOrHeight||0,i)},Zt=!1,qt=function(){Zt||(Zt=!0,requestAnimationFrame((function(){Zt=!1,function(){for(var e in Bt)Vt(Bt[e])}()})))};"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.addEventListener&&(document.addEventListener("pageReRender",(function(){qt()})),window.addEventListener("scroll",(function(){qt()}),{capture:!0,passive:!0}));var zt=function(e,t,n){if("addIntersectionObserver"===e.type){var r=null;if(e.nodeId){var i=t.nodeId.getNodeById(e.nodeId);if(!i)return;r=i.shadowRoot}else e.pluginId||(r=window.__DOMTree__.shadowRoot);if(!r)return;return{observerId:Ht(r,e.targetSelector,e.relativeInfo,e.options,(function(e){n({info:e})}))}}if("removeIntersectionObserver"===e.type)return function(e){var t=jt[e];delete jt[e];for(var n=0;n<t;n++){var r=e+"#"+n,i=Ft[r];if(!i)break;delete Bt[r],i.disconnect(),delete Ft[r]}}(e.observerId),{reqEnd:!0}},Yt=1,Kt={},Jt=function(e,t){var n=function(e){if("object"!==r()(e))return"";var t="";return["minWidth","maxWidth","width","minHeight","maxHeight","height"].forEach((function(n){if(void 0!==e[n]){var r=Number(e[n]);r>=0||(r="");var i=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));t&&(t+=" and "),t+="(".concat(i,": ").concat(r,"px)")}})),["orientation"].forEach((function(n){if(void 0!==e[n]){var r=/^[-_a-z0-9]+$/i.test(e[n])?e[n]:"",i=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));t&&(t+=" and "),t+="(".concat(i,": ").concat(r,")")}})),t}(e),i=window.matchMedia(n),o=Yt++,a=function(e){t({matches:e.matches})};return Kt[o]={observer:i,listener:a},i.addListener(a),t({matches:i.matches}),o},$t=function(e,t){return"addMediaQueryObserver"===e.type?{observerId:Jt(e.mediaQueryCond,(function(e){t({info:e})}))}:"removeMediaQueryObserver"===e.type?(function(e){var t=Kt[e],n=t.observer,r=t.listener;n.removeListener(r),delete Kt[e]}(e.observerId),{reqEnd:!0}):void 0},Xt=o(),Qt=function(){function e(t,n,r){x()(this,e),this._treeManager=t,this._arr=n,this._depth=0,this._startCb=r}return P()(e,[{key:"_consumeHead",value:function(){return this._arr.shift()}},{key:"nextStepType",value:function(){return this._arr[0][0]}},{key:"nextStep",value:function(){for(;this._arr[0][0]===G.FLOW_DEPTH;)this._startCb(this._treeManager);if(this._arr[0][0]===G.FLOW_REPEAT){var e=this._arr[0][2];return--this._arr[0][1]||this._consumeHead(),[e]}return this._consumeHead()}},{key:"nextStepIf",value:function(e){for(;this._arr[0][0]===G.FLOW_DEPTH;)this._startCb(this._treeManager);return this._arr[0][0]===e?this._consumeHead():null}},{key:"expectStart",value:function(){var e=this._consumeHead();if(this._depth++,e[0]!==G.FLOW_DEPTH||e[1]!==this._depth)throw new Error("Framework inner error (expect START descriptor with depth ".concat(this._depth," but get ").concat(Z(e[0]),")"));return e[2]}},{key:"expectEnd",value:function(){for(;this._arr[0][0]===G.FLOW_DEPTH&&this._arr[0][1]!==this._depth-1;)this._startCb(this._treeManager);var e=this._consumeHead();if(this._depth--,e[0]!==G.FLOW_DEPTH||e[1]!==this._depth)throw new Error("Framework inner error (expect END descriptor with depth ".concat(this._depth," but get ").concat(Z(e[0]),")"))}},{key:"skipToEnd",value:function(){for(;this._arr[0];)if(this._arr[0][0]!==G.FLOW_DEPTH)this._consumeHead();else{if(this._arr[0][1]===this._depth-1)break;this._startCb(this._treeManager)}}},{key:"getQueueLength",value:function(){return this._arr.length}},{key:"getDepth",value:function(){return this._depth}}]),e}();const en=function(){function e(t,n){var r=this;x()(this,e),this._viewId=t,this._treeManager=n,this._depth=0,this._curWinSize=0,this._setDataCallbackInc=1,this._pendingSetDataCallbacks=[],this._setDataCallbackMap={},this._received=[],this._cache=[],this._blocked=[],this._isBlocked=!0,this._fetchingViewInfoCallbacks=[];var i=function(t,n){if(r._received.push([n].concat(t)),n===G.FLOW_DEPTH&&(r._depth=t[0],0===r._depth)){var i=r._received;r._received=[],r._isBlocked?r._blocked.push(i):(r.iterator=new Qt(r._treeManager,i,e._startCb),e._startCb(r._treeManager),document.dispatchEvent(new CustomEvent("pageReRender",{})),w(G.SET_DATA_CALLBACK,[r._pendingSetDataCallbacks],null,!0),r._pendingSetDataCallbacks=[],r.checkDelayFetchingViewInfo())}};for(var o in G)"FLOW_"===o.slice(0,5)&&("FLOW_SET_DATA"===o?S(G[o],(function(e){var t=V()(e,1)[0];r._pendingSetDataCallbacks.push(t)}),t):"FLOW_VIEW_INFO"===o?function(){var e=function(e){var t=V()(e,3),n=t[0],i=t[1],o=t[2],a=null;"selectorQuery"===n?a=Mt(i,r._treeManager):"intersection"===n?a=zt(i,r._treeManager,(function(e){w(G.RESPONSE_VIEW_INFO,[e,o])})):"matchMedia"===n&&(a=$t(i,(function(e){w(G.RESPONSE_VIEW_INFO,[e,o])}))),a&&w(G.RESPONSE_VIEW_INFO,[a,o])};S(G[o],(function(t){r._received.length||r._isBlocked?r._fetchingViewInfoCallbacks.push(e.bind(r,t)):e(t)}),t)}():"FLOW_SET_NODE_ANIMATION_INFO"===o?S(G[o],(function(e){"scrollTimeline"===e[0].type?wt(e[0],r._treeManager):Nt(e[0])})):"FLOW_CLEAR_NODE_ANIMATION_INFO"===o?S(G[o],(function(e){Dt(e[0])})):"FLOW_SET_NODE_NEXT_ANIMATION_INFO"===o?S(G[o],(function(e){Ot(e[0])})):S(G[o],i,t));S(G.SET_DATA_CALLBACK,(function(e){var t=V()(e,1)[0];r.triggerSetDataCallbacks(t)}),t)}return P()(e,[{key:"flushBlocked",value:function(){for(;this._blocked.length&&!this._isBlocked;)try{var t=this._blocked.shift();this.iterator=new Qt(this._treeManager,t,e._startCb),e._startCb(this._treeManager),document.dispatchEvent(new CustomEvent("pageReRender",{}))}catch(e){console.error(e.message),Reporter.errorReport({key:"webviewScriptError",error:e})}this._blocked.length||(w(G.SET_DATA_CALLBACK,[this._pendingSetDataCallbacks],null,!0),this._pendingSetDataCallbacks=[],this.checkDelayFetchingViewInfo())}},{key:"unblock",value:function(){this._isBlocked=!1,this.flushBlocked()}},{key:"block",value:function(){this._isBlocked||(this._isBlocked=!0)}},{key:"sendInIndividualFlow",value:function(e){this.start(Date.now()),this.push(e),this.end()}},{key:"start",value:function(){this.flush(),this._depth++,w(G.FLOW_DEPTH,[this._depth,Date.now()],this._viewId)}},{key:"dedupe",value:function(){var e=this._cache;if(this._curWinSize){if(2===e.length){var t=e[1][2];if(e[0][0]!==t){var n=e.pop(),r=n.shift();w(r,n,this._viewId)}else e.shift(),e[0][1]++}}else{var i=0;if(e.length>2&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]&&e[0][0]!==G.FLOW_SET_DATA&&e[0][0]!==G.FLOW_VIEW_INFO&&(i=1),i){var o=e[0][0];e.splice(0,3),this.flush(),this._curWinSize=1,e.unshift([G.FLOW_REPEAT,3,o])}else if(e.length>3){var a=e.pop(),s=a.shift();w(s,a,this._viewId)}}}},{key:"push",value:function(e){this._cache.unshift(e),1!==e.length?this.flush():this.dedupe()}},{key:"flush",value:function(){for(this._curWinSize=0;this._cache.length;){var e=this._cache.pop(),t=e.shift();w(t,e,this._viewId)}}},{key:"end",value:function(){this.flush(),this._depth--,w(G.FLOW_DEPTH,this._depth,this._viewId),0===this._depth&&b()}},{key:"checkDelayFetchingViewInfo",value:function(){if(this._fetchingViewInfoCallbacks.length){var e=this._fetchingViewInfoCallbacks;this._fetchingViewInfoCallbacks=[],e.forEach((function(e){return e()}))}}},{key:"registerSetDataCallback",value:function(e,t,n){var r=this._setDataCallbackInc++;this._setDataCallbackMap[r]=[e,t,n],this.push([G.FLOW_SET_DATA,r])}},{key:"triggerSetDataCallbacks",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],r=V()(this._setDataCallbackMap[n],3),i=r[0],o=r[1],a=r[2];delete this._setDataCallbackMap[n],Xt.safeCallback("SetData Callback",i,o,[],a)}}}],[{key:"setStartOperation",value:function(t){e._startCb=t}}]),e}(),tn=BabelRuntimeHelpers.toConsumableArray;var nn=e.n(tn),rn=o(),on=Object.prototype.hasOwnProperty,an=rn.dataUtils.deepCopy,sn=function(e,t,n,i,o){for(var a=o?an(e):e,s=0;s<t.length;s++){var c=t[s],u=c[0],l=c[1],d=c[2];if(void 0!==l){for(var f=a,p=u[0],h=1;h<u.length;h++)if(null!=(f=f[p])&&f.__wxspec__&&(f=f.__value__),p=u[h],null!=f&&!on.call(f,p)){f=null;break}null!=f&&on.call(f,p)&&(n?null!=d&&"object"===r()(l)&&l instanceof Array==d instanceof Array?f[p]={__value__:d,__wxspec__:!0}:null!=f[p]&&f[p].__wxspec__||(f[p]={__value__:f[p],__wxspec__:!0}):f[p]=i?an(l,!1):l)}}return a};const cn={restoring:null,idDataMap:null,compIdArr:null,compExtraDataMap:null,compIdArrIndex:0,onReady:function(){}};var un=o(),ln={},dn=function(e,t){var n=un.Component.getComponentOptions(e).domain;if("/"!==n&&"//"!==n&&n){var r=n.split("/",1)[0],i=t,o=i.viewId;if(ln[o]||(ln[o]={}),!ln[o][r]){ln[o][r]=!0;var a=[r,__appServiceSDK__.pluginInfos[r].version,i.rootCompName,__appServiceSDK__.getLaunchOptionsSync().sessionid||__appServiceSDK__.getLaunchOptionsSync().sessionId||"",0,""].map(encodeURIComponent).join(",");"undefined"!=typeof Reporter&&(Reporter.reportKeyValue({key:"PluginDisplay",value:a,force:!0}),Reporter.reportIDKey({key:"pluginDisplayInPage",force:!0}))}}},fn=0,pn=0,hn=0,gn=function(e,t,n,r){var i=n-t,o=n-e,a=Math.ceil(hn/(pn||1)),s=[fn,1,i,pn,a,1,o,r].map(encodeURIComponent).join(",");fn=0,pn=0,hn=0,"undefined"!=typeof Reporter&&Reporter.reportKeyValue({key:"SetDataPerf",value:s,force:!0})},vn=0,_n=0,mn=0,yn=0,bn=0,wn=0,In=function(){var e=["libVersion","isFirstPage","isWebview","totalComps","loadedComps","lazyedComps","loadTime","lazyLoadTime"],t=new Set(e),n={},r=!1,i=function(i,o){r||(n[i]=o,t.has(i)&&t.delete(i),0===t.size&&(!function(){if("undefined"!=typeof Reporter){var t=e.map((function(e){return encodeURIComponent(n[e])})).join(",");Reporter.reportKeyValue({key:"LazyCodeLoading",value:t,immediately:!0})}}(),r=!0))};return i("libVersion",wx.version.version),i("isWebview",!1),i("lazyedComps",0),i("lazyLoadTime",0),{set:i}},Sn={},Cn=/-[a-z]/g,Tn=/([A-Z])/g,En=function(e){return Sn[e]||(Sn[e]=e.replace(Tn,"-$1").toLowerCase())},kn=0,xn=setTimeout,An=function(e){kn===e&&(kn=0)},Pn=function(){return kn=Date.now()+Math.random()},Dn=function(e){var t,n=Pn();try{t=e(n)}catch(e){throw xn((function(){An(n)}),0),e}return xn((function(){An(n)}),0),t},On=function(){return!!kn},Nn=o(),Rn=(Object.prototype.hasOwnProperty,null),Mn=function(e,t){return Rn?Rn(e,"nv_",t?2:void 0):e},Ln=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Rn?Rn(e,void 0,t?2:void 0):e},Bn=function(e,t,n){return t?n?t+e+n:t||"":n||""},Fn=function(e){var t=V()(e,5),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4];if(o||(o={}),r){var s=Ro.get(n);if(!s)return;var c=s.nodeId.getNodeById(r);if(!c)return;var u=Nn.Element.getMethodCaller(c);u&&"function"==typeof u[i]&&(a?Dn((function(){u[i](o)})):u[i](o))}else{var l=__appServiceEngine__.getCurrentPagesByDomain("");if(!l.length)return;var d=l[l.length-1];d&&"function"==typeof d[i]&&(a?Dn((function(){d[i](o)})):d[i](o))}};__appServiceSDK__.onCallMethodFromWxs(Fn);var jn=function(e,t,n){if(t.__wxsStyle||t.__wxsClass){var r={wxsStyle:t.__wxsStyle,wxsClass:t.__wxsClass,index:n,wxsState:Ln(t.__wxsState)};if(t.ownerShadowRoot&&Ro.instance){var i=Ro.instance.nodeId.getNodeId(t.ownerShadowRoot.__wxHost);e._custom=e._custom||{},(e=e._custom)[i]=e[i]||{},e=e[i]}e[t.is]=e[t.is]||[],e[t.is].push(r)}},Wn=function(e,t,n){if(e){var r=null;if(t.ownerShadowRoot&&Ro.instance&&e._custom){var i=Ro.instance.nodeId.getNodeId(t.ownerShadowRoot.__wxHost);if(!(e=e._custom)[i])return;e=e[i]}e[t.is]&&e[t.is].length&&e[t.is][0]&&e[t.is][0].index===n&&(r=e[t.is].shift()),r&&function(e,t){if(e.__wxsStyle=t.wxsStyle,e.__wxsClass=t.wxsClass,e.__wxsState=Mn(t.wxsState),t.wxsStyle){var n=function(){var t=window.wx.transformRpx(e.__wxsStyle,!0);e.setNodeStyle(t,Y)};n(),X(e,Y,n)}t.wxsClass&&(e.class=Bn(" ",e.class,t.wxsClass))}(t,r)}},Un=o(),Vn=void 0!==wx&&wx.transformRpx,Gn=Un.Component.getComponentOptions,Hn=function(e){return e instanceof Un.Component?Ro.get(e.__wxWebviewId__).nodeId.getNodeById(e.__wxExparserNodeId__):e},Zn=function(e,t,n){var r=Hn(e);return n&&r instanceof Un.VirtualNode&&(r.id||Object.getOwnPropertyNames(r.dataset).length||(r=Hn(n))),{id:t?"":r.id,dataset:t?{}:r.dataset}},qn=function(e,t,n,r,i,o,a,s){var c=o?"__wxEventCaptureHandleName":"__wxEventHandleName";t[c]||(t[c]=Object.create(null)),void 0===t[c][n]&&t.addListener(n,(function(e){var r=t[c][n],o=e.mutatedMarked();if((!s||!e.mutatedMarked())&&(s&&e.markMutated(),r)){e._hasListeners=!0;var u=t.ownerShadowRoot;if(u){var l=u.getHostNode(),d=Un.Component.getComponentOptions(l).writeOnly;if(!d||e._allowWriteOnly){if(a&&"function"==typeof r)return void console.warn('Cannot use wxs function to handle custom event "'+e.type+'".');var f=Un.Element.getMethodCaller(l);"function"!=typeof f[r]?console.warn('Component "'+l.is+'" does not have a method "'+r+'" to handle event "'+e.type+'".'):f[r]({type:e.type,timeStamp:e.timeStamp,target:Zn(e.target,d,this),currentTarget:Zn(this,d,null),mark:e.mark,detail:e.detail,touches:e.touches,changedTouches:e.changedTouches,mut:o,_requireActive:e._requireActive})}}return!i&&void 0}}),{capture:o}),a?t[c][n]=r:(t[c][n]=null==r?"":String(r),t.__eventHandlerChangeListener__&&t.__eventHandlerChangeListener__(n,t[c][n],o))},zn=function(e,t,n,i){var o=e.__treeManager__;e.dataset=e.dataset||{};var a=0,s=!1,u=[],l=e instanceof Un.Component,d=l&&"//"===Gn(e).domain,f=Un.Component.getDataProxy(e),h=function(o){var h,g,v=t[o],_=null;if("slot"===e.is&&e instanceof Un.VirtualNode&&"name"===o)return Un.Element.setSlotName(e,v),"continue";if("id"===o)return e.id=null==v?"":v,"continue";if("slot"===o)return e.slot=null==v?"":v,"continue";if("class"===o){if(l)e.class=e.__wxsClass?Bn(" ",null==v?"":v,e.__wxsClass):null==v?"":v,l&&e.hasExternalClass("class")&&e.setExternalClass("class",v);return"continue"}if("style"===o&&l&&e.$$){var m=Vn(v,!0);e.setNodeStyle(m,q),m!==v?X(e,q,(function(){var t=Vn(v,!0);e.setNodeStyle(t,q),e.__transformedPropValue=t})):Q(e,q),e.__banned&&re(e)}if(l&&Un.Component.hasPublicProperty(e,o)){!d&&cn.restoring||(f.scheduleReplace([o],v,null!=n?n[o]:null),d?f.doUpdates(void 0,!0):(s=!0,e.isInnerDataExcluded(o)||a++));var y=i&&i["model:"+En(o)];if(y){var b=y.match(/^\{\{(.*?)\}\}$/);if(b){var w=b[1].match(/^\s*([_a-zA-Z$][_a-zA-Z0-9$]+)\s*$/);if(w){var I=w[1];e.__modelValueName=Object.assign(e.__modelValueName||{},c()({},o,I)),u.push(o)}else console.warn("For developer:Two-way binding does not support complex data paths currently. This two-way binding is ignored.")}else console.warn('For developer:"'.concat(y,'" is not an assignable expression. This two-way binding is ignored.'))}return"continue"}if("style"===o)return"continue";if(/^data-/.test(o)){var S=(h=o.slice(5).toLowerCase(),Sn[h]?Sn[h]:Sn[h]=h.indexOf("-")<=0?h:h.replace(Cn,(function(e){return e[1].toUpperCase()})));return e.dataset[S]=v,e.setAttribute(o,v),"continue"}if("$gdc"===o)return"function"==typeof(g=v)&&(Rn=g),"continue";if((_=o.match(/^\$wxs:(capture-)?(mut-)?(bind|catch):?(.+)$/))&&("function"==typeof v||!v))return qn(0,e,_[4],v,"catch"===_[3],_[1],!0,_[2]),p(),"continue";if(_=o.match(/^(capture-)?(mut-)?(bind|catch):?(.+)$/))return qn(0,e,_[4],v,"catch"===_[3],_[1],!1,_[2]),p(),"continue";if("on"===o.slice(0,2))return qn(0,e,o.slice(2),v,!1,!1,!1),"continue";if("animation"===o){if(l&&e.$$&&null!==v&&"object"===r()(v)&&v.actions&&v.actions.length>0){var C=function(){if(T<k){var t=wx.animationToStyle(E[T]),n=t.transition,r=t.transitionProperty,i=t.transform,o=t.transformOrigin,a=t.style,s=e.__styleObj?Object.assign({},e.__styleObj,{transition:n,transform:i,transitionProperty:r,transformOrigin:o}):{transition:n,transform:i,transitionProperty:r,transformOrigin:o};for(var c in s["-webkit-transition"]=s.transition,s["-webkit-transform"]=s.transform,s["-webkit-transition-property"]=s.transitionProperty,s["-webkit-transform-origin"]=s.transformOrigin,a)s[c]=a[c];e.__styleObj=s,""!==s.transform&&(e.__transformNoneEnabled=!0);var u=Object.keys(s).filter((function(t){return!(/transition/i.test(t)&&""===s[t]||""===t.trim()||void 0===s[t]||!/transform/i.test(t)&&""===s[t]||!isNaN(parseInt(t,10)))&&(/transform/i.test(t)&&""===s[t]&&e.__transformNoneEnabled&&(s[t]="none"),!0)})).map((function(e){var t=e.replace(/([A-Z]{1})/g,(function(e){return"-".concat(e.toLowerCase())}));return"".concat(t,":").concat(s[e])})).join(";"),l=function(){e.setNodeStyle(Vn(u,!0),z)};l(),X(e,z,l),e.__banned&&re(e)}},T=0,E=v.actions,k=v.actions.length;e.addListener("transitionend",(function(){T+=1,C()})),C()}return"continue"}if(_=o.match(/^\$wxs:change:(.+)$/))return e.wxsObserver=e.wxsObserver||{},e.wxsObserver[_[1]]=e.wxsObserver[_[1]]||{},e.wxsObserver[_[1]].observer=v,"continue";if(_=o.match(/^mark:(.+)$/))return e.setMark(_[1],v),"continue";var x=En(o);return l&&e.hasExternalClass(x)?(e.setExternalClass(x,v),"continue"):void 0};for(var g in t)h(g);s&&f.doUpdates(a,!1);for(var v=function(t){var n=u[t];e.__wxPropertyListener__&&e.__wxPropertyListener__[n]||(e.setPropertyChangeListener(n,(function(t){var r=e.ownerShadowRoot.getHostNode();r.setData(c()({},e.__modelValueName[n],t))})),e.__wxPropertyListener__=e.__wxPropertyListener__||{},e.__wxPropertyListener__[n]=!0)},_=0;_<u.length;_++)v(_);e.__component__&&!cn.restoring&&o.operationFlow.push([G.FLOW_APPLY_PROPERTY])},Yn=Object.create(null),Kn=!1,Jn={},$n=function(e,t){Kn&&(Yn[e]=t)},Xn=function(){return Kn},Qn=o(),er=Qn.dataUtils.deepCopy,tr={tag:"shadow",children:[]},nr=function(t,n){var r,i=Date.now(),o=t?t(n,null,e.g):tr;return r=Date.now()-i,pn+=1,hn+=r,o.tag="shadow",o},rr=function(e,t){if(Xn()){t.operationFlow.start(Date.now()),t.operationFlow.push([G.FLOW_HOT_UPDATE_RESET,t.nodeId.getNodeId(e)]);var n="";e===t.root?n="body":e===t.tabRoot&&(n="tab-bar");var r=e.__vtObj,i=e.ownerShadowRoot?e.ownerShadowRoot.createComponent(r.tag,void 0,r.generics,t):Qn.createElement(n,Qn.Component._list[e.is],t);t.operationFlow.push([G.FLOW_HOT_UPDATE_RESET]);var o=t.nodeId.getNodeId(e);if(t.nodeId.removeNode(e),t.nodeId.allocNodeId(i,o),e===t.root){Qn.Element.pretendDetached(e),t.root=i,Qn.Element.pretendAttached(i);var a={},s=!1;Object.keys(t.initialRootData).forEach((function(e){Qn.Component.hasProperty(i,e)&&(a[e]=t.initialRootData[e],s=!0)})),s&&t.root.setData(a)}else if(e===t.tabRoot)t.tabRoot=i;else{i.__vtObj=r;var c=r.attr;for(zn(i,c,r.raw,r.rawAttr);e.childNodes.length;)i.appendChild(e.childNodes[0]);e.parentNode.replaceChild(i,e)}t.operationFlow.end()}},ir=function e(t,n,i,o,a){var s=null;if("shadow"===t.tag&&n)i=s=Qn.ShadowRoot.create(n);else if("virtual"===t.tag||"shadow"===t.tag){var c="virtual";1===t.wxXCkey||3===t.wxXCkey?c="wx:if":2!==t.wxXCkey&&4!==t.wxXCkey||(c="wx:for"),s=i.createVirtualNode(c),Qn.Element.setInheritSlots(s),s.__treeManager__=o}else if("wx-slot"===t.tag)s=i.createVirtualNode("slot"),Qn.Element.setSlotName(s,"");else{var u=i.tagNameUsed(t.tag);if(u){var l=i.getHostNode(),d=i.getCompDefByTagName(t.tag);"string"==typeof d.is&&(d=d.is);var f=l.getPlaceholder(t.tag);o.compManager.shouldUsePlaceholder(d)&&!!f?((s=i.createComponent(t.tag,f,t.generics,o)).__placeholder__=!0,o.compManager.arrangePlaceholderReplace(d,(function(){var e=s.__vtObj,t=i.createComponent(e.tag,void 0,e.generics,o);or(e,t,o,a),nn()(s.childNodes).forEach((function(e){s.removeChild(e),t.appendChild(e)})),s.parentNode&&s.parentNode.replaceChild(t,s),u&&dn(t,o)}))):(s=i.createComponent(t.tag,void 0,t.generics,o),u&&dn(s,o))}else(s=i.createVirtualNode(t.tag)).__treeManager__=o}or(t,s,o,a);var p=t.children;if(p)for(var h=0;h<p.length;h++){var g=p[h];if(null!=g)if("object"===r()(g)){var v=e(g,null,i,o,a);s.appendChild(v)}else{var _=i.createTextNode(g);s.appendChild(_)}}return s},or=function(e,t,n,r){(Xn()||!0===t.__placeholder__)&&(t.__vtObj=e),3!==e.wxXCkey&&4!==e.wxXCkey||(t.__wxDynamicSync__=4===e.wxXCkey?"wx:for":"wx:if");var i=t.__component__,o=t.__placeholder__;(i||o)&&(Qn.Element.getMethodCaller(t).__wxExparserNodeId__=n.nodeId.allocNodeId(t,""),n.operationFlow.push([G.FLOW_CREATE_NODE,n.nodeId.getNodeId(t)]));var a=r?er(e.attr):e.attr;zn(t,a,e.raw,e.rawAttr)},ar=function(e){e.operationFlow.push([G.FLOW_MINIPULATE_CHILD])},sr=Object.prototype.hasOwnProperty,cr=function(e){return"number"==typeof e&&isNaN(e)},ur=function(e,t){for(var n=function(e){for(var t={},n=0;n<e.length;++n){var r=e[n],i=r&&r.wxKey;i?sr.call(t,i)?r.wxKey=void 0:t[i]=n:cr(i)&&(r.wxKey=void 0)}return t}(e),r=function(e){for(var t={},n=[],r=0;r<e.length;++r){var i=e[r],o=i&&i.wxKey;o?sr.call(t,o)?(console.warn('For developer:Do not set same key "'.concat(o,'" in wx:key.')),i.wxKey=void 0,n.push(r)):t[o]=r:(cr(o)&&(i.wxKey=void 0),n.push(r))}return[t,n]}(t),i=V()(r,2),o=i[0],a=i[1],s=[],c=[],u=[],l=0,d=0,f=0;f<e.length;++f){var p=e[f].wxKey;if(p)if(sr.call(o,p)){var h=o[p];s.push(t[h])}else c.push(f-d),++d,s.push(null);else if(l<a.length){var g=a[l];s.push(t[g]),++l}else c.push(f-d),++d,s.push(null)}for(var v=s,_=0,m=[],y=0;y<t.length;){for(var b=t[y],w=b&&b.wxKey,I=v[_],S=I&&I.wxKey;null===I;)S=(I=v[++_])&&I.wxKey;_>=v.length?(u.push({oldIndex:n[w],index:y,pos:-1}),++_,++y):S===w?(m.push(_),++_,++y):w?(S?o[S]===y+1?u.push({oldIndex:n[w],index:y,pos:_}):(I=v[++_])&&I.wxKey===w?(m.push(_),++_):(--_,u.push({oldIndex:n[w],index:y,pos:_})):u.push({oldIndex:n[w],index:y,pos:_}),++y):++_}for(var C=0,T=0;T<u.length;T++){var E=u[T].pos;if(-1===E)break;for(;C<m.length&&E>m[C];)C++;C>=m.length?u[T].pos=-1:u[T].pos=m[C]}return{children:s,removes:c,inserts:u}},lr=function(e,t,n){if(e!==t&&(!e||n))if(null==t)n.parentNode.removeChild(n);else if("object"===r()(t))if("object"!==r()(e)||null===e||e.tag!==t.tag||String(e.wxKey)!==String(t.wxKey)||"virtual"===e.tag&&e.wxVkey!==t.wxVkey){var i=n.__treeManager__,o=n.parentNode,a=ir(t,null,o.ownerShadowRoot,i,!1);o&&("wx:for"===o.__wxDynamicSync__||"wx:if"===n.__wxDynamicSync__?(i.nodeId.addNode(a),o.replaceChild(a,n),ar(i),i.nodeId.removeNode(n)):o.replaceChild(a,n),n.__banned&&ie(a))}else{if(t.n&&t.n.length){for(var s=t.n,c=t.attr,u={},l=0;l<s.length;l++){var d=s[l];u[d]=c[d]}zn(n,u,t.raw,t.rawAttr)}void 0!==t.wxScopeData&&(n.__wxScopeData__=t.wxScopeData),void 0!==n.__vtObj&&(n.__vtObj=t),dr(e,t,n)}else if("string"==typeof e)t!==e&&(n.textContent=t);else{var f=n.ownerShadowRoot.createTextNode(t);n.parentNode.replaceChild(f,n)}},dr=function(e,t,n){var r=!!R("customComponents"),i=e.children,o=t.children,a="virtual"===e.tag&&(2===e.wxXCkey||4===e.wxXCkey||void 0===e.wxXCkey)||!r&&i.length!==o.length,s=null,c=null;if(a){var u=ur(i,t.children);o=u.children,s=u.removes,c=u.inserts}for(var l=n.childNodes,d=0;d<i.length;d++){var f=i[d],p=o[d];!p&&a||lr(f,p,l[d])}a&&function(e,t,n,r){for(var i=n.__treeManager__,o=n.childNodes,a=[],s=0;s<t.length;s++){var c=t[s];a.push({node:void 0!==c.oldIndex?o[c.oldIndex]:null,before:c.pos>=0?o[c.pos]:void 0,index:c.index})}for(var u=0;u<e.length;u++){var l=o[e[u]];n.removeChild(l),"wx:for"===o.__wxDynamicSync__&&(ar(i),i.nodeId.removeNode(l))}for(var d=0;d<a.length;d++){var f=a[d],p=f.before,h=f.index,g=a[d].node;null===g&&(g=ir(r[h],null,n.ownerShadowRoot,i,!1)),"wx:for"===n.__wxDynamicSync__?(i.nodeId.addNode(g),n.insertBefore(g,p),ar(i)):n.insertBefore(g,p)}n.__banned&&ie(n)}(s,c,n,t.children)},fr=o(),pr={},hr=1,gr=[],vr=function(e,t){if(pr[e]){var n=pr[e],r=gr[gr.length-1],i=gr[gr.length-2],o=t(n),a=o.isMergedUpdate,s=o.dataPaths,c=o.pendingStartTimestamp,u=o.updateStartTimestamp,l=o.updateEndTimestamp;w(G.UPDATE_PERFORMANCE_STAT,[e,{isMergedUpdate:a,dataPaths:s,updateProcessId:r,parentUpdateProcessId:i,pendingStartTimestamp:c,updateStartTimestamp:u,updateEndTimestamp:l}])}};var _r=o(),mr=_r.dataUtils.deepCopy,yr=function(e){if("object"!==r()(e)||!e)return e;var t=e.slice();return t.shift().apply(void 0,nn()(t))},br=function e(t,n,r){for(var i=t.childNodes,o=0;o<i.length;o++){var a=i[o];a instanceof _r.TextNode||(a.__id&&(n[a.__id]=a),void 0!==a.__slotName&&(r[a.__slotName]=a),e(a,n,r))}},wr=function(){function e(){x()(this,e)}return P()(e,[{key:"createInstance",value:function(e,t){var n=new Ir,r=t;if(n._template=this,n._generateFunc=this._generateFunc,n.data=mr(this._data),n.idMap=Object.create(null),n.slots=Object.create(null),cn.restoring){if(cn.compIdArrIndex>=cn.compIdArr.length)throw new Error("Component count unmatched while page recovering");r.nodeId.allocNodeId(e,cn.compIdArr[cn.compIdArrIndex++]);var i=cn.idDataMap[r.nodeId.getNodeId(e)];n._virtualTree=nr(this._generateFunc,i)}else n._virtualTree=this._virtualTree;return n.shadowRoot=ir(n._virtualTree,e,null,t,!0),br(n.shadowRoot,n.idMap,n.slots),n.listeners=[],this._isSimpleComponent||(e.__component__=!0),e.__treeManager__=r,n.shadowRoot.__treeManager__=r,r.operationFlow.registerSetDataCallback((function(){e.triggerLifeTime("ready")})),n._delayedUpdateValues=null,n}},{key:"updateGenerateFunc",value:function(e){var t=this;this._generateFunc=yr(e),this._virtualTree=nr(this._generateFunc,this._initValues),Ro.list().forEach((function(n){[n.root,n.tabRoot].forEach((function(r){r&&B(r,1,(function(r){r instanceof _r.Component&&r.__templateInstance._template===t&&(r.__templateInstance._generateFunc=e,r.__templateInstance._resetShadowChildren(r,r.data,n))}))}))}))}}]),e}();wr.create=function(e,t,n,r){var i=new wr;i._initValues=n,i._data=t;var o=e.template;return i._generateFunc=yr(o.func),i._virtualTree=nr(i._generateFunc,i._initValues),i._isSimpleComponent="simple://"===r.domain.slice(0,9),$n(o.path,(function(e){o.func=e,i.updateGenerateFunc(e)})),i};var Ir=function(){function e(){x()(this,e)}return P()(e,[{key:"beforeMergeValues",value:function(e,t,n){if("number"!=typeof n)e.forEach((function(e,n){void 0!==e[1]?t[n]=!1:(t[n]=!0,console.warn('Setting data field "'+e[0].join(".")+'" to undefined is invalid.'))}));else{for(var r=0;r<n;r++)t[r]=!1;for(var i=n;i<e.length;i++){var o=e[i];void 0!==o[1]?t[i]=!1:(t[i]=!0,console.warn('Setting data field "'+o[0].join(".")+'" to undefined is invalid.'))}}}},{key:"beforeUpdateValues",value:function(e,t,n){}},{key:"updateValues",value:function(e,t,n,r,i,o){if(!cn.restoring){var a=null,s="number"!=typeof o;if(a=e.__treeManager__,s){a.operationFlow.start(Date.now());var c=[];i.forEach((function(e){void 0!==e[1]&&c.push(e)})),a.operationFlow.push([G.FLOW_UPDATE,a.nodeId.getNodeId(e),mr(c)])}else{for(var u=[],l=o;l<i.length;l++){var d=i[l];void 0!==d[1]&&u.push(d)}a.operationFlow.push([G.FLOW_DATA_OBSERVER,mr(u)])}if(this._delayedUpdateValues)this._delayedUpdateValues.push([mr(t),n,r,i,o]);else{this._delayedUpdateValues=[];try{this._updateValues(e,t,n,r,i,o);var f=this._delayedUpdateValues;this._delayedUpdateValues=null;for(var p=0;p<f.length;p++){var h=f[p];this._updateValues(e,h[0],h[1],h[2],h[3],h[4])}}catch(e){throw this._delayedUpdateValues=null,e}}s&&a.operationFlow.end()}}},{key:"_updateValues",value:function(e,t,n,r,i,o){var a="number"!=typeof o,s=!R("propValueDeepCopy"),c=sn(t,i,!0,!1,s),u=nr(this._generateFunc,c);sn(t,i,!1,a,!1);var l=this._virtualTree;this._virtualTree=u,lr(l,u,this.shadowRoot)}},{key:"_resetShadowChildren",value:function(e,t,n){var r=function(){n.operationFlow.push([G.FLOW_HOT_UPDATE_CHILD])};n.operationFlow.start(Date.now()),n.operationFlow.push([G.FLOW_HOT_UPDATE,n.nodeId.getNodeId(e)]);for(var i=this.shadowRoot,o=(this._virtualTree.children||[]).length,a=0;a<o;a++)i.removeChild(i.childNodes[0]);r();var s=nr(this._generateFunc,t);r(),this._virtualTree=s;for(var c=ir(s,null,e.shadowRoot,n,!0).childNodes,u=c.length,l=0;l<u;l++)i.insertBefore(c[0],i.childNodes[l]);n.operationFlow.end()}}]),e}(),Sr=o(),Cr=null,Tr=function(){Cr={};var e=null;__wxConfig&&__wxConfig.plugins?e=__wxConfig.plugins:"undefined"!=typeof window&&window&&window.__wxConfigAppService__&&window.__wxConfigAppService__.plugins&&(e=window.__wxConfigAppService__.plugins);var t=!1;if(e)for(var n in e){var r=e[n].provider,i=e[n].subpackage;if(void 0!==i){t=!0;var o=i||"";"__APP__"===o&&(o=""),"/"===o[0]&&(o=o.slice(1)),o&&"/"!==o.slice(-1)&&(o+="/"),Cr[r]=o}}if(!t){var a;if(__wxConfig&&__wxConfig.subPackages)a=__wxConfig.subPackages;else{if("undefined"==typeof window||!window||!window.__subPackages)return;a=window.__subPackages}a.length&&a.forEach((function(e){if(e){var t=e.root||"";if(t&&"/"!==t.slice(-1)&&(t+="/"),e.plugins)for(var n in e.plugins)if(Object.prototype.hasOwnProperty.call(e.plugins,n)){var r=e.plugins[n]&&e.plugins[n].provider;r&&(Cr[r]=t)}}}))}},Er=function(e){var t=e.match(/(?:^|\/)__(wx|plugin)__\/(.*)$/);return t?"wx"===t[1]?"wx://"+t[2]:"plugin-private://"+t[2]:e},kr=function(e){return Cr||Tr(),(Sr.Component._list[e]&&Sr.Component._list[e].is||e).replace(/^plugin-private:\/\/([0-9a-zA-Z]+)\//,(function(e,t){return(Cr[t]||"")+"__plugin__/"+t+"/"})).replace(/^wx:\/\//,"__wx__/")},xr=function(e){return Cr[e]||""},Ar=function(e){return Cr||Tr(),(Cr[e]||"")+"__plugin__/"+e+"/"},Pr=function e(t){Cr||Tr();var n,r,i,o=t.match(/^plugin:\/\/(.+?)\//);if(o)return e(Cr[o[1]]||"");if(o=t.match(/^plugin-private:\/\/([0-9a-zA-Z]+)\//))return e(Cr[o[1]]||"");n=null!==(r=null===(i=__wxConfig)||void 0===i?void 0:i.subPackages)&&void 0!==r?r:[];for(var a=0;a<n.length;++a){var s=n[a].root||"";if(s&&"/"!==s.slice(-1)&&(s+="/"),t.slice(0,s.length)===s)return n[a]}return null},Dr=function(e){var t=Pr(e);if(!t)return"__APP__";var n=t.root||"";return"/"===n.slice(-1)?n:n+"/"},Or=function(e){var t=Pr(e);return!!t&&t.independent},Nr={main:"app-service.js",sub:"app-service.js",lazyCommon:"common.app.js",lazyApp:"appservice.app.js",plugin:"appservice.js"},Rr=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"],Mr=function(e,t){t("isLazyLoad: ".concat(Pi())),t("moduleName: ".concat(e));var n=Object.values(__wxConfig.plugins||{}).filter((function(t){return t.subpackage.includes(e)})).map((function(e){var t=e.provider,n="__plugin__/".concat(t);return{plugin_id:t,prefix_path:Rr.includes(t)?null:n}}));t("separatedPlugins: ".concat(JSON.stringify(n)));var r="__APP__"===e,i=r?"":e;if(Pi()){var o=[];return n.forEach((function(e){var t=(i+e.prefix_path+"/").replace(/\/\/$/,"/");e.prefix_path||(t+="__extended__/".concat(e.plugin_id,"/")),o.push(t+Nr.plugin)})),o.push(i+Nr.lazyCommon,i+Nr.lazyApp),t("all files to inject: ".concat(JSON.stringify(o))),o}var a=n.map((function(e){var t=(i+e.prefix_path+"/").replace(/\/\/$/,"/");return e.prefix_path||(t+="__extended__/".concat(e.plugin_id,"/")),t+Nr.plugin}));return r?a.push(i+Nr.main):a.push(i+Nr.sub),t("all files to inject: ".concat(JSON.stringify(a))),a},Lr=o(),Br=function e(t,n,r){if(t instanceof Lr.Component){t!==window.__DOMTree__&&(n.compCount++,t.hasBehavior("wx-base")?(r&&n.rootInternalCompCount++,t.hasBehavior("wx-native")&&n.nativeCompCount++):r&&n.rootCustomCompCount++);var i=t===window.__DOMTree__&&r;t.shadowRoot instanceof Lr.Element&&e(t.shadowRoot,n,i)}for(var o=t.childNodes,a=0,s=o.length;a<s;a++){var c=(o[a]instanceof Lr.VirtualNode||t===window.__DOMTree__||t===window.__DOMTree__.shadowRoot)&&r;o[a]instanceof Lr.Element&&e(o[a],n,c)}},Fr=function(){var e={compCount:0,customCompCount:0,nativeCompCount:0,rootCustomCompCount:0,rootInternalCompCount:0};try{Br(window.__DOMTree__,e,!0)}catch(e){}var t=e.rootCustomCompCount,n=e.rootInternalCompCount,r=t+n;return{compCount:e.compCount,customCompCount:e.customCompCount,nativeCompCount:e.nativeCompCount,rootCompCount:r,rootCustomCompCount:t,rootCustomCompRatio:r?Math.floor(100*t/r):0,rootInternalCompCount:n}},jr={id:null,prev:null,data:[]};S(G.SAVE_STATE,(function(){"function"==typeof wx.webViewReadyToTerminate&&wx.webViewReadyToTerminate({})})),S(G.RESTORE_STATE,(function(e){var t=V()(e,4),n=t[0],r=t[1],i=t[2],o=t[3];if(n&&n.isSplitData){var a=n.splitInfo,s=a.id,c=a.index,u=a.total,l=a.data;if(1!==c&&(c!==jr.prev+1||s!==jr.id))return jr.id=null,jr.prev=null,void(jr.data=[]);if(c!==u)return jr.id=s,jr.prev=c,void jr.data.push(l);jr.data.push(l);var d=jr.data.join("");try{d=JSON.parse(d)}catch(e){console.error("Expected parse completed data with split data but got error"),Reporter.errorReport({key:"webviewScriptError",error:new Error("Expected parse completed data with split data but got error")}),d=null}if(jr.id=null,jr.prev=null,jr.data=[],!d)return;n=d[0],r=d[1],i=d[2],o=d[3]}cn.restoring=n||{},cn.idDataMap=r,cn.compIdArr=i,cn.compIdArrIndex=0;var f=Ro.instance.compManager;f.restore(o),cn.onReady=f.onRestoreInjectDone.bind(f)}));var Wr=function(e){!function(e){var t=document.body.scrollTop||document.documentElement.scrollTop;e.__page__={scrollTop:t}}(e),e.compExtraDataMap={};var t=0;window.__TAB_BAR__&&(B(window.__TAB_BAR__,1,(function(n){n.triggerLifeTime("saved",[e]),jn(e.compExtraDataMap,n,t++)})),e.compExtraDataMap),B(window.__DOMTree__,1,(function(n){n.triggerLifeTime("saved",[e]),jn(e.compExtraDataMap,n,t++)})),e.compExtraDataMap},Ur=function(e){!function(e){var t=e.__page__;if(t){var n=parseInt(t.scrollTop,10);requestAnimationFrame((function(){document.body.scrollTop=document.documentElement.scrollTop=n}))}}(e);var t=0;window.__TAB_BAR__&&(B(window.__TAB_BAR__,1,(function(n){n.triggerLifeTime("restored",[e]),Wn(e.compExtraDataMap,n,t++)})),e.compExtraDataMap),B(window.__DOMTree__,1,(function(n){n.triggerLifeTime("restored",[e]),Wn(e.compExtraDataMap,n,t++)})),e.compExtraDataMap},Vr=function(){__webViewSDK__.publish("recycleStatistics",Fr());var e={};Wr(e),w(G.REQUEST_SAVE,e,void 0,!0)},Gr=262144,Hr=Date.now(),Zr=function(e,t){var n=Ro.get(e);n&&(n.statesData=t,n.tabRoot&&B(n.tabRoot,1,(function(e){e.triggerLifeTime("saved")})),B(n.root,1,(function(e){e.triggerLifeTime("saved")})),w(G.SAVE_STATE,[],e))},qr=function(e){var t=Ro.get(e);if(t){var n=t.nodeId.getAll(),r={},i=[],o=function(e){var o=t.nodeId.getNodeId(e);i.push(o),r[o]=n[o].data};t.tabRoot&&!t.tabDestroyed&&B(t.tabRoot,1,o),B(t.root,1,o);var a=t.compManager.getRestoredData(),s=[t.statesData||{},r,i,a],c=JSON.stringify(s),u=c.length;if(u>Gr){for(var l=[],d=0;u>d;)l.push(c.substr(d,Gr)),d+=Gr;for(var f=++Hr,p=0,h=l.length;p<h;p++)w(G.RESTORE_STATE,[{isSplitData:!0,splitInfo:{id:f,index:p+1,total:h,data:l[p]}}],e)}else w(G.RESTORE_STATE,s,e);if(t.statesData=void 0,!t.tabDestroyed&&t.tabRoot){w(G.COMPONENT_DEF_TAB,t.tabUsedDef,e);var g=t.tabRoot;t.operationFlow.start(),t.operationFlow.push([G.FLOW_CREATE_TAB,g.is,t.nodeId.getNodeId(g)]),t.operationFlow.push([G.FLOW_CREATE_TAB]),t.operationFlow.end()}w(G.COMPONENT_DEF,t.usedDef,e);var v=t.root;t.operationFlow.start(),t.operationFlow.push([G.FLOW_INITIAL_CREATION,v.is,t.nodeId.getNodeId(v),{}]),t.operationFlow.push([G.FLOW_INITIAL_CREATION]),t.operationFlow.end(),t.tabRoot&&B(t.tabRoot,1,(function(e){e.triggerLifeTime("restored")})),B(t.root,1,(function(e){e.triggerLifeTime("restored")}))}},zr=o(),Yr={},Kr={},Jr=function(e,t){return e+"/"+t},$r=function(e,t,n){var r=t.match(/^plugin-private:\/\/(.*?)\//);if(!r)return!1;var i=r[1];if(Jr(i,"0")!==e)return!1;var o=n.match(/^plugin:\/\/(.*?)\//);if(!o)return!1;var a=o[1];return Jr(a,"0")===e&&(zr.Component._list[n]?(console.error('"'+n+'" has been used as another component or page. Please do not register multiple components or pages with the same alias.'),!1):(zr.Component._list[n]=zr.Component._list[t],Yr[n]=t,Kr[t]=n,!0))},Xr=function(e,t){for(var n in t)$r(e,t[n],n)},Qr={};S(G.PERFORMANCE_DATA,(function(e,t,n){var r=V()(e,1)[0];Ro.get(n).root.triggerLifeTime("performanceData",[r])}));var ei=o(),ti=0;function ni(e){e&&".html"!==e.slice(5)&&(e+=".html");var t="";return __wxConfigWindow__&&__wxConfigWindow__.initialRenderingCache&&(t=String(__wxConfigWindow__.initialRenderingCache)),t}function ri(e,t){var n=Date.now(),r={},i={},o=document.head.querySelectorAll("style")||[],a=[],s=0;ei.ElementIterator.create(e,"composed-descendants-root-first",ei.Component).forEach((function(e){e.hasBehavior("wx-base")||(r["./"+e.is+".wxss"]=!0)})),Object.keys(ei.Component._list).forEach((function(e){i["./"+e+".wxss"]=!0}));for(var c=0;c<o.length;c++){var u=o[c],l=u.getAttribute("wxss:path");null!=l&&(!i[l]||r[l]?a.push("<style>"+u.innerHTML+"</style>"):s+=u.innerHTML.length+15)}var d=a.join(""),f=d+e.$$.innerHTML;wx.saveInitialRenderingCache({content:f,appserviceData:t});var p=Date.now()-n;"Initial rendering cache saved (cost time ".concat(p,", total length ").concat(f.length,", css length ").concat(d.length,", dropped css length ").concat(s,", droppedRatio ").concat(s/(s+f.length),")")}function ii(e,t){return"dynamic"!==ni(window.__route__)?(console.error('An initial rendering cache state is ignored, because initialRenderingCache mode is not "dynamic".'),!1):(e?ri(e,t):wx.saveInitialRenderingCache({content:""}),!0)}var oi=o(),ai=function(e,t,n,r){var i="".concat(Math.random(),"-").concat(+new Date),o=Ro.get(n);if(o)return o.operationFlow.push([G.FLOW_VIEW_INFO,e,t,i]),"function"==typeof r&&(o.viewInfoCbMap[i]=r),i},si=function(e,t){var n=Ro.get(e);n&&delete n.viewInfoCbMap[t]},ci=o(),ui=!1,li=[],di=function(e){ui?e():li.push(e)},fi=ci.dataUtils.deepCopy,pi={lazyRegistration:!0,publicProperties:!0},hi={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",templateEngine:wr,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},gi={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",renderingMode:"full",templateEngine:wr,multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1,separateInnerData:!1,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},vi="undefined"!=typeof WeakMap?new WeakMap:{},_i={},mi={},yi={},bi={},wi={},Ii={},Si=1,Ci=Object.prototype.hasOwnProperty,Ti=function(e,t){var n={},r=(t[e+".json"]||{}).usingComponents;for(var i in r)n["wx-"+i]=N(e,String(r[i]));return n},Ei=function(e,t){for(var n in t){var r=t[n];r.target=null!=r.target?String(r.target):N(e,String(n))}return t},ki=function(e,t){var n={},i=(t[e+".json"]||{}).componentGenerics;for(var o in i){var a=i[o];"object"===r()(a)?n["wx-"+o]={default:N(e,String(a.default||""))}:null!=a&&(n["wx-"+o]={})}return n},xi=function(e,t){var n=t[e+".json"]||{},r={},i=n.componentPlaceholder||{};return Object.keys(i).forEach((function(e){r["wx-"+e]="wx-"+String(i[e])})),r},Ai=function(e,t,n,r){var i=Ro.get(n).nodeId.getNodeById(r,n);i&&t&&ci.Element.getMethodCaller(i).setData(c()({},t,e))},Pi=function(){return __wxConfig.isLazyLoad},Di=function(e){var t="__plugin__/",n=e.indexOf(t);return-1===n?e:"plugin-private://"+e.slice(n+t.length)},Oi=function(e){var t=Di(e),n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})["./"+t+".wxml"];Array.isArray(n)&&(n=n[0][n[1]]),window.__wxAppCodeReadyCallback__?window.__wxAppCodeReadyCallback__(n):document.dispatchEvent(new CustomEvent("generateFuncReady",{detail:{generateFunc:n}}))},Ni=function(e){var t=Di(e),n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})[t+".wxss"];void 0!==n&&"function"==typeof n||("codeMap does not contain valid wxss ".concat(t+".wxss"),n=function(){}),window.__setCssStartTime__=Date.now(),n(),window.__setCssEndTime__=Date.now()},Ri="custom-tab-bar/index";var Mi=function(e){var t=e.compManager.getPlaceholderReplaceData();e.compManager.finishPlaceholderReplacement();var n=Array.from(t.compNames),r=e.rootCompName;e.compManager.ensureComponents(n,(function(i){var o,a,s=[[],[],r,Yr];n.forEach((function(t){Fi(s,t,lo,r,e)})),(o=e.usedDef[0]).push.apply(o,nn()(s[0])),(a=e.usedDef[1]).push.apply(a,nn()(s[1])),e.operationFlow.sendInIndividualFlow([G.FLOW_COMPONENT_DEF_ADD,i,s]),e.operationFlow.sendInIndividualFlow([G.FLOW_WAIT_COMPONENT,i]),e.operationFlow.start(Date.now()),e.operationFlow.push([G.FLOW_REPLACE_PLACEHOLDER]),t.replacers.forEach((function(e){e()})),e.operationFlow.end()}))},Li=function(e){var t=Gi(e);return t?Vi(t):""},Bi=function e(t,n,r){if("wx://"!==n.slice(0,5)){var i=mi[n];if(!i)throw new Error('"'+n+'" is not a behavior registered by Behavior()');t[0].unshift(i),r[n]=!0;var o=wi[i.is];if(o)for(var a=0;a<o.length;a++){var s=o[a];r[s]||e(t,s,r)}}},Fi=function e(t,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Ci.call(Yr,n)&&(n=Yr[n]);var s=_i[n];if(o.compManager.shouldUsePlaceholder(n)&&a)"[VD] Component ".concat(n," not found, trying to use placeholder");else if(s){var c=Ii[n];"wx://"!==n.slice(0,5)&&t[1].unshift(s),r[n]=!0;var u=yi[s.is],l=bi[s.is];for(var d in u)if(Ci.call(u,d)){var f=u[d];r[f]||e(t,f,r,n,o,!!c[d])}for(var p in l)if(Ci.call(l,p)){var h=l[p].default;h&&(r[h]||e(t,h,r,n,o,!!c[p]))}var g=wi[s.is];if(g)for(var v=0;v<g.length;v++){var _=g[v];r[_]||Bi(t,_,r)}}else console.error('Component is not found in path "'.concat(n,'"').concat(i?' (using by "'.concat(i,'")'):""))},ji=function(e,t){var n={};for(var r in e.properties){var i=e.properties[r];null===i?n[r]={type:null}:i===Number||i===String||i===Boolean||i===Object||i===Array?n[r]={type:i.name}:(void 0===i.public||i.public)&&(n[r]={type:null===i.type?null:i.type.name,value:i.value})}var o=e.options.innerDataExclude;return{is:e.is,using:e.using,generics:e.generics,placeholder:e.placeholder,behaviors:e.behaviors,data:e.data,properties:n,externalClasses:e.externalClasses,template:t,options:{domain:e.options.domain,writeOnly:e.options.writeOnly||void 0,multipleSlots:e.options.multipleSlots||void 0,writeIdToDOM:e.options.writeIdToDOM||void 0,styleIsolation:e.options.styleIsolation||void 0,addGlobalClass:e.options.addGlobalClass||void 0,hasObservers:!!e.observers,innerDataExcludeString:o?o.toString():null,virtualHost:e.options.virtualHost||void 0}}},Wi=function(e){if(e.behaviors){for(var t=[],n=0;n<e.behaviors.length;n++){var r=String(e.behaviors[n]);if("/"!==r[0]&&"wx://"!==r.slice(0,5))throw new Error("Behaviors should be constructed with Behavior()");t.push(r)}e.behaviors=t,wi[e.is]=t}else e.behaviors=null},Ui=function(e){var t="/"+Si+++"/"+M(),n={};for(var r in e)n[r]="data"===r?fi(e[r]):e[r];return n.is=t,Wi(n),n.options=pi,mi[t]=ji(n),n.definitionFilter=ci.Behavior.callDefinitionFilter(n),ci.registerBehavior(n),n.is},Vi=function(e){return ci.Component.getComponentOptions(e).domain.split("/",1)[0]},Gi=function(e){return vi.get(e)},Hi=function(e,t,n){var r=ci.Component.getComponentOptions(t).domain,i=ci.Component.getMethod(t,"__export__"),o=r===e?ci.Element.getMethodCaller(t):null;if(i){var a=r===e?n:null,s=i.call(ci.Element.getMethodCaller(t),a);return void 0===s?o:s}return o},Zi=function(e,t,n){var r=Gi(e),i=ci.Component.getComponentOptions(r).domain,o=r.shadowRoot;if(n)return o.querySelectorAll(t).map((function(t){return Hi(i,t,e)}));var a=o.querySelector(t);return a?Hi(i,a,e):null},qi=function(e,t,n){e!==Yi&&Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})};function zi(){}var Yi=zi.prototype=Object.create(Object.prototype,{is:{get:function(){return Gi(this).is},set:function(e){qi(this,"is",e)}},id:{get:function(){var e=Gi(this);return ci.Component.getComponentOptions(e).writeOnly?"":e.id},set:function(e){qi(this,"id",e)}},getPageId:{get:function(){return function(){return"pageId:"+Gi(this).__treeManager__.viewId}},set:function(e){qi(this,"getPageId",e)}},router:{get:function(){return Gi(this).__pageRouter__},set:function(e){qi(this,"router",e)}},pageRouter:{get:function(){return function(e){for(var t=Gi(e),n=ci.Component.getComponentOptions(t).domain;;){var r=t.ownerShadowRoot;if(!r)break;if(!(r instanceof ci.ShadowRoot))return null;var i=r.getHostNode();if(!i)return null;if(ci.Component.getComponentOptions(i).domain!==n)return null;t=i}return t}(this).__pageRouter__},set:function(e){qi(this,"pageRouter",e)}},dataset:{get:function(){var e=Gi(this);return ci.Component.getComponentOptions(e).writeOnly?null:e.dataset},set:function(e){qi(this,"dataset",e)}},properties:{get:function(){return this.__data__},set:function(e){qi(this,"properties",e)}},data:{get:function(){return this.__data__},set:function(e){qi(this,"data",e)}},setData:{get:function(){return function(e,t){var n=Gi(this),r=n.__treeManager__;return"function"==typeof t&&r.operationFlow.registerSetDataCallback(t,this,n),n.setData(e)}},set:function(e){qi(this,"setData",e)}},groupSetData:{get:function(){return function(e){var t=Gi(this).__treeManager__;t.operationFlow.start(Date.now()),t.operationFlow.push([G.FLOW_GROUP]);var n=null;try{e.call(this)}catch(e){n=e}if(t.operationFlow.push([G.FLOW_GROUP_END]),t.operationFlow.end(),n)throw n}},set:function(e){qi(this,"setData",e)}},replaceDataOnPath:{get:function(){var e=this;return function(t,n){return Gi(e).replaceDataOnPath(t,n)}},set:function(e){qi(this,"replaceDataOnPath",e)}},mergeDataOnPath:{get:function(){var e=this;return function(t,n){return Gi(e).mergeDataOnPath(t,n)}},set:function(e){qi(this,"mergeDataOnPath",e)}},applyDataUpdates:{get:function(){var e=this;return function(){return Gi(e).applyDataUpdates()}},set:function(e){qi(this,"applyDataUpdates",e)}},hasBehavior:{get:function(){var e=this;return function(t){return Gi(e).hasBehavior(t)}},set:function(e){qi(this,"hasBehavior",e)}},triggerEvent:{get:function(){var e=this;return function(t,n,r){return Gi(e).triggerEvent(t,n,r)}},set:function(e){qi(this,"triggerEvent",e)}},createSelectorQuery:{get:function(){var e=this;return function(){return __appServiceSDK__._createSelectorQuery({},Vi(Gi(e))).in(e)}},set:function(e){qi(this,"createSelectorQuery",e)}},createIntersectionObserver:{get:function(){var e=this;return function(t){return __appServiceSDK__._createIntersectionObserver(e,t,Vi(Gi(e)))}},set:function(e){qi(this,"createIntersectionObserver",e)}},createMediaQueryObserver:{get:function(){var e=this;return function(t){return __appServiceSDK__._createMediaQueryObserver(e,t,Vi(Gi(e)))}},set:function(e){qi(this,"createMediaQueryObserver",e)}},getOpenerEventChannel:{get:function(){var e=this;return function(){return e.__eventChannel}},set:function(e){qi(this,"getOpenerEventChannel",e)}},applyAnimation:{get:function(){var e=this;return function(t,n,r,i,o){var a=Gi(e);!function(e,t,n,r,i,o,a,s){var c="".concat(Math.random(),"-").concat(+new Date);"function"==typeof a&&(t.applyAnimationCbMap[c]=a),t.operationFlow.push([G.FLOW_SET_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof a,reqId:c,nodeId:t.nodeId.getNodeId(e),webviewId:n,selector:r,options:i,type:o?"animeJS":void 0,isLastAnimation:s}])}(a,a.__treeManager__,e.__wxWebviewId__,t,n,r,i,o)}},set:function(e){qi(this,"applyAnimation",e)}},clearAnimation:{get:function(){var e=this;return function(t,n,r){var i=Gi(e);!function(e,t,n,r,i,o){var a="".concat(Math.random(),"-").concat(+new Date);"function"==typeof o?t.clearAnimationCbMap[a]=o:"function"==typeof i&&(t.clearAnimationCbMap[a]=i),t.operationFlow.push([G.FLOW_CLEAR_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof t.clearAnimationCbMap[a],reqId:a,nodeId:t.nodeId.getNodeId(e),webviewId:n,selector:r,options:i}])}(i,i.__treeManager__,e.__wxWebviewId__,t,n,r)}},set:function(e){qi(this,"clearAnimation",e)}},animate:{get:function(){var e=this;return function(t,n,r,i,o){if("function"==typeof i)o=i;else if(void 0!==i){var a=Gi(e),s=a.__treeManager__;return void s.operationFlow.push([G.FLOW_SET_NODE_ANIMATION_INFO,{type:"scrollTimeline",nodeId:s.nodeId.getNodeId(a),selector:t,options:n,duration:r,timeline:i}])}for(var c=It(n,r),u=0;u<c.length;++u){var l="animeJS"===c[u].type;delete c[u].type,u===c.length-1?e.applyAnimation(t,c[u],l,o,!0):e.applyAnimation(t,c[u],l)}}},set:function(e){qi(this,"animate",e)}},selectOwnerComponent:{get:function(){var e=this;return function(t){var n=Gi(e);return ci.Component.getComponentOptions(n).writeOnly?null:function(e){var t=Gi(e),n=ci.Component.getComponentOptions(t).domain,r=t.ownerShadowRoot;if(!(r instanceof ci.ShadowRoot))return null;var i=r.getHostNode();return i?Hi(n,i,e):null}(e)}},set:function(e){qi(this,"selectOwnerComponent",e)}},selectComponent:{get:function(){var e=this;return function(t){var n=Gi(e);return ci.Component.getComponentOptions(n).writeOnly?null:Zi(e,t,!1)}},set:function(e){qi(this,"selectComponent",e)}},selectAllComponents:{get:function(){var e=this;return function(t){var n=Gi(e);return ci.Component.getComponentOptions(n).writeOnly?[]:Zi(e,t,!0)}},set:function(e){qi(this,"selectAllComponents",e)}},getRelationNodes:{get:function(){var e=this;return function(t){return function(e,t){var n=Gi(e).getRelationNodes(t);return null===n?null:n.map((function(e){return ci.Element.getMethodCaller(e)}))}(e,t)}},set:function(e){qi(this,"getRelationNodes",e)}},getTabBar:{get:function(){return function(){var e=Gi(this).__treeManager__;return e.tabDestroyed||!e.tabRoot?null:ci.Element.getMethodCaller(e.tabRoot)}},set:function(e){qi(this,"getTabBar",e)}},exitState:{get:function(){return this.__exitState__},set:function(e){qi(this,"exitState",e)}},setInitialRenderingCache:{get:function(){return function(e){var t=Gi(this).__treeManager__;null===e?vo(t):go(t,e)}},set:function(e){qi(this,"exitState",e)}},setUpdatePerformanceListener:{get:function(){return function(e,t){var n=Gi(this),r=n.__treeManager__,i=r.nodeId.getNodeId(n);"function"==typeof t?(n.__updatePerformanceListener__=t,r.operationFlow.push([G.ENABLE_UPDATE_PERFORMANCE_STAT,i,e])):(n.__updatePerformanceListener__=null,r.operationFlow.push([G.DISABLE_UPDATE_PERFORMANCE_STAT,i]))}},set:function(e){qi(this,"exitState",e)}}}),Ki=function(e,t,n){var r=t[n+".json"]||{};void 0!==r.styleIsolation&&(e.options||(e.options={}),e.options.styleIsolation=r.styleIsolation),void 0!==r.pureDataPattern&&(e.options||(e.options={}),e.options.pureDataPattern=new RegExp(r.pureDataPattern))},Ji=function(e,t){e.using=yi[e.is]=Ti(e.is,t),e.generics=bi[e.is]=ki(e.is,t),e.placeholder=Ii[e.is]=xi(e.is,t),Wi(e);var n=e.is+".wxml",r={path:n,func:Jn[n]||t[n]||null};e.template=r,_i[e.is]=ji(e,n);var i=ci.registerElement(e),o=Object.create(Yi,{constructor:{value:zi,writable:!0,configurable:!0}});ci.Behavior.prepare(i.behavior);var a=i.behavior.methods;for(var s in a)o[s]=a[s];return $n(e.is+".js",(function(t){t(),function(e){var t=_i[e];Ro.list().forEach((function(n){w(G.UPDATE_COMPONENT_DEF,[t],n.viewId),[n.root,n.tabRoot].forEach((function(t){t&&B(t,1,(function(t){if(t instanceof ci.Component&&t.is===e){var r=t===n.root;r&&n.lifetimeListener&&n.lifetimeListener.call(n.root,"onUnload"),rr(t,n),r&&n.lifetimeListener&&(n.lifetimeListener.call(n.root,"onLoad"),n.lifetimeListener.call(n.root,"onShow"))}}))}))}))}(e.is)})),o},$i=function e(t,n,r,i){var o=i||__wxAppCurrentFile__,a=r||__wxAppCode__,s=a[o+"on"];if(!o||!s)return console.error("Component constructors should be called while initialization. A constructor call has been ignored."),"";var c=o.slice(0,-3);if(s.component&&"simple"===s.component.type)return function(e,t,n,r,i){Ki(e,i,t);var o={is:t,using:Ti(t,i),properties:e.properties,externalClasses:e.externalClasses,options:hi},a=e.options||{};o.options=hi,o.options.multipleSlots=a.multipleSlots||!1,o.options.writeOnly=!0,o.options.writeIdToDOM=!1,o.options.domain="simple://"+(r||"/"),o.options.styleIsolation=a.styleIsolation||"",o.options.addGlobalClass=a.addGlobalClass||!1,o.options.innerDataExclude=null,o.options.virtualHost=!1,_i[t]=ji(o,t+".wxml"),o.is}(t,c,0,n,a),c;Ki(t,a,c);var u=ci.Behavior.callDefinitionFilter(t),l={is:c,properties:t.properties,data:fi(t.data),methods:t.methods,behaviors:t.behaviors,lifetimes:t.lifetimes,pageLifetimes:t.pageLifetimes,created:t.created,attached:t.attached,ready:t.ready,moved:t.moved,detached:t.detached,saved:t.saved,restored:t.restored,relations:t.relations?Ei(o,t.relations):void 0,externalClasses:t.externalClasses,observers:t.observers,definitionFilter:u,options:hi,initiator:function(){this.__customConstructor__=e,this.__pageRouter__=__appServiceSDK__.createRouter(c,this.__treeManager__.viewId);var t=Object.create(f);vi.set(t,this),ci.Element.setMethodCaller(this,t),Object.defineProperties(t,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},d=t.options||{};l.options=hi,l.options.multipleSlots=d.multipleSlots||!1,l.options.writeOnly=d.writeOnly||!1,l.options.writeIdToDOM=!1,l.options.domain=(d.writeOnly?"wo://":"")+(n||"/"),l.options.styleIsolation=d.styleIsolation||"",l.options.addGlobalClass=d.addGlobalClass||!1,l.options.innerDataExclude=d.pureDataPattern||null,l.options.virtualHost=d.virtualHost||!1;var f=Ji(l,a);return l.is},Xi=function e(t,n,r,i){var o=i||__wxAppCurrentFile__;if(!o)return console.error("Page constructors should be called while initialization. A constructor call has been ignored."),"";var a=r||"undefined"!=typeof __wxAppCode__&&__wxAppCode__||{},s=Object.create(null),c={methods:{}};for(var u in t)"data"===u?c.data=t.data:"function"==typeof t[u]?c.methods[u]=t[u]:"methods"===u?s.methods=t.methods:c[u]=t[u];var l=function(e){if(!e)return!1;if(e instanceof Array){for(var t=0;t<e.length;t++){var n=String(e[t]);if("wx://"!==n.slice(0,5)&&!mi[n])return console.warn('"behaviors" list contains non-behavior items. The whole list is ignored.'),!1}return!0}return!1}(c.behaviors),d=o.slice(0,-3);for(var f in Ki(c,a,d),l&&ci.Behavior.callDefinitionFilter(c),c)"data"!==f&&"methods"!==f&&(s[f]=c[f]);var p={is:d,behaviors:l?c.behaviors:void 0,data:fi(c.data),methods:c.methods,properties:void 0===t.properties?c.properties:void 0,lifetimes:void 0===t.lifetimes?c.lifetimes:void 0,pageLifetimes:void 0===t.pageLifetimes?c.pageLifetimes:void 0,created:void 0===t.created?c.created:void 0,attached:void 0===t.attached?c.attached:void 0,ready:void 0===t.ready?c.ready:void 0,moved:void 0===t.moved?c.moved:void 0,detached:void 0===t.detached?c.detached:void 0,saved:void 0===t.saved?c.saved:void 0,restored:void 0===t.restored?c.restored:void 0,relations:void 0===t.relations&&c.relations?Ei(o,c.relations):void 0,externalClasses:void 0===t.externalClasses?c.externalClasses:void 0,observers:void 0===t.observers?c.observers:void 0,options:hi,initiator:function(){this.__customConstructor__=e,this.__pageRouter__=__appServiceSDK__.createRouter(d,this.__treeManager__.viewId);var t=Object.create(g);vi.set(t,this),ci.Element.setMethodCaller(this,t),Object.defineProperties(t,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},h=c.options||{};p.options.multipleSlots=!1,p.options.writeOnly=!1,p.options.writeIdToDOM=!0,p.options.domain=n||"/",p.options.styleIsolation=h.styleIsolation||"shared",p.options.addGlobalClass=!1,p.options.innerDataExclude=h.pureDataPattern||null,p.options.virtualHost=h.virtualHost||!1;var g=Ji(p,a);return g.__freeData__=s,p.is},Qi=!0,eo=function(e){!function(e){var t=hr++;gr.push(t);try{e(t)}catch(e){throw gr.pop(),e}gr.pop()}((function(){to(e)}))},to=function(e){fn+=1;var t,n,r,i,o,a=Date.now(),s=e.operationFlow.iterator,c=s.expectStart(),u=s.nextStepType();if(u===G.FLOW_INITIAL_CREATION)no(e,G.FLOW_INITIAL_CREATION),gn(c,a,Date.now(),2);else if(u===G.FLOW_INITIAL_RENDERING_CACHE)no(e,G.FLOW_INITIAL_RENDERING_CACHE);else if(u===G.FLOW_CREATE_TAB)no(e,G.FLOW_CREATE_TAB),gn(c,a,Date.now(),3);else if(Ci.call(Oo,s.nextStepType())){var l=Oo[s.nextStepType()],d=s.nextStep().slice(1);l(e.compManager,d)}else{var f=Date.now(),p=s.nextStep();if(p[0]===G.FLOW_UPDATE){var h=p[1],g=e.nodeId.getNodeById(h),v=p[2];if(g){if(v.length){var _=ci.Component.getDataProxy(g);_.setChanges(v),_.doUpdates(void 0,!1),vr(h,(function(e){return{isMergedUpdate:!1,dataPaths:e.withDataPaths?v.map((function(e){return e[0]})):void 0,pendingStartTimestamp:c,updateStartTimestamp:a,updateEndTimestamp:Date.now()}}))}}else"[flowUpdate] node ".concat(p[1]," not found"),s.skipToEnd()}else if(p[0]===G.FLOW_GROUP){var m=s.nextStep();if(m[0]!==G.FLOW_GROUP_END)throw new Error("Framework inner error (expect FLOW_GROUP_END but get ".concat(Z(m[0]),")"))}else if(p[0]===G.FLOW_REPLACE_PLACEHOLDER){var y=e.compManager.getPlaceholderReplaceData();e.compManager.finishPlaceholderReplacement(),y.replacers.forEach((function(e){e()}))}else if(p[0]===G.FLOW_HOT_UPDATE){var b=e.nodeId.getNodeById(p[1]);b?b.__templateInstance._resetShadowChildren(b,b.data,e):s.skipToEnd()}else{if(p[0]!==G.FLOW_HOT_UPDATE_RESET)throw new Error("Framework inner error (expect an update event but get ".concat(Z(p[0]),")"));var w=e.nodeId.getNodeById(p[1]);rr(w,e)}!function(e,t,n,r){Reporter.speedReport({key:e,timeMark:{startTime:t,endTime:n},force:"reRenderTime"!==e,data:r})}("reRenderTime",f,Date.now()),Qi&&5===function(e,t,n){return vn+=fn,mn+=n-t,yn+=pn,bn+=hn,wn+=n-e,fn=0,pn=0,hn=0,_n+=1}(c,a,Date.now())&&(Qi=!1,t=1,n=Math.ceil(mn/(_n||1)),r=Math.ceil(bn/(yn||1)),i=Math.ceil(wn/(_n||1)),o=[vn,_n,n,yn,r,1,i,t].map(encodeURIComponent).join(","),"undefined"!=typeof Reporter&&Reporter.reportKeyValue({key:"SetDataPerf",value:o,force:!0}))}s.expectEnd()},no=function(e,t){var n,r,i=t===G.FLOW_CREATE_TAB,o=t===G.FLOW_INITIAL_RENDERING_CACHE,a=e.operationFlow.iterator,s=a.nextStep(),c=s[1],u=s[2],l=null;if(i)e.tabNodeId=u,e.tabRoot=l=window.__TAB_BAR__=ci.createElement("tab-bar",ci.Component._list[c]);else if(o){if(!c)return void ii(null);l=ci.createElement("initial-rendering-cache",ci.Component._list[c])}else{var d=s[3]||{};e.rootNodeId=u,e.root=l=window.__DOMTree__=ci.Component.createWithGenerics("body",ci.Component._list[c],d,e)}if(e.nodeId.allocNodeId(l,u),l.setAttribute("is",c),cn.restoring&&!i){var f=cn.idDataMap[e.nodeId.getNodeId(l)];ci.Component.replaceWholeData(l,f,null),Ur(cn.restoring),cn.restoring=null,cn.idDataMap=null}if((s=a.nextStep())[0]!==t)throw new Error("Framework inner error (expect ".concat(Z(t)," end but get ").concat(Z(s[0]),")"));if(e.nodeId.addNode(l),i){var p=ci.createElement("wx-tab-bar-wrapper",ci.Component._list["wx://tab-bar-wrapper"]);p.appendChild(l),document.documentElement.insertBefore(p.$$,document.body),ci.Element.pretendAttached(p),e.tabDestroyed&&p.removeChild(l)}else if(o){var h=document.createElement("wx-initial-rendering-cache-wrapper");if(h.setAttribute("style","height: 0; overflow: hidden"),h.appendChild(l.$$),document.documentElement.insertBefore(h,document.body),(s=a.nextStep())[0]!==G.FLOW_INITIAL_RENDERING_CACHE)throw new Error("Framework inner error (expect initial rendering end but get another)");B(l,1,(function(e){e.triggerLifeTime("cacheAttached")})),ii(l,s[1]),e.nodeId.removeNode(l),document.documentElement.removeChild(h)}else document.body=l.$$,B(l,1,(function(e){e.triggerLifeTime("cacheAttached")})),function(e){ti&&"initialRenderingCache applied (boost time ".concat(Date.now()-ti,")"),"static"===ni(window.__route__)&&ri(e)}(l),ci.Element.pretendAttached(l),n="initialRenderingDone",r=Date.now(),Qr[n]=r,setTimeout((function(){w(G.PERFORMANCE_DATA,[Qr],void 0,!0)}),0)},ro=function(){en.setStartOperation(eo),Ro.instance=Ro.create(0)},io={String:String,Number:Number,Boolean:Boolean,Object:Object,Array:Array,null:null},oo=function(e,t,n){for(var r in e.properties)e.properties[r].type=io[e.properties[r].type];var i="";t||(i=n.compManager.getComponentClassPrefix(e.is));var o=e.options,a=!(!o.writeIdToDOM&&!t);e.options=gi,e.options.multipleSlots=o.multipleSlots||!1,e.options.writeOnly=o.writeOnly||!1,e.options.writeIdToDOM=a,e.options.domain=o.domain,e.options.randomizeTagName=!1,e.options.innerDataExclude=function(e){if(!e)return null;var t=e.lastIndexOf("/"),n=e.slice(1,t),r=e.slice(t+1);return new RegExp(n,r)}(o.innerDataExcludeString),e.options.virtualHost=o.virtualHost;var s=!1;if(o.styleIsolation){var c=o.styleIsolation;"page-"===c.slice(0,5)&&(s=!0,c=c.slice(5)),"isolated"===c?(i=n.compManager.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1):"strong-isolated"===c?(i=n.compManager.getComponentClassPrefix(e.is),e.options.addGlobalClass=!1,e.options.randomizeTagName=!0):"apply-shared"===c?(i=n.compManager.getComponentClassPrefix(e.is),e.options.addGlobalClass=!0):"shared"===c&&"/"===o.domain?(i="",e.options.addGlobalClass=!1):s=!1}else e.options.addGlobalClass=o.addGlobalClass||!1;e.options.classPrefix=i,o.hasObservers&&(e.observers={"**":function(){}}),window.__customComponentMode__="undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template];var u=window.__generateFunc__;return"undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template]?u=__wxAppCode__[e.template]:"Generate function __wxAppCode__[".concat(e.template,"] not found"),e.template={path:e.is+".wxml",func:u},ci.registerElement(e),{disableAppWxss:s,classPrefix:i}},ao=function(e,t){t||(window.__forceSaveStates__=Vr,"function"==typeof wx.onWebViewWillManuallyTerminate&&wx.onWebViewWillManuallyTerminate(Vr));var n=V()(e,4),r=n[0],i=n[1],o=n[2],a=n[3],s=Ro.instance;t||(s.rootCompName=o);for(var c=0;c<r.length;c++){var u=r[c];u.options=pi,ci.registerBehavior(u)}for(var l=function(e){var n=i[e],r=n.is===o&&!t,a=oo(n,r,s),c=a.disableAppWxss,u=a.classPrefix;c&&n.is===o&&!t&&__webviewEngine__.disableStyleElement("app.wxss");var l=n.is+".wxss",d="undefined"==typeof __wxAppCode__?null:__wxAppCode__[l];d&&((n.is!==o||t)&&d(u&&u+"--",{allowIllegalSelector:!0}),$n(l,(function(e){e?e(u&&u+"--",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./"+l,""),document.dispatchEvent(new CustomEvent("pageReRender",{}))})))},d=0;d<i.length;d++)l(d);for(var f in $n("app.wxss",(function(e){e?e("",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./app.wxss",""),document.dispatchEvent(new CustomEvent("pageReRender",{}))})),a)Ci.call(ci.Component._list,a[f])&&(ci.Component._list[f]=ci.Component._list[a[f]])};S(G.LOAD_COMPONENT_DEF,(function(e){if(!__wxConfig.isFirstPage&&Pi()){var t=e[0],n=Ro.instance.compManager;n.setInitialSubPackage(t),n.injectComponentsRecursively([t],(function(){yo.on("inject",(function(){Ni(t),Oi(t)}))}),!0)}}),0);var so=!1,co=[],uo=[];S(G.COMPONENT_DEF,(function(e){so?ao(e,!1):co.push(e),Ro.instance.compManager.setInitialSubPackage(e[2])}),0),S(G.COMPONENT_DEF_TAB,(function(e){so||ui?yo.on("inject",(function(){ao(e,!0)})):uo.push(e)}),0);var lo,fo=function(){so=!0,mo(),co.forEach((function(e){ao(e,!1)})),co=[],uo.forEach((function(e){yo.on("inject",(function(){ao(e,!0)}))})),uo=[]},po=function(e,t,n){var r=[[],[],n=Er(n),Yr];lo=Object.create(null),Fi(r,n,lo,"",t);var i=function(e){var t=Kr[e];if(!t)return{};var n=t.match(/^plugin:\/\/(wx[0-9a-f]{16})\/(.+)$/);if(!n)return{};var r=n[1],i=n[2],o=L(__wxConfig.plugins).find((function(e){return e.provider===r}));if(!o)return{};if(!o.genericsImplementation)return{};var a=o.genericsImplementation[i]||{},s={},c=xr(r);return Object.keys(a).forEach((function(e){s["wx-"+e]=N(c,String(a[e]))})),s}(n);L(i).forEach((function(e){Fi(r,e,lo,"",t)})),w(G.COMPONENT_DEF,r,e),function(e){te&&w(G.BANNING_MAP,[te],e)}(e),t.rootCompName=n,t.rootNodeId=M(),t.operationFlow.start(),t.operationFlow.push([G.FLOW_INITIAL_CREATION,n,t.rootNodeId,i]);var o=ci.Component.createWithGenerics("body",ci.Component._list[n],i,t);return dn(o,t),t.root=o,t.usedDef=r,ci.Element.getMethodCaller(o).__wxExparserNodeId__=t.nodeId.allocNodeId(o,t.rootNodeId),t.operationFlow.push([G.FLOW_INITIAL_CREATION]),t.nodeId.addNode(o),o};S(G.UPDATE_COMPONENT_DEF,(function(e){var t=V()(e,1)[0],n=Ro.instance;ci.Component._list[t.is]&&oo(t,n.rootCompName===t.is,n)}));var ho=function(e,t){t.listenerInited||(t.listenerInited=!0,function(e,t){S(G.WX_EVENT,(function(n){var r=n[2],i=n[1],o=t.nodeId.getNodeById(n[0]);if(o){var a=ci.Element.getMethodCaller(o),s=r._userTap;if(r._requireActive&&!__appServiceEngine__.isFramesetMode()){var c=__appServiceEngine__.getCurrentPagesByDomain("");if(c[c.length-1].__wxWebviewId__!==e)return;delete r._requireActive}r._relatedInfo&&(__appServiceEngine__.DisplayReporter.setEventRelatedInfo(r._relatedInfo),delete r._relatedInfo),"function"!=typeof a[i]?console.warn('Component "'+o.is+'" does not have a method "'+i+'" to handle event "'+r.type+'".'):s?Dn((function(){__appServiceSDK__.setWxInterfaceIsInvokeInTap(r.type),ci.safeCallback("Event Handler",a[i],a,[r],o),__appServiceSDK__.unsetWxInterfaceIsInvokeInTap()})):ci.safeCallback("Event Handler",a[i],a,[r],o)}}),e),S(G.MODEL_VALUE_CHANGE,(function(e,t,n){var r=e[0],i=r.data,o=r.modelValueName,a=r.nodeId;Ai(i,o,n,a)}),e)}(e,t),S(G.REQUEST_SAVE,(function(t){var n=V()(t,1)[0];Zr(e,n)}),e),S(G.CALL_METHOD_FROM_WXS,(function(e){Fn(e)}),e),function(e,t){S(G.ANIMATION_TRANSITION_END,(function(e){if(e&&e[0]&&e[0].reqId){var n=t.applyAnimationCbMap[e[0].reqId];"function"==typeof n&&(delete t.applyAnimationCbMap[e[0].reqId],oi.safeCallback("Animation",n,null,[]));var r=JSON.parse(e[0].args);t.operationFlow.push([G.FLOW_SET_NODE_NEXT_ANIMATION_INFO,r])}}),e),S(G.CLEAR_ANIMATION_COMPLETE,(function(e){if(e&&e[0]&&e[0].reqId){var n=t.clearAnimationCbMap[e[0].reqId];"function"==typeof n&&(delete t.clearAnimationCbMap[e[0].reqId],oi.safeCallback("Clear Animation",n,null,[]))}}),e)}(e,t),function(e,t){S(G.RESPONSE_VIEW_INFO,(function(e){var n=V()(e,2),r=n[0],i=n[1];if(i){var o=t.viewInfoCbMap[i];o&&o(r)}}),e)}(e,t),function(e,t){S(G.UPDATE_PERFORMANCE_STAT,(function(e){var n=V()(e,2),r=n[0],i=n[1],o=t.nodeId.getNodeById(r);if(o&&o.__updatePerformanceListener__){var a=fr.Element.getMethodCaller(o);fr.safeCallback("Update Performance Listener",o.__updatePerformanceListener__,a,[i],o)}}),e)}(e,t))},go=function(e,t){var n=Er(e.rootCompName),r=M();e.operationFlow.start(),e.operationFlow.push([G.FLOW_INITIAL_RENDERING_CACHE,n,r]);var i=ci.createElement("initial-rendering-cache",ci.Component._list[n],e);return ci.Element.getMethodCaller(i).__wxExparserNodeId__=e.nodeId.allocNodeId(i,r),e.operationFlow.push([G.FLOW_INITIAL_RENDERING_CACHE]),e.nodeId.addNode(i),i.setData(t),e.operationFlow.push([G.FLOW_INITIAL_RENDERING_CACHE,t]),e.operationFlow.end(),e.nodeId.removeNode(i),i},vo=function(e){e.operationFlow.start(),e.operationFlow.push([G.FLOW_INITIAL_RENDERING_CACHE,"",null]),e.operationFlow.end()},_o=!1,mo=function(){_o||(_o=!0,w(G.REQUEST_TAB,[]),Ro.instance.compManager.setInitialSubPackage(Ri))},yo=F(["inject"]);var bo=function(e,t,n){var r=!0,i=__wxConfig.tabBar&&__wxConfig.tabBar.list;i instanceof Array&&(i.map((function(e){return e&&e.pagePath})).indexOf(t+".html")>=0&&(r=!1));r&&(e.tabDestroyed=!0,w(G.DESTROY_TAB,[],n))};var wo=function(e,t){if(n=!1,__wxConfig.tabBar&&!0===__wxConfig.tabBar.custom&&(n=!0),Co(Ri)||(n=!1),__wxConfig.appLaunchInfo&&"singlePage"===__wxConfig.appLaunchInfo.mode&&(n=!1),n){var n,r=Ro.get(e)||Ro.create(e);ho(e,r),r.tabRoot||r.tabDestroyed||(r.compManager.injectComponentsRecursively([Ri]),function(e,t,n){var r=[[],[],n=Er(n),{}];Fi(r,n,Object.create(null),"",t),w(G.COMPONENT_DEF_TAB,r,e),t.tabCompName=n,t.tabNodeId=M(),t.operationFlow.start(),t.operationFlow.push([G.FLOW_CREATE_TAB,n,t.tabNodeId]);var i=ci.createElement("tab-bar",ci.Component._list[n],t);t.tabRoot=i,t.tabUsedDef=r,ci.Element.getMethodCaller(i).__wxExparserNodeId__=t.nodeId.allocNodeId(i,t.tabNodeId),t.operationFlow.push([G.FLOW_CREATE_TAB]),t.nodeId.addNode(i)}(e,r,Ri),ci.Element.pretendAttached(r.tabRoot),r.operationFlow.end(),t&&w(G.FLUSH_BLOCKED,[],e),r.rootCompName&&bo(r,r.rootCompName,e))}},Io=[];__wxConfig.onReady((function(){Io.forEach((function(e){wo(e,!0)})),Io=null})),S(G.REQUEST_TAB,(function(e,t,n){null!==Io?Io.push(n):wo(n,!0)}),"$GLOBAL");var So,Co=function(e){return e=Er(e),Ci.call(Yr,e)&&(e=Yr[e]),_i[e]},To=function(e,t,n){var r=Ro.get(e)||Ro.create(e);r.lifetimeListener=n,r.operationFlow.unblock();try{wo(e,!1)}catch(e){Reporter.thirdErrorReport({error:e})}r.compManager.setInitialSubPackage(t),bo(r,t,e),ho(e,r),t=Er(t);var i=(__wxConfig.subPackages||[]).filter((function(e){return!!e.allExtendedComponents}));return w(G.LOAD_COMPONENT_DEF,[t,i],e),r.compManager.injectComponentsRecursively([t],null,!0),Co(t)||(t="wx://not-found"),po(e,r,t)},Eo=function(e,t){var n=Ro.get(e);if(n){var r=n.root,i=!1,o={};Object.keys(t).forEach((function(e){ci.Component.hasProperty(r,e)&&(o[e]=t[e],i=!0)})),i&&n.root.setData(o),Xn()&&(n.initialRootData=t),ci.Element.pretendAttached(r),n.root.__treeManager__.operationFlow.end()}},ko=function(e){var t=Ro.get(e);t&&(ci.Element.pretendDetached(t.root),Ro.destroy(e),function(e){delete u[e]}(e))},xo=Object.prototype.hasOwnProperty,Ao=function(){return"devtools"===__wxConfig.platform||"devtool"===__wxConfig.serviceRuntime},Po=!0,Do=function(){function e(t,n){var r=this;x()(this,e),this.__viewId=t,this.__treeManager=n,this.__loadedSubPackage=new Set,this.__injectedSubPackage=new Set,this.__log=function(e){wxNativeConsole.info("[CompMgr] [".concat("data","] [").concat(r.__viewId,"] ").concat(e))},this.__ensureComponentNotifier={},this.__placeholderReplacement=null,this.__injectedComponents=new Set([]),this.__classPrefixMap=new Map,this.__usedClassPrefix=new Set,this.__restoreInjectNotifier=null}return P()(e,[{key:"getRestoredData",value:function(){return[Array.from(this.__loadedSubPackage),Array.from(this.__injectedSubPackage),Object.fromEntries(this.__classPrefixMap)]}},{key:"getRestoreInjectNotifier",value:function(){return this.__restoreInjectNotifier||(this.__restoreInjectNotifier=F(["inject"])),this.__restoreInjectNotifier}},{key:"restore",value:function(e){var t=this;this.setSubPackageLoaded(e[0]),this.batchInjectSubPackages(e[1],(function(){t.getRestoreInjectNotifier().notify("inject")})),this.__usedClassPrefix=new Set(Object.values(e[2])),this.__classPrefixMap=new Map(Object.entries(e[2]))}},{key:"onRestoreInjectDone",value:function(e){this.getRestoreInjectNotifier().on("inject",e)}},{key:"recurseUsingComponents",value:function(e){if(!Pi())return e;var t=__wxAppCode__,n="undefined"!=typeof __WXML_DEP__&&__WXML_DEP__||{},r=new Set,i=function e(i){if(!r.has(i)){r.add(i);var o=Ti(i,t),a=ki(i,t),s=xi(i,t);for(var c in o)xo.call(s,c)?xo.call(o,s[c])&&e(o[s[c]]):e(o[c]);for(var u in a){var l=a[u];"string"==typeof l.default&&e(l.default)}(n["./"+i+".wxml"]||[]).forEach((function(n){var r=n.substr(2,n.length-7);xo.call(t,r+".json")&&e(r)}))}};e.forEach((function(e){return i(e)}));var o=Array.from(r);return this.__log("recurseUsingComponents(".concat(JSON.stringify(e),") => ").concat(JSON.stringify(o))),o}},{key:"batchLoadSubPackages",value:function(e,t){var n=this;this.__log("loadSubPackages: "+e.join(", ")),Promise.all(e.map((function(e){return new Promise((function(t){!function(e,t){var n=Date.now();__appServiceSDK__.loadSubpackage({name:e,success:function(){var e=Date.now();t(e-n)},complete:function(t){wxNativeConsole.info("[VD] loadSubpackage "+e+": ",t)}})}(e,t)}))}))).then((function(){n.setSubPackageLoaded(e),n.__treeManager.operationFlow.sendInIndividualFlow([G.FLOW_SET_SUBPACKAGE_LOADED,e]),t()}))}},{key:"setSubPackageLoaded",value:function(e){var t=this;this.__log("setSubPackageLoaded: "+e.join(", ")),e.forEach((function(e){t.__loadedSubPackage.add(e)}))}},{key:"batchInjectSubPackages",value:function(e,t){var n=this;this.__log("injectSubPackages: "+e.join(", "));var r=e.filter((function(e){return!n.__injectedSubPackage.has(e)})).map((function(e){return"__APP__"===e||"/"===e.slice(-1)?e:e+"/"}));if(Ao())T(r),this.setSubPackageInjected(r);else{var i=[];r.forEach((function(e){i.push.apply(i,nn()(Mr(e,(function(t){n.__log("getEntryFile ".concat(e,": ").concat(t))}))))})),C(i),this.setSubPackageInjected(r)}}},{key:"batchInjectComponents",value:function(e,t){var n=this;if(!Pi())return-1;var r=e.map((function(e){return kr(e)})).filter((function(e){return!n.__injectedComponents.has(e)}));this.__log("injectComponents: "+r.join(", "));var i=Ao()?E(r):C(r.map((function(e){return"".concat(e,".appservice.js")})));return r.forEach((function(e){n.__injectedComponents.add(e)})),i}},{key:"setSubPackageInjected",value:function(e){var t=this;this.__log("setSubPackageInjected: "+e.join(", ")),e.forEach((function(e){t.__injectedSubPackage.add(e)}))}},{key:"setInitialSubPackage",value:function(e){var t=[Dr(e)];Or(e)||t.push("__APP__"),this.setSubPackageLoaded(t),this.setSubPackageInjected(t)}},{key:"shouldUsePlaceholder",value:function(e){var t=Dr(e),n=this.__loadedSubPackage.has(t);return Pi()&&(n=n&&this.__injectedComponents.has(e)),!n}},{key:"doLazyLoadReport",value:function(e,t){var n=In(),r=Po;Po=!1;var i=Object.keys(__wxAppCode__).filter((function(e){return e.endsWith(".json")})).length;n.set("isFirstPage",r),n.set("totalComps",i),n.set("loadedComps",e),n.set("loadTime",t)}},{key:"injectComponentsRecursively",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Pi()){var r=this.recurseUsingComponents(e),i=this.batchInjectComponents(r,(function(e){0}));n&&this.doLazyLoadReport(r.length,i)}}},{key:"ensureComponents",value:function(e,t){var n,r=this,i=M(),o=e.map((function(e){return Dr(e)}));return n=o,(o=Array.from(new Set(n))).some((function(e){return!Or(e)}))&&o.unshift("__APP__"),o=o.filter((function(e){return!r.__loadedSubPackage.has(e)})),this.batchLoadSubPackages(o,(function(){r.__treeManager.operationFlow.sendInIndividualFlow([G.FLOW_INJECT_SUBPACKAGE,i,o]),Pi()&&r.__treeManager.operationFlow.sendInIndividualFlow([G.FLOW_INJECT_COMPONENT,i,e]),r.batchInjectSubPackages(o),r.injectComponentsRecursively(e),t(i)})),i}},{key:"getEnsureComponentsNotifier",value:function(e){if(!this.__ensureComponentNotifier[e]){var t=["inject","def"];Pi()&&t.push("inject-common"),this.__ensureComponentNotifier[e]=F(t)}return this.__ensureComponentNotifier[e]}},{key:"destructEnsureComponentsNotifier",value:function(e){this.__ensureComponentNotifier[e]&&delete this.__ensureComponentNotifier[e]}},{key:"injectSubPackageOnReady",value:function(e,t){var n=this;this.batchInjectSubPackages(t,(function(){var t=Pi()?"inject-common":"inject";n.getEnsureComponentsNotifier(e).notify(t)}))}},{key:"injectComponentsOnReady",value:function(e,t){var n=this;Pi()&&this.getEnsureComponentsNotifier(e).on("inject-common",(function(){n.injectComponentsRecursively(t,(function(){n.getEnsureComponentsNotifier(e).notify("inject")}))}))}},{key:"appendComponentDef",value:function(e,t){var n=this;this.getEnsureComponentsNotifier(e).on("inject",(function(){ao(t,!1),n.getEnsureComponentsNotifier(e).notify("def")}))}},{key:"waitComponentEnsuring",value:function(e,t){var n=this;this.getEnsureComponentsNotifier(e).on("def",(function(){t((function(){n.destructEnsureComponentsNotifier(e)}))}))}},{key:"arrangePlaceholderReplace",value:function(e,t){var n=this;null===this.__placeholderReplacement?this.__placeholderReplacement={compNames:new Set,replacers:[]}:clearTimeout(this.__placeholderReplacement.timer),this.__placeholderReplacement.compNames.add(e),this.__placeholderReplacement.replacers.push(t),this.__placeholderReplacement.timer=setTimeout((function(){Mi(n.__treeManager)}),50)}},{key:"getPlaceholderReplaceData",value:function(){return this.__placeholderReplacement}},{key:"finishPlaceholderReplacement",value:function(){this.__placeholderReplacement=null}},{key:"getComponentClassPrefix",value:function(e){if(this.__classPrefixMap.has(e))return this.__classPrefixMap.get(e);var t=e.split(/[^a-z0-9]+/i),n="",r=0,i=0;do{r<t.length?r+=1:i+=1,n=t.slice(-r).join("-"),i>0&&(n+="-"+i),Number(n[0])>=0&&(n="x-"+n)}while(this.__usedClassPrefix.has(n));return this.__classPrefixMap.set(e,n),this.__usedClassPrefix.add(n),n}}]),e}(),Oo=(So={},c()(So,G.FLOW_COMPONENT_DEF_ADD,(function(e,t){var n=t[0],r=t[1];e.appendComponentDef(n,r)})),c()(So,G.FLOW_INJECT_SUBPACKAGE,(function(e,t){var n=t[0],r=t[1];e.injectSubPackageOnReady(n,r)})),c()(So,G.FLOW_INJECT_COMPONENT,(function(e,t){var n=t[0],r=t[1];e.injectComponentsOnReady(n,r)})),c()(So,G.FLOW_SET_SUBPACKAGE_LOADED,(function(e,t){var n=t[0];e.setSubPackageLoaded(n)})),c()(So,G.FLOW_WAIT_COMPONENT,(function(e,t){var n=t[0];e.__treeManager.operationFlow.block(),e.waitComponentEnsuring(n,(function(t){e.__treeManager.operationFlow.unblock(),t()}))})),So),No={};const Ro=function(){function e(t){x()(this,e),this.listenerInited=!1,this.root=null,this.tabRoot=null,this.tabDestroyed=!1,this.usedDef=null,this.tabUsedDef=null,this.statesData=null,this.operationFlow=new en(t,this),this.nodeId=new W,this.compManager=new Do(t,this),this.rootNodeId="",this.tabNodeId="",this.rootCompName="",this.tabCompName="",this.applyAnimationCbMap={},this.clearAnimationCbMap={},this.viewInfoCbMap={},this.initialRootData=null,this.lifetimeListener=null}return P()(e,null,[{key:"create",value:function(t){var n=new e(t);return n.viewId=t,No[t]=n,n}},{key:"destroy",value:function(e){delete No[e]}},{key:"get",value:function(e){return No[e]}},{key:"listViewId",value:function(){var e=[];for(var t in No)e.push(No[t].viewId);return e}},{key:"list",value:function(){var e=[];for(var t in No)e.push(No[t]);return e}}]),e}();var Mo=function(e,t){var n=Ro.get(t);return n?n.nodeId.getNodeById(e):null},Lo=function(e,t){return Ro.get(t).nodeId.getNodeId(e)},Bo=function(e){var t=Ro.get(e);return t?t.rootNodeId:""},Fo=function(){Kn=!0},jo=function(e,t){var n=Yn[e];if(n)return Jn[e]=t,n(t)},Wo=o(),Uo=function(e){return e};Wo.addGlobalErrorListener((function(e,t){var n=t.element&&t.element instanceof zi?t.element:null,r=n?Li(n):"";return Reporter.thirdErrorReport({source:r,error:e,extend:t.message.replace(/^\[exparser\] \[(error|warning)\]/i,"")}),!1})),Wo.globalOptions.createFakeDomElement=!1,Wo.globalOptions.inDocument=!1,Wo.globalOptions.documentBackend="none",Wo.updateDefaultComponent(),a.registerBehavior({is:"wx://form-field",properties:{name:{type:String,public:!0},value:{type:null,public:!0}}}),a.registerBehavior({is:"wx://form-field-group"}),a.registerBehavior({is:"wx://form-field-button"}),a.registerBehavior({is:"wx://style-filter"}),a.registerBehavior({is:"wx://request-filter"}),a.registerBehavior({is:"wx://request-sender"}),a.registerBehavior({is:"wx://component-export",definitionFilter:function(e){"function"==typeof e.export&&("object"===r()(e.methods)?e.methods.__export__=e.export:e.methods={__export__:e.export})}}),function(){var e={domain:"//",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1};["not-found","functional-page","open-api-redirecting-page"].forEach((function(t){$i({options:e,properties:{}},"//",c()({},"wx://".concat(t,".json"),{usingComponents:{}}),"wx://".concat(t,".js"))}))}(),__virtualDOM__=t})(),(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var t={};e.r(t),e.d(t,{App:()=>lt,Behavior:()=>Hn,Component:()=>Gn,DisplayReporter:()=>ie,Page:()=>Vn,__createPluginGlobal:()=>Un,convertComponentAliasToRoute:()=>qt,forcePageReload:()=>Dn,getApp:()=>dt,getCurrentPageWithAdditionalInfo:()=>ln,getCurrentPages:()=>hn,getCurrentPagesByDomain:()=>pn,getCurrentRoute:()=>rn,getPageByWebviewId:()=>dn,getPageMetaByWebviewId:()=>fn,hasPageRoute:()=>mn,isFramesetMode:()=>nn,setPrivateExtraData:()=>pt,showShareTimelineMenuIfNeeded:()=>Mn});const n=BabelRuntimeHelpers.objectSpread2;var r=e.n(n);const i=BabelRuntimeHelpers.typeof;var o=e.n(i),a=Object.prototype.toString;function s(e,t){var n=u(e);return null!==n?n:c(e,t)}function c(e,t){if("function"!=typeof t)throw new TypeError("customizer is must be a Function");if("function"==typeof e)return e;var n=a.call(e);if("[object Array]"===n)return[];if("[object Object]"===n&&e.constructor===Object)return{};if("[object Date]"===n)return new Date(e.getTime());if("[object RegExp]"===n){var r=String(e),i=r.lastIndexOf("/");return new RegExp(r.slice(1,i),r.slice(i+1))}var o=t(e);return void 0!==o?o:null}function u(e){var t=o()(e);return null!==e&&"object"!==t&&"function"!==t?e:null}var l=Object.prototype.toString,d="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=o()(e);if(null===e||"function"!==t&&"object"!==t)throw new TypeError("obj must be an Object");var n,r=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(n);return r},f="function"==typeof Symbol?function(e){return Object.getOwnPropertySymbols(e)}:function(){return[]};function p(e,t){if("[object Array]"!==l.call(e))throw new TypeError("array must be an Array");var n,r,i;for(n=0,r=e.length;n<r;++n)if((i=e[n])===t||i!=i&&t!=t)return n;return-1}function h(e){}function g(e,t,n,r,i){if(null===e)return null;var a=u(e);if(null!==a)return a;var c,l,h,v,_,m,y,b,w=d(e).concat(f(e));for(c=0,l=w.length;c<l;++c)m=void 0,y=void 0,b=void 0,-1===(_=p(r,v=e[h=w[c]]))?(y=null!==(m=s(v,t))?m:v,null!==v&&/^(?:function|object)$/.test(o()(v))&&(r.push(v),i.push(y))):b=i[_],n[h]=b||g(v,t,y,r,i);return n}const v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h;if(null===e)return null;var n=u(e);if(null!==n)return n;var r=c(e,t),i=null!==r?r:e,o=[e],a=[i];return g(e,t,i,o,a)},_=BabelRuntimeHelpers.classCallCheck;var m=e.n(_);const y=BabelRuntimeHelpers.createClass;var b=e.n(y);const w=BabelRuntimeHelpers.toConsumableArray;var I=e.n(w);const S=BabelRuntimeHelpers.inherits;var C=e.n(S);const T=BabelRuntimeHelpers.createSuper;var E=e.n(T);const k=BabelRuntimeHelpers.wrapNativeSuper;var x=e.n(k),A=function(e,t){for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e},P=function(){},D=function(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]},O=function(e){return"Promise"===D(e)},N=(Object.prototype.hasOwnProperty,Object.prototype.toString),R=function(e){return"[object Object]"===N.call(e)},M=function(e,t){console.group("".concat(new Date," ").concat(e)),console.error(t),console.groupEnd()},L=function(e,t){console.group("".concat(new Date," ").concat(e)),console.warn(t),console.groupEnd()},B=function(e){__wxConfig&&__wxConfig.debug&&console.info(e)},F=function(e,t){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceEngineKnownError"===e.type)throw e;Reporter.errorReport({key:"jsEnginScriptError",error:e,extend:t})}},j=function(e,t){return function(){try{for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.apply(e,r)}catch(e){return F(e,t),function(){}}}},W=function(e){C()(n,e);var t=E()(n);function n(e){var r;return m()(this,n),(r=t.call(this,"APP-SERVICE-Engine:".concat(e))).type="AppServiceEngineKnownError",r}return n}(x()(Error));function U(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];Reporter.__route__=this.__route__,Reporter.__method__=i,t=t.slice(1);try{var o=Date.now();r=this[i].apply(this,I()(t));var a=Date.now()-o;a>1e3&&Reporter.slowReport({key:"pageInvoke",cost:a,extend:"at ".concat(this.__route__," page ").concat(i," function")})}catch(e){var s=__virtualDOM__.getOwnerPluginAppId(this);Reporter.thirdErrorReport({source:s,error:e,extend:"at ".concat(this.__route__," page ").concat(i," function")})}return Reporter.__route__=Reporter.__method__="",r}var V,G=Object.assign,H=function(){return!!("undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("appservice")>-1)},Z=function(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?"".concat(t,"?").concat(n):t},q=null,z=function(){return q||(q=__appServiceSDK__.getSystemInfoSync()),q},Y={},K=!0,J=null,$={},X={},Q=null,ee=null,te=null,ne="";function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clickTimestamp;t&&((t=(t=parseInt(t,10))<1e12?1e3*t:t)&&t>0&&(J=t),K=e.isLaunch)}var ie=function(){function e(t,n){m()(this,e),this.showOptions={},this.hideOptions={},this.route=t,this.pageType=n||0,this.query={},this.deferred=[],this.showTimeStamp=null,this.pageReadyTime=null,this.showReferpagepath="",this.isentrance=0,this.isInitialLoading=!0,this.orientationChangeCount=0,this.startCostTime=null,this.startType=null}return b()(e,[{key:"checkShowOptions",value:function(){var e=$,t=this.showOptions;t.scene=e.scene||0,t.scene_note=e.scene_note,t.sessionid=e.sessionid||e.sessionId,t.usedstate=e.usedstate,t.referpagepath=e.referpagepath,t.clickTimestamp=e.clickTimestamp,t.prescene=e.prescene,t.prescene_note=e.prescene_note,t.apptype=Reporter.getAppType(),t.publicLibVersion=e.publicLibVersion,t.hostAppId=e.hostAppId||"",t.shortLink=e.shortLink||"";var n=this.query,r=[];n&&"object"===o()(n)&&Object.keys(n).forEach((function(e){r.push("".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n[e])))})),t.query=r.join("&")}},{key:"checkHideOptions",value:function(){var e=X,t=this.hideOptions;t.targetAction=e.targetAction||0,t.targetPagePath=e.targetPagePath||"",void 0!==e.usedstate&&(t.usedstate=e.usedstate),void 0!==e.usedState&&(t.usedstate=e.usedState)}},{key:"_checkDeferred",value:function(){for(var e=this.deferred;e.length;){e.pop()()}}},{key:"_reportShowPage",value:function(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,0,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map((function(e,t){return-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e})).join(",");Reporter.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}},{key:"_reportHidePage",value:function(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,e.orientationChangeCount,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map((function(e,t){return-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e})).join(",");Reporter.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}},{key:"_submit",value:function(){Reporter.submit(),setTimeout((function(){Reporter.submit()}),100)}},{key:"_reportRealtime",value:function(e){if(!H()){var t="",n=2;if(__wxConfig){var r=__wxConfig.accountInfo,i=__wxConfig.envVersion;r&&(t=r.appId||""),"release"===i?n=1:"trial"===i&&(n=3)}if(ne||(ne=wx&&wx.version&&wx.version.version||""),null==V)try{V=z()||{}}catch(e){V={}}var o={DeviceModel:V.model||"",DeviceBrand:V.brand||"",OsName:V.platform||"",OsVersion:V.system||"",LanguageVersion:V.language||"",appid:t,appversion:ne,appstate:n,event_id:e.event_id,scene:e.scene,scene_note:(e.scene_note||"").substr(0,1024),sessionid:e.sessionid,usedstate:e.usedstate,pagepath:e.pagepath,networktype:e.networktype,costtime:e.costtime,staytime:e.staytime,referpagepath:(e.referpagepath||"").substr(0,1024),targetAction:e.targetAction,targetPagePath:(e.targetPagePath||"").substr(0,1024),clickTimestamp:0,publicLibVersion:e.publicLibVersion,prescene:e.prescene,prescene_note:e.prescene_note,isentrance:e.isentrance,query:(e.query||"").substr(0,1024),apptype:e.apptype,pagetype:e.pagetype,anchorTargetText:e.anchorTargetText,clickTime:e.clickTimestamp,anchorTargetRelatedText:e.anchorRelatedText,orientationChangeCount:e.orientationChangeCount,startCostTime:e.startCostTime,startType:e.startType,reportTime:e.reportTime};try{__appServiceSDK__.operateRealtimeData(1e3,JSON.stringify(o),!0)}catch(e){}}}},{key:"setReadyTime",value:function(e){this.pageReadyTime=e,this._checkDeferred()}},{key:"setQuery",value:function(e){this.query=e}},{key:"addOrientationChangeCount",value:function(){this.orientationChangeCount+=1}},{key:"reportShowPage",value:function(){var t=this;this._checkDeferred(),this.checkShowOptions();var n=Date.now(),r=this.route,i=this.pageType,o=this.showOptions,a=o.referpagepath||"",s=o.clickTimestamp,c=0,u=0,l=0;ee&&ee!==r&&(a=ee+".html",s=n);var d=Q;Q=null;var f={anchorTargetText:"",anchorRelatedText:""};this.isInitialLoading&&d&&d.anchorTapTime&&s-d.anchorTapTime<1e3&&(f.anchorTargetText=d.anchorTargetText,f.anchorRelatedText=d.anchorRelatedText),ee=r,this.showTimeStamp=n,this.showReferpagepath=a,this.orientationChangeCount=0,te!==o.sessionid&&(te=o.sessionid,c=1),1===c&&(u=n-J,l=K?1:2,this.startCostTime=u,this.startType=l),this.isInitialLoading=!1,this.isentrance=c,e._getNetworkType((function(e){var n=Object.assign({},o,f,{event_id:1,pagepath:r+".html",networktype:e,staytime:0,referpagepath:a,targetAction:0,targetPagePath:"",isentrance:c,pagetype:i,clickTimestamp:s,startCostTime:u,startType:l});t.pageReadyTime?t._reportShowPage(n):t.deferred.push((function(){t._reportShowPage(n)}))}))}},{key:"reportHidePage",value:function(t,n){var r=this;this._checkDeferred(),this.checkShowOptions(),this.checkHideOptions();var i=Date.now(),o=this.route,a=this.pageType,s=this.showOptions,c=this.hideOptions,u=this.showReferpagepath||"",l=this.showTimeStamp?i-this.showTimeStamp:0,d=void 0!==c.usedstate?c.usedstate:s.usedstate,f=c.targetAction,p=c.targetPagePath,h=0,g=0;t&&(f=n?1:2,p=t+".html"),1===this.isentrance&&(h=null!==this.startCostTime?this.startCostTime:h,g=null!==this.startType?this.startType:g,this.startCostTime=null,this.startType=null),this.showTimeStamp=null,e._getNetworkType((function(e){var t=Object.assign({},s,{event_id:2,pagepath:o+".html",usedstate:d,networktype:e,staytime:l,referpagepath:u,targetAction:f,targetPagePath:p,isentrance:r.isentrance||0,pagetype:a,anchorTargetText:"",anchorRelatedText:"",orientationChangeCount:r.orientationChangeCount||0,startCostTime:h,startType:g});r._reportHidePage(t)}))}}],[{key:"setOnLaunch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};re(t),$=Object.assign($,t),V=z(),$.publicLibVersion=V.SDKVersion,$.hostAppId=__wxConfig.host&&__wxConfig.host.appId||"",e._assignForClientOnShow($,t)}},{key:"setOnAppShow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};re(t),$=Object.assign($,t),e._assignForClientOnShow($,t)}},{key:"setOnAppHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};X=Object.assign(X,e)}},{key:"setEventRelatedInfo",value:function(e){Q=e}},{key:"_assignForClientOnShow",value:function(e,t){e.shortLink=t.shortLink||"",e.scene_note=t.scene_note||t.sceneNote||"",e.referpagepath=t.referpagepath||"",e.usedstate=t.usedstate||t.usedState,e.prescene=t.prescene,e.prescene_note=t.prescene_note||t.presceneNote||"",e.clickTimestamp=Date.now()}},{key:"_getNetworkType",value:function(e){__appServiceSDK__.getNetworkType({success:function(t){var n=t.networkType;"none"===n&&(n="offline"),e(n)},fail:function(){e("")}})}}]),e}(),oe={};__appServiceSDK__.subscribeCheckWebviewAliveOk((function(e,t){1===oe[t]&&(oe[t]=2)}));var ae=function(e){Reporter.reportIDKey({key:"pageOnShow"}),oe[e]=1;var t=0;!function n(){1===oe[e]&&(__appServiceSDK__.publishCheckWebviewAlive({},[e]),++t<3?setTimeout(n,500):setTimeout((function(){1===oe[e]&&Reporter.reportIDKey({key:"clientRestoreWebview_fail"})}),2e3))}()},se=function(e){delete oe[e]},ce={use:{},kbone:0},ue=function(e){try{!function(e){(e.options||{}).addGlobalClass&&(ce.use[1]=1),e.pageLifetimes&&(ce.use[2]=1),e.lifetimes&&(ce.use[3]=1),e.definitionFilter&&(ce.use[4]=1),e.behaviors&&e.behaviors.forEach((function(e){"wx://component-export"===e&&(ce.use[5]=1)}))}(e)}catch(e){}},le=!0;__appServiceSDK__.onAppShow((function(t){if(le){le=!1,ie.setOnLaunch(__appServiceSDK__.getLaunchOptionsSync());try{!function(t){var n=exparser.Component._list,r=t.pages||[],i=t.page||{},o=r.length,a=0,s=0,c=0,u=0,l=9999,d=0;Object.keys(exparser.Component._list).forEach((function(e){e&&"wx://functional-page"!==e&&!i[e+".html"]&&(s++,/(^|\/)miniprogram_npm\//g.test(e)&&c++)})),r.forEach((function(e){if(((i[e+".html"]||{}).window||{}).usingComponents){a++;var t=n[e];if(!t)return;var r=t.behavior,o=r.using||{},s=r.generics||{},c=Object.keys(o).length+Object.keys(s).length;c>u&&(u=c),c<l&&(l=c),d+=c}})),d=a?d/a:0,l=9999===l?0:l;var f=[];try{Object.keys(e.g.__modules__||{}).forEach((function(e){if(e.indexOf("miniprogram-render/")>=0&&(ce.kbone=1),0===e.indexOf("miniprogram_npm/")){var t=e.indexOf("/",16),n=e.substring(16,t);"@"===n[0]&&(t=e.indexOf("/",t+1),n=e.substring(16,t)),f.push(n)}}));for(var p=f.length;p>=0;p--)for(var h=0;h<p;h++)f[h]===f[p]&&f.splice(p,1)}catch(e){}var g=[o,a,s,c,u,l,d,JSON.stringify(ce),f.join(";")].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"CustomComponent",value:g,force:!0})}(__wxConfig),n=exparser.Component._list,r=Object.keys(n),i=["miniprogram-recycle-view","miniprogram-barrage","wxml-to-canvas","weui-miniprogram","miniprogram-navigation-bar"],o=/^miniprogram_npm\/(.+$)/,a={},r.forEach((function(e){var t=n[e].is,r=o.exec(t);if(r){var s=r[1],c=s.indexOf("/"),u=s.substring(0,c),l=s.substring(c+1);"@"===u[0]&&(c=s.indexOf("/",c+1),u=s.substring(0,c),l=s.substring(c+1)),(i.indexOf(u)>-1||/^@miniprogram-component-plus\//.test(u))&&(a[u]=a[u]||[],a[u].push(l))}})),Object.keys(a).forEach((function(e){Reporter.reportKeyValue({key:"NpmExtendedLib",value:[e,a[e].join(";")].map(encodeURIComponent).join(","),force:!0})})),Reporter.submit()}catch(e){}}else ie.setOnAppShow(t);var n,r,i,o,a})),__appServiceSDK__.onAppHide((function(e){ie.setOnAppHide(e)}));var de=function(e){if("String"!==D(e))throw M("数据路径错误","Path must be a string"),new W("Path must be a string");for(var t=e.length,n=[],r="",i=0,o=!1,a=!1,s=0;s<t;s++){var c=e[s];if("\\"===c)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1])?(r+=e[s+1],s++):r+="\\";else if("."===c)r&&(n.push(r),r="");else if("["===c){if(r&&(n.push(r),r=""),0===n.length)throw M("数据路径错误","Path can not start with []: "+e),new W("Path can not start with []: "+e);a=!0,o=!1}else if("]"===c){if(!o)throw M("数据路径错误","Must have number in []: "+e),new W("Must have number in []: "+e);a=!1,n.push(i),i=0}else if(a){if(c<"0"||c>"9")throw M("数据路径错误","Only number 0-9 could inside []: "+e),new W("Only number 0-9 could inside []: "+e);o=!0,i=10*i+c.charCodeAt(0)-48}else r+=c}if(r&&n.push(r),0===n.length)throw M("数据路径错误","Path can not be empty"),new W("Path can not be empty");return n},fe=function(e,t){for(var n,r={},i=e,o=0;o<t.length;o++)Number(t[o])===t[o]&&t[o]%1==0?Array.isArray(i)||(r[n]=[],i=r[n]):R(i)||(r[n]={},i=r[n]),n=t[o],r=i,i=i[t[o]];return{obj:r,key:n}},pe=function(e,t){for(var n,r,i=de(t),o=e,a=0;a<i.length;a++)Number(i[a])===i[a]&&i[a]%1==0?Array.isArray(o)||(o=[]):R(o)||(o={}),r=i[a],n=o,o=o[i[a]];return{obj:n,key:r}},he=["onLoad","onReady","onShow","onRouteEnd","onHide","onUnload","onResize"],ge=["__wxWebviewId__","__route__"],ve=["route"],_e=__appServiceSDK__.getLogManager();const me=function(){function e(t,n){var r=this;m()(this,e);var i={__wxWebviewId__:t,__route__:n};ge.forEach((function(e){Object.defineProperty(r,e,{set:function(){L("关键字保护","should not change the protected attribute ".concat(e))},get:function(){return i[e]}})}));var o=__virtualDOM__.addView(t,n),a=exparser.Element.getMethodCaller(o),s=__virtualDOM__.getOwnerPluginAppId(a);this.__wxExparserNode__=o,this.__wxComponentInst__=a,exparser.Element.setMethodCaller(o,this);var c=Fn(),u={};hasOwnProperty.call(c,n)?u=c[n]:console.info('Page "'.concat(n,'" has not been registered yet.')),u.data=u.data||{},R(u.data)||M("Page data error","Page.data must be an object");var l=JSON.stringify(u.data);this.data=JSON.parse(l),this.__viewData__=JSON.parse(l),this.__displayReporter=new ie(n,1);var d=__appServiceSDK__.getSystemInfoSync().deviceOrientation;this.__callPageLifeTime__=function(e){var n,r=(this[e]||P).bind(this);Reporter.__route__=this.__route__,Reporter.__method__=e;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];"onLoad"===e&&(n=this.__displayReporter).setQuery.apply(n,o);if("onShow"===e)this.__displayReporter.reportShowPage(),ae(t);else if("onReady"===e)this.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){var s=this.__toRoute__,c=this.__isBack__,u=this.__notReportHide__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,u||this.__displayReporter.reportHidePage(s,c),se(t)}else if("onResize"===e){var l=o[0]||{};d!==l.deviceOrientation&&(d=l.deviceOrientation,this.__displayReporter.addOrientationChangeCount())}B("".concat(this.__route__,": ").concat(e," have been invoked")),__appServiceSDK__.traceBeginEvent("LifeCycle","Page.".concat(e));var f=r.apply(this,o);return __appServiceSDK__.traceEndEvent(),Reporter.__route__=Reporter.__method__="",f},he.forEach((function(e){r[e]=function(){var t,n=(u[e]||P).bind(this);try{for(var r=Date.now(),i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];t=n.apply(this,o);var c=Date.now()-r;c>1e3&&Reporter.slowReport({key:"pageInvoke",cost:c,extend:"at ".concat(this.__route__," page lifeCycleMethod ").concat(e," function")}),_e&&_e.logApiInvoke&&_e.log("page ".concat(this.__route__," ").concat(e," have been invoked")),__appServiceSDK__.nativeConsole.info("page ".concat(this.__route__," ").concat(e," have been invoked"))}catch(t){Reporter.thirdErrorReport({source:s,error:t,extend:"at ".concat(this.__route__," page lifeCycleMethod ").concat(e," function")})}return t}.bind(r)}));var f=function(e){!function(e){return-1!==ge.indexOf(e)}(e)?function(e){for(var t=0;t<he.length;++t)if(he[t]===e)return!0;return"data"===e}(e)||("Function"===D(u[e])?r[e]=function(){var t;Reporter.__route__=this.__route__,Reporter.__method__=e,__appServiceSDK__.traceBeginEvent("User Script","Page.".concat(e));try{for(var n=Date.now(),r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t=u[e].apply(this,i);var a=Date.now()-n;a>1e3&&Reporter.slowReport({key:"pageInvoke",cost:a,extend:"at ".concat(this.__route__," page ").concat(e," function")})}catch(t){Reporter.thirdErrorReport({source:s,error:t,extend:"at ".concat(this.__route__," page ").concat(e," function")})}return __appServiceSDK__.traceEndEvent(),Reporter.__route__=Reporter.__method__="",t}.bind(r):r[e]=v(u[e])):L("关键字保护","Page's ".concat(e," is write-protected"))};for(var p in u)f(p);var h={route:n};ve.forEach((function(e){Object.prototype.hasOwnProperty.call(r,e)||(r[e]=h[e])}));var g="function"==typeof u.onShareAppMessage;g&&__appServiceSDK__.showShareMenu();var _="function"==typeof u.onShareTimeline;g&&_&&__appServiceSDK__.showShareTimelineMenu()}return b()(e,[{key:"setData",value:function(e,t){var n=this;try{var r=D(e);if("Object"!==r)return void M("类型错误","setData accepts an Object rather than some ".concat(r));Object.keys(e).forEach((function(t){void 0===e[t]&&M("Page setData warning",'Setting data field "'+t+'" to undefined is invalid.');var r=de(t),i=fe(n.data,r),o=i.obj,a=i.key;if(o&&(o[a]=v(e[t])),void 0!==e[t]){var s=fe(n.__viewData__,r),c=s.obj,u=s.key;c&&(c[u]=v(e[t]))}})),__appServiceSDK__.traceBeginEvent("Framework","DataEmitter::emit"),this.__wxComponentInst__.setData(JSON.parse(JSON.stringify(e)),t),__appServiceSDK__.traceEndEvent()}catch(e){F(e)}}},{key:"pageScrollTo",value:function(e){__appServiceSDK__.publishPageScrollTo(e,[this.__wxWebviewId__])}}],[{key:"create",value:function(t,n){var r=new e(t,n),i=r.__wxExparserNode__;return delete r.__wxExparserNode__,{page:r,node:i}}},{key:"destroy",value:function(e){__virtualDOM__.removeView(e.__wxWebviewId__)}}]),e}();var ye=["onLoad","onReady","onShow","onRouteEnd","onHide","onUnload","onResize"],be=__appServiceSDK__.getLogManager();const we=function(){function e(){m()(this,e)}return b()(e,null,[{key:"create",value:function(e,t){var n=__virtualDOM__.addView(e,t),r=exparser.Element.getMethodCaller(n),i=__virtualDOM__.getOwnerPluginAppId(r);if(r.__wxWebviewId__=e,r.__route__=t,r.route=t,r.__displayReporter=new ie(t,2),n.__customConstructor__===__virtualDOM__.Page){var o=n.getRootBehavior().methods,a=r.__freeData__;for(var s in o)r[s]=o[s].bind(r);for(var c in a)r[c]=v(a[c])}var u=__appServiceSDK__.getSystemInfoSync().deviceOrientation;r.__callPageLifeTime__=function(t){var i,o=this[t]||P;Reporter.__route__=this.__route__,Reporter.__method__=t;for(var a=arguments.length,s=new Array(a>1?a-1:0),c=1;c<a;c++)s[c-1]=arguments[c];"onLoad"===t&&(i=r.__displayReporter).setQuery.apply(i,s);if("onShow"===t)r.__displayReporter.reportShowPage(),ae(e);else if("onReady"===t)r.__displayReporter.setReadyTime(Date.now());else if("onHide"===t||"onUnload"===t){var l=this.__toRoute__,d=this.__isBack__,f=this.__notReportHide__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,f||r.__displayReporter.reportHidePage(l,d),se(e)}else if("onResize"===t){var p=s[0]||{};u!==p.deviceOrientation&&(u=p.deviceOrientation,r.__displayReporter.addOrientationChangeCount())}"onShow"===t?n.triggerPageLifeTime("show",s):"onHide"===t?n.triggerPageLifeTime("hide",s):"onResize"===t&&n.triggerPageLifeTime("resize",s),B("".concat(this.__route__,": ").concat(t," have been invoked")),__appServiceSDK__.traceBeginEvent("LifeCycle","Page.".concat(t));var h=o.apply(this,s);return __appServiceSDK__.traceEndEvent(),Reporter.__route__=Reporter.__method__="",h},ye.forEach((function(e){var t=r[e];r[e]=function(){var n,r=t||P;try{for(var o=Date.now(),a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];n=r.apply(this,s);var u=Date.now()-o;u>1e3&&Reporter.slowReport({key:"pageInvoke",cost:u,extend:'at "'.concat(this.__route__,'" page lifeCycleMethod ').concat(e," function")}),be&&be.logApiInvoke&&be.log("page ".concat(this.__route__," ").concat(e," have been invoked")),__appServiceSDK__.nativeConsole.info("component page ".concat(this.__route__," ").concat(e," have been invoked"))}catch(t){Reporter.thirdErrorReport({source:i,error:t,extend:'at "'.concat(this.__route__,'" page lifeCycleMethod ').concat(e," function")})}return n}.bind(r)}));var l="function"==typeof r.onShareAppMessage;l&&__appServiceSDK__.showShareMenu();var d="function"==typeof r.onShareTimeline;return l&&d&&__appServiceSDK__.showShareTimelineMenu(),{page:r,node:n}}},{key:"destroy",value:function(e){__virtualDOM__.removeView(e.__wxWebviewId__)}}]),e}();var Ie=null,Se=Object.create(null),Ce=function(e,t,n){Ie&&Ie.triggerLifeTime("route",[{method:e,url:t,args:n}])},Te=function(e,t,n,r,i,o){if("appLaunch"===o)s=function(){Ce("appLaunch",t,{tabBarConfig:__wxConfig.tabBar,entryPagePath:__wxConfig.entryPagePath})},__sclEngine__.initScl((function(e){(Ie=e.mainRoot.append("frameset",{placeholderImage:"frameset/placeholder.png"})).setPageLifeTimeCallback((function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=Se[e],a=dn(o);a&&__errorTracer__.surroundThirdByTryCatch((function(){a.__callPageLifeTime__.apply(a,["on"+t].concat(r))}),"at ".concat(t," callback function"))()})),s()}));else if("navigateTo"===o)Ce("navigateTo",t);else if("redirectTo"===o)Ce("redirectTo",t);else if("switchTab"===o)Ce("switchTab",t);else if("reLaunch"===o||"autoReLaunch"===o)Ce("reLaunch",t);else if("navigateBack"===o){var a=__sclEngine__.getExparserElementByViewId(i);a&&a.triggerEvent("navigateBack")}else"frameLoad"===o?(Se[i]=n,Cn(e,t,n,r,{framesetViewId:i})):"frameUnload"===o&&(delete Se[i],En(fn(n),""));var s},Ee=function(){Ie&&Ie.setGlobalShowStatus(!0)},ke=function(){Ie&&Ie.setGlobalShowStatus(!1)},xe=0,Ae=1,Pe=2,De=3,Oe=4,Ne=5,Re=6,Me=7,Le=8,Be=9,Fe=10,je=11,We=12,Ue=[],Ve=!0;function Ge(e,t){Ue[e]=t||Date.now()}function He(e,t){void 0===Ue[e]&&Ge(e,t)}var Ze=!1;function qe(e){var t=__appServiceSDK__.isIsolatedSubpackage(e);!Ze&&t?Qe():Ze&&!t&&Xe(),Ze=t}function ze(){return!!Ze}function Ye(e){return Ze=__appServiceSDK__.isIsolatedSubpackage(e)}var Ke=[],Je=!0,$e={};function Xe(e){e=e||$e,__appServiceSDK__.emitIsloatedAppShow(e),Ke.forEach((function(t){t.preventOnShow||t.app.onShow(e),t.preventOnShow=!1})),$e=e}function Qe(e){__appServiceSDK__.emitIsloatedAppHide(),Ke.forEach((function(t){7===__wxConfig.appType?t.app.onHide(e):t.app.onHide()}))}function et(e){var t=__appServiceSDK__.getLaunchOptionsSync();He(Pe),e.onLaunch(t.__public),e.onShow(t.__public),Ke.push({app:e,preventOnShow:!0})}__appServiceSDK__.onAppUnhang((function(){!1})),__appServiceSDK__.onAppShow((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isLaunch&&Ot("launch"),on(e.path),Ye(e.path)||Xe(e.__public||e),Ot("foreground"),Je||e.reLaunch)Je=!1;else{var t=pn("");t.length&&(nn()?Ee():"function"==typeof t[t.length-1].__callPageLifeTime__&&t[t.length-1].__callPageLifeTime__("onShow"),Ot("enterPage",t[t.length-1],!0))}})),__appServiceSDK__.onAppHide((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"hang"===e.mode&&!0;var t=pn("");if(t.length){nn()?ke():"function"==typeof t[t.length-1].__callPageLifeTime__&&t[t.length-1].__callPageLifeTime__("onHide");var n=un(),r=n.page;Ot("leavePage",r,!0);var i="function"==typeof r.onSaveExitState?U.call(r,"onSaveExitState"):void 0;__appServiceSDK__.saveExitState(n.route,n.rawPath,i)}ze()||Qe(e),Ot("background")}));var tt,nt,rt,it=["onLaunch","onShow","onHide","onUnlaunch"],ot=function(e){for(var t=0;t<it.length;++t)if(it[t]===e)return!0;return!1},at=function(e){return"getCurrentPage"===e},st=__appServiceSDK__.getLogManager(),ct=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m()(this,e),it.forEach((function(e){t[e]=function(){var t=n[e]||P;Reporter.__route__="App",Reporter.__method__=e,B("App: ".concat(e," have been invoked")),__appServiceSDK__.traceBeginEvent("LifeCycle","App.".concat(e));try{for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.apply(this,i),st&&st.logApiInvoke&&st.log("App ".concat(e," have been invoked")),__appServiceSDK__.nativeConsole.info("App ".concat(e," have been invoked"))}catch(t){Reporter.thirdErrorReport({error:t,extend:"at App lifeCycleMethod ".concat(e," function")})}__appServiceSDK__.traceEndEvent(),Reporter.__route__=Reporter.__method__=""}.bind(t)}));var r=function(e){at(e)?L("关键字保护","App's ".concat(e," is write-protected")):ot(e)||("function"==typeof n[e]?t[e]=function(){var t;Reporter.__route__="App",Reporter.__method__=e,__appServiceSDK__.traceBeginEvent("User Script","App.".concat(e));try{for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t=n[e].apply(this,i)}catch(t){Reporter.thirdErrorReport({error:t,extend:"at App ".concat(e," function")})}return __appServiceSDK__.traceEndEvent(),t}.bind(t):t[e]=n[e])};for(var i in n)r(i);"function"==typeof this.onError&&__appServiceSDK__.onError(this.onError),"function"==typeof this.onUnhandledRejection&&__appServiceSDK__.onUnhandledRejection(this.onUnhandledRejection),"function"==typeof this.onPageNotFound&&__appServiceSDK__.onPageNotFound(this.onPageNotFound),"function"==typeof this.onThemeChange&&__appServiceSDK__.onThemeChange(this.onThemeChange),et(this)},ut={},lt=j((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(e,ut),ut={},tt=new ct(e)}),"create app instance"),dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.allowDefault?tt||ut:tt},ft=function(){return nt},pt=function(e){nt=e},ht=function(){return rt};__appServiceSDK__.onAppShow((function(e){var t=e.referrerInfo&&e.referrerInfo.privateExtraData;if(t){pt(t);var n=gn();t.functionalPage&&n&&__appServiceSDK__.publishFunctionalPage(t.functionalPage,[n])}e.referrerInfo&&e.referrerInfo.openapiInvokeData&&(rt=e.referrerInfo.openapiInvokeData)}));var gt={},vt={},_t=[],mt=!1,yt=[],bt=!1,wt=!1,It=0,St=0,Ct=0,Tt=0,Et=0,kt=0,xt=null,At=null,Pt=function(e,t){Object.keys(e.data||{}).forEach((function(n){var r,i,o=e.data[n],a=t&&t.data||{},s=!1;if("$"!==o.charAt(0)||void 0===(r=function(e){var t=0;switch(e){case"PAGE_TIME":return(t=Ct?Date.now()-Ct-Tt:0)>=0?t:null;case"APP_TIME":return(t=It?Date.now()-It-St:0)>=0?t:null;case"CURRENT_PAGE":return At||null;case"LAST_PAGE":return xt||null;default:return}}(o.substr(1))))if(0!==o.indexOf("$APP")){if(t&&(e.page===t.__route__||"ANY_PAGE"===e.page)){if(0===o.indexOf("$DATASET")){var c=o.replace("$DATASET.","");i=e.dataset||{},(r=fe(i,de(c))).obj&&void 0!==r.obj[r.key]&&(vt[e.eventID].data[n]=r.obj[r.key],s=!0)}if(0===o.indexOf("$COMP")&&"number"==typeof e.nodeId){var u=__virtualDOM__.getNodeById(e.nodeId,e.webviewId);if(!u)return void console.warn('[自定义分析] 找不到自定义组件里的 "'.concat(e.element,'" 节点'));var l=exparser.Element.getMethodCaller(u);l&&(o=o.replace("$COMP.",""),a=l.data)}if(o.indexOf("[]")>-1){if((e.index||[]).forEach((function(e){o=o.replace("[]","["+e+"]")})),o.indexOf("[-1]")>-1||o.indexOf("[]")>-1)return void console.warn("[自定义分析] 取不到下标，请检查配置（".concat(o,"）"));var d=o.match(/\[(\d+)\]\.\$INDEX$/);d&&(vt[e.eventID].data[n]=Number(d[1]),s=!0)}if(void 0===(r=pe(a,o)).obj||void 0===r.key||void 0===r.obj[r.key])return void(s||console.warn("[自定义分析] 取不到该字段，请检查配置（".concat(o,"）")));vt[e.eventID].data[n]=r.obj[r.key]}}else!function(e,t){var n=e.data[t],r=dt()||{},i=n.replace("$APP.",""),o=pe(r,i);if(o.obj&&void 0!==o.obj[o.key]){var a=o.obj[o.key];"number"!=typeof a&&"string"!=typeof a&&"boolean"!=typeof a||(vt[e.eventID].data[t]=a)}}(e,n);else null!==r&&(vt[e.eventID].data[n]=r)}))},Dt=function(e,t){if("start"!==e.action&&"start_and_report"!==e.action||(vt[e.eventID]={eventID:e.eventID,data:{},extra:e.extra}),vt[e.eventID]){var n,r,i,o=t||un()&&un().page;Pt(e,o),"report"!==e.action&&"start_and_report"!==e.action||(n=e.eventID,r=o&&o.__route__,i=[],Object.keys(vt[n].data).forEach((function(e){i.push({id:e,value:vt[n].data[e]})})),vt[n].data=i,vt[n].page=r,vt[n].version=("undefined"!=typeof __libVersionInfo__?__libVersionInfo__.version:0)||0,vt[n].uid=Date.now().toString(16)+Math.random().toString(16).substr(2),vt[n].type=0,H()||(console.info("[自定义分析] 上报成功"),console.info(vt[n])),__appServiceSDK__.reportRealtimeAction({actionData:JSON.stringify(vt[n])}),vt[n]=null)}},Ot=function(e,t,n){if("pageReady"===e&&t)!function(e){if(e){var t=e.__route__,n=gt.click,r=[];n&&(n.forEach((function(e){e.page!==t&&"ANY_PAGE"!==e.page||!e.element||r.push({eventID:e.eventID,page:e.page,element:e.element,action:e.action})})),0!==r.length&&__appServiceSDK__.publishAnalyticsConfig(r,[e.__wxWebviewId__]))}}(t);else if(wt)_t.push(e);else{if("launch"===e&&!bt)return It=Date.now(),bt=!0,wt=!0,_t.push(e),void __appServiceSDK__.getAppConfig({type:1,complete:j((function(e){wt=!1,e.data&&(console.info("[自定义分析] 配置拉取成功"),Nt(e))}))});if(mt){n||("enterPage"===e?(Ct=Date.now(),Tt=0,At=t&&t.__route__):"leavePage"===e?xt=t&&t.__route__:"background"===e?Et=Date.now():"foreground"===e&&(kt=Date.now(),Et&&kt>Et&&(Tt+=kt-Et,St+=kt-Et)));var r=gt[e];if(r){if("enterPage"===e&&t&&"page/component/index"===t.__route__&&__wxConfig.accountInfo&&"wxe5f52902cf4de896"===__wxConfig.accountInfo.appId){var i=0;r.map((function(e){return e.eventID})).forEach((function(e){1007===e&&i++})),i>1&&Reporter.reportIDKey({key:"demoConfigRepeat"}),Reporter.reportIDKey({key:"demoEnterHomePage"})}var o=["enterPage","leavePage","pageLoad","pageUnload","pullDownRefresh","switchTab"];r.forEach((function(n){n&&(o.indexOf(e)>-1?(t&&n.page===(t&&t.__route__)||"ANY_PAGE"===n.page)&&Dt(n,t):Dt(n))}))}}else yt.push([e,t,n])}},Nt=function(e,t){var n={};try{n=JSON.parse(e.data)}catch(e){n={}}var r=un();gt=function(e){var t={};return"[object Array]"!==Object.prototype.toString.call(e)||e.forEach((function(e){var n=e.eventTarget;"[object Object]"===Object.prototype.toString.call(n)&&(n=[n]),n.forEach((function(n){var r=n.trigger||"click";t[r]||(t[r]=[]),("click"!==r||/^([.#][a-zA-Z_][^.#]* ?)+$/.test(n.element&&n.element.trim()))&&t[r].push({eventID:e.eventID,page:n.page,element:n.element&&n.element.trim(),data:n.data,action:n.action,extra:e.extra})}))})),t}(n),vt={},t||(_t.forEach((function(e){Ot(e,r&&r.page,!0)})),_t=[]),Ot("pageReady",r&&r.page)};__appServiceSDK__.subscribeAnalyticsReport((function(e,t){var n,r,i=e,o=gt.click;if(o&&("start"===i.action||"start_and_report"===i.action||vt[i.eventID])){for(var a=pn(""),s=0;s<a.length;s++){var c=a[s];if(c.__wxWebviewId__===t){r=c;break}}if(r){for(var u=0;u<o.length;u++){var l=o[u];if(i.eventID===l.eventID&&(i.page===l.page||"ANY_PAGE"===l.page)&&i.element===l.element){l.dataset=i.dataset||{},n=A({},l);break}}n&&(n.index=i.index,n.nodeId=i.nodeId,n.webviewId=t,Dt(n,r))}}})),__appServiceSDK__.onAppConfig(j((function(e){console.info("[自定义分析] 收到最新配置"),1===Number(e.type)&&Nt(e,!0)}))),__appServiceSDK__.onAppRouteDone((function(){mt=!0,yt.forEach((function(e){Ot.apply(void 0,I()(e))})),yt=[]}));const Rt=function(){function e(){m()(this,e)}return b()(e,null,[{key:"emit",value:function(e,t,n){__appServiceSDK__.invokeWebviewMethod("appDataChange",e,[t],n)}}]),e}();var Mt=Object.prototype.hasOwnProperty,Lt=262144,Bt=Date.now(),Ft=__appServiceSDK__.ShareInfoStorage,jt=__appServiceSDK__._getRealRoute,Wt=__appServiceSDK__._triggerBeforeUnloadPage,Ut=__appServiceSDK__._triggerBeforeShareAppMessage,Vt=__appServiceSDK__.userShareMenuState;delete __appServiceSDK__.ShareInfoStorage;var Gt,Ht,Zt,qt=__virtualDOM__.convertComponentAliasToRoute,zt=__virtualDOM__.convertRouteToComponentAlias,Yt={},Kt={},Jt={},$t=[],Xt=[],Qt="",en=null,tn=!1,nn=function(){return tn},rn=function(){return Qt},on=function(e){Qt=e},an=function(e,t,n){var r;return n._userTap?__virtualDOM__.wrapTapMark((function(){r=U.call(e,t,n)})):r=U.call(e,t,n),r};__wxConfig.onReady((function(){var e=__wxConfig.page||{},t=__wxConfig.global?__wxConfig.global.window:{};Object.keys(e).forEach((function(n){e[n].window=Object.assign({},t,e[n].window)})),__wxConfig.tabBar&&__wxConfig.tabBar.list&&"object"===o()(__wxConfig.tabBar.list)&&"function"==typeof __wxConfig.tabBar.list.forEach&&__wxConfig.tabBar.list.forEach((function(e){Xt.push(e.pagePath)})),__wxConfig.appLaunchInfo&&"string"==typeof __wxConfig.appLaunchInfo.path&&on(__wxConfig.appLaunchInfo.path),Ht=(__wxConfig.appLaunchInfo||{}).scene||0}));var sn={appLaunchTime:0,appFgTime:0,appRouteTime:0,newPageTime:0,pageReadyTime:0},cn=function(e,t,n){Reporter.speedReport({key:e,timeMark:{startTime:t,endTime:n}})},un=function(){return Gt},ln=function(){return Gt},dn=function(e){return Mt.call(Yt,e)?Yt[e].page:null},fn=function(e){return Mt.call(Yt,e)?Yt[e]:null},pn=function(e){var t=[];return $t.forEach((function(n){e&&function(e){if(/^__wx__\//.test(e=e||""))return"//";var t=e.match(/(?:^|\/)__plugin__\/(.*?)\//);return t?t[1]:"/"}(n.route)!==e?t.push(null):t.push(n.page)})),t},hn=function(){return pn("/")},gn=function(){if(0!==$t.length)return $t[$t.length-1].webviewId},vn=function(e,t){return e.__wxExparserNodeId__&&Mt.call(Object.getPrototypeOf(e),t)||Mt.call(e,t)},_n=function(e){return!!/(?:^|\/)__(wx|plugin)__\//.test(e)||!!("undefined"!=typeof __wxAppCode__&&__wxAppCode__[e+".json"]||{}).usingComponents},mn=function(e){return!!function(e){for(var t=0;t<__wxConfig.pages.length;t++)if(__wxConfig.pages[t]===e)return!0;return!1}(e)||void 0!==Jt[e]},yn=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};__appServiceSDK__.traceBeginEvent("User Script","Component constructor");var o=!1;(i.__wxRouteBegin||__wxRouteBegin)&&(o=!0),i.__wxRouteBegin?i.__wxRouteBegin=!1:__wxRouteBegin=!1;var a=__virtualDOM__.Component(e,t,n,r),s=qt(a);return a&&(Kt[s]=exparser.Component._list[a]),Jt[s]=o,__appServiceSDK__.traceEndEvent(),String(a)},bn=function(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};__appServiceSDK__.traceBeginEvent("User Script","Page constructor");var a=o.__wxRoute||e.g.__wxRoute||i.replace(/\.js$/,"")||"";if(!o.__wxRouteBegin&&!__wxRouteBegin){if(!a)throw M("Page 注册错误",'Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json'),__appServiceSDK__.traceEndEvent(),new W('Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json');throw M("Page 注册错误","Please do not register multiple Pages in ".concat(a,".js")),__appServiceSDK__.traceEndEvent(),new W("Please do not register multiple Pages in ".concat(a,".js"))}o.__wxRouteBegin?o.__wxRouteBegin=!1:__wxRouteBegin=!1;var s=zt(a),c=qt(s),u=_n(c);if("Object"!==D(t))throw M("Page 注册错误","Options is not object: ".concat(JSON.stringify(t)," in ").concat(a,".js")),__appServiceSDK__.traceEndEvent(),new W("Options is not object: ".concat(JSON.stringify(t)," in ").concat(a,".js"));B("Register: ".concat(s));var l=__virtualDOM__.Page(t,n,r,u&&i?i:__wxRoute+".js");Kt[c]=u?exparser.Component._list[l]:t,Jt[c]=!0,__appServiceSDK__.traceEndEvent()},wn={isInit:!1};__appServiceSDK__.subscribeSubjectInfo((function(e){wn.isInit=e.isInit}));var In=j((function(e,t,n,r,i,o){__appServiceSDK__.traceBeginEvent("Framework","publishInitData"),Ge(je,n),B("Update view with init data");var a=e.page,s={};s.wechatLibVersion=("undefined"!=typeof __libVersionInfo__?__libVersionInfo__.version:"")||"",s.webviewId=t,s.enablePullUpRefresh=vn(a,"onReachBottom"),s.enablePageScroll=vn(a,"onPageScroll"),s.onReachBottomDistance=function(e){try{if("number"==typeof __wxConfig.page["".concat(e,".html")].window.onReachBottomDistance)return __wxConfig.page["".concat(e,".html")].window.onReachBottomDistance}catch(e){return 50}return 50}(a.__route__),s.statesData=r,s.scene=Ht,s.route=a.__route__,s.query=a.options,s.lastRoute=e.lastRoute,s.lastQuery=e.lastQuery,s.wxConfig={accountInfo:__wxConfig&&__wxConfig.accountInfo||{},appContactInfo:__wxConfig&&__wxConfig.appContactInfo||{},appLaunchInfo:__wxConfig&&__wxConfig.appLaunchInfo||{},plugins:__wxConfig&&__wxConfig.plugins||{}},s.windowConfig=__wxConfig&&__wxConfig.page&&__wxConfig.page[a.__route__+".html"]&&__wxConfig.page[a.__route__+".html"].window||{},s.debug=__wxConfig&&__wxConfig.debug,s.appId=__wxConfig&&__wxConfig.accountInfo&&__wxConfig.accountInfo.appId,s.appLaunchTime=sn.appLaunchTime,s.appFgTime=sn.appFgTime,s.isTabBarPage=e.isTabBarPage,s.isMainTabBarPage=e.isMainTabBarPage,s.navigationStyle=__wxConfig&&__wxConfig.global&&__wxConfig.global.window&&__wxConfig.global.window.navigationStyle,s.packageType=function(e){if(__wxConfig&&__wxConfig.subPackages&&__wxConfig.subPackages.length){for(var t=0;t<__wxConfig.subPackages.length;t++){var n=__wxConfig.subPackages[t];if(0===e.indexOf(n.root))return n.independent?"independent":"normal"}return"main"}return"none"}(a.__route__),s.needGetSubjectInfo=!wn.isInit,s.subPackages=__wxConfig.subPackages,s.perfData=(Ue[Ne]=Date.now(),Ue[xe]=Ve?1:0,Ue[Me]=__wxConfig.isSubContext?1:0,Ue[Ae]=__wxConfig.onReadyStart,Ue[Re]=__wxConfig.onReadyEnd||0,Ve=!1,Ue),s.isReload=i,s.adInfo={preloadVideoAdUnitIds:__appServiceSDK__.getPreloadVideoAdUnitIds(),preloadAdUnitIds:__appServiceSDK__.getPreloadAdUnitIds()},s.permissionBytes=__appServiceSDK__.getCachePermissionBytes(),s.fontFaceRecords=__appServiceSDK__.fontFaceRecords,s.fontSizeSetting=z().fontSizeSetting,s.prerender=o,s.extendedLibList=__wxConfig.extendedLibList;var c={ext:s,options:{firstRender:!0,timestamp:n,path:a.__route__}};if(r){var u=JSON.stringify(c),l=u.length;if(l>Lt){for(var d=[],f=0;l>f;)d.push(u.substr(f,Lt)),f+=Lt;for(var p=++Bt,h=0,g=d.length;h<g;h++)Rt.emit({isSplitData:!0,splitInfo:{id:p,index:h+1,total:g,data:d[h]}},t);return Ot("pageReady",a),void __appServiceSDK__.traceEndEvent()}}Rt.emit(c,t),Ot("pageReady",a),__appServiceSDK__.traceEndEvent()})),Sn=function(e){return-1!==Xt.indexOf(e.route)||-1!==Xt.indexOf(e.route+".html")},Cn=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};__appServiceSDK__.traceBeginEvent("Framework","openNewPage"),Ge(Oe);var o=Zt;Zt=void 0;var a=_n(e);sn.newPageTime=Date.now(),on(e);var s=a?we.create(n,e):me.create(n,e),c=s.page,u=v(r);(Gt={page:c,webviewId:n,route:e,rawPath:t,lastRoute:Gt?Gt.route:"",lastQuery:Gt?Gt.page.options:{},node:s.node}).isTabBarPage=Sn(Gt),Gt.isMainTabBarPage=i.isMainTabBarPage||!1,$t.push(Gt),c.__exitState__=o;var l={};if(Object.keys(u).forEach((function(e){var t=u[e];try{l[e]=decodeURIComponent(t)}catch(n){l[e]=t}})),__virtualDOM__.attachView(n,l),/^__wx__\//.test(e)){var d={};if(/^__wx__\/open-api-redirecting-page/.test(e))d=ht()||{};else if(/^__wx__\/functional-page/.test(e)){var f=ft();f&&f.functionalPage&&(d=Object.assign({},f.functionalPage,{accountInfo:__wxConfig.accountInfo}))}c.setData(d)}c.options=u,In(Gt,n,sn.newPageTime,void 0,!1,i.prerender||!1),H()&&(__wxAppData[e]=c.data,__wxAppData[e].__webviewId__=n,__appServiceSDK__.publishUpdateAppData()),i.initialRenderingCacheData&&c.setData(i.initialRenderingCacheData);var p=__appServiceSDK__._getOpenerEventChannel();p&&(c.__eventChannel=p),c.__callPageLifeTime__("onLoad",r),c.__callPageLifeTime__("onShow"),Yt[n]={page:c,route:e,rawPath:t,webviewId:n,statesData:null,framesetViewId:i.framesetViewId,node:a?s.node:void 0},Ot("pageLoad",c),Ot("enterPage",c),cn("appRoute2newPage",sn.appRouteTime,sn.newPageTime),__appServiceSDK__.traceEndEvent()},Tn=function(e,t){__appServiceSDK__.traceBeginEvent("Framework","hidePage"),e.page.__toRoute__=t,nn()||e.page.__callPageLifeTime__("onHide"),Ot("leavePage",e.page),__appServiceSDK__.traceEndEvent(),__appServiceSDK__.uploadUserLogOnHide(e.route)},En=function(e,t,n,r){__appServiceSDK__.traceBeginEvent("Framework","unloadPage"),Wt(e.webviewId),e.page.__toRoute__=t,e.page.__isBack__=n,e.page.__notReportHide__=r,e.page.__callPageLifeTime__("onUnload"),e.node&&we.destroy(e.page),H()&&(delete __wxAppData[e.route],__appServiceSDK__.publishUpdateAppData()),delete Yt[e.webviewId];for(var i=$t.length-1;i>=0&&$t[i].webviewId!==e.webviewId;i--);i>=0&&$t.splice(i,1),$t.length?on($t[$t.length-1].route):on(""),Ot("pageUnload",e.page),Ot("leavePage",e.page),__appServiceSDK__.traceEndEvent(),__appServiceSDK__.uploadUserLogOnHide(e.route)},kn=function(e){__appServiceSDK__.traceBeginEvent("Framework","minimizePage"),Tn(e),($t=$t.slice(0,$t.length-1)).length?on($t[$t.length-1].route):on(""),__appServiceSDK__.traceEndEvent()},xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];__appServiceSDK__.traceBeginEvent("Framework","onNavigateBack");for(var n=!1,r=Yt[e]&&Yt[e].route,i=$t.length-1;i>0;i--){var o=$t[i];if(o.webviewId===e){n=!0,Gt=o;break}var a=!t&&en&&en.webviewId===o.webviewId;a?$t=$t.slice(0,$t.length-1):t&&en&&en.webviewId===o.webviewId?kn(o):En(o,r,!0)}if(1===$t.length&&!n){var s=$t[0];if(s.webviewId===e)n=!0,Gt=s;else if(Sn(s)&&Mt.call(Yt,e)){n=!0;var c=Yt[e],u=c.page,l=c.node;Gt={webviewId:e,route:r,page:u,node:l}}}if(qe(r),n){nn()||Gt.page.__callPageLifeTime__("onShow"),Ot("enterPage",Gt.page);var d=ft();pt({}),d&&d.functionalPage&&e&&__appServiceSDK__.publishFunctionalPage(d.functionalPage,[e])}else M("Page route 错误(system error)","navigateBack with an unexist webviewId ".concat(e));__appServiceSDK__.traceEndEvent()},An=function(e,t,n,r,i,o,a,s){var c=Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+n[e]})).join("&"),u="/"+e+(c?"?"+c:"");__appServiceSDK__.traceBeginEvent("Framework","onAppRoute"),B("On app route: ".concat(e)),sn.appRouteTime=Date.now();var l=a.qualityData;if(l){var d=l.navId,f=l.isWebviewPreload,p=l.isPreloadPageFrame;Ge(Le,d),Ge(Be,f),Ge(Fe,p),Ge(We,r)}tn?Te(e,u,t,n,s,r):"navigateTo"===r?i?function(e,t,n,r,i){__appServiceSDK__.traceBeginEvent("Framework","onNavigateToPip"),Gt&&Tn(Gt,e),qe(e),"min"===i?(en=$t[$t.length-1],Mt.call(Yt,n)?M("Page route 错误(system error)","navigateTo with an already exist webviewId ".concat(n)):Cn(e,t,n,r)):"max"===i?en&&(on(e),Gt=en,$t.push(Gt),Gt.page.__callPageLifeTime__("onShow"),en=null):M("Page route 错误(system error)","navigateTo with unexpected pipMode"),__appServiceSDK__.traceEndEvent()}(e,u,t,n,i):function(e,t,n,r,i){__appServiceSDK__.traceBeginEvent("Framework","onNavigateTo"),Gt&&Tn(Gt,e),qe(e),Mt.call(Yt,n)?M("Page route 错误(system error)","navigateTo with an already exist webviewId ".concat(n)):Cn(e,t,n,r,{initialRenderingCacheData:i}),__appServiceSDK__.traceEndEvent()}(e,u,t,n,o):"redirectTo"===r?function(e,t,n,r,i){__appServiceSDK__.traceBeginEvent("Framework","onRedirectTo"),Gt&&En(Gt,e),qe(e),Mt.call(Yt,n)?M("Page route 错误(system error)","redirectTo with an already exist webviewId ".concat(n)):Cn(e,t,n,r,{initialRenderingCacheData:i}),__appServiceSDK__.traceEndEvent()}(e,u,t,n,o):"navigateBack"===r?i?function(e,t){__appServiceSDK__.traceBeginEvent("Framework","onNavigateBack"),"min"===t?(en=$t[$t.length-1],xn(e,!0)):"max"===t&&(en=null,xn(e))}(t,i):xn(t):"switchTab"===r?function(e,t,n,r,i){__appServiceSDK__.traceBeginEvent("Framework","onSwitchTab");var o=!0,a=!0;if(0===$t.length)return Cn(e,t,n,r,{initialRenderingCacheData:i}),void __appServiceSDK__.traceEndEvent();for(;$t.length>1;)en&&en.webviewId===$t[$t.length-1].webviewId?(($t=$t.slice(0,$t.length-1)).length?on($t[$t.length-1].route):on(""),o=!1):(En($t[$t.length-1],e),o=!1);if($t[0].webviewId===n)Gt=$t[0],o||nn()||Gt.page.__callPageLifeTime__("onShow");else if(Sn($t[0])?(a=!1,o&&Tn($t[0],e)):en&&en.webviewId===$t[0].webviewId?($t=$t.slice(0,$t.length-1),on("")):En($t[0],e),Mt.call(Yt,n)){var s=Yt[n],c=s.page,u=s.node;$t=[Gt={webviewId:n,route:e,page:c,node:u}],nn()||c.__callPageLifeTime__("onShow"),Ot("enterPage",c),Ot("switchTab",c)}else $t=[],Cn(e,t,n,r,{isMainTabBarPage:a,initialRenderingCacheData:i});__appServiceSDK__.traceEndEvent()}(e,u,t,n,o):"appLaunch"===r?function(e,t,n,r,i,o){__appServiceSDK__.traceBeginEvent("Framework","onAppLaunch"),He(De),sn.appLaunchTime=Date.now(),sn.appFgTime=Date.now(),Mt.call(Yt,n)?M("Page route 错误(system error)","appLaunch with an already exist webviewId ".concat(n)):Cn(e,t,n,r,{isMainTabBarPage:Sn({route:e}),initialRenderingCacheData:i,prerender:o}),__appServiceSDK__.traceEndEvent();var a=__appServiceSDK__.getLaunchOptionsSync().scene;[1001,1003,1019,1023,1038,1056,1080,1083,1089,1090,1103,1104,1112,1113,1114,1117,1127,1131,1134].indexOf(a)<0||__appServiceSDK__.loadExitState((function(e,t,n){"latestPage"===e?setTimeout((function(){Zt=n,__appServiceSDK__.route.redirectTo({url:t})}),0):"homePageAndLatestPage"===e?setTimeout((function(){Zt=n,__appServiceSDK__.route.navigateTo({url:t})}),0):Zt=n}))}(e,u,t,n,o,a.prerender):"reLaunch"===r||"autoReLaunch"===r?function(e,t,n,r,i,o,a){__appServiceSDK__.traceBeginEvent("Framework","onReLaunch");var s=!1;for("reLaunch"===i&&(s=!0);$t.length>0;){var c=!0;s&&(c=!1,s=!1),En($t[$t.length-1],e,!1,c)}Object.keys(Yt).forEach((function(t){En(Yt[t],e,!1,!0)})),qe(e),Cn(e,t,n,r,{isMainTabBarPage:Sn({route:e}),initialRenderingCacheData:o,prerender:a}),__appServiceSDK__.traceEndEvent()}(e,u,t,n,r,o,a.prerender):"dismissPip"===r?en&&function(){__appServiceSDK__.traceBeginEvent("Framework","unloadPagePip");var e=en;e&&($t.findIndex((function(e){return e.webviewId===en.webviewId}))>=0?en=null:(Wt(e.webviewId),e.page.__callPageLifeTime__("onUnload"),e.node&&we.destroy(e.page),H()&&(delete __wxAppData[e.route],__appServiceSDK__.publishUpdateAppData()),delete Yt[e.webviewId],Ot("pageUnload",e.page),Ot("leavePage",e.page),__appServiceSDK__.traceEndEvent(),__appServiceSDK__.uploadUserLogOnHide(e.route)))}():M("Page route 错误(system error)","Illegal open type: ".concat(r)),__appServiceSDK__.traceEndEvent()},Pn=function(e,t){if(B("On page reload: ".concat(e)),Mt.call(Yt,t)){var n=_n(e),r=Yt[t].statesData;Yt[t].statesData=void 0,__virtualDOM__.restoreView(t),In(Yt[t],t,Date.now(),r||{},!0),function(e,t){var n=t.pageCount,r=t.pageType,i=Y[e]||{},o=[n,r,i.rootCompCount||0,i.rootCustomCompCount||0,i.rootCustomCompRatio||0,i.rootInternalCompCount||0].map(encodeURIComponent).join(",");Y[e]={},Reporter.reportKeyValue({key:"WebviewRestore",value:o}),Reporter.submit()}(t,{pageCount:$t.length,pageType:n?2:1})}else M("Page reload(system error)","Can not find webviewId ".concat(t))},Dn=function(){var e=$t[$t.length-1],t=e.route,n=e.webviewId;Pn(t,n)},On=function(e,t){if(null!=Yt[t]){Ut(t);var n=__appServiceSDK__.getInnerEnterOptionsSync(),r=n.chatroomUsername,i=n.scene,o=(e.detail||{}).openType,a=e.origin||"weixin";(function(e,t){var n,r=e,i=Yt[t],o=i.page;if(vn(o,"onShareAppMessage")&&(n="onShareAppMessage"),n){B("Invoke event ".concat(n," in page: ").concat(i.route));var a={from:e.fromShareButton?"button":"menu",target:e.target};e.webViewUrl&&(a.webViewUrl=e.webViewUrl);var s=U.call(o,n,a)||{},c=s.promise;delete s.promise,O(c)||(c=Promise.resolve(s));var u=new Promise((function(e){return setTimeout(e,3e3,s)}));return Promise.race([u,c]).then((function(t){return r.title=t.title&&"string"==typeof t.title?t.title:e.title,r.desc=t.desc&&"string"==typeof t.desc?t.desc:e.desc,r.path=t.path&&"string"==typeof t.path?Z(qt(t.path)):e.path,"string"==typeof t.imageUrl&&(t.imageUrl&&!/^(http|https|wxfile|cloud):\/\//.test(t.imageUrl)?r.imageUrl=jt(t.imageUrl,!1):r.imageUrl=t.imageUrl),r.toCurrentGroup=t.toCurrentGroup,t.cacheKey&&(r.cacheKey=t.cacheKey),t.webpageUrl&&(r.webpageUrl=t.webpageUrl),"wx60422b707e49ff2e"===__wxConfig.accountInfo.appId&&(t.bizSourceName&&(r.bizSourceName=t.bizSourceName),t.bizSourceIconUrl&&(r.bizSourceIconUrl=t.bizSourceIconUrl)),r.path.length>0&&"/"===r.path[0]&&(r.path=r.path.substr(1)),Vt.isPrivateMessage?r.disableForward=!0:r.disableForward="boolean"==typeof t.disableForward&&t.disableForward,r.success=t.success,r.cancel=t.cancel,r.fail=t.fail,r.complete=t.complete,Ot("share",o),r}))}return Promise.resolve(r)})(e,t).then((function(n){var s,c;if(1158===i&&void 0===n.toCurrentGroup&&(n.toCurrentGroup=!0),!0===e.fromShareButton){s="shareAppMessageDirectly";var u=__appServiceSDK__.getShareCookieString();if(u&&(n.messageExtraData=n.messageExtraData||{},n.messageExtraData.cookies=u),c=2,"shareToChatroom"===o&&n.toCurrentGroup){if(1156!==i||!r)return void console.warn("shareToChatroom:fail scene ".concat(i,", chatroomUsername ").concat(r));n.chatroomUsername=r,n.bizType=1,s="shareAppMessageToSpecificContactForFakeNativeDirectly"}}else s="shareAppMessage",n.to=a,c=1;1158===i&&n.toCurrentGroup&&(s="shareAppMessageToSpecificContactDirectly",n.chatroomUsername=r);7===__wxConfig.appType&&"wxfe02ecfe70800f46"!==__wxConfig.accountInfo.appId&&(n.bizType=1,s="shareAppMessageForFakeNative",1156!==i&&1158!==i||!n.toCurrentGroup||(s="shareAppMessageToSpecificContactForFakeNativeDirectly")),n.useDefaultSnapshot=!0,n.webviewId=t,!H()&&__appServiceSDK__.checkAPIAvailable("share")||(n=G({},n),["success","fail","cancel","complete"].some((function(e){return"function"==typeof n[e]}))&&__appServiceSDK__.reportRecycledAPI({name:s,strategy:1}),"shareToChatroom"!==o&&(delete n.success,delete n.fail,delete n.cancel,delete n.complete));var l=function(){__appServiceSDK__[s](n,{beforeAll:function(e){var t=un();try{!function(e,t,n){var r=e.page.__displayReporter;r.checkShowOptions();var i=r.showOptions,o=r.route+".html",a=t.errMsg,s=0,c=e.updateTitle&&e.updateTitle.trim(),u=(__wxConfig.global&&__wxConfig.global.window||{}).navigationBarTitleText||"",l=((__wxConfig.page[o]||{}).window||{}).navigationBarTitleText||"",d=__wxConfig.host&&__wxConfig.host.appId||"";a.indexOf(":ok")>=0?s=1:a.indexOf(":fail")>=0?s=2:a.indexOf(":cancel")>=0&&(s=3);var f=[i.scene,i.scene_note,i.sessionid,o,c||l||u,i.apptype,s,0,i.query,n,0,"","",d].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Share",value:f,force:!0}),Reporter.submit()}(t,e,c)}catch(e){}e.errMsg=e.errMsg.replace(/shareAppMessageDirectly|shareAppMessageToSpecificContactForFakeNativeDirectly|shareAppMessageForFakeNative|shareAppMessageToSpecificContactDirectly/,"shareAppMessage"),__appServiceSDK__.reportShareAppMessage("shareAppMessage",e),void 0!==e.shareInfos&&e.shareInfos.length>0&&(e.shareTickets=e.shareInfos.filter((function(e){return e.shareKey&&e.shareName})).map((function(e){return __appServiceSDK__.showUpdatableMessageSubscribeButton({shareKey:e.shareKey}),Ft.set(e.shareKey,e.shareName)}))),delete e.shareInfos}})};return"string"==typeof n.imageUrl?__appServiceSDK__.getCloudFileUrl([n.imageUrl],"image",(function(e){n.imageUrl=e.data[0].url,l()})):l(),null})).catch((function(e){console.warn("onShareAppMessage error ",e)}))}},Nn=function(e){__appServiceSDK__.shareTimeline(e,{beforeAll:function(e){__appServiceSDK__.reportShareAppMessage("shareTimeline",e)}})},Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(null!=Yt[t]){var n=Yt[t],r=n.page,i={from:e.fromShareTimeLineButton?"button":"menu",target:e.target},o=vn(r,"onShareTimeline")&&U.call(r,"onShareTimeline",i)||{},a=o.title,s=o.query,c={title:a||e.title,path:"string"==typeof s?"".concat(n.route,".html?").concat(s):n.rawPath.replace(/^\//,"").replace(/(\?|$)/,".html$1")};"string"==typeof o.imageUrl&&o.imageUrl?(/^(http|https|wxfile|cloud):\/\//.test(o.imageUrl)?c.imageUrl=o.imageUrl:c.imageUrl=jt(o.imageUrl,!1),__appServiceSDK__.getCloudFileUrl([c.imageUrl],"image",(function(e){c.imageUrl=e.data[0].url,Nn(c)}))):Nn(c)}},Mn=function(e){if(Yt[e]){var t=Yt[e].page;vn(t,"onShareTimeline")&&vn(t,"onShareAppMessage")&&__appServiceSDK__.showShareTimelineMenu()}},Ln=null;__appServiceSDK__.onAppRoute(j((function(e){var t=e.path,n=e.webviewId,r=e.viewId,i=e.query||{},o=e.openType,a=e.pipMode,s=e.initialRenderingCacheData;if("appLaunch"===o&&e.frameset&&(tn=!0),!s&&e.appserviceData)try{s=JSON.parse(e.appserviceData)}catch(e){}Ln&&Ln(),e.resizing?Ln=j((function(){Ln=null,An(t,n,i,o,a,s,e,r)}),"onAppRoute"):An(t,n,i,o,a,s,e,r)}),"`onAppRoute`")),__appServiceSDK__.onAppRouteResized((function(){Ln&&Ln()})),__appServiceSDK__.onPageReload(j((function(e){var t=e.path,n=e.webviewId;Pn(t,n)}),"onPageReload")),__appServiceSDK__.onWebviewEvent(j((function(e){__appServiceSDK__.traceBeginEvent("Framework","onWebviewEvent");var t=e.webviewId,n=e.eventName,r=e.data,i=function(e,t,n,r){if(Mt.call(Yt,e)){var i=Yt[e],o=i.page;if("__DOMReady"===n)return sn.pageReadyTime=Date.now(),B("Invoke event onReady in page: ".concat(i.route)),o.__callPageLifeTime__("onReady"),void cn("newPage2pageReady",sn.newPageTime,sn.pageReadyTime);if("telecontrol"!==n){if(r._requireActive){var a=$t[$t.length-1];if(!a||a.webviewId!==e)return}if(r._relatedInfo&&ie.setEventRelatedInfo(r._relatedInfo),t){var s=__virtualDOM__.getNodeById(t,e);if(!s)return;var c=exparser.Element.getMethodCaller(s);return B("Invoke event ".concat(n," in component: ").concat(s.is)),vn(c,n)?an(c,n,r):void L("事件警告","Do not have ".concat(n," handler in component: ").concat(s.is,". Please make sure that ").concat(n," handler has been defined in ").concat(s.is,"."))}if(B("Invoke event ".concat(n," in page: ").concat(i.route)),vn(o,n))return an(o,n,r);L("事件警告","Do not have ".concat(n," handler in current page: ").concat(i.route,". Please make sure that ").concat(n," handler has been defined in ").concat(i.route,", or ").concat(i.route," has been added into app.json"))}else{var u=r.type,l="onTelecontrolSelect";if("start"===u)__appServiceSDK__.publishTelecontrol({type:u,custom:vn(o,l)},[e]);else if("next"===u){if(B("Invoke event ".concat(l," in page: ").concat(i.route)),!vn(o,l))return void L("事件警告","Do not have ".concat(l," handler in current page: ").concat(i.route,". Please make sure that ").concat(l," handler has been defined in ").concat(i.route,", or ").concat(i.route," has been added into app.json"));var d=an(o,l,{current:r.current,target:r.target,key:r.key});if(O(d)){var f=new Promise((function(e){return setTimeout(e,1e3,"")}));Promise.race([d,f]).then((function(t){__appServiceSDK__.publishTelecontrol({seqId:r.seqId,type:u,res:t},[e])})).catch((function(){}))}else __appServiceSDK__.publishTelecontrol({seqId:r.seqId,type:u,res:d},[e])}}}}(t,e.nodeId,n,r);return __appServiceSDK__.traceEndEvent(),i}),"onWebviewEvent")),__appServiceSDK__.onAppEnterForeground((function(e){sn.appFgTime=Date.now(),0!==e.scene&&"0"!==e.scene&&(Ht=e.scene)})),__appServiceSDK__.onPullDownRefresh(j((function(e,t){!function(e){if(Mt.call(Yt,e)){var t=Yt[e],n=t.page;vn(n,"onPullDownRefresh")&&(B("Invoke event onPullDownRefresh in page: ".concat(t.route)),U.call(n,"onPullDownRefresh"),Ot("pullDownRefresh",n))}else L("事件警告","onPullDownRefresh WebviewId: ".concat(e," not found"))}(t)}),"onPullDownRefresh")),__appServiceSDK__.onShareAppMessage(j(On,"onShareAppMessage"));var Bn=function(e,t){if(e=e||{},null!==Yt[t]){var n=Yt[t],r=n.page,i={path:function(e){if(null===Yt[e])return"";var t=Yt[e].page,n=t.options||{},r=Z(t.route);return Object.keys(n).length&&(r+="?"+Object.keys(n).map((function(e){return"".concat(e,"=").concat(n[e])})).join("&")),r}(t),fromButton:!!e.fromButton};if(vn(r,"onHandoff")){B("Invoke event onHandoff in page: ".concat(n.route));var o=U.call(r,"onHandoff")||{};o.path&&"string"==typeof o.path&&(i.path=Z(qt(o.path)))}__appServiceSDK__.startHandoff(i)}};__appServiceSDK__.onAddToFavorites(j((function(e,t){if(null!==Yt[t]){var n=e,r="onAddToFavorites",i=Yt[t],o=i.page;if(vn(o,r)){B("Invoke event ".concat(r," in page: ").concat(i.route));var a={webViewUrl:n.webViewUrl},s=U.call(o,r,a)||{};if(s.title&&"string"==typeof s.title&&(n.title=s.title),s.query&&"string"==typeof s.query){var c=n.path.split("?")[0];n.path="".concat(c,"?").concat(s.query)}s.imageUrl&&"string"==typeof s.imageUrl&&(/^(https?|wxfile|cloud):\/\//.test(s.imageUrl)?n.imageUrl=s.imageUrl:n.imageUrl=jt(s.imageUrl,!1)),n.disableForward=s.disableForward||!1}__appServiceSDK__.getCloudFileUrl([n.imageUrl],"image",(function(e){n.imageUrl=e.data[0].url,__appServiceSDK__.addToFavorites(n,{})}))}}),"onAddToFavorites")),__appServiceSDK__.onStartHandoff(j(Bn,"onStartHandoff")),__appServiceSDK__.subscribeTapHandoffButton((function(e,t){j(Bn,"onStartHandoff")({fromButton:!0},t)})),__appServiceSDK__.subscribeTapShareButton((function(e,t){if(Mt.call(Yt,t)){var n=Yt[t].page,r=Z(n.route);Object.keys(n.options).length>0&&(r+="?"+Object.keys(n.options).map((function(e){return"".concat(e,"=").concat(n.options[e])})).join("&")),j(On,"onShareAppMessage")({path:r,title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareButton:!0},t)}else L("事件警告","tapShareButton WebviewId: ".concat(t," not found"))})),__appServiceSDK__.subscribeTapShareTimeLineButton((function(e,t){if(Mt.call(Yt,t)){var n=Yt[t].page;vn(n,"onShareTimeline")&&vn(n,"onShareAppMessage")?j(Rn,"onShareTimeline")({title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareTimeLineButton:!0},t):L("事件警告","onShareTimeline and onShareAppMessage are both needed")}else L("事件警告","tapShareButton WebviewId: ".concat(t," not found"))})),__appServiceSDK__.onShareTimeline(j(Rn,"onShareTimeline")),__appServiceSDK__.subscribeSavePageState(j((function(e,t){Mt.call(Yt,t)?Yt[t].statesData=e:L("事件警告","onPageWillManuallyTerminate WebviewId: ".concat(t," not found"))}),"savePageState")),__appServiceSDK__.subscribeRecycleStatistics(j((function(e,t){if(Mt.call(Yt,t)){var n=Yt[t];!function(e,t){var n=t.pageCount,r=t.pageType,i=t.rootCompCount,o=void 0===i?0:i,a=t.rootCustomCompCount,s=void 0===a?0:a,c=t.rootCustomCompRatio,u=void 0===c?0:c,l=t.rootInternalCompCount,d=void 0===l?0:l,f=[n,r].map(encodeURIComponent).join(",");Y[e]={rootCompCount:o,rootCustomCompCount:s,rootCustomCompRatio:u,rootInternalCompCount:d},Reporter.reportKeyValue({key:"WebviewRecycle",value:f}),Reporter.submit()}(t,r()({pageCount:$t.length,pageType:_n(n.route)?2:1},e))}}),"recycleStatistics")),__appServiceSDK__.onTabItemTap(j((function(e,t){if(__appServiceSDK__._setWxIsInvokeInTapForNavToMiniProgram(),Mt.call(Yt,t)){var n=Yt[t],r=n.page;if(void 0!==__wxConfig&&__wxConfig.tabBar&&__wxConfig.tabBar.list&&__wxConfig.tabBar.list[e.index]){var i={index:e.index,pagePath:(__wxConfig.tabBar.list[e.index].pagePath||"").replace(/\.html$/,""),text:__wxConfig.tabBar.list[e.index].text};if(i.pagePath!==n.route)return;vn(r,"onTabItemTap")&&(B("Invoke event onTabItemTap in page: ".concat(n.route)),__virtualDOM__.wrapTapMark((function(){U.call(r,"onTabItemTap",i)})))}}}),"tabItemTap"));var Fn=function(){return Kt};__appServiceSDK__.onNavigationBarTitleUpdate((function(e){if(e.errMsg.indexOf(":ok")>=0&&e.title){var t=un();t&&(t.updateTitle=e.title)}}));var jn=__appServiceSDK__.createPluginWX,Wn=__appServiceSDK__.createPluginConsole,Un=function(e,t){var n=e+"/"+t,r={__wxAppCode__:{},__wxAppCurrentFile__:""};r.wx=jn(e,t),r.console=Wn(),r.Page=function(e){bn(e,n,r.__wxAppCode__,r.__wxAppCurrentFile__,r)},r.getCurrentPages=function(){return pn(e)},r.Component=function(e){return yn(e,n,r.__wxAppCode__,r.__wxAppCurrentFile__,r)},r.Behavior=function(e){return __virtualDOM__.Behavior(e,n,r.__wxAppCode__,r.__wxAppCurrentFile__)},r.publishDomainComponents=function(e){return __virtualDOM__.publishDomainComponents(n,e)};var i,o=function(e){var t=[];__wxConfig.plugins&&Object.keys(__wxConfig.plugins).forEach((function(e){var n=__wxConfig.plugins[e];t.push({alias:e,plugin:n,prefix:""})})),__wxConfig.subpackages&&__wxConfig.subpackages.forEach((function(e){e.plugins&&Object.keys(e.plugins).forEach((function(n){var r=e.plugins[n];t.push({alias:n,plugin:r,prefix:e.root})}))}));var n=function(){var n=t.filter((function(t){return t.plugin.provider===e}));if(0===n.length)return null;if(1===n.length){var r=n[0].plugin.subpackage||n[0].prefix;return"__APP__"===r&&(r=""),n[0].prefix=r,n[0]}return n.find((function(e){return""!==e.prefix}))}();if(null===n)return null;if(void 0===n.plugin.export)return null;var r=n.prefix||"";return"/"===r[0]&&(r=r.slice(1)),r&&"/"!==r.slice(-1)&&(r+="/"),r+(n.plugin.export||"")}(e);return r.requireMiniProgram=function(){return void 0===i&&(i=null===o?{}:requireMiniProgramFile(o)),i},r.beforeFactory=function(t){var n=__appServiceSDK__.buildPluginPrivateApi(e);t("__wx__/plugin-private-api",(function(e,t){t.exports=n}))},r};"function"==typeof logxx&&logxx("app-service-engine start");var Vn=j((function(e){bn(e,"/")}),"create page instance"),Gn=j((function(e){return ue(e),yn(e,"/")}),"create component instance"),Hn=j((function(e){return ue(e),__virtualDOM__.Behavior(e)}),"create behavior instance");__appServiceEngine__=t})();var Page=__appServiceEngine__.Page,Component=__appServiceEngine__.Component,Behavior=__appServiceEngine__.Behavior,__webview_engine_version__=.02,__vd_version_info__={delayedGwx:!0},App=__appServiceEngine__.App,getApp=__appServiceEngine__.getApp,getCurrentPages=__appServiceEngine__.getCurrentPages,__pageComponent=null;"undefined"!=typeof __exportGlobal__&&(__exportGlobal__.Page=__appServiceEngine__.Page,__exportGlobal__.Component=__appServiceEngine__.Component,__exportGlobal__.Behavior=__appServiceEngine__.Behavior,__exportGlobal__.__webview_engine_version__=.02,__exportGlobal__.__vd_version_info__={delayedGwx:!0},__exportGlobal__.App=__appServiceEngine__.App,__exportGlobal__.getApp=__appServiceEngine__.getApp,__exportGlobal__.getCurrentPages=__appServiceEngine__.getCurrentPages,__exportGlobal__.__pageComponent=null);var __wxModule__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requirePlugin=t.definePlugin=void 0;var r=n(1),i=n(5);t.definePlugin=r.definePlugin,t.requirePlugin=i.requirePlugin},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.definePlugin=t.innerDefineFactory=void 0;var r,i=n(2),o=n(3),a=(r=o)&&r.__esModule?r:{default:r},s=n(4);var c=a.default.plugin;t.innerDefineFactory=function(e){return function(t,n){var r=c[e];if(void 0===r)throw new Error('Sorry, plugin "'+e+'" is not defined.');r.mods[t]={status:i.MODULE_STATUS_UNLOAD,factory:n}}},t.definePlugin=function(e,t){var n=(0,s.parseSchema)(e);if(!n||!n.pluginId||!n.version)throw new Error('schema must match "plugin://{name}/{version}"');var r=(0,s.getModKey)(n),o=function(e){if(void 0===__appServiceEngine__||"function"!=typeof __appServiceEngine__.__createPluginGlobal)throw new Error("Create plugin global failed.");return __appServiceEngine__.__createPluginGlobal(e.pluginId,e.version)}(n);c[r]={status:i.MODULE_STATUS_UNLOAD,factory:t,mods:{},global:o}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_STATUS_LOADED=2,t.MODULE_STATUS_UNLOAD=1},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={app:{},plugin:{}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=/^plugin:\/\/([A-Za-z0-9_-]+)[\/]?(.*)/,i=(t.parseSchema=function(e){var t=e.match(r);if(t&&3===t.length)return{pluginId:t[1],version:"0",modId:t[2].length>=1?t[2]:void 0}},t.getModKey=function(e){return e.pluginId+"/"+e.version},t.getModDir=function(e){var t=e.match(/(.*)\/([^\/]+)?$/);return t&&t[1]?t[1]:"./"},t.checkWxConfig=function(){if(void 0===__wxConfig||void 0===__wxConfig.plugins&&void 0===__wxConfig.gamePlugins)throw new Error("This application has not registered any plugins yet.")},t.checkSchema=function(e){if("string"!=typeof e)throw new Error("requirePlugin args must be a string.")},t.getSchemaFromConfig=function(e){var t=e.match(/([^\/]*)\/?(.*)/);if(!t||t.length<2)throw new Error('Plugin "'+e+'" has not registered.');var n=t[1],r=t[2],i=(__wxConfig.plugins||__wxConfig.gamePlugins)[n];if(void 0===i)throw new Error('Plugin "'+e+'" has not registered.');return{pluginId:i.provider,version:"0",path:r}},["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"]);t.loadSubPackage=function(e,t){var n="__APP__"===e;n||"/"===e.slice(-1)||(e+="/"),"devtools"===__wxConfig.platform?(wxNativeConsole.info("[WebNode] injectSubPackages: "+e),WeixinJSBridge.invoke("injectSubPackages",{subPackages:[e]},t)):(wxNativeConsole.info("[WebNode] loadSubpackage: "+e),__appServiceSDK__.loadSubpackage({name:e,success:function(){var r=Object.values(__wxConfig.plugins||{}).filter((function(t){return t.subpackage.includes(e)})).map((function(e){var t=e.provider,n="__plugin__/"+t;return{plugin_id:t,prefix_path:i.includes(t)?null:n}}));__subContextEngine__.injectEntryFile(n?"":e,r),t()}}))},t.matchSubPackage=function(e){for(var t=__wxConfig.subPackages||[],r=function(n){if(!t[n].plugins)return"continue";if(Object.keys(t[n].plugins).find((function(r){return t[n].plugins[r].provider===e}))){var r=t[n].root||"";return r&&"/"!==r.slice(-1)&&(r+="/"),{v:r}}},i=0;i<t.length;++i){var o=r(i);switch(o){case"continue":continue;default:if("object"===(void 0===o?"undefined":n(o)))return o.v}}return"__APP__"},t.isAppId=function(e){return null!==e.match(/^wx[0-9a-f]{16}$/)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requirePlugin=void 0;var r,i=n(1),o=n(3),a=(r=o)&&r.__esModule?r:{default:r},s=n(2),c=n(4);var u=a.default.plugin,l=function(e){for(var t=[],n=e.split("/"),r=0,i=n.length;r<i;++r){var o=n[r];if(""!=o&&"."!=o)if(".."==o){if(0==t.length){t=null;break}t.pop()}else r+1<i&&".."==n[r+1]?r++:t.push(o)}return t},d=function(e,t){var n=u[e],r=l(t+"/index.js").join("/");return n&&n.mods&&n.mods[r]?r:(r=l(t).join("/"),/\.js$/.test(r)||(r+=".js"),n&&n.mods&&n.mods[r]?r:"")},f=function(e,t){var n=(0,c.getModDir)(t);return function(t){if("string"!=typeof t)throw new Error("require args must be a string.");var r=l(t.startsWith("/")?t:n+"/"+t);if(!r)throw new Error("can't find module : "+t);try{var i=r.join("/");return i=function(e,t,n,r){var i=t,o=u[e];if(/\.js$/.test(i)||(i+=".js"),"string"==typeof i&&o&&o.mods&&o.mods[i])return i;var a=l(n);if(!a)throw new Error("can't find module : "+r);for(var s=t.substring(a.join("/").length),c=void 0;a.length;){var f=a.join("/")+"/miniprogram_npm"+s;if(c=d(e,f))break;a.pop()}return c||(s="/"===s[0]?s:"/"+s,c=d(e,"miniprogram_npm"+s)),c||t}(e,i,n,t),p(e,i)}catch(e){throw e}}},p=function(e,t){!function(e){if("string"!=typeof e)throw new Error("require args must be a string")}(t);var n=u[e];if(void 0===n)throw new Error('Plugin "'+e+'" is not defined.');var r=n.mods[t];if(void 0===r)throw new Error('Plugin module "'+t+'" is not defined.');if(r.status===s.MODULE_STATUS_UNLOAD){r.status=s.MODULE_STATUS_LOADED;var i=void 0,o=r.factory,a={exports:{}};o&&(i=o(f(e,t),a,a.exports)),r.exports=void 0!==a.exports?a.exports:i}return r.exports},h=function(e,t){var n=t.factory,r=t.global,o={exports:{}};if(!n)return o.exports;var a=(0,i.innerDefineFactory)(e),s=function(e){return function(t){return p(e,t)}}(e),c=r.beforeFactory;delete r.beforeFactory;var u=r.afterFactory;delete r.afterFactory,"function"==typeof c&&c.apply(r,[a,s,o]);var l=n(a,s,o,o.exports,r,r.wx,void 0,r.Page,r.Component,r.Behavior,void 0,r.getCurrentPages,void 0,r.requireMiniProgram);return"function"==typeof u&&u.apply(r,[a,s,o]),void 0!==o.exports?o.exports:l},g=function e(t,n){(0,c.checkWxConfig)(),(0,c.checkSchema)(t);var r=void 0,i=void 0,o=void 0,a=(0,c.parseSchema)(t),l=void 0===a;if(l||(r=a.pluginId,i=(0,c.getModKey)(a),o=u[i]),void 0===o&&(0,c.isAppId)(t)&&(r=t,i=(0,c.getModKey)({pluginId:t,version:"0"}),o=u[i]),void 0===o){var d=(0,c.getSchemaFromConfig)(t);r=d.pluginId,i=(0,c.getModKey)(d),o=u[i]}if("function"!=typeof n){if(void 0===o)throw new Error('Plugin "'+i+'" is not defined.');return o.status===s.MODULE_STATUS_UNLOAD&&(o.exports=h(i,o),o.status=s.MODULE_STATUS_LOADED),l?"function"==typeof o.exports?o.exports():void 0:o.exports}if(void 0===o){var f=(0,c.matchSubPackage)(r);(0,c.loadSubPackage)(f,(function(){n(e(t))}))}else setTimeout((function(){n(e(t))}))};g.async=function(e){return new Promise((function(t,n){try{g(e,(function(e){t(e)}))}catch(e){n(e)}}))},t.requirePlugin=g}]),definePlugin=__wxModule__.definePlugin,requirePlugin=__wxModule__.requirePlugin;!function(e){var t={},n={};define=function(e,n){if(t[e]&&t[e].factory){var r=t[e],i=n.toString();r.factoryString||(r.factoryString=r.factory.toString()),i!==r.factoryString&&(t[e]={status:1,factory:n,factoryString:i})}else t[e]={status:1,factory:n}};var r=function(e){if(e&&__wxConfig.subPackages)for(var t=0,n=__wxConfig.subPackages.length;t<n;t++)if(0===e.indexOf(__wxConfig.subPackages[t].root))return __wxConfig.subPackages[t]},i=function(e){for(var t=[],n=e.split("/"),r=0,i=n.length;r<i;++r){var o=n[r];if(""!=o&&"."!=o)if(".."==o){if(0==t.length){t=null;break}t.pop()}else r+1<i&&".."==n[r+1]?r++:t.push(o)}return t},o=function(e){var n=i(e+"/index.js").join("/");return t[n]?n:(n=i(e).join("/"),/\.js$/.test(n)||(n+=".js"),t[n]?n:"")},a=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"];var s=function(e){var n=function(e){var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"}(e),a=function(a,s){if("string"!=typeof a)throw new Error("require args must be a string");var c=i(n+"/"+a);if("/__wx__/private-api"===a&&(c=i(a)),!c)throw new Error("can not find module : "+a);try{var u=c.join("/");u=function(e,n,r){var a=e;if(/\.js$/.test(a)||(a+=".js"),"string"==typeof a&&t[a])return a;var s=i(n);if(!s)throw new Error("can not find module : "+r);for(var c,u=e.substring(s.join("/").length);s.length;){var l=s.join("/")+"/miniprogram_npm"+u;if(c=o(l))break;s.pop()}return c||(u="/"===u[0]?u:"/"+u,c=o(l="miniprogram_npm"+u)),c||e}(u,n,a);var l=function(e){return"functional-pages"===i(e)[0]};if(l(u)!==l(e)&&Reporter.thirdErrorReport({error:new Error('should not require across "functional-pages" folder'),extend:'at require("'+a+'") in '+e}),"devtools"===__wxConfig.platform&&__wxConfig.subPackages&&void 0===s){var d=r(u),f=r(e);if(d&&d!==f)throw new Error("should not require "+a+" in "+e+" without a callback, because they are in diffrent subPackages")}return require(u,void 0,s)}catch(e){throw e}};return a.async=function(e){return new Promise((function(t,n){try{a(e,(function(e){t(e)}))}catch(e){n(e)}}))},a};require=function(r,i,o){if(void 0===i&&(i=!0),"string"!=typeof r)throw new Error("require args must be a string");var c=t[r];if(!c){var u=-1===r.indexOf("/")?r+"/index.js":r;/\.js$/.test(u="miniprogram_npm/"+u)||(u+=".js"),c=t[u]}if(r.endsWith(".js")||(r+=".js"),!c&&"devtools"!==__wxConfig.platform&&void 0!==__subContextEngine__){var l="/"+r.substr(0,r.length-3)+".appservice.js",d={__wxRoute:e.__wxRoute,__wxAppCurrentFile__:e.__wxAppCurrentFile__,__wxRouteBegin:e.__wxRouteBegin};__subContextEngine__.loadJsFiles([l]),function(t){e.__wxRoute=t.__wxRoute,e.__wxAppCurrentFile__=t.__wxAppCurrentFile__,e.__wxRouteBegin=t.__wxRouteBegin}(d),c=t[r]}if("function"!=typeof o){if(!c)throw new Error('module "'+r+'" is not defined');var f={exports:{}},p=c.factory;if(!i||n[r])return delete c.exports,c.status=1,n[r]=!0,p&&p(s(r),f,f.exports),f.exports;if(1===c.status){c.exports=f.exports,c.status=2;var h=void 0;try{p&&(h=p(s(r),f,f.exports))}catch(e){throw c.status=1,e}c.exports=void 0!==f.exports?f.exports:h}return c.exports}c?setTimeout((function(){o(require(r))})):function(e,t){var n="__APP__"===e;"/"!==e.slice(-1)&&(e+="/"),"devtools"===__wxConfig.platform?(wxNativeConsole.info("[WebNode] injectSubPackages: "+e),WeixinJSBridge.invoke("injectSubPackages",{subPackages:[e]},t)):(wxNativeConsole.info("[WebNode] loadSubpackage: "+e),__appServiceSDK__.loadSubpackage({name:e,success:function(){var r=__wxConfig.subPackages.find((function(t){return t.root===e})),i=Object.keys(r.plugins||{}).map((function(e){var t=r.plugins[e].provider,n="__plugin__/"+t;return{plugin_id:t,prefix_path:a.includes(t)?null:n}}));__subContextEngine__.injectEntryFile(n?"":e,i),t()}}))}(function(e){var t=__wxConfig&&__wxConfig.subPackages;t||(t=[]);for(var n=0;n<t.length;++n){var r=t[n].root||"";if(r&&"/"!==r.slice(-1)&&(r+="/"),e.slice(0,r.length)===r)return r}return"__APP__"}(r),(function(){o(require(r))}))},requireOnce=function(e){return require(e,!1)},e.__modules__=t}(this);var requireMiniProgramFile=require,defineMiniProgramFile=define;;if(__wxConfig.platform!=="devtools"){var r={};Object.keys(regeneratorRuntime).forEach((function(e){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){return regeneratorRuntime[e]},set:function(t){return delete r[e],r[e]=t}})})),__exportGlobal__.regeneratorRuntime=r;};__exportGlobal__.definePlugin=__wxModule__.definePlugin;__exportGlobal__.requirePlugin=__wxModule__.requirePlugin;;__exportGlobal__.wx=wx;if(typeof __passWAServiceGlobal__==='function'){var __WAServiceGlobal__={};__WAServiceGlobal__.__appServiceEngine__=__appServiceEngine__;__WAServiceGlobal__.__appServiceSDK__=__appServiceSDK__;__WAServiceGlobal__.__virtualDOM__=__virtualDOM__;__WAServiceGlobal__.__subContextEngine__=__subContextEngine__;__WAServiceGlobal__.Protect=Protect;__WAServiceGlobal__.__safeway__=__safeway__;__WAServiceGlobal__.exparser=exparser;__WAServiceGlobal__.Reporter=Reporter;__passWAServiceGlobal__(__WAServiceGlobal__);};__subContextEngine__.initSubContext();})(this);var __WASubContextEndTime__ = Date.now();try { Error.stackTraceLimit = __defaultStackLimit__; __defaultStackLimit__ = undefined } catch (e) {};var __WXML_GLOBAL__=__WXML_GLOBAL__||{entrys:{},defines:{},modules:{},ops:[],wxs_nf_init:undefined,total_ops:0};var __vd_version_info__=__vd_version_info__||{};
typeof __wxLibrary.onEnd === 'function' && __wxLibrary.onEnd(); __wxLibrary = undefined;
